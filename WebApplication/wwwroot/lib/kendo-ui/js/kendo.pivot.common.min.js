/**
 * Kendo UI v2024.3.1015 (http://www.telerik.com/kendo-ui)
 * Copyright 2024 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(e){"function"==typeof define&&define.amd?define(["kendo.core.min"],e):e()}((function(){window.kendo.pivotgrid=window.kendo.pivotgrid||{},window.kendo.pivotgrid.common=function(e){var n={contains:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}") > 0',doesnotcontain:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}")',endswith:', Right({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"',eq:', {0}.CurrentMember.MEMBER_CAPTION = "{1}"',neq:', {0}.CurrentMember.MEMBER_CAPTION = "{1}"',startswith:', Left({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"'},r={doesnotcontain:"doesnotcontain",in:"in",neq:"neq"};function t(e){var t="",o=String(e.value),a=e.field,i=e.operator;return i===r.in?(t+="{",t+=o,t+="}"):(t+=i===r.neq||i===r.doesnotcontain?"-":"",t+="Filter(",t+=a+".MEMBERS",t+=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return n.forEach((function(n,r){e=e.replace(new RegExp("\\{".concat(r,"\\}"),"g"),n)})),e}(n[i],a,o),t+=")"),t}function o(e,n,r,t){var o,a="",s=function(e){for(var n,r=[],t=[],o=[],a=0;a<e.length;a++){var i=e[a],u=i.name;if(n=!1,u.length>1)t.push(i);else{for(var c=l(u[0]),s=0,f=o.length;s<f;s++)if(0===o[s].name[0].indexOf(c)){n=!0;break}n||o.push(i),i.expand&&r.push(i)}}return{expanded:r=r.concat(t),root:o}}(e=e||[]),f=s.expanded,m=function(e){var n=[];return e.forEach((function(e){var r=e.name[0],t=l(r);n.some((function(e){return 0===e.indexOf(t)}))||n.push(r)})),n}(s.root),p=[],d=f.length,h=0,A=[];if(m.length>1||n.length>1||t){for(p.push(u(m,n,t));h<d;h++)A=i(o=c(f[h].name,r),m),p.push(u(A,n,t));a+=p.join(",")}else{for(;h<d;h++)o=c(f[h].name,r),A.push(o[0]);a+=m.concat(A).join(",")}return a}function a(e){for(var n,r=e.length,t=[],o=0;o<r;o++)n=e[o],t.push(void 0!==n.name?n.name:n);return t}function i(e,n){var r=n.length;n=n.slice(0);for(var t=0;t<e.length;t++)for(var o=e[t],a=0;a<r;a++){var i=l(n[a]);if(-1!==o.indexOf(i)){n[a]=o;break}}return n}function u(e,n,r){var t=e.slice(0);return(n.length>1||r)&&t.push("{"+a(n).join(",")+"}"),s(t)}function c(e,n){var r=e.length-1,t=e[r],o=function(e,n){for(var r=0,t=e.length;r<t;r++)if(0===n.indexOf(e[r].field))return e[r];return null}(n,t);return o&&o.dir?t="ORDER("+t+".Children,"+o.field+".CurrentMember.MEMBER_CAPTION,"+o.dir+")":t+=".Children",e[r]=t,e}function l(e){var n=e.split(".");return n.length>2?n[0]+"."+n[1]:e}function s(e){var n,r="CROSSJOIN({";return e.length>2?(n=e.pop(),r+=s(e)):(r+=e.shift(),n=e.pop()),r+="},{",r+=n,r+="})"}function f(e){var n='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Execute xmlns="urn:schemas-microsoft-com:xml-analysis"><Command><Statement>',r=e.columnAxes,i=void 0===r?[]:r,u=e.rowAxes,c=void 0===u?[]:u,l=e.measureAxes,s=void 0===l?[]:l,f=e.sort,m=void 0===f?[]:f,p=e.filter,d=void 0===p?[]:p,h="rows"===e.measuresAxis;const A=function(e){let n=!1;for(let r=0;r<e.length&&(n=Boolean(e[r].type),!n);r++);return e.length>=1&&W(e)&&n}(s);return n+="SELECT NON EMPTY {",!i.length&&c.length&&(!s.length||s.length&&h)&&(i=c,c=[],h=!1),i.length||c.length||(h=!1),i.length?n+=o(i,h?[]:s,m,A):s.length&&!h&&(n+=a(s).join(",")),n+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON COLUMNS",(c.length||h&&s.length>1)&&(n+=", NON EMPTY {",c.length?n+=o(c,h?s:[],m):n+=a(s).join(","),n+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON ROWS"),d.length?(n+=" FROM ",n+="(",n+=function(e,n){for(var r="",o="",a=e.length-1;a>=0;a--)o="SELECT (",o+=t(e[a]),o+=") ON 0",r=a===e.length-1?o+=" FROM ["+n+"]":o+" FROM ( "+r+" )";return r}(d,e.connection.cube),n+=")"):n+=" FROM ["+e.connection.cube+"]",1===s.length&&!A&&i.length&&(n+=" WHERE ("+a(s).join(",")+")"),(n+="</Statement></Command><Properties><PropertyList><Catalog>"+e.connection.catalog+"</Catalog><Format>Multidimensional</Format></PropertyList></Properties></Execute></Body></Envelope>").replace(/&/g,"&amp;")}var m=function(e,n){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},m(e,n)};function p(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}m(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var d=function(){return d=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},d.apply(this,arguments)};function h(e,n,r,t){return new(r||(r=Promise))((function(o,a){function i(e){try{c(t.next(e))}catch(e){a(e)}}function u(e){try{c(t.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,u)}c((t=t.apply(e,n||[])).next())}))}function A(e,n){var r,t,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,t&&(o=2&a[0]?t.return:a[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,a[1])).done)return o;switch(t=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,t=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e],t=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}function v(e,n,r){if(r||2===arguments.length)for(var t,o=0,a=n.length;o<a;o++)!t&&o in n||(t||(t=Array.prototype.slice.call(n,0,o)),t[o]=n[o]);return e.concat(t||Array.prototype.slice.call(n))}function O(e){var n=(new DOMParser).parseFromString(e,"text/xml"),r=Array.from(n.querySelectorAll("Axis")),t=Array.from(n.querySelectorAll("CellData > Cell")).map((function(e){return{fmtValue:g(e,"FmtValue"),ordinal:parseInt(e.getAttribute("CellOrdinal"),10),value:g(e,"Value")}})),o={tuples:[]},a={tuples:[]},i=[];r.forEach((function(e){if("SlicerAxis"!==e.getAttribute("name")){var n=0===o.tuples.length?o.tuples:a.tuples;Array.prototype.push.apply(n,function(e){var n=Array.from(e.querySelectorAll("Tuple"));return n.map((function(e){return{members:Array.from(e.querySelectorAll("Member")).map((function(e){var n=parseInt(g(e,"LNum")||"0",10),r=parseInt(g(e,"CHILDREN_CARDINALITY")||"0",10)>0;return{caption:g(e,"Caption"),children:[],hasChildren:r,hierarchy:e.getAttribute("Hierarchy"),levelName:g(e,"LName"),levelNum:n,name:g(e,"UName"),parentName:g(e,"PARENT_UNIQUE_NAME")}}))}}))}(e))}}));var u=new Array(a.tuples.length*o.tuples.length).fill(null);t.forEach((function(e){u[e.ordinal]=e}));var c=0;return a.tuples.forEach((function(e){o.tuples.forEach((function(n){i.push({columnTuple:n,data:u[c],rowTuple:e}),c++}))})),{columns:o,data:i,rows:a}}function g(e,n){var r=e.querySelector(n);return r?r.textContent:""}var I={schemaCatalogs:"DBSCHEMA_CATALOGS",schemaCubes:"MDSCHEMA_CUBES",schemaDimensions:"MDSCHEMA_DIMENSIONS",schemaHierarchies:"MDSCHEMA_HIERARCHIES",schemaKPIs:"MDSCHEMA_KPIS",schemaLevels:"MDSCHEMA_LEVELS",schemaMeasures:"MDSCHEMA_MEASURES",schemaMembers:"MDSCHEMA_MEMBERS"};function N(e){var n={},r='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis">';return r+="<RequestType>"+(I[e.command]||e.command)+"</RequestType>",r+="<Restrictions>"+E("RestrictionList",e.restrictions,!0)+"</Restrictions>",e.connection&&e.connection.catalog&&(n.Catalog=e.connection.catalog),r+="<Properties>"+E("PropertyList",n,!1)+"</Properties>",r+="</Discover></Body></Envelope>"}function E(e,n,r){var t="";if(n){t+="<"+e+">";var o=void 0;for(var a in n)n[a]&&(o=n[a],r&&(a=a.replace(/([A-Z]+(?=$|[A-Z][a-z])|[A-Z]?[a-z]+)/g,"$1_").toUpperCase().replace(/_$/,"")),t+="<"+a+">"+o+"</"+a+">");t+="</"+e+">"}else t+="<"+e+"/>";return t}var y={schemaCatalogs:function(e){var n=(new DOMParser).parseFromString(e,"text/xml");return Array.from(n.querySelectorAll("DiscoverResponse > return > root > row")).map((function(e){return{name:g(e,"CATALOG_NAME"),description:g(e,"DESCRIPTION")}}))},schemaCubes:function(e){var n=(new DOMParser).parseFromString(e,"text/xml");return Array.from(n.querySelectorAll("DiscoverResponse > return > root > row")).map((function(e){return{name:g(e,"CUBE_NAME"),caption:g(e,"CUBE_CAPTION"),description:g(e,"DESCRIPTION"),type:g(e,"CUBE_TYPE")}}))},schemaDimensions:function(e){var n=(new DOMParser).parseFromString(e,"text/xml");return Array.from(n.querySelectorAll("DiscoverResponse > return > root > row")).map((function(e){return{caption:g(e,"DIMENSION_CAPTION"),defaultHierarchy:g(e,"DEFAULT_HIERARCHY"),description:g(e,"DESCRIPTION"),name:g(e,"DIMENSION_NAME"),type:parseInt(g(e,"DIMENSION_TYPE"),10),uniqueName:g(e,"DIMENSION_UNIQUE_NAME")}}))},schemaHierarchies:function(e){var n=(new DOMParser).parseFromString(e,"text/xml");return Array.from(n.querySelectorAll("DiscoverResponse > return > root > row")).map((function(e){return{name:g(e,"HIERARCHY_NAME"),caption:g(e,"HIERARCHY_CAPTION"),description:g(e,"DESCRIPTION"),uniqueName:g(e,"HIERARCHY_UNIQUE_NAME"),dimensionUniqueName:g(e,"DIMENSION_UNIQUE_NAME"),displayFolder:g(e,"HIERARCHY_DISPLAY_FOLDER"),origin:g(e,"HIERARCHY_ORIGIN"),defaultMember:g(e,"DEFAULT_MEMBER")}}))},schemaKPIs:function(e){var n=(new DOMParser).parseFromString(e,"text/xml");return Array.from(n.querySelectorAll("DiscoverResponse > return > root > row")).map((function(e){return{name:g(e,"KPI_NAME"),uniqueName:g(e,"KPI_NAME"),caption:g(e,"KPI_CAPTION"),value:g(e,"KPI_VALUE"),goal:g(e,"KPI_GOAL"),status:g(e,"KPI_STATUS"),trend:g(e,"KPI_TREND"),statusGraphic:g(e,"KPI_STATUS_GRAPHIC"),trendGraphic:g(e,"KPI_TREND_GRAPHIC"),description:g(e,"KPI_DESCRIPTION"),groupName:g(e,"MEASUREGROUP_NAME"),type:"kpi"}}))},schemaLevels:function(e){var n=(new DOMParser).parseFromString(e,"text/xml");return Array.from(n.querySelectorAll("DiscoverResponse > return > root > row")).map((function(e){return{name:g(e,"LEVEL_NAME"),caption:g(e,"LEVEL_CAPTION"),description:g(e,"DESCRIPTION"),uniqueName:g(e,"LEVEL_UNIQUE_NAME"),dimensionUniqueName:g(e,"DIMENSION_UNIQUE_NAME"),displayFolder:g(e,"LEVEL_DISPLAY_FOLDER"),orderingProperty:g(e,"LEVEL_ORDERING_PROPERTY"),origin:g(e,"LEVEL_ORIGIN"),hierarchyUniqueName:g(e,"HIERARCHY_UNIQUE_NAME")}}))},schemaMeasures:function(e){var n=(new DOMParser).parseFromString(e,"text/xml");return Array.from(n.querySelectorAll("DiscoverResponse > return > root > row")).map((function(e){return{name:g(e,"MEASURE_NAME"),caption:g(e,"MEASURE_CAPTION"),uniqueName:g(e,"MEASURE_UNIQUE_NAME"),description:g(e,"DESCRIPTION"),aggregator:g(e,"MEASURE_AGGREGATOR"),groupName:g(e,"MEASUREGROUP_NAME"),displayFolder:g(e,"MEASURE_DISPLAY_FOLDER"),defaultFormat:g(e,"DEFAULT_FORMAT_STRING")}}))},schemaMembers:function(e){var n=(new DOMParser).parseFromString(e,"text/xml");return Array.from(n.querySelectorAll("DiscoverResponse > return > root > row")).map((function(e){return{name:g(e,"MEMBER_NAME"),caption:g(e,"MEMBER_CAPTION"),uniqueName:g(e,"MEMBER_UNIQUE_NAME"),dimensionUniqueName:g(e,"DIMENSION_UNIQUE_NAME"),hierarchyUniqueName:g(e,"HIERARCHY_UNIQUE_NAME"),levelUniqueName:g(e,"LEVEL_UNIQUE_NAME"),childrenCardinality:g(e,"CHILDREN_CARDINALITY")}}))}},T=function(e){return"[Measures]"===e.hierarchy},_=function(e,n){return void 0===n&&(n=new Set),(e.children||[]).forEach((function(e){n.add(e.levelName),_(e,n)})),n.size},R=function(e){var n=0;return(e.children||[]).forEach((function(e){n+=R(e)||1})),n},C=function(e,n){return(n&&n.hierarchy===e.hierarchy?v(v([],(n.normalizedPath||[]).slice(0,-1),!0),[e.name||null],!1):v(v([],n&&n.normalizedPath?n.normalizedPath:[],!0),[e.name],!1)).filter(Boolean)},x=function(e,n,r,t,o,a,i,u){void 0===n&&(n=-1),void 0===r&&(r=0),void 0===t&&(t=void 0),void 0===o&&(o=void 0),void 0===a&&(a=void 0),void 0===i&&(i=void 0),void 0===u&&(u=void 0);var c=_(e),l=R(e),s=t||c,f=o||l,m=a?a.slice():[],p=i?i.slice():new Array(f),d=m.findIndex((function(n){return n&&n.name===e.levelName&&n.level===e.levelNum})),h=m[d],A={name:e.levelName,level:e.levelNum,index:n,cells:new Array(f).fill(null)},v=-1!==n&&-1!==r,O={caption:e.caption,name:e.name,levelName:e.levelName,levelNum:e.levelNum,hasChildren:e.hasChildren,parentName:e.parentName,hierarchy:e.hierarchy,total:void 0!==e.total&&e.total||u&&u.children.length<=1&&u.total,parent:u,rowIndex:n,colIndex:r,depth:1,breadth:1,path:e.path||[],normalizedPath:e.normalizedPath||[],children:e.children.filter((function(n){return n.hierarchy===e.hierarchy}))};if(v)if(h)h.cells[r]=O,h.index>=n&&(n=h.index);else if(m[n]&&m[n].cells.length){for(var g=n;g<m.length;g++)m[g].index++;m.splice(n,0,A),m[n].cells[r]=O}else m[n]=A,m[n].cells[r]=O;var I=0;return e.children&&e.children.length?e.children.forEach((function(e){var t=x(e,n+1,r+I,s,f,m,p,O),o=t[0],a=t[1],i=t[3];I+=i||1,m=o.slice(),p=a.slice()})):e.normalizedPath&&(p[r]={total:O.total,path:e.normalizedPath}),O.depth=c,O.breadth=l,[m,p,c,l]},S=function(e,n,r){var t;void 0===n&&(n=null),void 0===r&&(r=0);for(var o=d(d({},e),{total:!0,hasChildren:!1,children:[]}),a=0;a<e.children.length;a++){var i=S(e.children[a],e,a);t=t||i.hierarchy,i.hierarchy===t||!n||n.children.some((function(e){return e.total&&e.name===o.name}))||e.total||(o.children.push(i),e.children.splice(a,1),a--)}if(e.children.filter((function(e){return!e.total})).length>=1&&n&&!n.children.some((function(e){return e.total&&e.name===o.name}))&&!e.total){var u=e.children[0].hierarchy;e.hierarchy===u&&n.children.splice(r+1,0,o)}return e};function M(e){return JSON.parse(JSON.stringify(e))}var P=function(e,n,r){return{hierarchyUniqueName:e,uniqueName:n,caption:n,measure:n,name:n,type:r,kpi:!0}};function b(e){var n=e.name;return[P(n,e.value,"value"),P(n,e.goal,"goal"),P(n,e.status,"status"),P(n,e.trend,"trend")]}var w,D=function(e,n){return String(e.name)===String([n.defaultHierarchy?n.defaultHierarchy:n.uniqueName])},U=function(e,n){return String(e.name)===String(n.name)},F=function(e,n){for(var r=function(r){var t=e[r],o=t.name.findIndex((function(e){return D({name:[e]},n)||String(e).startsWith(n.uniqueName)}));if(-1!==o)if(o===t.name.length-1||1===t.name.length)e.splice(r,1);else{t.name.splice(o,1);var a=e.findIndex((function(e){return e!==t&&String(e.name)===String(t.name)}));-1!==a&&(e[a]=d(d(d({},e[a]),t),e[a].expand||t.expand?{expand:!0}:{}),e.splice(r,1))}},t=e.length-1;t>=0;t--)r(t)},k=function(e,n,r){var t=-1;if(r.dropTarget&&r.dropDirection){var o=r.dropDirection?"before"===r.dropDirection?0:1:0;t=e.findIndex((function(e){return U(e,r.dropTarget)}))+o}-1!==t?(e.forEach((function(e){var r;e.expand&&e.name.length>1&&e.name.length>t&&(r=e.name).splice.apply(r,v([t,0],n.name,!1))})),e.splice(t,0,n)):e.push(n)},L=function(e){var n=e.length&&e[0],r=n&&n.members[n.members.length-1];if(r&&T(r)){for(var t=[],o=new Set(e.map((function(e){return e.members[e.members.length-1].caption}))).size,a=0;a<e.length;a+=o)t.push(e.slice(a,a+o));var i=[];return t.forEach((function(e){i.push.apply(i,e.reverse())})),i}return e};e.HEADERS_ACTION=void 0,(w=e.HEADERS_ACTION||(e.HEADERS_ACTION={})).toggle="HEADERS_ACTION_TOGGLE",w.expand="HEADERS_ACTION_EXPAND",w.collapse="HEADERS_ACTION_COLLAPSE";var G,V=function(e,n,r){var t=new Set;return e.children.forEach((function(e){var o=n(e);r&&t.add(String(e.path)),V(e,n,r||o).map((function(e){t.add(e)}))})),Array.from(t.values())},H=function(n,r){switch(r.type){case e.HEADERS_ACTION.toggle:var t=n.find((function(e){return String(e.name)===String(r.payload)}));return H(n,d(d({},r),{type:t&&t.expand?e.HEADERS_ACTION.collapse:e.HEADERS_ACTION.expand}));case e.HEADERS_ACTION.expand:var o=n.find((function(e){return String(e.name)===String(r.payload)}));if(o&&!0===o.expand)return n;if(!o||!1!==o.expand&&void 0!==o.expand){var a=n.slice();return a.push({name:r.payload,expand:!0}),a}return n.map((function(e){return e===o?d(d({},o),{expand:!0}):e}));case e.HEADERS_ACTION.collapse:var i=V(r.tree,(function(e){return!e.total&&String(e.path)===String(r.payload)}));return n.slice().filter((function(e){return!i.some((function(n){return n===String(e.name)}))})).map((function(e){return d(d({},e),{expand:Boolean(e.expand)})})).map((function(e){return String(e.name)===String(r.payload)?r.payload.length>1?void 0:{name:r.payload,expand:!1}:e})).filter(Boolean);default:return n}};e.PIVOT_CONFIGURATOR_ACTION=void 0,(G=e.PIVOT_CONFIGURATOR_ACTION||(e.PIVOT_CONFIGURATOR_ACTION={})).toggleSelection="PIVOT_CONFIGURATOR_ACTION_TOGGLE_SELECTION",G.addColumnAxis="PIVOT_CONFIGURATOR_ACTION_ADD_COLUMN_AXIS",G.addColumnAxes="PIVOT_CONFIGURATOR_ACTION_ADD_COLUMN_AXES",G.removeColumnAxis="PIVOT_CONFIGURATOR_ACTION_REMOVE_COLUMN_AXIS",G.removeColumnAxes="PIVOT_CONFIGURATOR_ACTION_REMOVE_COLUMN_AXES",G.addRowAxis="PIVOT_CONFIGURATOR_ACTION_ADD_ROW_AXIS",G.addRowAxes="PIVOT_CONFIGURATOR_ACTION_ADD_ROW_AXES",G.removeRowAxis="PIVOT_CONFIGURATOR_ACTION_REMOVE_ROW_AXIS",G.removeRowAxes="PIVOT_CONFIGURATOR_ACTION_REMOVE_ROW_AXES",G.addMeasureAxis="PIVOT_CONFIGURATOR_ACTION_ADD_MEASURE_AXIS",G.addMeasureAxes="PIVOT_CONFIGURATOR_ACTION_ADD_MEASURE_AXES",G.removeMeasureAxis="PIVOT_CONFIGURATOR_ACTION_REMOVE_MEASURE_AXIS",G.removeMeasureAxes="PIVOT_CONFIGURATOR_ACTION_REMOVE_MEASURE_AXES",G.remove="PIVOT_CONFIGURATOR_ACTION_REMOVE",G.setSort="PIVOT_CONFIGURATOR_ACTION_SET_SORT",G.setFilter="PIVOT_CONFIGURATOR_ACTION_SET_FILTER",G.addFilter="PIVOT_CONFIGURATOR_ACTION_ADD_FILTER",G.changeFilter="PIVOT_CONFIGURATOR_ACTION_CHANGE_FILTER",G.removeFilter="PIVOT_CONFIGURATOR_ACTION_REMOVE_FILTER",G.setDragItem="PIVOT_CONFIGURATOR_ACTION_SET_DRAGITEM",G.drop="PIVOT_CONFIGURATOR_ACTION_DROP",G.setDropZone="PIVOT_CONFIGURATOR_ACTION_SET_DROP_ZONE",G.setDropTarget="PIVOT_CONFIGURATOR_ACTION_SET_DROP_TARGET",G.setDropDirection="PIVOT_CONFIGURATOR_ACTION_SET_DROP_DIRECTION";var q=function(n,r){var t,o,a,i,u,c,l,s,f;switch(r.type){case e.PIVOT_CONFIGURATOR_ACTION.toggleSelection:if(!Array.isArray(r.payload)){var m=r.payload;if(2===m.type||"aggregator"in m)return n.measureAxes.some((function(e){return D(e,m)}))?q(n,d(d({},r),{type:e.PIVOT_CONFIGURATOR_ACTION.removeMeasureAxis})):q(n,d(d({},r),{type:e.PIVOT_CONFIGURATOR_ACTION.addMeasureAxis}));if("kpi"===m.type){var p=b(m);return p.every((function(e){return n.measureAxes.some((function(n){return D(n,e)}))}))?q(n,d(d({},r),{type:e.PIVOT_CONFIGURATOR_ACTION.removeMeasureAxes,payload:p})):q(n,d(d({},r),{type:e.PIVOT_CONFIGURATOR_ACTION.addMeasureAxes,payload:p.filter((function(e){return!n.measureAxes.some((function(n){return D(n,e)}))}))}))}return r.payload.kpi?n.measureAxes.some((function(e){return D(e,m)}))?q(n,d(d({},r),{type:e.PIVOT_CONFIGURATOR_ACTION.removeMeasureAxis})):q(n,d(d({},r),{type:e.PIVOT_CONFIGURATOR_ACTION.addMeasureAxis})):n.columnAxes.some((function(e){return D(e,m)}))?q(n,d(d({},r),{type:e.PIVOT_CONFIGURATOR_ACTION.removeColumnAxis})):n.rowAxes.some((function(e){return D(e,m)}))?q(n,d(d({},r),{type:e.PIVOT_CONFIGURATOR_ACTION.removeRowAxis})):!n.columnAxes||!n.columnAxes.length||n.rowAxes&&n.rowAxes.length?q(n,d(d({},r),{type:e.PIVOT_CONFIGURATOR_ACTION.addColumnAxis})):q(n,d(d({},r),{type:e.PIVOT_CONFIGURATOR_ACTION.addRowAxis}))}break;case e.PIVOT_CONFIGURATOR_ACTION.addColumnAxis:o=v(v([],n.columnAxes||[],!0),[{name:[r.payload.defaultHierarchy||r.payload.uniqueName]}],!1);break;case e.PIVOT_CONFIGURATOR_ACTION.addColumnAxes:break;case e.PIVOT_CONFIGURATOR_ACTION.removeColumnAxis:o=v([],(n.columnAxes||[]).filter((function(e){return!D(e,r.payload)})),!0),F(o,r.payload);break;case e.PIVOT_CONFIGURATOR_ACTION.removeColumnAxes:break;case e.PIVOT_CONFIGURATOR_ACTION.addRowAxis:t=v(v([],n.rowAxes||[],!0),[{name:[r.payload.defaultHierarchy||r.payload.uniqueName]}],!1);break;case e.PIVOT_CONFIGURATOR_ACTION.addRowAxes:break;case e.PIVOT_CONFIGURATOR_ACTION.removeRowAxis:t=v([],(n.rowAxes||[]).filter((function(e){return!D(e,r.payload)})),!0),F(t,r.payload);break;case e.PIVOT_CONFIGURATOR_ACTION.removeRowAxes:break;case e.PIVOT_CONFIGURATOR_ACTION.addMeasureAxis:a=v(v([],n.measureAxes||[],!0),[{name:[r.payload.defaultHierarchy||r.payload.uniqueName]}],!1);break;case e.PIVOT_CONFIGURATOR_ACTION.removeMeasureAxis:a=v([],(n.measureAxes||[]).filter((function(e){return!D(e,r.payload)})),!0);break;case e.PIVOT_CONFIGURATOR_ACTION.addMeasureAxes:a=v(v([],n.measureAxes||[],!0),(r.payload||[]).map((function(e){return{name:[e.defaultHierarchy||e.uniqueName]}})),!0);break;case e.PIVOT_CONFIGURATOR_ACTION.removeMeasureAxes:a=v([],(n.measureAxes||[]).filter((function(e){return!r.payload.some((function(n){return D(e,n)}))})),!0);break;case e.PIVOT_CONFIGURATOR_ACTION.remove:n.columnAxes.some((function(e){return U(e,r.payload)}))&&(o=v([],n.columnAxes.filter((function(e){return!U(e,r.payload)})),!0),F(o,{uniqueName:r.payload.name})),n.rowAxes.some((function(e){return U(e,r.payload)}))&&(t=v([],n.rowAxes.filter((function(e){return!U(e,r.payload)})),!0),F(t,{uniqueName:r.payload.name})),n.measureAxes.some((function(e){return U(e,r.payload)}))&&(a=v([],n.measureAxes.filter((function(e){return!U(e,r.payload)})),!0));break;case e.PIVOT_CONFIGURATOR_ACTION.setDragItem:c=r.payload;break;case e.PIVOT_CONFIGURATOR_ACTION.setDropZone:l=r.payload;break;case e.PIVOT_CONFIGURATOR_ACTION.setDropTarget:f=r.payload;break;case e.PIVOT_CONFIGURATOR_ACTION.setDropDirection:s=r.payload;break;case e.PIVOT_CONFIGURATOR_ACTION.drop:if(n.dragItem&&n.dropZone){var h=n.columnAxes.find((function(e){return U(e,r.payload)})),A=n.rowAxes.find((function(e){return U(e,r.payload)})),O=n.measureAxes.find((function(e){return U(e,r.payload)})),g=void 0;switch(h&&(g=h,o=v([],n.columnAxes.filter((function(e){return!U(e,r.payload)})),!0),F(o,{uniqueName:r.payload.name})),A&&(g=A,t=v([],n.rowAxes.filter((function(e){return!U(e,r.payload)})),!0),F(t,{uniqueName:r.payload.name})),O&&(g=O,a=v([],n.measureAxes.filter((function(e){return!U(e,r.payload)})),!0)),n.dropZone){case"columnAxes":o=o||n.columnAxes.slice(),k(o,g,n);break;case"rowAxes":t=t||n.rowAxes.slice(),k(t,g,n);break;case"measureAxes":a=a||n.measureAxes.slice(),k(a,g,n)}}c=null,l=null,f=null;break;case e.PIVOT_CONFIGURATOR_ACTION.setSort:i=r.payload;break;case e.PIVOT_CONFIGURATOR_ACTION.setFilter:u=Array.isArray(r.payload)?r.payload:[r.payload];break;case e.PIVOT_CONFIGURATOR_ACTION.addFilter:u=(n.filter||[]).slice(),Array.isArray(r.payload)?u.push.apply(u,r.payload):u.push(r.payload);break;case e.PIVOT_CONFIGURATOR_ACTION.changeFilter:u=Array.isArray(r.payload)?(n.filter||[]).map((function(e){return r.payload.some((function(n){return n.field===e.field}))?r.payload.find((function(n){return n.field===e.field})):e})):(n.filter||[]).map((function(e){return e.field===r.payload.field?r.payload:e}));break;case e.PIVOT_CONFIGURATOR_ACTION.removeFilter:u=(n.filter||[]).slice(),u=Array.isArray(r.payload)?u.filter((function(e){return!r.payload.some((function(n){return n.field===e.field&&n.operator===e.operator}))})):u.filter((function(e){return!(e.field===r.payload.field&&e.operator===r.payload.operator)}))}return{dragItem:c,dropTarget:f,dropDirection:s,dropZone:l,columnAxes:o,rowAxes:t,measureAxes:a,filter:u,sort:i}},j={init:function(e){"min"in e==0&&(e.min=Number.POSITIVE_INFINITY)},merge:function(e,n){n.min=Math.min(e.min,n.min)},accumulate:function(e,n){e.min=Math.min(n,e.min)},result:function(e){return Number.isFinite(e.min)?e.min:NaN},format:function(e){return e.toFixed(2)}},B={init:function(e){"max"in e==0&&(e.max=Number.NEGATIVE_INFINITY)},merge:function(e,n){n.max=Math.max(e.max,n.max)},accumulate:function(e,n){e.max=Math.max(n,e.max)},result:function(e){return Number.isFinite(e.max)?e.max:NaN},format:function(e){return e.toFixed(2)}},K=function(e){return null!=e},Y=function(e){return null==e},W=function(e){return Array.isArray(e)},z=function(e){return"function"==typeof e},Q=function(e){return"string"==typeof e},X=function(e){return!function(e){return Y(e)||0===e.trim().length}(e)},Z=function(e){return e&&e.getTime},J=function(e,n,r){return function(t){return e(t)?n(t):r(t)}},$=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return function(n){return e.reduceRight((function(e,n){return n(e)}),n)}},ee={},ne=/\[(?:(\d+)|['"](.*?)['"])\]|((?:(?!\[.*?\]|\.).)+)/g;ee[void 0]=function(e){return e};var re,te=function(e,n){var r=e+n;if(ee[r])return ee[r];var t=[];return e.replace(ne,(function(e,n,r,o){t.push(K(n)?n:r||o)})),ee[r]=function(e){for(var r=e,o=0;o<t.length;o++)if(r=r[t[o]],!K(r)&&n)return r;return r},ee[r]},oe=function(e){return function(n){return[e,n]}},ae=function(){return null},ie=function(e,n){return function(r){return e(r).map(n).join("~")}},ue=$.apply(void 0,[['"',""],[":","-"]].map((function(e){var n=e[0],r=e[1];return function(e){return e.replace(new RegExp(n,"g"),r)}}))),ce=(re=".",function(e){return e.slice(0,e.indexOf(re))}),le=function(e){var n=e.field,r=e.dir;return n+"-"+(void 0===r?"asc":r)},se=te("take"),fe=te("aggregates");te("skip");var me=te("group"),pe=te("sort",!0),de=ie(pe,le),he=ie(me,le),Ae=ie(fe,(function(e){return e.field+"-"+e.aggregate})),ve=$((function(e){return"datetime'"+e+"'"}),ce,ue,JSON.stringify,(function(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()))}));$(oe("page"),(function(e){var n=e.skip,r=e.take;return Math.floor((n||0)/r)+1})),$(oe("pageSize"),se),$(oe("group"),he);var Oe,ge=$(oe("sort"),de);$(oe("aggregate"),Ae),$((Oe=pe,J((function(e){return function(e){return K(e)&&W(e)&&e.length>0}(Oe(e))}),ge,ae)),(function(e){return Object.assign({},e,{sort:(pe(e)||[]).filter((function(e){var n=e.dir;return X(n)}))})}));var Ie=function(e){return e.field+"~"+e.operator+"~"+e.value};J((function(e){return Z(e.value)}),$(Ie,(function(e){var n=e.field,r=e.value,t=e.ignoreCase,o=e.operator;return{value:ve(r),field:n,ignoreCase:t,operator:o}})),Ie);var Ne,Ee=function(e,n,r){return n[e]=r,n},ye=function(e){return function(n){return Object.keys(n).reduce(e.bind(null,n),{})}},Te=ye((function(e,n,r){return Ee(r.toLowerCase(),n,e[r])})),_e=ye((function(e,n,r){return Ee(r,n,Te(e[r]))})),Re=function(e,n){return K(e)?e:n},Ce=$((function(e){var n=e.field,r=e.hasSubgroups,t=e.value,o=e.aggregates,a=e.items;return{aggregates:_e(o),field:n,items:r?a.map(Ce):a,value:t}}),(function(e){return{aggregates:e.Aggregates||e.aggregates,field:e.Member||e.member||e.field,hasSubgroups:e.HasSubgroups||e.hasSubgroups||!1,items:e.Items||e.items,value:Re(e.Key,Re(e.key,e.value))}})),xe={or:{concat:function(e,n){return function(r){return e(r)||n(r)}},identity:function(){return!1}},and:{concat:function(e,n){return function(r){return e(r)&&n(r)}},identity:function(){return!0}}},Se={contains:function(e,n){return(e||"").indexOf(n)>=0},doesnotcontain:function(e,n){return-1===(e||"").indexOf(n)},doesnotendwith:function(e,n){return(e||"").indexOf(n,(e||"").length-(n||"").length)<0},doesnotstartwith:function(e,n){return-1===(e||"").lastIndexOf(n,0)},endswith:function(e,n){return(e||"").indexOf(n,(e||"").length-(n||"").length)>=0},eq:function(e,n){return e===n},gt:function(e,n){return e>n},gte:function(e,n){return e>=n},isempty:function(e){return""===e},isnotempty:function(e){return""!==e},isnotnull:function(e){return K(e)},isnull:function(e){return Y(e)},lt:function(e,n){return e<n},lte:function(e,n){return e<=n},neq:function(e,n){return e!=n},startswith:function(e,n){return 0===(e||"").lastIndexOf(n,0)}},Me=/^\/Date\((.*?)\)\/$/,Pe=function(e,n,r){if(!K(n))return e;var t=e;if(Q(n)){var o=Me.exec(n);o?n=new Date(+o[1]):t=function(n){var t=e(n);return"string"==typeof t&&r?t.toLowerCase():function(e){return!isNaN(e-parseFloat(e))}(t)?t+"":t}}return Z(n)?function(e){var n=t(e);return Z(n)?n.getTime():n}:t},be=function(e){var n=e.field,r=e.ignoreCase,t=e.value,o=e.operator;n=K(n)?n:function(e){return e},r=!K(r)||r;var a=Pe(z(n)?n:te(n,!0),t,r);t=function(e,n){if(null!=e&&Q(e)){var r=Me.exec(e);if(r)return new Date(+r[1]).getTime();if(n)return e.toLowerCase()}else if(null!=e&&Z(e))return e.getTime();return e}(t,r);var i=z(o)?o:Se[o];return function(e){return i(a(e),t,r)}},we=function(e){var n=xe[e.logic];return e.filters.filter(K).map((function(e){return K(e.filters)?we(e):be(e)})).reduce(n.concat,n.identity)};function De(e,n){"filters"in e?e.filters.map((function(e){return De(e,n)})):n(e)}!function(e){e.Contains="contains",e.DoesNotContain="doesnotcontain",e.DoesNotEndWith="doesnotendwith",e.DoesNotStartWith="doesnotstartwith",e.EndsWith="endswith",e.EqualTo="eq",e.GreaterThan="gt",e.GreaterThanOrEqual="gte",e.IsEmpty="isempty",e.IsNotEmpty="isnotempty",e.IsNotNull="isnotnull",e.IsNull="isnull",e.LessThan="lt",e.LessThanOrEqual="lte",e.NotEqualTo="neq",e.StartsWith="startswith"}(Ne||(Ne={}));var Ue=function(e,n){(Array.isArray(e)?e:e.filters).forEach((function(e){return De(e,n)}))},Fe=function(e,n,r){var t,o=r?Array.isArray(r)?{logic:"and",filters:r}:r:void 0,a=o&&(t=o)&&0!==t.filters.length?we(t):function(){return!0},i=e.concat(n),u=[];Ue(r||[],(function(e){"field"in e&&e.field&&u.push(e.field)}));var c={hasFilter:!1,predicate:a,filteringAxes:[]};if(u.some((function(e){return"function"==typeof e})))c.filteringAxes=i.slice();else if(u.length>0){var l=Array.from(new Set(u).values()),s=i.filter((function(e){return l.indexOf(e.key)>=0}));c.filteringAxes=s}return c.hasFilter=c.filteringAxes.length>0,c},ke=function(e,n,r){var t=e.get(n);return t||(t=r||new Map,e.set(n,t)),t},Le=function(e){var n=e.indexOf("&");return-1!==n?[e.substring(0,n),e.substring(n+1)]:[e,void 0]},Ge=function(e,n,r){e.forEach((function(t,o){if(o!==r){t.size>0&&Ge(t,n,r);var a=t.get(r),i=ke(e,r,{});n.forEach((function(e){e.aggregate.init(i),e.aggregate.merge(a,i)}))}}))},Ve=function(e,n,r,t){e.forEach((function(e,o){var a;o!==t?(a=ke(n,o),Ve(e,a,r,t)):(a=ke(n,o,{}),r.forEach((function(n){n.aggregate.init(a),n.aggregate.merge(e,a)})))}))},He=function(e,n,r,t){e.forEach((function(o,a){if(a!==r){o.size>0&&He(o,n,r,t);var i=ke(o,r),u=ke(e,r);Ve(i,u,n,t)}}))},qe=function(e,n,r){var t=Le(e),o=t[0],a=t[1],i=r.slice();if(o&&a){var u=n.find((function(e){return e.key===o})),c=u?u.caption:"";return i.map((function(n){return n===c?e:n}))}return i},je=function(e,n,r,t,o,a,i){for(var u=i||new Map,c=t.map((function(e){return e.caption}));n.length>1&&t.some((function(e){return e.caption===n[n.length-1].caption}));)n.pop(),c.pop();var l=e;return n.forEach((function(e,n){if(c=qe(e.name,t,c),l&&!t.some((function(n){return n.caption===e.name}))){if(!l.has(e.name)&&!u.has(c.slice(0,c.indexOf(e.name)+1).join("-")))for(var i=Array.from(l).find((function(e){return e[0]!==r})),s=i&&i[0],f=s&&Le(s)[0],m=f?n-t.findIndex((function(e){return e.key===f})):0,p=function(n){var i=[];l.forEach((function(e,n){n!==r&&i.push.apply(i,Array.from(e).filter((function(e){return e[0]!==r})))}));var s=new Map;i.forEach((function(e){if(s.has(e[0])){var n=s.get(e[0]),r=e[1],t=new Map;Ve(n,t,o,a),Ve(r,t,o,a),s.set(e[0],t)}else s.set(e[0],new Map(e[1]))}));var f=c.slice(0,c.indexOf(e.name));s.forEach((function(e,n){u.set(qe(n,t,f.concat([n])).join("-"),e)})),s.set(r,l.get(r)),l=s},d=0;d<m;d++)p();l=l.get(e.name)||u.get(c.slice(0,c.indexOf(e.name)+1).join("-"))}})),l},Be=function(e,n,r,t,o,a,i){var u=[],c=t.dataField,l=t.columnsData,s=new Map;return n.forEach((function(n){var t=je(e,n.members.slice(),l,a,i,c,s),f=t&&t.get(l);r.forEach((function(e){var r=e.members.slice(),t=i[0];if("[Measures].[MeasuresLevel]"===r[r.length-1].levelName){var a=r.pop();t=i.find((function(e){return String(e.name)===a.caption}))||t}var l=f&&je(f,r,c,o,i,c),s="",m="";if(l&&t){var p=t.aggregate.result(l.get(c));s=String(p),m=t.aggregate.format(p)}u.push({columnTuple:e,data:{fmtValue:m,ordinal:0,value:s},rowTuple:n})}))})),u},Ke=function(e,n,r){e.forEach((function(e,t){if(!r[t]){var o=ke(n,t);Ke(e,o,r)}}))},Ye=function(e){var n=new Set;return e.forEach((function(e){1!==e.name.length||Le(e.name[0])[1]||n.add(e.name[0])})),n},We=function(e,n,r,t,o){var a=Ye(n),i=[],u=function(e,n){var r={members:[]};return e.forEach((function(e){var t=n.find((function(n){return n.key===e})),o=t?t.caption:"",a={caption:o,children:[],hasChildren:!0,parentName:"",levelNum:0,levelName:o,hierarchy:e,name:o};r.members.push(a)})),r}(a,e);i.push(u);for(var c=function(u){var c=n[u];if(1===c.name.length&&!c.expand&&a.has(c.name[0]))return"continue";var l,s=new Set(a.keys()),f=[],m=[],p=[];c.name.forEach((function(n,a){var u,d=Le(n),h=d[0],A=d[1];if(l=e.find((function(e){return e.key===h})),A){s.delete(h),m.push(n);var v={children:[],caption:A,hierarchy:h,levelNum:1,levelName:h+" "+h,name:n,parentName:l?l.caption:""};f.push(v)}else if(c.expand&&c.name.length-1===a){s.delete(n),m.push(n);var O=function(e,n,r){for(var t,o=[],a=function(e){return Array.from(e).filter((function(e){return!r[e[0]]}))},i=new Map(e),u=function(e){if(t=i.get(n[e]))i=new Map(t);else if(e<n.length-1&&Array.from(i).some((function(r){return Le(r[0])[0]===n[e]}))){var u=[];i.forEach((function(e,n){r[n]||u.push.apply(u,a(new Map(e)))})),i=new Map,u.forEach((function(e){if(i.has(e[0])){var n=i.get(e[0]),t=e[1],o=new Map;Ke(n,o,r),Ke(t,o,r),i.set(e[0],o)}else i.set(e[0],new Map(e[1]))}))}else 0!==e&&e!==n.length-1||Array.from(i).some((function(r){return Le(r[0])[0]===n[e]}))&&o.push.apply(o,a(i))},c=0;c<n.length;c++)u(c);return o}(r,m,o),g=t.find((function(e){return e.field===h}));g&&g.dir&&O.sort(function(e,n){return function(r,t){var o=e.dir,a=n.sortValue(Le(r[0])[1]),i=n.sortValue(Le(t[0])[1]);return a<i?"asc"===o?-1:1:a>i?"asc"===o?1:-1:0}}(g,l));for(var I=0;I<O.length;I++){var N=O[I][0],E={members:[]};p.push(E);var y=Le(N)[1];l=e.find((function(e){return e.key===n})),v={caption:y,children:[],levelName:n+" "+n,levelNum:1,parentName:l?l.caption:"",hierarchy:n,name:N},(u=E.members).push.apply(u,f),E.members.push(v)}}else if(c.expand){var T=(l=e.find((function(e){return e.key===n})))?l.caption:"";s.delete(n),m.push(n),v={children:[],caption:T,hierarchy:n,levelName:T,levelNum:0,name:T,parentName:""},f.push(v)}s.forEach((function(n){p.forEach((function(r){var t=(l=e.find((function(e){return e.key===n})))?l.caption:"",o={children:[],hasChildren:!0,caption:t,hierarchy:n,levelName:t,levelNum:0,name:t,parentName:""};r.members.push(o)}))})),i.push.apply(i,p)}))},l=0;l<n.length;l++)c(l);return i},ze=function(e){return{caption:String(e.name),children:[],hasChildren:!1,hierarchy:"[Measures]",levelName:"[Measures].[MeasuresLevel]",levelNum:0,name:"[Measures].["+e.name+"]",parentName:""}},Qe=function(e,n){var r=ze(n),t=M(e);return t.members.push(r),t},Xe=function(e,n){if(n.length<2)return e;for(var r=e.slice(),t=r.length-1;t>=0;t--){var o=r[t];r[t]=Qe(r[t],n[0]);for(var a=1;a<n.length;a++){var i=Qe(o,n[a]);r.splice(t+a,0,i)}}return L(r)},Ze=function(){function e(e){this.tabIndex=0,this.root=null,this.eventHandlers={},this.update=function(){},this.tabIndex=e.tabIndex}return Object.defineProperty(e.prototype,"elements",{get:function(){return this.root?Array.from(this.root.querySelectorAll(this.selectors.join(","))):[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){return this.root&&this.root.querySelector(this.selectors.join(","))||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){var e=this.elements;return e[e.length-1]||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"current",{get:function(){return this.elements.find((function(e){return e.matches(":focus")}))},enumerable:!1,configurable:!0}),e.prototype.start=function(e){var n=this;this.root=e;var r=function(r){t.mouseEvents[r]&&(t.eventHandlers[r]=function(e){var t=e.target instanceof Element&&e.target.closest(n.selectors.join(","));t&&n.mouseEvents[r].call(void 0,t,n,e)},e.addEventListener(r,t.eventHandlers[r]))},t=this;for(var o in this.mouseEvents)r(o);var a=function(r){i.keyboardEvents[r]&&(i.eventHandlers[r]=function(e){var t=e.target instanceof Element&&e.target.closest(n.selectors.join(",")),o=" "===e.key?"Space":e.key;t&&n.keyboardEvents[r][o]&&n.keyboardEvents[r][o].call(void 0,t,n,e)},e.addEventListener(r,i.eventHandlers[r]))},i=this;for(var o in this.keyboardEvents)a(o)},e.prototype.stop=function(){if(this.root)for(var e in this.eventHandlers)this.eventHandlers[e]&&this.root.removeEventListener(e,this.eventHandlers[e]);this.root=null},e.prototype.focusElement=function(e,n){e&&(n&&(n.removeAttribute("tabindex"),n.classList.remove("k-focus")),e.setAttribute("tabindex",String(this.tabIndex)),e.focus({preventScroll:!0}))},e}(),Je=".k-pivotgrid .k-pivotgrid-values",$e=".k-pivotgrid .k-pivotgrid-column-headers",en=".k-pivotgrid .k-pivotgrid-row-headers",nn=".k-pivotgrid > .k-pivotgrid-empty-cell",rn="table.k-pivotgrid-table",tn=".k-pivotgrid-cell",on=[Je,$e,en].join(","),an=[nn,[$e,rn,tn].join(" "),[en,rn,tn].join(" "),[Je,rn,tn].join(" ")],un=function(e,n,r){var t=e.querySelector(".k-icon, .k-svg-icon");if(t){var o=n.elements.indexOf(e);n.update=function(){n.focusElement(n.elements[o],null),n.update=function(){}},t.click(),r.preventDefault()}},cn=function(e,n,r){e.offsetLeft<n.scrollLeft&&(r.scrollLeft=e.offsetLeft)},ln=function(e,n,r){e.offsetLeft+e.offsetWidth>n.scrollLeft+n.offsetWidth&&e.offsetWidth<n.offsetWidth&&(r.scrollLeft=e.offsetLeft+e.offsetWidth-n.offsetWidth)},sn=function(e,n,r){n.scrollTop&&e.offsetTop<n.scrollTop&&(r.scrollTop=e.offsetTop)},fn=function(e,n,r){e.offsetTop+e.offsetHeight>n.scrollTop+n.offsetHeight&&e.offsetHeight<n.offsetHeight&&(r.scrollTop=e.offsetTop+e.offsetHeight-n.offsetHeight)},mn=function(e,n,r){var t=n.querySelector(Je),o=e&&e.closest(on);t&&o&&e&&r.forEach((function(n){return n(e,o,t)}))},pn=function(e){var n=Array.from(e.rows),r=Array.from(n&&n[0]&&n[0].cells||[]).map((function(e){return e.colSpan})).reduce((function(e,n){return e+n}),0),t=n.map((function(){return new Array(r)}));return n.forEach((function(e,n){var r=0;Array.from(e.cells).forEach((function(e){for(var o=0;o<e.colSpan;o++){for(var a=0;a<e.rowSpan;a++){var i=t[n+a].findIndex((function(e,n){return n>=r&&!e}));t[n+a][i]=e}r++}}))})),t},dn=function(e){for(var n=pn(e.querySelector([$e,rn].join(" "))),r=pn(e.querySelector([en,rn].join(" "))),t=pn(e.querySelector([Je,rn].join(" "))),o=e.querySelector(nn),a=new Array(r[0].length).fill(o),i=[],u=0;u<n.length;u++)i.push(a.concat(n[u]));for(u=0;u<r.length;u++)i.push(r[u].concat(t[u]));return i},hn=function(e){return e.ctrlKey||e.metaKey},An=function(e,n,r){for(var t=dn(e),o=function(e,n){for(var r=0;r<e.length;r++)for(var t=0;t<e[r].length;t++)if(e[r][t]===n)return[r,t];return[-1,-1]}(t,n),a=[o[0]+r[0],o[1]+r[1]],i=t[a[0]]&&t[a[0]][a[1]];i&&i===n;)i=t[(a=[a[0]+r[0],a[1]+r[1]])[0]]&&t[a[0]][a[1]];return i},vn={keydown:{ArrowLeft:function(e,n,r){r.preventDefault();var t=An(n.root,e,[0,-1]);n.focusElement(t,e),mn(t,n.root,[ln,cn,fn,sn])},ArrowRight:function(e,n,r){r.preventDefault();var t=An(n.root,e,[0,1]);n.focusElement(t,e),mn(t,n.root,[cn,ln,fn,sn])},ArrowUp:function(e,n,r){r.preventDefault();var t=An(n.root,e,[-1,0]);n.focusElement(t,e),mn(t,n.root,[ln,cn,fn,sn])},ArrowDown:function(e,n,r){r.preventDefault();var t=An(n.root,e,[1,0]);n.focusElement(t,e),mn(t,n.root,[ln,cn,sn,fn])},o:function(e,n,r){if(n.root){var t=n.root.nextElementSibling;t&&t instanceof HTMLElement&&t.matches("div.k-pivotgrid-configurator-button")&&(t.click(),setTimeout((function(){if(n.root.parentNode){var e=n.root.parentNode.querySelector(".k-pivotgrid-configurator-content .k-form-field .k-fields-list-wrapper .k-treeview");e instanceof HTMLElement&&(e.setAttribute("tabindex",String(n.tabIndex)),e.focus())}}),0))}},Enter:un,Space:un,Home:function(e,n,r){var t=dn(n.root),o=(hn(r)?t[0]:t.find((function(n){return Boolean(n.find((function(n){return n===e})))}))||[])[0];o&&(n.focusElement(o,e),mn(o,n.root,[ln,cn,fn,sn]),r.preventDefault())},End:function(e,n,r){var t=dn(n.root),o=hn(r)?t[t.length-1]:t.find((function(n){return Boolean(n.find((function(n){return n===e})))}))||[],a=o&&o[o.length-1]||null;a&&(n.focusElement(a,e),mn(a,n.root,[cn,ln,sn,fn]),r.preventDefault())}}},On={click:function(e,n){if(e&&e instanceof HTMLElement){var r=n.elements.find((function(e){return e.hasAttribute("tabindex")}))||null;n.focusElement(e,r)}}},gn=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.selectors=an,n.mouseEvents=On,n.keyboardEvents=vn,n}return p(n,e),n}(Ze),In=[".k-pivotgrid-configurator-content .k-form-field .k-fields-list-wrapper .k-treeview",".k-pivotgrid-configurator-content .k-chip",".k-pivotgrid-configurator-actions button"],Nn=function(e,n,r,t){r.preventDefault();var o=n.elements,a=o.indexOf(e)+t;a<0&&(a=o.length-1),n.focusElement(o[a%o.length],e)},En=function(e,n,r){r.target instanceof HTMLElement&&r.target.querySelector(".k-icon.k-i-x-circle, .k-svg-icon.k-svg-i-x-circle")instanceof HTMLElement&&(r.preventDefault(),Nn(e,n,r,-1))},yn={keydown:{Tab:function(e,n,r){Nn(e,n,r,r.shiftKey?-1:1)},Escape:function(e,n,r){if(r.target instanceof HTMLElement&&n.root){var t=n.root.previousElementSibling,o=n.root.nextElementSibling,a=Array.from(t instanceof HTMLElement?t.querySelectorAll("[tabindex]"):[]).find((function(e){return e.tabIndex>=0}));a instanceof HTMLElement&&(a.focus(),o instanceof HTMLElement&&o.click())}},Delete:En,Backspace:En}},Tn={click:function(e,n){if(e&&e instanceof HTMLElement){var r=n.elements.find((function(e){return e.hasAttribute("tabindex")}))||null;n.focusElement(e,r)}}},_n=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.selectors=In,n.mouseEvents=Tn,n.keyboardEvents=yn,n}return p(n,e),n}(Ze);return e.ConfiguratorNavigation=_n,e.PivotGridNavigation=gn,e.addKPI=function(e){for(var n,r=0;r<e.length;r++)if(2===e[r].type){n=!0;break}n&&e.splice(r+1,0,{caption:"KPIs",defaultHierarchy:"[KPIs]",name:"KPIs",uniqueName:"[KPIs]"})},e.addMultipleMeasures=Xe,e.averageAggregate={init:function(e){"count"in e==0&&(e.sumA=0,e.count=0)},merge:function(e,n){n.sumA+=e.sumA,n.count+=e.count},accumulate:function(e,n){e.sumA+=n,e.count+=1},result:function(e){return e.sumA/e.count},format:function(e){return e.toFixed(2)}},e.buildKPIMeasures=b,e.cloneDataTree=function(e,n,r){var t=new Map;return Ve(e,t,r,n),t},e.compareAxes=U,e.configuratorReducer=q,e.countAggregate={init:function(e){"countA"in e==0&&(e.countA=0)},merge:function(e,n){n.countA+=e.countA},accumulate:function(e,n){e.countA+=1},result:function(e){return e.countA},format:function(e){return e.toFixed()}},e.createAxisDescriptors=function(e){for(var n=[],r=0,t=Object.keys(e);r<t.length;r++){var o=t[r];n.push({name:JSON.parse(o),expand:e[o]})}return n},e.createDataState=function(e){return{columns:L(e.columns.tuples),data:e.data,rows:e.rows.tuples}},e.createDataTree=function(e,n,r,t,o,a){var i=new Map,u=new Map,c=n.concat(r),l=new Set,s=o.dataField,f=o.columnsData,m=Fe(n,r,a),p=m.hasFilter,d=m.predicate,h=m.filteringAxes;return e.forEach((function(e){if(p){var o={};if(h.forEach((function(n){o[n.key]=n.displayValue(e)})),!d(o))return}var a=c.map((function(n){return n.displayValue(e)})),m="".concat.apply("",a),A=u.get(m);if(!A){var v=i,O=function(n){var r,t;v=ke(v,(r=n.key,t=n.displayValue(e),r+"&"+t))};n.forEach(O),v=ke(v,f),l.add(v),r.forEach(O),A={},v.set(s,A),u.set(m,A),t.forEach((function(e){e.aggregate.init(A)}))}t.forEach((function(n){n.aggregate.accumulate(A,n.value(e))}))})),l.forEach((function(e){return Ge(e,t,s)})),He(i,t,f,s),i},e.createDiscoverBody=N,e.createFlatSchemaDimensions=function(e,n){var r=Object.keys(e).map((function(e){return{caption:e,defaultHierarchy:e,description:"",name:e,uniqueName:e,hierarchyUniqueName:e,measure:!0,type:1}}));return n.length&&r.push({caption:"Measures",children:n.map((function(e){return{aggregator:"1",caption:String(e.name),defaultFormat:"",description:"",displayFolder:"",groupName:String(e.name),name:String(e.name),uniqueName:String(e.name)}})),type:2,description:"",name:"Measures",uniqueName:"[Measures]"}),r},e.createLocalDataState=function(e){var n,r=e.dataTree,t=e.rowSettings,o=e.columnSettings,a=e.rowAxes,i=e.columnAxes,u=e.measures,c=e.sort,l=e.fields,s=((n={})[l.columnsData]=l.columnsData,n[l.dataField]=l.dataField,n),f=i.length?We(o,i,r.get(l.columnsData),c,s):u.map((function(e){return{members:[ze(e)]}})),m=i.length>0?Xe(f,u):f,p=a.length?We(t,a,r,c,s):[{members:[]}];return{columns:m,data:Be(r,p,m,l,o,t,u),rows:p}},e.createRequestBody=f,e.createTuples=We,e.discoverCommands=I,e.fetchData=function(e,n){return h(void 0,void 0,void 0,(function(){var r;return A(this,(function(t){switch(t.label){case 0:return r=d({body:f(n),headers:{"Content-Type":"text/xml"},method:"POST"},e.init),[4,fetch(e.url,r)];case 1:return[4,t.sent().text()];case 2:return[2,O(t.sent())]}}))}))},e.fetchDiscover=function(e,n){return h(void 0,void 0,void 0,(function(){var r,t;return A(this,(function(o){switch(o.label){case 0:return r=d({body:N(n),headers:{"Content-Type":"text/xml"},method:"POST"},e.init),[4,fetch(e.url,r)];case 1:return[4,o.sent().text()];case 2:return t=o.sent(),[2,y[n.command](t)]}}))}))},e.headersReducer=H,e.maxAggregate=B,e.mergeTrees=Ve,e.minAggregate=j,e.parseResponse=O,e.readData=Be,e.rootFields=Ye,e.setFilter=function(e,n){void 0===n&&(n=[]),e.filter=n},e.setSort=function(e,n){void 0===n&&(n=[]),e.sort=n},e.sumAggregate={init:function(e){"sum"in e==0&&(e.sum=0)},merge:function(e,n){n.sum+=e.sum},accumulate:function(e,n){e.sum+=n},result:function(e){return e.sum},format:function(e){return e.toFixed(2)}},e.toColumns=function(e){for(var n=x(e),r=n[0],t=n[1],o=n[2],a=n[3],i=0;i<a;i++)for(var u=null,c=0;c<o;c++)if(r[c]){var l=r[c].cells[i];!l&&u&&(u.rowSpan=(u.rowSpan||1)+1),u&&(u.colSpan=u.breadth||1),l&&(u=l)}return[r,t,o,a]},e.toData=function(e,n,r,t,o){var a=Array.from(new Array(o),(function(){return{cells:Array.from(new Array(t),(function(){return null}))}})),i=function(e){return e.join("|")},u=function(e){return e.members.map((function(e){return e.name}))},c=new Map,l=new Map;return n.forEach((function(e,n){c.set(i(e.path),n)})),r.forEach((function(e,n){l.set(i(e.path),n)})),e.forEach((function(e){var n=c.get(i(u(e.columnTuple))),t=l.get(i(u(e.rowTuple)));void 0!==n&&void 0!==t&&(a[t].cells[n]||(a[t].row=r[t].path,a[t].cells[n]=e))})),a},e.toRows=function(e){for(var n=x(e),r=n[0],t=n[1],o=n[2],a=n[3],i=0;i<a;i++)for(var u=null,c=0;c<o;c++)if(r[c]){var l=r[c].cells[i];!l&&u&&(u.rowSpan=(u.rowSpan||1)+1),u&&(u.colSpan=u.breadth),l&&(u=l)}return function(e,n,r,t){for(var o=new Array(t),a=0;a<t;a++)for(var i=0;i<r;i++)if(e[i]&&e[i].cells[a]){var u=e[i].cells[a];o[a]||(o[a]={cells:new Array(r).fill(null)}),o[a].cells[i]=d(d({},u),{rowSpan:u.colSpan,colSpan:u.rowSpan})}return[o,n,t,r]}(r,t,o,a)},e.toTree=function(e){var n={children:[]},r={};if(e.every((function(e){return 1===e.members.length&&T(e.members[0])})))return{children:e.map((function(e){var n=e.members[0];return d(d({},n),{normalizedPath:[n.name],parentName:n.name,path:[n.hierarchy]})}))};for(var t=0;t<e.length;t++)for(var o=M(e[t]),a="",i=function(e){var t,i,u,c=o.members[e];if(n.children&&0===n.children.length)t=n;else if(r[a]&&!r[a+c.name]&&0===c.levelNum)t=r[a];else if(r[a+c.parentName]&&c.levelNum>0&&!r[a+c.parentName+c.name])t=r[a+c.parentName];else if(!r[a+c.parentName]&&c.levelNum>0&&!r[a+c.parentName+c.name]){var l=Object.keys(r).find((function(e){return c.parentName===r[e].name}));l&&(t=r[l])}if(t){c.path=(i=c,((u=t)&&u.hierarchy===i.hierarchy?v(v([],(u.path||[]).slice(0,-1),!0),[(0===i.levelNum?i.hierarchy:i.name)||null],!1):v(v([],u&&u.path?u.path:[],!0),[0===i.levelNum?i.hierarchy:i.name],!1)).filter(Boolean)),c.normalizedPath=C(c,t);var s=t.children.findIndex((function(e){return e.hierarchy!==t.hierarchy}));-1!==s?t.children.splice(s,0,c):t.children.push(c)}c.parentName+=c.name,a+=c.parentName,r[a]||(r[a]=c)},u=0;u<o.members.length;u++)i(u);return M(S(n))},Object.defineProperty(e,"__esModule",{value:!0}),e}({})}));
//# sourceMappingURL=kendo.pivot.common.min.js.map
