{"version":3,"file":"kendo.editor.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendoeditor","js","this","$","editorNS","Command","GenericCommand","registerTool","Tool","RestorePoint","extend","InsertHtmlCommand","InsertHtmlTool","kendo","UndoRedoStack","Observable","init","options","fn","call","clear","events","push","command","stack","slice","currentCommandIndex","undo","canUndo","trigger","redo","canRedo","length","deepExtend","util","undefined$1","window","Class","Widget","ui","os","support","mobileOS","browser","keys","outerWidth","_outerWidth","outerHeight","_outerHeight","FORMATTING_MARKS_STYLE_ID","FORMATTING_MARKS_OVERLAY_ID","FORMATTING_MARKS_OVERLAY_WRAPPER_ID","SELECT","PLACEHOLDER_CLASS","PLACEHOLDER_TAG_ID","NATIVE_TOOLS","EditorUtils","editorWrapperTemplate","formatByName","name","format","i","inArray","tags","getToolCssClass","icon","cssClass","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","insertUpperRomanList","insertLowerRomanList","import","indent","outdent","createLink","unlink","insertImage","insertFile","viewHtml","foreColor","backColor","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","mergeCellsHorizontally","mergeCellsVertically","splitCellHorizontally","splitCellVertically","tableProperties","tableCellProperties","tableWizardInsert","tableAlignLeft","tableAlignCenter","tableAlignRight","cleanFormatting","copyFormat","applyFormat","pdf","nameToKebab","replace","toLowerCase","toolName","tool","Editor","defaultTools","registerFormat","formatName","formats","cacheComments","content","comments","index","retrieveComments","supportedContentEditable","document","documentElement","toolGroups","basic","scripts","alignment","lines","symbols","links","lists","dent","tablesWizard","tablesInsert","tablesAddDelete","tablesMerge","tablesPosition","formatPainter","__suppressEditableCheck","element","toolbarContainer","type","domElement","that","editor","dom","Dom","_registerHandler","closest","update","bind","_setupType","_initToolbar","_setupHeight","_resizable","_initializeContentElement","_setupKeyboard","clipboard","Clipboard","undoRedoStack","_populateValue","mousedown","_endTyping","mouseup","e","_mouseup","_handleSpaceAndNewLines","_initializeImmutables","_ariaLabel","wrapper","find","toolbar","resize","_initInlineOverflowWrapper","notify","_showWatermarkOverlay","messages","auto","bold","italic","underline","strikethrough","fitToCell","lineHeight","formattingMarks","insertHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","style","emptyFolder","editAreaTitle","uploadFile","overflowAnchor","orderBy","orderBySize","orderByName","invalidFileType","deleteFile","overwriteFile","directoryNotFound","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","fileText","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogOk","dialogCancel","createTableHint","tableWizard","tableTab","cellTab","accessibilityTab","caption","summary","width","height","units","cellSpacing","cellPadding","topPadding","leftPadding","bottomPadding","rightPadding","independentCellPaddings","cellMargin","captionAlignment","position","background","tableBackground","id","border","borderStyle","borderWidth","borderColor","collapseBorders","wrapText","associateCellsWithHeaders","alignLeft","alignCenter","alignRight","alignLeftTop","alignCenterTop","alignRightTop","alignLeftMiddle","alignCenterMiddle","alignRightMiddle","alignLeftBottom","alignCenterBottom","alignRightBottom","alignRemove","columns","rows","selectAllCells","applyToColumn","applyToRow","exportAs","print","headerRows","headerColumns","tableSummaryPlaceholder","associateNone","associateScope","associateIds","borderNone","placeholder","nonce","unsafeInline","encoded","formattingMarksRefreshDelay","domain","resizable","deserialization","custom","serialization","entities","semantic","optimizeTags","keepEOL","pasteCleanup","all","css","keepNewLines","msAllFormatting","msConvertLists","msTags","none","span","stylesheets","dialogOptions","modal","draggable","animation","imageBrowser","fileBrowser","navigateOnTab","text","value","tools","destroy","_deregisterHandlers","clearTimeout","_spellCorrectTimeout","_focusOutside","windowInstance","tablePopup","_destroyUploadWidget","interSectionObserver","disconnect","resizeObserver","_destroyResizings","_destroyFormattingMarksOverlay","setOptions","_setOptionsTools","_initializePlaceholder","createRange","RangeUtils","encodedValue","encode","exec","params","range","Error","body","getAttribute","keyboard","isTypingInProgress","_focusBody","selectRange","_range","getRange","Object","map","key","immutables","test","execCommand","async","change","_commandChange","_selectionChange","managesUndoRedo","focus","restoreSelection","selection","getSelection","rangeCount","getRangeAt","doc","startContainer","endContainer","startOffset","endOffset","setStart","collapse","SelectionUtils","selectionFromDocument","paste","html","refresh","textarea","val","remove","selectionRestorePoint","toRange","saveSelection","container","commonAncestorContainer","contains","selectedHtml","Serializer","domToXhtml","cloneContents","removeAllRanges","addRange","state","textNodes","finder","collapsed","getFormat","isFormatted","_togglePlaceholder","trim","_oldValue","currentHtml","htmlToDom","_refreshTools","_bindTools","unbind","filter","el","each","initialize","_blur","old","_containsRange","isAncestorOrSelf","_createContentElement","iframe","wnd","lang","specifiedDomain","domainScript","src","hide","title","frameBorder","addClass","attr","tabIndex","insertBefore","location","hostname","contentWindow","contentDocument","observer","IntersectionObserver","entries","entry","isIntersecting","_decorateFormatting","unobserve","observe","getElementsByTagName","open","write","isRtl","ios","edge","chrome","href","join","close","_deleteSavedRange","component","dataSource","items","tag","className","formattingElement","getKendoDropDownList","data","list","getEffectiveBackground","inlineStyle","_appendFormattingMarksStyles","elementId","$head","head","append","_appendFormattingMarksOverlay","_formattingMarksOverlayWrapper","_formattingMarksOverlay","appendTo","_bodyTopBottomPaddings","parseFloat","_isInlineEditor","insertAfter","_updateFormattingMarksOverlayHeight","scrollHeight","inlineHeight","_inlineOverflowWrapper","wrap","parent","handlers","_handlers","h","off","handler","_uploadWidget","endTyping","scrollTop","activeElement","_activeElement","clientHeight","msie","left","top","opacity","_handleToolbarClick","target","_immutablesContext","Immutables","immutablesContext","editableTextNodes","blurTrigger","mousedownTrigger","createElement","setAttribute","appendChild","interval","setInterval","last","clearInterval","setTimeout","_mousedown","touch","keydown","_spellCorrect","parentElement","nodeName","_cachedHeight","restoreHeight","keyCode","BACKSPACE","DELETE","F10","first","preventPopupHide","preventDefault","LEFT","RIGHT","offset","next","nextChar","nodeType","nodeValue","toolFromShortcut","toolOptions","keyPressCommand","_runPostContentKeyCommands","keypress","_showElementResizeHandles","keyup","selectionCodes","TAB","PAGEUP","PAGEDOWN","END","HOME","UP","DOWN","INSERT","ctrlKey","altKey","shiftKey","_refreshInterval","click","selectNode","focusin","hasAttribute","_showWindow","focusout","active","popup","toolbarContainerElement","get","_toolbarFocused","hasClass","removeClass","_hideWindow","_initializeColumnResizing","_initializeRowResizing","_initializeElementResizing","defaults","toolbarOptions","_processToolbarItems","_setNativeTools","parentMessages","toggle","evaluateTemplates","ToolBar","on","is","_initToolbarWindow","toolbarEl","prepend","kendoWindow","dragHandle","effects","minHeight","visible","autoFocus","actions","dragend","_moved","_selectionStarted","parents","stopPropagation","gecko","which","tagName","defaultValue","deserializedRoot","getAllComments","innerHTML","_resetGroups","current","result","optionsTools","j","t","guidGroupName","flatDefaultTools","processedObject","currentGroups","Array","isArray","guid","_processToolOptions","gr","includes","values","group","g","to","_processDefaultTool","isPlainObject","view","shortcuts","uiOptions","originalOptions","palette","template","showText","showIcon","tooltip","attributes","ColorTool","componentOptions","views","preview","input","buttons","_shortcutSequence","nodes","filterBy","htmlIndentSpace","_updateImmutablesState","eventNames","NS","hasOwnProperty","applyEventMap","split","toolsFromShortcut","o","changesContent","refreshDelay","applyFormattingMarks","clearFormattingMarksOverlay","_toggledFormattingMarks","children","_formattingMarksTimeout","empty","heightStyle","expectedHeight","parseInt","actualHeight","indexOf","isNaN","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","SelectAllHandler","_wrapTextarea","res","ctrl","shift","alt","beforeCorrection","falseTrigger","contextmenu","one","mozilla","_finishUpdate","show","$body","toggleClass","overflowPopup","uiElement","trackImmutables","toolsToBeUpdated","w","editorWrap","editArea","isResizable","resizableMin","min","resizableMax","max","maxHeight","minWidth","maxWidth","ResizeObserver","_resizeTimeOut","_destroyElementResizing","ElementResizingFactory","dispose","_destroyRowResizing","RowResizing","_destroyColumnResizing","ColumnResizing","create","_showElementResizeHandlesProxy","elementResizing","parentNode","showResizeHandles","columnResizing","rowResizing","_getWindowWidth","editorElement","_overlapsWindow","box","toolbarWrapper","toolbarWrapperOffset","toolbarWrapperLeft","toolbarWrapperTop","boxOffset","boxOffsetLeft","boxOffsetTop","editorOffset","Math","plugin","commandArguments","noop","UndoTool","enable","removeAttr","emptyElementContent","emptyTableCellContent","PDFMixin","prototype","_drawPDF","drawing","drawDOM","saveAsPDF","progress","Deferred","promise","args","then","root","exportPDF","done","dataURI","saveAs","fileName","proxyURL","proxyTarget","forceProxy","resolve","fail","err","reject","jQuery","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","makeMap","len","obj","nonListBlockElements","blockElements","concat","block","selfClosing","inlineElements","inline","fillAttrs","nonEmptyNonTextContentElements","normalize","node","version","firstChild","prev","nextSibling","persistedScrollTop","whitespace","emptyspace","rgb","bom","whitespaceOrBom","cssAttributes","htmlRe","entityRe","entityTable","findNodeIndex","skipText","previousSibling","isDataNode","isAncestorOf","findClosestAncestor","rootElem","iterator","createNodeIterator","NodeFilter","SHOW_COMMENT","FILTER_ACCEPT","curNode","nextNode","getNodeLength","childNodes","splitDataNode","temp","newNode","cloneNode","denormalizedText","deleteData","attrEquals","cssFloat","blockParentOrBody","parentOfType","ownerDocument","blockParents","blocks","windowFromDocument","defaultView","parentWindow","nodeTypes","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","toHex","color","matches","x","toString","encodableChars","c","charCode","charCodeAt","entity","isBom","stripBom","stripBomNode","removeChild","insignificant","_moz_dirty","_moz_editor_bogus_node","tableCell","significantNodes","grep","child","emptyTextNode","emptyNode","significantChildNodes","isWhitespace","getTextNodes","lastTextNode","lastChild","isMarker","allowsTextContent","every","allWhitespaceContent","isEmptyspace","sibling","direction","isBlock","isPrevBlock","isNextBlock","isSelfClosing","isEmpty","isInline","isImg","isBr","scrollContainer","compatMode","scrollingElement","scrollTo","toStart","elementTop","elementHeight","marker","windowHeight","innerHeight","offsetHeight","ceil","persistScrollTop","offsetParent","offsetTop","offsetLeft","restoreScrollTop","undefined","insertAt","newElement","referenceElement","removeChildren","removeTextSiblings","closestBy","condition","rootCondition","ofType","changeTag","skipAttributes","attribute","specified","cssText","editableParent","contentEditable","unwrap","isChildOfBaseContainer","createEmptyNode","removeAttribute","mergeAttributes","origin","traverseCss","unstyle","backgroundStyle","innerText","classNames","classes","commonAncestor","ancestors","count","arguments","paths","minPathLength","Infinity","output","reverse","closestSplittableParent","apply","editableParents","editableAncestor","closestEditable","types","editable","closestEditableOfType","invert","match","ensureTrailingBreaks","elements","ensureTrailingBreak","removeTrailingBreak","br","reMapTableColumns","table","colAttr","_mapColIndices","clearTableMappings","registeredColumns","rowIndex","cells","colIndex","cellIndex","cell","rowSpan","_mapColspan","colSpan","ci","ri","associateWithIds","theadRows","numberOfTheadRows","tableRows","numberOfTableRows","theadMatrix","tbodyMatrix","tHead","_getNumberOfHeaderRows","_generateIdsForColumns","_generateIdsForRows","_assignIds","col","colspan","rowspan","k","l","timestamp","Date","getTime","row","headers","pushHeaderId","forEach","_onlyUnique","_getNumberOfColumns","currentIndex","numberOfCols","Number","_getNumberOfHeaderColumns","numberOfHeaderRows","number","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","bomSpan","div","supportsLeadingWhitespace","isFunction","toEditableHtml","_toEditableImmutables","immutable","prependTo","_fillEmptyElements","p","_removeSystemElements","_resetOrderedLists","ol","originalStart","ols","_preventScriptExecution","attributesToRemove","deserialize","semanticFilter","mapStart","tagMap","start","end","skipEncoding","canOptimize","semanticAttributes","specifiedAttributes","textDecoration","font","fontFamily","size","inlineStyles","ignoredStylePrefixes","prop","startsWith","strong","em","b","u","item","styleObj","splice","face","styleAttr","properties","property","lastIndex","cssProperties","$node","htmlEncode","skip","childNode","mapper","previous","jqNode","serialize","shouldOptimize","isEmptyBomNode","runCustom","script","childrenCount","textOnly","selectionFromWindow","W3CSelection","selectionFromRange","rangeDocument","documentFromRange","W3CRange","updateRangeProperties","fixIvalidRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","RangeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","startAncestor","endAncestor","compareBoundaries","ex","isInvalidRange","fromNode","_current","_next","_end","hasNext","traverse","callback","delta","inStartContainer","inEndContainer","nodeIndex","getSubRange","subRange","textRange","createTextRange","adoptContainer","select","duplicate","right","textRangeContainer","adoptEndPoint","compareEndPoints","movedStart","movedEnd","cursorNode","textOffset","isData","anchorNode","anchorParent","cursor","moveToElementText","setEndPoint","comparison","appended","RangeEnumerator","enumerate","visit","ImmutablesRangeIterator","ImmutablesRangeEnumerator","rootNode","getEditable","nodeToPath","serializedImmutables","removeImmutables","restoreImmutables","lastType","restoreHtml","path","toRangePoint","denormalizedOffset","Marker","caret","addCaret","removeCaret","containerIndex","textNode","add","expand","isExpandable","rangeBoundary","_removeDeadMarkers","createTextNode","_normalizedIndex","pointer","shouldNormalizeStart","shouldNormalizeEnd","isBomSelected","charAt","collapsedToStart","startParent","endParent","startIndex","endIndex","boundary","immutableParent","image","stringify","partition","partitionRange","contents","mapAll","mapped","getAll","predicate","selector","getMarkers","isStartOf","isEndOf","wrapSelectedElements","startEditable","endEditable","isEnd","beforeCaret","afterCaret","search","substring","complexBlocks","IMMUTABALE","IMMUTABALE_MARKER_SELECTOR","randomId","chars","round","random","updateToolOptions","_initOptions","_toHtml","replaceWith","isDeleting","_cancelDeleting","_cancelTyping","typingInProgress","isTypingKey","backspace","del","cancelDeleting","nextImmutable","closestSelectionLi","closestImmutableLi","_removeImmutable","forwards","commonContainer","_nextNode","startRestorePoint","expandImmutablesIn","startImmutableParent","endImmutableParent","serialized","restorePoint","formatter","lockRange","releaseRange","point","createDialog","postExec","_actionButtonsTemplate","insertButtonIcon","cancelButtonIcon","renderButton","themeColor","endRestorePoint","ViewHtmlCommand","cmd","dialog","_footerTemplate","_footerMessages","center","FormatCommand","FormatTool","getKendoToolBar","getKendoToggleButton","MOUSEDOWN_NS","InlineFormatFinder","numberOfSiblings","referenceNode","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","activate","formatNode","formatNodes","consolidate","outerMostInline","pop","GreedyInlineFormatFinder","greedyProperty","fontAttr","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","parentsUntil","addBack","toArray","GreedyInlineFormatter","toCamelCase","action","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","widget","setDataSource","sender","newRange","ENTER","_widget","getKendoColorPicker","storedRange","_inputFocused","_popup","unselectable","_value","toCssRgba","fontWeight","togglable","fontStyle","overflow","toolIcon","commandOn","closeOnSelect","dataValueField","dataTextField","valuePrimitive","HTTP_PROTOCOL","protocolRegExp","endLinkCharsRegExp","LinkFormatFinder","LinkFormatter","markers","a","ref","UnlinkCommand","LinkCommand","url","_initialText","img","_close","_form","_createForm","_apply","_keydown","linkUrl","_dialog","formElement","form","kendoForm","renderButtons","field","label","editorOptions","after","ESC","textInput","anchor","AutoLinkCommand","detectedLink","detectLink","linkMarker","linkRange","_ensureWebProtocol","startNode","traverser","LeftDomTextTraverser","cancelAtNode","DomTextLinkDetection","_hasProtocolPrefix","_prefixWithWebProtocol","UnlinkTool","isLink","DomPos","_detectEnd","blank","clone","_detectStart","_isLinkDetected","puntuationOptions","extendOptions","RightDomTextTraverser","_skipStartPuntuation","lastIndexOfRegExp","ii","r","str","DomTextTraverser","cancel","_traverse","edgeNode","subText","splitIndex","SPACEBAR","BlockFormatFinder","candidate","suitable","f","_resolveListsItems","until","ImmutablesNS","BlockFormatter","ancestor","_handleImmutables","images","imageAttributes","nonImages","applyFormatting","immutableFormat","namedFormat","GreedyBlockFormatter","formatTag","ListFormatter","blockFormatter","BlockFormatTool","listElements","textAlign","float","display","marginLeft","marginRight","listStylePosition","ListFormatFinder","altAttr","matchesType","isList","unwrapTag","li","isImmutable","containsAny","_parentLists","merge","breakable","findSuitableNode","applyOnSection","section","pushAncestor","listStyleType","lastSection","lastNodes","sections","addLastSection","ul","fragment","ListCommand","ListTool","FormattingTool","toFormattingItem","dot","context","decorate","optionLabel","dataItem","toJSON","dataBound","getFormattingValue","n","selectBox","_ancestor","operator","CleanFormatCommand","tagsToClean","clean","listFormatter","unwrapListItem","highlightFirst","autoWidth","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","onload","onerror","applied","isIE","showBrowser","ImageBrowser","transport","read","_imageBrowser","ev","selected","dialogHeight","loadingOverlay","ImportCommand","_initializeUploadWidget","importOptions","upload","kendoUpload","success","_onUploadSuccess","_onUploadProgress","_onUploadSelect","error","_onUploadError","complete","_onUploadComplete","showFileList","multiple","saveUrl","autoUpload","saveField","validation","allowedExtensions","maxFileSize","getKendoUpload","_trigger","clearAllFiles","_removeLoadingOverlay","response","files","validationErrors","_initLoadingOverlay","eventType","uploadEvent","_iframeWrapper","_container","postProcess","genericCommand","initialValue","autoSize","ExportAsCommand","exportType","postToProxy","generateForm","submit","exportAsOptions","method","valueInput","exportTypeInput","fileNameInput","antiForgeryInput","csrf_param","ExportAsTool","changeHandler","_exec","itemTemplate","valueTemplate","iconClass","indentDirection","IndentFormatter","parentList","targets","mapImmutables","siblingList","nestedList","getListTypeAttr","targetIndex","styleType","targetNode","listParent","siblings","nextAll","IndentCommand","indentFormatter","OutdentCommand","OutdentTool","isOutdentable","listParentsCount","suitableNodes","ParagraphCommand","_insertMarker","_moveFocus","focusNode","shouldTrim","startInBlock","endInBlock","_blankAfter","paragraph","heading","tableNode","rng","emptyParagraphContent","parentChildrenLength","_insertParagraphAfter","NewLineCommand","filler","kbrParent","oldIE","KEDITORFILEURL","KEDITORFILETEXT","KEDITORFILETITLE","FileCommand","file","FileBrowser","_fileBrowser","ACTIVESTATE","SELECTEDSTATE","SCOPE","ROW","COL","ROWGROUP","COLGROUP","COLSPAN","ROWSPAN","TABLE","THEAD","TBODY","TR","TD","TH","getTouches","columnTemplate","tableFormatFinder","TableCommand","skipCleaners","_tableHtml","columnHtml","rowHeight","insertedTable","PopupTool","btn","popupTemplate","kendoPopup","copyAnchorStyles","_open","_activate","_toggle","_editor","TableWizardTool","TableWizardCommand","insertNewTable","kendoButton","_setTableSize","InsertTableTool","cols","cellWidth","cellHeight","firstCell","eq","lastCell","getOffset","tableFromLocation","floor","clientY","clientX","scrollLeft","offsetWidth","autoApplyNS","_valid","status","initiallyVisible","button","selectedRows","selectedColumns","changed","tableSize","stopImmediatePropagation","TableModificationCommand","_clearColIndexAttr","_findRowSpanCell","_resetElementResizing","_findNextTdInRow","td","lastTd","_adjustColgroups","colgroup","colElements","colgroupElements","numberOfCells","_associateHeaderIds","InsertRowCommand","cellCount","newRow","createdCell","_appendCell","newCell","InsertColumnCommand","columnIndex","_processForColSpan","_resizeCells","selectedCell","colSpanEffect","parsedWidth","unit","calculatedWidth","DeleteRowCommand","focusElement","rowParent","_focusElement","_handleRowSpanCells","adjacentCell","nextRow","firstRow","before","_reduceRowSpan","rowSpanValue","DeleteColumnCommand","columnCount","_handleColSpanCells","_reduceColSpan","colSpanValue","MergeCellsHorizontallyCommand","nextTd","_getColspan","MergeCellsVerticallyCommand","tr","targetRow","bottomTd","_getRowspan","SplitCellCommand","emptyTd","_splitCellHorizontally","_splitCellVertically","_getRowspanValue","_getColspanValue","tdToAdd","colSpanResult","rowSpanResult","TableModificationTool","commandsMap","insert","delete","column","TableFormatCommand","_showResizeHandles","TableFormatTool","isTable","align","nonSplittableTagsOnPaste","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","HtmlTagsCleaner","HtmlAttrCleaner","HtmlContentCleaner","CustomCleaner","htmlToFragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","blob","deferred","reader","FileReader","File","getAsFile","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","originalEvent","_insertImages","when","results","onpaste","clipboardNode","_decoreateClipboardNode","webkit","_moveToCaretPosition","clipboardRange","containers","ondragover","ondrop","dataTransfer","margin","padding","fontVariant","lineSpacing","nodeOffset","caretOffset","_caretOffset","translate","transform","rangeChanged","isStartTextNode","prevLength","bomNode","splittableParent","preventSplit","unwrapPasted","applicable","splitter","splittable","fragmentsHtml","elm","rangeEnd","focusedTable","siblingNodes","lastSiblingIndex","lastSibling","Cleaner","replacements","customReplacements","junkReplacements","convertFontMatch","$0","$1","closing","family","stripEmptyAnchors","listType","listData","startingSymbol","matchSymbol","symbol","isNumber","trimStartText","_guessUnorderedListStyle","_guessOrderedListStyle","_convertToLi","_checkForBullet","_getHtmlNoBullet","extractListLevels","level","_createList","rootMargin","rootIndex","lastRootLi","isLastRootLi","rootList","blockChildren","lastMargin","levels","acceptedNameTags","listIndex","levelType","removeAttributes","significantStyles","addSignificantStyles","isSignificantCss","removeAttributeNode","createColGroup","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeTextNodes","trs","currentNode","tables","longestRow","titles","removeFormatting","filters","DomCleaner","cleanDom","collectTags","collectAttr","TextContainer","HtmlTextLines","separators","line","inlineBlockText","resetLine","appendText","textContainer","appendInlineBlockText","flashInlineBlockText","endLine","il","il1","jl","jl1","DomEnumerator","preventDown","hasText","enumerator","buildText","getDefaultSeparators","htmlLines","thead","tbody","cleaner","cellText","PREVIOUS_SIBLING","getSibling","tableCells","tableCellsWrappers","tableElements","inTable","RemoveTableContent","cellsTypes","startCell","endCell","_removeContent","getNext","evt","Event","isDefaultPrevented","deleteSelection","startTyping","_removeBomSpan","textContent","_addCaret","_restoreCaret","_handleDelete","caretPlaceholder","_merge","_cleanBomBefore","_handleBackspace","startAtLi","liIndex","startAtNonFirstLi","rangeStartNode","previousNode","_handleSelection","parentElementOrNode","_surroundFullyContent","_surroundFullySelectedAnchor","toLocaleLowerCase","_join","startImmutable","endImmutable","_moveMarker","_root","dest","_mergeWithTextNode","appendedNode","_isCaret","systemCommandIsInProgress","createUndoCommand","isModifierKey","isSystem","_toSelectableImmutables","_selectEditorBody","isCharacter","String","fromCharCode","modifier","_getShortcutModifier","navigator","platform","toUpperCase","metaKey","found","matchKey","toolKey","onEndTyping","stopTyping","force","timeout","what","ExportPdfCommand","PrintCommand","CopyFormatCommand","blockStyles","collectStyles","rangeNodes","populateStyles","destination","styleValue","styleKey","attributeKey","styles","nodeStyles","ApplyFormatCommand","removeEmptyElementsFromRange","cleanInlineParents","applyBlockStyles","applyInlineStyles","emptyElements","blockParent","outerWrapper","previousNodes","nextNodes","prevWrapper","nextWrapper","listItems","currentStyle","createdNode","topNode","CopyFormatTool","ApplyFormatTool","LineHeightCommand","LineHeightFormatTool","getKendoComboBox","closeHandler","mouseDownHandler","keyDownHandler","currentRange","prefixOptions","DOM","createMark","character","scrollableWrapper","clonedRange","domRect","y","parentRect","getBoundingClientRect","createElementNS","setAttributeNS","appendSvgMarks","overlay","isInlineEditor","FormattingMarksCommand","math","REGEX_NUMBER_IN_PERCENTAGES","REGEX_NUMBER_IN_PIXELS","STRING","inPercentages","ResizingUtils","constrain","lowerBound","upperBound","getScrollBarWidth","scrollbar","calculatePercentageRatio","total","inPixels","toPercentages","toPixels","KEY_DOWN","MOUSE_LEAVE","MOUSE_UP","TableElementResizing","_attachEventHandlers","eventNamespace","rootElement","_destroyResizeHandle","rtl","handle","dataAttribute","detectElementBorderHovering","resizingInProgress","resizing","handleOptions","tableElement","currentTarget","resizeHandle","elementBorderHovered","showResizeHandle","_initResizeHandle","setResizeHandlePosition","setResizeHandleDimensions","setResizeHandleDataAttributes","_attachResizeHandleEventHandlers","_initResizable","_hideResizeMarker","markerClass","_destroyResizable","Resizable","draggableElement","onResizeStart","onResize","resizeend","onResizeEnd","_disableKeyboard","setResizeHandleDragPosition","_enableKeyboard","_forceResizing","userEvents","ResizingFactory","resizingName","_destroyResizing","_initResizing","parentTable","resizingType","abs","RESIZE_HANDLE_CLASS","RESIZE_MARKER_CLASS","BODY","COLATTR","COMMA","WIDTH","handleWidth","borderOffset","mousePosition","tableInnerElement","tBodies","scrollTopOffset","scrollLeftOffset","columnWidthOffset","scrollBarWidth","columnOffsetLeft","innerElementOffsetTop","tableHead","tableBody","fullHeight","columnWidth","columnLeftOffset","adjacentColumnWidth","resizeHandleOffsetLeft","handleOffset","newWidth","initialAdjacentColumnWidth","initialColumnWidth","nextColumn","rtlModifier","initialDeltaX","initialDelta","_setTableComputedWidth","_setColumnsComputedWidth","_resizeColumn","_resizeTopAndBottomColumns","_resizeAdjacentColumns","innerElementWidth","currentColumnsWidths","topAndBottomColumns","innerTableElement","deltaWidth","adjacentColumns","_resizeAdjacentColumn","adjacentColumn","HEIGHT","handleHeight","rowOffsetLeft","rowOffsetTop","topInnerTableElement","$row","tableTopOffset","resizeHandleOffsetTop","currentRowHeight","initialTableHeight","tableHeadHeight","tableBodyHeight","initialStyleHeight","newRowHeight","_setRowsHeightInPixels","_setTableHeight","_setRowsHeightInPercentages","currentRowsHeights","newHeight","Draggable","DRAG_START","DRAG","DRAG_END","HALF_INSIDE","MOUSE_OVER","MOUSE_OUT","EAST","NORTH","NORTHEAST","NORTHWEST","SOUTH","SOUTHEAST","SOUTHWEST","WEST","ElementResizeHandle","_addStyles","_initDraggable","_initPositioningStrategy","_initDraggingStrategy","resizableElement","_destroyDraggable","_setPosition","_positioningStrategy","getPosition","_onMouseOver","_onMouseOut","HandlePositioningStrategy","_draggable","dragstart","_onDragStart","drag","_onDrag","_onDragEnd","_draggingStrategy","adjustDragDelta","deltaX","deltaY","initialDeltaY","HandleDraggingStrategy","StrategyFactory","_items","register","itemsLength","PositioningStrategyFactory","calculatePosition","handleOffsetPosition","applyHandleOffset","applyScrollOffset","rootLeft","EastPositioningStrategy","NorthPositioningStrategy","NortheastPositioningStrategy","NorthwestPositioningStrategy","SouthPositioningStrategy","SoutheastPositioningStrategy","SouthwestPositioningStrategy","WestPositioningStrategy","DraggingStrategyFactory","adjustment","deltas","xAxisAdjustment","yAxisAdjustment","HorizontalDraggingStrategy","EastDraggingStrategy","WestDraggingStrategy","VerticalDraggingStrategy","NorthDraggingStrategy","SouthDraggingStrategy","HorizontalAndVerticalDraggingStrategy","NorthEastDraggingStrategy","NorthWestDraggingStrategy","SouthEastDraggingStrategy","SouthWestDraggingStrategy","RESIZE_HANDLE_WRAPPER_CLASS","ELEMENT_RESIZING_CLASS","MOUSE_DOWN","ELEMENT_TYPES","isUndefined","ElementResizing","handles","_destroyResizeHandles","appendHandlesTo","_resizeWidth","_resizeHeight","_getMaxDimensionValue","dimension","dimensionLowercase","parentDimension","parentScrollOffset","_initResizeHandles","_bindToResizeHandlesEvents","_onResizeHandleDragStart","_initialElementHeight","_initialElementWidth","_onResizeHandleDrag","_onResizeHandleDragEnd","TableResizing","_hasRowsInPixels","ratioValue","ratioTotalValue","constrainedWidth","styleWidth","currentWidth","parentWidth","_setColumnsWidth","constrainedHeight","styleHeight","currentHeight","parentHeight","hasRowsInPixels","parentColumn","columnsLength","isWidthInPercentages","ImageResizing","_onResizeHandleDragVertical","_onResizeHandleDragHorizontal","_onResizeHandleDragLocked","_getDeltas","initialWidth","initialHeight","MAX_SAFE_INTEGER","hasImg","eventTarget","eventCurrentTarget","isResizeHandleOrChild","tableResizing","cellsFormatFinder","reUnit","COL_INDEX","isTableCellWizard","tableCellWizard","selectedTable","_sourceTable","_selectedTable","selectedCells","_selectedTableCells","_selectedCells","closeCallback","onDialogClose","parseTable","TableWizardDialog","insertTable","createNewTable","updateTable","_ensureFocusableAfterTable","lastSelectedRow","cellProp","tableProp","_lastInCollection","_deleteTableRows","_addRows","_updateColumns","_updateTableProperties","cellProperties","_updateCellProperties","_updateCaption","_updateHeadersWithThead","_updateHeadersNoThead","_updateHeaderAssociates","_isHeadingRow","_isHeadingCell","cellsWithHeadersAssociated","headingIds","checkHeader","header","headersArray","headersAttr","some","_insertCells","insertCell","createTHead","_createTableRows","createTBody","cellsWithHeaders","_addScopes","initialIndex","insertRow","cellsLength","newRowsCount","firstRowLastCell","numberOfColumns","lastCurrentCell","rowColumns","deleteCell","_getStylesData","topCellPadding","_getNumericValue","leftCellPadding","bottomCellPadding","rightCellPadding","tableData","paddingTop","paddingLeft","paddingBottom","paddingRight","captionContent","deleteCaption","createCaption","_getAlignmentData","verticalAlign","_swapToHeaderCells","deleteTHead","_removeScopes","_removeAssociates","headerCols","whiteSpace","widthUnit","heightUnit","backgroundColor","bgColor","borderCollapse","_getTablePositionData","tStyle","captionClone","tableAlignment","_getAlignment","tablePosition","_getTablePosition","numberOfHeaderColumns","tableJson","_getUnit","parseTableRows","rowData","cellData","parseCell","cStyle","horizontalOnly","hAlign","vAlign","collection","TableWizardEditTool","TableCellWizardEditTool","FORM_FIELD_CLASS","INVISIBLE_CLASS","DOT","numericTextBoxSettings","borderStyles","textWrapDropDownSettings","tablePositionDropDownSettings","tableAlignmentDropDownSettings","cellAlignmentDropDownSettings","accessibilityAlignmentDropDownSettings","tablePropertiesDialogTemplate","cellPropertiesDialogTemplate","_openTablePropertiesDialog","_dialogTemplate","collectTableDialogValues","components","_initTabStripComponent","_tablePropertiesForm","_createTablePropertiesForm","_accessibilityPropertiesForm","_createAccessibilityPropertiesForm","_openCellPropertiesDialog","collectCellDialogValues","_cellPropertiesForm","_createCellPropertiesForm","isCellProperties","tabStrip","kendoTabStrip","_collectTableViewValues","_collectAccessibilityViewValues","_collectCellViewValues","tableView","check","cellView","wrapTextValue","accessibilityView","_addUnit","_initNumericTextbox","storage","settings","kendoNumericTextBox","_initDropDownList","kendoDropDownList","_setComponentValue","_initBorderStyleDropDown","_initTablePositionDropDown","_initPositionDropDown","_initTableAlignmentDropDown","_initAlignmentDropDown","_initCellAlignmentDropDown","_initAccessibilityAlignmentDropDown","_initTextWrapDropDown","_initAssociationDropDown","_initColorPicker","kendoColorPicker","clearButton","_initInput","kendoTextBox","_initCheckbox","kendoCheckBox","_initTextArea","kendoTextArea","_destroyComponents","dialogTemplate","_onPaddingTopChange","viewType","topCellPaddingNumeric","topCellPaddingValue","leftCellPaddingNumeric","bottomCellPaddingNumeric","rightCellPaddingNumeric","_cachedPadding","_onPaddingCheckChange","checked","bottomCellPaddingValue","leftCellPaddingValue","rightCellPaddingValue","_onColumnsNumberChange","headerColumnsNumeric","currentNumberOfColumnsHeaders","_onRowsNumberChange","headerRowsNumeric","currentNumberOfRowHeaders","numberOfRows","layout","grid","gutter","layoutWrapper","hint","optional"],"sources":["kendo.editor.js"],"mappings":"CAAA,SAAWA,EAAQC,GACI,iBAAZC,SAA0C,oBAAXC,OAAyBA,OAAOD,QAAUD,EAAQG,QAAQ,qBAAsBA,QAAQ,yBAA0BA,QAAQ,sBAAuBA,QAAQ,mBAAoBA,QAAQ,wBAAyBA,QAAQ,yBAA0BA,QAAQ,2BAA4BA,QAAQ,qBAAsBA,QAAQ,iBAAkBA,QAAQ,oBAAqBA,QAAQ,kBAAmBA,QAAQ,iBAAkBA,QAAQ,wBAAyBA,QAAQ,wBAAyBA,QAAQ,wBAAyBA,QAAQ,sBAC7hB,mBAAXC,QAAyBA,OAAOC,IAAMD,OAAO,CAAC,qBAAsB,yBAA0B,sBAAuB,mBAAoB,wBAAyB,yBAA0B,2BAA4B,qBAAsB,iBAAkB,oBAAqB,kBAAmB,iBAAkB,wBAAyB,wBAAyB,wBAAyB,sBAAuBJ,KAClaD,EAA+B,oBAAfO,WAA6BA,WAAaP,GAAUQ,MAAcC,YAAcT,EAAOS,aAAe,CAAC,EAAGT,EAAOS,YAAYC,GAAKT,IACtJ,CAJD,CAIGU,MAAM,WA6hSL,IAAUC,EAIFC,EACAC,EACAC,EAEAC,EACAC,EACAC,EACAC,EAEJC,EA+BAC,GAxkSJ,SAAUC,GACN,IAAIC,EAAgBD,EAAME,WAAWL,OAAO,CACxCM,KAAM,SAASC,GACXJ,EAAME,WAAWG,GAAGF,KAAKG,KAAKjB,KAAMe,GACpCf,KAAKkB,OACT,EACAC,OAAQ,CAAE,OAAQ,QAClBC,KAAM,SAAUC,GACZrB,KAAKsB,MAAQtB,KAAKsB,MAAMC,MAAM,EAAGvB,KAAKwB,oBAAsB,GAC5DxB,KAAKwB,oBAAsBxB,KAAKsB,MAAMF,KAAKC,GAAW,CAC1D,EACAI,KAAM,WACF,GAAIzB,KAAK0B,UAAW,CAChB,IAAIL,EAAUrB,KAAKsB,MAAMtB,KAAKwB,uBAC9BH,EAAQI,OACRzB,KAAK2B,QAAQ,OAAQ,CAAEN,QAASA,GACpC,CACJ,EACAO,KAAM,WACF,GAAI5B,KAAK6B,UAAW,CAChB,IAAIR,EAAUrB,KAAKsB,QAAQtB,KAAKwB,qBAChCH,EAAQO,OACR5B,KAAK2B,QAAQ,OAAQ,CAAEN,QAASA,GACpC,CACJ,EACAH,MAAO,WACHlB,KAAKsB,MAAQ,GACbtB,KAAKwB,qBAAuB,CAChC,EACAE,QAAS,WACL,OAAO1B,KAAKwB,qBAAuB,CACvC,EACAK,QAAS,WACL,OAAO7B,KAAKwB,qBAAuBxB,KAAKsB,MAAMQ,OAAS,CAC3D,IAGJnB,EAAMoB,WAAWpB,EAAO,CACpBqB,KAAM,CACFpB,cAAeA,IAG1B,CA1CD,CA0CGD,OAEH,SAAUV,EAAEgC,GAGR,IAAItB,EAAQuB,OAAOvB,MACfwB,EAAQxB,EAAMwB,MACdC,EAASzB,EAAM0B,GAAGD,OAClBE,EAAK3B,EAAM4B,QAAQC,SACnBC,EAAU9B,EAAM4B,QAAQE,QACxBjC,EAASP,EAAEO,OACXuB,EAAapB,EAAMoB,WACnBW,EAAO/B,EAAM+B,KACbC,EAAahC,EAAMiC,YACnBC,EAAclC,EAAMmC,aAGxB,MAAMC,EAA4B,yBAC5BC,EAA8B,2BAC9BC,EAAsC,mCAE5C,IAAIC,EAAS,SAETC,EAAoB,gBACpBC,EAAqB,cAIrBC,EAAe,CACf,kBACA,kBACA,OACA,OACA,YAKJ,IAAIC,EAAc,CACdC,sBAAuB,IACnB,sIAKJC,aAAc,SAASC,EAAMC,GACzB,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAO5B,OAAQ6B,IAC/B,GAAI1D,EAAE2D,QAAQH,EAAMC,EAAOC,GAAGE,OAAS,EACnC,OAAOH,EAAOC,EAG1B,EAEAG,gBAAiB,SAASL,EAAMM,GAC5B,IA4CIC,EA5CoB,CACpBC,YAAa,YACbC,UAAW,YACXC,YAAa,aACbC,cAAe,eACfC,aAAc,cACdC,YAAa,gBACbC,oBAAqB,iBACrBC,kBAAmB,eACnBC,qBAAsB,mBACtBC,qBAAsB,mBACtBC,OAAU,SACVC,OAAQ,SACRC,QAAS,UACTC,WAAY,OACZC,OAAQ,SACRC,YAAa,QACbC,WAAY,WACZC,SAAU,OACVC,UAAW,mBACXC,UAAW,UACXC,YAAa,YACbC,cAAe,2BACfC,eAAgB,4BAChBC,YAAa,yBACbC,YAAa,yBACbC,UAAW,mBACXC,aAAc,sBACdC,uBAAwB,2BACxBC,qBAAsB,yBACtBC,sBAAuB,0BACvBC,oBAAqB,wBACrBC,gBAAiB,mBACjBC,oBAAqB,wBACrBC,kBAAmB,eACnBC,eAAgB,uBAChBC,iBAAkB,wBAClBC,gBAAiB,qBACjBC,gBAAiB,YACjBC,WAAY,cACZC,YAAa,eACbC,IAAK,YAGwBhD,GAEjC,OAAIO,IAIAD,GAIGT,EAAYoD,YAAYjD,GACnC,EAEAiD,YAAa,SAASjD,GAClB,OAAOA,EAAKkD,QAAQ,kBAAmB,SAClCA,QAAQ,UAAW,KACnBC,aACT,EAEAvG,aAAc,SAASwG,EAAUC,GACxBA,EAAKrD,OACNqD,EAAK/F,QAAQ0C,KAAOoD,EACpBC,EAAKrD,KAAOoD,EAASD,eAGpBE,EAAK/F,QAAQsB,KACdyE,EAAK/F,QAAQsB,GAAK,CAAC,GAGvByE,EAAK/F,QAAQsB,GAAGhB,QAAUwF,EAE1BE,EAAOC,aAAaH,GAAYC,CACpC,EAEAG,eAAgB,SAASC,EAAYxD,GACjCqD,EAAO/F,GAAGD,QAAQoG,QAAQD,GAAcxD,CAC5C,EAEA0D,cAAe,SAASC,EAASC,GAC7B,IAAK,IAAIC,KAASD,EACdD,EAAUA,EAAQV,QAAQW,EAASC,GAAQ,IAAMA,EAAQ,KAE7D,OAAOF,CACX,EAEAG,iBAAkB,SAASH,EAASC,GAChC,IAAK,IAAIC,KAASD,EACdD,EAAUA,EAAQV,QAAQ,IAAMY,EAAQ,IAAKD,EAASC,IAE1D,OAAOF,CACX,GAkJAI,OAA+E,IAA7CC,SAASC,gBAA+B,gBAE1EC,EAAa,CACbC,MAAO,CAAC,OAAQ,SAAU,YAAa,iBACvCpG,KAAM,CAAC,OAAQ,QACfqG,QAAS,CAAC,YAAa,eACvBC,UAAW,CAAC,cAAe,gBAAiB,eAAgB,eAC5DC,MAAO,CAAC,cACRC,QAAS,CAAC,mBACVC,MAAO,CAAC,cAAe,aAAc,aAAc,UACnDC,MAAO,CAAC,sBAAuB,oBAAqB,uBAAwB,wBAC5EC,KAAM,CAAC,SAAU,WACjBC,aAAc,CAAC,kBAAmB,uBAClCC,aAAc,CAAC,eACfC,gBAAiB,CAAE,gBAAiB,iBAAkB,cAAe,cAAe,YAAa,gBACjGC,YAAa,CAAE,yBAA0B,uBAAwB,wBAAyB,uBAC1FC,eAAgB,CAAE,iBAAkB,mBAAoB,mBACxDC,cAAe,CAAE,aAAc,gBAG/B3B,EAAS3E,EAAO5B,OAAO,CACvBmI,yBAAyB,EACzB7H,KAAM,SAAS8H,EAAS7H,GACpB,IAGI8H,EACAC,EAAMC,EAJNC,EAAOhJ,KACPE,EAAWS,EAAM0B,GAAG4G,OACpBC,EAAMhJ,EAASiJ,KAMd1B,GAA6BuB,EAAKL,2BAIvCvG,EAAOpB,GAAGF,KAAKG,KAAK+H,EAAMJ,EAAS7H,GAEnCiI,EAAKjI,QAAUgB,EAAW,CAAC,EAAGiH,EAAKjI,QAASA,GAG5CgI,GADAH,EAAUI,EAAKJ,SACM,GACrBE,EAAOI,EAAIzF,KAAKsF,GAEhB/I,KAAKoJ,iBACDR,EAAQS,QAAQ,QAAS,SAAUL,EAAKM,OAAOC,KAAKP,EAAM/G,IAG9D4G,EAAmBG,EAAKQ,WAAWZ,GAEnCI,EAAKS,aAAaZ,GAClBG,EAAKU,aAAaZ,GAClBE,EAAKW,aACLX,EAAKY,0BAA0BZ,GAC/BA,EAAKa,iBAELb,EAAKc,UAAY,IAAI5J,EAAS6J,UAAU/J,MACxCgJ,EAAKgB,cAAgB,IAAIrJ,EAAMqB,KAAKpB,cAEpCoI,EAAKiB,eAAelJ,EAASgI,GAE7BC,EAAKI,iBAAiB1B,SAAU,CAC5BwC,UAAa,WAAalB,EAAKmB,YAAc,EAC7CC,QAAW,SAASC,GAAKrB,EAAKsB,SAASD,EAAI,IAG/CrB,EAAKI,iBAAiBlH,OAAQ,SAAU8G,EAAKuB,wBAAwBhB,KAAKP,IAE1EA,EAAKwB,wBAEO,YAAR1B,GACAE,EAAKyB,WAAWzB,EAAK0B,QAAQC,KAAK,WAGtC3B,EAAK4B,QAAQC,SAEb7B,EAAK8B,6BAELnK,EAAMoK,OAAO/B,GAETA,EAAKgC,uBACLhC,EAAKgC,sBAAuBhC,EAAK0B,SAAW1B,EAAK0B,QAAQ,IAAO1B,EAAKJ,QAAQ,IAErF,EAEAzH,OAAQ,CACJ,SACA,SACA,UACA,QACA,QACA,UACA,SAGJJ,QAAS,CACL0C,KAAM,SACNwH,SA/OO,CACXC,KAAM,OACNC,KAAM,OACNC,OAAQ,SACRC,UAAW,YACXC,cAAe,gBACfrH,YAAa,cACbC,UAAW,YACXqH,UAAW,cACXnH,cAAe,cACfD,YAAa,kBACbE,aAAc,mBACdC,YAAa,UACbC,oBAAqB,wBACrBC,kBAAmB,sBACnBgH,WAAY,kBACZC,gBAAiB,0BACjB7G,OAAQ,SACRC,QAAS,UACTC,WAAY,mBACZC,OAAQ,mBACRC,YAAa,eACbC,WAAY,cACZyG,WAAY,cACZxG,SAAU,YACVyG,SAAU,qBACVC,gBAAiB,mBACjBC,SAAU,mBACVC,gBAAiB,mBACjBC,YAAa,SACbC,WAAY,SACZ7G,UAAW,QACXC,UAAW,mBACX6G,MAAO,SACPC,YAAa,eACbC,cAAe,wCACfC,WAAY,SACZC,eAAgB,aAChBC,QAAS,cACTC,YAAa,OACbC,YAAa,OACbC,gBAAiB,oEACjBC,WAAY,uCACZC,cAAe,6FACfC,kBAAmB,4CACnBC,gBAAiB,cACjBC,aAAc,iBACdC,WAAY,aACZC,YAAa,cACbC,eAAgB,cAChBC,UAAW,QACXC,SAAU,OACVC,eAAgB,cAChBC,SAAU,OACVC,YAAa,UACbC,oBAAqB,0BACrBC,aAAc,SACdC,aAAc,SACdC,SAAU,UACVC,aAAc,SACdrH,gBAAiB,mBACjBjB,YAAa,iBACbuI,gBAAiB,2BACjBtI,cAAe,yBACfC,eAAgB,0BAChBC,YAAa,gBACbC,YAAa,gBACbC,UAAW,aACXC,aAAc,gBACdC,uBAAwB,2BACxBC,qBAAsB,yBACtBC,sBAAuB,2BACvBC,oBAAqB,yBACrBI,eAAgB,mBAChBC,iBAAkB,qBAClBC,gBAAiB,oBACjBwH,YAAa,eACb7H,gBAAiB,mBACjBC,oBAAqB,kBACrB6H,SAAU,UACVC,QAAS,OACTC,iBAAkB,WAClBC,QAAS,UACTC,QAAS,UACTC,MAAO,QACPC,OAAQ,SACRC,MAAO,QACPC,YAAa,eACbC,YAAa,eACbC,WAAY,MACZC,YAAa,OACbC,cAAe,SACfC,aAAc,QACdC,wBAAyB,4BACzBC,WAAY,cACZ9G,UAAW,YACX+G,iBAAkB,oBAClBC,SAAU,WACVC,WAAY,aACZC,gBAAiB,mBACjBjL,SAAU,YACVkL,GAAI,KACJC,OAAQ,SACRC,YAAa,eACbC,YAAa,eACbC,YAAa,eACbC,gBAAiB,mBACjBC,SAAU,YACVC,0BAA2B,oBAC3BC,UAAW,aACXC,YAAa,eACbC,WAAY,cACZC,aAAc,iBACdC,eAAgB,mBAChBC,cAAe,kBACfC,gBAAiB,oBACjBC,kBAAmB,sBACnBC,iBAAkB,qBAClBC,gBAAiB,oBACjBC,kBAAmB,sBACnBC,iBAAkB,qBAClBC,YAAa,mBACbC,QAAS,UACTC,KAAM,OACNC,eAAgB,qBAChBC,cAAe,kBACfC,WAAY,eACZC,SAAU,YACVjM,OAAU,SACVkM,MAAO,QACPC,WAAY,cACZC,cAAe,cACfC,wBAAyB,6CACzBC,cAAe,OACfC,eAAgB,oCAChBC,aAAc,sBACd5K,WAAY,cACZC,YAAa,eACb4K,WAAY,OACZ3P,KAAM,OACNG,KAAM,QAoGFyP,YAAa,GACbC,MAAO,GACPC,cAAc,EACdpK,QAAS,CAAC,EACVqK,SAAS,EACTC,4BAA6B,IAC7BC,OAAQ,KACRC,WAAW,EACXC,gBAAiB,CACbC,OAAQ,MAEZC,cAAe,CACXC,UAAU,EACVC,UAAU,EACVlK,SAAS,EACTmK,cAAc,EACdC,SAAS,GAEbC,aAAc,CACVC,KAAK,EACLC,KAAK,EACLR,OAAQ,KACRS,cAAc,EACdC,iBAAiB,EACjBC,gBAAgB,EAChBC,QAAQ,EACRC,MAAM,EACNC,MAAM,GAEVC,YAAa,GACbC,cAAe,CACXC,OAAO,EAAMnB,WAAW,EAAOoB,WAAW,EAC1CC,WAAW,GAEfC,aAAc,KACdC,YAAa,KACbC,eAAe,EACfxH,SAAU,CACN,CAAEyH,KAAM,QAASC,MAAO,gCACxB,CAAED,KAAM,cAAeC,MAAO,qCAC9B,CAAED,KAAM,UAAWC,MAAO,kBAC1B,CAAED,KAAM,SAAUC,MAAO,gCACzB,CAAED,KAAM,iBAAkBC,MAAO,uCACjC,CAAED,KAAM,SAAUC,MAAO,8BACzB,CAAED,KAAM,kBAAmBC,MAAO,mCAClC,CAAED,KAAM,eAAgBC,MAAO,yCAC/B,CAAED,KAAM,UAAWC,MAAO,gCAE9BxH,SAAU,CACN,CAAEuH,KAAM,UAAWC,MAAO,YAC1B,CAAED,KAAM,WAAYC,MAAO,WAC3B,CAAED,KAAM,WAAYC,MAAO,SAC3B,CAAED,KAAM,WAAYC,MAAO,UAC3B,CAAED,KAAM,WAAYC,MAAO,SAC3B,CAAED,KAAM,WAAYC,MAAO,WAC3B,CAAED,KAAM,WAAYC,MAAO,aAE/BtH,YAAa,CACT,CAAEqH,KAAM,YAAaC,MAAO,KAC5B,CAAED,KAAM,YAAaC,MAAO,cAC5B,CAAED,KAAM,YAAaC,MAAO,MAC5B,CAAED,KAAM,YAAaC,MAAO,MAC5B,CAAED,KAAM,YAAaC,MAAO,MAC5B,CAAED,KAAM,YAAaC,MAAO,MAC5B,CAAED,KAAM,YAAaC,MAAO,MAC5B,CAAED,KAAM,YAAaC,MAAO,OAEhCC,MAAO,CACH,aACA,OACA,SACA,YACA,OACA,OACA,cACA,gBACA,eACA,aACA,cACA,sBACA,oBACA,SACA,UACA,aACA,SACA,cACA,kBACA,sBACA,cACA,cACA,cACA,gBACA,iBACA,YACA,eACA,yBACA,uBACA,wBACA,sBACA,iBACA,mBACA,oBAIRC,QAAS,WACL,IAAItK,EAASjJ,KAEboC,EAAOpB,GAAGuS,QAAQtS,KAAKjB,MAEvBA,KAAKmK,YAAW,GAEhBnK,KAAKwT,sBAELC,aAAazT,KAAK0T,sBAElB1T,KAAK2T,gBAEL3T,KAAK4K,QAAQ2I,UAETvT,KAAK4T,gBACL5T,KAAK4T,eAAeL,UAEpBvT,KAAK6T,YACL7T,KAAK6T,WAAWN,UAGpBtK,EAAO6K,uBAEH9T,KAAK+T,uBACL/T,KAAK+T,qBAAqBC,aAC1BhU,KAAK+T,qBAAuB,MAG5B/T,KAAKiU,iBACLjU,KAAKiU,eAAeD,aACpBhU,KAAKiU,eAAiB,KACtBjU,KAAK0K,QAAQ2H,IAAI,aAAc,IAC/BrS,KAAK0K,QAAQ2H,IAAI,aAAc,KAGnCpJ,EAAOiL,oBAEPjL,EAAOkL,iCAEPxT,EAAM4S,QAAQvT,KAAK0K,QACvB,EAEA0J,WAAY,SAASrT,GAGjBqB,EAAOpB,GAAGoT,WAAWnT,KAFRjB,KAEqBe,GAE9BA,EAAQuS,OACRtT,KAAKqU,iBAAiBtT,EAAQuS,OAGlCtT,KAAKsU,wBACT,EAEAC,YAAa,SAAS7M,GAClB,OAAO/G,EAAM0B,GAAG4G,OAAOuL,WAAWD,YAAY7M,GAAY1H,KAAK0H,SACnE,EAEA+M,aAAc,WACV,OAAO9T,EAAM0B,GAAG4G,OAAOE,IAAIuL,OAAO1U,KAAKqT,QAC3C,EAEAsB,KAAM,SAASlR,EAAMmR,GACjB,IAGIC,EAAO/N,EAHPkC,EAAOhJ,KACPqB,EAAU,KACV2F,EAAerG,EAAM0B,GAAG0E,OAAOC,aAGnC,IAAKvD,EACD,MAAM,IAAIqR,MAAM,wDAGpB,GAAkD,SAA9C9L,EAAK+L,KAAKC,aAAa,oBACd,UAATvR,GACS,QAATA,GACS,aAATA,EACA,OAAO,EAkBX,GAfKuF,EAAKiM,SAASC,uBACflM,EAAKmM,aACLnM,EAAKoM,YAAYpM,EAAKqM,QAAUrM,EAAKsM,cAGzCxO,EAAOkC,EAAKsK,MAAM7P,IAASuD,EAAavD,KAGpC8R,OAAO7S,KAAKsE,GAAcwO,KAAIC,IACtBA,EAAI7O,gBAAkBnD,IACtBqD,EAAOE,EAAayO,GACxB,IAIJ3O,EAAM,CASN,GARA+N,EAAQ7L,EAAKsM,WAETxO,EAAKzF,UACLA,EAAUyF,EAAKzF,QAAQb,EAAO,CAAEqU,MAAOA,EAAOE,KAAM/L,EAAK+L,KAAMW,aAAc1M,EAAK0M,YAAcd,KAGxF5L,EAAKrH,QAAQ,UAAW,CAAE8B,KAAMA,EAAMpC,QAASA,IAGvD,OAGJ,GAAI,iBAAiBsU,KAAKlS,GACtBuF,EAAKgB,cAAcvG,UAChB,GAAIpC,IACP2H,EAAK4M,YAAYvU,GAEbA,EAAQwU,OAER,YADAxU,EAAQyU,OAAS9M,EAAK+M,eAAexM,KAAKP,IAMrC,oBAATvF,GACAuF,EAAKuB,0BAETvB,EAAKgN,kBACT,CACJ,EAEAD,eAAgB,WACZ,MAAM/M,EAAOhJ,KACbgJ,EAAKgN,iBAAiB/U,KAAK+H,GAC3BA,EAAKuB,wBAAwBtJ,KAAK+H,EACtC,EAEA4M,YAAa,SAASvU,GACbA,EAAQ4U,iBACTjW,KAAKgK,cAAc5I,KAAKC,GAG5BA,EAAQ4H,OAASjJ,KACjBqB,EAAQsT,MACZ,EAEAuB,MAAO,WACHlW,KAAKmW,kBACT,EAEAb,SAAU,WACN,IAAIc,EAAYpW,KAAKqW,eACjBxB,EAAQuB,GAAaA,EAAUE,WAAa,EAAIF,EAAUG,WAAW,GAAKvW,KAAKuU,cAC/EiC,EAAMxW,KAAK0H,SAOf,OALImN,EAAM4B,gBAAkBD,GAAO3B,EAAM6B,cAAgBF,GAAQ3B,EAAM8B,aAAgB9B,EAAM+B,YACzF/B,EAAMgC,SAAS7W,KAAK+U,KAAM,GAC1BF,EAAMiC,UAAS,IAGZjC,CACX,EAEAwB,aAAc,WACV,OAAO1V,EAAM0B,GAAG4G,OAAO8N,eAAeC,sBAAsBhX,KAAK0H,SACrE,EAEAuP,MAAO,SAASC,EAAMnW,GAClBf,KAAKkW,QAEL,IAAI7U,EAAU,IAAIV,EAAM0B,GAAG4G,OAAOxI,kBAAkBR,EAAEO,OAAO,CACzDqU,MAAO7U,KAAKsV,WACZ4B,KAAMA,GACPnW,IAEHM,EAAQ4H,OAASjJ,KAEjBqB,EAAQsT,MACZ,EAEAwC,QAAS,WACL,IAAInO,EAAOhJ,KAEX,GAAIgJ,EAAKoO,SAAU,CACfpO,EAAKkL,oBAGL,IAAIb,EAAQrK,EAAKqK,QACjBrK,EAAKoO,SAASC,IAAIhE,GAClBrK,EAAK0B,QAAQC,KAAK,UAAU2M,SAC5BtO,EAAKY,0BAA0BZ,GAC/BA,EAAKqK,MAAMA,EACf,CACJ,EAEA8C,iBAAkB,WACdnW,KAAKmV,aAEDnV,KAAKuX,uBACLvX,KAAKoV,YAAYpV,KAAKuX,sBAAsBC,UAEpD,EAEAC,cAAe,SAAS5C,GAEpB,IAAI6C,GADJ7C,EAAQA,GAAS7U,KAAKsV,YACAqC,wBAClB5C,EAAO/U,KAAK+U,MAEZ2C,GAAa3C,GAAQ9U,EAAE2X,SAAS7C,EAAM2C,MACtC1X,KAAKuX,sBAAwB,IAAI5W,EAAM0B,GAAG4G,OAAO1I,aAAasU,EAAOE,GAE7E,EAEA8C,aAAc,WACV,OAAOlX,EAAM0B,GAAG4G,OAAO6O,WAAWC,WAAW/X,KAAKsV,WAAW0C,gBACjE,EAEA5C,YAAa,SAASP,GAClB7U,KAAKmV,aACL,IAAIiB,EAAYpW,KAAKqW,eACrBD,EAAU6B,kBACV7B,EAAU8B,SAASrD,GACnB7U,KAAKyX,cAAc5C,EACvB,EAEAsD,MAAO,SAAStR,GACZ,IAGIgO,EAAOuD,EAHPtR,EAAOnG,EAAM0B,GAAG0E,OAAOC,aAAaH,GACpCwR,EAASvR,IAASA,EAAK/F,QAAQsX,QAAUvR,EAAKuR,QAC9C7D,EAAa7T,EAAM0B,GAAG4G,OAAOuL,WAGjC,QAAI6D,IACAxD,EAAQ7U,KAAKsV,aAEb8C,EAAY5D,EAAW4D,UAAUvD,IAElB/S,QAAU+S,EAAMyD,YAC3BF,EAAY,CAACvD,EAAM4B,iBAGhB4B,EAAOE,UAAYF,EAAOE,UAAUH,GAAaC,EAAOG,YAAYJ,GAInF,EAEA9O,OAAQ,SAAS+J,GACbA,EAAQA,GAASrT,KAAKe,QAAQyQ,QAAUxR,KAAKyU,eAAiBzU,KAAKqT,QAE/DrT,KAAKoX,UACLpX,KAAKoX,SAASC,IAAIhE,GAClBrT,KAAKyY,oBAAoBpF,EAAMqF,SAE/B1Y,KAAK2Y,UAAYtF,CAEzB,EAEAA,MAAO,SAAS6D,GACZ,IAAInC,EAAO/U,KAAK+U,KACZ7U,EAAWS,EAAM0B,GAAG4G,OACpBlI,EAAUf,KAAKe,QACf6X,EAAc1Y,EAAS4X,WAAWC,WAAWhD,EAAMhU,EAAQ+Q,eAE/D,GAAIoF,IAASjV,EACT,OAAO2W,EAGP1B,GAAQ0B,IAIZ1Y,EAAS4X,WAAWe,UAAU3B,EAAMnC,EAAMhU,EAAQ6Q,iBAElD5R,KAAKuX,sBAAwB,KAC7BvX,KAAKsJ,SACLtJ,KAAK8Y,gBACT,EAEAC,WAAY,WACR,IAAI/P,EAAOhJ,KACPgH,EAAehH,KAAKsT,MAExBtK,EAAKgQ,OAAO,SAAUhQ,EAAK4B,QAAQC,OAAOtB,KAAKP,EAAK4B,UAEpD5B,EAAK4B,QAAQhC,QAAQ+B,KAAK,kBACrBsO,QAAO,CAACtV,EAAGuV,IAA+C,IAAxCjZ,EAAEiZ,GAAIvO,KAAK,kBAAkB7I,SAC/CqX,MAAK,CAACxV,EAAGuV,KACN,IAAIrS,EAAWqS,EAAGlE,aAAa,gBAC3BlO,EAAOE,EAAaH,GAEpBC,GAAQA,EAAKsS,YACbtS,EAAKsS,WAAWnZ,EAAEiZ,GAAKlQ,EAC3B,IAGRA,EAAKO,KAAK,SAAUP,EAAK4B,QAAQC,OAAOtB,KAAKP,EAAK4B,SACtD,EAEAyO,MAAO,WACH,IAAIjC,EAAWpX,KAAKoX,SAChBkC,EAAMlC,EAAWA,EAASC,MAAQrX,KAAK2Y,UACvCtF,EAAQrT,KAAKe,QAAQyQ,QAAUxR,KAAKyU,eAAiBzU,KAAKqT,QAE9DrT,KAAKsJ,SAED8N,GACAA,EAASzV,QAAQ,QAGjB0R,GAASiG,IACTtZ,KAAK2B,QAAQ,UACTyV,GACAA,EAASzV,QAAQ,UAG7B,EAEA4X,eAAgB,SAAS1E,GACrB,IAAI3L,EAAMvI,EAAM0B,GAAG4G,OAAOE,IACtB4L,EAAO/U,KAAK+U,KAChB,OAAOF,GAAS3L,EAAIsQ,iBAAiBzE,EAAMF,EAAM4B,iBAC7CvN,EAAIsQ,iBAAiBzE,EAAMF,EAAM6B,aACzC,EAEA+C,sBAAuB,SAAS7G,GAC5B,IACI8G,EAAQC,EAAKnD,EAMboD,EAPA3Q,EAASjJ,KAEToX,EAAWnO,EAAOmO,SAClByC,EAAkB5Q,EAAOlI,QAAQ2Q,OACjCA,EAASmI,GAAmBnS,SAASgK,OACrCoI,EAAe,GACfC,EAAM,gBAGV3C,EAAS4C,OAETN,EAASzZ,EAAE,aAAc,CAAEga,MAAOhR,EAAOlI,QAAQkK,SAASkB,cAAe+N,YAAa,MAAO,GAE7Fja,EAAEyZ,GACGrH,IAAI,UAAW,IACf8H,SAAS,sBACTC,KAAK,WAAYhD,EAAS,GAAGiD,UAC7BC,aAAalD,IAIdyC,GAAmBnI,GAAU6I,SAASC,YAGtCT,EAAM,+BADND,EAAe,WAAW7Q,EAAOlI,QAAQuQ,MAAQ,UAAUrI,EAAOlI,QAAQuQ,SAAW,uBAAwBI,gBACxD,KACrDgI,EAAOK,IAAMA,GAGZL,EAAOK,MACRL,EAAOK,IAAM,IAGjBJ,EAAMD,EAAOe,eAAiBf,EAC9BlD,EAAMmD,EAAIjS,UAAYgS,EAAOgB,gBAG7B,MAAMC,EAAW1R,EAAO8K,qBAAuB,IAAI6G,sBAAqBC,IACpE,IAAK,MAAMC,KAASD,EACZC,EAAMC,iBACN9R,EAAO+R,oBAAoBxE,EAAIzB,MAC/B4F,EAASM,UAAUvB,GAE3B,IA6DJ,OA3DAiB,EAASO,QAAQxB,GAEjBE,EAAOlS,SAASyT,qBAAqB,QAAQ,GAAGnG,aAAa,SAr0B9C,KAu0BfwB,EAAI4E,OACJ5E,EAAI6E,MACA,8BAAgCzB,EAAhC,yEAGA,UAAU3Q,EAAOlI,QAAQuQ,MAAQ,UAAUrI,EAAOlI,QAAQuQ,SAAW,ySAKhE3Q,EAAM4B,QAAQ+Y,MAAMlE,GAAY,iBAAmB,KACnD9U,EAAGiZ,IAAM,uBAAyB,KAClC9Y,EAAQ+Y,MAAQ/Y,EAAQgZ,OAAS,eAAiB,IAVvD,+kEA6CA3B,EACA7Z,EAAEuV,IAAI5C,GAAa,SAAS8I,GACxB,MAAO,gCAAgCA,MAASzS,EAAOlI,QAAQuQ,MAAQ,UAAUrI,EAAOlI,QAAQuQ,SAAW,KAC/G,IAAGqK,KAAK,IACR,oBAAoB1S,EAAOL,QAAQwR,KAAK,kEAE5C5D,EAAIoF,QAEGjC,CACX,EAEAkC,kBAAmB,WACX,WAAY7b,aACLA,KAAKqV,MAEpB,EAEA2F,oBAAqB,SAASjG,GAC1B,IAEI+G,EAAWC,EAAYC,EAAOrY,EAAGsY,EAAKC,EAAWjQ,EAFjDkQ,EAAoBnc,KAAK4K,QAAQhC,QAAQ+B,KAAK,kCAC9CzB,EAAMvI,EAAM0B,GAAG4G,OAAOE,IAG1B,GAAIgT,EAAkBra,OAAQ,CAE1B,KADAga,EAAYK,EAAkBC,wBAE1B,OASJ,GANAJ,GADAD,EAAaD,EAAUC,YACJM,OAEftH,GACA+G,EAAUQ,KAAKjK,IAAI,mBAAoBnJ,EAAIqT,uBAAuBtc,EAAE8U,MAGtC,IAA9B/U,KAAKe,QAAQwQ,aAEb,IAAK5N,EAAI,EAAGA,EAAIqY,EAAMla,OAAQ6B,IAC1BsY,EAAMD,EAAMrY,GAAGsY,KAAO,OACtBC,EAAYF,EAAMrY,GAAGuY,UAGrBjQ,GADAA,EAAQ/C,EAAIsT,YAAYzH,EAAMkH,EAAK,CAAEC,UAAWA,KAClCvV,QAAQ,KAAM,KAE5BqV,EAAMrY,GAAGsI,MAAQA,EAAQ,wBAIjC8P,EAAWpa,QAAQ,SACvB,CACJ,EAEA8a,6BAA8B,WAC1B,MAAMzT,EAAOhJ,KACT0c,EAAY1T,EAAKJ,QAAQwR,KAAK,MAElC,IAAInO,EAAO0Q,EAEX1Q,EAAQ,cAAclJ,EAA4B,IAAM2Z,MAAc1T,EAAKjI,QAAQuQ,MAAQ,UAAUtI,EAAKjI,QAAQuQ,SAAW,0BAC1HoL,iCACAA,kCACAA,kCACAA,kCACAA,kCACAA,kCACAA,kCACAA,sEACAzZ,EAAsC,IAAMyZ,iQAQ5C1Z,EAA8B,IAAM0Z,sHAMvCC,EAAQ1c,EAAE+I,EAAKtB,SAASkV,MACxBD,EAAMhS,KAAK,IAAM5H,EAA4B,IAAM2Z,GAAWpF,SAC9DqF,EAAME,OAAO5Q,EACjB,EAEA6Q,8BAA+B,WAC3B,MAAM9T,EAAOhJ,KACT0c,EAAY1T,EAAKJ,QAAQwR,KAAK,MAElCpR,EAAK+T,+BAAiC9c,EAAE,YAAYgD,EAAsC,IAAMyZ,aAChG1T,EAAKgU,wBAA0B/c,EAAE,YAAY+C,EAA8B,IAAM0Z,aAAqBO,SAASjU,EAAK+T,gCACpH/T,EAAKkU,uBAAyBC,WAAWld,EAAE+I,EAAK+L,MAAM1C,IAAI,gBAAkB8K,WAAWld,EAAE+I,EAAK+L,MAAM1C,IAAI,mBAEpGrJ,EAAKoU,kBACLpU,EAAK+T,+BAA+BM,YAAYrU,EAAKJ,SAErDI,EAAK+T,+BAA+BE,SAAShd,EAAE+I,EAAKtB,UAAUiD,KAAK,QAE3E,EAEAwJ,+BAAgC,WAC5B,MAAMnL,EAAOhJ,KACT0c,EAAY1T,EAAKJ,QAAQwR,KAAK,MAElCna,EAAE+I,EAAKtB,UAAUiD,KAAK,IAAM1H,EAAsC,IAAMyZ,GAAWpF,SACnFrX,EAAE+I,EAAKtB,SAASkV,MAAMjS,KAAK,IAAM5H,EAA4B,IAAM2Z,GAAWpF,QAClF,EAEAgG,oCAAqC,WACjC,MAAMtU,EAAOhJ,KAETgJ,EAAKoU,kBACLpU,EAAK+T,+BAA+B3O,OAAOnO,EAAE+I,EAAK+L,MAAMlS,eAExDmG,EAAK+T,+BAA+B3O,OAAOpF,EAAK+L,KAAKwI,aAAevU,EAAKkU,uBAEjF,EAEApS,2BAA4B,WACxB,MAAM9B,EAAOhJ,KACTwd,EAAexU,EAAKjI,QAAQyc,aAE5BxU,EAAKoU,mBAAqBI,GAAgB,IAC1CxU,EAAKyU,uBAAyBzU,EAAKJ,QAAQ8U,KAAK,uFAAuFC,SACvI3U,EAAKyU,uBAAuBrP,OAAOoP,GAE3C,EAEAhK,oBAAqB,WAGjB,IAFA,IAAIoK,EAAW5d,KAAK6d,UAEXla,EAAI,EAAGA,EAAIia,EAAS9b,OAAQ6B,IAAK,CACtC,IAAIma,EAAIF,EAASja,GACjBma,EAAElV,QAAQmV,IAAID,EAAEhV,KAAMgV,EAAEE,QAC5B,CAEAhe,KAAK6d,UAAY,EACrB,EAEA/J,qBAAsB,WAClB,IAAI7K,EAASjJ,KACTiJ,EAAOgV,gBACPhV,EAAOgV,cAAc1K,UACrBtK,EAAOgV,cAAgB,KAE/B,EAEA9T,WAAY,WACR,IAAI8K,EAAWjV,KAAKiV,SAEpB,IACQA,EAASC,uBACTD,EAASiJ,WAAU,GACnBle,KAAKyX,gBAEb,CAAE,MAAOpN,GAAK,CAClB,EAEA8K,WAAY,WACR,IAIIgJ,EAJApJ,EAAO/U,KAAK+U,KACZ2E,EAAS1Z,KAAK0K,SAAW1K,KAAK0K,QAAQC,KAAK,UAAU,GACrDhD,EAAkB3H,KAAK0H,SAASC,gBAChCyW,EAAgBzd,EAAM0d,kBAIrB3E,GAAU3E,EAAKwI,aAAexI,EAAKuJ,cACpCH,EAAYpJ,EAAKoJ,UACjBpJ,EAAKmB,QACLnB,EAAKoJ,UAAYA,GAEVC,GAAiBrJ,GAAQqJ,GAAiB1E,IACjDyE,EAAYxW,EAAgBwW,UAC5BpJ,EAAKmB,QACLvO,EAAgBwW,UAAYA,EAEpC,EAEAxK,cAAe,WAEPhT,EAAM4B,QAAQE,QAAQ8b,MAAQve,KAAKoX,UACnBnX,EAAE,aACboS,IAAI,CACDtD,SAAU,QACVyP,KAAM,MACNC,IAAK,MACLtQ,MAAO,MACPC,OAAQ,MACR,YAAa,IACbe,OAAQ,IACRuP,QAAS,MAEhBzB,SAASvV,SAASqN,MAAMpT,QAAQ,SACvBA,QAAQ,QAAQ2V,QAElC,EAEAqH,oBAAqB,SAAStU,GAC1B,IAAIxD,EAAWwD,EAAEuU,OAAOvC,KAAK,WAEzBxV,GAAyB,gBAAbA,GACZ7G,KAAK2U,KAAK9N,EAElB,EAEAgY,mBAAoB,SAAShK,GACzB,IAAI3U,EAAWS,EAAM0B,GAAG4G,OAExB,GAAIjJ,KAAKe,QAAQ2U,WACb,OAAIb,EAAMyD,UACCpY,EAAS4e,WAAWC,kBAAkBlK,GAEkB,IAAxD3U,EAASsU,WAAWwK,kBAAkBnK,GAAO/S,MAGhE,EAEA8H,0BAA2B,WACvB,IACI4M,EACAyI,EACAC,EAHAjW,EAASjJ,KAKb,GAAIiJ,EAAOmO,SAAU,CAMjB,GALAnO,EAAO/G,OAAS+G,EAAOwQ,sBAAsBxQ,EAAOlI,QAAQ6R,eAC5D4D,EAAMvN,EAAOvB,SAAWuB,EAAO/G,OAAOwY,iBAAmBzR,EAAO/G,OAAOwF,UAI9DqN,KAAM,CACX,IAAIA,EAAOyB,EAAI2I,cAAc,QAC7BpK,EAAKqK,aAAa,kBAAmB,QACrCrK,EAAKqK,aAAa,cAAe,OACjC5I,EAAI2E,qBAAqB,QAAQ,GAAGkE,YAAYtK,GAEhD,IAAIuK,EAAWC,aAAY,WACnBtf,EAAEgJ,EAAOvB,UAAUiD,KAAK,QAAQ7I,OAAS,IACzC7B,EAAEgJ,EAAOvB,UAAUiD,KAAK,QAAQ6U,OAAOlI,SACvCpV,OAAOud,cAAcH,GAE7B,GAAE,GACN,CAEArW,EAAO8L,KAAOyB,EAAIzB,KAElBkK,EAAchW,EAAO/G,OACrBgd,EAAmB1I,EAEnBxW,KAAKoJ,iBAAiBoN,EAAK,UAAWxW,KAAKsK,SAASf,KAAKvJ,MAC7D,MACIiJ,EAAO/G,OAASA,OAChBsU,EAAMvN,EAAOvB,SAAWA,SACxBuB,EAAO8L,KAAO9L,EAAOL,QAAQ,GAE7BqW,EAAchW,EAAO8L,KACrBmK,EAAmBjW,EAAO8L,KAE1B2K,YAAW,KACPzW,EAAO+R,oBAAoB/R,EAAO8L,KAAK,IAI/C/U,KAAKoJ,iBAAiB6V,EAAa,OAAQjf,KAAKqZ,MAAM9P,KAAKvJ,OAC3DiJ,EAAOG,iBAAiB8V,EAAkB,OAAQjW,EAAO0W,WAAWpW,KAAKN,IAEzE,IACIuN,EAAIZ,YAAY,2BAA4B,MAAM,EACtD,CAAE,MAAOvL,GAAK,CAEV1J,EAAM4B,QAAQqd,OACd5f,KAAKoJ,iBAAiBoN,EAAK,CACvBqJ,QAAW,WAEHlf,EAAM0d,kBAAoB7H,EAAIzB,MAC9B9L,EAAO/G,OAAOgU,OAEtB,IAIRlW,KAAKsU,yBAELtU,KAAK8f,cAAc7W,GAEnBjJ,KAAKoJ,iBAAiBH,EAAOvB,SAAU,CACnC,sBAAuB,SAAS2C,GAC5B,IAAI+D,EAASnO,EAAEgJ,EAAO8L,MAAM3G,SACXnO,EAAEgJ,EAAO8L,KAAKgL,eAAe3R,SAE7BA,GAA8C,SAApC/D,EAAEuU,OAAOoB,SAASpZ,gBACzCqC,EAAOgX,cAAgB,GAAKhX,EAAO8L,KAAK9I,MAAMmC,OAC9CnF,EAAO8L,KAAK9I,MAAMmC,OAAS,OAEnC,EACA,sCAAuC,SAAS/D,GAC5C,IAAI6V,EAAgB,WACZjX,EAAOgX,gBAAkBhe,GAAeoI,EAAEuU,SAAW3V,EAAO8L,OAC5D9L,EAAO8L,KAAK9I,MAAMmC,OAASnF,EAAOgX,qBAC3BhX,EAAOgX,cAEtB,EAEe,gBAAX5V,EAAEvB,KACF4W,YAAW,WACPQ,GACJ,GAAG,IAEHA,GAGR,IAGJlgB,KAAKoJ,iBAAiBH,EAAO8L,KAAM,CAC/B8K,QAAW,SAASxV,GAChB,IAAIwK,EAEJ,IAAKxK,EAAE8V,UAAYzd,EAAK0d,WAAa/V,EAAE8V,UAAYzd,EAAK2d,SAA2D,SAAhDpX,EAAO8L,KAAKC,aAAa,mBACxF,OAAO,EAGX,GAAI3K,EAAE8V,UAAYzd,EAAK4d,IAInB,OAHArX,EAAO2B,QAAQhC,QAAQ+B,KAAK,gBAAgB4V,QAAQ5e,QAAQ,SAC5DsH,EAAO2B,QAAQ4V,kBAAmB,OAClCnW,EAAEoW,iBAEC,GAAIpW,EAAE8V,SAAWzd,EAAKge,MAAQrW,EAAE8V,SAAWzd,EAAKie,MAAO,CAE1D9L,EAAQ5L,EAAOqM,WACf,IAAIkJ,EAAOnU,EAAE8V,SAAWzd,EAAKge,KACzBhJ,EAAY7C,EAAM2J,EAAO,iBAAmB,gBAC5CoC,EAAS/L,EAAM2J,EAAO,cAAgB,aAGtCqC,EAAOD,GAFKpC,GAAQ,EAAI,GAGxBsC,EAAWtC,EAAOqC,EAAOD,EAEH,GAAtBlJ,EAAUqJ,UAAkD,UAAjCrJ,EAAUsJ,UAAUF,KAC/CjM,EAAMgC,SAASa,EAAWmJ,GAC1BhM,EAAMiC,UAAS,GACf7N,EAAOmM,YAAYP,GAE3B,CAEA,IAAIvB,EAAQrK,EAAOqK,MACfzM,EAAWoC,EAAOgM,SAASgM,iBAAiB3N,EAAOjJ,GACnD6W,EAAcra,EAAWyM,EAAMzM,GAAU9F,QAAU,CAAC,EAExD,GAAI8F,IAAaqa,EAAYC,gBAWzB,OAVA9W,EAAEoW,iBAEG,gBAAgB9K,KAAK9O,IACtBoC,EAAOgM,SAASiJ,WAAU,GAG9BjV,EAAOtH,QAAQ,UAAW0I,GAC1BpB,EAAO0L,KAAK9N,GACZoC,EAAOmY,2BAA2B/W,IAE3B,EAGXpB,EAAOgM,SAASxB,eAEhBxK,EAAOgM,SAAS4K,QAAQxV,EAC5B,EACAgX,SAAY,SAAShX,GACjBqV,YAAW,WACPzW,EAAOmY,2BAA2B/W,GAClCpB,EAAOqY,2BACX,GAAG,EACP,EACAC,MAAS,SAASlX,GACd,IAAImX,EAAiB,CAClB9e,EAAK0d,UACL1d,EAAK+e,IACL/e,EAAKgf,OACLhf,EAAKif,SACLjf,EAAKkf,IACLlf,EAAKmf,KACLnf,EAAKge,KACLhe,EAAKof,GACLpf,EAAKie,MACLje,EAAKqf,KACLrf,EAAKsf,OACLtf,EAAK2d,SAGJpgB,EAAE2D,QAAQyG,EAAE8V,QAASqB,IAAmB,GAAmB,IAAbnX,EAAE8V,SAAiB9V,EAAE4X,UAAY5X,EAAE6X,SAAW7X,EAAE8X,YAC9FjgB,OAAOuR,aAAazT,KAAKoiB,kBACzBpiB,KAAKoiB,iBAAmBlgB,OAAOwd,YAAW,WACtCzW,EAAO+M,kBACX,GA/vCG,MAkwCH3L,EAAE8V,UAAYzd,EAAK0d,WAAa/V,EAAE8V,UAAYzd,EAAK2d,QACnDpX,EAAOsB,0BAGXtB,EAAOgM,SAASsM,MAAMlX,EAC1B,EACAgY,MAAS,SAAShY,GACd,IAA+BwK,EAEJ,QAFjBlU,EAAM0B,GAAG4G,OAAOE,IAElB1F,KAAK4G,EAAEuU,WACX/J,EAAQ5L,EAAOsL,eACT+N,WAAWjY,EAAEuU,QACnB3V,EAAOmM,YAAYP,GAE3B,EACA,+BAAgC,SAASxK,GACrCpB,EAAOa,UAAU,KAAOO,EAAEvB,MAAMuB,GAChCpB,EAAOsB,yBACX,EACAgY,QAAW,WACHtZ,EAAO8L,KAAKyN,aAAa,qBACzBviB,EAAED,MAAMma,SAAS,YAEjBlR,EAAOwZ,cACPxZ,EAAOwP,oBAAmB,GAElC,EACAiK,SAAY,WACRhD,YAAW,WACP,IAAIiD,EAAShiB,EAAM0d,iBACftJ,EAAO9L,EAAO8L,KAEdnK,EAAU3B,EAAO2B,QAErB,GAAIA,EAAQ7J,QAAQ6hB,MAAO,CACvB,IAAIC,EAA0B5Z,EAAO2K,eAAehL,QAAQka,IAAI,GAC5DD,IAA6B5iB,EAAE2X,SAASiL,EAAyBF,IAAWE,GAA2BF,IACvG/X,EAAQ4V,kBAAmB,EAEnC,CAEImC,GAAU5N,GAAS9U,EAAE2X,SAAS7C,EAAM4N,IAAY1Z,EAAO8Z,mBAAsBnY,EAAQ4V,kBAAqBvgB,EAAE0iB,GAAQK,SAAS,mBAAsB/iB,EAAE0iB,GAAQK,SAAS,oBACtK/iB,EAAE8U,GAAMkO,YAAY,YACpBha,EAAOia,eAGXja,EAAOwP,oBAAoBxP,EAAOoK,QAAQqF,OAC9C,GAAG,GACP,IAGJzP,EAAOka,4BACPla,EAAOma,yBACPna,EAAOoa,4BACX,EAEA7Y,sBAAuB,WACnB,IAAIxB,EAAOhJ,KACPE,EAAWS,EAAM0B,GAAG4G,OAEpBD,EAAKjI,QAAQ2U,aACb1M,EAAK0M,WAAa,IAAIxV,EAAS4e,WAAW9V,GAElD,EAEAsL,uBAAwB,WACpB,IAEIrI,EAAO0Q,EAFP3T,EAAOhJ,KACPqR,EAAcrI,EAAKjI,QAAQsQ,YAG1BrI,EAAKoO,UAAa/F,IAIvBpF,EAAQ,cAAc7I,MAAuB4F,EAAKjI,QAAQuQ,MAAQ,UAAUtI,EAAKjI,QAAQuQ,SAAW,QACxFnO,EAAoB,uBAAyBkO,EADjD,gBAIRsL,EAAQ1c,EAAE+I,EAAKtB,SAASkV,OAClBjS,KAAK,IAAMvH,GAAoBkU,SACrCqF,EAAME,OAAO5Q,GAEbjD,EAAKyP,oBAAoBzP,EAAKqK,QAAQqF,QAC1C,EAEAjP,aAAc,SAASZ,GACnB,IACIyK,EAAOgQ,EAAUC,EADjBva,EAAOhJ,KAGXgJ,EAAKsK,MAAQ,IACZA,EAAOgQ,GAAYta,EAAKwa,qBAAqBxa,EAAKjI,QAAQuS,OAC3DtK,EAAKya,kBAELF,EAAiB,CACbjQ,MAAOA,EACPtM,aAAcsc,EACdI,eAAgB1a,EAAKjI,QAAQkK,SAC7B0G,UAAW3I,EAAKjI,QAAQ4Q,WAAa3I,EAAKjI,QAAQ4Q,UAAU/G,QAC5D+Y,OAAQ3a,EAAK2V,oBAAoBpV,KAAKvJ,MACtCqiB,MAAOrZ,EAAK2V,oBAAoBpV,KAAKvJ,MACrCmT,cAAenK,EAAKjI,QAAQoS,cAC5ByQ,mBAAmB,GAGvB5a,EAAK4B,QAAU,IAAIjK,EAAM0B,GAAGwhB,QAAQhb,EAAkB0a,GAEtDva,EAAK+P,aACL/P,EAAKO,KAAK,SAAUP,EAAK8P,cAAcvP,KAAKP,IAE5CH,EAAiBib,GAAG,wBAAkB,mBAAmB,SAASzZ,GACzDpK,EAAEoK,EAAEuU,QAAQmF,GAAG,UAChB1Z,EAAEoW,gBAEV,IAEKzX,EAAKoO,UACNpO,EAAKgb,mBAAmBnb,EAEhC,EAEAmb,mBAAoB,SAASC,GACzB,IAAIjb,EAAOhJ,KAEXA,KAAK4T,eAAiBqQ,EACjBvG,KAAK,uDACLC,SACAuG,QAAQ,4CAA8CvjB,EAAM0B,GAAG0B,KAAK,eAAiB,WACrFogB,YAAY,CACTlK,OAAO,EACPtI,WAAW,EACXoB,UAAW,CACPqR,WAAY,+BAEhBpR,UAAW,CACPoI,KAAM,CAAEiJ,QAAS,WACjBzI,MAAO,CAAEyI,QAAS,aAEtBC,UAAW,GACXC,SAAS,EACTC,WAAW,EACXC,QAAS,GACTC,QAAS,WACL1kB,KAAK2kB,QAAS,CAClB,IAEHb,GAAG,aAAa,SAASzZ,GACjBpK,EAAEoK,EAAEuU,QAAQmF,GAz4CO,mIA04CpB/a,EAAK4B,QAAQ4V,kBAAmB,EAExC,IACCsD,GAAG,YAAY,WACZ9a,EAAKJ,QAAQ8Z,UACjB,IACCrG,KAAK,cACd,EAEAsD,WAAY,SAAStV,GACjB,IAAIpB,EAASjJ,KAQb,GAPAiJ,EAAO2b,mBAAoB,EAEvB3kB,EAAEgJ,EAAO8L,MAAM8P,QAAQ,aAAa/iB,QACpCuI,EAAEya,mBAIFriB,EAAQsiB,MAAZ,CAIA,IAAInG,EAAS3e,EAAEoK,EAAEuU,QAAQvV,QAAQ,YAEjB,GAAXgB,EAAE2a,OAA0B,GAAX3a,EAAE2a,OAAc3a,EAAE4X,UAAarD,GAAUA,EAAOmF,GAAG,YACrE7hB,OAAOkZ,KAAKwD,EAAOxE,KAAK,QAAS,QAGjC/P,EAAEuU,OAAOqG,SAA8C,SAAnC5a,EAAEuU,OAAOqG,QAAQre,eACrC8Y,YAAW,WACPzW,EAAO8L,KAAKmB,OAChB,GAAG,EAXP,CAaJ,EAEA5L,SAAU,SAASD,GACf,IAAIrB,EAAOhJ,KAEPW,EAAM4B,QAAQC,SAAS+Y,KAAOlR,GAAKpK,EAAEoK,EAAEuU,QAAQmF,GA97C7B,4BAk8ClB/a,EAAK4b,mBACLlF,YAAW,WACP1W,EAAKgN,kBACT,GAAG,EAEX,EAEA/L,eAAgB,SAASlJ,EAASgI,GAC9B,IAGIsK,EAAO/L,EAHP0B,EAAOhJ,KACPE,EAAWS,EAAM0B,GAAG4G,OACpBC,EAAMhJ,EAASiJ,IAGnB,GAAIpI,GAAWA,EAAQsS,MACnBA,EAAQtS,EAAQsS,WACb,GAAIrK,EAAKoO,SAAU,EAEtB/D,EAAQtK,EAAWsK,OAER1M,QAAQ,MAAO,IAAI7E,SAC1BuR,EAAQA,EAAM1M,QAAQ,MAAO,KAI7BqC,EAAKjI,QAAQyQ,SAAWzI,EAAWmc,cAAgBnc,EAAWmc,aAAaxM,OAAO5W,SAClFuR,EAAQtK,EAAWmc,cAGvB,IAAIC,EAAmBjlB,EAAS4X,WAAWe,UAAUxF,EAAOpT,EAAE,eAAe,GAAI+I,EAAKjI,QAAQ6Q,iBAC9FtK,EAAW4B,EAAIkc,eAAeD,GAE9B9R,GADAA,EAAQ/P,EAAY8D,cAAciM,EAAO/L,IAC3BX,QAAQ,mBAAoB,KAC1C0M,EAAQ/P,EAAYkE,iBAAiB6L,EAAO/L,EAChD,MACI+L,EAAQtK,EAAWsc,UAGvBrc,EAAKqK,MAAMA,GAAS,SACxB,EAEAiS,aAAc,SAASC,GACnB,IAAIC,EAAS,CAAC,EAMd,OAJAjQ,OAAO7S,KAAK6iB,GAAS/P,KAAIC,IACrB+P,EAAO/P,EAAM,KAAO8P,EAAQ9P,EAAI,IAG7B+P,CACX,EAEAhC,qBAAsB,SAASiC,GAC3B,IAII9hB,EAAG+hB,EAAGC,EAAGliB,EAAMmiB,EAJfC,EAAmB,CAAC,EACpBC,EAAkB,CAAC,EAEnBC,EAAgB9lB,EAAEO,QAAO,EAAM,CAAC,EAAGoH,GAGvC,IAAKjE,EAAI,EAAGA,EAAI8hB,EAAa3jB,OAAQ6B,IAGjC,GAFAgiB,EAAIF,EAAa9hB,GAEbqiB,MAAMC,QAAQN,GAGd,IAFAC,EAAgBjlB,EAAMulB,OAEjBR,EAAI,EAAGA,EAAIC,EAAE7jB,OAAQ4jB,KACrBG,EAAkBpiB,GAAQzD,KAAKmmB,oBAAoBR,EAAED,GAAIG,GAErDpiB,IAILoiB,EAAiBpiB,GAAM2iB,GAAKR,OAE7B,CAGH,IAFCC,EAAkBpiB,GAAQzD,KAAKmmB,oBAAoBR,EAAGE,IAElDpiB,EACD,SACgB,cAATA,IACPsiB,EAAgB/lB,KAAKslB,aAAaS,IAGtCxQ,OAAO7S,KAAKqjB,GAAevQ,KAAIC,IACfsQ,EAActQ,GAEhB4Q,SAAS5iB,KACfoiB,EAAiBpiB,GAAM2iB,GAAK3Q,EAChC,GAER,CAmCJ,OAhCAF,OAAO+Q,OAAOT,GAAkBrQ,KAAK1O,IACjC,IAAIyf,EAAQzf,EAAKsf,UAEVtf,EAAKsf,GAERG,IAAUtkB,EACV6jB,EAAgBhf,EAAKrD,MAAQqD,GAExBgf,EAAgBS,KACjBT,EAAgBS,GAAS,IAG7BT,EAAgBS,GAAOnlB,KAAK0F,GAChC,IAmBG,CAhBCyO,OAAO+Q,OAAOR,GAAiBtQ,KAAKgR,IACxC,IAAIhB,EAYJ,OAJsB,KALlBA,EADAgB,EAAE1kB,OACO0kB,EAAEhR,KAAKiR,GAAOA,EAAGhjB,OAEjB+iB,EAAE/iB,MAGJ3B,SACP0jB,EAASA,EAAO,IAGbA,CAAM,IAGFK,EACnB,EAEAa,oBAAqB,SAAS5f,EAAME,GAChC,IAEIjG,EAFA0C,EAAOqD,EAAKrD,KACZ+hB,EAAS,CAAC,EAGd,GAAIvlB,EAAE0mB,cAAc7f,GACZrD,GAAQuD,EAAavD,IAErB+hB,EAAShlB,EAAO,CAAC,EAAGwG,EAAavD,IACjCjD,EAAOglB,EAAOzkB,QAAS+F,MAGvB/F,EAAUP,EAAO,CAAEuD,KAAM,OAAQ+E,KAAM,UAAYhC,IAEtCrD,OACT1C,EAAQ0C,KAAO,UAGnB1C,EAAQiD,SAAW,KAAOjD,EAAQ0C,KAElC+hB,EAAS,CACLzkB,QAASA,GAGb0C,EAAO1C,EAAQ0C,UAEhB,KAAIuD,EAAaF,GAIpB,OAAO,KAFP0e,EAASxe,EADTvD,EAAOqD,EAIX,CAIA,OAFA9G,KAAKsT,MAAM7P,GAAQ+hB,EAEZA,CACX,EAEAW,oBAAqB,SAASR,EAAGE,GAC7B,IAEI/e,EAAMrD,EAAMmjB,EAAMC,EAAW9lB,EAAS+lB,EAAW/iB,EAAMmd,EAAa6F,EAAiBC,EAFrFhe,EAAOhJ,KACPgH,EAAerG,EAAMoB,WAAW,CAAC,EAAGpB,EAAM0B,GAAG0E,OAAOC,cAKxD,OAFAF,EAAO9G,KAAK0mB,oBAAoBf,EAAG3e,KAOnCvD,GADA1C,EAAU+F,EAAK/F,SACA0C,KACfqjB,EAAY/lB,EAAQsB,IAAM,CAAC,EAC3B0B,EAAOT,EAAYQ,gBAAgB/C,EAAQ0C,KAAM1C,EAAQgD,aAGzDgjB,EAAkB9mB,EAAE0mB,cAAchB,GAAK1lB,EAAEO,OAAO,CAAC,EAAGmlB,GAAK,CAAC,GACnC3J,MAEvBkF,EAAcjhB,EAAEO,OAAO,CACnBiD,KAAM1C,EAAQ0C,KACdpC,QAASN,EAAQM,QACjB4lB,SAAUlmB,EAAQkmB,SAClBne,KAAM,SACN/E,KAAMA,EACNmjB,SAAU,WACVC,SAAU,QACXL,EAAWC,GAEVhmB,EAAQqmB,UACHlG,EAAYmG,aACbnG,EAAYmG,WAAa,CAAC,GAG9BnG,EAAYmG,WAAWpN,MAAQlZ,EAAQqmB,SAEvCrmB,EAAQ4T,OACRuM,EAAYmB,MAAQthB,EAAQ4T,KAAKpL,KAAKP,UAC/BkY,EAAYvM,MAGO,gBAA1BuM,EAAYpF,YACR/a,EAAQimB,UAAY/kB,GAAe6kB,EAAUE,UAAYrmB,EAAM0B,GAAG4G,OAAOqe,UAAUtmB,GAAGD,QAAQimB,UAC9FA,EAAUjmB,EAAQimB,SAAWrmB,EAAM0B,GAAG4G,OAAOqe,UAAUtmB,GAAGD,QAAQimB,QAClEJ,EAAO7lB,EAAQimB,UAAY/kB,GAAgBlB,EAAQimB,QAAuB,UAAb,WAC7D9F,EAAYqG,iBAAiBP,QAAmB,YAATJ,EAAqBI,EAAU/kB,EACtEif,EAAYqG,iBAAiBC,MAAQ,CAACZ,GACtC1F,EAAYqG,iBAAiBE,QAAmB,aAATb,EACvC1F,EAAYqG,iBAAiBG,MAAiB,aAATd,EACrC1F,EAAYqG,iBAAiBI,QAAmB,aAATf,EAE1B,aAATA,UACO1F,EAAYqG,iBAAiBhX,SAG/B,YAATqW,GAAsB7lB,EAAQwP,UAC9B2Q,EAAYqG,iBAAiBhX,QAAUxP,EAAQwP,UAIzB,iBAA1B2Q,EAAYpF,WAA0D,aAA1BoF,EAAYpF,YACnDoF,EAAYqG,mBACbrG,EAAYqG,iBAAmB,CAAC,GAG/BrG,EAAYqG,iBAAiBxL,aAC1B/S,EAAKjI,QAAQ0C,IAASuiB,MAAMC,QAAQjd,EAAKjI,QAAQ0C,IACjDyd,EAAYqG,iBAAiBxL,WAAa/S,EAAKjI,QAAQ0C,GAEvDyd,EAAYqG,iBAAiBxL,WAAahb,EAAQib,QAI1DkF,EAAY+F,iBACL/F,EAAYpY,KAKL,MAFlB+d,EAAY7mB,KAAK4nB,kBAAkBnkB,MAG1Byd,EAAYmG,aACbnG,EAAYmG,WAAa,CAAC,GAG9BnG,EAAYmG,WAAW,qBAAuBR,GAGlDhB,EAAiBpiB,GAAQyd,EAElB,CAAC2E,EAAkBpiB,IAlFf,CAACoiB,EAAkB,KAmFlC,EAEA/M,cAAe,WACX,IAAI9P,EAAOhJ,KACP6U,EAAQ7L,EAAKsM,WACbpV,EAAWS,EAAM0B,GAAG4G,OAEpB4e,EADa3nB,EAASsU,WACH4D,UAAUvD,GAC7Ba,EAAa1M,EAAKjI,QAAQ2U,WAC1BqJ,EAAoB/V,EAAK6V,mBAAmBhK,GAC5C7N,EAAegC,EAAKsK,OAExBuU,EAAQ3nB,EAASiJ,IAAI2e,SAASD,EAAO3nB,EAASiJ,IAAI4e,iBAAiB,IAExDjmB,SACP+lB,EAAQ,CAAChT,EAAM4B,iBAGnBzN,EAAK4B,QAAQhC,QAAQ+B,KAAK,kBACrBsO,QAAO,CAACtV,EAAGuV,IAA+C,IAAxCjZ,EAAEiZ,GAAIvO,KAAK,kBAAkB7I,SAC/CqX,MAAK,WACF,IAEI9W,EAFAwE,EAAW7G,KAAKgV,aAAa,gBAC7BlO,EAAOE,EAAaH,GAGpBC,IACAzE,EAAKpC,EAAED,MAEH8G,EAAKwC,QACLxC,EAAKwC,OAAOjH,EAAIwlB,EAAO7e,EAAKgB,eAG5B0L,GACA1M,EAAKgf,uBAAuBlhB,EAAMzE,EAAI0c,GAGlD,GACR,EAEA3V,iBAAkB,SAASR,EAASE,EAAMkV,GACtC,IAEIiK,EACAtkB,EAFAukB,EAAK,eAUT,GANAtf,EAAU3I,EAAE2I,GAEP5I,KAAK6d,YACN7d,KAAK6d,UAAY,IAGjBjV,EAAQ9G,OACR,GAAI7B,EAAE0mB,cAAc7d,GAChB,IAAK,IAAI6c,KAAK7c,EACNA,EAAKqf,eAAexC,IACpB3lB,KAAKoJ,iBAAiBR,EAAS+c,EAAG7c,EAAK6c,SAO/C,IAFAsC,EAAatnB,EAAMynB,cAActf,GAAMuf,MAAM,KAExC1kB,EAAI,EAAGA,EAAIskB,EAAWnmB,OAAQ6B,IAtB9B3D,KAuBM6d,UAAUzc,KAAK,CAClBwH,QAASA,EACTE,KAAMmf,EAAWtkB,GAAKukB,EACtBlK,QAASA,IAGbpV,EAAQkb,GAAGmE,EAAWtkB,GAAKukB,EAAIlK,EAI/C,EAEAoD,2BAA4B,SAAS/W,GAIjC,IAHA,IAAIwK,EAAQ7U,KAAKsV,WACbhC,EAAQtT,KAAKiV,SAASqT,kBAAkBtoB,KAAKsT,MAAOjJ,GAE/C1G,EAAI,EAAGA,EAAI2P,EAAMxR,OAAQ6B,IAAK,CACnC,IAAImD,EAAOwM,EAAM3P,GACb4kB,EAAIzhB,EAAK/F,QACb,GAAKwnB,EAAEpH,gBAIG,IAAIoH,EAAElnB,QAAQ,CAAEwT,MAAOA,IACzB2T,mBACJxoB,KAAKiV,SAASiJ,WAAU,GACxBle,KAAK2U,KAAK7N,EAAKrD,MAEvB,CAEAzD,KAAKuK,yBACT,EAEAA,wBAAyB,WACrB,MAAMvB,EAAOhJ,KACTyoB,EAAezf,EAAKjI,QAAQ0Q,4BAC5BvR,EAAWS,EAAM0B,GAAG4G,OACpByf,EAAuBxoB,EAASwoB,qBAChCC,EAA8BzoB,EAASyoB,4BAEvC3f,EAAK4f,0BACD5f,EAAKgU,wBAAwB6L,WAAW/mB,QACxC6mB,EAA4B3f,GAG5Byf,GACAhV,aAAazK,EAAK8f,yBAClB9f,EAAK8f,wBAA0BpJ,YAAW,IAAMgJ,EAAqB1f,IAAOyf,IAE5EC,EAAqB1f,GAIjC,EAEAgN,iBAAkB,WACdhW,KAAK4kB,mBAAoB,EACzB5kB,KAAKyX,gBACLzX,KAAK2B,QAAQ,SAAU,CAAC,EAC5B,EAEA0S,iBAAkB,SAASoR,GACvB,IAGInS,EAAOgQ,EAAUC,EAHjBva,EAAOhJ,KACP4K,EAAU5B,EAAK4B,QACf/B,EAAmB+B,EAAQhC,QAG/BgC,EAAQ2I,UACR1K,EAAiBkgB,QAEjB/f,EAAKsK,MAAQ,IACZA,EAAOgQ,GAAYta,EAAKwa,qBAAqBiC,GAC9Czc,EAAKya,kBAELF,EAAiB,CACbjQ,MAAOA,EACPtM,aAAcsc,EACdI,eAAgB1a,EAAKjI,QAAQkK,SAC7B0G,UAAW3I,EAAKjI,QAAQ4Q,WAAa3I,EAAKjI,QAAQ4Q,UAAU/G,QAC5D+Y,OAAQ3a,EAAK2V,oBAAoBpV,KAAKvJ,MACtCqiB,MAAOrZ,EAAK2V,oBAAoBpV,KAAKvJ,OAGzCgJ,EAAK4B,QAAU,IAAIjK,EAAM0B,GAAGwhB,QAAQhb,EAAkB0a,GAEtDva,EAAK+P,YACT,EAEA0K,gBAAiB,WACb,IACI9f,EADAqD,EAAerG,EAAMoB,WAAW,CAAC,EAAGpB,EAAM0B,GAAG0E,OAAOC,cAGxD,IAAKrD,EAAI,EAAGA,EAAIN,EAAavB,OAAQ6B,IAC5B3D,KAAKsT,MAAMjQ,EAAaM,MACzB3D,KAAKsT,MAAMjQ,EAAaM,IAAMqD,EAAa3D,EAAaM,IAGpE,EAEA+F,aAAc,SAASZ,GACnB,IAAIE,EAAOhJ,KAEC,YAAR8I,GACA4W,YAAW,WACP,IAAIsJ,EAAchgB,EAAK0B,QAAQ,GAAGuB,MAAMmC,OACpC6a,EAAiBC,SAASF,EAAa,IACvCG,EAAengB,EAAK0B,QAAQ0D,SAC5B4a,EAAYI,QAAQ,MAAQ,IAAMC,MAAMJ,IAAmBE,EAAeF,GAC1EjgB,EAAK0B,QAAQ0D,OAAO6a,GAAkBE,EAAeF,GAE7D,GAER,EAEApf,eAAgB,WACZ,IAAIb,EAAOhJ,KACPE,EAAWS,EAAM0B,GAAG4G,OAExBD,EAAKiM,SAAW,IAAI/U,EAASopB,SAAS,CAClC,IAAIppB,EAASqpB,iBAAiBvgB,GAC9B,IAAI9I,EAASspB,cAAcxgB,GAC3B,IAAI9I,EAASupB,cAAczgB,GAC3B,IAAI9I,EAASwpB,iBAAiB1gB,IAEtC,EAEAQ,WAAY,SAASZ,GACjB,IAGIC,EAHAE,EAAaH,EAAQ,GACrBE,EAAOnI,EAAM0B,GAAG4G,OAAOE,IAAI1F,KAAKsF,GAChCmG,EAAKnG,EAAWmG,GAkBpB,OAfKA,IACDA,EAAKvO,EAAMulB,OACXnd,EAAWqW,aAAa,KAAMlQ,IAGtB,YAARpG,GACA9I,KAAK2pB,iBAEL9gB,EAAmB7I,KAAK0K,QAAQC,KAAK,sBACpByP,KAAK,gBAAiBlL,KAEvCjP,EAAE8I,GAAYqR,KAAK,mBAAmB,GAAMD,SAAS,4BACrDtR,EAAmB5I,EAAE,mCAAmCqa,aAAa1R,IAGlEC,CACX,EAEAuU,gBAAiB,WACb,OAAOpd,KAAK4I,QAAQoa,SAAS,kBACjC,EAEA4E,kBAAmB,SAASnkB,GACxB,IAEI1C,EAFA+F,EAAOnG,EAAM0B,GAAG0E,OAAOC,aAAavD,GACpCmmB,EAAM,GAGV,OAAK9iB,GAASA,EAAK/F,UAInBA,EAAU+F,EAAK/F,SAEH8oB,OACRD,GAAO,SAGP7oB,EAAQ+oB,QACRF,GAAO,UAGP7oB,EAAQgpB,MACRH,GAAO,QAGP7oB,EAAQ0U,MACRmU,GAAO7oB,EAAQ0U,KAGZmU,GArBIA,CAsBf,EAEA9J,cAAe,SAAS7W,GACpB,IAAI+gB,EACAC,GAAe,EAEnBjqB,KAAKoJ,iBAAiBH,EAAO8L,KAAM,CAC/BmV,YAAe,WACXjhB,EAAOkhB,IAAI,UAAU,WACjBH,EAAmB,IACvB,IAEA/gB,EAAOyK,qBAAuBgM,YAAW,WACrCsK,EAAmB,IAAIrpB,EAAM0B,GAAG4G,OAAO1I,aAAa0I,EAAOqM,WAAYrM,EAAO8L,MAC9EkV,GAAe,CACnB,GAAG,GACP,EACAvC,MAAS,WACAsC,KAIDrpB,EAAM4B,QAAQE,QAAQ2nB,SAAYH,EAKtCtpB,EAAM0B,GAAG4G,OAAOohB,cAAcphB,EAAQ+gB,GAJlCC,GAAe,EAKvB,GAER,EAEAxR,mBAAoB,SAAS6R,GACzB,IAAIthB,EAAOhJ,KACP+U,EAAO/L,EAAK+L,KACZwV,EAAQtqB,EAAE8U,GACV1D,EAAcrI,EAAKjI,QAAQsQ,YAE1BrI,EAAKoO,UAAa/F,IAIvBkZ,EAAMnQ,KAAK,cAAc,WACrB,OAAOkQ,EAAOjZ,EAAc,EAChC,IAEAkZ,EAAMC,YAAYrnB,EAAmBmnB,GACzC,EAEAvH,gBAAiB,WACb,IAAIJ,EAAShiB,EAAM0d,iBACfuE,EAAQ5iB,KAAK4T,eACb6W,EAAgBzqB,KAAKyqB,cAEzB,OAAQ7H,GAAS3iB,EAAE0iB,GAAQtZ,QAAQuZ,EAAMlY,SAAS5I,QAC7C2oB,GAAiBA,EAAclG,SACxC,EAEAyD,uBAAwB,SAASlhB,EAAMzE,EAAI0c,GACvC,IAAInU,EAAU5K,KAAK4K,QACfnH,EAAOqD,EAAKrD,KACZinB,EAAYroB,EAAGgH,QAAQ,mBACvBshB,EAAkB7jB,EAAK/F,QAAQ4pB,gBAC/BzqB,EAAWS,EAAM0B,GAAG4G,OAEpB0hB,IAAoB1oB,IACpB0oB,EAAkB1qB,EAAE2D,QAAQH,EAAMvD,EAAS4e,WAAW8L,mBAAqB,GAG3ED,IACI5L,EACAnU,EAAQoP,KAAK0Q,GAEb9f,EAAQ0f,KAAKI,GAGzB,EAEAf,cAAe,WACX,IAAI3gB,EAAOhJ,KACPoX,EAAWpO,EAAKJ,QAChBiiB,EAAIzT,EAAS,GAAGnL,MAAMkC,MACtB2P,EAAI1G,EAAS,GAAGnL,MAAMmC,OACtB6Y,EAAW3jB,EAAYC,wBACvBunB,EAAa7qB,EAAEgnB,GAAU3M,aAAalD,GACtC2T,EAAWD,EAAWngB,KAAK,oBAE/BmgB,EAAWzY,IAAI,CACXlE,MAAS0c,EACTzc,OAAU0P,IAGd1G,EAASgD,KAAK,eAAgB,OACzB6C,SAAS8N,GAAU5Q,SAAS,2BAA2B9H,IAAI,UAAW,QAE3ErJ,EAAKoO,SAAWA,EAChBpO,EAAK0B,QAAUogB,CACnB,EAGAnhB,WAAY,WACR,IAAIX,EAAOhJ,KACP2R,EAAY3R,KAAKe,QAAQ4Q,UACzBqZ,EAAc/qB,EAAE0mB,cAAchV,GAAcA,EAAUtK,UAAYpF,IAAqC,IAAtB0P,EAAUtK,QAAoBsK,EAC/GsZ,EAAehrB,EAAE0mB,cAAchV,EAAUuZ,KAAOvZ,EAAUuZ,IAAM,CAAE5G,UAAW3S,EAAUuZ,KACvFC,EAAelrB,EAAE0mB,cAAchV,EAAUyZ,KAAOzZ,EAAUyZ,IAAM,CAAEC,UAAW1Z,EAAUyZ,KAEvFJ,GAAehrB,KAAKoX,WACpBpO,EAAK0B,QAAQyP,SAAS,sBAElB8Q,EAAa3G,WACbtb,EAAK0B,QAAQ2H,IAAI,aAAc4Y,EAAa3G,WAG5C6G,EAAaE,WACbriB,EAAK0B,QAAQ2H,IAAI,aAAc8Y,EAAaE,WAG5CJ,EAAaK,UACbtiB,EAAK0B,QAAQ2H,IAAI,YAAa4Y,EAAaK,UAG3CH,EAAaI,UACbviB,EAAK0B,QAAQ2H,IAAI,YAAa8Y,EAAaI,UAG/CviB,EAAKiL,eAAiB,IAAIuX,gBAAe,KACrC/X,aAAazK,EAAKyiB,gBAElBziB,EAAKyiB,eAAiB/L,YAAW,WAC7B1W,EAAK4B,QAAQC,SACb7B,EAAKuB,yBACT,GAAG,GAAG,IAGVvB,EAAKiL,eAAeiH,QAAQlS,EAAK0B,QAAQ,IAEjD,EAEAwJ,kBAAmB,WACf,IAAIjL,EAASjJ,KAEbiJ,EAAOyiB,0BACP/qB,EAAM0B,GAAG4G,OAAO0iB,uBAAuBpG,QAAQqG,QAAQ3iB,GACvDA,EAAO4iB,sBACPlrB,EAAM0B,GAAG4G,OAAO6iB,YAAYF,QAAQ3iB,GACpCA,EAAO8iB,yBACPprB,EAAM0B,GAAG4G,OAAO+iB,eAAeJ,QAAQ3iB,EAC3C,EAEAoa,2BAA4B,WACxB,IAAIpa,EAASjJ,KAEbW,EAAM0B,GAAG4G,OAAO0iB,uBAAuBpG,QAAQ0G,OAAOhjB,GAEtDA,EAAOijB,+BAAiCjjB,EAAOqY,0BAA0B/X,KAAKN,GAC9EA,EAAOM,KAAKrG,EAAQ+F,EAAOijB,+BAC/B,EAEAR,wBAAyB,WACrB,IAAIziB,EAASjJ,KACTmsB,EAAkBljB,EAAOkjB,gBAEzBA,IACAA,EAAgB5Y,UAChBtK,EAAOkjB,gBAAkB,MAGzBljB,EAAOijB,gCACPjjB,EAAO+P,OAAO9V,EAAQ+F,EAAOijB,+BAErC,EAEA5K,0BAA2B,WACvB,IACI6K,EADSnsB,KACgBmsB,gBAEzBA,GAAmBA,EAAgBvjB,SAAWujB,EAAgBvjB,QAAQwjB,WACtED,EAAgBE,qBACTF,GAAqBA,EAAgBvjB,SAAYujB,EAAgBvjB,QAAQwjB,YALvEpsB,KAMF0rB,yBAEf,EAEAvI,0BAA2B,WACvBxiB,EAAM0B,GAAG4G,OAAO+iB,eAAeC,OAAOjsB,KAC1C,EAEA+rB,uBAAwB,WACpB,IAAI9iB,EAASjJ,KAETiJ,EAAOqjB,iBACPrjB,EAAOqjB,eAAe/Y,UACtBtK,EAAOqjB,eAAiB,KAEhC,EAEAlJ,uBAAwB,WACpBziB,EAAM0B,GAAG4G,OAAO6iB,YAAYG,OAAOjsB,KACvC,EAEA6rB,oBAAqB,WACjB,IAAI5iB,EAASjJ,KAETiJ,EAAOsjB,cACPtjB,EAAOsjB,YAAYhZ,UACnBtK,EAAOsjB,YAAc,KAE7B,EAGAC,gBAAiB,WACb,IACI9hB,EADO1K,KACQ4T,eAAelJ,QAC9B+hB,EAFOzsB,KAEc4I,QAEzB,OAAOjG,EAAW8pB,GAAiBvD,SAASxe,EAAQ2H,IAAI,qBAAsB,IAAM6W,SAASxe,EAAQ2H,IAAI,sBAAuB,GACpI,EAEA6Q,YAAa,WACLljB,KAAK4T,gBACL5T,KAAK4T,eAAegI,OAE5B,EAEA8Q,gBAAiB,SAASC,GACtB,IAAIC,EAAiB5sB,KAAK4T,eAAelJ,QACrCmiB,EAAuBD,EAAehM,SACtCkM,EAAqBD,EAAqBrO,KAC1CuO,EAAoBF,EAAqBpO,IACzCuO,EAAYL,EAAI/L,SAChBqM,EAAgBD,EAAUxO,KAC1B0O,EAAeF,EAAUvO,IAE7B,QAASwO,EAAgBN,EAAIxe,QAAU2e,GAC/BG,EAAgBH,EAAqBF,EAAeze,SACpD+e,EAAeP,EAAIve,SAAW2e,GAC9BG,EAAeH,EAAoBH,EAAexe,SAC9D,EAEAqU,YAAa,WACT,IAEI/X,EAAS+hB,EAAeU,EAFxBnkB,EAAOhJ,KACP4T,EAAiB5K,EAAK4K,eAEtBnR,EAAU9B,EAAM4B,QAAQE,QAExBmR,IACAlJ,EAAUkJ,EAAelJ,QACzB+hB,EAAgBzjB,EAAKJ,QAEhB8B,EAAQqZ,GAAG,aAAgB/a,EAAK4K,eAAe7S,QAAQwjB,UAEnD7Z,EAAQ,GAAGuB,MAAMkC,OAClBzD,EAAQyD,MAAMnO,KAAKwsB,mBAIlB5Y,EAAe+Q,SAChBwI,EAAeV,EAAc7L,SAC7BlW,EAAQ2H,IAAI,CACRoM,IAAK2O,KAAKhC,IAAI,EAAGlC,SAASiE,EAAa1O,IAAK,IAAM5b,EAAY6H,GAAWwe,SAASlgB,EAAK4K,eAAehL,QAAQyJ,IAAI,kBAAmB,KACrImM,KAAM4O,KAAKhC,IAAI,EAAGlC,SAASiE,EAAa3O,KAAM,SAIjD/b,EAAQ8b,MAAQ9b,EAAQ+Y,OAASxS,EAAK0jB,gBAAgBD,GACvD/M,YAAW,WACP9L,EAAewH,MACnB,GAAG,GAEHxH,EAAewH,QAI/B,IAGJrU,EAAOC,aAAe,CAAC,EAEvBrG,EAAM0B,GAAGgrB,OAAOtmB,GAEhB,IAAIzG,EAAO6B,EAAM3B,OAAO,CACpBM,KAAM,SAASC,GACXf,KAAKe,QAAUA,CACnB,EAEAM,QAAS,SAASisB,GACd,OAAO,IAAIttB,KAAKe,QAAQM,QAAQisB,EACpC,EAEAhkB,OAAQrJ,EAAEstB,OAGdjtB,EAAKqU,KAAO,SAAS1L,EAAQxF,EAAM4P,GAC/BpK,EAAO0L,KAAKlR,EAAM,CAAE4P,MAAOA,GAC/B,EAEA,IAAIma,EAAWltB,EAAKE,OAAO,CACvBa,QAASpB,EAAEstB,KACXjkB,OAAQ,SAASjH,EAAIwlB,EAAO7d,GACxB,IACIvG,EADOzD,KACKe,QAAQ0C,KACpBmH,EAAUvI,EAAGgH,QAAQ,cAAcgT,KAAK,gBAE5C,OAAQ5Y,GACJ,IAAK,OACDmH,EAAQ6iB,OAAOprB,EAAI2H,EAActI,WACjC,MACJ,IAAK,OACDkJ,EAAQ6iB,OAAOprB,EAAI2H,EAAcnI,WAMzCQ,EAAGqrB,WAAW,WAClB,IAGJpqB,EAAYjD,aAAa,YAAa,IAAIC,EAAK,CAAE+B,GAAI,CAAEyG,KAAM,gBAC7DxF,EAAYjD,aAAa,OAAQ,IAAImtB,EAAS,CAAE/X,IAAK,IAAKoU,MAAM,KAChEvmB,EAAYjD,aAAa,OAAQ,IAAImtB,EAAS,CAAE/X,IAAK,IAAKoU,MAAM,KAIhE,IAAI8D,EAAsB,SACtBC,EAAwBD,GAExBlrB,EAAQ8b,MAAQ9b,EAAQ+Y,QACxBoS,EAAwBD,EAAsB,UAGlDntB,EAAOG,EAAM0B,GAAI,CACb4G,OAAQ,CACJ3F,YAAaA,EACbhD,KAAMA,EACNqtB,oBAAqBA,EACrBC,sBAAuBA,KAI3BjtB,EAAMktB,WACNltB,EAAMktB,SAASrtB,OAAOuG,EAAO+mB,WAC7B/mB,EAAO+mB,UAAUC,SAAW,WACxB,OAAOptB,EAAMqtB,QAAQC,QAAQjuB,KAAK+U,KAAM/U,KAAKe,QAAQ0F,IACzD,EACAM,EAAO+mB,UAAUI,UAAY,WACzB,IAAIC,EAAW,IAAIluB,EAAEmuB,SACjBC,EAAUF,EAASE,UACnBC,EAAO,CAAED,QAASA,GAEtB,IAAIruB,KAAK2B,QAAQ,YAAa2sB,GAA9B,CAIA,IAAIvtB,EAAUf,KAAKe,QAAQ0F,IAoB3B,OAlBAzG,KAAK+tB,SAASI,GACbI,MAAK,SAASC,GACX,OAAO7tB,EAAMqtB,QAAQS,UAAUD,EAAMztB,EACzC,IACC2tB,MAAK,SAASC,GACXhuB,EAAMiuB,OAAO,CACTD,QAASA,EACTE,SAAU9tB,EAAQ8tB,SAClBC,SAAU/tB,EAAQ+tB,SAClBC,YAAahuB,EAAQguB,YACrBC,WAAYjuB,EAAQiuB,aAExBb,EAASc,SACb,IACCC,MAAK,SAASC,GACXhB,EAASiB,OAAOD,EACpB,IAEOd,CAtBP,CAuBJ,EAGP,CAr0ED,CAq0EGnsB,OAAOvB,MAAM0uB,QAEhB,SAAUpvB,GAEV,IAAIU,EAAQuB,OAAOvB,MACf6U,EAAMvV,EAAEuV,IACRhV,EAASP,EAAEO,OACXiC,EAAU9B,EAAM4B,QAAQE,QACxB6sB,EAAQ,QACRC,EAAQ,QACRC,EAAW,WACXC,EAAa,aACbC,EAAQ,QACRC,EAAU,WAEd,SAASC,EAAQ5T,GACb,IACIrY,EAAGksB,EADHC,EAAM,CAAC,EAGX,IAAKnsB,EAAI,EAAGksB,EAAM7T,EAAMla,OAAQ6B,EAAIksB,EAAKlsB,IACrCmsB,EAAI9T,EAAMrY,KAAM,EAEpB,OAAOmsB,CACX,CAEA,IAAI/G,EAAQ6G,EAAQ,6EAA6EvH,MAAM,MACnG0H,EAAuB,qQAAqQ1H,MAAM,KAClS2H,EAAgBD,EAAqBE,OAAO,CAAC,KAAK,KAAK,OACvDC,EAAQN,EAAQI,GAChBG,EAAcP,EAAQ,+FAA+FvH,MAAM,MAC3H+H,EAAiB,yNAAyN/H,MAAM,KAChPgI,EAAST,EAAQQ,GACjBE,EAAYV,EAAQ,yGAAyGvH,MAAM,MACnIkI,EAAiC,CAAC,SAAS,KAAK,KAAK,KAAK,SAAS,QAAQ,QAAQ,QAAQ,WAAW,QAAQ,QAAQ,QAAQ,KAAK,SAAS,YAE5IC,EAAY,SAASC,GACA,GAAjBA,EAAK1P,UACL0P,EAAKD,WAEb,EAEI/tB,EAAQ8b,MAAQ9b,EAAQiuB,SAAW,IACnCF,EAAY,SAAS7S,GACjB,GAAuB,GAAnBA,EAAOoD,UAAiBpD,EAAOgT,WAAY,CAC3C,IAAIC,EAAOjT,EAAOgT,WACdF,EAAOG,EAIX,IAFAJ,EAAUC,GAGNA,EAAOA,EAAKI,aAMZL,EAAUC,GAEW,GAAjBA,EAAK1P,UAAkC,GAAjB6P,EAAK7P,WAC3B0P,EAAKzP,UAAY4P,EAAK5P,UAAYyP,EAAKzP,UACvC7X,EAAImO,OAAOsZ,IAGfA,EAAOH,CAEf,CACJ,GAGJ,IAKIK,EALAC,EAAa,QACbC,EAAa,cACbC,EAAM,iDACNC,EAAM,UACNC,EAAkB,iBAElBC,EACO,gcAOE/I,MAAM,KACfgJ,EAAS,UACTC,EAAW,uBACXC,EAAc,CACN,GAAI,OAAQ,GAAI,MAAO,GAAI,OAAQ,GAAI,KAAM,GAAI,KACjD,IAAK,OAAQ,IAAK,QAAS,IAAK,OAAQ,IAAK,QAAS,IAAK,SAC3D,IAAK,MAAO,IAAK,SAAU,IAAK,OAAQ,IAAK,MAAO,IAAK,OACzD,IAAK,OAAQ,IAAK,QAAS,IAAK,MAAO,IAAK,MAAO,IAAK,MACxD,IAAK,OAAQ,IAAK,MAAO,IAAK,SAAU,IAAK,OAAQ,IAAK,OAC1D,IAAK,QAAS,IAAK,QAAS,IAAK,OAAQ,IAAK,SAAU,IAAK,QAC7D,IAAK,OAAQ,IAAK,OAAQ,IAAK,QAAS,IAAK,SAAU,IAAK,SAC5D,IAAK,SAAU,IAAK,SAAU,IAAK,SAAU,IAAK,SAAU,IAAK,QACjE,IAAK,SAAU,IAAK,OAAQ,IAAK,QAAS,IAAK,QAAS,IAAK,SAC7D,IAAK,SAAU,IAAK,SAAU,IAAK,QAAS,IAAK,OAAQ,IAAK,SAC9D,IAAK,SAAU,IAAK,QAAS,IAAK,OAAQ,IAAK,MAAO,IAAK,SAC3D,IAAK,SAAU,IAAK,SAAU,IAAK,QAAS,IAAK,SAAU,IAAK,OAChE,IAAK,QAAS,IAAK,SAAU,IAAK,SAAU,IAAK,SAAU,IAAK,QAChE,IAAK,OAAQ,IAAK,SAAU,IAAK,QAAS,IAAK,QAAS,IAAK,SAC7D,IAAK,SAAU,IAAK,QAAS,IAAK,SAAU,IAAK,OAAQ,IAAK,QAC9D,IAAK,QAAS,IAAK,SAAU,IAAK,SAAU,IAAK,SAAU,IAAK,QAChE,IAAK,OAAQ,IAAK,SAAU,IAAK,SAAU,IAAK,QAAS,IAAK,OAC9D,IAAK,MAAO,IAAK,SAAU,IAAK,SAAU,IAAK,SAAU,IAAK,QAC9D,IAAK,SAAU,IAAK,OAAQ,IAAK,SAAU,IAAK,SAAU,IAAK,SAC/D,IAAK,SAAU,IAAK,QAAS,IAAK,OAAQ,IAAK,SAAU,IAAK,QAC9D,IAAK,OAAQ,IAAK,OAAQ,IAAK,QAAS,IAAK,OAAQ,IAAK,QAC1D,IAAK,QAAS,IAAK,UAAW,IAAK,OAAQ,IAAK,MAAO,IAAK,QAC5D,IAAK,OAAQ,IAAK,QAAS,IAAK,SAAU,IAAK,KAAM,IAAK,KAC1D,IAAK,KAAM,IAAK,UAAW,IAAK,KAAM,IAAK,MAAO,IAAK,QACvD,IAAK,MAAO,IAAK,UAAW,IAAK,MAAO,IAAK,MAAO,IAAK,MACzD,IAAK,QAAS,IAAK,QAAS,IAAK,OAAQ,IAAK,QAAS,IAAK,QAC5D,IAAK,UAAW,IAAK,OAAQ,IAAK,MAAO,IAAK,QAAS,IAAK,OAC5D,IAAK,QAAS,IAAK,SAAU,IAAK,KAAM,IAAK,KAAM,IAAK,KACxD,IAAK,UAAW,IAAK,KAAM,IAAK,MAAO,IAAK,SAAU,IAAK,QAC3D,IAAK,MAAO,IAAK,UAAW,IAAK,MAAO,IAAK,MAAO,IAAK,MACzD,IAAK,QAAS,IAAK,WAAY,IAAK,QAAS,IAAK,MAAO,KAAM,OAC/D,KAAM,SAAU,KAAM,QAAS,KAAM,QAAS,KAAM,QAAS,KAAM,QACnE,KAAM,SAAU,KAAM,QAAS,KAAM,OAAQ,KAAM,QAAS,KAAM,UAClE,KAAM,OAAQ,KAAM,OAAQ,KAAM,OAAQ,KAAM,OAAQ,KAAM,OAC9D,KAAM,QAAS,KAAM,OAAQ,KAAM,OAAQ,KAAM,OAAQ,KAAM,OAC/D,KAAM,OAAQ,KAAM,SAAU,KAAM,OAAQ,KAAM,QAAS,KAAM,QACjE,KAAM,QAAS,KAAM,OAAQ,KAAM,QAAS,KAAM,KAAM,KAAM,OAC9D,KAAM,MAAO,KAAM,QAAS,KAAM,SAAU,KAAM,QAAS,KAAM,OACjE,KAAM,QAAS,KAAM,MAAO,KAAM,MAAO,KAAM,KAAM,KAAM,MAC3D,KAAM,MAAO,KAAM,MAAO,KAAM,SAAU,KAAM,MAAO,KAAM,OAC7D,KAAM,QAAS,KAAM,KAAM,KAAM,QAAS,KAAM,KAAM,KAAM,KAC5D,KAAM,MAAO,KAAM,MAAO,KAAM,OAAQ,KAAM,OAAQ,KAAM,OAC5D,KAAM,QAAS,KAAM,SAAU,KAAM,OAAQ,KAAM,OAAQ,KAAM,QACjE,KAAM,QAAS,KAAM,SAAU,KAAM,SAAU,KAAM,OAAQ,KAAM,OACnE,KAAM,MAAO,KAAM,SAAU,KAAM,QAAS,KAAM,SAAU,KAAM,QAClE,IAAK,QAAS,IAAK,QAAS,IAAK,SAAU,IAAK,SAAU,IAAK,OAC/D,IAAK,OAAQ,IAAK,QAAS,KAAM,OAAQ,KAAM,OAAQ,KAAM,SAC7D,KAAM,OAAQ,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,KAAM,QAC3D,KAAM,QAAS,KAAM,QAAS,KAAM,QAAS,KAAM,QAAS,KAAM,QAClE,KAAM,QAAS,KAAM,QAAS,KAAM,SAAU,KAAM,SAAU,KAAM,SACpE,KAAM,SAAU,KAAM,SAAU,KAAM,QAG9CpoB,EAAM,CACN+mB,MAAOA,EACPG,OAAQA,EAERmB,cAAe,SAASf,EAAMgB,GAC1B,IAAI9tB,EAAI,EAER,IAAK8sB,EACD,OAAQ,EAGZ,KACIA,EAAOA,EAAKiB,iBAMND,GAA6B,GAAjBhB,EAAK1P,UACnBpd,IAIR,OAAOA,CACX,EAEAguB,WAAY,SAASlB,GACjB,OAAOA,GAA2B,OAAnBA,EAAKzP,WAAoC,OAAdyP,EAAKpU,IACnD,EAEAuV,aAAc,SAASjU,EAAQ8S,GAC3B,IACI,OAAQtnB,EAAIwoB,WAAWhU,KAAY1d,EAAE2X,SAAS+F,EAAQxU,EAAIwoB,WAAWlB,GAAQA,EAAKrE,WAAaqE,IAASA,EAAKrE,YAAczO,EAC/H,CAAE,MAAOtT,GACL,OAAO,CACX,CACJ,EAEAmP,iBAAkB,SAASgV,EAAMiC,GAC7B,OAAOtnB,EAAIyoB,aAAapD,EAAMiC,IAASjC,GAAQiC,CACnD,EAEAoB,oBAAqB,SAASrD,EAAMiC,GAChC,GAAItnB,EAAIyoB,aAAapD,EAAMiC,GACvB,KAAOA,GAAQA,EAAKrE,YAAcoC,GAC9BiC,EAAOA,EAAKrE,WAIpB,OAAOqE,CACX,EAEArL,eAAgB,SAAS0M,GAUrB,IATA,IAAIxqB,EAAW,GAEXyqB,EAAWrqB,SAASsqB,mBAAmBF,EACvCG,WAAWC,cACX,WACI,OAAOD,WAAWE,aACtB,IAAG,GAEHC,EAAUL,EAASM,WAChBD,GACH9qB,EAASlG,KAAKgxB,EAAQpR,WACtBoR,EAAUL,EAASM,WAEvB,OAAO/qB,CACX,EAEAgrB,cAAe,SAAS7B,GACpB,OAAOtnB,EAAIwoB,WAAWlB,GAAQA,EAAK3uB,OAAS2uB,EAAK8B,WAAWzwB,MAChE,EAEA0wB,cAAe,SAAS/B,EAAM7P,GAM1B,IALA,IAGI6R,EAHAC,EAAUjC,EAAKkC,WAAU,GACzBC,EAAmB,GACnBb,EAAWtB,EAAKI,YAGbkB,GAAiC,GAArBA,EAAShR,UAAiBgR,EAAS/Q,WAClD4R,GAAoBb,EAAS/Q,UAC7ByR,EAAOV,EACPA,EAAWA,EAASlB,YACpB1nB,EAAImO,OAAOmb,GAGfhC,EAAKoC,WAAWjS,EAAQ6P,EAAK3uB,QAC7B4wB,EAAQG,WAAW,EAAGjS,GACtB8R,EAAQ1R,WAAa4R,EACrBzpB,EAAIkU,YAAYqV,EAASjC,EAC7B,EAEAqC,WAAY,SAASrC,EAAMpJ,GACvB,IAAK,IAAI5R,KAAO4R,EAAY,CACxB,IAAIhU,EAAQod,EAAKhb,GAMjB,GAJIA,GAAO8Z,IACPlc,EAAQod,EAAK9vB,EAAM4B,QAAQwwB,SAAWvD,EAAWC,IAGjC,iBAATpc,GACP,IAAKlK,EAAI2pB,WAAWzf,EAAOgU,EAAW5R,IAClC,OAAO,OAER,GAAIpC,GAASgU,EAAW5R,GAC3B,OAAO,CAEf,CAEA,OAAO,CACX,EAEAud,kBAAmB,SAASvC,GACxB,OAAOtnB,EAAI8pB,aAAaxC,EAAMT,IAAkBS,EAAKyC,cAAcne,IACvE,EAEAoe,aAAc,SAAStL,GACnB,IACIlkB,EAAGksB,EADHuD,EAAS,GAGb,IAAKzvB,EAAI,EAAGksB,EAAMhI,EAAM/lB,OAAQ6B,EAAIksB,EAAKlsB,IAAK,CAC1C,IAAIusB,EAAQ/mB,EAAI8pB,aAAapL,EAAMlkB,GAAIwF,EAAI6mB,eACvCE,GAASjwB,EAAE2D,QAAQssB,EAAOkD,GAAU,GACpCA,EAAOhyB,KAAK8uB,EAEpB,CAEA,OAAOkD,CACX,EAEAC,mBAAoB,SAAS3rB,GACzB,OAAOA,EAAS4rB,aAAe5rB,EAAS6rB,YAC5C,EAEA/C,UAAWA,EACXR,cAAeA,EACfD,qBAAsBA,EACtBK,eAAgBA,EAChBrH,MAAOA,EACPuH,UAAWA,EACXkD,UAAW,CACPC,aAAc,EACdC,eAAgB,EAChBC,UAAW,EACXC,mBAAoB,EACpBC,sBAAuB,EACvBC,YAAa,EACbC,4BAA6B,EAC7BC,aAAc,EACdC,cAAe,EACfC,mBAAoB,GACpBC,uBAAwB,GACxBC,cAAe,IAGnBC,MAAO,SAASC,GACZ,IAAIC,EAAUtD,EAAItc,KAAK2f,GAEvB,OAAKC,EAIE,IAAM/e,EAAI+e,EAAQhzB,MAAM,IAAI,SAASizB,GAExC,OADAA,EAAItL,SAASsL,EAAG,IAAIC,SAAS,KACpB3yB,OAAS,EAAI0yB,EAAI,IAAMA,CACpC,IAAG7Y,KAAK,IANG2Y,CAOf,EAEA5f,OAAQ,SAASrB,EAAOtS,GACpB,IAAI2zB,GAAmB3zB,GAAWA,EAAQgR,SAAYuf,EAAWD,EACjE,OAAOhe,EAAM1M,QAAQ+tB,GAAgB,SAASC,GAC1C,IAAIC,EAAWD,EAAEE,WAAW,GACxBC,EAASvD,EAAYqD,GACzB,OAAOE,EAAS,IAAMA,EAAS,IAAMH,CACzC,GACJ,EACAI,MAAO,SAAStE,GACZ,OAAOA,GAA0B,IAAlBA,EAAK1P,UAAkB,cAAcpL,KAAK8a,EAAKzP,UAClE,EACAgU,SAAU,SAAS5hB,GACf,OAAQA,GAAQ,IAAIzM,QAAQuqB,EAAK,GACrC,EAEA+D,aAAc,SAASxE,GACftnB,EAAI4rB,MAAMtE,IACVA,EAAKrE,WAAW8I,YAAYzE,EAEpC,EAEA0E,cAAe,SAAS1E,GACpB,IAAIrW,EAAOqW,EAAKpJ,WAEhB,MAAyB,YAAlBoJ,EAAKvU,WAA4B/S,EAAI4a,GAAG0M,EAAM,QAA4B,QAAlBA,EAAKvU,WAAuB9B,EAAKgb,YAAchb,EAAKib,yBAA6BlsB,EAAI4a,GAAG0M,EAAM,SAA8B,QAAlBA,EAAKvU,SAClL,EACAoZ,UAAW,SAAS7E,GAChB,OAAOtnB,EAAI4a,GAAG0M,EAAM,OAAStnB,EAAI4a,GAAG0M,EAAM,KAC9C,EACA8E,iBAAkB,SAAS1N,GACvB,OAAO5nB,EAAEu1B,KAAK3N,GAAO,SAAS4N,GAC1B,IAAIhyB,EAAO0F,EAAI1F,KAAKgyB,GAEpB,MAAY,MAARhyB,KAEO0F,EAAIgsB,cAAcM,MAElBtsB,EAAIusB,cAAcD,MAEA,GAAlBA,EAAM1U,WAAkBgI,EAAMtlB,IAAS0F,EAAIwsB,UAAUF,KAKpE,GACJ,EAEAC,cAAe,SAASjF,GACpB,OAAOA,GAAyB,GAAjBA,EAAK1P,UAAiBoQ,EAAgBxb,KAAK8a,EAAKzP,UACnE,EAEA2U,UAAW,SAASlF,GAChB,OAAwB,GAAjBA,EAAK1P,WAAkB5X,EAAIosB,iBAAiB9E,EAAK8B,YAAYzwB,MACxE,EAEA2B,KAAM,SAASgtB,GACX,OAAOA,EAAKzQ,SAASpZ,aACzB,EAEAgvB,sBAAuB,SAASnF,GAC5B,OAAOxwB,EAAEu1B,KAAK/E,EAAK8B,YAAY,SAASkD,GACpC,OAAyB,GAAlBA,EAAM1U,WAAkB5X,EAAI0sB,aAAaJ,EACpD,GACJ,EAEAK,aAAc,SAAS/gB,EAAM8S,GACzB,MAAM0K,EAAaxd,EAAKwd,WACxB1K,EAAQA,GAAS,GAEjB,IAAK,MAAM4I,KAAQ8B,EACX9B,EAAK1P,WAAa/gB,KAAKwzB,UAAUG,YAChC3D,EAAc3J,SAASld,EAAI1F,KAAKgtB,EAAKrE,cACtCgE,EAAe/J,SAASld,EAAI1F,KAAKgtB,EAAKrE,cACtCqE,EAAKrE,aAAerX,GACpB8S,EAAMzmB,KAAKqvB,GACJA,EAAK1P,WAAa/gB,KAAKwzB,UAAUC,cACxCzzB,KAAK81B,aAAarF,EAAM5I,GAIhC,OAAOA,CACX,EAEAkO,aAAc,SAAStF,GACnB,IAAIjL,EAAS,KAEb,GAAqB,GAAjBiL,EAAK1P,SACL,OAAO0P,EAGX,IAAK,IAAIgF,EAAQhF,EAAKuF,UAAWP,EAAOA,EAAQA,EAAM/D,gBAGlD,GAFAlM,EAASrc,EAAI4sB,aAAaN,GAGtB,OAAOjQ,EAIf,OAAOA,CACX,EAEAzB,GAAI,SAAS0M,EAAMzQ,GACf,OAAOyQ,GAAQtnB,EAAI1F,KAAKgtB,IAASzQ,CACrC,EAEAiW,SAAU,SAASxF,GACf,OAAOA,EAAKvU,WAAayT,CAC7B,EAEAkG,aAAc,SAASpF,GACnB,OAAOM,EAAWpb,KAAK8a,EAAKzP,UAChC,EAEAkV,kBAAmB,SAASzF,GACxB,IAAIjL,GAAS,EAWb,OATA+K,EAA+B4F,OAAM,SAAS1yB,GAC1C,OAAI0F,EAAI4a,GAAG0M,EAAMhtB,KACb+hB,GAAS,GACF,EAIf,IAEOA,CACX,EAEA4Q,qBAAsB,SAAS3F,GAE3B,IADA,IAAIgF,EAAQhF,EAAKE,WACV8E,GAAStsB,EAAI0sB,aAAaJ,IAC7BA,EAAQA,EAAM5E,YAGlB,OAAQ4E,CACZ,EAEAY,aAAc,SAAS5F,GACnB,OAAOO,EAAWrb,KAAK8a,EAAKzP,UAChC,EAEA+G,gBAAiB,SAAS0I,GACtB,IAAMtnB,EAAIwoB,WAAWlB,KAAStnB,EAAI0sB,aAAapF,GAC3C,OAAO,EAGX,GAAIO,EAAWrb,KAAK8a,EAAKzP,WACrB,OAAO,EAGX,IAAIsV,EAAU,SAASpd,EAAIqd,GACvB,KAAOrd,EAAGqd,IAEN,GADArd,EAAKA,EAAGqd,GACJptB,EAAIosB,iBAAiB,CAACrc,IAAKpX,OAAS,EACpC,OAAOoX,CAGnB,EAEIyE,EAAS8S,EAAKrE,WACdwE,EAAO0F,EAAQ7F,EAAM,mBACrB5P,EAAOyV,EAAQ7F,EAAM,eAEzB,GAAIS,EAAIvb,KAAK8a,EAAKzP,WACd,SAAU4P,IAAQ/P,GAGtB,GAAI5gB,EAAE0d,GAAQoG,GAAG,oCACb,OAAO,EAGX,GAAI5a,EAAIqtB,QAAQ7Y,IAAWxU,EAAI4a,GAAGpG,EAAQ,QAAS,CAC/C,IAAI8Y,EAAc7F,GAAQznB,EAAIqtB,QAAQ5F,GAClC8F,EAAc7V,GAAQ1X,EAAIqtB,QAAQ3V,GACtC,IAAMA,GAAQ4V,IAAkB7F,GAAQ8F,GAAiBD,GAAeC,EACpE,OAAO,CAEf,CAEA,OAAO,CACX,EAEAF,QAAS,SAAS/F,GACd,OAAOP,EAAM/mB,EAAI1F,KAAKgtB,GAC1B,EAEAkG,cAAe,SAASlG,GACpB,OAAON,EAAYhnB,EAAI1F,KAAKgtB,GAChC,EAEAmG,QAAS,SAASnG,GACd,OAAO1H,EAAM5f,EAAI1F,KAAKgtB,GAC1B,EAEAoG,SAAU,SAASpG,GACf,OAAOJ,EAAOlnB,EAAI1F,KAAKgtB,GAC3B,EAEAqG,MAAO,SAASrG,GACZ,MAAyB,OAAlBtnB,EAAI1F,KAAKgtB,EACpB,EAEAsG,KAAM,SAAStG,GACX,MAAyB,MAAlBtnB,EAAI1F,KAAKgtB,EACpB,EAEAnU,KAAM,SAASmU,GACX,IAAIhtB,EAAOgtB,EAAOtnB,EAAI1F,KAAKgtB,GAAQ,GACnC,MAAe,MAARhtB,GAAwB,MAARA,GAAwB,MAARA,CAC3C,EAEAuzB,gBAAiB,SAASxgB,GACtB,IAAImD,EAAMxQ,EAAIkqB,mBAAmB7c,GAC7BwgB,GAAmBrd,EAAIc,eAAiBd,GAAKjS,UAAYiS,EAAIuZ,eAAiBvZ,EAQlF,OALIqd,EAD8B,cAA9BA,EAAgBC,WACED,EAAgBjiB,KAEhBiiB,EAAgBE,kBAAoBF,EAAgBrvB,eAI9E,EAEAwvB,SAAU,SAAS1G,EAAM2G,GACrB,IAIIxuB,EAASyuB,EAAYC,EAAeC,EAJpC/gB,EAAMia,EAAKyC,cAEXsE,EADMruB,EAAIkqB,mBAAmB7c,GACVihB,YACnBT,EAAkB7tB,EAAI6tB,gBAAgBxgB,GAGtCrN,EAAIwoB,WAAWlB,GACX2G,GACAG,EAASpuB,EAAI8iB,OAAOzV,EAAK,OAAQ,CAAE6O,UAAa,aAChDlc,EAAImR,aAAaid,EAAQ9G,GACzB7nB,EAAU3I,EAAEs3B,IAEZ3uB,EAAU3I,EAAEwwB,EAAKrE,YAGrBxjB,EAAU3I,EAAEwwB,GAGhB4G,EAAazuB,EAAQgY,SAASnC,IAC9B6Y,EAAgB1uB,EAAQ,GAAG8uB,cAEvBN,GAAYE,IACZA,EAAgBpO,SAAStgB,EAAQyJ,IAAI,eAAgB,KACrC+a,KAAKuK,KAAK,IAAMzO,SAAStgB,EAAQyJ,IAAI,aAAc,MACnD,IAGhBklB,GACApuB,EAAImO,OAAOigB,GAGXD,EAAgBD,EAAaL,EAAgB7Y,UAAYqZ,IACzDR,EAAgB7Y,UAAYmZ,EAAgBD,EAAaG,EAEjE,EAEAI,iBAAkB,SAASphB,GACvBsa,EAAqB3nB,EAAI6tB,gBAAgBxgB,GAAK2H,SAClD,EAEAyC,OAAQ,SAAShC,EAAQiZ,GAIrB,IAHA,IAAIrS,EAAS,CAAE/G,IAAKG,EAAOkZ,UAAWtZ,KAAMI,EAAOmZ,YAC/Cpa,EAASiB,EAAOiZ,aAEbla,KAAYka,GAAgB1uB,EAAIyoB,aAAaiG,EAAcla,KAC9D6H,EAAO/G,KAAOd,EAAOma,UACrBtS,EAAOhH,MAAQb,EAAOoa,WACtBpa,EAASA,EAAOka,aAGpB,OAAOrS,CACX,EAEAwS,iBAAkB,SAASxhB,GACU,iBAAtBsa,IACP3nB,EAAI6tB,gBAAgBxgB,GAAK2H,UAAY2S,EACrCA,OAAqBmH,EAE7B,EAEAC,SAAU,SAASva,EAAQwa,EAAYppB,GACnC4O,EAAOrD,aAAa6d,EAAYxa,EAAO4U,WAAWxjB,IAAa,KACnE,EAEAuL,aAAc,SAAS6d,EAAYC,GAC/B,OAAIA,EAAiBhM,WACVgM,EAAiBhM,WAAW9R,aAAa6d,EAAYC,GAErDA,CAEf,EAEA/a,YAAa,SAAS8a,EAAYC,GAC9B,OAAOA,EAAiBhM,WAAW9R,aAAa6d,EAAYC,EAAiBvH,YACjF,EAEAvZ,OAAQ,SAASmZ,GACTA,EAAKrE,YACLqE,EAAKrE,WAAW8I,YAAYzE,EAEpC,EAEA4H,eAAgB,SAAS5H,GACrB,KAAOA,EAAKE,YACRF,EAAKyE,YAAYzE,EAAKE,WAE9B,EAEA2H,mBAAoB,SAAS7H,GAGzB,IAFA,IAAIrE,EAAaqE,EAAKrE,WAEfqE,EAAKI,aAA4C,GAA7BJ,EAAKI,YAAY9P,UACxCqL,EAAW8I,YAAYzE,EAAKI,aAGhC,KAAOJ,EAAKiB,iBAAoD,GAAjCjB,EAAKiB,gBAAgB3Q,UAChDqL,EAAW8I,YAAYzE,EAAKiB,gBAEpC,EAEAhZ,KAAM,SAASiF,GACX,IAAK,IAAIha,EAAIga,EAAO4U,WAAWzwB,OAAS,EAAG6B,GAAK,EAAGA,IAAK,CACpD,IAAI8sB,EAAO9S,EAAO4U,WAAW5uB,GACzBwF,EAAIwoB,WAAWlB,GACVtnB,EAAI6rB,SAASvE,EAAKzP,WAAWlf,QAC9BqH,EAAImO,OAAOmZ,GAERA,EAAKvU,WAAayT,IACzBxmB,EAAIuP,KAAK+X,KAEHtnB,EAAIytB,QAAQnG,IAAoC,IAA3BA,EAAK8B,WAAWzwB,QACtCqH,EAAIqtB,QAAQ/F,IAAStnB,EAAIitB,qBAAqB3F,KAC/CtnB,EAAImO,OAAOmZ,GAGvB,CAEA,OAAO9S,CACX,EAEAtU,QAAS,SAASonB,EAAM5sB,GAKpB,IAJoB,iBAATA,IACPA,EAAO,CAACA,IAGL4sB,GAAQ5sB,EAAKulB,QAAQjgB,EAAI1F,KAAKgtB,IAAS,GAC1CA,EAAOA,EAAKrE,WAGhB,OAAOqE,CACX,EAEA8H,UAAW,SAAS9H,EAAM+H,EAAWC,GACjC,KAAOhI,IAAS+H,EAAU/H,IAAO,CAC7B,GAAIgI,GAAiBA,EAAchI,GAC/B,OAAO,KAEXA,EAAOA,EAAKrE,UAChB,CACA,OAAOqE,CACX,EAEA6F,QAAS,SAAS7F,EAAM8F,GACpB,GACI9F,EAAOA,EAAK8F,SACP9F,GAAyB,GAAjBA,EAAK1P,UAEtB,OAAO0P,CACX,EAEA5P,KAAM,SAAS4P,GACX,OAAOtnB,EAAImtB,QAAQ7F,EAAM,cAC7B,EAEAG,KAAM,SAASH,GACX,OAAOtnB,EAAImtB,QAAQ7F,EAAM,kBAC7B,EAEAwC,aAAc,SAASxC,EAAM5sB,GACzB,GACI4sB,EAAOA,EAAKrE,iBACPqE,IAAUtnB,EAAIuvB,OAAOjI,EAAM5sB,IAEpC,OAAO4sB,CACX,EAEAiI,OAAQ,SAASjI,EAAM5sB,GACnB,OAAO5D,EAAE2D,QAAQuF,EAAI1F,KAAKgtB,GAAO5sB,IAAS,CAC9C,EAEA80B,UAAW,SAASP,EAAkBnT,EAAS2T,GAC3C,IAEIj1B,EAAGksB,EAAKpsB,EAAM4P,EAAOwlB,EAFrBV,EAAahvB,EAAI8iB,OAAOmM,EAAiBlF,cAAejO,GACxDoC,EAAa+Q,EAAiB/Q,WAGlC,IAAKuR,EACD,IAAKj1B,EAAI,EAAGksB,EAAMxI,EAAWvlB,OAAQ6B,EAAIksB,EAAKlsB,KAC1Ck1B,EAAYxR,EAAW1jB,IACTm1B,YAEVr1B,EAAOo1B,EAAU7Y,SACjB3M,EAAQwlB,EAAU7X,UACdvd,GAAQisB,EACRyI,EAAWjc,UAAY7I,EAChB5P,GAAQ6rB,EACf6I,EAAWlsB,MAAM8sB,QAAUX,EAAiBnsB,MAAM8sB,QAElDZ,EAAW/Y,aAAa3b,EAAM4P,IAM9C,KAAO+kB,EAAiBzH,YACpBwH,EAAW9Y,YAAY+Y,EAAiBzH,YAK5C,OAFAxnB,EAAImR,aAAa6d,EAAYC,GAC7BjvB,EAAImO,OAAO8gB,GACJD,CACX,EAEAa,eAAgB,SAASvI,GACrB,KAAOA,IAA0B,GAAjBA,EAAK1P,UAA0C,SAAzB0P,EAAKwI,kBACvCxI,EAAOA,EAAKrE,WAGhB,OAAOqE,CACX,EAEA/S,KAAM,SAAS+S,EAAM/lB,GAGjB,OAFAvB,EAAImR,aAAa5P,EAAS+lB,GAC1B/lB,EAAQ2U,YAAYoR,GACb/lB,CACX,EAEAwuB,OAAQ,SAASzI,GAEb,IADA,IAAI9S,EAAS8S,EAAKrE,WACXqE,EAAKE,YACRhT,EAAOrD,aAAamW,EAAKE,WAAYF,GAGzC9S,EAAOuX,YAAYzE,EACvB,EAEA/lB,QAAS,SAAS+lB,GACd,IAAI/lB,EAAUvB,EAAIovB,UAAU9H,GAAM,SAASvX,GACvC,OAAOA,EAAGkT,YAAcjjB,EAAIosB,iBAAiBrc,EAAGkT,WAAWmG,YAAYzwB,OAAS,CACpF,IAEA,OAAO7B,EAAEyK,GAASqZ,GAAG,uBAAoBkU,EAAYvtB,CACzD,EAEAyuB,uBAAwB,SAAS1I,GAC7B,OAAOxwB,EAAEwwB,GAAM9S,SAASoG,GAAG,iBAC/B,EAEAkI,OAAQ,SAASvkB,EAAUud,EAASoC,GAChC,OAAOle,EAAIiR,KAAK1S,EAASyX,cAAc8F,GAAUoC,EACrD,EAEA+R,gBAAiB,SAAS1xB,EAAUud,EAASoC,GACzC,IAAIoJ,EAAOtnB,EAAIiR,KAAK1S,EAASyX,cAAc8F,GAAUoC,GAErD,OADAoJ,EAAKpL,UAAY,SACVoL,CACX,EAEArW,KAAM,SAASxR,EAASye,GAQpB,IAAK,IAAIjN,KAPTiN,EAAa7mB,EAAO,CAAC,EAAG6mB,KAENiI,KAASjI,IACvBle,EAAI8C,MAAMrD,EAASye,EAAWpb,cACvBob,EAAWpb,OAGLob,EACY,OAArBA,EAAWjN,IACXxR,EAAQywB,gBAAgBjf,UACjBiN,EAAWjN,IACH,aAARA,IACPxR,EAAQwR,GAAQiN,EAAWjN,IAInC,OAAO5Z,EAAOoI,EAASye,EAC3B,EAEAiS,gBAAiB,SAASC,EAAQ3a,EAAQ4a,GACjCD,EAAOlS,WAAWvlB,QAIvB7B,EAAEkZ,KAAKogB,EAAOlS,YAAY,WACJ,oBAAdrnB,KAAKyD,MAAgC+1B,GAAex5B,KAAKyD,OAAS6rB,GAClErvB,EAAE2e,GAAQxE,KAAKpa,KAAKyD,KAAMzD,KAAKqT,OAG/BmmB,GAAex5B,KAAKyD,OAAS6rB,GAC7BrvB,EAAEkZ,KAAKogB,EAAOttB,OAAO,WACjB2S,EAAO3S,MAAMjM,MAAQu5B,EAAOttB,MAAMjM,KACtC,GAER,GACJ,EAEAiM,MAAO,SAASwkB,EAAMpd,GAClBpT,EAAEwwB,GAAMpe,IAAIgB,GAAS,CAAC,EAC1B,EAEAomB,QAAS,SAAShJ,EAAMpd,GACpB,IAAK,IAAIoC,KAAOpC,EACRoC,GAAO8Z,IACP9Z,EAAM9U,EAAM4B,QAAQwwB,SAAWvD,EAAWC,GAG9CgB,EAAKxkB,MAAMwJ,GAAO,GAGK,KAAvBgb,EAAKxkB,MAAM8sB,SACXtI,EAAK4I,gBAAgB/J,EAE7B,EAEA9S,YAAa,SAASzH,EAAMtR,EAAM4jB,GAC9B,IACIpb,EADA0G,EAAO1S,EAAEkJ,EAAI8iB,OAAOlX,EAAKme,cAAezvB,EAAM4jB,IAelD,OAZAtS,EAAKsK,YAAY1M,EAAK,IAEtB1G,EAAQuJ,EAAI4b,GAAe,SAAS/d,GAChC,OAAI5Q,EAAQ8b,MAAiB,eAATlL,GAA6C,OAAnBV,EAAKN,IAAIgB,GAC5C,kBAEAA,EAAQ,IAAMV,EAAKN,IAAIgB,EAEtC,IAAGsI,KAAK,KAERhJ,EAAK2E,SAEErL,CACX,EAEAsQ,uBAAwB,SAAS3T,GAC7B,IAAI8wB,EAAkB9wB,EAAQyJ,IAAI,qBAAuB,GAEzD,OAAIqnB,EAAgBtQ,QAAQ,mBAAqB,GAAyB,gBAApBsQ,EAC3CA,EACqC,SAArC9wB,EAAQ,GAAGqc,QAAQre,cACnB,SAEAuC,EAAIoT,uBAAuB3T,EAAQ+U,SAElD,EAEAgc,UAAW,SAASlJ,GAChB,IAAIrd,EAAOqd,EAAKpL,UAIhB,OAFAjS,GADAA,EAAOA,EAAKzM,QAAQ,oBAAqB,KAC7BA,QAAQ,mBAAoB,GAG5C,EAEAsc,YAAa,SAASwN,EAAMmJ,GACxB,IAEIj2B,EAAGksB,EAFH3T,EAAY,IAAMuU,EAAKvU,UAAY,IACnC2d,EAAUD,EAAWvR,MAAM,KAG/B,IAAK1kB,EAAI,EAAGksB,EAAMgK,EAAQ/3B,OAAQ6B,EAAIksB,EAAKlsB,IACvCuY,EAAYA,EAAUvV,QAAQ,IAAMkzB,EAAQl2B,GAAK,IAAK,MAG1DuY,EAAYvb,EAAM+X,KAAKwD,IAETpa,OACV2uB,EAAKvU,UAAYA,EAEjBuU,EAAK4I,gBAAgB3J,EAE7B,EAEAoK,eAAgB,WACZ,IAIIn2B,EAAGo2B,EAAWtJ,EAAMlQ,EAAOmF,EAJ3BsU,EAAQC,UAAUn4B,OAClBo4B,EAAQ,GACRC,EAAgBC,IAChBC,EAAS,KAGb,IAAKL,EACD,OAAO,KAGX,GAAa,GAATA,EACA,OAAOC,UAAU,GAGrB,IAAKt2B,EAAI,EAAGA,EAAIq2B,EAAOr2B,IAAK,CAGxB,IAFAo2B,EAAY,GACZtJ,EAAOwJ,UAAUt2B,GACV8sB,GACHsJ,EAAU34B,KAAKqvB,GACfA,EAAOA,EAAKrE,WAEhB8N,EAAM94B,KAAK24B,EAAUO,WACrBH,EAAgB/M,KAAKlC,IAAIiP,EAAeJ,EAAUj4B,OACtD,CAEA,GAAa,GAATk4B,EACA,OAAOE,EAAM,GAAG,GAGpB,IAAKv2B,EAAI,EAAGA,EAAIw2B,EAAex2B,IAAK,CAGhC,IAFA4c,EAAQ2Z,EAAM,GAAGv2B,GAEZ+hB,EAAI,EAAGA,EAAIsU,EAAOtU,IACnB,GAAInF,GAAS2Z,EAAMxU,GAAG/hB,GAClB,OAAO02B,EAIfA,EAAS9Z,CACb,CACA,OAAO8Z,CACX,EAEAE,wBAAyB,SAAS1S,GAC9B,IAAIrC,GAGAA,EADgB,GAAhBqC,EAAM/lB,OACGqH,EAAI8pB,aAAapL,EAAM,GAAI,CAAC,KAAK,OAEjC1e,EAAI2wB,eAAeU,MAAM,KAAM3S,MAIxCrC,EAASrc,EAAI8pB,aAAapL,EAAM,GAAI,CAAC,IAAK,QAAUA,EAAM,GAAGqL,cAAcne,MAG3E5L,EAAI0tB,SAASrR,KACbA,EAASrc,EAAI6pB,kBAAkBxN,IAGnC,IAAIiV,EAAkBjlB,EAAIqS,EAAO1e,EAAI6vB,gBACjC0B,EAAmBvxB,EAAI2wB,eAAeW,GAAiB,GAM3D,OAJIx6B,EAAE2X,SAAS4N,EAAQkV,KACnBlV,EAASkV,GAGNlV,CACX,EAEAmV,gBAAiB,SAASlK,EAAMmK,GAC5B,IAAIvxB,EACAwxB,EAAW1xB,EAAI6vB,eAAevI,GAclC,QAXIpnB,EADAF,EAAIuvB,OAAOjI,EAAMmK,GACPnK,EAEAtnB,EAAI8pB,aAAaxC,EAAMmK,KAGtBC,GAAY56B,EAAE2X,SAASvO,EAASwxB,KAEnCxxB,GAAWwxB,KADnBxxB,EAAUwxB,GAKPxxB,CACX,EAEAyxB,sBAAuB,SAASrK,EAAMmK,GAClC,IAAIC,EAAW1xB,EAAIwxB,gBAAgBlK,EAAMmK,GAEzC,GAAIC,GAAY1xB,EAAIuvB,OAAOmC,EAAUD,KAAW36B,EAAE46B,GAAU9W,GAAG,aAC3D,OAAO8W,CAEf,EAEA5hB,OAAQ,SAASgM,EAAS4C,EAAOkT,GAK7B,OAAO5xB,EAAI2e,SAASD,GAJL,SAAS4I,GACpB,OAAOtnB,EAAI1F,KAAKgtB,IAASxL,CAC7B,GAEqC8V,EACzC,EAEAjT,SAAU,SAASD,EAAO2Q,EAAWuC,GAMjC,IALA,IAGIC,EAHAr3B,EAAI,EACJksB,EAAMhI,EAAM/lB,OACZ0jB,EAAS,GAGN7hB,EAAIksB,EAAKlsB,MACZq3B,EAAQxC,EAAU3Q,EAAMlkB,OACTo3B,IAAaC,GAASD,IACjCvV,EAAOpkB,KAAKymB,EAAMlkB,IAI1B,OAAO6hB,CACX,EAEAyV,qBAAsB,SAASxK,GAC3B,IAAIyK,EAAWj7B,EAAEwwB,GAAM9lB,KAAK,WACxB7I,EAASo5B,EAASp5B,OAClB6B,EAAI,EAER,GAAI7B,EACA,KAAO6B,EAAI7B,EAAQ6B,IACfwF,EAAIgyB,oBAAoBD,EAASv3B,SAGrCwF,EAAIgyB,oBAAoB1K,EAEhC,EAEA2K,oBAAqB,SAAS3K,GAC1BxwB,EAAEwwB,GAAM9lB,KAAK,uBAAuB2M,QACxC,EAEA6jB,oBAAqB,SAAS1K,GAC1BtnB,EAAIiyB,oBAAoB3K,GAExB,IAEI4K,EAFArF,EAAYvF,EAAKuF,UACjBvyB,EAAOuyB,GAAa7sB,EAAI1F,KAAKuyB,KAG5BvyB,GACQ,MAARA,GAAwB,OAARA,GACR,MAARA,GAAuC,QAAvBuyB,EAAU9Z,cAC3Bmf,EAAK5K,EAAKyC,cAAc/T,cAAc,OACnCjD,UAAY,OACfuU,EAAKpR,YAAYgc,GAEzB,EAIAC,kBAAmB,SAASC,EAAOC,GAC/BryB,EAAIsyB,eAAeF,EAAOC,EAC9B,EAEAE,mBAAoB,SAASH,EAAOC,GAChCv7B,EAAEs7B,GAAO5wB,KAAK,IAAM6wB,EAAU,KAAK9N,WAAW8N,EAClD,EAEAC,eAAgB,SAASF,EAAOC,GAG5B,IAFA,IAAIG,EAAoB,CAAC,EAEhBC,EAAW,EAAGA,EAAWL,EAAM/qB,KAAK1O,OAAQ85B,IAGjD,IAFA,IAAIC,EAAQN,EAAM/qB,KAAKorB,GAAUC,MAC7BC,EAAW,EACNC,EAAY,EAAGA,EAAYF,EAAM/5B,OAAQi6B,IAAaD,IAAY,CACvE,IAAIE,EAAOH,EAAME,GAMjB,GAJIC,EAAKC,QAAU,GACfj8B,KAAKk8B,YAAYF,EAAMJ,EAAUE,EAAUH,GAG3CA,EAAkBC,GAClB,KAAOD,EAAkBC,GAAUE,IAC/BA,IAIRE,EAAK5c,aAAaoc,EAASM,GAEvBE,EAAKG,QAAU,IACfL,EAAWA,EAAWE,EAAKG,QAAU,EAE7C,CAER,EAEAD,YAAa,SAASF,EAAMJ,EAAUE,EAAUH,GAK5C,IAJA,IAEIp0B,EAFA00B,EAAUD,EAAKC,QACfE,EAAUH,EAAKG,QAGVC,EAAK,EAAGA,EAAKD,EAASC,IAAM,CACjC70B,EAAQu0B,EAAWM,EAEnB,IAAK,IAAIC,EAAKT,EAAW,EAAGS,EAAKT,EAAWK,EAASI,IAAM,CAOvD,GALKV,EAAkBU,KACnBV,EAAkBU,GAAM,CAAC,EACzBV,EAAkBU,GAAIv6B,OAAS,GAG/B65B,EAAkBC,GAClB,KAAOD,EAAkBC,GAAUr0B,IAC/BA,IAIRo0B,EAAkBU,GAAI90B,IAAS,EAC/Bo0B,EAAkBU,GAAIv6B,QAC1B,CACJ,CAEJ,EAEAw6B,iBAAkB,SAASf,GACvB,IAMIgB,EAAW54B,EANXqF,EAAOhJ,KACPw8B,EAAoB,EACpBC,EAAYlB,EAAM/qB,KAClBksB,EAAoBD,EAAU36B,OAC9B66B,EAAc,GACdC,EAAc,GAGlB,GAAIrB,EAAMsB,MAENL,GADAD,EAAYhB,EAAMsB,MAAMrsB,MACM1O,YAI9B,IAFA06B,EAAoBxzB,EAAK8zB,uBAAuBvB,GAChDgB,EAAY,GACP54B,EAAI,EAAGA,EAAI64B,EAAmB74B,IAC/B44B,EAAUn7B,KAAKq7B,EAAU94B,IAGjC,IAAKA,EAAI,EAAGA,EAAI64B,EAAmB74B,IAC/Bg5B,EAAYv7B,KAAK,IAErB,IAAKuC,EAAI,EAAGA,EAAI+4B,EAAmB/4B,IAC/Bi5B,EAAYx7B,KAAK,IAGrB4H,EAAK+zB,uBAAuBJ,EAAaJ,GACzCvzB,EAAKg0B,oBAAoBL,EAAaC,EAAaJ,EAAmBC,GACtEzzB,EAAKi0B,WAAWN,EAAaC,EAAaJ,EAAmBC,EACjE,EAEAM,uBAAwB,SAASJ,EAAaJ,GAC1C,IAESV,EAAOG,EAAMkB,EAAKhuB,EAAIiuB,EAASC,EAASz5B,EAAG+hB,EAAG2X,EAAGC,EAFtDC,GAAY,IAAIC,MAAOC,UACvBjB,EAAoBD,EAAYA,EAAUz6B,OAAS,EAGvD,IAAK6B,EAAI,EAAGA,EAAI64B,EAAmB74B,IAK/B,IAHAk4B,EADMU,EAAU54B,GACJk4B,MACZqB,EAAM,EAEDxX,EAAI,EAAGA,EAAImW,EAAM/5B,OAAQ4jB,IAAK,CAO/B,IALAxW,EAAK,QAAUvL,EAAI+hB,KAAO6X,GAD1BvB,EAAOH,EAAMnW,IAERtG,aAAa,KAAMlQ,GACxBiuB,EAAUnB,EAAKhnB,aAAa,YAAc,EAC1CooB,EAAUpB,EAAKhnB,aAAa,YAAc,EAEnC2nB,EAAYh5B,GAAG+hB,EAAIwX,IACtBA,GAAO,EAGX,IAAKG,EAAI,EAAGA,EAAID,EAASC,IACrB,IAAKC,EAAI,EAAGA,EAAIH,EAASG,IACrBX,EAAYh5B,EAAI05B,GAAG3X,EAAIwX,EAAMI,GAAKpuB,CAG9C,CAER,EAEA8tB,oBAAqB,SAASL,EAAaC,EAAaJ,EAAmBC,GACvE,IAGIiB,EAAK7B,EAAOG,EAAMkB,EAAKhuB,EAAIiuB,EAASC,EAASz5B,EAAG+hB,EAAG2X,EAAGC,EAAGxB,EAAU6B,EAFnEJ,GAAY,IAAIC,MAAOC,UACvBf,EAAoBD,EAAU36B,OAG9B87B,EAAe,SAASF,GACxBC,EAAQv8B,KAAKs8B,EAAI5B,GACrB,EAEA,IAAKn4B,EAAI64B,EAAmB74B,EAAI+4B,EAAmB/4B,IAK/C,IAJA+5B,EAAMjB,EAAU94B,GAChBk4B,EAAQ57B,EAAEy9B,EAAI7B,OAAO5iB,OAAO,MAC5BikB,EAAM,EAEDxX,EAAI,EAAGA,EAAImW,EAAM/5B,OAAQ4jB,IAAK,CAO/B,IALAxW,EAAK,QAAUvL,EAAI+hB,KAAO6X,GAD1BvB,EAAOH,EAAMnW,IAERtG,aAAa,KAAMlQ,GACxBiuB,EAAUnB,EAAKhnB,aAAa,YAAc,EAC1CooB,EAAUpB,EAAKhnB,aAAa,YAAc,EAEnC4nB,EAAYj5B,GAAG+hB,EAAIwX,IACtBA,GAAO,EAGX,IAAKG,EAAI,EAAGA,EAAID,EAASC,IACrB,IAAKC,EAAI,EAAGA,EAAIH,EAASG,IACrBV,EAAYj5B,EAAI05B,GAAG3X,EAAIwX,EAAMI,GAAKpuB,EAI1C4sB,EAAWE,EAAKhnB,aAAa,aAC7B2oB,EAAU,GACVhB,EAAYkB,QAAQD,GACpBD,EAAUA,EAAQ1kB,OAlCfjZ,KAkC2B89B,aAC9B9B,EAAK5c,aAAa,UAAWue,EAAQhiB,KAAK,KAAKjD,OACnD,CAER,EAEAukB,WAAY,SAASN,EAAaC,EAAaJ,EAAmBC,GAC9D,IAEIiB,EAAK7B,EAAOG,EAAMr4B,EAAG+hB,EAAGoW,EAAU6B,EADlCjB,EAAoBD,EAAU36B,OAG9B87B,EAAe,SAASF,GACxBC,EAAQv8B,KAAKs8B,EAAI5B,GACrB,EAEA,IAAKn4B,EAAI64B,EAAmB74B,EAAI+4B,EAAmB/4B,IAI/C,IAHA+5B,EAAMjB,EAAU94B,GAChBk4B,EAAQ57B,EAAEy9B,EAAI7B,OAAO5iB,OAAO,MAEvByM,EAAI,EAAGA,EAAImW,EAAM/5B,OAAQ4jB,IAC1BsW,EAAOH,EAAMnW,GACboW,EAAWE,EAAKhnB,aAAa,aAC7B2oB,EAAUf,EAAYj5B,GAAGpC,QAEzBo7B,EAAYkB,QAAQD,GACpBD,EAAUA,EAAQ1kB,OAlBfjZ,KAkB2B89B,aAC9B9B,EAAK5c,aAAa,UAAWue,EAAQhiB,KAAK,KAAKjD,OAG3D,EAEAqlB,oBAAqB,SAASxC,GAC1B,IAEIS,EAAMr4B,EAAGq6B,EAFTnC,EAAQ57B,EAAEs7B,GAAO5wB,KAAK,UACtBszB,EAAe,EAGnB,IAAKt6B,EAAI,EAAGA,EAAIk4B,EAAM/5B,OAAQ6B,IAC1Bq4B,EAAOH,EAAMl4B,IACbq6B,EAAeE,OAAOlC,EAAKhnB,aAAa,cAAgB,GACrCipB,IACfA,EAAeD,GAIvB,OAAOC,CACX,EAEAE,0BAA2B,SAAS5C,EAAO6C,GACvC,IAEIJ,EAAcN,EAAK/5B,EAAG+hB,EAAGsW,EAFzBxrB,EAAO+qB,EAAM/qB,KACbytB,EAAe,EAGnB,IAAKt6B,EAAIy6B,EAAoBz6B,EAAI6M,EAAK1O,OAAQ6B,IAG1C,IAFA+5B,EAAMltB,EAAK7M,GAEN+hB,EAAI,EAAGA,EAAIgY,EAAI7B,MAAM/5B,OAAQ4jB,IAC9BsW,EAAO0B,EAAI7B,MAAMnW,GAEb1lB,KAAK+jB,GAAGiY,EAAM,QACdgC,EAAeE,OAAOlC,EAAKhnB,aAAa,cAAgB,GACrCipB,IACfA,EAAeD,GAM/B,OAAOC,CACX,EAEAnB,uBAAwB,SAASvB,GAC7B,IAGI7V,EAAGgY,EAAK1B,EAAMl6B,EAHd0O,EAAO+qB,EAAM/qB,KAEb6tB,EADQ9C,EAAMsB,OACItB,EAAMsB,MAAMrsB,KAAO+qB,EAAMsB,MAAMrsB,KAAK1O,OAAS,EAGnE,GAAe,IAAXu8B,EAIA,IAFAv8B,GADA47B,EAAMltB,EAAK,IACEqrB,OAAS6B,EAAI7B,MAAM/5B,OAEzB47B,GAAO57B,GAAU9B,KAAK+jB,GAAG2Z,EAAI7B,MAAM,GAAI,OAAO,CACjD,IAAKnW,EAAI,EAAGA,EAAI5jB,EAAQ4jB,IACpBsW,EAAO0B,EAAMA,EAAI7B,MAAMnW,GAAK,KAEvB1lB,KAAK+jB,GAAGiY,EAAM,QACf0B,EAAM,MAIVA,IACAW,GAAU,EAEVv8B,GADA47B,EAAM19B,KAAK6gB,KAAK6c,KACAA,EAAI7B,OAAS6B,EAAI7B,MAAM/5B,OAE/C,CAGJ,OAAOu8B,CACX,EAIAP,YAAa,SAASzqB,EAAO9L,EAAO1H,GAChC,OAAOA,EAAKupB,QAAQ/V,KAAW9L,CACnC,GAGJ5G,EAAM0B,GAAG4G,OAAOE,IAAMA,CAErB,CAtyCD,CAsyCGjH,OAAOvB,MAAM0uB,QAEhB,SAAUpvB,EAAGgC,GAGb,IAAItB,EAAQuB,OAAOvB,MACfoG,EAASpG,EAAM0B,GAAG4G,OAClBC,EAAMnC,EAAOoC,IACb3I,EAASP,EAAEO,OAEX89B,EAAmB,uDAAuDjW,MAAM,KAChFkW,EAAU,KACVC,EAAO,aACPC,EAAU,sBACVC,EAAW,uBACXC,EAAiB,qGACjBC,EAAa,eACbC,EAAa,cACbC,EAAY,gDACZzD,EAAK,oBACL0D,EAAU,mCAEVC,EAAMt3B,SAASyX,cAAc,OACjC6f,EAAI3Z,UAAY,QAChB,IAAI4Z,EAAwD,IAA5BD,EAAIrO,WAAW5P,SAC/Cie,EAAM,KACN,IAAIE,EAAav+B,EAAMu+B,WAInBpnB,EAAa,CACbqnB,eAAgB,SAASjoB,GACrB,OAAQA,GAAQ,IACXvQ,QAAQ,yBAA0B,4BAClCA,QAAQ,yBAA0B,kBAClCA,QAAQ,kBAAkB,SAASq0B,GAChC,OAAOA,EAAMr0B,QAAQm4B,EAAW,GACpC,IACCn4B,QAAQ,kCAAmC,MAC3CA,QAAQ,wBAAyB00B,EAAK,OACtC10B,QAAQ,yBAA0B,MAClCA,QAAQ,2BAA4B,QAAU00B,EACvD,EAEA+D,sBAAuB,SAASrqB,GAM5B,IALA,IAAIsqB,EAAYt4B,EAAO+X,WAAWugB,UAC9B3J,EAAgBxsB,EAAIwsB,cACpBnV,EAAQxL,EAAK4b,WACbnR,EAAOzK,EAAKihB,UAETN,EAAcnV,IACjBA,EAAQA,EAAMsQ,YAGlB,KAAO6E,EAAclW,IACjBA,EAAOA,EAAKkS,gBAGZnR,GAAS8e,EAAU9e,IACnBtgB,EAAE8+B,GAASO,UAAUvqB,GAGrByK,GAAQ6f,EAAU7f,IAClBvf,EAAE8+B,GAAS9hB,SAASlI,EAE5B,EAEAwqB,mBAAoB,SAASxqB,GAEzB9U,EAAE8U,GAAMpK,KAAK,QAAQwO,MAAK,WACtB,IAAIqmB,EAAIv/B,EAAED,MACV,GAAI,SAAS2V,KAAK6pB,EAAEpsB,UAAYosB,EAAE70B,KAAK,aAAa7I,OAAQ,CAExD,IADA,IAAI2uB,EAAOzwB,KACJywB,EAAK5H,SAAS,IAAmC,GAA7B4H,EAAK5H,SAAS,GAAG9H,UACxC0P,EAAOA,EAAK5H,SAAS,GAGJ,GAAjB4H,EAAK1P,UAAkB7X,EAAI6f,MAAM7f,EAAIzF,KAAKgtB,MACtCvnB,EAAI6a,GAAG0M,EAAM,MACbA,EAAKpL,UAAY1kB,EAAM0B,GAAG4G,OAAO2kB,sBAGjC6C,EAAKpL,UAAY1kB,EAAM0B,GAAG4G,OAAO0kB,oBAG7C,CACJ,GACJ,EAEA8R,sBAAuB,SAAS1qB,GAE5B9U,EAAE,qBAAsB8U,GAAMuC,QAClC,EAEAooB,mBAAoB,SAASlR,GAEzB,IAA2C7qB,EAAGg8B,EAAIC,EAA9CC,EAAMrR,EAAKrT,qBAAqB,MAEpC,IAAKxX,EAAI,EAAGA,EAAIk8B,EAAI/9B,OAAQ6B,IAExBi8B,GADAD,EAAKE,EAAIl8B,IACUqR,aAAa,SAEhC2qB,EAAGvgB,aAAa,QAAS,GAErBwgB,EACAD,EAAGvgB,aAAa,QAASwgB,GAEzBD,EAAGtG,gBAAgBuG,EAG/B,EAEAE,wBAAyB,SAAStR,GAC9BvuB,EAAEuuB,GAAM7jB,KAAK,KAAKwO,MAAK,WACnB,IACI0f,EAAWl1B,EAAG25B,EAAG75B,EADjB4jB,EAAarnB,KAAKqnB,WAElB0Y,EAAqB,GAEzB,IAAKp8B,EAAI,EAAG25B,EAAIjW,EAAWvlB,OAAQ6B,EAAI25B,EAAG35B,IAEtCF,GADAo1B,EAAYxR,EAAW1jB,IACNqc,SAEb6Y,EAAUC,WAAa,OAAOnjB,KAAKlS,KACnCzD,KAAKof,aAAa,YAAc3b,EAAMo1B,EAAUxlB,OAChD0sB,EAAmB3+B,KAAKqC,IAIhC,IAAKE,EAAI,EAAG25B,EAAIyC,EAAmBj+B,OAAQ6B,EAAI25B,EAAG35B,IAC9C3D,KAAKq5B,gBAAgB0G,EAAmBp8B,GAEhD,GACJ,EAEAkV,UAAW,SAAS3B,EAAMsX,EAAMztB,GAC5B,IACIwd,EADU5d,EAAM4B,QAAQE,QACT8b,KACfgK,EAAIxnB,GAAW,CAAC,EAChB2U,EAAa6S,EAAE7S,WA+BnB,OA7BAwB,EAAOY,EAAWqnB,eAAejoB,GAE7BgoB,EAAW3W,EAAE1W,UACbqF,EAAOqR,EAAE1W,OAAOqF,IAASA,GAE7BsX,EAAKnJ,UAAYnO,EAEbxB,GACAA,EAAWsqB,YAAYxR,GAGvBjQ,IAEArV,EAAIsnB,UAAUhC,GAEd1W,EAAW4nB,mBAAmBlR,IAGlC1W,EAAWgoB,wBAAwBtR,GAEnC1W,EAAWynB,mBAAmB/Q,GAE9B1W,EAAW2nB,sBAAsBjR,GAEjC1W,EAAWsnB,sBAAsB5Q,GAGjCvuB,EAAE,QAASuuB,GAAMrU,SAAS,WAEnBqU,CACX,EAEAzW,WAAY,SAASyW,EAAMztB,GACvB,IAAIykB,EAAS,GACT9P,EAAa3U,GAAWA,EAAQ2U,WAEpC,SAASuqB,EAAe5Y,GACpB,OAAOpnB,EAAEu1B,KAAKnO,GAAY,SAASjN,GAC/B,MAAoB,SAAbA,EAAK3W,IAChB,GACJ,CAEA,SAASy8B,EAASzP,EAAMxU,GACpBuJ,EAAOpkB,KAAK,IAAM6a,GAClB7B,EAAKqW,GACLjL,EAAOpkB,KAAK,IAChB,CAEA,IAAI++B,EAAS,CACTzmB,OAAQ,CACJ0mB,MAAO,SAAS3P,GAAQyP,EAASzP,EAAM,SAAW,EAClD4P,IAAK,WAAa7a,EAAOpkB,KAAK,YAAc,GAEhD,WAAY,CACRg/B,MAAO,SAAS3P,GAAQyP,EAASzP,EAAM,SAAW,EAClD4P,IAAK,WAAa7a,EAAOpkB,KAAK,aAAc,EAC5Ck/B,cAAc,GAElB3tB,KAAM,CACF4tB,aAAa,EACbvuB,UAAU,EACVouB,MAAO,SAAS3P,GACZ,IAAIxkB,EAAQwkB,EAAKxkB,MAGbu0B,EAAqBP,EADRQ,EAAoBhQ,IAGjC+P,EAAmB1+B,SACnB0jB,EAAOpkB,KAAK,SAAUgZ,EAAKqW,EAAM+P,GAAqBhb,EAAOpkB,KAAK,MAG1C,aAAxB6K,EAAMy0B,gBACNlb,EAAOpkB,KAAK,OAGhB,IAAIu/B,EAAO,GASX,GARI10B,EAAMqoB,OACNqM,EAAKv/B,KAAK,UAAY8H,EAAImrB,MAAMpoB,EAAMqoB,OAAS,KAG/CroB,EAAM20B,YACND,EAAKv/B,KAAK,SAAW6K,EAAM20B,WAAa,KAGxC30B,EAAMJ,SAAU,CAChB,IAAIg1B,EAAO5gC,EAAE2D,QAAQqI,EAAMJ,SAAUyyB,GACrCqC,EAAKv/B,KAAK,SAAWy/B,EAAO,IAChC,CAGA,IAAIC,EAAe,GACfC,EAAuB,CAAC,kBAAmB,QAAS,QAExD,IAAK,IAAIp9B,EAAI,EAAGA,EAAIsI,EAAMnK,OAAQ6B,IAAK,CACnC,IAAI6Y,EAAcvQ,EAAMtI,GAEpBo9B,EAAqB9nB,QAAO+nB,GAAQxkB,EAAYykB,WAAWD,KAAOl/B,QAAU,GAC5Eg/B,EAAa1/B,KAAK,GAAGob,MAAgBvQ,EAAMuQ,KAEnD,CAEIskB,EAAah/B,QACb6+B,EAAKv/B,KAAK,UAAY0/B,EAAanlB,KAAK,KAAO,KAG/CglB,EAAK7+B,QACL0jB,EAAOpkB,KAAK,SAAWu/B,EAAKhlB,KAAK,KAAO,IAEhD,EACA0kB,IAAK,SAAS5P,GACV,IAAIxkB,EAAQwkB,EAAKxkB,OAEbA,EAAMqoB,OAASroB,EAAM20B,YAAc30B,EAAMJ,WACzC2Z,EAAOpkB,KAAK,WAGY,aAAxB6K,EAAMy0B,gBACNlb,EAAOpkB,KAAK,QAGZ6+B,EAAeQ,EAAoBhQ,IAAO3uB,QAC1C0jB,EAAOpkB,KAAK,UAEpB,GAEJ8/B,OAAQ,CACJlvB,UAAU,EACVouB,MAAO,SAAS3P,GAAQyP,EAASzP,EAAM,IAAM,EAC7C4P,IAAK,WAAa7a,EAAOpkB,KAAK,OAAS,GAE3C+/B,GAAI,CACAnvB,UAAU,EACVouB,MAAO,SAAS3P,GAAQyP,EAASzP,EAAM,IAAM,EAC7C4P,IAAK,WAAa7a,EAAOpkB,KAAK,OAAS,GAE3CggC,EAAG,CACCpvB,UAAU,EACVouB,MAAO,SAAS3P,GAAQyP,EAASzP,EAAM,SAAW,EAClD4P,IAAK,WAAa7a,EAAOpkB,KAAK,YAAc,GAEhDuC,EAAG,CACCqO,UAAU,EACVouB,MAAO,SAAS3P,GAAQyP,EAASzP,EAAM,KAAO,EAC9C4P,IAAK,WAAa7a,EAAOpkB,KAAK,QAAU,GAE5CigC,EAAG,CACCrvB,UAAU,EACVouB,MAAO,SAAS3P,GACZjL,EAAOpkB,KAAK,SAEZ,IAAIimB,EAAaoZ,EAAoBhQ,GACjCxkB,EAAQhM,EAAEonB,GAAYpO,QAAO,SAAStV,EAAG29B,GAAQ,MAAoB,SAAbA,EAAK79B,IAAiB,IAAG,GACjF89B,EAAW,CAAEvhB,SAAU,QAAS3M,MAAO,8BAEvCpH,IACAs1B,EAASluB,MAAQpH,EAAMoH,MAClB,mBAAmBsC,KAAK4rB,EAASluB,SAClCkuB,EAASluB,MAAQ,6BAA+BkuB,EAASluB,OAE7DgU,EAAWma,OAAOvhC,EAAE2D,QAAQqI,EAAOob,GAAa,IAEpDA,EAAWjmB,KAAKmgC,GAEhBnnB,EAAKqW,EAAMpJ,GACX7B,EAAOpkB,KAAK,IAChB,EACAi/B,IAAK,WAAa7a,EAAOpkB,KAAK,UAAY,GAE9Cu/B,KAAM,CACFJ,aAAa,EACbvuB,UAAU,EACVouB,MAAO,SAAS3P,GACZjL,EAAOpkB,KAAK,iBAEZ,IAAIkzB,EAAQ7D,EAAKzb,aAAa,SAC1B6rB,EAAOvC,EAAiB7N,EAAKzb,aAAa,SAC1CysB,EAAOhR,EAAKzb,aAAa,QAEzBsf,IACA9O,EAAOpkB,KAAK,UACZokB,EAAOpkB,KAAK8H,EAAImrB,MAAMC,IACtB9O,EAAOpkB,KAAK,MAGZqgC,IACAjc,EAAOpkB,KAAK,gBACZokB,EAAOpkB,KAAKqgC,GACZjc,EAAOpkB,KAAK,MAGZy/B,IACArb,EAAOpkB,KAAK,cACZokB,EAAOpkB,KAAKy/B,GACZrb,EAAOpkB,KAAK,MAGhBokB,EAAOpkB,KAAK,KAChB,EACAi/B,IAAK,WACD7a,EAAOpkB,KAAK,UAChB,IAiDR,SAASsgC,EAAU3I,GACf,IACIp1B,EADAg+B,EAtCR,SAAuB5I,GACnB,IAEIiC,EACA4G,EAAUvuB,EAHVqF,EAAO/X,EAAM+X,KACbrG,EAAMqG,EAAKqgB,GAGX4I,EAAa,GAIjB,IAFAhD,EAAekD,UAAY,EAGvB7G,EAAQ2D,EAAehqB,KAAKtC,IAM5BuvB,EAAWlpB,EAAKsiB,EAAM,GAAGp0B,eACzByM,EAAQqF,EAAKsiB,EAAM,IAEH,oBAAZ4G,GAA8C,gBAAZA,IAIlCA,EAASxY,QAAQ,UAAY,EAC7B/V,EAAQnK,EAAImrB,MAAMhhB,GACXuuB,EAASxY,QAAQ,SAAW,EACnC/V,EAAQA,EAAM1M,QAAQ43B,EAAS,KACxB,WAAW5oB,KAAKtC,KACvBA,EAAQA,EAAM1M,QAAQ43B,EAAS,KAGnCoD,EAAWvgC,KAAK,CAAEwgC,SAAUA,EAAUvuB,MAAOA,KAGjD,OAAOsuB,CACX,CAGqBG,CAAc/I,GAG/B,IAAKp1B,EAAI,EAAGA,EAAIg+B,EAAW7/B,OAAQ6B,IAC/B6hB,EAAOpkB,KAAKugC,EAAWh+B,GAAGi+B,UAC1Bpc,EAAOpkB,KAAK,KACZokB,EAAOpkB,KAAKugC,EAAWh+B,GAAG0P,OAC1BmS,EAAOpkB,KAAK,IAEpB,CAEA,SAASq/B,EAAoBhQ,GACzB,IAEIoI,EAAWl1B,EAAG25B,EACd75B,EAAM4P,EAAOylB,EAHbtT,EAAS,GACT6B,EAAaoJ,EAAKpJ,WAItB,IAAK1jB,EAAI,EAAG25B,EAAIjW,EAAWvlB,OAAQ6B,EAAI25B,EAAG35B,IAGtCF,GAFAo1B,EAAYxR,EAAW1jB,IAENqc,SACjB3M,EAAQwlB,EAAUxlB,MAClBylB,EAAYD,EAAUC,UAGV,SAARr1B,GAAmB,UAAWgtB,GAAQA,EAAKpd,OAE5B,QAAR5P,GAA2B,QAAT4P,EADzBylB,GAAY,EAGG,SAARr1B,GAAoB4P,EAEpBurB,EAAWjpB,KAAKlS,IAER,YAARA,GAEQ,WAARA,GAEQ,SAARA,GAAmByF,EAAI6a,GAAG0M,EAAM,OAExB,SAARhtB,GAAmByF,EAAI6a,GAAG0M,EAAM,OAAkB,KAATpd,GAEzC5P,EAAK2lB,QAAQ,SAAW,EAT/B0P,GAAY,EAWL+F,EAAWlpB,KAAKlS,GACvBq1B,IAAc/3B,EAAQ+G,QACP,aAARrE,GAAgC,aAAT4P,IAAyBnK,EAAI6a,GAAG0M,EAAM,OAASvnB,EAAI6a,GAAG0M,EAAM,SAC1FqI,GAAY,GAhBZA,GAAY,EAmBZA,GACAtT,EAAOpkB,KAAKy3B,GAIpB,OAAOrT,CACX,CAEA,SAASpL,EAAKqW,EAAMpJ,GAChB,IAAI1jB,EAAG25B,EAAGzE,EAAWp1B,EAAM4P,EAI3B,GAFAgU,EAAaA,GAAcoZ,EAAoBhQ,GAE3CvnB,EAAI6a,GAAG0M,EAAM,OAAQ,CACrB,IAAItiB,EAAQsiB,EAAKxkB,MAAMkC,MACnBC,EAASqiB,EAAKxkB,MAAMmC,OACpB2zB,EAAQ9hC,EAAEwwB,GAEVtiB,GAASswB,EAAQ9oB,KAAKxH,KACtB4zB,EAAM3nB,KAAK,QAAS8O,SAAS/a,EAAO,KACpCjF,EAAIuwB,QAAQhJ,EAAM,CAAEtiB,MAAOlM,KAG3BmM,GAAUqwB,EAAQ9oB,KAAKvH,KACvB2zB,EAAM3nB,KAAK,SAAU8O,SAAS9a,EAAQ,KACtClF,EAAIuwB,QAAQhJ,EAAM,CAAEriB,OAAQnM,IAEpC,CAEA,GAAKolB,EAAWvlB,OAUhB,IAAK6B,EAAI,EAAG25B,EAAIjW,EAAWvlB,OAAQ6B,EAAI25B,EAAG35B,IAEtCF,GADAo1B,EAAYxR,EAAW1jB,IACNqc,SACjB3M,EAAQwlB,EAAUxlB,MAEN,SAAR5P,GAA4B,WAAT4P,IAIvB5P,EAAOA,EAAKkD,QAAQk4B,EAAY,IAEhCrZ,EAAOpkB,KAAK,KACZokB,EAAOpkB,KAAKqC,GACZ+hB,EAAOpkB,KAAK,MAEA,SAARqC,EACAi+B,EAAUruB,GAASod,EAAKxkB,MAAM8sB,SACf,OAARt1B,GAAyB,QAARA,EACxB+hB,EAAOpkB,KAAKT,EAAMqhC,WAAWvR,EAAKzb,aAAavR,EAAM,KAErD+hB,EAAOpkB,KAAK8H,EAAIonB,UAAU7sB,GAAQA,EAAO4P,GAG7CmS,EAAOpkB,KAAK,KAEpB,CAEA,SAASynB,EAAS4H,EAAMwR,EAAM3B,GAC1B,IAAK,IAAI4B,EAAYzR,EAAKE,WAAYuR,EAAWA,EAAYA,EAAUrR,YACnE4E,EAAMyM,EAAWD,EAAM3B,EAE/B,CAEA,SAASltB,EAAKqd,GACV,OAAOA,EAAKzP,UAAUra,QAAQ,UAAW,GAC7C,CAsBA,SAAS8uB,EAAMhF,EAAMwR,EAAM3B,GACvB,IACIrb,EAASkd,EACTxkB,EAAQtK,EAAO+uB,EAAUC,EAFzBthB,EAAW0P,EAAK1P,SAIpB,GAAIrL,GAAc3O,EAAO+X,WAAWugB,UAAU5O,GAC1CjL,EAAOpkB,KAAKsU,EAAW4sB,UAAU7R,SAC9B,GAAgB,GAAZ1P,EAAe,CAItB,GAHAkE,EAAU/b,EAAIzF,KAAKgtB,IACnB4R,EAASpiC,EAAEwwB,IAEAzN,SAAS,oCAAsCqf,EAAOrf,SAAS,mCAAqCqf,EAAOrf,SAAS,+BAC3H,OAGJ,IAAKiC,GAAW/b,EAAIisB,cAAc1E,GAC9B,OAGJ,IAAK1vB,EAAQ+G,UAAuB,UAAXmd,GAAkC,YAAXA,GAC5C,OAKJ,GAFAkd,EAAShC,EAAOlb,GAEJ,CACR,GAAIkd,EAAO5B,aACPx/B,EAAQkR,cA2ExB,SAAwBwe,GACpB,OAAkC,IAA3BA,EAAKpJ,WAAWvlB,MAC3B,CA5EgBygC,CAAe9R,GAEf,YADI5H,EAAS4H,GAAM,EAAO0R,EAAO7B,cAIrC,QAA8B,IAAnB6B,EAAOnwB,UACbjR,EAAQiR,SAAWmwB,EAAOnwB,SAI3B,OAHAmwB,EAAO/B,MAAM3P,GACb5H,EAAS4H,GAAM,EAAO0R,EAAO7B,mBAC7B6B,EAAO9B,IAAI5P,EAGnB,CAEAjL,EAAOpkB,KAAK,KACZokB,EAAOpkB,KAAK6jB,GAEZ7K,EAAKqW,GAEDvnB,EAAI6f,MAAM9D,GACVO,EAAOpkB,KAAK,QAEZokB,EAAOpkB,KAAK,KACZynB,EAAS4H,EAAMwR,GAAQ/4B,EAAI6a,GAAG0M,EAAM,QACpCjL,EAAOpkB,KAAK,MACZokB,EAAOpkB,KAAK6jB,GACZO,EAAOpkB,KAAK,KAEpB,MAAO,GAAgB,GAAZ2f,EAAe,CACtB,GA7ER,SAAwB0P,GACpB,GAAIvnB,EAAI6rB,MAAMtE,GAAO,CACjB,EAAG,CAGC,GAFAA,EAAOA,EAAKrE,WAERljB,EAAI6a,GAAG0M,EA5etB,OA4e8D,IAA3BA,EAAK8B,WAAWzwB,OACpC,OAAO,EAGX,GAA+B,IAA3B2uB,EAAK8B,WAAWzwB,OAChB,OAAO,CAEf,QAAUoH,EAAIstB,QAAQ/F,IAEtB,OAAO,CACX,CAEA,OAAO,CACX,CA2DY+R,CAAe/R,GAEf,YADAjL,EAAOpkB,KAAK,UAIhBiS,EAAQD,EAAKqd,IAERwR,GAAQhD,IACTthB,EAAS8S,EAAKrE,YACdgW,EAAW3R,EAAKiB,mBAGX0Q,GAAYl5B,EAAI2tB,SAASlZ,GAAUA,EAAS8S,GAAMiB,iBAGlD0Q,GAAmC,KAAvBA,EAAS/c,YAAoBnc,EAAIstB,QAAQ4L,KAElD/uB,EADAtS,EAAQmR,QACAmB,EAAM1M,QAAQ,iBAAkB,KAEhC0M,EAAM1M,QAAQ,kBAAmB,KAIjD0M,EAAQA,EAAM1M,QAAQ,KAAM,MAGhC6e,EAAOpkB,KAAKk/B,EAAejtB,EAAQnK,EAAIwL,OAAOrB,EAAOtS,GAEzD,MAAuB,GAAZggB,GACPyE,EAAOpkB,KAAK,aACZokB,EAAOpkB,KAAKqvB,EAAKpU,MACjBmJ,EAAOpkB,KAAK,QACO,GAAZ2f,IACH0P,EAAKpU,KAAK+M,QAAQ,WAAa,GAC/B5D,EAAOpkB,KAAK,WACZokB,EAAOpkB,KAAKqvB,EAAKpU,MACjBmJ,EAAOpkB,KAAK,YAEZokB,EAAOpkB,KAAK,MACZokB,EAAOpkB,KAAKqvB,EAAKpU,MACjBmJ,EAAOpkB,KAAK,MAGxB,CAaA,SAASqhC,IACD9hC,EAAMu+B,WAAWn+B,EAAQ8Q,UACzB2T,EAASzkB,EAAQ8Q,OAAO2T,IAAWA,EAE3C,CAEA,OAtTA2a,EAAOuC,OAASvC,EAAO,iBAIQ,KAF/Bp/B,EAAUA,GAAW,CAAC,GAEHiR,WACfjR,EAAQiR,UAAW,GAoSvB,SAAkBwc,GACd,IAAImU,EAAgBnU,EAAK+D,WAAWzwB,OAGpC,OAFgB6gC,GAA6C,GAA5BnU,EAAKmC,WAAW5P,WAEX,GAAjB4hB,GAAwC,GAAjBA,GAAsBz5B,EAAIisB,cAAc3G,EAAKwH,WAC7F,CAQI4M,CAASpU,IACThJ,EAAStc,EAAIwL,OAAOtB,EAAKob,EAAKmC,YAAYhqB,QAAQ,iBAAkB,KAAM5F,GAC1E0hC,IAEOjd,IAGXqD,EAAS2F,GACThJ,EAASA,EAAO7J,KAAK,IACrB8mB,IAGuD,KAAnDjd,EAAO7e,QAAQ63B,EAAM,IAAI73B,QAAQ+3B,EAAU,IACpC,GAGJlZ,EACX,GAIJhlB,EAAOuG,EAAQ,CACX+Q,WAAYA,GAGf,CArqBD,CAqqBG5V,OAAOvB,MAAM0uB,QAEhB,SAAUpvB,GAGN,IAAIU,EAAQuB,OAAOvB,MACfwB,EAAQxB,EAAMwB,MACd3B,EAASP,EAAEO,OACXuG,EAASpG,EAAM0B,GAAG4G,OAClBxG,EAAU9B,EAAM4B,QAAQE,QACxByG,EAAMnC,EAAOoC,IACbqoB,EAAgBtoB,EAAIsoB,cACpBG,EAAazoB,EAAIyoB,WACjBE,EAAsB3oB,EAAI2oB,oBAC1BS,EAAgBppB,EAAIopB,cACpB9B,EAAYtnB,EAAIsnB,UAEpBzZ,EAAiB,CACjB8rB,oBAAqB,SAAS3gC,GAC1B,GAAKA,EAIL,MAAM,iBAAkBA,EAIjBA,EAAOmU,eAHH,IAAIysB,EAAa5gC,EAAOwF,SAIvC,EAEAq7B,mBAAoB,SAASluB,GACzB,IAAImuB,EAAgBxuB,EAAWyuB,kBAAkBpuB,GACjD,OAAOkC,EAAeC,sBAAsBgsB,EAChD,EAEAhsB,sBAAuB,SAAStP,GAC5B,OAAOqP,EAAe8rB,oBAAoB35B,EAAImqB,mBAAmB3rB,GACrE,GAGAw7B,EAAW/gC,EAAM3B,OAAO,CACxBM,KAAM,SAAS0V,GACXvW,EAAEO,OAAOR,KAAM,CACXkzB,cAAe1c,EACfC,eAAgBD,EAChBE,aAAcF,EACdmB,wBAAyBnB,EACzBG,YAAa,EACbC,UAAW,EACX0B,WAAW,GAEnB,EAGAzB,SAAU,SAAS4Z,EAAM7P,GACrB5gB,KAAKyW,eAAiBga,EACtBzwB,KAAK2W,YAAciK,EACnBuiB,EAAsBnjC,MACtBojC,EAAepjC,MAAM,EACzB,EAEAqjC,OAAQ,SAAS5S,EAAM7P,GACnB5gB,KAAK0W,aAAe+Z,EACpBzwB,KAAK4W,UAAYgK,EACjBuiB,EAAsBnjC,MACtBojC,EAAepjC,MAAM,EACzB,EAEAsjC,eAAgB,SAAS7S,GACrBzwB,KAAK6W,SAAS4Z,EAAKrE,WAAYoF,EAAcf,GACjD,EAEA8S,cAAe,SAAS9S,GACpBzwB,KAAK6W,SAAS4Z,EAAKrE,WAAYoF,EAAcf,GAAQ,EACzD,EAEA+S,aAAc,SAAS/S,GACnBzwB,KAAKqjC,OAAO5S,EAAKrE,WAAYoF,EAAcf,GAC/C,EAEAgT,YAAa,SAAShT,GAClBzwB,KAAKqjC,OAAO5S,EAAKrE,WAAYoF,EAAcf,GAAQ,EACvD,EAEAnO,WAAY,SAASmO,GACjBzwB,KAAKsjC,eAAe7S,GACpBzwB,KAAKyjC,YAAYhT,EACrB,EAEAiT,mBAAoB,SAASjT,GACzBzwB,KAAK6W,SAAS4Z,EAAM,GACpBzwB,KAAKqjC,OAAO5S,EAAMA,EAAuB,IAAlBA,EAAK1P,SAAiB,aAAe,aAAajf,OAC7E,EAEAgV,SAAU,SAASsgB,GACf,IAAIpuB,EAAOhJ,KAEPo3B,EACApuB,EAAKq6B,OAAOr6B,EAAKyN,eAAgBzN,EAAK2N,aAEtC3N,EAAK6N,SAAS7N,EAAK0N,aAAc1N,EAAK4N,UAE9C,EAIA+sB,eAAgB,WACZ,IAAI36B,EAAOhJ,KACP6U,EAAQ7L,EAAK46B,aAEb56B,EAAKyN,gBAAkBzN,EAAK2O,yBAC5B3O,EAAKu6B,cAAc1R,EAAoB7oB,EAAK2O,wBAAyB3O,EAAKyN,iBAG9EzN,EAAK8N,UAAS,GAEd,SAAU+sB,EAAc9R,GACpB,KAAOA,EAASlR,QACRkR,EAAS+R,oBACTD,EAAc9R,EAASgS,sBAEvBhS,EAASza,QAGpB,CARD,CAQG,IAAI0sB,EAAcnvB,GACzB,EAEAmD,cAAe,WAEX,IAAItQ,EAAW8M,EAAWyuB,kBAAkBjjC,MAC5C,OAAO,SAAUikC,EAAalS,GAGtB,IAFA,IAAItB,EAAMyT,EAAOx8B,EAASy8B,yBAEnB1T,EAAOsB,EAASlR,QACnB4P,EAAOA,EAAKkC,WAAWZ,EAAS+R,qBAE5B/R,EAAS+R,qBACTrT,EAAKpR,YAAY4kB,EAAalS,EAASgS,uBAG3CG,EAAK7kB,YAAYoR,GAGrB,OAAOyT,CACd,CAdM,CAcJ,IAAIF,EAAchkC,MACzB,EAEAokC,gBAAiB,WACb,IAAIp7B,EAAOhJ,KACP6U,EAAQ7L,EAAK46B,aAEb56B,EAAKyN,gBAAkBzN,EAAK2O,yBAC5B3O,EAAKu6B,cAAc1R,EAAoB7oB,EAAK2O,wBAAyB3O,EAAKyN,iBAG9EzN,EAAK8N,UAAS,GAEd,IAAIpP,EAAW8M,EAAWyuB,kBAAkBj6B,GAE5C,OAAO,SAAUq7B,EAAetS,GAG5B,IAFA,IAAItB,EAAMyT,EAAOx8B,EAASy8B,yBAEnB1T,EAAOsB,EAASlR,QACfkR,EAAS+R,qBACTrT,EAAOA,EAAKkC,WAAU,IACjBtT,YAAYglB,EAAetS,EAASgS,uBAEzChS,EAASza,OAAOtO,EAAKs7B,eAGzBJ,EAAK7kB,YAAYoR,GAGrB,OAAOyT,CACV,CAfM,CAeJ,IAAIF,EAAcnvB,GACzB,EAEA0vB,WAAY,SAAS9T,GACjB,IAAIznB,EAAOhJ,KAEP2xB,EAAW3oB,EAAKyN,iBACZzN,EAAK2N,aAAe3N,EAAKyN,eAAeuK,UAAUlf,QAClDoH,EAAIspB,cAAcxpB,EAAKyN,eAAgBzN,EAAK2N,aAGhDzN,EAAImU,YAAYoT,EAAMznB,EAAKyN,iBAE3BvN,EAAIgvB,SAASlvB,EAAKyN,eAAgBga,EAAMznB,EAAK2N,aAGjD3N,EAAK6N,SAAS7N,EAAKyN,eAAgBzN,EAAK2N,YAC5C,EAEAitB,WAAY,WAER,OAAO3jC,EAAEO,OAAO,IAAI0iC,EAASljC,KAAKkzB,eAAgB,CAC9Czc,eAAgBzW,KAAKyW,eACrBC,aAAc1W,KAAK0W,aACnBiB,wBAAyB3X,KAAK2X,wBAC9BhB,YAAa3W,KAAK2W,YAClBC,UAAW5W,KAAK4W,UAChB0B,UAAWtY,KAAKsY,UAEhBgsB,cAAetkC,MAEvB,EAGAy0B,SAAU,WACN,IAAI+P,EAAgBxkC,KAAKyW,eAAeuJ,SACpCykB,EAAczkC,KAAK0W,aAAasJ,SAEpC,MAAO,CAAkB,SAAjBwkB,EAA2BxkC,KAAKyW,eAAeuK,UAAYwjB,EAAe,IAAKxkC,KAAK2W,YAAa,OAClF,SAAf8tB,EAAyBzkC,KAAK0W,aAAasK,UAAYyjB,EAAa,IAAKzkC,KAAK4W,UAAW,KAAK+E,KAAK,GAC/G,IA6DJ,SAASynB,EAAevuB,EAAOuiB,IAC3B,SAAwBviB,GACpB,IACI,OAxDZ,SAA2BurB,EAAOC,EAAK1pB,EAAaC,GAChD,GAAIwpB,GAASC,EACT,OAAOzpB,EAAYD,EAKvB,IADA,IAAIe,EAAY2oB,EACT3oB,GAAaA,EAAU0U,YAAcgU,GACxC1oB,EAAYA,EAAU0U,WAG1B,GAAI1U,EACA,OAAO8Z,EAAc9Z,GAAaf,EAKtC,IADAe,EAAY0oB,EACL1oB,GAAaA,EAAU0U,YAAciU,GACxC3oB,EAAYA,EAAU0U,WAG1B,GAAI1U,EACA,OAAOd,EAAY4a,EAAc9Z,GAAa,EAOlD,IAHA,IAAI8W,EAAOtlB,EAAI4wB,eAAesG,EAAOC,GACjCqE,EAAgBtE,EAEbsE,GAAiBA,EAActY,YAAcoC,GAChDkW,EAAgBA,EAActY,WAG7BsY,IACDA,EAAgBlW,GAIpB,IADA,IAAImW,EAActE,EACXsE,GAAeA,EAAYvY,YAAcoC,GAC5CmW,EAAcA,EAAYvY,WAO9B,OAJKuY,IACDA,EAAcnW,GAGdkW,GAAiBC,EACV,EAGJnT,EAAcmT,GAAenT,EAAckT,EACtD,CAKmBE,CAAkB/vB,EAAM4B,eAAgB5B,EAAM6B,aAAc7B,EAAM8B,YAAa9B,EAAM+B,WAAa,CAC7G,CAAE,MAAOiuB,GAEL,OAAO,CACX,CACJ,EAEIC,CAAejwB,KACXuiB,GACAviB,EAAM8C,wBAA0B9C,EAAM6B,aAAe7B,EAAM4B,eAC3D5B,EAAM+B,UAAY/B,EAAM8B,cAExB9B,EAAM8C,wBAA0B9C,EAAM4B,eAAiB5B,EAAM6B,aAC7D7B,EAAM8B,YAAc9B,EAAM+B,WAG9B/B,EAAMyD,WAAY,EAE1B,CAEA,SAAS6qB,EAAsBtuB,GAC3BA,EAAMyD,UAAYzD,EAAM4B,gBAAkB5B,EAAM6B,cAAgB7B,EAAM8B,aAAe9B,EAAM+B,UAG3F,IADA,IAAI6Z,EAAO5b,EAAM4B,eACVga,GAAQA,GAAQ5b,EAAM6B,eAAiBxN,EAAI0oB,aAAanB,EAAM5b,EAAM6B,eACvE+Z,EAAOA,EAAKrE,WAGhBvX,EAAM8C,wBAA0B8Y,CACpC,CA1FAyS,EAAS6B,SAAW,SAAStU,GACzB,OAAO,IAAIyS,EAASzS,EAAKyC,cAC7B,EA0FA,IAAI8Q,EAAgB7hC,EAAM3B,OAAO,CAC7BM,KAAM,SAAS+T,GAQX,GAPA5U,EAAEO,OAAOR,KAAM,CACX6U,MAAOA,EACPmwB,SAAU,KACVC,MAAO,KACPC,KAAM,QAGNrwB,EAAMyD,UAAV,CAIA,IAAIkW,EAAO3Z,EAAM8C,wBAEjB3X,KAAKilC,MAAQpwB,EAAM4B,gBAAkB+X,GAASmD,EAAW9c,EAAM4B,gBAE/Dob,EAAoBrD,EAAM3Z,EAAM4B,gBADhC5B,EAAM4B,eAAe8b,WAAW1d,EAAM8B,aAGtC3W,KAAKklC,KAAOrwB,EAAM6B,cAAgB8X,GAASmD,EAAW9c,EAAM6B,cAE5Dmb,EAAoBrD,EAAM3Z,EAAM6B,cAAcma,YAD9Chc,EAAM6B,aAAa6b,WAAW1d,EAAM+B,UATpC,CAWJ,EAEAuuB,QAAS,WACL,QAASnlC,KAAKilC,KAClB,EAEApkB,KAAM,WACF,IAAI7X,EAAOhJ,KACPulB,EAAUvc,EAAKg8B,SAAWh8B,EAAKi8B,MAgBnC,OAfAj8B,EAAKi8B,MAAQj8B,EAAKg8B,UAAYh8B,EAAKg8B,SAASnU,aAAe7nB,EAAKk8B,KAChEl8B,EAAKg8B,SAASnU,YAAc,KAExBc,EAAW3oB,EAAKg8B,YACZh8B,EAAK6L,MAAM6B,cAAgB1N,EAAKg8B,WAChCzf,EAAUA,EAAQoN,WAAU,IACpBE,WAAW7pB,EAAK6L,MAAM+B,UAAW2O,EAAQzjB,OAASkH,EAAK6L,MAAM+B,WAGrE5N,EAAK6L,MAAM4B,gBAAkBzN,EAAKg8B,WAClCzf,EAAUA,EAAQoN,WAAU,IACpBE,WAAW,EAAG7pB,EAAK6L,MAAM8B,cAIlC4O,CACX,EAEA6f,SAAU,SAASC,GACf,IACI9f,EADAvc,EAAOhJ,KASX,KALIgJ,EAAKg8B,SAAWh8B,EAAKi8B,MACrBj8B,EAAKi8B,MAAQj8B,EAAKg8B,UAAYh8B,EAAKg8B,SAASnU,aAAe7nB,EAAKk8B,KAAOl8B,EAAKg8B,SAASnU,YAAc,KAIhGtL,EAHIvc,EAAKg8B,UAIRh8B,EAAK86B,oBACL96B,EAAK+6B,qBAAqBqB,SAASC,GAEnCA,EAAS9f,GAIjB,OAAOA,CACX,EAEAjO,OAAQ,SAASgtB,GACb,IAGIlE,EAAOC,EAAKiF,EAHZt8B,EAAOhJ,KACPulC,EAAmBv8B,EAAK6L,MAAM4B,gBAAkBzN,EAAKg8B,SACrDQ,EAAiBx8B,EAAK6L,MAAM6B,cAAgB1N,EAAKg8B,SAGrD,GAAIrT,EAAW3oB,EAAKg8B,YAAcO,GAAoBC,GAClDpF,EAAQmF,EAAmBv8B,EAAK6L,MAAM8B,YAAc,EAEpD2uB,GADAjF,EAAMmF,EAAiBx8B,EAAK6L,MAAM+B,UAAY5N,EAAKg8B,SAASljC,QAC9Cs+B,EAEVkE,IAAkBiB,GAAoBC,KAClCx8B,EAAKg8B,UAAYV,EAAc7tB,gBAAkB2pB,GAASkE,EAAc3tB,cACxE2tB,EAAc3tB,aAAe2uB,GAG7Bt8B,EAAKg8B,UAAYV,EAAc5tB,cAAgB2pB,GAAOiE,EAAc1tB,YACpE0tB,EAAc1tB,WAAa0uB,IAInCt8B,EAAKg8B,SAASnS,WAAWuN,EAAOkF,OAC7B,CACH,IAAI3nB,EAAS3U,EAAKg8B,SAAS5Y,WAE3B,GAAIkY,IAAkBt7B,EAAK6L,MAAM4B,gBAAkBkH,GAAU3U,EAAK6L,MAAM6B,cAAgBiH,GAAS,CAC7F,IAAI8nB,EAAYjU,EAAcxoB,EAAKg8B,UAE/BrnB,GAAU2mB,EAAc7tB,gBAAkBgvB,GAAanB,EAAc3tB,cACrE2tB,EAAc3tB,aAAe,GAG7BgH,GAAU2mB,EAAc5tB,cAAgB+uB,EAAYnB,EAAc1tB,YAClE0tB,EAAc1tB,WAAa,EAEnC,CAEA1N,EAAIoO,OAAOtO,EAAKg8B,SACpB,CACJ,EAEAlB,kBAAmB,WACf,OAAQnS,EAAW3xB,KAAKglC,YACvB97B,EAAIsQ,iBAAiBxZ,KAAKglC,SAAUhlC,KAAK6U,MAAM4B,iBAC5CvN,EAAIsQ,iBAAiBxZ,KAAKglC,SAAUhlC,KAAK6U,MAAM6B,cACvD,EAEAqtB,mBAAoB,WAChB,OAAO,IAAIC,EAAchkC,KAAK0lC,cAClC,EAEAA,YAAa,WACT,IAAI18B,EAAOhJ,KACP2lC,EAAW38B,EAAK6L,MAAM+uB,aAS1B,OARA+B,EAASjC,mBAAmB16B,EAAKg8B,UAC7B97B,EAAIsQ,iBAAiBxQ,EAAKg8B,SAAUh8B,EAAK6L,MAAM4B,iBAC/CkvB,EAAS9uB,SAAS7N,EAAK6L,MAAM4B,eAAgBzN,EAAK6L,MAAM8B,aAExDzN,EAAIsQ,iBAAiBxQ,EAAKg8B,SAAUh8B,EAAK6L,MAAM6B,eAC/CivB,EAAStC,OAAOr6B,EAAK6L,MAAM6B,aAAc1N,EAAK6L,MAAM+B,WAGjD+uB,CACX,IAGA7C,EAAe3gC,EAAM3B,OAAO,CAC5BM,KAAM,SAAS0V,GACXxW,KAAKkzB,cAAgB1c,EACrBxW,KAAKsW,WAAa,CACtB,EAEA4B,SAAU,SAASrD,GACf,IAAI+wB,EAAY5lC,KAAKkzB,cAAcne,KAAK8wB,kBAGxCC,EAAeF,EAAW/wB,GAAO,GACjCixB,EAAeF,EAAW/wB,GAAO,GAEjC+wB,EAAUG,QACd,EAEA9tB,gBAAiB,WACb,IAAI7B,EAAYpW,KAAKkzB,cAAc9c,UAEb,QAAlBA,EAAUtN,MACVsN,EAAU2S,OAElB,EAEAxS,WAAY,WACR,IAAIqvB,EAGS9L,EAFTjlB,EAAQ,IAAIquB,EAASljC,KAAKkzB,eAC1B9c,EAAYpW,KAAKkzB,cAAc9c,UAGnC,IAGI,KAFAwvB,EAAYxvB,EAAU7B,eACF+sB,KAAOsE,EAAUtE,KAAK,GAAKsE,EAAU7lB,iBAC7CmT,eAAiBlzB,KAAKkzB,cAC9B,OAAOre,CAEf,CAAE,MAAOgwB,GACL,OAAOhwB,CACX,CAEA,GAAsB,WAAlBuB,EAAUtN,KACV+L,EAAMyN,WAAWsjB,EAAUtE,KAAK,QAC7B,CACHxH,EA8CZ,SAA4B8L,GACxB,IAAIpnB,EAAOonB,EAAUI,YACjBC,EAAQL,EAAUI,YAKtB,OAHAxnB,EAAK1H,UAAS,GACdmvB,EAAMnvB,UAAS,GAER5N,EAAI4wB,eAAe8L,EAAU7lB,gBAAiBvB,EAAKuB,gBAAiBkmB,EAAMlmB,gBACrF,CAtD6BmmB,CAAmBN,GACpCO,EAAcP,EAAW/wB,EAAOilB,GAAgB,GAChDqM,EAAcP,EAAW/wB,EAAOilB,GAAgB,GAEX,GAAjCjlB,EAAM4B,eAAesK,UACrBlM,EAAMgC,SAAShC,EAAM6B,aAAc7B,EAAM8B,aAGV,GAA/B9B,EAAM6B,aAAaqK,UACnBlM,EAAMwuB,OAAOxuB,EAAM4B,eAAgB5B,EAAM+B,WAGe,IAAxDgvB,EAAUQ,iBAAiB,aAAcR,IACzC/wB,EAAMiC,UAAS,GAGnB,IAAIL,EAAiB5B,EAAM4B,eACvBC,EAAe7B,EAAM6B,aACrB3B,EAAO/U,KAAKkzB,cAAcne,KAE9B,KAAKF,EAAMyD,WAAmC,IAAtBzD,EAAM8B,aAAqB9B,EAAM+B,WAAa0b,EAAczd,EAAM6B,eACpFD,GAAkBC,GAAgBib,EAAWlb,IAAmBA,EAAe2V,YAAcrX,GAAO,CAItG,IAHA,IAAIsxB,GAAa,EACbC,GAAW,EAE0B,IAAlC9U,EAAc/a,IAAyBA,GAAkBA,EAAe2V,WAAWuE,YAAcla,GAAkB1B,GACtH0B,EAAiBA,EAAe2V,WAChCia,GAAa,EAGjB,KAAO7U,EAAc9a,IAAiB4b,EAAc5b,EAAa0V,YAAc,GAAK1V,GAAgBA,EAAa0V,WAAW4J,WAAatf,GAAgB3B,GACrJ2B,EAAeA,EAAa0V,WAC5Bka,GAAW,EAGX7vB,GAAkB1B,GAAQ2B,GAAgB3B,GAAQsxB,GAAcC,IAChEzxB,EAAMgC,SAASJ,EAAgB,GAC/B5B,EAAMwuB,OAAO3sB,EAAc4b,EAAcvd,IAEjD,CACJ,CAEA,OAAOF,CACX,IAaJ,SAASixB,EAAeF,EAAW/wB,EAAOurB,GAEtC,IAQImG,EARA7uB,EAAY7C,EAAMurB,EAAQ,iBAAmB,gBAC7Cxf,EAAS/L,EAAMurB,EAAQ,cAAgB,aACvCoG,EAAa,EACbC,EAAS9U,EAAWja,GACpBgvB,EAAaD,EAAS/uB,EAAYA,EAAU6a,WAAW3R,IAAW,KAClE+lB,EAAeF,EAAS/uB,EAAU0U,WAAa1U,EAC/ClB,EAAM3B,EAAMqe,cACZ0T,EAASpwB,EAAIzB,KAAK8wB,kBAII,GAAtBnuB,EAAUqJ,UAAuC,GAAtBrJ,EAAUqJ,WACrCylB,EAAa5lB,GAGZ+lB,IACDA,EAAenwB,EAAIzB,MAGoB,OAAvC4xB,EAAa3mB,SAASpZ,eACtBggC,EAAOC,kBAAkBF,GACzBC,EAAO9vB,UAAS,GAChB8uB,EAAUkB,YAAY1G,EAAQ,eAAiB,aAAcwG,KAG7DL,EAAaI,EAAarsB,aAAapR,EAAI+iB,OAAOzV,EAAK,KAAMkwB,GAE7DE,EAAOC,kBAAkBN,GACzBr9B,EAAIoO,OAAOivB,GACXK,EAAOxG,EAAQ,YAAc,WAAW,YAAaoG,GACrDI,EAAO9vB,UAAS,GAChB8uB,EAAUkB,YAAY1G,EAAQ,eAAiB,aAAcwG,GAErE,CAEA,SAAST,EAAcP,EAAW/wB,EAAOilB,EAAgBsG,GACrD,IAGI5a,EAAQ7H,EAAQiB,EAChBwjB,EAAUvhB,EACVyN,EAAM/mB,EALNg/B,EAAar9B,EAAI+iB,OAAOpX,EAAMqe,cAAe,KAC7C0T,EAAShB,EAAUI,YACnBe,EAAa3G,EAAQ,eAAiB,aAItC4G,GAAW,EAEfT,EAAWlhB,UAAY,SACvBuhB,EAAO9vB,SAASspB,GAEhBziB,EAASipB,EAAO7mB,gBAEX7W,EAAIsQ,iBAAiBsgB,EAAgBnc,KACtCA,EAASmc,GAKb,GACQkN,EACArpB,EAAOrD,aAAaisB,EAAYA,EAAW7U,kBAE3C/T,EAAO0B,YAAYknB,GACnBS,GAAW,GAEfJ,EAAOC,kBAAkBN,UACnB/gB,EAASohB,EAAOR,iBAAiBW,EAAYnB,IAAc,GAAKW,EAAW7U,iBAErF9S,EAAS2nB,EAAW1V,aAEL,GAAXrL,GAAgBmM,EAAW/S,IAC3BgoB,EAAOE,YAAY1G,EAAQ,aAAe,WAAYwF,GAEtD18B,EAAIoO,OAAOivB,GAEXjY,EAAO,CAAC1P,EAAQgoB,EAAOxzB,KAAKtR,UAE5BsgC,GAAYhC,GAASmG,EAAW7U,gBAChC7Q,EAAOuf,GAASmG,EAAW1V,YAEvBc,EAAW9Q,GACXyN,EAAO,CAACzN,EAAM,GACP8Q,EAAWyQ,GAClB9T,EAAO,CAAC8T,EAAUA,EAAStgC,SAE3ByF,EAAQiqB,EAAc+U,GAGlBjY,EADA3Q,EAAOkT,aAAetpB,GAASoW,EAAO4U,WAAWzwB,OAAS,EACnD,CAAC6b,EAAOkT,YAAa,GAErB,CAAClT,EAAQpW,IAIxB2B,EAAIoO,OAAOivB,IAGf1xB,EAAMurB,EAAQ,WAAa,UAAU5F,MAAM3lB,EAAOyZ,EACtD,CAEA,IAAI2Y,EAAkB9kC,EAAM3B,OAAO,CAC/BM,KAAM,SAAS+T,GACX7U,KAAKknC,UAAY,WACb,IAAIrf,EAAQ,GAgBZ,OAFA,IAAImc,EAAcnvB,GAAOuwB,UAZzB,SAAS+B,EAAM1W,GACX,GAAIvnB,EAAI6a,GAAG0M,EAAM,QAA4B,GAAjBA,EAAK1P,YAAmB7X,EAAImtB,aAAa5F,IAA2B,UAAlBA,EAAKzP,WAC/E6G,EAAMzmB,KAAKqvB,QAGX,IADAA,EAAOA,EAAKE,WACLF,GACH0W,EAAM1W,GACNA,EAAOA,EAAKI,WAGxB,IAIOhJ,CACX,CACJ,IAGAuf,EAA0BpD,EAAcxjC,OAAO,CAC/CsjC,kBAAmB,WACf,IAAIzE,EAAYt4B,EAAO+X,YAAc/X,EAAO+X,WAAWugB,UACvD,OAAOA,IAAcA,EAAUr/B,KAAKglC,WAAahB,EAAchjC,GAAG8iC,kBAAkB7iC,KAAKjB,KAC7F,EAEA+jC,mBAAoB,WAChB,OAAO,IAAIqD,EAAwBpnC,KAAK0lC,cAC5C,IAGA2B,EAA4BllC,EAAM3B,OAAO,CACzCM,KAAM,SAAS+T,GACX7U,KAAKknC,UAAY,WACb,IAAIrf,EAAQ,GACRwX,EAAYt4B,EAAO+X,YAAc/X,EAAO+X,WAAWugB,UAiBvD,OAFA,IAAI+H,EAAwBvyB,GAAOuwB,UAdnC,SAAS+B,EAAM1W,GACX,GAAI4O,IAAcA,EAAU5O,GACxB,GAAIvnB,EAAI6a,GAAG0M,EAAM,QAA4B,GAAjBA,EAAK1P,YAAmB7X,EAAImtB,aAAa5F,IAA2B,UAAlBA,EAAKzP,WAC/E6G,EAAMzmB,KAAKqvB,QAGX,IADAA,EAAOA,EAAKE,WACLF,GACH0W,EAAM1W,GACNA,EAAOA,EAAKI,WAI5B,IAIOhJ,CACX,CACJ,IAGAtnB,EAAe4B,EAAM3B,OAAO,CAC5BM,KAAM,SAAS+T,EAAOE,EAAMhU,GACxB,IAAIiI,EAAOhJ,KACXgJ,EAAK6L,MAAQA,EACb7L,EAAKs+B,SAAW9yB,EAAWyuB,kBAAkBpuB,GAC7C7L,EAAK+L,KAAOA,GAAQ/L,EAAKu+B,YAAY1yB,GACV,QAAvB3L,EAAIzF,KAAKuF,EAAK+L,QACd/L,EAAKs+B,SAAWt+B,EAAK+L,MAGzB/L,EAAKyN,eAAiBzN,EAAKw+B,WAAW3yB,EAAM4B,gBAC5CzN,EAAK0N,aAAe1N,EAAKw+B,WAAW3yB,EAAM6B,cAC1C1N,EAAK2N,YAAc3N,EAAK4X,OAAO/L,EAAM4B,eAAgB5B,EAAM8B,aAC3D3N,EAAK4N,UAAY5N,EAAK4X,OAAO/L,EAAM6B,aAAc7B,EAAM+B,WAEvD5N,EAAK0M,WAAa3U,GAAWA,EAAQ2U,WAEjC1M,EAAK0M,aACL1M,EAAKy+B,qBAAuB1gC,EAAO+X,WAAW4oB,iBAAiB1+B,EAAK+L,OAGxE/L,EAAKkO,KAAOlO,EAAK+L,KAAKsQ,UAElBrc,EAAK0M,aAAe1M,EAAKy+B,qBAAqB1e,OAC9ChiB,EAAO+X,WAAW6oB,kBAAkB3+B,EAAK+L,KAAM/L,EAAKy+B,qBAE5D,EAEAlgC,MAAO,SAASkpB,GAIZ,IAHA,IAAIjL,EAAS,EACToiB,EAAWnX,EAAK1P,SAEb0P,EAAOA,EAAKiB,iBAAiB,CAChC,IAAI3Q,EAAW0P,EAAK1P,SAEJ,GAAZA,GAAiB6mB,GAAY7mB,GAC7ByE,IAGJoiB,EAAW7mB,CACf,CAEA,OAAOyE,CACX,EAEA+hB,YAAa,SAAS1yB,GAGlB,IAFA,IAAI2Z,EAAO3Z,EAAM8C,wBAEV6W,IAA0B,GAAjBA,EAAKzN,UAAiByN,EAAKnH,cAAgBmH,EAAKnH,WAAW4R,iBAA8E,SAA3DzK,EAAKnH,WAAW4R,gBAAgBjY,UAAUpa,iBACpI4nB,EAAOA,EAAKpC,WAGhB,OAAOoC,CACX,EAEAqZ,YAAa,WACT,IAAI7+B,EAAOhJ,KAEXkJ,EAAImvB,eAAervB,EAAK+L,MACxB/L,EAAK+L,KAAKsQ,UAAYrc,EAAKkO,KACvBlO,EAAK0M,aAAe1M,EAAKy+B,qBAAqB1e,OAC9ChiB,EAAO+X,WAAW6oB,kBAAkB3+B,EAAK+L,KAAM/L,EAAKy+B,qBAE5D,EAEA7mB,OAAQ,SAAS6P,EAAMpd,GACnB,GAAqB,GAAjBod,EAAK1P,SACL,MAAQ0P,EAAOA,EAAKiB,kBAAqC,GAAjBjB,EAAK1P,UACzC1N,GAASod,EAAKzP,UAAUlf,OAIhC,OAAOuR,CACX,EAEAm0B,WAAY,SAAS/W,GAGjB,IAFA,IAAIqX,EAAO,GAEJrX,GAAQzwB,KAAKsnC,UAChBQ,EAAK1mC,KAAKpB,KAAKuH,MAAMkpB,IACrBA,EAAOA,EAAKrE,WAGhB,OAAO0b,CACX,EAEAC,aAAc,SAASlzB,EAAOurB,EAAO0H,EAAME,GAKvC,IAJA,IAAIvX,EAAOzwB,KAAKsnC,SACZxlC,EAASgmC,EAAKhmC,OACd8e,EAASonB,EAENlmC,KAAY2uB,GACfA,EAAOA,EAAK8B,WAAWuV,EAAKhmC,IAGhC,KAAO2uB,GAAyB,GAAjBA,EAAK1P,UAAiB0P,EAAKzP,UAAUlf,OAAS8e,GACzDA,GAAU6P,EAAKzP,UAAUlf,OACzB2uB,EAAOA,EAAKI,YAGZJ,GAAQ7P,GAAU,GAClB/L,EAAMurB,EAAQ,WAAa,UAAU3P,EAAM7P,EAEnD,EAEApJ,QAAS,WACL,IAAIxO,EAAOhJ,KACPwlB,EAASxc,EAAK6L,MAAM+uB,aAKxB,OAHA56B,EAAK++B,aAAaviB,GAAQ,EAAMxc,EAAKyN,eAAgBzN,EAAK2N,aAC1D3N,EAAK++B,aAAaviB,GAAQ,EAAOxc,EAAK0N,aAAc1N,EAAK4N,WAElD4O,CACX,IAIAyiB,EAAS9lC,EAAM3B,OAAO,CACtBM,KAAM,WACFd,KAAKkoC,MAAQ,IACjB,EAEAC,SAAU,SAAStzB,GACf,IACIqzB,EADOloC,KACMkoC,MAAQh/B,EAAI+iB,OAAOzX,EAAWyuB,kBAAkBpuB,GAAQ,OAAQ,CAAEqH,UAAW,aAO9F,OANArH,EAAM0vB,WAAW2D,GAEjBh/B,EAAI+rB,aAAaiT,EAAMxW,iBACvBxoB,EAAI+rB,aAAaiT,EAAMrX,aAEvBhc,EAAMyN,WAAW4lB,GACVA,CACX,EAEAE,YAAa,SAASvzB,GAClB,IAAI7L,EAAOhJ,KACPoiC,EAAWp5B,EAAKk/B,MAAMxW,gBACtB/a,EAAc,EAEdyrB,IACAzrB,EAAcgb,EAAWyQ,GAAYA,EAASphB,UAAUlf,OAAS0vB,EAAc4Q,IAGnF,IAAI1qB,EAAY1O,EAAKk/B,MAAM9b,WACvBic,EAAiBjG,EAAW5Q,EAAc4Q,GAAY,EAE1Dl5B,EAAIoO,OAAOtO,EAAKk/B,OAChB1X,EAAU9Y,GAEV,IAAI+Y,EAAO/Y,EAAU6a,WAAW8V,GAEhC,GAAI1W,EAAWlB,GACX5b,EAAMgC,SAAS4Z,EAAM9Z,QAClB,GAAI8Z,EAAM,CACb,IAAI6X,EAAWp/B,EAAI6sB,aAAatF,GAC5B6X,EACAzzB,EAAMgC,SAASyxB,EAAUA,EAAStnB,UAAUlf,QAE5C+S,EAAMutB,EAAW,gBAAkB,kBAAkB3R,EAE7D,MACShuB,EAAQ8b,MAAS7G,EAAU2N,YAC5B3N,EAAU2N,UAAY,wBAG1BxQ,EAAM6uB,mBAAmBhsB,GAE7B7C,EAAMiC,UAAS,EACnB,EAEAyxB,IAAK,SAAS1zB,EAAO2zB,GACjB,IAAIx/B,EAAOhJ,KAEPsY,EAAYzD,EAAMyD,YAAc9D,EAAWi0B,aAAa5zB,GACxD2B,EAAMhC,EAAWyuB,kBAAkBpuB,GAEnC2zB,GAAU3zB,EAAMyD,YAChBtP,EAAKm/B,SAAStzB,GACdA,EAAQL,EAAWg0B,OAAO3zB,IAG9B,IAAI6zB,EAAgB7zB,EAAM+uB,aAa1B,GAXA8E,EAAc5xB,UAAS,GACvB9N,EAAKq3B,IAAMn3B,EAAI+iB,OAAOzV,EAAK,OAAQ,CAAE0F,UAAW,aAChDwsB,EAAcnE,WAAWv7B,EAAKq3B,MAE9BqI,EAAgB7zB,EAAM+uB,cACR9sB,UAAS,GACvB9N,EAAKo3B,MAAQp3B,EAAKq3B,IAAI1N,WAAU,GAChC+V,EAAcnE,WAAWv7B,EAAKo3B,OAE9Bp3B,EAAK2/B,mBAAmB3/B,EAAKo3B,MAAOp3B,EAAKq3B,KAErC/nB,EAAW,CACX,IAAI4Y,EAAM1a,EAAIoyB,eAAe,UAC7B1/B,EAAImU,YAAY6T,EAAIyB,YAAa3pB,EAAKo3B,OACtCl3B,EAAIoR,aAAa4W,EAAKloB,EAAKq3B,IAC/B,CAOA,OALA7P,EAAU3b,EAAM8C,yBAEhB9C,EAAMyuB,eAAet6B,EAAKo3B,OAC1BvrB,EAAM4uB,YAAYz6B,EAAKq3B,KAEhBxrB,CACX,EAEA8zB,mBAAoB,SAASvI,EAAOC,GAC5BD,EAAM1O,iBAAsD,UAAnC0O,EAAM1O,gBAAgB1Q,WAC/C9X,EAAIoO,OAAO8oB,EAAM1O,iBAGjB2O,EAAIxP,aAA4C,UAA7BwP,EAAIxP,YAAY7P,WACnC9X,EAAIoO,OAAO+oB,EAAIxP,YAEvB,EAEAgY,iBAAkB,SAASpY,GAIvB,IAHA,IAAIlpB,EAAQiqB,EAAcf,GACtBqY,EAAUrY,EAEPqY,EAAQpX,iBACa,GAApBoX,EAAQ/nB,UAAqD,GAApC+nB,EAAQpX,gBAAgB3Q,UACjDxZ,IAGJuhC,EAAUA,EAAQpX,gBAGtB,OAAOnqB,CACX,EAEA+P,OAAQ,SAASzC,GACb,IAGIk0B,EACAC,EAJAhgC,EAAOhJ,KACPogC,EAAQp3B,EAAKo3B,MACbC,EAAMr3B,EAAKq3B,IAOf,IAFA7P,EAAU3b,EAAM8C,0BAERyoB,EAAMvP,aAAeuP,EAAMhU,YAC/BgU,EAAQA,EAAMhU,WAGlB,MAAQiU,EAAI3O,iBAAmB2O,EAAIjU,YAC/BiU,EAAMA,EAAIjU,WAId2c,EAAwB3I,EAAM1O,iBAAqD,GAAlC0O,EAAM1O,gBAAgB3Q,UAC/Cqf,EAAMvP,aAA6C,GAA9BuP,EAAMvP,YAAY9P,SAE/DioB,EAAsB3I,EAAI3O,iBAAmD,GAAhC2O,EAAI3O,gBAAgB3Q,UAC3Csf,EAAIxP,aAA2C,GAA5BwP,EAAIxP,YAAY9P,SAOzD,IAAIkoB,GAHJ7I,EAAQA,EAAMvP,gBACdwP,EAAMA,EAAI3O,kBAE2BxoB,EAAI6rB,MAAMqL,GAC3C6I,GAAiB7I,EAAMt+B,OAAS,IAChCs+B,EAAMpf,UAAYof,EAAMpf,UAAUkoB,OAAO,IAG7C,IAAI5wB,EAAY2wB,EACZE,GAAmB,EAWvB,GATI/I,GAASp3B,EAAKq3B,MACd8I,IAAqBngC,EAAKo3B,MAAM1O,gBAChC0O,EAAQC,EAAMr3B,EAAKo3B,MAAM1O,iBAAmB1oB,EAAKq3B,IAAIxP,YACrDvY,GAAY,GAGhBpP,EAAIoO,OAAOtO,EAAKo3B,OAChBl3B,EAAIoO,OAAOtO,EAAKq3B,MAEXD,IAAUC,EAGX,OAFAxrB,EAAM6uB,mBAAmB7uB,EAAM8C,8BAC/B9C,EAAMiC,UAAS,GAInB,IAAIH,EAAc2B,EAAYqZ,EAAWyO,GAASA,EAAMpf,UAAUlf,OAASs+B,EAAM7N,WAAWzwB,OAAS,EACjG8U,EAAY+a,EAAW0O,GAAOA,EAAIrf,UAAUlf,OAASu+B,EAAI9N,WAAWzwB,OAExE,GAAsB,GAAlBs+B,EAAMrf,SACN,KAAOqf,EAAM1O,iBAAqD,GAAlC0O,EAAM1O,gBAAgB3Q,UAElDpK,IADAypB,EAAQA,EAAM1O,iBACO1Q,UAAUlf,OAIvC,GAAoB,GAAhBu+B,EAAItf,SACJ,KAAOsf,EAAI3O,iBAAmD,GAAhC2O,EAAI3O,gBAAgB3Q,UAE9CnK,IADAypB,EAAMA,EAAI3O,iBACO1Q,UAAUlf,OAInC,IAAIsnC,EAAchJ,EAAMhU,WACpBid,EAAYhJ,EAAIjU,WAChBkd,EAAatpC,KAAK6oC,iBAAiBzI,GACnCmJ,EAAWvpC,KAAK6oC,iBAAiBxI,GAErC7P,EAAU4Y,GACY,GAAlBhJ,EAAMrf,WACNqf,EAAQgJ,EAAY7W,WAAW+W,IAGnC9Y,EAAU6Y,GACU,GAAhBhJ,EAAItf,WACJsf,EAAMgJ,EAAU9W,WAAWgX,IAG3BjxB,GACsB,GAAlB8nB,EAAMrf,SACNlM,EAAMgC,SAASupB,EAAOzpB,GAEtB9B,EAAMs0B,EAAmB,gBAAkB,kBAAkB/I,GAGjEvrB,EAAMiC,UAAS,KAGO,GAAlBspB,EAAMrf,SACNlM,EAAMgC,SAASupB,EAAOzpB,GAEtB9B,EAAMyuB,eAAelD,GAGL,GAAhBC,EAAItf,SACJlM,EAAMwuB,OAAOhD,EAAKzpB,GAElB/B,EAAM4uB,YAAYpD,IAItBr3B,EAAKk/B,OACLl/B,EAAKo/B,YAAYvzB,EAEzB,IAGA20B,EAAW,2DAEXh1B,EAAa,CACbqT,MAAO,SAAShT,GACZ,IAAIgT,EAAQrT,EAAW4D,UAAUvD,GAQjC,OAPKgT,EAAM/lB,SACP+S,EAAM6uB,mBAAmB7uB,EAAM8C,0BAC/BkQ,EAAQrT,EAAW4D,UAAUvD,IAClB/S,SACP+lB,EAAQ3e,EAAI0sB,sBAAsB/gB,EAAM8C,2BAGzCkQ,CACX,EAEAzP,UAAW,SAASvD,GAMhB,OALe,IAAIoyB,EAAgBpyB,GAAOqyB,YACpBjuB,QAAO,SAASwX,GAC9B,OAAOvnB,EAAIgtB,kBAAkBzF,EAAK1Q,cACtC,GAGR,EAEAf,kBAAmB,SAASnK,GACxB,IACI40B,EAAkB1iC,EAAO+X,YAAc/X,EAAO+X,WAAW2qB,gBACzDjkB,EAAS,GASb,OAPIikB,IAAoBA,EAAgB50B,EAAM8C,2BAE1C6N,EADQ,IAAI6hB,EAA0BxyB,GAAOqyB,YAC9BjuB,QAAO,SAASwX,GAC3B,OAAOvnB,EAAIgtB,kBAAkBzF,EAAK1Q,cACtC,KAGGyF,CACX,EAEAyd,kBAAmB,SAASpuB,GACxB,IAAI4B,EAAiB5B,EAAM4B,eAC3B,OAAkC,GAA3BA,EAAesK,SAAgBtK,EAAiBA,EAAeyc,aAC1E,EAEA3e,YAAa,SAAS7M,GAClB,OAAOA,EAAS6M,aACpB,EAEAa,YAAa,SAASP,GAClB,IAAI60B,EAAQl1B,EAAWk1B,MAAM70B,GACzB60B,IACA70B,EAAM0uB,cAAcmG,GACpB70B,EAAM4uB,YAAYiG,IAEtB,IAAItzB,EAAYW,EAAegsB,mBAAmBluB,GAClDuB,EAAU6B,kBACV7B,EAAU8B,SAASrD,EACvB,EAEA80B,UAAW,SAAS90B,GAChB,OAAOlU,EAAM+C,OACT,oBACAwF,EAAIzF,KAAKoR,EAAM4B,gBAAiB5B,EAAM8B,YACtCzN,EAAIzF,KAAKoR,EAAM6B,cAAe7B,EAAM+B,UAE5C,EAEAyR,MAAO,SAASxT,EAAO4b,EAAM/X,GACzB,SAASkxB,EAAUxJ,GACf,IAAIyJ,EAAiBh1B,EAAM+uB,aAC3BiG,EAAe/yB,SAASspB,GACxByJ,EAAezJ,EAAQ,iBAAmB,eAAe3P,GACzD,IAAIqZ,EAAWD,EAAezF,kBAC1B1rB,IACAoxB,EAAW5gC,EAAIwP,KAAKoxB,IAExB5gC,EAAIk3B,EAAQ,eAAiB,eAAe0J,EAAUrZ,EAC1D,CACAmZ,GAAU,GACVA,GAAU,EACd,EAEAG,OAAQ,SAASl1B,EAAOW,GACpB,IAAIqS,EAAQ,GAUZ,OARA,IAAImc,EAAcnvB,GAAOuwB,UAAS,SAAS3U,GACvC,IAAIuZ,EAASx0B,EAAIib,GAEbuZ,GAAU/pC,EAAE2D,QAAQomC,EAAQniB,GAAS,GACrCA,EAAMzmB,KAAK4oC,EAEnB,IAEOniB,CACX,EAEAoiB,OAAQ,SAASp1B,EAAOq1B,GACpB,IAAIC,EAAWD,EAQf,MANwB,iBAAbA,IACPA,EAAY,SAASzZ,GACjB,OAAOvnB,EAAI6a,GAAG0M,EAAM0Z,EACxB,GAGG31B,EAAWu1B,OAAOl1B,GAAO,SAAS4b,GACrC,GAAIyZ,EAAUzZ,GACV,OAAOA,CAEf,GACJ,EAEA2Z,WAAY,SAASv1B,GACjB,OAAOL,EAAWy1B,OAAOp1B,GAAO,SAAS4b,GACrC,MAAyB,YAAlBA,EAAKvU,SAChB,GACJ,EAEAwtB,MAAO,SAAS70B,GACZ,IAAIgT,EAAQrT,EAAWy1B,OAAOp1B,EAAO,OAErC,GAAoB,GAAhBgT,EAAM/lB,OACN,OAAO+lB,EAAM,EAErB,EAEAwiB,UAAW,SAAS/F,EAAe7T,GAC/B,GAAkC,IAA9B6T,EAAc3tB,YACd,OAAO,EAKX,IAFA,IAAI9B,EAAQyvB,EAAcV,aAEG,IAAtB/uB,EAAM8B,aAAqB9B,EAAM4B,gBAAkBga,GAAM,CAI5D,IAHA,IAAIlpB,EAAQ2B,EAAIsoB,cAAc3c,EAAM4B,gBAChCkH,EAAS9I,EAAM4B,eAAe2V,WAE3B7kB,EAAQ,GAAKoW,EAAOpW,EAAQ,IAAM2B,EAAIisB,cAAcxX,EAAOpW,EAAQ,KACtEA,IAGJsN,EAAMgC,SAAS8G,EAAQpW,EAC3B,CAEA,OAA6B,IAAtBsN,EAAM8B,aAAqB9B,EAAM4B,gBAAkBga,CAC9D,EAEA6Z,QAAS,SAAShG,EAAe7T,GAC7B,IAAI5b,EAAQyvB,EAAcV,aAE1B/uB,EAAMiC,UAAS,GAEf,IAAIspB,EAAQvrB,EAAM4B,eAEdvN,EAAIyoB,WAAWyO,IAAUvrB,EAAM8B,aAAezN,EAAIopB,cAAc8N,KAChEvrB,EAAMgC,SAASupB,EAAMhU,WAAYljB,EAAIsoB,cAAc4O,GAAS,GAC5DvrB,EAAMiC,UAAS,IAGnBjC,EAAMwuB,OAAO5S,EAAMvnB,EAAIopB,cAAc7B,IAErC,IAAI5I,EAAQ,GAUZ,OAFA,IAAImc,EAAcnvB,GAAOuwB,UANzB,SAAe3U,GACNvnB,EAAIisB,cAAc1E,IAAWvnB,EAAIyoB,WAAWlB,IAAS,cAAc9a,KAAK8a,EAAKzP,YAC9E6G,EAAMzmB,KAAKqvB,EAEnB,KAIQ5I,EAAM/lB,MAClB,EAEAyoC,qBAAsB,SAAS11B,GAI3B,IAHA,IAAI21B,EAAgBthC,EAAI8vB,eAAenkB,EAAM4B,gBACzCg0B,EAAcvhC,EAAI8vB,eAAenkB,EAAM6B,cAEd,IAAtB7B,EAAM8B,aAAqB9B,EAAM4B,gBAAkB+zB,GACtD31B,EAAMgC,SAAShC,EAAM4B,eAAe2V,WAAYljB,EAAIsoB,cAAc3c,EAAM4B,iBAG5E,SAASi0B,EAAM9pB,EAAQlJ,GACnB,IAAI5V,EAASoH,EAAIopB,cAAc5a,GAE/B,GAAIkJ,GAAU9e,EACV,OAAO,EAGX,IAAK,IAAI6B,EAAIid,EAAQjd,EAAI7B,EAAQ6B,IAC7B,IAAKuF,EAAIisB,cAAczd,EAAU6a,WAAW5uB,IACxC,OAAO,EAIf,OAAO,CACX,CAEA,KAAO+mC,EAAM71B,EAAM+B,UAAW/B,EAAM6B,eAAiB7B,EAAM6B,cAAgB+zB,GACvE51B,EAAMwuB,OAAOxuB,EAAM6B,aAAa0V,WAAYljB,EAAIsoB,cAAc3c,EAAM6B,cAAgB,GAGxF,OAAO7B,CACX,EAEA2zB,OAAQ,SAAS3zB,GACb,IAAI2Q,EAAS3Q,EAAM+uB,aAEfntB,EAAiB+O,EAAO/O,eAAe8b,WAAkC,IAAvB/M,EAAO7O,YAAoB,EAAI6O,EAAO7O,YAAc,GACtGD,EAAe8O,EAAO9O,aAAa6b,WAAW/M,EAAO5O,WAEzD,IAAK+a,EAAWlb,KAAoBkb,EAAWjb,GAC3C,OAAO8O,EAGX,IAAImlB,EAAcl0B,EAAeuK,UAC7B4pB,EAAal0B,EAAasK,UAE9B,IAAK2pB,IAAgBC,EACjB,OAAOplB,EAGX,IAAI7O,EAAcg0B,EAAYtiB,MAAM,IAAIiS,UAAU3e,KAAK,IAAIkvB,OAAOrB,GAC9D5yB,EAAYg0B,EAAWC,OAAOrB,GAElC,OAAK7yB,GAAgBC,GAIrBA,GAA0B,GAAdA,EAAkBg0B,EAAW9oC,OAAS8U,EAClDD,GAA8B,GAAhBA,EAAoB,EAAIg0B,EAAY7oC,OAAS6U,EAE3D6O,EAAO3O,SAASJ,EAAgBE,GAChC6O,EAAO6d,OAAO3sB,EAAcE,GAErB4O,GATIA,CAUf,EAEAijB,aAAc,SAAS5zB,GACnB,IAAI4b,EAAO5b,EAAM4B,eACbusB,EAAgBxuB,EAAWyuB,kBAAkBpuB,GAEjD,GAAI4b,GAAQuS,GAAiBvS,GAAQuS,EAAcjuB,KAC/C,OAAO,EAGX,IAAIyQ,EAAS3Q,EAAM+uB,aAEfvwB,EAAQod,EAAKzP,UACjB,IAAK3N,EACD,OAAO,EAGX,IAAIs3B,EAAct3B,EAAMy3B,UAAU,EAAGtlB,EAAO7O,aACxCi0B,EAAav3B,EAAMy3B,UAAUtlB,EAAO7O,aAEpCA,EAAc,EAAGC,EAAY,EAUjC,OARI+zB,IACAh0B,EAAcg0B,EAAYtiB,MAAM,IAAIiS,UAAU3e,KAAK,IAAIkvB,OAAOrB,IAG9DoB,IACAh0B,EAAYg0B,EAAWC,OAAOrB,IAG3B7yB,GAAeC,CAC1B,GAGJpW,EAAOuG,EAAQ,CACXgQ,eAAgBA,EAChBmsB,SAAUA,EACVc,cAAeA,EACflB,aAAcA,EACdmE,gBAAiBA,EACjB1mC,aAAcA,EACd0nC,OAAQA,EACRzzB,WAAYA,GAGf,CAlzCD,CAkzCGtS,OAAOvB,MAAM0uB,QAEhB,SAAUpvB,EAAGgC,GACT,IAAItB,EAAQuB,OAAOvB,MACfwB,EAAQxB,EAAMwB,MACd4E,EAASpG,EAAM0B,GAAG4G,OAClBC,EAAMnC,EAAOoC,IACb8d,EAAWtmB,EAAMsmB,SACjBzS,EAAazN,EAAOyN,WACpBu2B,EAAgB,CAAC,KAAM,KAAM,QAAS,QAAS,SAwB/CC,EAAa,cACbC,EAA6B,IAAMD,EAAa,IAGhDvS,EAAgB,SAAShI,GACzB,OAAOxwB,EAAEwwB,GAAM1M,GAAG,iBACtB,EAEIsb,EAAY,SAAS5O,GACrB,OAAOA,EAAKzb,cAAwD,SAAxCyb,EAAKzb,aAAa,kBAClD,EAEIy0B,EAAkB,SAAShZ,GAC3B,OAAOvnB,EAAIqvB,UAAU9H,EAAM4O,EAAW5G,EAC1C,EAgBI1Z,EAAoB,SAASlK,GAC7B,QAAI40B,EAAgB50B,EAAM8C,6BAEf8xB,EAAgB50B,EAAM4B,kBAAmBgzB,EAAgB50B,EAAM6B,eAEzC,IADTlC,EAAWwK,kBAAkBnK,GAC/B/S,OAK1B,EAEIopC,EAAW,SAASppC,GAGpB,IAFA,IAAI0jB,EAAS,GACT2lB,EAAQ,iEACHxnC,EAAI7B,GAAU,GAAI6B,EAAI,IAAKA,EAChC6hB,GAAU2lB,EAAMjC,OAAO9b,KAAKge,MAAsB,GAAhBhe,KAAKie,WAE3C,OAAO7lB,CACX,EAgCI8lB,EAAoB,SAASxkC,GAC7B,IAAI/F,EAAU+F,EAAOA,EAAK/F,QAjHlC,UAkHYA,GAAWA,EAAQsX,QACnBtX,EAAQsX,OAAOkzB,aAAa,CAAE71B,YAAY,GAElD,EAEIoJ,EAAa3c,EAAM3B,OAAO,CAC1BM,KAAM,SAASmI,GACXjJ,KAAKiJ,OAASA,EACdjJ,KAAKynC,qBAAuB,CAAC,EAC7BznC,KAAKe,QAAUd,EAAEO,OAAO,CAAC,EAAGyI,GAAUA,EAAOlI,SAAWkI,EAAOlI,QAAQ2U,YAEvE,IAAIpC,EAAQ3S,EAAM0B,GAAG0E,OAAOC,aAC5BskC,EAAkBh4B,EAAMnP,aACxBmnC,EAAkBh4B,EAAMlP,eACxBknC,EAAkBh4B,EAAMjP,cACxBinC,EAAkBh4B,EAAMhP,YAC5B,EAEAg+B,UAAW,SAAS7R,GAChB,IACIvhB,EADAsW,EAASxlB,KAAKwrC,QAAQ/a,GAW1B,OARoC,IAAhCjL,EAAO4D,QAAQ4hB,IACf97B,EAAKlP,KAAKkrC,WACV1lB,EAASA,EAAO7e,QAAQ,IAAK,IAAMqkC,EAAa,KAAO97B,EAAK,OAE5DA,EAAKsW,EAAOwV,MAAM,kCAAkC,GAGxDh7B,KAAKynC,qBAAqBv4B,GAAMuhB,EACzBjL,CACX,EAEAgmB,QAAS,SAAS/a,GACd,IAEIzQ,EAFAlO,EAAgB9R,KAAKe,QAAQ+Q,cAIjC,cAH+BA,GAI3B,IAAK,SACD,OAAOmV,EAASnV,EAATmV,CAAwBwJ,GACnC,IAAK,WACD,OAAO3e,EAAc2e,GACzB,QAEI,MAAO,KADPzQ,EAAW9W,EAAIzF,KAAKgtB,IACI,MAAQzQ,EAAW,IAEvD,EAEAggB,YAAa,SAASvP,GAClB,IAAIznB,EAAOhJ,KACP4R,EAAkB5R,KAAKe,QAAQ6Q,gBAEnC3R,EAAEgrC,EAA4Bxa,GAAMtX,MAAK,WACrC,IAAIjK,EAAKlP,KAAKgV,aAAag2B,GACvB3L,EAAYr2B,EAAKy+B,qBAAqBv4B,GACtCvO,EAAMu+B,WAAWttB,IACjBA,EAAgB5R,KAAMq/B,GAE1Bp/B,EAAED,MAAMyrC,YAAYpM,EACxB,IAEAr2B,EAAKy+B,qBAAuB,CAAC,CACjC,EAEAyD,SAAU,SAASppC,GACf,OAAOopC,EAASppC,EACpB,EAEA+d,QAAS,SAASxV,EAAGwK,GACjB,IA5EmBsL,EACnBzd,EA2EIgpC,GA5EevrB,EA4EU9V,EAAE8V,QA3E/Bzd,EAAO/B,EAAM+B,KACVyd,IAAYzd,EAAK0d,WAAaD,GAAWzd,EAAK2d,QA8EjD,GAHyBqrB,GAAc1rC,KAAK2rC,gBAAgBthC,EAAGwK,KACzD62B,GAAc1rC,KAAK4rC,cAAcvhC,EAAGwK,GAItC,OADAxK,EAAEoW,kBACK,CAEf,EAEAmrB,cAAe,SAASvhC,EAAGwK,GACvB,IACII,EADSjV,KAAKiJ,OACIgM,SAEtB,OAAOJ,EAAMyD,YAAcrD,EAAS42B,kBAChC52B,EAAS62B,YAAYzhC,IAAM0U,EAAkBlK,EACrD,EAEA82B,gBAAiB,SAASthC,EAAGwK,GACzB,IAAInS,EAAO/B,EAAM+B,KACbqpC,EAAY1hC,EAAE8V,UAAYzd,EAAK0d,UAC/B4rB,EAAM3hC,EAAE8V,SAAWzd,EAAK2d,OAE5B,IAAK0rB,IAAcC,EACf,OAAO,EAEX,IAAIC,GAAiB,EACrB,GAAIp3B,EAAMyD,UAAW,CACjB,GAAIyG,EAAkBlK,GAClB,OAAO,EAEX,IAAIwqB,EAAYr/B,KAAKksC,cAAcr3B,EAAOm3B,GAC1C,GAAI3M,GAAa0M,EAAW,CACxB,IAAII,EAAqBjjC,EAAIG,QAAQwL,EAAM8C,wBAAyB,MACpE,GAAIw0B,EAAoB,CACpB,IAAIC,EAAqBljC,EAAIG,QAAQg2B,EAAW,MAChD,GAAI+M,GAAsBA,IAAuBD,EAC7C,OAAOF,CAEf,CACJ,CACA,GAAI5M,IAAcn2B,EAAIosB,UAAU+J,GAAY,CACxC,GAAIn2B,EAAI+pB,aAAaoM,EAAW0L,KAAmB7hC,EAAI+pB,aAAape,EAAM8C,wBAAyBozB,GAAgB,CAC/G,KAAO1L,GAAuD,GAA1CA,EAAUjT,WAAWmG,WAAWzwB,QAChDu9B,EAAYA,EAAUjT,WAE1B,GAAIljB,EAAIosB,UAAU+J,GACd,OAAO4M,EAEXjsC,KAAKqsC,iBAAiBhN,EAAWxqB,EACrC,CACAo3B,GAAiB,CACrB,CACJ,CACA,OAAOA,CACX,EAEAC,cAAe,SAASr3B,EAAOy3B,GAC3B,IAAIC,EAAkB13B,EAAM8C,wBAC5B,GAAIzO,EAAI6rB,MAAMwX,IAAsBD,GAAY93B,EAAW81B,QAAQz1B,EAAO03B,KAAuBD,GAAY93B,EAAW61B,UAAUx1B,EAAO03B,GAAoB,CACzJ,IAAI1rB,EAAO7gB,KAAKwsC,UAAUD,EAAiBD,GAC3C,GAAIzrB,GAAQ3X,EAAIstB,QAAQ3V,KAAU4oB,EAAgB5oB,GAC9C,KAAOA,GAAQA,EAAKgI,UAAYhI,EAAKgI,SAASyjB,EAAW,EAAIzrB,EAAKgI,SAAS/mB,OAAS,IAChF+e,EAAOA,EAAKgI,SAASyjB,EAAW,EAAIzrB,EAAKgI,SAAS/mB,OAAS,GAGnE,OAAO2nC,EAAgB5oB,EAC3B,CACJ,EAEAwrB,iBAAkB,SAAShN,EAAWxqB,GAClC,IAAI5L,EAASjJ,KAAKiJ,OACdwjC,EAAoB,IAAI1lC,EAAOxG,aAAasU,EAAO5L,EAAO8L,MAC9D7L,EAAIoO,OAAO+nB,GACXt4B,EAAOsjB,cAAcphB,EAAQwjC,EACjC,EAEAD,UAAW,SAAS/b,EAAM6b,GAGtB,IAFA,IACoBzrB,EADhByV,EAAUgW,EAAW,cAAgB,kBACrC/mB,EAAUkL,EACPlL,IAAY1E,IAAS3X,EAAIiwB,uBAAuB5T,KACnD1E,EAAO0E,EAAQ+Q,KACHptB,EAAIyoB,WAAW9Q,IAAS,gBAAgBlL,KAAKkL,EAAKG,aAE1DH,GADA0E,EAAU1E,GACKyV,IAEdzV,IACD0E,EAAUA,EAAQ6G,YAG1B,OAAOvL,CACX,IAGJ/B,EAAWugB,UAAYA,EACvBvgB,EAAW2qB,gBAAkBA,EAC7B3qB,EAAW4tB,mBAzOc,SAAS73B,GAC9B,IAAI83B,EAAuBlD,EAAgB50B,EAAM4B,gBAC7Cm2B,EAAqBnD,EAAgB50B,EAAM6B,eAE3Ci2B,GAAwBC,KACpBD,GACA93B,EAAMyuB,eAAeqJ,GAErBC,GACA/3B,EAAM4uB,YAAYmJ,GAG9B,EA8NA9tB,EAAWC,kBAAoBA,EAC/BD,EAAW8L,iBAlRY,CACf,OACA,SACA,YACA,gBACA,cACA,YACA,YACA,YACA,WACA,WACA,aACA,SACA,WACA,gBACA,iBACA,cACA,cACA,YACA,eACA,aACA,aACA,mBA6PR9L,EAAW4oB,iBAzMY,SAASlZ,GAC5B,IAA4CxO,EAAU9Q,EAAI29B,EAAtDpF,EAAuB,CAAE1e,OAAO,GAUpC,OATC9oB,EAAEuuB,GAAM7jB,KAnDY,6BAmDawO,MAAK,SAASxV,EAAG8sB,GAC/CzQ,EAAW9W,EAAIzF,KAAKgtB,GACpBvhB,EAAKg8B,IACL2B,EAAa,IAAM7sB,EAAW,IAAMgrB,EAAa,KAAO97B,EAAK,OAAS8Q,EAAW,IACjFynB,EAAqBv4B,GAAM,CAAEuhB,KAAMA,EAAMxkB,MAAOhM,EAAEwwB,GAAMrW,KAAK,UAC7DqtB,EAAqB1e,OAAQ,EAC7B9oB,EAAEwwB,GAAMgb,YAAYoB,EACxB,IAEOpF,CACX,EA8LA3oB,EAAW6oB,kBA5La,SAASnZ,EAAMiZ,GACnC,IAAIv4B,EAAImwB,EACRp/B,EAAEuuB,GAAM7jB,KAAKsgC,GAA4B9xB,MAAK,SAASxV,EAAG8sB,GACtDvhB,EAAKuhB,EAAKzb,aAAag2B,GACvB3L,EAAYoI,EAAqBv4B,GACjCjP,EAAEwwB,GAAMgb,YAAYpM,EAAU5O,MAC1B4O,EAAUpzB,OAAShM,EAAEo/B,EAAU5O,MAAMrW,KAAK,UAC1Cna,EAAEo/B,EAAU5O,MAAM/C,WAAW,SAAStT,KAAK,QAASilB,EAAUpzB,MAEtE,GACJ,EAoLAlF,EAAO+X,WAAaA,CACvB,CA/RD,CA+RG5c,OAAOvB,MAAM0uB,QAEhB,SAAUpvB,GAGN,IAAIU,EAAQuB,OAAOvB,MACfwB,EAAQxB,EAAMwB,MACdjC,EAAWS,EAAM0B,GAAG4G,OACpBC,EAAMhJ,EAASiJ,IACf5I,EAAeL,EAASK,aACxB0nC,EAAS/nC,EAAS+nC,OAClBznC,EAASP,EAAEO,OAanB,IAAIL,EAAUgC,EAAM3B,OAAO,CACvBM,KAAM,SAASC,GACXf,KAAKe,QAAUA,EACff,KAAK8sC,aAAe,IAAIvsC,EAAaQ,EAAQ8T,MAAO9T,EAAQgU,KAAM,CAAEW,WAAY3U,EAAQ2U,aACxF1V,KAAKu3B,OAAS,IAAI0Q,EAClBjoC,KAAK+sC,UAAYhsC,EAAQgsC,SAC7B,EAEAz3B,SAAU,WACN,OAAOtV,KAAK8sC,aAAat1B,SAC7B,EAEAw1B,UAAW,SAASxE,GAChB,OAAOxoC,KAAKu3B,OAAOgR,IAAIvoC,KAAKsV,WAAYkzB,EAC5C,EAEAyE,aAAc,SAASp4B,GACnB7U,KAAKu3B,OAAOjgB,OAAOzC,GACnB7U,KAAKiJ,OAAOmM,YAAYP,EAC5B,EAEApT,KAAM,WACF,IAAIyrC,EAAQltC,KAAK8sC,aACjBI,EAAMrF,cACN7nC,KAAKiJ,OAAOmM,YAAY83B,EAAM11B,UAClC,EAEA5V,KAAM,WACF5B,KAAK2U,MACT,EAEAw4B,aAAc,SAAS9lC,EAAStG,GAC5B,IAAIkI,EAASjJ,KAAKiJ,OAElB,OAAOhJ,EAAEoH,GAAS4V,SAASvV,SAASqN,MAC/BoP,YAAY3jB,EAAO,CAAC,EAAGyI,EAAOlI,QAAQ8R,cAAe9R,IACrDsI,QAAQ,aACR8Q,SAAS,mBACTqQ,YAAY,QAAS7pB,EAAM4B,QAAQ+Y,MAAMrS,EAAOyB,UAAU21B,KACnE,EAEA1rB,KAAM,WACF,IAAIE,EAAQ7U,KAAKgtC,WAAU,GAC3BhtC,KAAK+sC,UAAU9jC,OAASjJ,KAAKiJ,OAC7BjJ,KAAK+sC,UAAUppB,OAAO9O,GACtB7U,KAAKitC,aAAap4B,EACtB,EAEAu4B,SAAU,WACNptC,KAAKiJ,OAAOsB,yBAChB,EAEAmL,WAAY,WACR,OAAO1V,KAAKiJ,QAAUjJ,KAAKiJ,OAAOlI,QAAQ2U,UAC9C,EAEAg3B,mBAAoB,SAAS73B,GACrB7U,KAAK0V,eACL/U,EAAM0B,GAAG4G,OAAO6V,WAAW4tB,mBAAmB73B,GAC9C7U,KAAK8sC,aAAe,IAAIvsC,EAAasU,EAAO7U,KAAKiJ,OAAO8L,MAEhE,EAEAs4B,uBAAwB,UAASpiC,SAAEA,EAAQqiC,iBAAEA,EAAgBC,iBAAEA,IAC3D,MAAO,gFACP5sC,EAAMuW,KAAKs2B,aAAa,mCAAmCviC,EAASwC,wBAAyB,CAAEggC,WAAY,UAAW1pC,KAAMupC,IAC5H3sC,EAAMuW,KAAKs2B,aAAa,kCAAkCviC,EAAS0C,wBAAyB,CAAE5J,KAAMwpC,IACxG,QACA,IAGAntC,EAAiB+B,EAAM3B,OAAO,CAC9BM,KAAM,SAAS2rC,EAAmBiB,GAC9B1tC,KAAK+U,KAAO03B,EAAkB13B,KAC9B/U,KAAKysC,kBAAoBA,EACzBzsC,KAAK0tC,gBAAkBA,CAC3B,EAEA9rC,KAAM,WACFsH,EAAImvB,eAAer4B,KAAK+U,MAExB/U,KAAK+U,KAAKsQ,UAAYrlB,KAAK0tC,gBAAgBx2B,KAC3ClX,KAAKiJ,OAAOmM,YAAYpV,KAAK0tC,gBAAgBl2B,UACjD,EAEA/V,KAAM,WACFyH,EAAImvB,eAAer4B,KAAK+U,MAExB/U,KAAK+U,KAAKsQ,UAAYrlB,KAAKysC,kBAAkBv1B,KAC7ClX,KAAKiJ,OAAOmM,YAAYpV,KAAKysC,kBAAkBj1B,UACnD,IAGJhX,EAAON,EAAU,CACbmqB,cAzGJ,SAAsBphB,EAAQwjC,GAC1B,IAAIiB,EAAkBzkC,EAAOsO,sBAAwB,IAAIhX,EAAa0I,EAAOqM,WAAYrM,EAAO8L,MAC5F1T,EAAU,IAAIjB,EAAeqsC,EAAmBiB,GAMpD,OALArsC,EAAQ4H,OAASA,EAEjBA,EAAOe,cAAc5I,KAAKC,GAC1B4H,EAAO6P,gBAEA40B,CACX,EAiGIvtC,QAASA,EACTC,eAAgBA,GAGnB,CAzHD,CAyHG8B,OAAOvB,MAAM0uB,QAEhB,SAAUpvB,EAAGgC,GAEb,IAAItB,EAAQuB,OAAOvB,MACfH,EAASP,EAAEO,OACXuG,EAASpG,EAAM0B,GAAG4G,OAClB3F,EAAcyD,EAAOzD,YACrBnD,EAAU4G,EAAO5G,QACjBG,EAAOyG,EAAOzG,KACd4I,EAAMnC,EAAOoC,IAEbwkC,EAAkBxtC,EAAQK,OAAO,CACjCM,KAAM,SAASC,GACX,IAAI6sC,EAAM5tC,KACV4tC,EAAI7sC,QAAUA,EACdZ,EAAQa,GAAGF,KAAKG,KAAK2sC,EAAK7sC,GAC1B6sC,EAAIvmB,WAAa,KACjBumB,EAAI/3B,OAAQ,CAChB,EAEAlB,KAAM,WACF,IAMItN,EAASC,EANT0B,EAAOhJ,KACPiJ,EAASD,EAAKC,OACdlI,EAAUkI,EAAOlI,QACjBkK,EAAWhC,EAAOlI,QAAQkK,SAC1B4iC,EAAS5tC,EAAEU,EAAMsmB,SAAS0mB,EAAgB1mB,SAA/BtmB,CAAyCsK,IAAWgS,SAASvV,SAASqN,MACjFqC,EAAW,gCA2Bf,SAASwE,EAAMvR,GACXA,EAAEoW,iBAEFotB,EAAOxxB,KAAK,eAAe9I,UAEvBtK,EAAOyM,aACPzM,EAAOyM,WAAW+xB,qBAAuB,CAAC,GAG9Cx+B,EAAOiN,OACX,CAlCAnV,EAAQ+Q,cAAc4D,WAAazM,EAAOyM,WAE1CpO,EAAW4B,EAAIkc,eAAenc,EAAO8L,MAErC1N,EAAU/D,EAAY8D,cAAc6B,EAAOoK,QAAS/L,GACpDD,EAAUsmC,EAAgB/oC,OAAOyC,GACjCA,EAAU/D,EAAYkE,iBAAiBH,EAASC,GAEhDvG,EAAQ+Q,cAAc4D,WAAazT,EA4BnC,IAAIC,EAASlC,KAAKmtC,aAAaU,EAAQ,CACnC5zB,MAAOhP,EAAS/F,SAChB4oC,gBAAiBH,EAAgBG,gBACjCC,gBAAiB9iC,EACjBkD,MAAO,IACPC,OAAQ,IACRuD,WAAW,EACXiK,MAAOA,EACP2I,SAAS,IAER5Z,KAAKyM,GAAUC,IAAIhQ,GAASg5B,MAC5BhkB,KAAK,eAENna,EAAO8rC,SAAS5yB,OAEhBlZ,EAAOwI,QAAQC,KAAK,oBAAoBmZ,GAAG,SAzC/C,SAAezZ,GACXtJ,EAAQ6Q,gBAAgB8D,WAAazM,EAAOyM,WAC5CzM,EAAOoK,MAAMw6B,EAAOljC,KAAKyM,GAAUC,OACnCtW,EAAQ6Q,gBAAgB8D,WAAazT,EAErC2Z,EAAMvR,GAEFrB,EAAK8M,QACL9M,EAAK8M,SAGT7M,EAAOtH,QAAQ,SACnB,IA6B+D0+B,MAC3Dn+B,EAAOwI,QAAQC,KAAK,mBAAmBmZ,GAAG,QAASlI,GAAOykB,MAC9DwN,EAAOljC,KAAKyM,GAAUzV,QAAQ,QAClC,IAGJnB,EAAOmtC,EAAiB,CACpB1mB,SAAU,IACV,qPAGA6mB,gBAAiB,EAAGtgC,eAAcG,kBAClC,gFACIhN,EAAMuW,KAAKs2B,aAAa,mCAAmC7sC,EAAMqhC,WAAWx0B,cAA0B,CAAEigC,WAAY,UAAW1pC,KAAM,UACrIpD,EAAMuW,KAAKs2B,aAAa,kCAAkC7sC,EAAMqhC,WAAWr0B,cAA0B,CAAE5J,KAAM,mBACjH,SACAa,OAAQ,SAASyC,GACb,OAAOA,EAAQV,QAAQ,2CAA4C,WACpDA,QAAQ,wBAAyB,eACjCA,QAAQ,YAAa,YACrBA,QAAQ,MAAO,GAClC,IAGJhG,EAAM0B,GAAG4G,OAAO0kC,gBAAkBA,EAElC5mC,EAAOzD,YAAYjD,aAAa,WAAY,IAAIC,EAAK,CAAEe,QAASssC,IAE/D,CA3GD,CA2GGzrC,OAAOvB,MAAM0uB,QAEhB,SAAUpvB,GAEV,IAAIU,EAAQuB,OAAOvB,MACfH,EAASP,EAAEO,OACXuG,EAASpG,EAAM0B,GAAG4G,OAClB3I,EAAOyG,EAAOzG,KACdH,EAAU4G,EAAO5G,QACjBmD,EAAcyD,EAAOzD,YAErB2qC,EAAgB9tC,EAAQK,OAAO,CAC/BM,KAAM,SAASC,GACXA,EAAQgsC,UAAYhsC,EAAQgsC,YAC5B,IAAI10B,EAAStX,EAAQgsC,UAAU10B,OAC3BA,GAAU/U,EAAYE,aAAa,YAAa6U,EAAO3U,UACvD2U,EAAOkzB,aAAa,CAAE71B,WAAY3U,EAAQ2U,aAC1C3U,EAAQsX,QAAUtX,EAAQsX,OAAOkzB,aAAa,CAAE71B,WAAY3U,EAAQ2U,cAExEvV,EAAQa,GAAGF,KAAKG,KAAKjB,KAAMe,EAC/B,IAGAmtC,EAAa5tC,EAAKE,OAAO,CACzBM,KAAM,SAASC,GACXT,EAAKU,GAAGF,KAAKG,KAAKjB,KAAMe,EAC5B,EAEAM,QAAS,SAASisB,GAGd,OAAO,IAAI2gB,EAAcztC,EAAO8sB,EAAkB,CAC9Cyf,UAHO/sC,KAGSe,QAAQgsC,UACxB10B,OAJOrY,KAIMe,QAAQsX,SAE7B,EAEA/O,OAAQ,SAASjH,EAAIwlB,GACjB,IAAIrP,EAAcxY,KAAKe,QAAQsX,OAAOG,YAAYqP,GAC9Cjd,EAAUvI,EAAGgH,QAAQ,cAAc8kC,kBAEnCvjC,GAAWvI,EAAG+rC,wBACdxjC,EAAQ+Y,OAAOthB,EAAImW,EAE3B,IAGJvY,EAAEO,OAAOuG,EAAQ,CACbknC,cAAeA,EACfC,WAAYA,GAGf,CAlDD,CAkDGhsC,OAAOvB,MAAM0uB,QAEhB,SAAUpvB,GAEV,IAAIU,EAAQuB,OAAOvB,MACfwB,EAAQxB,EAAMwB,MACd4E,EAASpG,EAAM0B,GAAG4G,OAClB9B,EAAUxG,EAAM0B,GAAG0E,OAAO/F,GAAGD,QAAQoG,QACrC7G,EAAOyG,EAAOzG,KACd4tC,EAAannC,EAAOmnC,WACpBhlC,EAAMnC,EAAOoC,IACbqL,EAAazN,EAAOyN,WACpBhU,EAASP,EAAEO,OACXH,EAAe0G,EAAOzD,YAAYjD,aAClC4G,EAAiBF,EAAOzD,YAAY2D,eACpConC,EAAe,wBAEf1e,EAAU,WAEV2e,EAAqBnsC,EAAM3B,OAAO,CAClCM,KAAM,SAAS4C,GACX1D,KAAK0D,OAASA,CAClB,EAEA6qC,iBAAkB,SAASC,GACvB,IAII/d,EAJAge,EAAiB,EACjBC,EAAoB,EACpBC,EAAc,EACdviB,EAAaoiB,EAAcpiB,WAG/B,IAAKqE,EAAOrE,EAAWuE,WAAYF,EAAMA,EAAOA,EAAKI,YAC7CJ,GAAQ+d,IACJ/d,EAAKvU,WAAayT,EAClBgf,IACwB,GAAjBle,EAAK1P,SACZ0tB,IAEAC,KAKZ,OAAIC,EAAc,GAAKviB,EAAWuE,WAAWzU,WAAayT,GAAWvD,EAAW4J,UAAU9Z,WAAayT,EAE5F,EAEA+e,EAAoBD,CAEnC,EAEAG,aAAc,SAASC,EAAY5M,GAC/B,IAAKA,GAAQjiC,KAAKuuC,iBAAiBM,GAAc,EAC7C,OAAO,KAMX,IAHA,IAAIpe,EAAOoe,EAAWziB,WAClBvoB,EAAO7D,KAAK0D,OAAO,GAAGG,MAElBqF,EAAIwvB,OAAOjI,EAAM5sB,IAAO,CAC5B,GAAI7D,KAAKuuC,iBAAiB9d,GAAQ,EAC9B,OAAO,KAGXA,EAAOA,EAAKrE,UAChB,CAEA,OAAOqE,CACX,EAEAqe,WAAY,SAASD,GACjB,IAEIlrC,EAAGksB,EAAKY,EAAM5sB,EAAMwjB,EAFpB3jB,EAAS1D,KAAK0D,OACdovB,EAAa5pB,EAAI4pB,WAGrB,IAAKnvB,EAAI,EAAGksB,EAAMnsB,EAAO5B,OAAQ6B,EAAIksB,EAAKlsB,IAAK,CAK3C,GAJA8sB,EAAOoe,EACPhrC,EAAOH,EAAOC,GAAGE,KACjBwjB,EAAa3jB,EAAOC,GAAGyW,KAEnBqW,GAAQvnB,EAAIwvB,OAAOjI,EAAM5sB,IAASivB,EAAWrC,EAAMpJ,GACnD,OAAOoJ,EAGX,KAAOA,GAEH,IADAA,EAAOvnB,EAAI+pB,aAAaxC,EAAM5sB,KAClBivB,EAAWrC,EAAMpJ,GACzB,OAAOoJ,CAGnB,CAEA,OAAO,IACX,EAEAjY,YAAa,SAASqP,GAClB,IAAIlkB,EAAGksB,EAEP,IAAKlsB,EAAI,EAAGksB,EAAMhI,EAAM/lB,OAAQ6B,EAAIksB,EAAKlsB,IACrC,GAAI3D,KAAK8uC,WAAWjnB,EAAMlkB,IACtB,OAAO,EAGf,OAAO,CACX,IAGAorC,EAAkB5sC,EAAM3B,OAAO,CAC/BM,KAAM,SAAS4C,EAAQ4iB,GACnBtmB,KAAKqY,OAAS,IAAIi2B,EAAmB5qC,GACrC1D,KAAKqnB,WAAa7mB,EAAO,CAAC,EAAGkD,EAAO,GAAG0W,KAAMkM,GAC7CtmB,KAAKic,IAAMvY,EAAO,GAAGG,KAAK,EAC9B,EAEA6Z,KAAM,SAAS+S,GACX,OAAOvnB,EAAIwU,KAAK+S,EAAMvnB,EAAI+iB,OAAOwE,EAAKyC,cAAelzB,KAAKic,IAAKjc,KAAKqnB,YACxE,EAEA2nB,SAAU,SAASn6B,EAAOgT,GAClB7nB,KAAKqY,OAAOG,YAAYqP,IACxB7nB,KAAKqoB,MAAMxT,GACX7U,KAAKsX,OAAOuQ,IAEZ7nB,KAAKw6B,MAAM3S,EAEnB,EAEAlE,OAAQ,SAAS9O,GACb,IACIgT,GADY7nB,KAAK0V,aAAelB,EAAWwK,kBAAoBxK,EAAW4D,WACxDvD,GAElBgT,EAAM/lB,OAAS,GACf9B,KAAKgvC,SAASn6B,EAAOgT,EAE7B,EAEAnS,WAAY,WACR,OAAO1V,KAAKiJ,QAAUjJ,KAAKiJ,OAAOlI,QAAQ2U,UAC9C,EAEA8kB,MAAO,SAAS3S,GACZ,IACIlkB,EAAG25B,EAAG7M,EAAMwe,EADZC,EAAc,GAGlB,GAAIrnB,EAAM/lB,OAAS,EACf,IAAK6B,EAAI,EAAG25B,EAAIzV,EAAM/lB,OAAQ6B,EAAI25B,EAAG35B,IACjC8sB,EAAO5I,EAAMlkB,GACbsrC,EAAajvC,KAAK0D,OAAO+sB,GAAM,GAC/Bye,EAAY9tC,KAAK6tC,QAIrBxe,EAAO5I,EAAM,GACbonB,EAAajvC,KAAK0D,OAAO+sB,GAAM,GAGnCzwB,KAAKmvC,YAAYD,EACrB,EAEAxrC,OAAQ,SAAS+sB,EAAM2e,GACnB,IAAIH,EAAajvC,KAAKqY,OAAOu2B,aAAane,GACtCpJ,EAAarnB,KAAKqnB,WAClBqa,EAAYra,GAAaA,EAAWpb,OAAc,CAAC,EAEvD,GAAIgjC,EACI/lC,EAAI6a,GAAGkrB,EAAY,UACfvN,EAAUpN,OACV2a,EAAW5V,gBAAgB,SAE3BqI,EAAU/1B,UACVsjC,EAAW5V,gBAAgB,QAE3BqI,EAAU71B,UACVojC,EAAW5V,gBAAgB,SAGnCnwB,EAAIkR,KAAK60B,EAAY5nB,OAClB,CACH,MAAQne,EAAIstB,QAAQ/F,EAAKrE,aAAoD,GAArCqE,EAAKrE,WAAWmG,WAAWzwB,QAAmD,SAApC2uB,EAAKrE,WAAW6M,iBAA8BmW,GAC5H3e,EAAOA,EAAKrE,WAGhB6iB,EAAajvC,KAAK0d,KAAK+S,EAC3B,CAEA,OAAOwe,CACX,EAEA33B,OAAQ,SAASuQ,GACb,IAAIlkB,EAAG25B,EAAG2R,EAEV,IAAKtrC,EAAI,EAAG25B,EAAIzV,EAAM/lB,OAAQ6B,EAAI25B,EAAG35B,KACjCsrC,EAAajvC,KAAKqY,OAAOy2B,WAAWjnB,EAAMlkB,OAElC3D,KAAKqnB,YAAcrnB,KAAKqnB,WAAWpb,OACnC/C,EAAIuwB,QAAQwV,EAAYjvC,KAAKqnB,WAAWpb,OACnCgjC,EAAWhjC,MAAM8sB,SAAYkW,EAAW5nB,WAAkB,OAC3Dne,EAAIgwB,OAAO+V,IAGf/lC,EAAIgwB,OAAO+V,GAI3B,EAEA5mB,MAAO,SAASxT,GACZ,IAEIlR,EAAGsrC,EAFHpnB,EAAQrT,EAAW4D,UAAUvD,GAC7ByoB,EAAIzV,EAAM/lB,OAGd,GAAIw7B,EAAI,EACJ,IAAK35B,EAAI,EAAGA,EAAI25B,EAAG35B,KACfsrC,EAAajvC,KAAKqY,OAAOy2B,WAAWjnB,EAAMlkB,MAEtC6Q,EAAW6T,MAAMxT,EAAOo6B,GAAY,EAIpD,EAEAE,YAAa,SAAStnB,GAGlB,IAFA,IAAI4I,EAAMjR,EAEHqI,EAAM/lB,OAAS,GAQlB,GAPA2uB,EAAO5I,EAAMwnB,MACb7vB,EAAOqI,EAAMA,EAAM/lB,OAAS,GAExB2uB,EAAKiB,iBAAmBjB,EAAKiB,gBAAgBxV,WAAayT,GAC1DnQ,EAAKH,YAAYoR,EAAKiB,iBAGtBjB,EAAKxL,SAAWzF,EAAKyF,SACrBwL,EAAKiB,iBAAmBlS,GACxBiR,EAAKxkB,MAAM8sB,SAAWvZ,EAAKvT,MAAM8sB,SACjCtI,EAAKvU,YAAcsD,EAAKtD,UAAW,CAEnC,KAAOuU,EAAKE,YACRnR,EAAKH,YAAYoR,EAAKE,YAG1BznB,EAAIoO,OAAOmZ,EACf,CAER,IAGA6e,EAA2BhB,EAAmB9tC,OAAO,CACrDM,KAAM,SAAS4C,EAAQ6rC,EAAgBC,EAAUtqB,GAC7CllB,KAAK0D,OAASA,EACd1D,KAAKuvC,eAAiBA,EACtBvvC,KAAKwvC,SAAWA,EAChBxvC,KAAKklB,aAAeA,EACpBopB,EAAmBttC,GAAGF,KAAKG,KAAKjB,KAAM0D,EAC1C,EAEA+rC,kBAAmB,SAAShf,GACxB,IAEI9sB,EAAG25B,EAAGzE,EAAWp1B,EAAMisC,EAAgBr9B,EAAKs9B,EAAMC,EAAU/f,EAC5DggB,EAAkBjO,EAAUvuB,EAH5BgU,EAAaoJ,EAAKpJ,WAClB3O,EAAO/X,EAAM+X,KAIjB,GAAK2O,EAIL,IAAK1jB,EAAI,EAAG25B,EAAIjW,EAAWvlB,OAAQ6B,EAAI25B,EAAG35B,IAAK,CAK3C,GAHAF,GADAo1B,EAAYxR,EAAW1jB,IACNqc,SACjB0vB,EAAiB7W,EAAU7X,UAEvB6X,EAAUC,WAAqB,SAARr1B,EAIvB,IAAKmsC,EAAW,EAAG/f,GAFnBxd,EAAMqG,EAAKg3B,GAAkBjf,EAAKxkB,MAAM8sB,SAAS1Q,MAAM,MAE1BvmB,OAAQ8tC,EAAW/f,EAAK+f,IAEjD,IADAD,EAAOt9B,EAAIu9B,IACF9tC,OAAQ,CAKb,GAHA8/B,EAAWlpB,GADXm3B,EAAmBF,EAAKtnB,MAAM,MACG,GAAGzhB,eACpCyM,EAAQqF,EAAKm3B,EAAiB,IAE1BjO,GAAY5hC,KAAKuvC,eACjB,SAGJ,OAAO3N,EAASxY,QAAQ,UAAY,EAAIlgB,EAAImrB,MAAMhhB,GAASA,CAC/D,CAIR,GAAIrT,KAAKwvC,UAAY3W,EAAUC,WAAar1B,GAAQzD,KAAKwvC,SAIrD,OAHA5N,EAAW/I,EAAU7X,UACrB3N,EAAQwlB,EAAU7X,UAEX4gB,EAASxY,QAAQ,UAAY,EAAIlgB,EAAImrB,MAAMhhB,GAASA,CAEnE,CACJ,EAEAy8B,eAAgB,SAASrf,GACrB,IAEI9sB,EAAGksB,EAAKxc,EADRwR,EADQ5kB,EAAEiJ,EAAIyoB,WAAWlB,GAAQA,EAAKrE,WAAaqE,GACnCsf,aAAa,qBAAqBC,UAAUC,UAAU3V,UAG1E,IAAK32B,EAAI,EAAGksB,EAAMhL,EAAQ/iB,OAAQ6B,EAAIksB,EAAKlsB,IAGvC,GAFA0P,EAA+B,aAAvBrT,KAAKuvC,eAAgC1qB,EAAQlhB,GAAGuY,UAAYlc,KAAKyvC,kBAAkB5qB,EAAQlhB,IAG/F,OAAO0P,EAIf,OAAOrT,KAAKklB,cAAgB,SAChC,EAEA3M,UAAW,SAASsP,GAChB,IAA4ClkB,EAAGksB,EAA3CrK,EAASxlB,KAAK8vC,eAAejoB,EAAM,IAEvC,IAAKlkB,EAAI,EAAGksB,EAAMhI,EAAM/lB,OAAQ6B,EAAIksB,EAAKlsB,IACrC,GAAI6hB,GAAUxlB,KAAK8vC,eAAejoB,EAAMlkB,IACpC,MAAO,GAIf,OAAO6hB,CACX,EAEAhN,YAAa,SAASqP,GAClB,MAAiC,KAA1B7nB,KAAKuY,UAAUsP,EAC1B,IAGAqoB,EAAwBnB,EAAgBvuC,OAAO,CAC/CM,KAAM,SAAS4C,EAAQ4iB,EAAQipB,GAC3BR,EAAgB/tC,GAAGF,KAAKG,KAAKjB,KAAM0D,EAAQ4iB,GAE3CtmB,KAAKsmB,OAASA,EACdtmB,KAAKqY,OAAS,IAAIi3B,EAAyB5rC,EAAQ6rC,GAE/CA,IACAvvC,KAAKuvC,eAAiB5uC,EAAMwvC,YAAYZ,GAGhD,EAEAP,SAAU,SAASn6B,EAAOgT,GACtB,IAAI0nB,EAAiBvvC,KAAKuvC,eACtBa,EAAS,QAEbpwC,KAAKqoB,MAAMxT,GAEP06B,GAAuD,WAArCvvC,KAAKsmB,OAAOra,MAAMsjC,KACpCa,EAAS,UAGbpwC,KAAKowC,GAAQvoB,EACjB,IAGAwoB,EAAmBnC,EAAW1tC,OAAO,CACrCM,KAAM,SAASC,GACXmtC,EAAWltC,GAAGF,KAAKG,KAAKjB,KAAMQ,EAAOO,EAAS,CAC1CsX,OAAQ,IAAIi2B,EAAmBvtC,EAAQ2C,QACvCqpC,UAAW,WAAa,OAAO,IAAIgC,EAAgBhuC,EAAQ2C,OAAS,IAE5E,IAGA4sC,EAAuBhwC,EAAKE,OAAO,CACnC8I,OAAQ,SAASjH,EAAIwlB,GACjB,IAAIvL,EAAOja,EAAGga,KAAKrc,KAAK8I,MAExBwT,EAAKV,QACLU,EAAKjJ,MAAMrT,KAAKqY,OAAOE,UAAUsP,GACrC,IAGA0oB,EAAWD,EAAqB9vC,OAAO,CACvCM,KAAM,SAASC,GACXT,EAAKU,GAAGF,KAAKG,KAAKjB,KAAMe,GAGxBf,KAAK8I,KAAO,gBACZ9I,KAAK0D,OAAS,CAAC,CAAEG,KAAM,CAAC,OAAQ,UAChC7D,KAAKqY,OAAS,IAAIi3B,EAAyBtvC,KAAK0D,OAAQ3C,EAAQyvC,QAASzvC,EAAQyuC,SACrF,EAEAnuC,QAAS,SAASisB,GACd,IAAIvsB,EAAUf,KAAKe,QACf2C,EAAS1D,KAAK0D,OACduI,EAAQ,CAAC,EAEb,OAAO,IAAIlF,EAAOknC,cAAcztC,EAAO8sB,EAAkB,CACrDyf,UAAW,WAGP,OAFA9gC,EAAMlL,EAAQ0vC,SAAWnjB,EAAiBja,MAEnC,IAAI68B,EAAsBxsC,EAAQ,CAAEuI,MAAOA,GAASlL,EAAQyvC,QACvE,IAER,EAEAp3B,WAAY,SAAS/W,EAAI4G,GACrB,IAEI8S,EACAlH,EAHA9T,EAAUf,KAAKe,QACf8F,EAAW9F,EAAQ0C,KAGnBitC,EAASruC,EAAGga,KAAK,iBACjB6I,EAAe,GAEdwrB,IAID3vC,EAAQmkB,eACTA,EAAe,CAAC,CACX9R,KAAMnK,EAAOlI,QAAQkK,SAASlK,EAAQmkB,aAAa,GAAG9R,MACtDC,MAAOtS,EAAQmkB,aAAa,GAAG7R,SAIvC0I,EAAamJ,EAAa+K,OAAOlvB,EAAQib,MAAQjb,EAAQib,MAAS/S,EAAOlI,QAAQ8F,IAAa,IAC9F6pC,EAAOC,cAAc50B,GAErB20B,EAAOnnC,KAAK,UAAWc,IACnBpB,EAAOoM,OAASR,EACS,KAArBxK,EAAEumC,OAAOv9B,SACT/S,EAAKqU,KAAK1L,EAAQpC,EAAUwD,EAAEumC,OAAOv9B,QACzC,IAGJq9B,EAAOnnC,KAAK,SAAS,KACjBmW,YAAW,WACPzW,EAAO4S,mBACX,GAAE,EAAE,IAGR60B,EAAOr9B,MAAM,WAEbq9B,EAAOhmC,QAAQoZ,GAAGuqB,EAAc,sCAAsC,WAClE,IAAIwC,EAAW5nC,EAAOqM,WACtBT,EAAQ5L,EAAOsQ,eAAes3B,GAAYA,EAAWh8B,CACzD,IACCiP,GA3aQ,uBA2aO,SAASzZ,GACjBA,EAAE8V,UAAYxf,EAAM+B,KAAKouC,QACzB7nC,EAAO4S,oBACPxR,EAAEoW,iBAEV,IACJ,IAIA6G,EAAYhnB,EAAKE,OAAO,CACxBM,KAAM,SAASC,GACXT,EAAKU,GAAGF,KAAKG,KAAKjB,KAAMe,GAExBf,KAAK0D,OAAS,CAAC,CAAEG,KAAM,CAAC,OAAO,UAC/B7D,KAAKqY,OAAS,IAAIi3B,EAAyBtvC,KAAK0D,OAAQ3C,EAAQyvC,QACpE,EAEAzvC,QAAS,CACLimB,QAAS,UACTzW,QAAS,IAGbjH,OAAQ,WACJtJ,KAAK+wC,QAAQn1B,OACjB,EAEAva,QAAS,SAASisB,GACd,IAAIvsB,EAAUf,KAAKe,QACf2C,EAAS1D,KAAK0D,OACduI,EAAQ,CAAC,EAEb,OAAO,IAAIlF,EAAOknC,cAAcztC,EAAO8sB,EAAkB,CACrDyf,UAAW,WAGP,OAFA9gC,EAAMlL,EAAQ0vC,SAAWnjB,EAAiBja,MAEnC,IAAI68B,EAAsBxsC,EAAQ,CAAEuI,MAAOA,GAASlL,EAAQyvC,QACvE,IAER,EAEAp3B,WAAY,SAAS/W,EAAI4G,GACrB,IAAID,EAAOhJ,KACP6G,EAAWmC,EAAKjI,QAAQ0C,KACxBqY,EAAY9b,KAAK+wC,QAAU1uC,EAAG2uC,sBAE7Bl1B,IAILA,EAAUvS,KAAK,UAAU,KACrB,IAAI+qB,EAAQxY,EAAUzI,QAElBihB,GACAh0B,EAAKqU,KAAK1L,EAAQpC,EAAUytB,UAGzBtrB,EAAKioC,mBACLjoC,EAAKkoC,cAEZjoC,EAAOiN,OAAO,IAGlB4F,EAAUvS,KAAK,QAAQ,KACnBP,EAAKioC,YAAchoC,EAAOqM,WAE1BwG,EAAUq1B,OAAOvoC,QAAQkb,GAAGuqB,GAAc,SAAShkC,GAC1CpK,EAAEoK,EAAEuU,QAAQmF,GAAG,wBAChB1Z,EAAEoW,gBAEV,IAEK3E,EAAUq1B,OAAOvoC,QAAQmb,GAAG,wBAC7BjI,EAAUq1B,OAAOvoC,QACZwR,KAAK,CAAEg3B,aAAc,OACrBzmC,KAAK,gBAAgByP,KAAK,eAAgB,MAC1CimB,MAAM11B,KAAK,SAASmZ,GAAG,SAAS,WAC7B9a,EAAKkoC,eAAgB,CACzB,IAGRp1B,EAAUq1B,OAAOhnB,IAAI,YAAY,KAC7BrO,EAAUq1B,OAAOvoC,QAAQ+B,KAAK,mBAAmBhJ,QAAQ,QAAQ,GACnE,IAGNma,EAAUvS,KAAK,SAAUc,IACrByR,EAAUq1B,OAAOvoC,QAAQmV,IAAIswB,EAAa,IAG9CvyB,EAAU9C,OAAO,YAAYzP,KAAK,YAAac,IACtCyR,EAAUu1B,QAA2C,2BAAjCv1B,EAAUu1B,OAAOC,aAI1Cx1B,EAAUna,QAAQ,SAAS,IAG/Bma,EAAUpR,QACL0P,KAAK,CAAEg3B,aAAc,OACrBzmC,KAAK,gBAAgByP,KAAK,eAAgB,MAE/C0B,EAAUzI,MAAM,eACpB,IAGJ7S,EAAOuG,EAAQ,CACXunC,mBAAoBA,EACpBS,gBAAiBA,EACjBuB,qBAAsBA,EACtBhB,yBAA0BA,EAC1BY,sBAAuBA,EACvBG,iBAAkBA,EAClBE,SAAUA,EACVjpB,UAAWA,IAGfrgB,EAAe,OAAQ,CAAE,CAAEpD,KAAM,CAAC,SAAU,MAAQ,CAAEA,KAAM,CAAC,QAASuW,KAAM,CAAEnO,MAAO,CAAEslC,WAAY,YACnGlxC,EAAa,OAAQ,IAAIgwC,EAAiB,CACtC56B,IAAK,IACLoU,MAAM,EACNnmB,OAAQyD,EAAQgE,KAChB9I,GAAI,CACAmvC,WAAW,MAInBvqC,EAAe,SAAU,CAAE,CAAEpD,KAAM,CAAC,KAAM,MAAQ,CAAEA,KAAM,CAAC,QAASuW,KAAM,CAAEnO,MAAO,CAAEwlC,UAAW,cAChGpxC,EAAa,SAAU,IAAIgwC,EAAiB,CACxC56B,IAAK,IACLoU,MAAM,EACNnmB,OAAQyD,EAAQiE,OAChB/I,GAAI,CACAmvC,WAAW,MAInBvqC,EAAe,YAAa,CAAE,CAAEpD,KAAM,CAAC,QAASuW,KAAM,CAAEnO,MAAO,CAAEy0B,eAAgB,eAAmB,CAAE78B,KAAM,CAAC,QAC7GxD,EAAa,YAAa,IAAIgwC,EAAiB,CAC3C56B,IAAK,IACLoU,MAAM,EACNnmB,OAAQyD,EAAQkE,UAChBhJ,GAAI,CACAmvC,WAAW,MAInBvqC,EAAe,gBAAiB,CAAE,CAAEpD,KAAM,CAAC,MAAO,WAAa,CAAEA,KAAM,CAAC,QAASuW,KAAM,CAAEnO,MAAO,CAAEy0B,eAAgB,oBAClHrgC,EAAa,gBAAiB,IAAIgwC,EAAiB,CAC/C3sC,OAAQyD,EAAQmE,cAChBjJ,GAAI,CACAmvC,WAAW,MAInBvqC,EAAe,cAAe,CAAE,CAAEpD,KAAM,CAAC,UACzCxD,EAAa,cAAe,IAAIgwC,EAAiB,CAC7C3sC,OAAQyD,EAAQlD,YAChB5B,GAAI,CACAmvC,WAAW,MAInBvqC,EAAe,YAAa,CAAE,CAAEpD,KAAM,CAAC,UACvCxD,EAAa,YAAa,IAAIgwC,EAAiB,CAC3C3sC,OAAQyD,EAAQjD,UAChB7B,GAAI,CACAmvC,WAAW,MAInBnxC,EAAa,YAAa,IAAIinB,EAAU,CACpCkpB,QAAS,QACThB,SAAU,QACViB,QAAS,QACThtC,KAAM,YACNpB,GAAI,CACAyG,KAAM,YACN4oC,SAAU,QACV51B,UAAW,cACXyL,iBAAkB,CACdC,MAAO,CAAC,WACRmqB,SAAU,mBACV3qB,QAAS,UACTzW,QAAS,GACTkX,SAAS,EACTC,OAAO,EACPC,SAAS,EACTiqB,UAAW,SACXC,eAAe,OAK3BxxC,EAAa,YAAa,IAAIinB,EAAU,CACpCkpB,QAAS,mBACTC,QAAS,kBACThtC,KAAM,YACNpB,GAAI,CACAyG,KAAM,YACN4oC,SAAU,QACV51B,UAAW,cACXyL,iBAAkB,CACdC,MAAO,CAAC,WACRmqB,SAAU,UACV3qB,QAAS,UACTzW,QAAS,GACTkX,SAAS,EACTC,OAAO,EACPC,SAAS,EACTiqB,UAAW,SACXC,eAAe,OAK3BxxC,EAAa,WAAY,IAAIkwC,EAAS,CAClCC,QAAS,cACThB,SAAU,OACViB,QAAS,aACThtC,KAAM,WACNyhB,aAAc,CAAC,CAAE9R,KAAM,kBAAmBC,MAAO,YACjDhR,GAAI,CACAyG,KAAM,YACNgT,UAAW,WACXyL,iBAAkB,CACduqB,eAAgB,QAChBC,cAAe,OACfC,gBAAgB,GAEpBN,SAAU,YAIlBrxC,EAAa,WAAY,IAAIkwC,EAAS,CAClCC,QAAS,YACThB,SAAU,OACViB,QAAS,WACThtC,KAAM,WACNyhB,aAAc,CAAC,CAAE9R,KAAM,kBAAmBC,MAAO,YACjDhR,GAAI,CACAyG,KAAM,YACNgT,UAAW,WACXyL,iBAAkB,CACduqB,eAAgB,QAChBC,cAAe,OACfC,gBAAgB,GAEpBN,SAAU,WAIjB,CArrBD,CAqrBGxvC,OAAOvB,MAAM0uB,QAEhB,SAAUpvB,EAAGgC,GAEb,IAAItB,EAAQuB,OAAOvB,MACf+T,EAAS/T,EAAMqhC,WACf7/B,EAAQxB,EAAMwB,MACd3B,EAASP,EAAEO,OACXuG,EAASpG,EAAM0B,GAAG4G,OAClBC,EAAMnC,EAAOoC,IACbqL,EAAazN,EAAOyN,WACpBrU,EAAU4G,EAAO5G,QACjBG,EAAOyG,EAAOzG,KACdyuC,EAAkBhoC,EAAOgoC,gBACzBT,EAAqBvnC,EAAOunC,mBAC5Bl2B,EAAY5D,EAAW4D,UACvB4G,EAAoBxK,EAAWwK,kBAC/B3e,EAAe0G,EAAOzD,YAAYjD,aAClCqC,EAAO/B,EAAM+B,KAEbuvC,EAAgB,UAChBC,EAAiB,YACjBC,EAAqB,mBAErBC,EAAmBjwC,EAAM3B,OAAO,CAChCouC,aAAc,SAASC,GACnB,OAAO3lC,EAAI+pB,aAAa4b,EAAY,CAAC,KACzC,IAGAwD,EAAgBlwC,EAAM3B,OAAO,CAC7BM,KAAM,WACFd,KAAKqY,OAAS,IAAI+5B,CACtB,EAEA5X,MAAO,SAAS3lB,EAAOwS,GACnB,IACIirB,EAAS97B,EAAKu2B,EAAWwF,EAAG50B,EAD5BkK,EAAQ7nB,KAAK0V,WAAasJ,EAAkBnK,GAASuD,EAAUvD,GAGnE,GAAIwS,EAAWsS,UAAW,CACtBnjB,EAAMhC,EAAWyuB,kBAAkBpuB,GACnCy9B,EAAU99B,EAAW41B,WAAWv1B,GAEhCA,EAAM8uB,iBACN4O,EAAIrpC,EAAI+iB,OAAOzV,EAAK,IAAK6Q,GACzBxS,EAAM0vB,WAAWgO,GAEjB50B,EAAS40B,EAAEnmB,WACa,KAApBljB,EAAIzF,KAAKka,IACTzU,EAAImU,YAAYk1B,EAAG50B,GAGnBzU,EAAIysB,UAAUhY,IACdzU,EAAIoO,OAAOqG,GAKf,IADA,IAAI60B,EAAMD,EACD5uC,EAAI,EAAGA,EAAI2uC,EAAQxwC,OAAQ6B,IAChCuF,EAAImU,YAAYi1B,EAAQ3uC,GAAI6uC,GAC5BA,EAAMF,EAAQ3uC,GAGd2uC,EAAQxwC,SACRoH,EAAIoR,aAAa9D,EAAIoyB,eAAe,UAAW0J,EAAQ,IAAMA,EAAQ,IACrEppC,EAAImU,YAAY7G,EAAIoyB,eAAe,UAAW0J,EAAQ,IAAMA,EAAQ,IACpEz9B,EAAMyuB,eAAegP,EAAQ,IAC7Bz9B,EAAM4uB,YAAY6O,EAAQA,EAAQxwC,OAAS,IAEnD,MACIirC,EAAY,IAAIgC,EAAgB,CAAC,CAAElrC,KAAM,CAAC,OAASwjB,IACzChP,OAASrY,KAAKqY,OACxB00B,EAAUvS,MAAM3S,EAExB,IAGA4qB,EAAgBtyC,EAAQK,OAAO,CAC/BM,KAAM,SAASC,GACX,IAAIiI,EAAOhJ,KACXe,EAAQgsC,UAA2B,CAC/BppB,OAAQ,SAAS9O,GACb,IAAIgT,EAAQ7e,EAAK0M,aAAesJ,EAAkBnK,GAASuD,EAAUvD,GACrE,IAAIk6B,EAAgB,CAAC,CAAElrC,KAAM,CAAC,QAASyT,OAAOuQ,EAClD,GAEJ7nB,KAAKe,QAAUA,EACfZ,EAAQa,GAAGF,KAAKG,KAAKjB,KAAMe,EAC/B,IAGA2xC,EAAcvyC,EAAQK,OAAO,CAC7BM,KAAM,SAASC,GACX,IAAIiI,EACJhJ,KAAKe,QAAUA,EACfZ,EAAQa,GAAGF,KAAKG,KAAKjB,KAAMe,GAC3Bf,KAAK+sC,UAAY,IAAIsF,EAEhBtxC,EAAQ4xC,IAIT3yC,KAAK2U,KAAO,WACR3U,KAAK+sC,UAAUr3B,WAAa1M,EAC5BhJ,KAAK+sC,UAAUvS,MAAMz5B,EAAQ8T,MAAO,CAChC6G,KAAM3a,EAAQ4xC,IACdhZ,UAAW54B,EAAQqS,MAAQrS,EAAQ4xC,IACnC/zB,OAAQ7d,EAAQ6d,QAExB,GAVA5e,KAAKqnB,WAAa,KAClBrnB,KAAK6V,OAAQ,EAWrB,EAEAlB,KAAM,WACF,IAAI1J,EAAWjL,KAAKiJ,OAAOlI,QAAQkK,SACnCjL,KAAK4yC,aAAe,GACpB5yC,KAAKqV,OAASrV,KAAKgtC,WAAU,GAC7BhtC,KAAK+sC,UAAUr3B,WAAa1V,KAAK0V,aAEjC,IAAImS,EAAQzP,EAAUpY,KAAKqV,QACvBk9B,EAAI1qB,EAAM/lB,OAAS9B,KAAK+sC,UAAU10B,OAAOu2B,aAAa/mB,EAAM,IAAM,KAClEgrB,EAAMhrB,EAAM/lB,QAAgC,OAAtBoH,EAAIzF,KAAKokB,EAAM,IAErCgmB,EAAS7tC,KAAKmtC,aAAa,SAAU,CACrClzB,MAAOhP,EAASnG,WAChBwmB,SAAU,IACV1P,MAAO5b,KAAK8yC,OAAOvpC,KAAKvJ,MACxBukB,SAAS,IACVlI,KAAK,eAERrc,KAAK+yC,MAAQ/yC,KAAKgzC,YAAYnF,GAE1B0E,IACAvyC,KAAKqV,OAAOquB,mBAAmB6O,GAC/B1qB,EAAQzP,EAAUpY,KAAKqV,SAG3BrV,KAAK4yC,aAAe5yC,KAAKqN,SAASwa,GAElCgmB,EAAOnjC,QACFC,KAAK,oBAAoBmZ,GAAG,QAAS9jB,KAAKizC,OAAO1pC,KAAKvJ,OAAOqgC,MAC7D11B,KAAK,mBAAmBmZ,GAAG,QAAS9jB,KAAK8yC,OAAOvpC,KAAKvJ,OAAOqgC,MAC5D11B,KAAK,uBAAuBmZ,GAAG,UAAW9jB,KAAKkzC,SAAS3pC,KAAKvJ,OAAOqgC,MACpE11B,KAAK,sBAAsB0M,IAAIrX,KAAKmzC,QAAQZ,IAAIlS,MAChD11B,KAAK,uBAAuB0M,IAAIrX,KAAK4yC,cAAcvS,MACnD11B,KAAK,wBAAwB0M,IAAIk7B,EAAIA,EAAEt4B,MAAQ,IAAIomB,MACnD11B,KAAK,yBAAyBq2B,KAAK,YAAWuR,GAAgB,UAAZA,EAAE3zB,QAA4ByhB,MAChF11B,KAAK,2BAA2BgZ,QAAQkvB,GAE7C7yC,KAAKozC,QAAUvF,EAAOG,SAAS5yB,OAE/Bnb,EAAE,qBAAsB4tC,EAAOjlC,SAASjH,QAAQ,SAASokC,QAC7D,EAEAiN,YAAa,SAASnF,GAClB,IACIwF,EAAcpzC,EAAE,UAAUgd,SAAS4wB,EAAOjlC,SAC1CqC,EAFOjL,KAESiJ,OAAOlI,QAAQkK,SAC/BqoC,EAAOD,EAAYE,UAAU,CAC7BC,eAAe,EACfx3B,MAAO,CACH,CACIy3B,MAAO,oBACPC,MAAOh/B,EAAOzJ,EAASmC,gBACvB6M,MAAOvF,EAAOzJ,EAASmC,gBACvBnE,OAAQ,WAEZ,CACIwqC,MAAO,qBACPC,MAAOh/B,EAAOzJ,EAASoC,UACvB4M,MAAOvF,EAAOzJ,EAASoC,UACvBpE,OAAQ,WAEZ,CACIwqC,MAAO,sBACPC,MAAOh/B,EAAOzJ,EAASqC,aACvB2M,MAAOvF,EAAOzJ,EAASqC,aACvBrE,OAAQ,WAEZ,CACIwqC,MAAO,uBACPE,cAAe,CACXD,MAAOh/B,EAAOzJ,EAASsC,sBAE3BmmC,MAAO,GACPz5B,MAAOvF,EAAOzJ,EAASsC,qBACvBtE,OAAQ,eAGjBoT,KAAK,aAMR,OAJAg3B,EAAY1oC,KAAK,uBAAuBka,QAAQ,iBAAiB1K,SAAS,0BAE1E0zB,EAAOjlC,QAAQgrC,MAAM3zC,EAtCVD,KAsCiBqtC,uBAAuB,CAAEpiC,WAAUqiC,iBAAkB,OAAQC,iBAAkB,qBAEpG+F,CACX,EAEAJ,SAAU,SAAS7oC,GACf,IAAI3H,EAAO/B,EAAM+B,KAEb2H,EAAE8V,SAAWzd,EAAKouC,MAClB9wC,KAAKizC,OAAO5oC,GACLA,EAAE8V,SAAWzd,EAAKmxC,KACzB7zC,KAAK8yC,OAAOzoC,EAEpB,EAEA4oC,OAAQ,SAAS5oC,GACb,IAEI4P,EAAO7G,EAAMwL,EAFbhW,EAAU5I,KAAKozC,QAAQxqC,QACvB8S,EAAOzb,EAAE,qBAAsB2I,GAASyO,MAExCy8B,EAAY7zC,EAAE,sBAAuB2I,GAErC8S,GAAQA,GAAQu2B,IAEZv2B,EAAK0N,QAAQ,KAAO,IAAM,kBAAkBzT,KAAK+F,KACjDA,EAAO,UAAYA,GAGvB1b,KAAKqnB,WAAa,CAAE3L,KAAMA,IAE1BzB,EAAQha,EAAE,uBAAwB2I,GAASyO,SAEvCrX,KAAKqnB,WAAWpN,MAAQA,GAGxB65B,EAAU/vB,GAAG,eACb3Q,EAAOzS,EAAM+X,KAAKo7B,EAAUz8B,SACdrX,KAAK4yC,aAERx/B,GAASA,IAASpT,KAAK4yC,eAC9B5yC,KAAKqnB,WAAWsS,UAAYzwB,EAAI8rB,SAAS5hB,IAFzCpT,KAAKqnB,WAAWsS,UAAYje,GAMpCkD,EAAS3e,EAAE,wBAAyB2I,GAASmb,GAAG,YAChD/jB,KAAKqnB,WAAWzI,OAASA,EAAS,SAAW,KAE7C5e,KAAK+sC,UAAUvS,MAAMx6B,KAAKqV,OAAQrV,KAAKqnB,aAG3CrnB,KAAK8yC,OAAOzoC,GAERrK,KAAK8V,QACL9V,KAAK8V,QAEb,EAEAg9B,OAAQ,SAASzoC,GACbA,EAAEoW,iBACFzgB,KAAK+yC,MAAMx/B,UACXvT,KAAKozC,QAAQ7/B,UAEbrK,EAAImqB,mBAAmB7e,EAAWyuB,kBAAkBjjC,KAAKqV,SAASa,QAElElW,KAAKitC,aAAajtC,KAAKqV,OAC3B,EAEA89B,QAAS,SAASY,GACd,OAAIA,EAEOA,EAAO/+B,aAAa,OAAQ,GAGhCi9B,CACX,EAEA5kC,SAAU,SAASwa,GACf,IACIlkB,EADAyP,EAAO,GAGX,IAAKzP,EAAI,EAAGA,EAAIkkB,EAAM/lB,OAAQ6B,IAC1ByP,GAAQyU,EAAMlkB,GAAGqd,UAGrB,OAAO9X,EAAI8rB,SAAS5hB,GAAQ,GAChC,EAEAxR,KAAM,WACF,IAAIiT,EAAQ7U,KAAKgtC,WAAU,GAE3BhtC,KAAK+sC,UAAUvS,MAAM3lB,EAAO7U,KAAKqnB,YACjCrnB,KAAKitC,aAAap4B,EACtB,IAIAm/B,EAAkB7zC,EAAQK,OAAO,CACjCM,KAAM,SAASC,GACXZ,EAAQa,GAAGF,KAAKG,KAAKjB,KAAMe,GAE3Bf,KAAK+sC,UAAY,IAAIsF,CACzB,EAEA19B,KAAM,WACF,IAAIs/B,EAAej0C,KAAKk0C,aACxB,GAAKD,EAAL,CAIA,IAAIp/B,EAAQ7U,KAAKsV,WACb6+B,EAAa,IAAIxzC,EAAM0B,GAAG4G,OAAOg/B,OACjCmM,EAAYv/B,EAAM+uB,aAEtBwQ,EAAUv9B,SAASo9B,EAAa7T,MAAM3P,KAAMwjB,EAAa7T,MAAMxf,QAC/DwzB,EAAU/Q,OAAO4Q,EAAa5T,IAAI5P,KAAMwjB,EAAa5T,IAAIzf,QAEzD/L,EAAQ7U,KAAKgtC,YACbmH,EAAW5L,IAAI6L,GAEfp0C,KAAK+sC,UAAUvS,MAAM4Z,EAAW,CAC5B14B,KAAM1b,KAAKq0C,mBAAmBJ,EAAa7gC,QAG/C+gC,EAAW78B,OAAO88B,GAClBp0C,KAAKitC,aAAap4B,EAjBlB,CAkBJ,EAEAq/B,WAAY,WACR,IAAIr/B,EAAQ7U,KAAKsV,WACbg/B,EAAYz/B,EAAM4B,eAClBE,EAAc9B,EAAM8B,aACb29B,EAAU5iB,kBACNxoB,EAAI6rB,MAAMuf,KAAeA,EAAUzjB,cAAkBla,GAAezN,EAAIyoB,WAAW2iB,MAC9FA,EAAYA,EAAUloB,WACtBzV,EAAc,GAElB,IAAI49B,EAAY,IAAIC,EAAqB,CACrC/jB,KAAM6jB,EACN1zB,OAAQjK,EACR89B,aAAc,SAAShkB,GAAQ,OAAOA,GAA2B,MAAnBvnB,EAAIzF,KAAKgtB,EAAe,IAI1E,OADgB,IAAIikB,EAAqBH,GACxBL,YACrB,EAEA1rB,eAAgB,WACZ,QAASxoB,KAAKk0C,YAClB,EAEAG,mBAAoB,SAAShnC,GAEzB,OADkBrN,KAAK20C,mBAAmBtnC,GACrBA,EAAWrN,KAAK40C,uBAAuBvnC,EAChE,EAEAsnC,mBAAoB,SAAStnC,GACzB,OAAO6kC,EAAev8B,KAAKtI,EAC/B,EAEAunC,uBAAwB,SAASvnC,GAC7B,OAAO4kC,EAAgB5kC,CAC3B,IAGAwnC,EAAav0C,EAAKE,OAAO,CACzBM,KAAM,SAASC,GACXf,KAAKe,QAAUA,EACff,KAAKqY,OAAS,IAAIi2B,EAAmB,CAAC,CAAEzqC,KAAM,CAAC,QAE/CvD,EAAKU,GAAGF,KAAKG,KAAKjB,KAAMC,EAAEO,OAAOO,EAAS,CAAEM,QAASoxC,IACzD,EAEAnpC,OAAQ,SAASjH,EAAIwlB,GACjB,IAAIitB,EAAS90C,KAAKqY,OAAOG,YAAYqP,GACjCjd,EAAUvI,EAAGgH,QAAQ,cAAcgT,KAAK,gBAExCy4B,EACAlqC,EAAQ6iB,OAAOprB,GAAI,GAEnBuI,EAAQ6iB,OAAOprB,GAAI,EAE3B,IAGAqyC,EAAuBvyC,EAAM3B,OAAO,CACpCM,KAAM,SAASyzC,GACXv0C,KAAKu0C,UAAYA,EACjBv0C,KAAKogC,MAAQ2U,IACb/0C,KAAKqgC,IAAM0U,IACX/0C,KAAKoT,KAAO,EAChB,EAEA8gC,WAAY,WACR,IAAIzjB,EAAOzwB,KAAKu0C,UAAU9jB,KACtB7P,EAAS5gB,KAAKu0C,UAAU3zB,OAC5B,GAAI1X,EAAIyoB,WAAWlB,GAAO,CACtB,IAAIrd,EAAOqd,EAAKpU,KAAKyuB,UAAU,EAAGlqB,GAClC,GAAI,SAASjL,KAAKzM,EAAI8rB,SAAS5hB,IAC3B,MAER,MAAO,GAAe,IAAXwN,EAAc,CACrB,IAAI4e,EAAIt2B,EAAI4xB,sBAAsBrK,EAAMvnB,EAAI8mB,eACxCwP,GAAKA,EAAE9N,iBACP1xB,KAAKu0C,UAAUzzC,KAAK,CAChB2vB,KAAM+O,EAAE9N,iBAGpB,CAGA,GADA1xB,KAAKu0C,UAAUnP,SAASplC,KAAKg1C,WAAWzrC,KAAKvJ,QACxCA,KAAKqgC,IAAI4U,UACVj1C,KAAKu0C,UAAYv0C,KAAKu0C,UAAUW,MAAMl1C,KAAKqgC,KAC3CrgC,KAAKu0C,UAAUnP,SAASplC,KAAKm1C,aAAa5rC,KAAKvJ,QAE1CA,KAAKo1C,mBAAmB,CACzB,IAAIC,EAAoBr1C,KAAKu0C,UAAUe,cAAct1C,KAAKogC,OAChC,IAAImV,EAAsBF,GAChCjQ,SAASplC,KAAKw1C,qBAAqBjsC,KAAKvJ,OACvDA,KAAKo1C,oBACNp1C,KAAKogC,MAAQ2U,IAErB,CAGJ,OAAI/0C,KAAKogC,MAAM6U,QACJ,KAEA,CACH7U,MAAOpgC,KAAKogC,MACZC,IAAKrgC,KAAKqgC,IACVjtB,KAAMpT,KAAKoT,KAGvB,EAEAgiC,gBAAiB,WACb,OAAOlD,EAAev8B,KAAK3V,KAAKoT,OAAS,WAAWuC,KAAK3V,KAAKoT,KAClE,EAEA4hC,WAAY,SAAS5hC,EAAMqd,GACvB,IAAI9sB,EAAI8xC,EAAkBriC,EAAM++B,GAChC,GAAIxuC,GAAK,EAIL,OAHA3D,KAAKqgC,IAAI5P,KAAOA,EAChBzwB,KAAKqgC,IAAIzf,OAASjd,EAAI,GAEf,CAEf,EAEAwxC,aAAc,SAAS/hC,EAAMqd,GACzB,IAAI9sB,EAAI8xC,EAAkBriC,EAAM,MAC5BsiC,EAAK/xC,EAAI,EAMb,GALA3D,KAAKoT,KAAOA,EAAK03B,UAAU4K,GAAM11C,KAAKoT,KAEtCpT,KAAKogC,MAAM3P,KAAOA,EAClBzwB,KAAKogC,MAAMxf,OAAS80B,EAEhB/xC,GAAK,EACL,OAAO,CAEf,EAEA6xC,qBAAsB,SAASpiC,EAAMqd,EAAM7P,GACvC,IAuBA+0B,EAvBIhyC,GAuBJgyC,EAvB4B,KAuBjBhhC,KAvBWvB,IAyBfuiC,EAAEpuC,OAAS,EAxBdmuC,EAAK/xC,EAST,IARW,IAAPA,IACA+xC,EAAKtiC,EAAKtR,QAGd9B,KAAKoT,KAAOpT,KAAKoT,KAAK03B,UAAU4K,GAChC11C,KAAKogC,MAAM3P,KAAOA,EAClBzwB,KAAKogC,MAAMxf,OAAS80B,GAAe,EAAT90B,GAEtBjd,GAAK,EACL,OAAO,CAEf,IAGJ,SAAS8xC,EAAkBG,EAAK/K,GAE5B,IADA,IAAIlnC,EAAIiyC,EAAI9zC,OACL6B,MAAQknC,EAAOl1B,KAAKigC,EAAIjyC,MAE/B,OAAOA,CACX,CAOA,IAAIoxC,EAAS,WACT,MAAO,CACHtkB,KAAM,KACN7P,OAAQ,KACRq0B,MAAO,WACH,OAAqB,OAAdj1C,KAAKywB,MAAiC,OAAhBzwB,KAAK4gB,MACtC,EAER,EAEIi1B,EAAmB1zC,EAAM3B,OAAO,CAChCM,KAAM,SAASC,GACXf,KAAKywB,KAAO1vB,EAAQ0vB,KACpBzwB,KAAK4gB,OAAS7f,EAAQ6f,SAAW3e,EAAeiH,EAAIyoB,WAAW3xB,KAAKywB,OAASzwB,KAAKywB,KAAK3uB,QAAW,EAAIf,EAAQ6f,OAC9G5gB,KAAKy0C,aAAe1zC,EAAQ0zC,cAAgBz0C,KAAKy0C,cAAgBx0C,EAAEstB,IACvE,EAEA6X,SAAU,SAASC,GACVA,IAGLrlC,KAAK81C,QAAS,EACd91C,KAAK+1C,UAAU1Q,EAAUrlC,KAAKywB,KAAMzwB,KAAK4gB,QAC7C,EAEAm1B,UAAW,SAAS1Q,EAAU5U,EAAM7P,GAChC,GAAK6P,IAAQzwB,KAAK81C,OAAlB,CAGA,GAAsB,IAAlBrlB,EAAK1P,SAOJ,CACD,IAAIi1B,EAAWh2C,KAAKg2C,SAASvlB,GAE7B,OADAzwB,KAAK81C,OAAS91C,KAAK81C,QAAU91C,KAAKy0C,aAAauB,GACxCh2C,KAAK+1C,UAAU1Q,EAAU2Q,EACpC,CAVI,IAAI5iC,EAAOqd,EAAKpU,KACZuE,IAAW3e,IACXmR,EAAOpT,KAAKi2C,QAAQ7iC,EAAMwN,IAE9B5gB,KAAK81C,QAA2C,IAAjCzQ,EAASjyB,EAAMqd,EAAM7P,GAQxC,IAAIC,EAAO7gB,KAAK6gB,KAAK4P,GACrB,IAAK5P,EAED,IADA,IAAIlD,EAAS8S,EAAKrE,YACVvL,GAAQ3X,EAAI2tB,SAASlZ,IACzBkD,EAAO7gB,KAAK6gB,KAAKlD,GACjBA,EAASA,EAAOyO,WAGxBpsB,KAAK81C,OAAS91C,KAAK81C,QAAU91C,KAAKy0C,aAAa5zB,GAC/C7gB,KAAK+1C,UAAU1Q,EAAUxkB,EAvBzB,CAwBJ,EAEAy0B,cAAe,SAAS/sB,GACpB,OAAOtoB,EAAEO,OAAO,CACZiwB,KAAMzwB,KAAKywB,KACX7P,OAAQ5gB,KAAK4gB,OACb6zB,aAAcz0C,KAAKy0C,cACpBlsB,GAAK,CAAC,EACb,EAEAytB,SAAU,SAASvlB,GAAO,EAC1B5P,KAAM,SAAS4P,GAAO,EACtBwlB,QAAS,SAAS7iC,EAAMwN,GAAS,IAIjC4zB,EAAuBqB,EAAiBr1C,OAAO,CAC/Cy1C,QAAS,SAAS7iC,EAAM8iC,GACpB,OAAO9iC,EAAK03B,UAAU,EAAGoL,EAC7B,EAEAr1B,KAAM,SAAS4P,GACX,OAAOA,EAAKiB,eAChB,EAEAskB,SAAU,SAASvlB,GACf,OAAOA,EAAKuF,SAChB,EAEAkf,MAAO,SAASn0C,GACZ,IAAIwnB,EAAIvoB,KAAKs1C,cAAcv0C,GAC3B,OAAO,IAAIyzC,EAAqBjsB,EACpC,IAGAgtB,EAAwBM,EAAiBr1C,OAAO,CAChDy1C,QAAS,SAAS7iC,EAAM8iC,GACpB,OAAO9iC,EAAK03B,UAAUoL,EAC1B,EAEAr1B,KAAM,SAAS4P,GACX,OAAOA,EAAKI,WAChB,EAEAmlB,SAAU,SAASvlB,GACf,OAAOA,EAAKE,UAChB,EAEAukB,MAAO,SAASn0C,GACZ,IAAIwnB,EAAIvoB,KAAKs1C,cAAcv0C,GAC3B,OAAO,IAAIw0C,EAAsBhtB,EACrC,IAGJ/nB,EAAOG,EAAM0B,GAAG4G,OAAQ,CACpBmpC,iBAAkBA,EAClBC,cAAeA,EACfI,cAAeA,EACfC,YAAaA,EACbsB,gBAAiBA,EACjBa,WAAYA,EACZH,qBAAsBA,EACtBF,qBAAsBA,EACtBe,sBAAuBA,IAG3Bl1C,EAAa,aAAc,IAAIC,EAAK,CAAEmV,IAAK,IAAKoU,MAAM,EAAMxoB,QAASqxC,KACrEryC,EAAa,SAAU,IAAIw0C,EAAW,CAAEp/B,IAAK,IAAKoU,MAAM,EAAMC,OAAO,EAAMznB,GAAI,CAAEorB,QAAQ,MACzFptB,EAAa,WAAY,IAAIC,EAAK,CAAEmV,IAAK,CAAC/S,EAAKouC,MAAOpuC,EAAKyzC,UAAWh1B,iBAAiB,EAAM9f,QAAS2yC,IAErG,CA3lBD,CA2lBG9xC,OAAOvB,MAAM0uB,QAEhB,SAAUpvB,GAEV,IAAIU,EAAQuB,OAAOvB,MACfwB,EAAQxB,EAAMwB,MACd3B,EAASP,EAAEO,OACXuG,EAASpG,EAAM0B,GAAG4G,OAClB9B,EAAUxG,EAAM0B,GAAG0E,OAAO/F,GAAGD,QAAQoG,QACrC+B,EAAMnC,EAAOoC,IACb+kC,EAAannC,EAAOmnC,WACpB5qC,EAAcyD,EAAOzD,YACrBjD,EAAeiD,EAAYjD,aAC3B4G,EAAiB3D,EAAY2D,eAC7BuN,EAAazN,EAAOyN,WAEpB4hC,EAAoBj0C,EAAM3B,OAAO,CACjCM,KAAM,SAAS4C,GACX1D,KAAK0D,OAASA,CAClB,EAEAkU,SAAU,SAAS6Y,EAAM5H,GACrB,IAAIllB,EAAGksB,EAAK4F,EAEZ,IAAK9xB,EAAI,EAAGksB,EAAMhH,EAAS/mB,OAAQ6B,EAAIksB,EAAKlsB,IAExC,KADA8xB,EAAQ5M,EAASllB,MACFuF,EAAIsQ,iBAAiBiX,EAAMgF,GACtC,OAAO,EAIf,OAAO,CACX,EAEAmZ,aAAc,SAAS/mB,GACnB,IAEIlkB,EAAGksB,EAAKwmB,EAFR3yC,EAAS1D,KAAK0D,OACd4yC,EAAW,GAGf,IAAK3yC,EAAI,EAAGksB,EAAMhI,EAAM/lB,OAAQ6B,EAAIksB,EAAKlsB,IAAK,CAC1C,IAAK,IAAI4yC,EAAI7yC,EAAO5B,OAAS,EAAGy0C,GAAK,KACjCF,EAAYntC,EAAIwvB,OAAO7Q,EAAMlkB,GAAID,EAAO6yC,GAAG1yC,MAAQgkB,EAAMlkB,GAAKuF,EAAI4xB,sBAAsBjT,EAAMlkB,GAAID,EAAO6yC,GAAG1yC,OADxE0yC,KAOxC,IAAKF,GAA2C,SAA9BA,EAAUpd,gBACxB,MAAO,GAGPh5B,EAAE2D,QAAQyyC,EAAWC,GAAY,GACjCA,EAASl1C,KAAKi1C,EAEtB,CAIA,IAFAr2C,KAAKw2C,mBAAmBF,GAEnB3yC,EAAI,EAAGksB,EAAMymB,EAASx0C,OAAQ6B,EAAIksB,EAAKlsB,IACxC,GAAI3D,KAAK4X,SAAS0+B,EAAS3yC,GAAI2yC,GAC3B,MAAO,CAACA,EAAS3yC,IAIzB,OAAO2yC,CACX,EACAE,mBAAoB,SAAS3uB,GACzB,IAAIlkB,EAAG8sB,EAAM/lB,EACb,IAAK/G,EAAI,EAAGA,EAAIkkB,EAAM/lB,OAAQ6B,IAC1B8sB,EAAO5I,EAAMlkB,GAEb+G,GADAA,EAAUxB,EAAI6a,GAAG0M,EAAM,MAAQA,EAAOvnB,EAAIwB,QAAQ+lB,KAC7BvnB,EAAIoT,KAAK5R,GAAWA,EAAQme,SAAS,GAAKne,EAC3DxB,EAAI6a,GAAGrZ,EAAS,QAChB+lB,EAAO5I,EAAMlkB,GAAK+G,EAG9B,EAEAokC,WAAY,SAASD,EAAY4H,GAC7B,IACI9yC,EAAGksB,EAAKY,EAAM5sB,EAAMwjB,EADpB3jB,EAAS1D,KAAK0D,OAEds1B,EAAiB9vB,EAAI8vB,eAAe6V,GACpCn5B,EAAa1V,KAAKe,SAAWf,KAAKe,QAAQ2U,WAC1CghC,EAAe3vC,EAAO+X,WAE1B,IAAKnb,EAAI,EAAGksB,EAAMnsB,EAAO5B,OAAQ6B,EAAIksB,EAAKlsB,IAAK,CAK3C,GAJA8sB,EAAOoe,EACPhrC,EAAOH,EAAOC,GAAGE,KACjBwjB,EAAa3jB,EAAOC,GAAGyW,KAEnB1E,GAAc7R,GAAmB,aAAXA,EAAK,GAAmB,CAC9C,IAAIw7B,EAAYqX,EAAajN,gBAAgBhZ,GAC7C,GAAI4O,GAAan2B,EAAI4pB,WAAWuM,EAAWhY,GACvC,OAAOoJ,CAEf,CAEA,KAAOA,GAAQvnB,EAAI0oB,aAAaoH,EAAgBvI,IAAO,CACnD,GAAIvnB,EAAIwvB,OAAOjI,EAAM5sB,IAASqF,EAAI4pB,WAAWrC,EAAMpJ,GAC/C,OAAOoJ,EAGX,GAAIgmB,GAASA,EAAMhmB,GACf,MAGJA,EAAOA,EAAKrE,UAChB,CACJ,CACA,OAAO,IACX,EAEA7T,UAAW,SAASsP,GAChB,IAKIlkB,EAAGksB,EALH7mB,EAAOhJ,KACP8uC,EAAa,SAASre,GACd,OAAOznB,EAAK8lC,WAAW5lC,EAAIyoB,WAAWlB,GAAQA,EAAKrE,WAAaqE,EACpE,EACJjL,EAASspB,EAAWjnB,EAAM,IAG9B,IAAKrC,EACD,MAAO,GAGX,IAAK7hB,EAAI,EAAGksB,EAAMhI,EAAM/lB,OAAQ6B,EAAIksB,EAAKlsB,IACrC,GAAI6hB,GAAUspB,EAAWjnB,EAAMlkB,IAC3B,MAAO,GAIf,OAAO6hB,EAAOxF,SAASpZ,aAC3B,EAEA4R,YAAa,SAASqP,EAAO4uB,GACzB,IAAK,IAAI9yC,EAAI,EAAGksB,EAAMhI,EAAM/lB,OAAQ6B,EAAIksB,EAAKlsB,IACzC,IAAK3D,KAAK8uC,WAAWjnB,EAAMlkB,GAAI8yC,GAC3B,OAAO,EAIf,OAAO,CACX,IAGAE,EAAiBx0C,EAAM3B,OAAO,CAC9BM,KAAM,SAAS4C,EAAQ4iB,GACnBtmB,KAAK0D,OAASA,EACd1D,KAAKsmB,OAASA,EACdtmB,KAAKqY,OAAS,IAAI+9B,EAAkB1yC,EACxC,EAEAga,KAAM,SAASzB,EAAKoL,EAAYQ,GAE5B,IAAIiS,EAAiC,GAAhBjS,EAAM/lB,OAAcoH,EAAI8pB,kBAAkBnL,EAAM,IAAM3e,EAAI4wB,eAAeU,MAAM,KAAM3S,GAEtG3e,EAAI2tB,SAASiD,KACbA,EAAiB5wB,EAAI8pB,kBAAkB8G,IAG3C,IAGIn2B,EAAGizC,EAHH7c,EAAY7wB,EAAI0sB,sBAAsBkE,GACtC/qB,EAAW7F,EAAIsoB,cAAcuI,EAAU,IACvCrvB,EAAUxB,EAAI+iB,OAAO6N,EAAe5G,cAAejX,EAAKoL,GAG5D,IAAK1jB,EAAI,EAAGA,EAAIo2B,EAAUj4B,OAAQ6B,IAC9BizC,EAAW7c,EAAUp2B,GACjBuF,EAAIstB,QAAQogB,IACZ1tC,EAAIkR,KAAKw8B,EAAUvvB,GAEf3c,EAAQ6nB,WAAWzwB,SACnBoH,EAAIoR,aAAa5P,EAASksC,GAC1BlsC,EAAUA,EAAQioB,WAAU,IAGhC5jB,EAAW7F,EAAIsoB,cAAcolB,GAAY,GAK7ClsC,EAAQ2U,YAAYu3B,GAGpBlsC,EAAQimB,YACRznB,EAAIgvB,SAAS4B,EAAgBpvB,EAASqE,EAE9C,EAEAyrB,MAAO,SAAS3S,GACZ,IAAInkB,EAAQ4iB,EAAStmB,KAAKsmB,OAE1B,SAASe,EAAW3jB,GAChB,OAAOlD,EAAO,CAAC,EAAGkD,GAAUA,EAAO0W,KAAMkM,EAC7C,CAEAtmB,KAAK62C,kBAAkBhvB,GAAO,GAE9B,IAAIivB,EAAS5tC,EAAI+P,OAAO,MAAO4O,GAE3BkvB,EAAkB1vB,EADJ/jB,EAAYE,aAAa,MAAOxD,KAAK0D,SAOvD,GALAzD,EAAEkZ,KAAK29B,GAAQ,WACX5tC,EAAIkR,KAAKpa,KAAM+2C,EACnB,IAGID,EAAOh1C,QAAU+lB,EAAM/lB,OAA3B,CAIA,IAAIk1C,EAAY9tC,EAAI+P,OAAO,MAAO4O,GAAO,GACrCqnB,EAAclvC,KAAKqY,OAAOu2B,aAAaoI,GAE3C,GAAI9H,EAAYptC,OACZ,IAAK,IAAI6B,EAAI,EAAGksB,EAAMqf,EAAYptC,OAAQ6B,EAAIksB,EAAKlsB,IAC/CD,EAASJ,EAAYE,aAAa0F,EAAIzF,KAAKyrC,EAAYvrC,IAAK3D,KAAK0D,QACjEwF,EAAIkR,KAAK80B,EAAYvrC,GAAI0jB,EAAW3jB,SAGxCA,EAAS1D,KAAK0D,OAAO,GACrB1D,KAAK0d,KAAKha,EAAOG,KAAK,GAAIwjB,EAAW3jB,GAASszC,EAZlD,CAcJ,EAEAH,kBAAmB,SAAShvB,EAAOovB,GAC/B,GAAKj3C,KAAK0V,aAAV,CAGA,IAAIwhC,EAAkB5zC,EAAYE,aAAa,YAAaxD,KAAK0D,QACjE,GAAKwzC,EAKL,IAFA,IAAIR,EAAe3vC,EAAO+X,WAEjBnb,EADDkkB,EAAM/lB,OAAS,EACP6B,GAAK,EAAGA,IAAK,CACzB,IAAI8lC,EAAkBiN,EAAajN,gBAAgB5hB,EAAMlkB,IACpD8lC,IAGDA,IAAoB5hB,EAAMlkB,EAAI,KAC1BszC,EACA/tC,EAAIkR,KAAKqvB,EAAiByN,EAAgB98B,MAE1ClR,EAAIuwB,QAAQgQ,EAAiByN,EAAgB98B,KAAKnO,QAG1D4b,EAAM2Z,OAAO79B,EAAG,GACpB,CApBA,CAqBJ,EAEA+R,WAAY,WACR,OAAO1V,KAAKiJ,QAAUjJ,KAAKiJ,OAAOlI,QAAQ2U,UAC9C,EAEA4B,OAAQ,SAASuQ,GACb,IAAIlkB,EAAG25B,EAAG2R,EAAYkI,EAAa1zC,EAInC,IAFAzD,KAAK62C,kBAAkBhvB,GAAO,GAEzBlkB,EAAI,EAAG25B,EAAIzV,EAAM/lB,OAAQ6B,EAAI25B,EAAG35B,KACjCsrC,EAAajvC,KAAKqY,OAAOy2B,WAAWjnB,EAAMlkB,OAEtCF,EAAOyF,EAAIzF,KAAKwrC,IAChBkI,EAAc7zC,EAAYE,aAAaC,EAAMzD,KAAK0D,SAClC0W,KAAKnO,OACjB/C,EAAIuwB,QAAQwV,EAAYkI,EAAY/8B,KAAKnO,OAEzCkrC,EAAY/8B,KAAK8B,WACjBhT,EAAI+Z,YAAYgsB,EAAYkI,EAAY/8B,KAAK8B,WAI7D,EAEAyH,OAAQ,SAAS9O,GACb,IAAI7L,EAAOhJ,KACP6nB,EAAQ3e,EAAI4e,SAAStT,EAAWqT,MAAMhT,GAAQ3L,EAAI6e,iBAAiB,GAEnE/e,EAAKqP,OAAOG,YAAYqP,GACxB7e,EAAKsO,OAAOuQ,GAEZ7e,EAAKwxB,MAAM3S,EAEnB,IAGAuvB,EAAuBj1C,EAAM3B,OAAO,CACpCM,KAAM,SAAS4C,EAAQ4iB,GACnB,IAAItd,EAAOhJ,KACXgJ,EAAKtF,OAASA,EACdsF,EAAKsd,OAASA,EACdtd,EAAKqP,OAAS,IAAI+9B,EAAkB1yC,EACxC,EAEA82B,MAAO,SAAS3S,GACZ,IAGIlkB,EAAGksB,EAAKvT,EAAMywB,EAAWl4B,EACzBjM,EACAqc,EACAiL,EANAxsB,EAAS1D,KAAK0D,OACd0vB,EAASlqB,EAAIiqB,aAAatL,GAC1BwvB,EAAY3zC,EAAO,GAAGG,KAAK,GAO/B,GAAIuvB,EAAOtxB,OACP,IAAK6B,EAAI,EAAGksB,EAAMuD,EAAOtxB,OAAQ6B,EAAIksB,EAAKlsB,IACtCusB,EAAQkD,EAAOzvB,GACG3D,KAAK0V,cAAgB3O,EAAO+X,WAAW2qB,gBAAgBvZ,KAKtD,OAFfjL,EAAU/b,EAAIzF,KAAKysB,KAGf5T,EAAO4T,EAAM9D,WACb2gB,EAAY,IAAIhmC,EAAOuwC,cAAch7B,EAAK0D,SAASpZ,cAAeywC,IAClExiC,EAAQ7U,KAAKiJ,OAAOsL,eACd+N,WAAW8Q,EAAOzvB,IACxBopC,EAAUppB,OAAO9O,IACVwiC,IAAyB,MAAXpyB,GAAmBiL,EAAM7I,WAAW4R,iBACzD,IAAI0d,EAAejzC,EAAQ1D,KAAKsmB,QAAQkU,MAAMtK,EAAMqC,aAEpD3pB,EAAUM,EAAIyvB,UAAUzI,EAAOmnB,GAC/BnuC,EAAIkR,KAAKxR,EAASlF,EAAO,GAAG0W,YAIrC,CACH,IAAIm9B,EAAiB,IAAIZ,EAAejzC,EAAQ1D,KAAKsmB,QACrDixB,EAAetuC,OAASjJ,KAAKiJ,OAC7BsuC,EAAe/c,MAAM3S,EACzB,CACJ,EAEAlE,OAAQ,SAAS9O,GACb,IAAIgT,EAAQrT,EAAW4D,UAAUvD,GAC5BgT,EAAM/lB,SACP+S,EAAM6uB,mBAAmB7uB,EAAM8C,0BAC/BkQ,EAAQrT,EAAW4D,UAAUvD,IAClB/S,SACP+lB,EAAQ3e,EAAI0sB,sBAAsB/gB,EAAM8C,2BAIhD3X,KAAKw6B,MAAM3S,EACf,EAEAnS,WAAY,WACR,OAAO1V,KAAKiJ,QAAUjJ,KAAKiJ,OAAOlI,QAAQ2U,UAC9C,IAGA8hC,EAAkBtJ,EAAW1tC,OAAO,CAAEM,KAAM,SAASC,GACjDmtC,EAAWltC,GAAGF,KAAKG,KAAKjB,KAAMQ,EAAOO,EAAS,CAC1CsX,OAAQ,IAAI+9B,EAAkBr1C,EAAQ2C,QACtCqpC,UAAW,WACP,OAAO,IAAI4J,EAAe51C,EAAQ2C,OACtC,IAER,IAGJlD,EAAOuG,EAAQ,CACXqvC,kBAAmBA,EACnBO,eAAgBA,EAChBS,qBAAsBA,EACtBI,gBAAiBA,IAGrB,IAAIC,EAAe,CAAC,KAAK,KAAK,MAE9BxwC,EAAe,cAAe,CAC1B,CAAEpD,KAAMqF,EAAI6mB,qBAAsB3V,KAAM,CAAEnO,MAAO,CAAEyrC,UAAW,UAC9D,CAAE7zC,KAAM,CAAC,OAAQuW,KAAM,CAAEnO,MAAO,CAAE0rC,MAAS,OAAQC,QAAS,GAAIC,WAAY,GAAIC,YAAa,MAC7F,CAAEj0C,KAAM,CAAC,aAAcuW,KAAM,CAAEnO,MAAO,CAAE0rC,MAAS,OAAQC,QAAS,GAAIC,WAAY,GAAIC,YAAa,MACnG,CAAEj0C,KAAM4zC,EAAcr9B,KAAM,CAAEnO,MAAO,CAAEyrC,UAAW,OAAQK,kBAAmB,QAEjF13C,EAAa,cAAe,IAAIm3C,EAAgB,CAC5C9zC,OAAQyD,EAAQhD,YAChB9B,GAAI,CACAmvC,WAAW,EACXjrB,MAAO,YAIftf,EAAe,gBAAiB,CAC5B,CAAEpD,KAAMqF,EAAI6mB,qBAAsB3V,KAAM,CAAEnO,MAAO,CAAEyrC,UAAW,YAC9D,CAAE7zC,KAAM,CAAC,OAAQuW,KAAM,CAAEnO,MAAO,CAAE2rC,QAAS,QAASC,WAAY,OAAQC,YAAa,OAAQH,MAAS,MACtG,CAAE9zC,KAAM,CAAC,aAAcuW,KAAM,CAAEnO,MAAO,CAAE2rC,QAAS,QAASC,WAAY,OAAQC,YAAa,OAAQH,MAAS,MAC5G,CAAE9zC,KAAM4zC,EAAcr9B,KAAM,CAAEnO,MAAO,CAAEyrC,UAAW,SAAUK,kBAAmB,cAEnF13C,EAAa,gBAAiB,IAAIm3C,EAAgB,CAC9C9zC,OAAQyD,EAAQ/C,cAChB/B,GAAI,CACAmvC,WAAW,EACXjrB,MAAO,YAIftf,EAAe,eAAgB,CAC3B,CAAEpD,KAAMqF,EAAI6mB,qBAAsB3V,KAAM,CAAEnO,MAAO,CAAEyrC,UAAW,WAC9D,CAAE7zC,KAAM,CAAC,OAAQuW,KAAM,CAAEnO,MAAO,CAAE0rC,MAAS,QAASC,QAAS,GAAIC,WAAY,GAAIC,YAAa,MAC9F,CAAEj0C,KAAM,CAAC,aAAcuW,KAAM,CAAEnO,MAAO,CAAE0rC,MAAS,QAASC,QAAS,GAAIC,WAAY,GAAIC,YAAa,MACpG,CAAEj0C,KAAM4zC,EAAcr9B,KAAM,CAAEnO,MAAO,CAAEyrC,UAAW,QAASK,kBAAmB,cAElF13C,EAAa,eAAgB,IAAIm3C,EAAgB,CAC7C9zC,OAAQyD,EAAQ9C,aAChBhC,GAAI,CACAmvC,WAAW,EACXjrB,MAAO,YAIftf,EAAe,cAAe,CAC1B,CAAEpD,KAAMqF,EAAI6mB,qBAAsB3V,KAAM,CAAEnO,MAAO,CAAEyrC,UAAW,aAC9D,CAAE7zC,KAAM,CAAC,OAAQuW,KAAM,CAAEnO,MAAO,CAAE2rC,QAAS,QAASC,WAAY,OAAQC,YAAa,OAAQH,MAAS,MACtG,CAAE9zC,KAAM,CAAC,aAAcuW,KAAM,CAAEnO,MAAO,CAAE2rC,QAAS,QAASC,WAAY,OAAQC,YAAa,OAAQH,MAAS,MAC5G,CAAE9zC,KAAM4zC,EAAcr9B,KAAM,CAAEnO,MAAO,CAAEyrC,UAAW,UAAWK,kBAAmB,QAEpF13C,EAAa,cAAe,IAAIm3C,EAAgB,CAC5C9zC,OAAQyD,EAAQ7C,YAChBjC,GAAI,CACAmvC,WAAW,EACXjrB,MAAO,WAId,CAtaD,CAsaGrkB,OAAOvB,MAAM0uB,QAEhB,SAAUpvB,GAGV,IAAIU,EAAQuB,OAAOvB,MACfwB,EAAQxB,EAAMwB,MACd3B,EAASP,EAAEO,OACXuG,EAASpG,EAAM0B,GAAG4G,OAClBC,EAAMnC,EAAOoC,IACbqL,EAAazN,EAAOyN,WACpBrU,EAAU4G,EAAO5G,QACjB+tC,EAAannC,EAAOmnC,WACpBkI,EAAoBrvC,EAAOqvC,kBAC3Bh+B,EAAY5D,EAAW4D,UACvB/X,EAAe0G,EAAOzD,YAAYjD,aAElC23C,EAAmB5B,EAAkB51C,OAAO,CAC5CM,KAAM,SAASC,GACXf,KAAKic,IAAMlb,EAAQkb,IACnBjc,KAAKoa,KAAOrZ,EAAQqZ,KACpBpa,KAAKi4C,QAAUl3C,EAAQk3C,QAEvB,IAAIp0C,EAAO7D,KAAK6D,KAAO,CAAa,MAAZ7D,KAAKic,IAAc,KAAO,KAAMjc,KAAKic,KACzDvY,EAAS,CAAC,CAAEG,KAAMA,EAAMuW,KAAMpa,KAAKoa,OAEnCpa,KAAKi4C,SACLv0C,EAAOtC,KAAK,CACRyC,KAAMA,EACNuW,KAAMpa,KAAKi4C,UAInB7B,EAAkBp1C,GAAGF,KAAKG,KAAKjB,KAAM0D,EACzC,EAEAw0C,YAAa,SAASznB,GAClB,OAAOvnB,EAAI4pB,WAAWrC,EAAMzwB,KAAKoa,OAAUpa,KAAKi4C,SAAW/uC,EAAI4pB,WAAWrC,EAAMzwB,KAAKi4C,QACzF,EAEAE,OAAQ,SAAS1nB,GACb,OAAOvnB,EAAIoT,KAAKmU,EACpB,EAEAjY,YAAa,SAASqP,GAClB,IACIonB,EAAYtrC,EADZurC,EAAc,GAGlB,IAAKvrC,EAAI,EAAGA,EAAIkkB,EAAM/lB,OAAQ6B,KAC1BsrC,EAAajvC,KAAK8uC,WAAWjnB,EAAMlkB,GAAI3D,KAAKm4C,UAE1BjvC,EAAIzF,KAAKwrC,IAAejvC,KAAKic,KAAOjc,KAAKk4C,YAAYjJ,IACnEC,EAAY9tC,KAAK6tC,GAIzB,GAAIC,EAAYptC,OAAS,EACrB,OAAO,EAGX,GAAIotC,EAAYptC,QAAU+lB,EAAM/lB,OAC5B,OAAO,EAIX,IAAK6B,EAAI,EAAGA,EAAIurC,EAAYptC,QACpBotC,EAAYvrC,GAAGyoB,YAAc6iB,EAAW7iB,WADZzoB,IAKhC,GAAIurC,EAAYvrC,IAAMsrC,EAClB,OAAO,EAIf,OAAO,CACX,EAEAL,aAAc,SAAS/mB,GACnB,IAAIwuB,EAAYr2C,KAAK8uC,WAAWjnB,EAAM,GAAI7nB,KAAKm4C,QAE/C,OAAI9B,GAAantC,EAAIzF,KAAK4yC,IAAcr2C,KAAKic,IAClCo6B,EAGJ,IACX,IAIAiB,EAAgBn1C,EAAM3B,OAAO,CAC7BM,KAAM,SAASC,EAASq3C,GACpB,IAAIpvC,EAAOhJ,KACXe,EAAUd,EAAE0mB,cAAc5lB,GAAWA,EAAU,CAAEkb,IAAKlb,EAASqZ,KAAM,MACrEpR,EAAKiT,IAAMlb,EAAQkb,IACnBjT,EAAKoR,KAAOrZ,EAAQqZ,KACpBpR,EAAKqP,OAAS,IAAI2/B,EAAiBj3C,GACnCiI,EAAKovC,UAAYA,CACrB,EAEAD,OAAQ,SAAS1nB,GACb,OAAOvnB,EAAIoT,KAAKmU,EACpB,EAEA/a,WAAY,WACR,OAAO1V,KAAKiJ,UAAYjJ,KAAKiJ,OAAOlI,QAAQ2U,UAChD,EAEAgI,KAAM,SAASpB,EAAMuL,GACjB,IACIlkB,EAAG8sB,EADH4nB,EAAKnvC,EAAI+iB,OAAO3P,EAAK4W,cAAe,MAEpColB,EAAct4C,KAAK0V,aAAe3O,EAAO+X,WAAWugB,UAAYp/B,EAAEstB,KAEtE,IAAK5pB,EAAI,EAAGA,EAAIkkB,EAAM/lB,OAAQ6B,IAG1B,GAFA8sB,EAAO5I,EAAMlkB,GAETuF,EAAI6a,GAAG0M,EAAM,MACbnU,EAAK+C,YAAYoR,QAIrB,GAAIzwB,KAAKm4C,OAAO1nB,GACZ,KAAOA,EAAKE,YACRrU,EAAK+C,YAAYoR,EAAKE,iBAK9B,GAAIznB,EAAI6a,GAAG0M,EAAM,MAAjB,CACI,KAAOA,EAAKE,YACR0nB,EAAGh5B,YAAYoR,EAAKE,YAExBrU,EAAK+C,YAAYg5B,GACjB5nB,EAAKpR,YAAY/C,GACjBA,EAAOA,EAAKqW,WAAU,GACtB0lB,EAAKA,EAAG1lB,WAAU,EAEtB,MAEA0lB,EAAGh5B,YAAYoR,GAEXvnB,EAAIstB,QAAQ/F,KACZnU,EAAK+C,YAAYg5B,GACZC,EAAY7nB,IACbvnB,EAAIgwB,OAAOzI,GAEf4nB,EAAKA,EAAG1lB,WAAU,IAItB0lB,EAAG1nB,YACHrU,EAAK+C,YAAYg5B,EAEzB,EAEAE,YAAa,SAAS56B,EAAQkK,GAC1B,IAAK,IAAIlkB,EAAI,EAAGA,EAAIkkB,EAAM/lB,OAAQ6B,IAC9B,GAAIuF,EAAIsQ,iBAAiBmE,EAAQkK,EAAMlkB,IACnC,OAAO,EAIf,OAAO,CACX,EAEA2yC,SAAU,SAASD,EAAWxuB,GAC1B,GAA2B,YAAvBwuB,EAAUn6B,UAAyB,CACnC,IAAIoa,EAAU+f,EAAUxlB,YAExB,GAAIyF,GAAWptB,EAAIstB,QAAQF,GACvB,OAAO,EAKX,IAFAA,EAAU+f,EAAU3kB,kBAELxoB,EAAIstB,QAAQF,GACvB,OAAO,CAEf,CAEA,OAAOt2B,KAAKu4C,YAAYlC,EAAWxuB,IAAU3e,EAAI2tB,SAASwf,IAAoC,GAAtBA,EAAUt1B,QACtF,EAEAy3B,aAAc,SAAS/nB,GACnB,IAAIoK,EAAW3xB,EAAIyxB,gBAAgBlK,GAEnC,OAAOxwB,EAAEwwB,GAAMsf,aAAalV,EAAU,QAC1C,EAEAxS,MAAO,SAASxT,GACZ,IACIurB,EAAOC,EAAKxb,EADZgD,EAAQzP,EAAUvD,GAGtB,GAAIgT,EAAM/lB,OAAQ,CACds+B,EAAQl3B,EAAI+pB,aAAapL,EAAM,GAAI,CAAC,OACpCwY,EAAMn3B,EAAI+pB,aAAapL,EAAMA,EAAM/lB,OAAS,GAAI,CAAC,OACjD+S,EAAMyuB,eAAelD,GACrBvrB,EAAM4uB,YAAYpD,GAElB,IAAK,IAAI18B,EAAI,EAAG25B,EAAIzV,EAAM/lB,OAAQ6B,EAAI25B,EAAG35B,IAAK,CAC1C,IAAIsrC,EAAajvC,KAAKqY,OAAOy2B,WAAWjnB,EAAMlkB,IAC1CsrC,KACApqB,EAAU7kB,KAAKw4C,aAAavJ,IAChBntC,OACR0S,EAAW6T,MAAMxT,EAAOgQ,EAAQrF,OAAO,IAAI,GAE3ChL,EAAW6T,MAAMxT,EAAOo6B,GAAY,GAGhD,CACJ,CACJ,EAEAwJ,MAAO,SAASx8B,EAAKgzB,GAGjB,IAFA,IAAuCpuB,EAAnC+P,EAAOqe,EAAWvd,gBAEfd,IAA2B,YAAlBA,EAAK1U,WAA6C,GAAjB0U,EAAK7P,UAAiB7X,EAAI2sB,aAAajF,KACpFA,EAAOA,EAAKc,gBAIhB,GAAId,GAAQ1nB,EAAIzF,KAAKmtB,IAAS3U,GAAOjc,KAAKqY,OAAO6/B,YAAYtnB,GAAO,CAChE,KAAOqe,EAAWte,YACdC,EAAKvR,YAAY4vB,EAAWte,YAEhCznB,EAAIoO,OAAO23B,GACXA,EAAare,CACjB,CAGA,IADA/P,EAAOouB,EAAWpe,YACXhQ,IAA2B,YAAlBA,EAAK3E,WAA6C,GAAjB2E,EAAKE,UAAiB7X,EAAI2sB,aAAahV,KACpFA,EAAOA,EAAKgQ,YAIhB,GAAIhQ,GAAQ3X,EAAIzF,KAAKod,IAAS5E,GAAOjc,KAAKqY,OAAO6/B,YAAYr3B,GAAO,CAChE,KAAOouB,EAAWjZ,WACdnV,EAAKvG,aAAa20B,EAAWjZ,UAAWnV,EAAK8P,YAEjDznB,EAAIoO,OAAO23B,EACf,CACJ,EAEAyJ,UAAW,SAASjoB,GAChB,OACIA,GAAQA,EAAKyC,cAAcne,OAC1B,0BAA0BY,KAAKzM,EAAIzF,KAAKgtB,MACxCA,EAAKpJ,WAAW4R,eAEzB,EAEA0f,iBAAkB,SAAS9wB,GACvB,IAGIonB,EAHAjmC,EAAOhJ,KACPqY,EAASrP,EAAKqP,OACd4D,EAAMjT,EAAKiT,IAmBf,OAhBAgzB,EAAa52B,EAAOu2B,aAAa/mB,MAK7BonB,GADA52B,EAAS,IAAI2/B,EAAiB,CAAE/7B,IAAY,MAAPA,EAAc,KAAO,QACtC2yB,aAAa/mB,IAGhConB,IAIDA,GADAA,GADA52B,EAAS,IAAI2/B,EAAiB,CAAE/7B,IAAKA,KACjB2yB,aAAa/mB,KACN7e,EAAKqP,OAAO6/B,YAAYjJ,GAAc,KAAOA,GAIrEA,CACX,EAEA2J,eAAgB,SAASC,EAAShxB,GAC9B,IAOI0K,EAPAtW,EAAMjc,KAAKic,IACX7B,EAAOpa,KAAKoa,KACZ0f,EAAiB5wB,EAAIqxB,wBAAwB1S,GAE7CkS,EAAY,GACZkV,EAAajvC,KAAK24C,iBAAiB9wB,GAsBvC,SAASixB,IACL/e,EAAU34B,KAAKpB,KACnB,CApBI,oBAAoB2V,KAAKzM,EAAIzF,KAAKq2B,IAClCvH,EAAatyB,EAAEuV,IAAIqS,GAAO,SAAS4I,GAC/B,OAAOvnB,EAAI+pB,aAAaxC,EAAM,CAAC,MACnC,KAEA8B,EAAarpB,EAAI0sB,sBAAsBkE,GAEnC75B,EAAEu1B,KAAKjD,EAAYrpB,EAAIstB,SAAS10B,SAChCywB,EAAatyB,EAAEu1B,KAAKjD,EAAY,SAAU9B,GACtC,OAAOzwB,KAAKu4C,YAAY9nB,EAAM5I,EACjC,EAAEte,KAAKvJ,QAGPuyB,EAAWzwB,SACZywB,EAAa1K,IAQrB,IAAK,IAAIlkB,EAAI,EAAGA,EAAI4uB,EAAWzwB,OAAQ6B,IAAK,CACxC,IAAI8xB,EAAQlD,EAAW5uB,KACNsrC,IAAe/lC,EAAIsQ,iBAAiBy1B,EAAYxZ,KAAWz1B,KAAKs2C,SAAS7gB,EAAO5N,KAM7FonB,GAAcjvC,KAAKm4C,OAAO1iB,IAE1Bx1B,EAAEkZ,KAAKsc,EAAM5M,SAAUiwB,GACvB5vC,EAAIoO,OAAOme,IAEXsE,EAAU34B,KAAKq0B,GAEvB,CAgBA,IAdIsE,EAAUj4B,QAAUywB,EAAWzwB,QAAU9B,KAAK04C,UAAU5e,KACxDC,EAAY,CAACD,IAGZmV,IACDA,EAAa/lC,EAAI+iB,OAAO6N,EAAe5G,cAAejX,EAAK7B,GACvDlR,EAAIstB,QAAQuD,EAAU,KACtB7wB,EAAIowB,gBAAgBS,EAAU,GAAIkV,GAEtC/lC,EAAIoR,aAAa20B,EAAYlV,EAAU,KAG3C/5B,KAAK0d,KAAKuxB,EAAYlV,GAEf7wB,EAAI6rB,MAAMka,EAAWpe,cACxB3nB,EAAIoO,OAAO23B,EAAWpe,aAGrB7wB,KAAKqY,OAAO6/B,YAAYjJ,KACzBA,EAAW5V,gBAAgB,QAC3B4V,EAAWhjC,MAAM8sC,cAAgB,GACjC7vC,EAAIowB,gBAAgBpwB,EAAI+iB,OAAO6N,EAAe5G,cAAejX,EAAK7B,GAAO60B,GAAY,IAGrFA,GAAkD,KAApCA,EAAWj6B,aAAa,SACtCi6B,EAAW5V,gBAAgB,QAG1BnwB,EAAI6a,GAAGkrB,EAAYhzB,IACpB/S,EAAIyvB,UAAUsW,EAAYhzB,GAG9Bjc,KAAKy4C,MAAMx8B,EAAKgzB,EACpB,EAEAzU,MAAO,SAAS3S,GACZ,IAEImxB,EACAC,EACAJ,EACApoB,EALA9sB,EAAI,EACJu1C,EAAW,GAKX5b,EAAIzV,EAAM/lB,OACV2nC,EAAkBzpC,KAAK0V,aAAe3O,EAAO+X,WAAW2qB,gBAAkBxpC,EAAEstB,KAEhF,SAAS4rB,IACDH,GACAE,EAAS93C,KAAK,CACVy3C,QAASG,EACTnxB,MAAOoxB,GAGnB,CAGA,IAAKt1C,EAAI,EAAGA,EAAI25B,EAAG35B,IACf8sB,EAAOgZ,EAAgB5hB,EAAMlkB,KAAOkkB,EAAMlkB,GAC1Ck1C,EAAU3vC,EAAIyxB,gBAAgBlK,EAAM,CAAC,KAAK,KAAK,SAC1CuoB,GAAeH,GAAWG,EAK3BC,EAAU73C,KAAKqvB,IAJf0oB,IACAF,EAAY,CAACxoB,GACbuoB,EAAcH,GAQtB,IAFAM,IAEKx1C,EAAI,EAAGA,EAAIu1C,EAASp3C,OAAQ6B,IAC7B3D,KAAK44C,eAAeM,EAASv1C,GAAGk1C,QAASK,EAASv1C,GAAGkkB,MAE7D,EAEAqR,OAAQ,SAASkgB,GACb,IAEIv0B,EACAwzB,EACA7Y,EACA/J,EALA4jB,EAAWD,EAAGlmB,cAAciR,yBAC5BiU,EAAYp4C,KAAKo4C,UAMrB,IAAKC,EAAKe,EAAGzoB,WAAY0nB,EAAIA,EAAKA,EAAGxnB,YAAa,CAG9C,IAFA2O,EAAIt2B,EAAI+iB,OAAOmtB,EAAGlmB,cAAeklB,GAAa,KAEvCC,EAAG1nB,YACN8E,EAAQ4iB,EAAG1nB,WAEPznB,EAAIstB,QAAQf,IAER+J,EAAE7O,aACF0oB,EAASh6B,YAAYmgB,GACrBA,EAAIt2B,EAAI+iB,OAAOmtB,EAAGlmB,cAAeklB,GAAa,MAGlDiB,EAASh6B,YAAYoW,IAErB+J,EAAEngB,YAAYoW,GAIlB+J,EAAE7O,YACF0oB,EAASh6B,YAAYmgB,EAE7B,EAEA3a,EAAU7kB,KAAKw4C,aAAaY,IAEhB,IACRlwC,EAAImU,YAAYg8B,EAAUx0B,EAAQrF,OAAO,IACzCqF,EAAQrF,OAAOlI,UAEfpO,EAAImU,YAAYg8B,EAAUD,GAG9BlwC,EAAIoO,OAAO8hC,EACf,EAEA9hC,OAAQ,SAASuQ,GAEb,IADA,IAAIonB,EACKtrC,EAAI,EAAG25B,EAAIzV,EAAM/lB,OAAQ6B,EAAI25B,EAAG35B,KACrCsrC,EAAajvC,KAAKqY,OAAOy2B,WAAWjnB,EAAMlkB,MAGtC3D,KAAKk5B,OAAO+V,EAGxB,EAEAtrB,OAAQ,SAAS9O,GACb,IAAI7L,EAAOhJ,KACP6nB,EAAQzP,EAAUvD,GAClB+hC,EAAW/hC,EAAM8C,wBAErB,IAAKkQ,EAAM/lB,SACP+S,EAAM6uB,mBAAmBkT,KACzB/uB,EAAQzP,EAAUvD,IACP/S,QAAQ,CACf,IAAIsR,EAAOwjC,EAAS1jB,cAAc0V,eAAe,IACjD/zB,EAAM4B,eAAe4I,YAAYjM,GACjCyU,EAAQ,CAACzU,GACTyB,EAAMyN,WAAWlP,EAAKgZ,WAC1B,CAEJvE,EAAQ3e,EAAI4e,SAASD,EAAO3e,EAAI6e,iBAAiB,GAC7C/e,EAAKqP,OAAOG,YAAYqP,IACxB7e,EAAKqf,MAAMxT,GACX7L,EAAKsO,OAAOuQ,IAEZ7e,EAAKwxB,MAAM3S,EAEnB,IAIAyxB,EAAcn5C,EAAQK,OAAO,CAC7BM,KAAM,SAASC,GACXA,EAAQgsC,UAAY,IAAIuK,EAAc,CAAEr7B,IAAKlb,EAAQkb,IAAK7B,KAAMrZ,EAAQqZ,OACxEja,EAAQa,GAAGF,KAAKG,KAAKjB,KAAMe,EAC/B,IAGAw4C,EAAWrL,EAAW1tC,OAAO,CAC7BM,KAAM,SAASC,GACXf,KAAKe,QAAUA,EAEfmtC,EAAWltC,GAAGF,KAAKG,KAAKjB,KAAMQ,EAAOO,EAAS,CAC1CsX,OAAQ,IAAI2/B,EAAiBj3C,KAErC,EAEAM,QAAS,SAASisB,GACd,OAAO,IAAIgsB,EAAY94C,EAAO8sB,EAAkB,CAAErR,IAAKjc,KAAKe,QAAQkb,IAAK7B,KAAMpa,KAAKe,QAAQqZ,OAChG,IAGJ5Z,EAAOuG,EAAQ,CACXixC,iBAAkBA,EAClBV,cAAeA,EACfgC,YAAaA,EACbC,SAAUA,IAGdl5C,EAAa,sBAAuB,IAAIk5C,EAAS,CAAEt9B,IAAK,KAAM7B,KAAM,CAAEnO,MAAO,CAAE8sC,cAAe,IAAMjwC,KAAM,IAAMzG,GAAI,CAAEmvC,WAAW,EAAMjrB,MAAO,YAC9IlmB,EAAa,oBAAqB,IAAIk5C,EAAS,CAAEt9B,IAAK,KAAM7B,KAAM,CAAEnO,MAAO,CAAE8sC,cAAe,IAAMjwC,KAAM,IAAMzG,GAAI,CAAEmvC,WAAW,EAAMjrB,MAAO,YAC5IlmB,EAAa,uBAAwB,IAAIk5C,EAAS,CAAEt9B,IAAK,KAAM7B,KAAM,CAAEnO,MAAO,CAAE8sC,cAAe,gBAAmBd,QAAS,CAAEnvC,KAAM,KAAOzG,GAAI,CAAEmvC,WAAW,EAAMjrB,MAAO,YACxKlmB,EAAa,uBAAwB,IAAIk5C,EAAS,CAAEt9B,IAAK,KAAM7B,KAAM,CAAEnO,MAAO,CAAE8sC,cAAe,gBAAmBd,QAAS,CAAEnvC,KAAM,KAAOzG,GAAI,CAAEmvC,WAAW,EAAMjrB,MAAO,WAEvK,CA/fD,CA+fGrkB,OAAOvB,MAAM0uB,QAEhB,SAAUpvB,GAEV,IAAIU,EAAQuB,OAAOvB,MACfoG,EAASpG,EAAM0B,GAAG4G,OAClB3I,EAAOyG,EAAOzG,KACdgwC,EAAuBvpC,EAAOupC,qBAC9BnwC,EAAU4G,EAAO5G,QACjB+I,EAAMnC,EAAOoC,IACb7F,EAAcyD,EAAOzD,YACrBkR,EAAazN,EAAOyN,WACpBnU,EAAeiD,EAAYjD,aAG3Bm5C,EAAiBlJ,EAAqB9vC,OAAO,CAC7CM,KAAM,SAASC,GACX,IAAIiI,EAAOhJ,KACXM,EAAKU,GAAGF,KAAKG,KAAK+H,EAAMrI,EAAMoB,WAAW,CAAC,EAAGiH,EAAKjI,QAASA,IAE3DiI,EAAKF,KAAO,oBAEZE,EAAKqP,OAAS,CACVE,UAAW,WAAa,MAAO,EAAI,EAE3C,EAEAxX,QAAS,CACLib,MAAO,CACH,CAAE5I,KAAM,YAAaC,MAAO,KAC5B,CAAED,KAAM,YAAaC,MAAO,cAC5B,CAAED,KAAM,YAAaC,MAAO,MAC5B,CAAED,KAAM,YAAaC,MAAO,MAC5B,CAAED,KAAM,YAAaC,MAAO,MAC5B,CAAED,KAAM,YAAaC,MAAO,MAC5B,CAAED,KAAM,YAAaC,MAAO,MAC5B,CAAED,KAAM,YAAaC,MAAO,OAEhClF,MAAO,KAGXsrC,iBAAkB,SAASnY,GACvB,IAAIjuB,EAAQiuB,EAAKjuB,MAEjB,IAAKA,EACD,OAAOiuB,EAGX,GAAIA,EAAKrlB,KAAOqlB,EAAKplB,UACjB,OAAOolB,EAGX,IAAIoY,EAAMrmC,EAAM+V,QAAQ,KAWxB,OATY,IAARswB,EACApY,EAAKplB,UAAY7I,EAAMy3B,UAAU,IAClB,GAAR4O,EACPpY,EAAKrlB,IAAM5I,GAEXiuB,EAAKrlB,IAAM5I,EAAMy3B,UAAU,EAAG4O,GAC9BpY,EAAKplB,UAAY7I,EAAMy3B,UAAU4O,EAAM,IAGpCpY,CACX,EAEAjgC,QAAS,SAASitB,GACd,IAAItlB,EAAOhJ,KACPshC,EAAOhT,EAAKjb,MAIhB,OAFAiuB,EAAOthC,KAAKy5C,iBAAiBnY,GAEtB,IAAIv6B,EAAOknC,cAAc,CAC5Bp5B,MAAOyZ,EAAKzZ,MACZk4B,UAAW,WACP,IAAIA,EACAlpC,GAAQy9B,EAAKrlB,KAAOqlB,EAAKqY,SAAW,QAAQtxB,MAAM,KAClD3kB,EAAS,CAAC,CACNG,KAAMA,EACNuW,KAAM,CAAE8B,UAAWolB,EAAKplB,WAAa,MAU7C,OANI6wB,EADA9sC,EAAE2D,QAAQC,EAAK,GAAIqF,EAAIknB,iBAAmB,EAC9B,IAAIrpB,EAAOmpC,sBAAsBxsC,GAEjC,IAAIqD,EAAOqwC,qBAAqB1zC,IAGtCuF,OAASD,EAAKC,OACjB8jC,CACX,GAER,EAEA6M,SAAU,SAAS7kC,GACf,IAGIpR,EAAGsY,EAAKC,EAAWjQ,EAHnB6P,EAAY9b,KAAK8b,UACjBC,EAAaD,EAAUC,WACvBC,EAAQD,EAAWM,OAOvB,GAJItH,GACA+G,EAAUQ,KAAKjK,IAAI,mBAAoBnJ,EAAIqT,uBAAuBtc,EAAE8U,KAGpE/U,KAAK8b,WAAa9b,KAAK8b,UAAU/a,UAAmD,IAAxCf,KAAK8b,UAAU/a,QAAQwQ,aACnE,IAAK5N,EAAI,EAAGA,EAAIqY,EAAMla,OAAQ6B,IAC1BsY,EAAMD,EAAMrY,GAAGsY,KAAO,OACtBC,EAAYF,EAAMrY,GAAGuY,UAIrBjQ,GAFAA,EAAQ/C,EAAIsT,YAAYzH,EAAMkH,EAAK,CAAEC,UAAWA,KAElCvV,QAAQ,KAAM,KAE5BqV,EAAMrY,GAAGsI,MAAQA,EAAQ,wBAIjC8P,EAAWpa,QAAQ,SACvB,EAEAyX,WAAY,SAAS/W,EAAI4G,GACrB,IAAIlI,EAAUf,KAAKe,QACf8F,EAAW9F,EAAQ0C,KACnBuF,EAAOhJ,KACP8b,EAAYzZ,EAAG+Z,uBAEdN,IAIL9S,EAAKC,OAASA,EACdD,EAAK8S,UAAYA,EAGjBzZ,EAAGgH,QAAQ,mBAAmB8E,MAAMpN,EAAQoN,OAE5C2N,EAAU1H,WAAW,CACjBylC,YAAa5wC,EAAOlI,QAAQkK,SAASe,WACrC8J,OAAQ,KACJ,IAAIgkC,EAAWh+B,EAAUg+B,WAErBA,GACAx5C,EAAKqU,KAAK1L,EAAQpC,EAAUizC,EAASC,SACzC,EAEJC,UAAW,WACP,IAAIr2C,EAAGqY,EAAQF,EAAUC,WAAWM,OAChCw9B,EAAc/9B,EAAUQ,KAAKqB,SAAShT,KAAK,uBAE/C,IAAKhH,EAAI,EAAGA,EAAIqY,EAAMla,OAAQ6B,IAC1BqY,EAAMrY,GAAKqF,EAAKywC,iBAAiBz9B,EAAMrY,IAGvCk2C,EAAY/3C,QACZ+3C,EAAYviC,QAEpB,IAER,EAEA2iC,mBAAoB,SAASj+B,EAAO6L,GAChC,IAAK,IAAIlkB,EAAI,EAAGA,EAAIqY,EAAMla,OAAQ6B,IAAK,CACnC,IAAI29B,EAAOtlB,EAAMrY,GAGbwmC,GAFM7I,EAAKrlB,KAAOqlB,EAAKqY,SAAW,KACtBrY,EAAKplB,UAAY,IAAMolB,EAAKplB,UAAY,IAKxD,GAFcjc,EAAE4nB,EAAM,IAAIxe,QAAQ8gC,GAAU,GAE5C,CAIA,GAAoB,GAAhBtiB,EAAM/lB,OACN,OAAOw/B,EAAKjuB,MAGhB,IAAK,IAAI6mC,EAAI,EAAGA,EAAIryB,EAAM/lB,QACjB7B,EAAE4nB,EAAMqyB,IAAI7wC,QAAQ8gC,GAAU,GADL+P,IAGvB,GAAIA,GAAKryB,EAAM/lB,OAAS,EAC3B,OAAOw/B,EAAKjuB,KAVpB,CAaJ,CAEA,MAAO,EACX,EAEA/J,OAAQ,SAASjH,EAAIwlB,GACjB,IAAIsyB,EAAYl6C,EAAEoC,GAAIga,KAAKrc,KAAK8I,MAEhC,GAAKqxC,EAAL,CAIA,IAEIx2C,EAAGg2C,EAFH59B,EAAao+B,EAAUp+B,WACvBC,EAAQD,EAAWM,OAEnBu6B,EAAW1tC,EAAI4wB,eAAeU,MAAM,KAAM3S,GAE9C,GAAI+uB,GAAY1tC,EAAIyxB,gBAAgBic,IAAa52C,KAAKo6C,WAAaxD,EAAnE,CAMA,IAHI52C,KAAKo6C,UAAYxD,EAGhBjzC,EAAI,EAAGA,EAAIqY,EAAMla,OAAQ6B,IAC1Bg2C,EAAU39B,EAAMrY,GAAGg2C,QAEnB39B,EAAMrY,GAAG4gB,SAAWo1B,KAAa15C,EAAE22C,GAAUvtC,QAAQswC,GAAS73C,OAGlEia,EAAW9C,OAAO,CAAC,CAAEw6B,MAAO,UAAW4G,SAAU,KAAMhnC,OAAO,KAE9Di9B,EAAqBtvC,GAAGsI,OAAOrI,KAAKjB,KAAMqC,EAAIwlB,GAE9CsyB,EAAU9mC,MAAMrT,KAAKi6C,mBAAmBl+B,EAAW6K,OAAQiB,IAE3DsyB,EAAUzvC,QAAQ8f,YAAY,cAAezO,EAAW6K,OAAO9kB,OAd/D,CAXA,CA0BJ,EAEAyR,QAAS,WACLvT,KAAKo6C,UAAY,IACrB,IAGAE,EAAqBn6C,EAAQK,OAAO,CACpCmU,KAAM,WACF,IAAIE,EAAQ7U,KAAKgtC,WAAU,GAC3BhtC,KAAKu6C,YAAcv6C,KAAKe,QAAQuW,QAAU,wCAAwC+Q,MAAM,KAExF7T,EAAW+1B,qBAAqB11B,GAOhC,IALA,IAAIgT,EAAQrT,EAAWu1B,OAAOl1B,GAAO,SAAS4b,GAC1C,OAAOA,CACX,IAGSkE,EAAI9M,EAAM/lB,OAAS,EAAG6yB,GAAK,EAAGA,IAAK,CACxC,IAAIlE,EAAO5I,EAAM8M,GACZ30B,KAAKypC,gBAAgBhZ,IACtBzwB,KAAKw6C,MAAM/pB,EAEnB,CAEAzwB,KAAKitC,aAAap4B,EACtB,EAEA2lC,MAAO,SAAS/pB,GACZ,GAAKA,IAAQvnB,EAAI+sB,SAASxF,GAA1B,CAIA,IAAIhtB,EAAOyF,EAAIzF,KAAKgtB,GAEpB,GAAY,MAARhtB,GAAwB,MAARA,EAAc,CAC9B,IAAIg3C,EAAgB,IAAI1zC,EAAOuwC,cAAc7zC,GACzCmtB,EAAOH,EAAKiB,gBACZ7Q,EAAO4P,EAAKI,YAKhB,IAHA4pB,EAAcvhB,OAAOzI,GAGdG,GAAQA,GAAQ/P,EAAM+P,EAAOA,EAAKC,YACrC7wB,KAAKw6C,MAAM5pB,EAEnB,MAAO,GAAY,cAARntB,EACPyF,EAAIyvB,UAAUlI,EAAM,UACjB,GAAqB,GAAjBA,EAAK1P,UAAkB7X,EAAIisB,cAAc1E,IAsB5D,SAAwBA,GACpB,IAAI4nB,EAAKnvC,EAAI4xB,sBAAsBrK,EAAM,CAAC,OAC1C,GAAI4nB,EAAI,CACJ,IAAIoC,EAAgB,IAAI1zC,EAAOuwC,cAAcpuC,EAAIzF,KAAK40C,EAAGjsB,aACrDvX,EAAQlU,EAAM0B,GAAG4G,OAAOi6B,SAAS6B,SAAStU,GAC9C5b,EAAMyN,WAAW+1B,GACjBoC,EAAc92B,OAAO9O,EACzB,CACJ,CAtBY6lC,CAAejqB,OARwC,CACvD,IAAK,IAAI9sB,EAAI8sB,EAAK8B,WAAWzwB,OAAS,EAAG6B,GAAK,EAAGA,IAC7C3D,KAAKw6C,MAAM/pB,EAAK8B,WAAW5uB,IAG/B8sB,EAAK4I,gBAAgB,SACrB5I,EAAK4I,gBAAgB,QACzB,CAIIp5B,EAAE2D,QAAQH,EAAMzD,KAAKu6C,cAAgB,GACrCrxC,EAAIgwB,OAAOzI,EA7Bf,CA+BJ,EAEAgZ,gBAAiB,SAAShZ,GACtB,OAAOzwB,KAAK0V,cAAgB3O,EAAO+X,WAAW2qB,gBAAgBhZ,EAClE,IAcJxwB,EAAEO,OAAOuG,EAAQ,CACbyyC,eAAgBA,EAChBc,mBAAoBA,IAGxBj6C,EAAa,aAAc,IAAIm5C,EAAe,CAC1Cn3C,GAAI,CACAyG,KAAM,YACNgT,UAAW,eACXyL,iBAAkB,CACdwqB,cAAe,OACfD,eAAgB,QAChB6I,gBAAgB,EAChBC,WAAW,EACX3zB,SAAUtmB,EAAMsmB,UACX5K,GAAS,2BAA2BA,EAAKpQ,MAAQ,0CAA0CoQ,EAAKpQ,OAAS,KAAO,OAAOtL,EAAMqhC,WAAW3lB,EAAKjJ,kBAGtJs+B,SAAU,YAIlBrxC,EAAa,kBAAmB,IAAIC,EAAK,CAAEe,QAASi5C,IAEnD,CAnUD,CAmUGp4C,OAAOvB,MAAM0uB,QAEhB,SAAUpvB,EAAGgC,GAEb,IAAItB,EAAQuB,OAAOvB,MACfH,EAASP,EAAEO,OACXkU,EAAS/T,EAAMqhC,WACfj7B,EAASpG,EAAM0B,GAAG4G,OAClB3F,EAAcyD,EAAOzD,YACrB4F,EAAMnC,EAAOoC,IACb9I,EAAeiD,EAAYjD,aAC3BmU,EAAazN,EAAOyN,WACpBrU,EAAU4G,EAAO5G,QACjBuC,EAAO/B,EAAM+B,KACbm4C,EAAkB,sBAClBC,EAAoB,wBACpBC,EAAoB,wBACpBC,EAAqB,yBAErBC,EAAe96C,EAAQK,OAAO,CAC9BM,KAAM,SAASC,GACX,IAAIiI,EAAOhJ,KACXG,EAAQa,GAAGF,KAAKG,KAAK+H,EAAMjI,GAE3BiI,EAAK6M,OAAQ,EACb7M,EAAKqe,WAAa,CAAC,CACvB,EAEAriB,YAAa,SAAS6tC,EAAKh+B,GACvB,IAAIwS,EAAarnB,KAAKqnB,WAClB7Q,EAAMhC,EAAWyuB,kBAAkBpuB,GAEvC,GAAIwS,EAAWtN,KAAyB,WAAlBsN,EAAWtN,IAAkB,CAE/C,IAAImhC,EAAqB,WACrBx7B,YAAW,WACF2H,EAAWlZ,OACZ0kC,EAAIxZ,gBAAgB,SAGnBhS,EAAWjZ,QACZykC,EAAIxZ,gBAAgB,UAGxBwZ,EAAIxZ,gBAAgB,WACxB,GACJ,EAEA,IAAKwZ,EAgBD,OAfAA,EAAM3pC,EAAI+iB,OAAOzV,EAAK,MAAO6Q,IACzB8zB,OAAStI,EAAIuI,QAAUF,EAE3BrmC,EAAM8uB,iBACN9uB,EAAM0vB,WAAWsO,GAEZA,EAAIhiB,aACL3nB,EAAImU,YAAY7G,EAAIoyB,eAAe,UAAWiK,GAGlDqI,IAEArmC,EAAM0uB,cAAcsP,GACpBh+B,EAAM4uB,YAAYoP,GAClBr+B,EAAWY,YAAYP,IAChB,EAEPg+B,EAAIsI,OAAStI,EAAIuI,QAAUF,EAC3BhyC,EAAIkR,KAAKy4B,EAAKxrB,GACd6zB,GAER,CAEA,OAAO,CACX,EAEAt5C,KAAM,WACF,IAAIoH,EAAOhJ,KACP6U,EAAQ7L,EAAKgkC,YAEZhkC,EAAKhE,YAAYwP,EAAWk1B,MAAM70B,GAAQA,IAC3C7L,EAAKikC,aAAap4B,EAE1B,EAEAF,KAAM,WACF,IAMIk5B,EACAyF,EAPAtqC,EAAOhJ,KACP6U,EAAQ7L,EAAKgkC,YACbqO,GAAU,EACVxI,EAAMr+B,EAAWk1B,MAAM70B,GACvB9H,EAAa8lC,GAAOA,EAAI79B,aAAa,UAAY,GACjDhI,EAAc6lC,GAAOA,EAAI79B,aAAa,WAAa,GAGnDsmC,EAAO36C,EAAM4B,QAAQE,QAAQ8b,KAC7Bxd,EAAUiI,EAAKC,OAAOlI,QACtBkK,EAAWlK,EAAQkK,SACnBgI,EAAelS,EAAQkS,aACvBsoC,KAAiB56C,EAAM0B,GAAGm5C,cAAgBvoC,GAAgBA,EAAawoC,WA/FnF,YA+FgGxoC,EAAawoC,UAAUC,MAC3G7oC,EAAgB,CACZoH,MAAOhP,EAASjG,YAChBuf,SAAS,EACT5S,UAAW4pC,GAKnB,SAAS/gB,EAAMnwB,GACX,IAAIzB,EAAUilC,EAAOjlC,QACjBiiB,EAAI3B,SAAStgB,EAAQ+B,KAAKowC,GAAmB1jC,MAAO,IACpDyG,EAAIoL,SAAStgB,EAAQ+B,KAAKqwC,GAAoB3jC,MAAO,IAEzDrO,EAAKqe,WAAa,CACdtN,IAAKnR,EAAQ+B,KAAKkwC,GAAiBxjC,MAAM1Q,QAAQ,KAAM,OACvDojB,IAAKnhB,EAAQ+B,KAAKmwC,GAAmBzjC,OAGzCrO,EAAKqe,WAAWlZ,MAAQ,KACxBnF,EAAKqe,WAAWjZ,OAAS,MAEpBib,MAAMwB,IAAMA,EAAI,IACjB7hB,EAAKqe,WAAWlZ,MAAQ0c,IAGvBxB,MAAMvL,IAAMA,EAAI,IACjB9U,EAAKqe,WAAWjZ,OAAS0P,GAG7Bu9B,EAAUryC,EAAKhE,YAAY6tC,EAAKh+B,GAEhC+G,EAAMvR,GAEFrB,EAAK8M,QACL9M,EAAK8M,SAGT9M,EAAKC,OAAOsB,yBAChB,CAEA,SAASqR,EAAMvR,GACXA,EAAEoW,iBACF6yB,EAAK//B,UACLs6B,EAAOt6B,UAEPrK,EAAImqB,mBAAmB7e,EAAWyuB,kBAAkBpuB,IAAQqB,QACvDmlC,GACDryC,EAAKikC,aAAap4B,EAE1B,CA3CA7U,KAAK0sC,mBAAmB73B,GAqDxBhC,EAAc+I,MAAQA,EAElB2/B,IACA1oC,EAAc1E,MAAQ,KAE1B0E,EAAcyY,SAAW,IAEzBuiB,EAAS7tC,KAAKmtC,aAAa,SAAUt6B,GAAewJ,KAAK,eAEzDi3B,EAAOtqC,EAAKgqC,YAAYnF,EAAQ0N,GAEhC1N,EAAOjlC,QAAQ4hB,YAAY,uBAAwB+wB,GACnD1N,EAAOnjC,QACNC,KAAK,oBAAoBmZ,GAAG,QAAS0W,GAAO6F,MAC5C11B,KAAK,mBAAmBmZ,GAAG,QAASlI,GAAOykB,MAC3C11B,KAAK,uBAAuBmZ,GAAG,WAvBhC,SAAiBzZ,GACTA,EAAE8V,SAAWzd,EAAKouC,MAClBtW,EAAMnwB,GACCA,EAAE8V,SAAWzd,EAAKmxC,KACzBj4B,EAAMvR,EAEd,IAiBoDg2B,MAEnD11B,KAAKkwC,GAAiBxjC,IAAIw7B,EAAMA,EAAI79B,aAAa,MAAO,GAAK,WAAWqrB,MACxE11B,KAAKmwC,GAAmBzjC,IAAIw7B,EAAMA,EAAI9oB,IAAM,IAAIsW,MAChD11B,KAAKowC,GAAmB1jC,IAAItK,GAAYszB,MACxC11B,KAAKqwC,GAAoB3jC,IAAIrK,GAAaqzB,MAE3C,IAAIz3B,EAAUilC,EAAOjlC,QAgBrB,GAfI2yC,IACAv7C,KAAK27C,cAAgB,IAAIh7C,EAAM0B,GAAGm5C,aAC9B5yC,EAAQ+B,KAAK,mBACbnK,EAAO,CAAC,EAAGyS,IAGfjT,KAAK27C,cAAcpyC,KAAK,UAAU,SAASqyC,GACP,MAA5BA,EAAGC,SAAS/4B,IAAI,SAChBla,EAAQ+B,KAAKkwC,GAAiBxjC,IAAIrX,KAAKqT,QAE/C,IAEArT,KAAK27C,cAAcpyC,KAAK,QAASixB,IAGjC8gB,EAAM,CACN,IAAIQ,EAAelzC,EAAQS,QAAQ,aAAa+E,SAChDxF,EAAQyJ,IAAI,aAAcypC,EAC9B,CACAjO,EAAOG,SAAS5yB,OAChBxS,EAAQ+B,KAAKkwC,GAAiBl5C,QAAQ,SAASokC,QACnD,EAEAiN,YAAa,SAASnF,EAAQ0N,GAC1B,IACIlI,EAAcpzC,EAAE,UAAUgd,SAAS4wB,EAAOjlC,SAC1CqC,EAFOjL,KAESiJ,OAAOlI,QAAQkK,SAC/BqoC,EAAOD,EAAYE,UAAU,CAC7BC,eAAe,EACfx3B,MAAO,CACH,CACIy3B,MAAO,qBACPC,MAAOh/B,EAAOzJ,EAAS4B,iBACvB5D,OAAQ,WAEZ,CACIwqC,MAAO,uBACPC,MAAOh/B,EAAOzJ,EAAS6B,cACvB7D,OAAQ,WAEZ,CACIwqC,MAAO,uBACPC,MAAOh/B,EAAOzJ,EAAS8B,YACvB9D,OAAQ,WAEZ,CACIwqC,MAAO,wBACPC,MAAOh/B,EAAOzJ,EAAS+B,aACvB/D,OAAQ,cAGjBoT,KAAK,aAQR,OANIk/B,GACAlI,EAAYnvB,QAAQjkB,EAAE,qDAG1B4tC,EAAOjlC,QAAQgrC,MAAM3zC,EAjCVD,KAiCiBqtC,uBAAuB,CAAEpiC,WAAUqiC,iBAAkB,YAAaC,iBAAkB,qBAEzG+F,CACX,IAIJ3yC,EAAM0B,GAAG4G,OAAOgyC,aAAeA,EAE/B56C,EAAa,cAAe,IAAI0G,EAAOzG,KAAK,CAAEe,QAAS45C,IAEtD,CAtPD,CAsPG/4C,OAAOvB,MAAM0uB,QAEf,SAASpvB,EAAGgC,GAEb,IAAItB,EAAQuB,OAAOvB,MACfH,EAASP,EAAEO,OACXuG,EAASpG,EAAM0B,GAAG4G,OAClB3F,EAAcyD,EAAOzD,YACrBnD,EAAU4G,EAAO5G,QACjBG,EAAOyG,EAAOzG,KACdD,EAAeiD,EAAYjD,aAC3B07C,EAAiB,+MAEjBC,EAAgB77C,EAAQK,OAAO,CAC/BmU,KAAM,YACD3U,KAAKiJ,OAAOgV,eAAiBje,KAAKi8C,2BAA2BrzC,QAAQyZ,OAC1E,EAEA45B,wBAAyB,WACrB,IAAIrO,EAAM5tC,KACNiJ,EAAS2kC,EAAI3kC,OACbizC,EAAgBjzC,EAAOlI,QAAgB,OACvCo7C,EAASl8C,EAAE,wDAAwDm8C,YAAY,CAC/EC,QAASzO,EAAI0O,iBAAiB/yC,KAAKqkC,GACnCzf,SAAUyf,EAAI2O,kBAAkBhzC,KAAKqkC,GACrC7H,OAAQ6H,EAAI4O,gBAAgBjzC,KAAKqkC,GACjC6O,MAAO7O,EAAI8O,eAAenzC,KAAKqkC,GAC/B+O,SAAU/O,EAAIgP,kBAAkBrzC,KAAKqkC,GACrCiP,cAAc,EACdC,UAAU,EACVjnC,MAAO,CACHknC,QAASb,EAAcptB,SACvBkuB,YAAY,EACZC,UAAW,QAEfC,WAAY,CACRC,kBAAmBjB,EAAciB,kBACjCC,YAAalB,EAAckB,eAEhCC,iBAIH,OAFAp0C,EAAOgV,cAAgBk+B,EAEhBA,CACX,EACAS,kBAAmB,SAAShB,GACxB57C,KAAKs9C,SAAS,WAAY1B,GAC1BA,EAAGhL,OAAO2M,gBAEVv9C,KAAKw9C,uBACT,EACAlB,iBAAkB,SAASV,GACvB57C,KAAKiJ,OAAOoK,MAAMuoC,EAAG6B,SAASvmC,KAAKvQ,QAAQ,cAAe,KAC1D3G,KAAKs9C,SAAS,UAAW1B,EAC7B,EACAW,kBAAmB,SAASX,GACxB57C,KAAKs9C,SAAS,WAAY1B,EAC9B,EACAY,gBAAiB,SAASZ,GACtB57C,KAAKs9C,SAAS,SAAU1B,GACnBA,EAAG8B,MAAM,GAAGC,kBACb39C,KAAK49C,qBAEb,EACAlB,eAAgB,SAASd,GACrB57C,KAAKs9C,SAAS,QAAS1B,EAC3B,EAEA0B,SAAU,SAASO,EAAWC,GAC1B,IAAI70C,EAASjJ,KAAKiJ,OACdizC,EAAgBjzC,EAAOlI,QAAgB,OACH,mBAA7Bm7C,EAAc2B,IACrB3B,EAAc2B,GAAW58C,KAAKgI,EAAQ60C,EAE9C,EAEAF,oBAAqB,WACjB,IAAI/iB,EAAW76B,KAAKiJ,OAAO8L,KACvBhO,EAAOoC,IAAI4a,GAAG8W,EAAU,QACxB76B,KAAK+9C,eAAiB/9C,KAAKg+C,WACvBh+C,KAAKiJ,OAAOyB,QAAQC,KAAK,UAAUgT,SAClCtL,IAAI,CAAEtD,SAAU,aAAc8N,OAAOk/B,GAE1C/7C,KAAKg+C,WAAa/9C,EAAE46B,GAAUhe,OAAOk/B,GAGzCp7C,EAAM0B,GAAG8rB,SAASnuB,KAAKg+C,YAAY,EACvC,EAEAR,sBAAuB,WACnB78C,EAAM0B,GAAG8rB,SAASnuB,KAAKg+C,YAAY,GACnC/9C,EAAED,KAAK+9C,gBAAgB1rC,IAAI,CACvBtD,SAAU,YAGP/O,KAAKg+C,kBACLh+C,KAAK+9C,cAChB,IAGJv9C,EAAOuG,EAAQ,CACXi1C,cAAeA,IAGnB37C,EAAa,SAAU,IAAIC,EAAK,CAC5Be,QAAS26C,EACT35C,GAAI,CACA6kB,SAAU,UAIlB,CA7GA,CA6GEhlB,OAAOvB,MAAM0uB,QAELpvB,EAsGPiC,OAAOvB,MAAM0uB,OAlGRnvB,EADQgC,OAAOvB,MACE0B,GAAG4G,OACpB9I,EAAUD,EAASC,QACnBC,EAAiBF,EAASE,eAE1BC,EADcH,EAASoD,YACIjD,aAC3BC,EAAOJ,EAASI,KAChBC,EAAeL,EAASK,aACxBC,EAASP,EAAEO,OAEfC,EAAoBN,EAAQK,OAAO,CACnCM,KAAM,SAASC,GACXZ,EAAQa,GAAGF,KAAKG,KAAKjB,KAAMe,GAE3Bf,KAAKiW,iBAAkB,CAC3B,EAEAtB,KAAM,WACF,IAAI1L,EAASjJ,KAAKiJ,OACdlI,EAAUf,KAAKe,QACf8T,EAAQ9T,EAAQ8T,MAChBE,EAAO9L,EAAO8L,KACd03B,EAAoB,IAAIlsC,EAAasU,EAAOE,GAC5CmC,EAAOnW,EAAQmW,MAAQnW,EAAQsS,OAAS,GAE5CpK,EAAOmM,YAAYP,GAEnB5L,EAAOa,UAAUmN,MAAMC,EAAMnW,GAEzBA,EAAQk9C,aACRl9C,EAAQk9C,YAAYh1C,EAAQA,EAAOqM,YAGvC,IAAI4oC,EAAiB,IAAI99C,EAAeqsC,EAAmB,IAAIlsC,EAAa0I,EAAOqM,WAAYP,IAC/FmpC,EAAej1C,OAASA,EACxBA,EAAOe,cAAc5I,KAAK88C,GAE1Bj1C,EAAOiN,OACX,IAGAxV,EAAiBJ,EAAKE,OAAO,CAC7B4Y,WAAY,SAAS/W,EAAI4G,GACrB,IAAIlI,EAAUf,KAAKe,QACfgb,EAAahb,EAAQib,MAAQjb,EAAQib,MAAQ/S,EAAOlI,QAAQ2K,WAC5DoQ,EAAYzZ,EAAG+Z,uBAEdN,IAILA,EAAUqO,IAAI,QAAQ,KAClB,IAAI0vB,EAAc/9B,EAAUQ,KAAKqB,SAAShT,KAAK,uBAE3CkvC,EAAY/3C,QACZ+3C,EAAYviC,QAChB,IAGJwE,EAAU1H,WAAW,CACjB2H,WAAYA,EACZ89B,YAAa5wC,EAAOlI,QAAQkK,SAASS,aAEzCoQ,EAAUvS,KAAK,UAAU,KACrBjJ,EAAKqU,KAAK1L,EAAQ,aAAc6S,EAAUzI,QAAQ,IAE1D,EAEAhS,QAAS,SAASisB,GACd,OAAO,IAAI7sB,EAAkB6sB,EACjC,EAEAhkB,OAAQ,SAASjH,GACb,IAAIyZ,EAAYzZ,EAAGga,KAAK,qBACxBP,EAAUF,QACVE,EAAUzI,MAAM,KACpB,IAGJ7S,EAAON,EAAU,CACbO,kBAAmBA,EACnBC,eAAgBA,IAGpBL,EAAa,aAAc,IAAIK,EAAe,CAC1C2B,GAAI,CACA87C,aAAc,cACdr1C,KAAM,YACNgT,UAAW,eACXyL,iBAAkB,CACdwqB,cAAe,OACfD,eAAgB,QAChBsM,UAAU,EACVzD,gBAAgB,GAEpBjJ,SAAU,YAMjB,SAASzxC,EAAGgC,GAEb,IAAItB,EAAQuB,OAAOvB,MACfH,EAASP,EAAEO,OACXuG,EAASpG,EAAM0B,GAAG4G,OAClB3F,EAAcyD,EAAOzD,YACrBnD,EAAU4G,EAAO5G,QACjBG,EAAOyG,EAAOzG,KACdD,EAAeiD,EAAYjD,aAS3Bg+C,EAAkBl+C,EAAQK,OAAO,CACjCM,KAAM,SAASC,GACX,IAAI6sC,EAAM5tC,KACV4tC,EAAI7sC,QAAUA,EACdZ,EAAQa,GAAGF,KAAKG,KAAK2sC,EAAK7sC,GAC1B6sC,EAAIvmB,WAAa,KACjBumB,EAAI0Q,WAAav9C,EAAQu9C,UAC7B,EAEA3pC,KAAM,WACF,IACIE,EAAQ7U,KAAKgtC,WAAU,GADjBhtC,KAENu+C,cAFMv+C,KAGNitC,aAAap4B,EACrB,EAEA0pC,YAAa,WACTv+C,KAAKw+C,eAAevhC,SAAS,QAAQwhC,SAASnnC,QAClD,EAEAknC,aAAc,WACV,IAAI5Q,EAAM5tC,KACN0+C,EAAkB9Q,EAAI3kC,OAAOlI,QAAQ6P,SACrC0iC,EAAOrzC,EAAE,UAAUma,KAAK,CACxBg2B,OAAQsO,GAAmBA,EAAgB5vB,UAAY,GACvD6vB,OAAQ,SAUZ,OAPArL,EAAKz2B,OAAO,CACR+wB,EAAIgR,aACJhR,EAAIiR,kBACJjR,EAAIkR,gBACJlR,EAAImR,qBAGDzL,CACX,EAEAsL,WAAY,WACR,IAAI31C,EAASjJ,KAAKiJ,OAClB,OAAOhJ,EAAE,WAAWma,KAAK,CACrB/G,MAAOpK,EAAOwL,eACdhR,KAAM,QACNqF,KAAM,UAEd,EAEA+1C,gBAAiB,WAEb,OAAO5+C,EAAE,WAAWma,KAAK,CACrB/G,MAFMrT,KAEKs+C,WACX76C,KAAM,aACNqF,KAAM,UAGd,EAEAg2C,cAAe,WACX,IAAI71C,EAASjJ,KAAKiJ,OACdy1C,EAAkBz1C,EAAOlI,QAAQ6P,SACjCie,EAAW6vB,GAAmBA,EAAgB7vB,UAAY5lB,EAAOL,QAAQwR,KAAK,OAAS,SAC3F,OAAOna,EAAE,WAAWma,KAAK,CACrB/G,MAAOwb,EACPprB,KAAM,WACNqF,KAAM,UAEd,EAEAi2C,iBAAkB,WACd,IAAIC,EAAa/+C,EAAE,iDAAiDma,KAAK,WAEzE,OAAOna,EAAE,6CAA6Ci1C,QACzC3M,IAAItoC,EAAE,gBAAkB++C,EAAa,MAAM9J,QAC5D,IAGA+J,EAAe3+C,EAAKE,OAAO,CAC3BM,KAAM,SAASC,GACX,IAAI+F,EAAO9G,KACXM,EAAKU,GAAGF,KAAKG,KAAK6F,EAAMnG,EAAMoB,WAAW,CAAC,EAAG+E,EAAK/F,QAASA,IAC3D+F,EAAKgC,KAAO,mBAChB,EAEA/H,QAAS,CACLib,MA5FmB,CACnB,CAAE5I,KAAM,OAAQC,MAAO,QACvB,CAAED,KAAM,MAAOC,MAAO,OACtB,CAAED,KAAM,MAAOC,MAAO,OACtB,CAAED,KAAM,OAAQC,MAAO,QACvB,CAAED,KAAM,aAAcC,MAAO,SA0FjChS,QAAS,SAASitB,GACd,IAAIjb,EAAQib,EAAKjb,MACjB,OAAO,IAAItM,EAAOs3C,gBAAgB,CAC9BxpC,MAAOyZ,EAAKzZ,MACZypC,WAAYjrC,EAAMirC,YAE1B,EAEAllC,WAAY,SAAS/W,EAAI4G,GACrB,IACI6S,EAAYzZ,EAAG+Z,uBADRpc,KAGNiJ,OAASA,EAEd6S,EAAUvS,KAAK,SAAUvJ,KAAKk/C,cAAc31C,KAAKvJ,MACrD,EAEAk/C,cAAe,SAAS70C,GACpBrK,KAAKm/C,MAAM90C,EAAEumC,OAAOv9B,SACpBhJ,EAAEumC,OAAOv9B,MAAM,MACfhJ,EAAEumC,OAAOlmC,QAAQC,KAAK,uBAAuByI,KAAKzS,EAAMqhC,WAAWhiC,KAAKiJ,OAAOlI,QAAQkK,SAAS2F,UACpG,EAEAtH,OAAQ,SAASjH,EAAI4G,GACjB,IAAI6S,EAAYzZ,EAAGga,KAAK,qBAExBP,EAAUF,QACVE,EAAUzI,MAAM,MAChBhR,EAAGgH,QAAQ,mBAAmBsB,KAAK,uBAAuByI,KAAKzS,EAAMqhC,WAAWhiC,KAAKiJ,OAAOlI,QAAQkK,SAAS2F,UACjH,EAEAuuC,MAAO,SAAS9rC,GACRA,GACA/S,EAAKqU,KAAK3U,KAAKiJ,OAAQjJ,KAAKe,QAAQ0C,KAAM,CAAE66C,WAAYjrC,GAEhE,EAEAE,QAAS,WACLvT,KAAKo6C,UAAY,IACrB,IAGJ55C,EAAOuG,EAAQ,CACXk4C,aAAcA,EACdZ,gBAAiBA,IAGrBh+C,EAAa,WAAY,IAAI4+C,EAAa,CACtC58C,GAAI,CACAyG,KAAM,YACN4oC,SAAU,QACV51B,UAAW,eACXyL,iBAAkB,CACdwqB,cAAe,OACfD,eAAgB,QAChBE,gBAAgB,EAChB3+B,MAAO,KACPlF,MAAO,QACPwsC,gBAAgB,EAChBC,WAAW,EACXwE,aAAe/iC,GAAS,gDAAmDA,EAAKhJ,UAAWgJ,EAAKjJ,uBAChGrP,KAAM,SACNs7C,cAAe,IAAM,iCAAiC1+C,EAAM0B,GAAG0B,KAAK,CAAEA,KAAM,SAAUu7C,UAAW,uEAK7G,CA3KA,CA2KEp9C,OAAOvB,MAAM0uB,QAEf,SAAUpvB,EAAGgC,GAGb,IAAItB,EAAQuB,OAAOvB,MACfwB,EAAQxB,EAAMwB,MACd3B,EAASP,EAAEO,OACXuG,EAASpG,EAAM0B,GAAG4G,OAClBC,EAAMnC,EAAOoC,IAEb9I,EADc0G,EAAOzD,YACMjD,aAC3BF,EAAU4G,EAAO5G,QACjBG,EAAOyG,EAAOzG,KACdkU,EAAazN,EAAOyN,WACpBwb,EAAgB9mB,EAAI8mB,cACpBomB,EAAoBrvC,EAAOqvC,kBAC3BO,EAAiB5vC,EAAO4vC,eAE5B,SAAS/xC,EAAO6rB,EAAMpd,GAClB,IACIksC,EADoC,OAA5Bt/C,EAAEwwB,GAAMpe,IAAI,aACM,QAAU,OACpCuvB,EAA6B,MAAlB14B,EAAIzF,KAAKgtB,GAAgB,SAAW8uB,EAAkB,UAAYA,EACjF,GArBJ,YAqBQlsC,EACA,OAAOod,EAAKxkB,MAAM21B,IAAa,EAE3BvuB,EAAQ,EACRod,EAAKxkB,MAAM21B,GAAYvuB,EAAQ,MAE/Bod,EAAKxkB,MAAM21B,GAAY,GAElBnR,EAAKxkB,MAAM8sB,SACZtI,EAAK4I,gBAAgB,SAIrC,CAEA,IAAImmB,EAAkBr9C,EAAM3B,OAAO,CAC/BM,KAAM,WACFd,KAAKqY,OAAS,IAAI+9B,EAAkB,CAAC,CAAEvyC,KAAMqF,EAAI8mB,gBACrD,EAEAwK,MAAO,SAAS3S,GACZA,EAAQ3e,EAAI4e,SAASD,EAAO3e,EAAI6e,iBAAiB,GACjD,IAEIpkB,EAAGksB,EAAKof,EAAYwQ,EAAYnpB,EAFhC4Y,EAAclvC,KAAKqY,OAAOu2B,aAAa/mB,GACvC63B,EAAU,GAKd,IAFAxQ,EAAclvC,KAAK2/C,cAAczQ,IAEjBptC,OAAQ,CACpB,IAAK6B,EAAI,EAAGksB,EAAMqf,EAAYptC,OAAQ6B,EAAIksB,EAAKlsB,IACvCuF,EAAI6a,GAAGmrB,EAAYvrC,GAAI,MAClB1D,EAAEivC,EAAYvrC,IAAI4D,QAEZtH,EAAE2D,QAAQsrC,EAAYvrC,GAAGyoB,WAAYszB,GAAW,GACvDA,EAAQt+C,KAAK8tC,EAAYvrC,IAFzB+7C,EAAQt+C,KAAK8tC,EAAYvrC,GAAGyoB,YAKhCszB,EAAQt+C,KAAK8tC,EAAYvrC,IAIjC,KAAO+7C,EAAQ59C,QAEX,GADAmtC,EAAayQ,EAAQ51B,QACjB5gB,EAAI6a,GAAGkrB,EAAY,MAAO,CAC1BwQ,EAAaxQ,EAAW7iB,WAExB,IAAIwzB,GADJtpB,EAAUr2B,EAAEgvC,GAAYre,KAAK,OACHjmB,KAAK,SAAS6U,OAEpCqgC,EAAa5/C,EAAEgvC,GAAYpmB,SAAS,SAAS,GAEjD,GAAIg3B,GAAcvpB,EAAQ,GAClBspB,EAAY,IACbA,EAAY/iC,OAAOoyB,GACnB2Q,EAAY/iC,OAAO5c,EAAE4/C,GAAYh3B,YACjC3f,EAAIoO,OAAOuoC,KAEVvpB,EAAQzZ,OAAOgjC,GACfA,EAAWvlC,aAAa20B,EAAY4Q,EAAWlvB,kBASnD,KANAkvB,EAAavpB,EAAQzN,SAAS,SAAS,MAEnCg3B,EAAa32C,EAAI+iB,OAAOgjB,EAAW/b,cAAehqB,EAAIzF,KAAKg8C,GAAaz/C,KAAK8/C,gBAAgBL,IAC7FnpB,EAAQzZ,OAAOgjC,IAGZ5Q,GAAcA,EAAW7iB,YAAcqzB,GAC1CI,EAAWxgC,YAAY4vB,GACvBA,EAAayQ,EAAQ51B,OAGjC,KAAO,CACH,IAAI+tB,EAAa3uB,SAAStkB,EAAOqqC,GAAa,IAAM,GACpDrqC,EAAOqqC,EAAY4I,GAEnB,IAAK,IAAIkI,EAAc,EAAGA,EAAcL,EAAQ59C,OAAQi+C,IAChD9/C,EAAE2X,SAASq3B,EAAYyQ,EAAQK,KAC/BL,EAAQle,OAAOue,EAAa,EAGxC,CAER,KAAO,CACa,IAAIpJ,EAAe,CAAC,CAAE9yC,KAAM,CAAC,OAAS,CAAEoI,MAAO,CAAE4rC,WAAY,MAEnErd,MAAM3S,EACpB,CACJ,EAEAi4B,gBAAiB,SAASxjC,GACtB,IAAIxT,EAAOwT,EAAKtH,aAAa,QACzBgrC,EAAY1jC,EAAKrQ,MAAM8sC,cAE3B,OAAOjwC,EAAO,CAAEA,KAAMA,GAAS,CAAEmD,MAAO,CAAE8sC,cAAeiH,GAC7D,EAEAL,cAAe,SAAS93B,GACpB,GAAK7nB,KAAK0V,WAEH,CACH,IAAIA,EAAa,GACjB,OAAOzV,EAAEuV,IAAIqS,GAAO,SAAS4I,GACzB,IAAI4O,EAAYt4B,EAAO+X,WAAW2qB,gBAAgBhZ,GAClD,GAAI4O,EAAW,CACX,IAA0C,IAAtCp/B,EAAE2D,QAAQy7B,EAAW3pB,GAGrB,OAAO,KAFPA,EAAWtU,KAAKi+B,EAIxB,CACA,OAAOA,GAAa5O,CACxB,GACJ,CAdI,OAAO5I,CAef,EAEAvQ,OAAQ,SAASuQ,GACbA,EAAQ3e,EAAI4e,SAASD,EAAO3e,EAAI6e,iBAAiB,GACjD,IACIk4B,EAAYt8C,EAAGksB,EAAKvT,EAAM4jC,EAAYC,EACtClR,EAAY4I,EAFZ3I,EAAclvC,KAAKqY,OAAOu2B,aAAa/mB,GAM3C,IAAKlkB,EAAI,EAAGksB,GAFZqf,EAAclvC,KAAK2/C,cAAczQ,IAEHptC,OAAQ6B,EAAIksB,EAAKlsB,IAAK,CAGhD,IAFAsrC,EAAahvC,EAAEivC,EAAYvrC,KAEZogB,GAAG,MAAO,CAIrB,IAFAm8B,GADA5jC,EAAO2yB,EAAWtxB,UACAA,UAEHoG,GAAG,cAAgBnf,EAAO0X,EAAK,IAAK,CAE/C,GAAI2jC,GAAchgD,EAAE2X,SAASqoC,EAAYC,EAAW,IAChD,UAGJC,EAAWlR,EAAWmR,QAAQ,OACjBt+C,QACT7B,EAAEqc,EAAK,GAAGqW,WAAU,IAAQ1V,SAASgyB,GAAYpyB,OAAOsjC,GAGxDD,EAAWn8B,GAAG,MACdkrB,EAAW5xB,YAAY6iC,GAEvBjR,EAAWhyB,SAASijC,GAGnB5jC,EAAKuM,SAAS,MAAM/mB,QACrBwa,EAAKhF,SAGT,QACJ,CACI,GAAI2oC,GAAc3jC,EAAK,GAEnB,SAEJ2jC,EAAa3jC,EAAK,EAE1B,MACI2jC,EAAa/Q,EAAYvrC,GAG7Bk0C,EAAa3uB,SAAStkB,EAAOq7C,GAAa,IAAM,GAChDr7C,EAAOq7C,EAAYpI,EACvB,CACJ,IAIAwI,EAAgBlgD,EAAQK,OAAO,CAC/BM,KAAM,SAASC,GAEXA,EAAQgsC,UAA2B,CAC/BppB,OAAQ,SAAU9O,GACd,IAAIyrC,EAAkB,IAAId,EAC1Bc,EAAgB5qC,WAAa1V,KAAKiJ,QAAUjJ,KAAKiJ,OAAOlI,QAAQ2U,WAChE4qC,EAAgB9lB,MAAMhmB,EAAWqT,MAAMhT,GAC1C,EAAEtL,KANIvJ,OAQXG,EAAQa,GAAGF,KAAKG,KAAKjB,KAAMe,EAC/B,IAGAw/C,EAAiBpgD,EAAQK,OAAO,CAChCM,KAAM,SAASC,GAEXA,EAAQgsC,UAAY,CAChBppB,OAAQ,SAAU9O,GACd,IAAIyrC,EAAkB,IAAId,EAC1Bc,EAAgB5qC,WAAa1V,KAAKiJ,QAAUjJ,KAAKiJ,OAAOlI,QAAQ2U,WAChE4qC,EAAgBhpC,OAAO9C,EAAWqT,MAAMhT,GAC3C,EAAEtL,KANIvJ,OAQXG,EAAQa,GAAGF,KAAKG,KAAKjB,KAAMe,EAC/B,IAGAy/C,EAAclgD,EAAKE,OAAO,CAC1BM,KAAM,SAASC,GACXT,EAAKU,GAAGF,KAAKG,KAAKjB,KAAMe,GAExBf,KAAKqY,OAAS,IAAI+9B,EAAkB,CAAC,CAAEvyC,KAAMmsB,IACjD,EAEA5W,WAAY,SAAS/W,EAAI4G,GACrBhJ,EAAEO,OAAOR,KAAKe,QAAS,CACnB2U,WAAYzM,GAAUA,EAAOlI,QAAQ2U,YAE7C,EAEApM,OAAQ,SAASjH,EAAIwlB,GACjB,IAEI44B,EAAeC,EAAkB/8C,EAAGksB,EAAKymB,EAAU7M,EAFnDkX,EAAgB3gD,KAAKqY,OAAOu2B,aAAa/mB,GACzCjd,EAAUvI,EAAGgH,QAAQ,cAAcgT,KAAK,gBAG5C,IAAK1Y,EAAI,EAAGksB,EAAM8wB,EAAc7+C,OAAQ6B,EAAIksB,EAAKlsB,IAmB7C,GAlBA2yC,EAAWqK,EAAch9C,GAErB3D,KAAKe,QAAQ2U,aACb+zB,EAAkB1iC,EAAO+X,WAAW2qB,gBAAgB6M,MAGhDA,EAAW7M,IAInBgX,EAAgB77C,EAAO0xC,MAGnBoK,EAAmBzgD,EAAEq2C,GAAUzxB,QAAQ,SAAS/iB,OAChD2+C,EAAiBv3C,EAAI6a,GAAGuyB,EAAU,QAAUoK,EAAmB,GAAK97C,EAAO0xC,EAASlqB,cACnEljB,EAAIwvB,OAAO4d,EAAU,CAAC,KAAK,QAAUoK,EAAmB,GAGzED,EAEA,YADA71C,EAAQ6iB,OAAOprB,GAAI,GAK3BuI,EAAQ6iB,OAAOprB,GAAI,EACvB,IAGJ7B,EAAOuG,EAAQ,CACXy4C,gBAAiBA,EACjBa,cAAeA,EACfE,eAAgBA,EAChBC,YAAaA,IAGjBngD,EAAa,SAAU,IAAIC,EAAK,CAAEe,QAASg/C,KAC3ChgD,EAAa,UAAW,IAAImgD,EAAY,CAAEn/C,QAASk/C,EAAgBl+C,GAAI,CAAEorB,QAAQ,KAEhF,CApRD,CAoRGvrB,OAAOvB,MAAM0uB,QAEhB,SAAUpvB,GAGV,IAAIU,EAAQuB,OAAOvB,MACfH,EAASP,EAAEO,OACXN,EAAWS,EAAM0B,GAAG4G,OACpBC,EAAMhJ,EAASiJ,IACfhJ,EAAUD,EAASC,QACnBG,EAAOJ,EAASI,KAChBq2C,EAAiBz2C,EAASy2C,eAC1BnmB,EAAYtnB,EAAIsnB,UAChBhc,EAAatU,EAASsU,WACtBnU,EAAeH,EAASoD,YAAYjD,aAEpCugD,EAAmBzgD,EAAQK,OAAO,CAClCM,KAAM,SAASC,GACXf,KAAKe,QAAUA,EACfZ,EAAQa,GAAGF,KAAKG,KAAKjB,KAAMe,EAC/B,EAEA8/C,cAAe,SAASrqC,EAAK3B,GACzB,IAAmC6C,EAA/B6f,EAASruB,EAAI+iB,OAAOzV,EAAK,KAc7B,OAbA+gB,EAAOrb,UAAY,WAEnBrH,EAAM0vB,WAAWhN,GAEZA,EAAOnL,cAER1U,EAAY7C,EAAM8C,yBACR0N,UAAY,GACtB3N,EAAU2H,YAAYkY,IAG1B/G,EAAU+G,EAAOnL,YAEVmL,CACX,EAEAupB,WAAY,SAASjsC,EAAOwhC,GACxB,GAAIntC,EAAI0tB,QAAQyf,GACZxhC,EAAMyuB,eAAe+S,OAClB,CACHxhC,EAAM6uB,mBAAmB2S,GAEzB,IAAI0K,EAAYvsC,EAAW4D,UAAUvD,GAAO,GAE5C,IAAKksC,EAAW,CACZ,KAAO1K,EAAU9jB,WAAWzwB,SAAWoH,EAAI6a,GAAGsyB,EAAU1lB,WAAY,OAChE0lB,EAAYA,EAAU1lB,WAG1BowB,EAAY1K,CAChB,CAEA,GAAIntC,EAAI0tB,QAAQmqB,GACZlsC,EAAMyuB,eAAeyd,OAClB,CACC73C,EAAIysB,UAAUorB,KACdA,EAAU17B,UAAY,UAE1B,IAAIivB,EAAYyM,EAAUpwB,YAAcowB,EACpC73C,EAAIyoB,WAAW2iB,GACfz/B,EAAMgC,SAASy9B,EAAW,GAE1Bz/B,EAAMyuB,eAAegR,EAE7B,CACJ,CACJ,EAEA0M,WAAY,SAASnsC,GACjB,IAAIue,EAAS,sBAAsB/K,MAAM,KACrC44B,EAAe/3C,EAAI+pB,aAAape,EAAM4B,eAAgB2c,GACtD8tB,EAAah4C,EAAI+pB,aAAape,EAAM6B,aAAc0c,GACtD,OAAQ6tB,IAAiBC,IAAiBD,GAAgBC,CAC9D,EAEAC,YAAa,SAAS1wB,GAClB,KAAOA,IAASvnB,EAAI+sB,SAASxF,IAA0C,KAAjCvnB,EAAI8rB,SAASvE,EAAKzP,aACpDyP,EAAOA,EAAKI,YAGhB,OAAQJ,CACZ,EAEA9b,KAAM,WACF,MAAME,EAAQ7U,KAAKsV,WACbkB,EAAMhC,EAAWyuB,kBAAkBpuB,GACzC,IAAI8I,EAAQykB,EAAUvhB,EAAMugC,EAAW7pB,EAAQ8gB,EAAIgJ,EAASC,EAAWC,EACvEP,EACA,MAAMQ,EAAwBthD,EAASytB,oBAgBvC,GAdA3tB,KAAK0sC,mBAAmB73B,GAExBmsC,EAAahhD,KAAKghD,WAAWnsC,GAE7BA,EAAM8uB,iBACNpM,EAASv3B,KAAK6gD,cAAcrqC,EAAK3B,GAEjC3L,EAAI+rB,aAAasC,EAAO7F,iBACxBxoB,EAAI+rB,aAAasC,EAAO1G,aAExBwnB,EAAKnvC,EAAI4xB,sBAAsBvD,EAAQ,CAAC,OACxC8pB,EAAUn4C,EAAI4xB,sBAAsBvD,EAAQ,oBAAoBlP,MAAM,MACtEi5B,EAAYp4C,EAAI6a,GAAGwT,EAAOnL,WAAY,UAAYmL,EAAOnL,WAErDisB,GAEA,GAAInvC,EAAIysB,UAAU0iB,GAAK,CACnB+I,EAAYl4C,EAAI+iB,OAAOzV,EAAK,KAExBtN,EAAI2X,KAAKw3B,KACTkJ,EAAM1sC,EAAM+uB,aACZ2d,EAAIj/B,WAAW+1B,GAEf7jC,EAAW6T,MAAMk5B,EAAKlJ,EAAGjsB,aAG7B,MAAMiP,EAAKp7B,EAAE,KAAMo4C,GACF,GAAbhd,EAAGv5B,QACHu5B,EAAG/jB,SAGP,MAAM8U,EAAaisB,EAAGjsB,WAChBq1B,EAAuBpJ,EAAGjsB,WAAWvD,SAAS/mB,OAC9C6uB,EAAa8wB,GAAwB,GAA6B,GAAxBpJ,EAAG9lB,WAAWzwB,QAAeu2C,EAAGxvB,SAAS,GAEzF3f,EAAImU,YAAY+jC,EAAWh1B,GAC3BljB,EAAIoO,OAA+B,GAAxBmqC,EAA4BpJ,EAAGjsB,WAAaisB,GAEnD1nB,GAAcA,IAAe4G,GAC7B6pB,EAAU/hC,YAAYsR,GACtBywB,EAAU/hC,YAAYkY,IAEtB6pB,EAAU/7B,UAAYm8B,EAE1B3gC,EAAOugC,CACX,OACOC,GAAWrhD,KAAKmhD,YAAY5pB,IACnC6pB,EAAYphD,KAAK0hD,sBAAsBL,GACvCn4C,EAAIoO,OAAOigB,GACX1W,EAAOugC,GACAE,IACPF,EAAYphD,KAAK0hD,sBAAsBJ,GACvCp4C,EAAIoO,OAAOigB,GACX1W,EAAOugC,GAGNvgC,IACKw3B,GAAMgJ,GACR,IAAI1K,EAAe,CAAC,CAAE9yC,KAAM,CAAC,QAAS22B,MAAM,CAACjD,IAGjD1iB,EAAMyN,WAAWiV,GAEjB5Z,EAASzU,EAAI+pB,aAAasE,EAAQ,CAAC8gB,EAAK,KAAOgJ,EAAUn4C,EAAIzF,KAAK49C,GAAW,MAE7E7sC,EAAW6T,MAAMxT,EAAO8I,EAAQqjC,GAEhC5e,EAAWzkB,EAAO+T,gBAEdxoB,EAAI6a,GAAGqe,EAAU,OAASA,EAASzR,aAAeznB,EAAI6a,GAAGqe,EAASzR,WAAY,QAC9EyR,EAAWA,EAASzR,YAGxB9P,EAAOlD,EAAOkT,YAEd7wB,KAAKw6C,MAAMpY,EAAU,CAAEl6B,OAAO,IAC9BlI,KAAKw6C,MAAM35B,EAAM,CAAE3Y,OAAO,IAEtBgB,EAAI6a,GAAGlD,EAAM,OAASA,EAAK8P,aAAeznB,EAAI6a,GAAGlD,EAAK8P,WAAY,QAClE9P,EAAOA,EAAK8P,YAGhBznB,EAAIoO,OAAOqG,GAGX6S,EAAU4R,IAGd5R,EAAU3P,GAEV7gB,KAAK8gD,WAAWjsC,EAAOgM,GAEvBhM,EAAMiC,UAAS,GAEf5N,EAAIiuB,SAAStW,GAAM,GAEnBrM,EAAWY,YAAYP,EAC3B,EAEA6sC,sBAAuB,SAASjxB,GAC5B,IAAI5b,EAAQ7U,KAAKsV,WACbkB,EAAMhC,EAAWyuB,kBAAkBpuB,GACnC8Y,EAAsBztB,EAASytB,oBAC/ByzB,EAAYl4C,EAAI+iB,OAAOzV,EAAK,KAKhC,OAHAtN,EAAImU,YAAY+jC,EAAW3wB,GAC3B2wB,EAAU/7B,UAAYsI,EAEfyzB,CACX,EAEA5G,MAAO,SAAS/pB,EAAM1vB,GAClB,IAAIytB,EAAOiC,EAUX,GARIA,EAAKE,YAAcznB,EAAI6a,GAAG0M,EAAKE,WAAY,OAC3CznB,EAAIoO,OAAOmZ,EAAKE,YAGhBznB,EAAIyoB,WAAWlB,KAAUA,EAAKzP,YAC9ByP,EAAOA,EAAKrE,YAGZqE,EAAM,CAEN,IADA,IAAI0vB,GAAW,EACR1vB,EAAKE,YAA0C,GAA5BF,EAAKE,WAAW5P,UACtCo/B,EAAWA,GAAaj3C,EAAIqsB,iBAAiB9E,EAAK8B,YAAYzwB,OAAS,EACvE2uB,EAAOA,EAAKE,WAQhB,GALKznB,EAAI0tB,QAAQnG,IAA2B,QAAlBA,EAAKvU,YAAuB,QAAQvG,KAAK8a,EAAKpL,YAAe86B,IACnFlgD,EAAEuuB,GAAM7jB,KAAK,SAAS2M,SACtBmZ,EAAKpL,UAAYnlB,EAASytB,qBAG1B5sB,GAAWA,EAAQmH,MACnB,KAAOuoB,GAAQjC,GAAM,CACjB,GAAItlB,EAAI6a,GAAG0M,EAAM,MAAQvnB,EAAIysB,UAAUlF,GAAO,CAC1CvnB,EAAIgwB,OAAOzI,GACX,KACJ,CACAA,EAAOA,EAAKrE,UAChB,CAER,CACJ,IAGAu1B,EAAiBxhD,EAAQK,OAAO,CAChCM,KAAM,SAASC,GACXf,KAAKe,QAAUA,EACfZ,EAAQa,GAAGF,KAAKG,KAAKjB,KAAMe,EAC/B,EAEA4T,KAAM,WACF,IAAIE,EAAQ7U,KAAKsV,WACjBtV,KAAK0sC,mBAAmB73B,GAExB,IAEI+sC,EAIAC,EANAxmB,EAAKnyB,EAAI+iB,OAAOzX,EAAWyuB,kBAAkBpuB,GAAQ,MACrD4b,EAAO5b,EAAM4B,eAEbhU,EAAU9B,EAAM4B,QAAQE,QACxBq/C,EAAQr/C,EAAQ8b,MAAQ9b,EAAQiuB,QAAU,GAC1C4wB,EAAYp4C,EAAI6a,GAAG0M,EAAM,UAAYA,EAGzC5b,EAAM8uB,iBACF2d,EACAp4C,EAAImU,YAAYge,EAAIimB,IAEpBO,EAAY5hD,EAAEwwB,GAAMpnB,QAAQ,SAC5BwL,EAAM0vB,WAAWlJ,GAEbwmB,EAAU//C,QAEVoH,EAAIgwB,OAAO2oB,EAAU,KAI7BrxB,EAAU6K,EAAGjP,YAER01B,GAAWzmB,EAAGxK,cAAe3nB,EAAI2sB,aAAawF,EAAGxK,eAE5CwK,EAAGxK,aAAe3nB,EAAI2sB,aAAawF,EAAGxK,cACxC5wB,EAAEo7B,EAAGxK,aAAavZ,UAEtBsqC,EAASvmB,EAAG1I,WAAU,IACfzW,UAAY,OACnBhT,EAAImU,YAAYukC,EAAQvmB,IAG5BxmB,EAAM0uB,cAAclI,GACpBxmB,EAAMiC,UAAS,GAEf5N,EAAIiuB,SAASkE,EAAGxK,aAAewK,GAAI,GAEnC7mB,EAAWY,YAAYP,EAC3B,IAGJrU,EAAON,EAAU,CACb0gD,iBAAkBA,EAClBe,eAAgBA,IAGpBthD,EAAa,kBAAmB,IAAIC,EAAK,CAAEmV,IAAK,GAAIqU,OAAO,EAAMzoB,QAASsgD,KAC1EthD,EAAa,kBAAmB,IAAIC,EAAK,CAAEmV,IAAK,GAAIpU,QAASu/C,IAE5D,CA3SD,CA2SG1+C,OAAOvB,MAAM0uB,QAEhB,SAAUpvB,EAAGgC,GAEb,IAAItB,EAAQuB,OAAOvB,MACfH,EAASP,EAAEO,OACXkU,EAAS/T,EAAMqhC,WACfj7B,EAASpG,EAAM0B,GAAG4G,OAClB3F,EAAcyD,EAAOzD,YACrB4F,EAAMnC,EAAOoC,IACb9I,EAAeiD,EAAYjD,aAC3BmU,EAAazN,EAAOyN,WACpBrU,EAAU4G,EAAO5G,QACjBkyC,EAAgBtrC,EAAOsrC,cACvBj6B,EAAY5D,EAAW4D,UACvB1V,EAAO/B,EAAM+B,KACbq/C,EAAiB,qBACjBC,EAAkB,sBAClBC,EAAmB,uBAEnBC,EAAc/hD,EAAQK,OAAO,CAC7BM,KAAM,SAASC,GACX,IAAIiI,EAAOhJ,KACXG,EAAQa,GAAGF,KAAKG,KAAK+H,EAAMjI,GAE3BiI,EAAK+jC,UAAY,IAAIsF,EAErBrpC,EAAK6M,OAAQ,EACb7M,EAAKqe,WAAa,CAAC,CACvB,EAEApiB,WAAY,SAASk9C,EAAMttC,GACvB,IAAIwS,EAAarnB,KAAKqnB,WAClB7Q,EAAMhC,EAAWyuB,kBAAkBpuB,GAEvC,GAAIwS,EAAW3L,MAA2B,WAAnB2L,EAAW3L,KAAmB,CAEjD,IAAKymC,EAeD,OAdAA,EAAOj5C,EAAI+iB,OAAOzV,EAAK,IAAK,CAAEkF,KAAM2L,EAAW3L,QAC1C2J,UAAYgC,EAAWhC,UAC5B88B,EAAKloC,MAAQoN,EAAWpN,MAExBpF,EAAM8uB,iBACN9uB,EAAM0vB,WAAW4d,GAEZA,EAAKtxB,aACN3nB,EAAImU,YAAY7G,EAAIoyB,eAAe,UAAWuZ,GAGlDttC,EAAM0uB,cAAc4e,GACpBttC,EAAM4uB,YAAY0e,GAClB3tC,EAAWY,YAAYP,IAChB,EAEP3L,EAAIkR,KAAK+nC,EAAM96B,EAEvB,CAEA,OAAO,CACX,EAEAzlB,KAAM,WACF,IACIiT,EADO7U,KACMgtC,YAEjBhtC,KAAK+sC,UAAUvS,MAAM3lB,EAAO7U,KAAKqnB,YAHtBrnB,KAINitC,aAAap4B,EACtB,EAEAF,KAAM,WACF,IAKIk5B,EACAyF,EANAtqC,EAAOhJ,KACP6U,EAAQ7L,EAAKgkC,YACbnlB,EAAQzP,EAAUvD,GAClBwmC,GAAU,EACV8G,EAAOt6B,EAAM/lB,OAAS9B,KAAK+sC,UAAU10B,OAAOu2B,aAAa/mB,EAAM,IAAM,KAGrEyzB,EAAO36C,EAAM4B,QAAQE,QAAQ8b,KAC7Bxd,EAAUiI,EAAKC,OAAOlI,QACtBkK,EAAWlK,EAAQkK,SACnBiI,EAAcnS,EAAQmS,YACtBqoC,KAAiB56C,EAAM0B,GAAG+/C,aAAelvC,GAAeA,EAAYuoC,WA/EhF,YA+E6FvoC,EAAYuoC,UAAUC,MACvG7oC,EAAgB,CACZoH,MAAOhP,EAAShG,WAChBsf,SAAS,EACT5S,UAAW4pC,GAKnB,SAAS/gB,EAAMnwB,GACX,IAAIzB,EAAUilC,EAAOjlC,QACjB8S,EAAO9S,EAAQ+B,KAAKo3C,GAAgB1qC,MAAM1Q,QAAQ,KAAM,OACxD0e,EAAYzc,EAAQ+B,KAAKq3C,GAAiB3qC,MAC1C4C,EAAQrR,EAAQ+B,KAAKs3C,GAAkB5qC,MAE3CrO,EAAKqe,WAAa,CACd3L,KAAMA,EACN2J,UAAyB,KAAdA,EAAmBA,EAAY3J,EAC1CzB,MAAOA,GAGXohC,EAAUryC,EAAK/D,WAAWk9C,EAAMttC,GAEhC+G,EAAMvR,GAEFrB,EAAK8M,QACL9M,EAAK8M,QAEb,CAEA,SAAS8F,EAAMvR,GACXA,EAAEoW,iBACF6yB,EAAK//B,UACLs6B,EAAOt6B,UAEPrK,EAAImqB,mBAAmB7e,EAAWyuB,kBAAkBpuB,IAAQqB,QACvDmlC,GACDryC,EAAKikC,aAAap4B,EAE1B,CAhCA7U,KAAK0sC,mBAAmB73B,GA0CxBhC,EAAc+I,MAAQA,EAElB2/B,IACA1oC,EAAc1E,MAAQ,KAE1B0E,EAAcyY,SAAW,IAEzBuiB,EAAS7tC,KAAKmtC,aAAa,SAAUt6B,GAAewJ,KAAK,eACzDi3B,EAAOtqC,EAAKgqC,YAAYnF,EAAQ0N,GAEhC1N,EAAOjlC,QAAQ4hB,YAAY,uBAAwB+wB,GACnD1N,EAAOnjC,QACNC,KAAK,oBAAoBmZ,GAAG,QAAS0W,GAAO6F,MAC5C11B,KAAK,mBAAmBmZ,GAAG,QAASlI,GAAOykB,MAC3C11B,KAAK,uBAAuBmZ,GAAG,WAtBhC,SAAiBzZ,GACTA,EAAE8V,SAAWzd,EAAKouC,MAClBtW,EAAMnwB,GACCA,EAAE8V,SAAWzd,EAAKmxC,KACzBj4B,EAAMvR,EAEd,IAgBoDg2B,MAEnD11B,KAAKo3C,GAAgB1qC,IAAI8qC,EAAOA,EAAKntC,aAAa,OAAQ,GAAK,WAAWqrB,MAC1E11B,KAAKq3C,GAAiB3qC,IAAI8qC,EAAOA,EAAKxoB,UAAY,IAAI0G,MACtD11B,KAAKs3C,GAAkB5qC,IAAI8qC,EAAOA,EAAKloC,MAAQ,IAAIomB,MAEpD,IAAIz3B,EAAUilC,EAAOjlC,QAgBrB,GAfI2yC,IACAvyC,EAAKq5C,aAAe,IAAI1hD,EAAM0B,GAAG+/C,YAC7Bx5C,EAAQ+B,KAAK,kBACbnK,EAAO,CAAC,EAAG0S,IAGflK,EAAKq5C,aAAa94C,KAAK,UAAU,SAASqyC,GACN,MAA5BA,EAAGC,SAAS/4B,IAAI,SAChBla,EAAQ+B,KAAKo3C,GAAgB1qC,IAAIrX,KAAKqT,QAE9C,IAEArK,EAAKq5C,aAAa94C,KAAK,QAASixB,IAGhC8gB,EAAM,CACN,IAAIQ,EAAelzC,EAAQS,QAAQ,aAAa+E,SAChDxF,EAAQyJ,IAAI,aAAcypC,EAC9B,CACAjO,EAAOG,SAAS5yB,OAChBxS,EAAQ+B,KAAKo3C,GAAgBpgD,QAAQ,SAASokC,QAClD,EAEAiN,YAAa,SAASnF,EAAQ0N,GAC1B,IACIlI,EAAcpzC,EAAE,UAAUgd,SAAS4wB,EAAOjlC,SAC1CqC,EAFOjL,KAESiJ,OAAOlI,QAAQkK,SAE/BqoC,EAAOD,EAAYE,UAAU,CAC7BC,eAAe,EACfx3B,MAAO,CACH,CACIy3B,MAAO,oBACPC,MAAOh/B,EAAOzJ,EAASgC,gBACvBhE,OAAQ,WAEZ,CACIwqC,MAAO,qBACPC,MAAOh/B,EAAOzJ,EAASkC,UACvBlE,OAAQ,WAEZ,CACIwqC,MAAO,sBACPC,MAAOh/B,EAAOzJ,EAASiC,WACvBjE,OAAQ,cAGjBoT,KAAK,aAQR,OANIk/B,GACAlI,EAAYnvB,QAAQjkB,EAAE,sCAG1B4tC,EAAOjlC,QAAQgrC,MAAM3zC,EA7BVD,KA6BiBqtC,uBAAuB,CAAEpiC,WAAUqiC,iBAAkB,WAAYC,iBAAkB,qBAExG+F,CACX,IAIJ3yC,EAAM0B,GAAG4G,OAAOi5C,YAAcA,EAE9B7hD,EAAa,aAAc,IAAI0G,EAAOzG,KAAK,CAAEe,QAAS6gD,IAErD,CArND,CAqNGhgD,OAAOvB,MAAM0uB,QAEhB,SAAUpvB,EAAGgC,GAEb,IAAItB,EAAQuB,OAAOvB,MACfH,EAASP,EAAEO,OACXuG,EAASpG,EAAM0B,GAAG4G,OAClBC,EAAMnC,EAAOoC,IACbqL,EAAazN,EAAOyN,WACpBrU,EAAU4G,EAAO5G,QAEjB+nB,EAAK,cACLo6B,EAAc,WACdC,EAAgB,aAChBC,EAAQ,QACRC,EAAM,MACNC,EAAM,MACNC,EAAW,WACXC,EAAW,WACXC,EAAU,UACVC,EAAU,UACVC,EAAQ,QACRC,EAAQ,QACRC,EAAQ,QACRC,EAAK,KACLC,EAAK,KACLC,EAAK,KAEL9iD,EAAOyG,EAAOzG,KACdG,EAAoBsG,EAAOtG,kBAC3B21C,EAAoBrvC,EAAOqvC,kBAC3BoB,EAAkBzwC,EAAOywC,gBACzBvJ,EAAgBlnC,EAAOknC,cACvB5tC,EAAe0G,EAAOzD,YAAYjD,aAClC4G,EAAiBF,EAAOzD,YAAY2D,eACpCE,EAAUxG,EAAM0B,GAAG0E,OAAO/F,GAAGD,QAAQoG,QACrCk8C,EAAa1iD,EAAM0iD,WACnBp8B,EAAWtmB,EAAMsmB,SAEjBq8B,EAAiB,EAAGn1C,QAAO9G,aAAc,oBAAoB8G,QAAY9G,SAEzEk8C,EAAoB,IAAInN,EAAkB,CAAC,CAAEvyC,KAAM,CAACk/C,MAEpDS,EAAe/iD,EAAkBD,OAAO,CACxCM,KAAM,SAASC,GACX,IAAIwnB,EAAItoB,EAAEO,OAAO,CACby9C,YAAaj+C,KAAKi+C,YAClBwF,cAAc,GACf1iD,GAAW,CAAC,GAEfN,EAAkBO,GAAGF,KAAKG,KAAKjB,KAAMuoB,EACzC,EACAm7B,WAAY,SAASlzC,EAAMD,GACvBC,EAAOA,GAAQ,EACfD,EAAUA,GAAW,EACrB,IAAIozC,EAAa18B,EAASq8B,EAATr8B,CAAyB,CAAE9Y,MAAO,IAAMoC,EAASlJ,QAASN,EAAO6mB,wBAC9Eg2B,EAAY,IAAMpzC,EAEtB,MAAO,oCACK,IAAIwV,MAAMxV,EAAO,GAAGmL,KACpB,qBAAuBioC,EAAY,OAC/B,IAAI59B,MAAMzV,EAAU,GAAGoL,KAAKgoC,GAChC,SACL,UACX,EAEA1F,YAAa,SAASh1C,EAAQ4L,GAC1B,IAAIgvC,EAAgB5jD,EAAE,mBAAoBgJ,EAAOvB,UAAUgmB,WAAW,aAEtE7Y,EAAMgC,SAASgtC,EAAcl5C,KAAKw4C,GAAI,GAAI,GAC1CtuC,EAAMiC,UAAS,GAEf7N,EAAOmM,YAAYP,EACvB,EAEAF,KAAM,WACF,IAAI5T,EAAUf,KAAKe,QACnBA,EAAQmW,KAAOlX,KAAK0jD,WAAW3iD,EAAQyP,KAAMzP,EAAQwP,SAErD9P,EAAkBO,GAAG2T,KAAK1T,KAAKjB,KACnC,IAGA8jD,EAAYxjD,EAAKE,OAAO,CACxB4Y,WAAY,SAAS/W,EAAI4G,GACrB,IAAID,EAAOhJ,KACP+jD,EAAM9jD,EAAE,WAAagJ,EAAOlI,QAAQkK,SAAS4C,YAAc,aAC3D+U,EAAQ3iB,EAAED,KAAKe,QAAQijD,eAAe/mC,SAAS,QAAQgnC,WAAW,CAClElQ,OAAQ1xC,EACR6hD,kBAAkB,EAClB9oC,KAAMpb,KAAKmkD,MAAM56C,KAAKvJ,MACtBgvC,SAAUhvC,KAAKokD,UAAU76C,KAAKvJ,MAC9B4b,MAAO5b,KAAK8yC,OAAOvpC,KAAKvJ,QACzBqc,KAAK,cAERha,EAAGyhB,GAAG,QAAS9jB,KAAKqkD,QAAQ96C,KAAKvJ,OAC9B8jB,GAAG,UAAW9jB,KAAKkzC,SAAS3pC,KAAKvJ,OAEpCA,KAAKskD,QAAUr7C,EACfjJ,KAAKmxC,OAASvuB,EAEd3Z,EAAO4K,WAAa7T,KAAKmxC,OAEzB,IAAItjC,EAAc,IAAI9G,EAAOw9C,gBAAgB,CACzCljD,QAAS0F,EAAOy9C,mBAChBC,gBAAgB,IAGpBpkD,EAAa,oBAAqBwN,GAElCk2C,EAAI9mC,SAAS2F,EAAMha,SACnBm7C,EAAIW,YAAY,CACZ3gD,KAAM,iBAGVggD,EAAIjgC,GAAG,SAAS,KACZ9a,EAAKs7C,QAAQ3vC,KAAK,oBAAoB,GAE9C,EAEAiO,MAAO,WACH,OAAO5iB,KAAKmxC,MAChB,EAEAiT,UAAWnkD,EAAEstB,KAEb42B,MAAO,WACHnkD,KAAKmxC,OAAOpwC,QAAQgzC,OAAO55B,SAASmoC,EACxC,EAEAxP,OAAQ,WACJ9yC,KAAKmxC,OAAOpwC,QAAQgzC,OAAO9wB,YAAYq/B,EAC3C,EAEApP,SAAU,SAAS7oC,GACf,IAAIrB,EAAOhJ,KACP0C,EAAO/B,EAAM+B,KACb+S,EAAMpL,EAAE8V,QAER1K,GAAO/S,EAAKmxC,IACZ7qC,EAAKmoC,OAAOv1B,QACLnG,GAAO/S,EAAKqf,MAAQ1X,EAAE6X,QAC7BlZ,EAAKmoC,OAAO/1B,OACZpS,EAAK27C,cAAc,CAAEjnB,IAAK,EAAGR,IAAK,KAC3BznB,IAAQ/S,EAAKouC,OACpBpxB,YAAW,KACP1W,EAAK27C,cAAc,CAAEjnB,IAAK,EAAGR,IAAK,GAAI,GAGlD,EAEAmnB,QAAS,SAASh6C,GACDpK,EAAEoK,EAAEuU,QAAQvV,QAAQ,WAErB2Z,SAAS,eACjBhjB,KAAK4iB,QAAQe,QAErB,EAEAra,OAAQ,SAASjH,GACb,IAAIugB,EAAQ5iB,KAAK4iB,QAEbA,EAAMlY,SAA2C,SAAhCkY,EAAMlY,QAAQ2H,IAAI,YACnCuQ,EAAMhH,QAGVvZ,EAAG4gB,YAAY,UACnB,EAEA1P,QAAS,WACDvT,KAAKmxC,QACLnxC,KAAKmxC,OAAO59B,SAEpB,IAGAqxC,EAAkBd,EAAUtjD,OAAO,CACnCM,KAAM,SAASC,GACXf,KAAK6kD,KAAO,EACZ7kD,KAAKwQ,KAAO,EAEZszC,EAAU9iD,GAAGF,KAAKG,KAAKjB,KAAMC,EAAEO,OAAOO,EAAS,CAC3CM,QAASmiD,EACTQ,cACI,gCAEQ,IAAIh+B,MAAMhmB,KAAK6kD,KAAO7kD,KAAKwQ,KAAO,GAAGmL,KAAK,8CAFlD,6CAOZ,EAEAyoC,UAAW,WACP,IASIU,EAAWC,EATX/7C,EAAOhJ,KACP4I,EAAUI,EAAKmoC,OAAOvoC,QACtBizB,EAAQjzB,EAAQ+B,KAAK,cACrBq6C,EAAYnpB,EAAMopB,GAAG,GACrBC,EAAWrpB,EAAMopB,GAAGppB,EAAM/5B,OAAS,GACnCs+B,EAAQz/B,EAAMwkD,UAAUH,GACxB3kB,EAAM1/B,EAAMwkD,UAAUD,GACtBL,EAAO77C,EAAK67C,KACZr0C,EAAOxH,EAAKwH,KAWhB,SAAS40C,EAAkB/6C,GACvB,IAAIwgB,EAAI5qB,EAAEiC,QACV,MAAO,CACHw7B,IAAKtQ,KAAKi4B,OAAOh7C,EAAEi7C,QAAUz6B,EAAE1M,YAAciiB,EAAM3hB,KAAOsmC,GAAc,EACxE7nB,IAAK9P,KAAKi4B,OAAOh7C,EAAEk7C,QAAU16B,EAAE26B,aAAeplB,EAAM5hB,MAAQsmC,GAAa,EAEjF,CAdAl8C,EAAQ+B,KAAK,KAAKqlC,UAAU51B,KAAK,eAAgB,MAEjDimB,EAAI7hB,MAAQ0mC,EAAS,GAAGO,YACxBplB,EAAI5hB,KAAOymC,EAAS,GAAGxtB,aAEvBotB,GAAazkB,EAAI7hB,KAAO4hB,EAAM5hB,MAAQqmC,EACtCE,GAAc1kB,EAAI5hB,IAAM2hB,EAAM3hB,KAAOjO,EAUrC5H,EAAQ88C,YAAYx9B,GACfpE,GAAG,YAAa,cAAc,SAASzZ,GACpCrB,EAAK27C,cAAcS,EAAkB/6C,GACzC,IACCyZ,GAAG,aAAc,cAAc,WAC5B9a,EAAK27C,eACT,IACC7gC,GAAG,OAAQ,cAAc,SAASzZ,GAC/BA,EAAEoW,iBACF,IAAIb,EAAQyjC,EAAWh5C,GAAG,GAC1BrB,EAAKm2C,MAAMiG,EAAkBxlC,EAAMrF,UACvC,GACR,EAEAorC,OAAQ,SAAS9kB,GACb,OAAOA,GAAQA,EAAKnD,IAAM,GAAKmD,EAAK3D,IAAM,GAAK2D,EAAKnD,KAAO19B,KAAKwQ,MAAQqwB,EAAK3D,KAAOl9B,KAAK6kD,IAC7F,EAEA1F,MAAO,SAASte,GACR7gC,KAAK2lD,OAAO9kB,KACZ7gC,KAAKskD,QAAQ3vC,KAAK,cAAe,CAC7BnE,KAAMqwB,EAAKnD,IACXntB,QAASswB,EAAK3D,MAElBl9B,KAAKmxC,OAAOv1B,QAEpB,EAEA+oC,cAAe,SAAS9jB,GACpB,IAAIj4B,EAAU5I,KAAKmxC,OAAOvoC,QACtBg9C,EAASh9C,EAAQ+B,KAAK,aACtBkxB,EAAQjzB,EAAQ+B,KAAK,cACrBk6C,EAAO7kD,KAAK6kD,KACZ55C,EAAWjL,KAAKskD,QAAQvjD,QAAQkK,SAEhCjL,KAAK2lD,OAAO9kB,IACZ+kB,EAAOxyC,KAAKzS,EAAM+C,OAAOuH,EAAS2C,gBAAiBizB,EAAKnD,IAAKmD,EAAK3D,MAElErB,EAAM1iB,MAAK,SAASxV,GAChB1D,EAAED,MAAMwqB,YACJ+3B,EACA5+C,EAAIkhD,EAAOhkB,EAAK3D,KAAOv5B,EAAIkhD,EAAOhkB,EAAKnD,IAE/C,MAEAkoB,EAAOxyC,KAAKnI,EAAS5F,aACrBw2B,EAAM5Y,YAAYs/B,GAE1B,EAEArP,SAAU,SAAS7oC,GACf,IAAIw7C,EAAmB7lD,KAAKmxC,OAAO5sB,UAInC,GAFAu/B,EAAU9iD,GAAGkyC,SAASjyC,KAAKjB,KAAMqK,GAE5BrK,KAAKmxC,OAAO5sB,UAAjB,CAIA,IAQIuhC,EARApjD,EAAO/B,EAAM+B,KACb+S,EAAMpL,EAAE8V,QACR0b,EAAQ77B,KAAKmxC,OAAOvoC,QAAQ+B,KAAK,cACjCuL,EAAQkX,KAAKhC,IAAIyQ,EAAM5iB,OAAO,eAAeuG,OAAOjY,QAAS,GAC7Dw+C,EAAe34B,KAAKi4B,MAAMnvC,EAAQlW,KAAK6kD,MACvCmB,EAAkB9vC,EAAQlW,KAAK6kD,KAE/BoB,GAAU,EAGVxwC,GAAO/S,EAAKqf,MAAS1X,EAAE6X,OAGhBzM,GAAO/S,EAAKof,IACnBmkC,GAAU,EACVF,KACOtwC,GAAO/S,EAAKie,OACnBslC,GAAU,EACVD,KACOvwC,GAAO/S,EAAKge,MACnBulC,GAAU,EACVD,KACOvwC,GAAO/S,EAAK+e,MACnBqkC,EAAS9lD,KAAKmxC,OAAOvoC,QAAQ+B,KAAK,cAEvB7I,OAAS,IAChBmkD,GAAU,EACVH,EAAOnkD,QAAQ,WAhBnBskD,GAAU,EACVF,KAmBJ,IAAIG,EAAY,CACZxoB,IAAKtQ,KAAKhC,IAAI,EAAGgC,KAAKlC,IAAIlrB,KAAKwQ,KAAMu1C,EAAe,IACpD7oB,IAAK9P,KAAKhC,IAAI,EAAGgC,KAAKlC,IAAIlrB,KAAK6kD,KAAMmB,EAAkB,KAGvDvwC,GAAO/S,EAAKouC,OAAS+U,EACrB7lD,KAAKm/C,MAAM+G,GAEXlmD,KAAK2kD,cAAcuB,GAGnBD,IACA57C,EAAEoW,iBACFpW,EAAE87C,2BA9CN,CAgDJ,EAEAhC,MAAO,WACH,IAAIl5C,EAAWjL,KAAKskD,QAAQvjD,QAAQkK,SAEpC64C,EAAU9iD,GAAGmjD,MAAMljD,KAAKjB,MAExBA,KAAK4iB,QAAQha,QACR+B,KAAK,aAAayI,KAAKnI,EAAS5F,aAAag7B,MAC7C11B,KAAK,cAAcsY,YAAYs/B,EACxC,EAEAzP,OAAQ,WACJgR,EAAU9iD,GAAG8xC,OAAO7xC,KAAKjB,MACzBA,KAAK4iB,QAAQha,QAAQmV,IAAI,IAAMmK,EACnC,IAGAk+B,EAA2BjmD,EAAQK,OAAO,CAC1CiB,KAAM,WACF,IAAIyrC,EAAQltC,KAAK8sC,aACjBI,EAAMrF,cAEN5nC,EAAED,KAAKiJ,OAAO8L,MAAMpK,KAAK,oCACpBwO,MAAK,SAAS5R,EAAM2R,GACjBA,EAAG5B,QACP,IAEJtX,KAAKiJ,OAAOmM,YAAY83B,EAAM11B,UAClC,EACA6uC,mBAAoB,SAAS9qB,GACzBryB,EAAIwyB,mBAAmBH,EAAO,YAClC,EACAE,eAAgB,SAASF,GACrBryB,EAAIoyB,kBAAkBC,EAAO,YACjC,EACA+qB,iBAAkB,SAAS3oC,EAAQie,EAAUE,GAGzC,IAFA,IAAI4B,EAAK1B,EAEAr4B,EAAIi4B,EAAUj4B,GAAK,EAAGA,IAI3B,GAHA+5B,EAAM/f,EAAOnN,KAAK7M,IAClBq4B,EAAO/7B,EAAEy9B,GAAK/yB,KAAK,cAAgBmxB,EAAW,MAErCh6B,OACL,OAAOk6B,CAGnB,EACAuqB,sBAAuB,SAASt9C,GAC5BA,EAAOiL,oBACPjL,EAAOka,4BACPla,EAAOma,yBACPna,EAAOoa,4BACX,EACAmjC,iBAAkB,SAAS9oB,EAAK5B,GAK5B,IAJA,IAEI2qB,EAFAC,EAAShpB,EAAI/yB,KAAK,iBAClBk3B,EAAY3Y,SAASw9B,EAAOtsC,KAAK,aAAc,IAAMssC,EAAO1lB,KAAK,WAAa,EAGzEr9B,EAAIm4B,EAAUn4B,GAAKk+B,EAAWl+B,IAEnC,IADA8iD,EAAK/oB,EAAI/yB,KAAK,cAAgBhH,EAAI,MAC3B7B,OACH,OAAO2kD,CAGnB,EACAE,iBAAkB,SAASjpB,EAAKnC,GAO5B,IANA,IAII53B,EAAGijD,EAAU5qB,EAJb6qB,EAActrB,EAAMpgB,qBAAqBunC,GACzCoE,EAAmBvrB,EAAMpgB,qBAAqBynC,GAC9C/mB,EAAQ6B,EAAI7B,MACZkrB,EAAgBlrB,EAAM/5B,OAGnB+kD,EAAY/kD,OAAS,GACxB+kD,EAAY,GAAGvvC,SAEnB,KAAOwvC,EAAiBhlD,OAAS,GAC7BglD,EAAiB,GAAGxvC,SAGxB,IAAK3T,EAAIojD,EAAgB,EAAGpjD,GAAK,EAAGA,KAChCq4B,EAAOH,EAAMl4B,IACJqR,aAAawtC,KAAWI,IAC7BgE,EAAW19C,EAAIkwB,gBAAgBp5B,KAAKiJ,OAAOvB,SAAUk7C,IAC5CxjC,aAAa,OAAQ4c,EAAKhnB,aAAa6tC,IAChDtnB,EAAMrX,QAAQ0iC,IAEdrrB,EAAMrX,QAAQhb,EAAIkwB,gBAAgBp5B,KAAKiJ,OAAOvB,SAAUg7C,GAGpE,EACAsE,oBAAqB,SAASzrB,GAC1BryB,EAAIwyB,mBAAmBH,EAAO,aAC9BryB,EAAIoyB,kBAAkBC,EAAO,aAC7Bt7B,EAAEs7B,GAAO5wB,KAAK,UAAU+iB,WAAW,cACnCxkB,EAAIozB,iBAAiBf,EACzB,EACAwC,oBAAqB,SAASxC,GAC1B,OAAOryB,EAAI60B,oBAAoBxC,EAAO,SAC1C,IAGA0rB,EAAmBb,EAAyB5lD,OAAO,CACnDmU,KAAM,WACF,IAIIuyC,EAAWxpB,EAAK1B,EAChBmrB,EAAQvrB,EAAwBwrB,EALhCvyC,EAAQ7U,KAAKgtC,WAAU,GACvByZ,EAAKv9C,EAAIG,QAAQwL,EAAM6B,aAAc,CAACysC,EAAIC,IAC1C7nB,EAAQryB,EAAIG,QAAQo9C,EAAI1D,GACxBh0C,EAAW/O,KAAKe,QAAQgO,UAAY,QAIxC,IAAKwsB,GAAUv7B,KAAK0V,cAAgB3O,EAAO+X,WAAW2qB,gBAAgBgd,GAClEzmD,KAAKitC,aAAap4B,OADtB,CAKA7U,KAAKy7B,eAAeF,GAEpBmC,EAAM+oB,EAAGr6B,WACTwP,EAAW1yB,EAAIsoB,cAAckM,GAAK,GAE9B+oB,EAAGxqB,QAAU,GAAkB,UAAbltB,IAClB2uB,EAAMnC,EAAM/qB,KAAKorB,EAAW6qB,EAAGxqB,QAAU,IAG7CirB,EAAYlnD,KAAK+9B,oBAAoBxC,GACrC4rB,EAASzpB,EAAI/K,WAAU,GACvB1yB,EAAEknD,GAAQp+B,QAEV,IAAK,IAAIplB,EAAI,EAAGA,EAAIujD,EAAWvjD,GAAQq4B,EAAKgF,KAAK,YAC7ChF,EAAO/7B,EAAEy9B,GAAK/yB,KAAK,cAAgBhH,EAAI,MAE9B7B,OACDk6B,EAAKgF,KAAK,WAAa,GAAkB,UAAbjyB,GAAwBitB,EACpDA,EAAK5hB,KAAK0oC,EAAS9mB,EAAKgF,KAAK,WAAa,GAE1ChhC,KAAKqnD,YAAYF,EAAQnrB,IAG7BJ,EAAW1yB,EAAIsoB,cAAckM,GAAK,IAClC1B,EAAOh8B,KAAKsmD,iBAAiB5oB,EAAI3d,cAAe6b,EAAUj4B,IACtC0F,QAAQ65C,GAAI37C,QAEby0B,EAAKgF,KAAK,WAAa,IAAMpF,GAAyB,UAAb7sB,EACxD/O,KAAKqnD,YAAYF,EAAQnrB,GAEzBA,EAAK5hB,KAAK0oC,EAAS9mB,EAAKgF,KAAK,WAAa,KAIlDomB,EAAcnnD,EAAEknD,GAAQx8C,KAAK,cAAgBhH,EAAI,MACjCyW,KAAKooC,KAAWG,GAAayE,EAAYhtC,KAAK0oC,IAC1DsE,EAAYhtC,KAAKooC,EAAOC,GAIhB,UAAZ1zC,EACA7F,EAAIoR,aAAa6sC,EAAQzpB,GAEzBx0B,EAAImU,YAAY8pC,EAAQzpB,GAGxBz9B,EAAEs7B,GAAO5wB,KAAK,aAAa7I,OAAS,GACpC9B,KAAKgnD,oBAAoBzrB,GAG7Bv7B,KAAKqmD,mBAAmB9qB,GACxBv7B,KAAKitC,aAAap4B,GAElB7U,KAAKumD,sBAAsBvmD,KAAKiJ,OAvDhC,CAwDJ,EACAo+C,YAAa,SAAS3pB,EAAK1B,GACvB,IAAIsrB,GAEJA,EAAUtrB,EAAKkZ,SACPh+B,KAAKnQ,EAAO6mB,uBACpB05B,EAAQ55B,WAAWo1B,GACnBwE,EAAQrqC,SAASygB,EACrB,IAGA6pB,EAAsBnB,EAAyB5lD,OAAO,CACtDmU,KAAM,WACF,IAKI6yC,EACA7jD,EAEAq4B,EACAsrB,EATAzyC,EAAQ7U,KAAKgtC,WAAU,GACvByZ,EAAKv9C,EAAIG,QAAQwL,EAAM6B,aAAc,CAACysC,EAAIC,IAC1C7nB,EAAQryB,EAAIG,QAAQo9C,EAAI1D,GACxB8D,EAActrB,EAAMpgB,qBAAqBunC,GACzCoE,EAAmBvrB,EAAMpgB,qBAAqBynC,GAG9CpyC,EAAO+qB,GAASA,EAAM/qB,KAGtBzB,EAAW/O,KAAKe,QAAQgO,UAAY,QAGxC,IAAK03C,GAAOzmD,KAAK0V,cAAgB3O,EAAO+X,WAAW2qB,gBAAgBgd,GAC/DzmD,KAAKitC,aAAap4B,OADtB,CAcA,IATA7U,KAAKy7B,eAAeF,GAEpBisB,EAAct+B,SAASu9B,EAAGzxC,aAAa,aAAa,IAEhDyxC,EAAGtqB,QAAU,GAAkB,UAAbptB,IAClB03C,EAAGrnC,aAAa,YAAaooC,EAAcf,EAAGtqB,QAAU,GACxDqrB,EAAcA,EAAcf,EAAGtqB,QAAU,GAGxCx4B,EAAI,EAAGA,EAAI6M,EAAK1O,OAAQ6B,KACzBq4B,EAAOh8B,KAAKynD,mBAAmBj3C,EAAK7M,GAAI6jD,EAAaz4C,EAAU03C,OAM/Da,EAAUtrB,EAAKrJ,aACPtN,UAAYte,EAAO6mB,sBAC3B05B,EAAQjuB,gBAAgBwpB,GAEpByE,EAAQtyC,aAAawtC,IAAU8E,EAAQtyC,aAAawtC,KAAWI,GAC/D0E,EAAQloC,aAAaojC,EAAOE,GAGhB,UAAZ3zC,EACA7F,EAAIoR,aAAagtC,EAAStrB,GAE1B9yB,EAAImU,YAAYiqC,EAAStrB,GAG7Bh8B,KAAK0nD,aAAaJ,EAAStrB,KAG3B6qB,EAAY/kD,OAAS,GAAKglD,EAAiBhlD,OAAS,IACpD9B,KAAK2mD,iBAAiBn2C,EAAK,GAAI+qB,GAG/Bt7B,EAAEs7B,GAAO5wB,KAAK,aAAa7I,OAAS,GACpC9B,KAAKgnD,oBAAoBzrB,GAG7Bv7B,KAAKqmD,mBAAmB9qB,GACxBv7B,KAAKitC,aAAap4B,GAElB7U,KAAKumD,sBAAsBvmD,KAAKiJ,OA9ChC,CA+CJ,EACAw+C,mBAAoB,SAAS/pB,EAAK8pB,EAAaz4C,EAAU44C,GACrD,IAAI3rB,EACA4rB,EACArgD,EAAQigD,EAAc,EAI1B,IAFAxrB,EAAO/7B,EAAEy9B,GAAK/yB,KAAK,cAAgB68C,EAAc,KAAK,KAE1CxrB,EAAKG,QAAU,GAAkB,UAAbptB,GAAwBitB,IAAS2rB,EAC7D3rB,EAAKG,SAAW,MADpB,CAKA,GAAIH,EACA,OAAOA,EAGX,KAAYz0B,GAAS,MACjBy0B,EAAO/7B,EAAEy9B,GAAK/yB,KAAK,cAAgBpD,EAAQ,KAAK,KAEpCy0B,EAAKG,QAAU,GAHP50B,KAQxB,GAAKy0B,EAAL,CAMA,IAFA4rB,EAAgB1+B,SAAS8S,EAAKhnB,aAAa,aAAa,IAAMgnB,EAAKG,QAAU,KAEvDqrB,GAA4B,UAAbz4C,EACjC,OAAOitB,EACAwrB,GAAeI,GACtB5rB,EAAK5c,aAAayjC,EAAS7mB,EAAKG,QAAU,EAP9C,CAhBA,CAyBJ,EACAurB,aAAc,SAASJ,EAAStrB,GAC5B,IACA6rB,EAAaC,EAAMC,EADf55C,EAAQm5C,EAAQr7C,MAAMkC,MAGrBA,IAIL05C,EAAc1qC,WAAWhP,GACzB25C,EAAO35C,EAAM5M,MAAMsmD,EAAYpzB,WAAW3yB,QAC1CimD,EAAmBF,EAAc,EAAKC,EAEtCR,EAAQr7C,MAAMkC,MAAQ45C,EACtB/rB,EAAK/vB,MAAMkC,MAAQ45C,EACvB,IAGAC,EAAmB5B,EAAyB5lD,OAAO,CACnDmU,KAAM,WACF,IAUIszC,EAVApzC,EAAQ7U,KAAKgtC,YACbx8B,EAAOgE,EAAWu1B,OAAOl1B,GAAO,SAAS4b,GACzC,OAAOxwB,EAAEwwB,GAAMpnB,QAAQ65C,GAAI,EAC/B,IACIuD,EAAKv9C,EAAIG,QAAQwL,EAAM6B,aAAc,CAACysC,EAAIC,IAC1C1lB,EAAMltB,EAAK,GACXyrB,EAAUwqB,EAAKA,EAAGxqB,QAAU,EAC5BL,EAAW37B,EAAEuQ,EAAK,IAAIjJ,QACtBg0B,EAAQryB,EAAIG,QAAQq0B,EAAKqlB,GACzBmF,EAAYxqB,EAAI3d,cAGpB,IAAKwb,GAAUv7B,KAAK0V,cAAgB3O,EAAO+X,WAAW2qB,gBAAgB/L,GAClE19B,KAAKitC,aAAap4B,OADtB,CAKA,IAAK,IAAI2f,EAAI,EAAGA,EAAIyH,EAASzH,IACrBhkB,EAAK4Y,QAAQ8+B,EAAU13C,KAAKorB,EAAWpH,IAAM,GAC7ChkB,EAAKpP,KAAK8mD,EAAU13C,KAAKorB,EAAWpH,IAI5C,GAAI+G,EAAM/qB,KAAK1O,QAAU0O,EAAK1O,QAC1BmmD,EAAe/+C,EAAI2X,KAAK0a,MACHryB,EAAIisB,cAAc8yB,KACnCA,EAAe/+C,EAAI0nB,KAAK2K,IAGxB0sB,GAAgBA,EAAaz3C,OAC7By3C,EAAeA,EAAaz3C,KAAK,GAAGqrB,MAAM,IAG9C3yB,EAAIoO,OAAOikB,GACXv7B,KAAKumD,sBAAsBvmD,KAAKiJ,aAC7B,GAAIi/C,EAAU13C,KAAK1O,QAAU0O,EAAK1O,QACrCmmD,EAAeC,EAAUr3B,eAGrBo3B,EAAeC,EAAUx2B,iBAG7BxoB,EAAIoO,OAAO4wC,OACR,CACHloD,KAAKy7B,eAAeF,GAEpB,IAAK,IAAI53B,EAAI,EAAGA,EAAI6M,EAAK1O,OAAQ6B,IAC7B+5B,EAAMltB,EAAK7M,GACXuF,EAAIovB,mBAAmBoF,GAEvBuqB,GADAA,EAAe/+C,EAAI2X,KAAK6c,IAAQx0B,EAAI0nB,KAAK8M,IACb7B,MAAM,GAGlC77B,KAAKmoD,cAActzC,EAAOozC,GAC1BA,EAAe,KAEfjoD,KAAKooD,oBAAoB7sB,EAAOmC,GAEhCx0B,EAAIoO,OAAOomB,GAGf19B,KAAKqmD,mBAAmB9qB,EAC5B,CAEIt7B,EAAEs7B,GAAO5wB,KAAK,aAAa7I,OAAS,EACpC9B,KAAKgnD,oBAAoBzrB,GAClBryB,EAAI6a,GAAGmkC,EAAWlF,IAAU/iD,EAAEs7B,GAAO5wB,KAAK,WAAW7I,OAAS,GACrE9B,KAAK2mD,iBAAiBuB,EAAU13C,KAAK,GAAI+qB,GAGzC0sB,GACAjoD,KAAKmoD,cAActzC,EAAOozC,GAG9BjoD,KAAKumD,sBAAsBvmD,KAAKiJ,OA3DhC,CA4DJ,EACAk/C,cAAe,SAAStzC,EAAO4b,GAC3B5b,EAAMgC,SAAS4Z,EAAM,GACrB5b,EAAMiC,UAAS,GACf9W,KAAKiJ,OAAOmM,YAAYP,EAC5B,EACAuzC,oBAAqB,SAAS7sB,EAAOmC,GACjC,IAAIn2B,EAAOy0B,EAAMqsB,EAAcC,EAAS1sB,EAAW1yB,EAAIsoB,cAAckM,GAAK,GACtE6qB,EAAWhtB,EAAM/qB,KAAK,GACtB00C,EAAWqD,EAAS1sB,MAAM0sB,EAAS1sB,MAAM/5B,OAAS,GAClD+/B,EAAY3Y,SAASg8B,EAASlwC,aAAa,aAAa,IAAMkwC,EAAS/oB,QAAU,EAErF,IAAK50B,EAAQ,EAAGA,GAASs6B,EAAWt6B,GAAgBy0B,EAAKgF,KAAK,YAC1DhF,EAAO/7B,EAAEy9B,GAAK/yB,KAAK,cAAgBpD,EAAQ,MAElCzF,QAAUk6B,EAAKgF,KAAK,WAAa,IACtCsnB,EAAU/sB,EAAM/qB,KAAKorB,EAAW,IAChCysB,EAAepoD,EAAEqoD,GAAS39C,KAAK,eAAiBpD,EAAQ,GAAK,MAE5CzF,OACbumD,EAAaG,OAAOxsB,GAEpB/7B,EAAEqoD,GAASzrC,OAAOmf,GAEtBh8B,KAAKyoD,eAAezsB,IAGnBA,EAAKl6B,SACNk6B,EAAOh8B,KAAKsmD,iBAAiB5oB,EAAI3d,cAAe6b,EAAUr0B,GAC1DvH,KAAKyoD,eAAezsB,GAGhC,EACAysB,eAAgB,SAAShC,GACrB,IAAIiC,EAAejC,EAAGzlB,KAAK,WAAa,EAEpC0nB,GAAgB,GAChBjC,EAAG/4B,WAAWo1B,GACV2D,EAAGrsC,KAAKooC,KAAWG,GACnB8D,EAAGrsC,KAAKooC,EAAOC,IAGnBgE,EAAGrsC,KAAK0oC,EAAS4F,EAEzB,IAGAC,EAAsBvC,EAAyB5lD,OAAO,CACtDmU,KAAM,WACF,IAQIszC,EAActkD,EAAGq4B,EAAMxH,EARvB3f,EAAQ7U,KAAKgtC,YACbyZ,EAAKv9C,EAAIG,QAAQwL,EAAM6B,aAAc,CAACysC,EAAIC,IAC1C7nB,EAAQryB,EAAIG,QAAQo9C,EAAI1D,GACxBvyC,EAAO+qB,GAASA,EAAM/qB,KACtBg3C,EAAct+C,EAAIsoB,cAAci1B,GAAI,GACpCmC,EAAcp4C,GAAQA,EAAK,GAAGqrB,MAAM/5B,OACpC+kD,EAActrB,EAAMpgB,qBAAqBunC,GACzCoE,EAAmBvrB,EAAMpgB,qBAAqBynC,GAGlD,IAAK6D,GAAOzmD,KAAK0V,cAAgB3O,EAAO+X,WAAW2qB,gBAAgBgd,GAC/DzmD,KAAKitC,aAAap4B,OADtB,CAKA,GAAmB,GAAf+zC,GAAoBnC,EAAGtqB,SAAWysB,GAClCX,EAAe/+C,EAAI2X,KAAK0a,MACHryB,EAAIisB,cAAc8yB,KACnCA,EAAe/+C,EAAI0nB,KAAK2K,IAGxB0sB,GAAgBA,EAAaz3C,OAC7By3C,EAAeA,EAAaz3C,KAAK,GAAGqrB,MAAM,IAG9C3yB,EAAIoO,OAAOikB,GACXv7B,KAAKumD,sBAAsBvmD,KAAKiJ,YAC7B,CASH,IARAC,EAAIovB,mBAAmBmuB,GAEvBwB,EAAe/+C,EAAI2X,KAAK4lC,IAAOv9C,EAAI0nB,KAAK61B,GAExCzmD,KAAKy7B,eAAeF,GAEpBisB,EAAct+B,SAASu9B,EAAGzxC,aAAa,aAAc,IAEhDwf,EAAI,EAAGA,EAAIiyB,EAAGtqB,QAAS3H,IACxB,IAAK7wB,EAAI,EAAGA,EAAI6M,EAAK1O,OAAQ6B,GAASq4B,EAAKgF,KAAK,YAAc,GAC1DhF,EAAO/7B,EAAEuQ,EAAK7M,IAAIgH,KAAK,eAAiB68C,EAAchzB,GAAK,MAElD1yB,QAAUk6B,EAAKgF,KAAK,YAAc,EACvChF,EAAK1kB,SAELtX,KAAK6oD,oBAAoBr4C,EAAK7M,GAAI6jD,EAAchzB,GAK5Dx0B,KAAKqmD,mBAAmB9qB,EAC5B,EAEIsrB,EAAY/kD,OAAS,GAAKglD,EAAiBhlD,OAAS,IACpD9B,KAAK2mD,iBAAiBn2C,EAAK,GAAI+qB,GAG/Bt7B,EAAEs7B,GAAO5wB,KAAK,aAAa7I,OAAS,GACpC9B,KAAKgnD,oBAAoBzrB,GAGzB0sB,IACApzC,EAAMgC,SAASoxC,EAAc,GAC7BpzC,EAAMiC,UAAS,GACf9W,KAAKiJ,OAAOmM,YAAYP,IAG5B7U,KAAKumD,sBAAsBvmD,KAAKiJ,OApDhC,CAqDJ,EACA4/C,oBAAqB,SAASnrB,EAAK5B,GAC/B,IAAIE,EAAO/7B,EAAEy9B,GAAK/yB,KAAK,cAAgBmxB,EAAW,KAElD,GAAIE,EAAKl6B,QAAUk6B,EAAKgF,KAAK,WAAa,EAAG,CACzC,IAAIkU,EAAQlZ,EAAKkZ,OAAM,GAKvB,OAJAlZ,EAAK4X,MAAMsB,GACXl1C,KAAK8oD,eAAe5T,GACpBA,EAAM96B,KAAK,YAAa8O,SAAS8S,EAAK5hB,KAAK,aAAa,IAAM,QAC9D4hB,EAAK1kB,QAET,CAEA,IAAK,IAAI3T,EAAIm4B,EAAUn4B,GAAK,EAAGA,IAG3B,IAFAq4B,EAAO/7B,EAAEy9B,GAAK/yB,KAAK,cAAgBhH,EAAI,MAE9B7B,OAGL,OAFA9B,KAAK8oD,eAAe9sB,QACpBA,EAAK5hB,KAAK,YAAa8O,SAAS8S,EAAK5hB,KAAK,aAAa,IAAM,EAIzE,EACA0uC,eAAgB,SAASrC,GACrB,IAAIsC,EAAetC,EAAGzlB,KAAK,WAAa,EAEpC+nB,GAAgB,GAChBtC,EAAG/4B,WAAWm1B,GACV4D,EAAGrsC,KAAKooC,KAAWI,GACnB6D,EAAGrsC,KAAKooC,EAAOE,IAGnB+D,EAAGrsC,KAAKyoC,EAASkG,EAEzB,IAGAC,EAAgC5C,EAAyB5lD,OAAO,CAChEmU,KAAM,WACF,IAEI4mB,EAAOmC,EAAK8pB,EAAayB,EAAQ9rB,EAFjCtoB,EAAQ7U,KAAKgtC,YACbyZ,EAAKv9C,EAAIG,QAAQwL,EAAM6B,aAAc,CAACysC,EAAIC,IAG1C,GAAKqD,EAUL,GALAlrB,EAAQryB,EAAIG,QAAQo9C,EAAI1D,GACxBrlB,EAAM+oB,EAAGr6B,WACTo7B,EAAct+C,EAAIsoB,cAAci1B,GAAI,GAC3B/oB,EAAI7U,SAAS2+B,EAAc,GAEhCxnD,KAAK0V,cAAgB3O,EAAO+X,WAAW2qB,gBAAgBgd,GACvDzmD,KAAKitC,aAAap4B,OADtB,CAUA,GALA7U,KAAKy7B,eAAeF,GAEpBisB,EAAct+B,SAASjpB,EAAEwmD,GAAIrsC,KAAK,aAAc,MAChD6uC,EAAShpD,EAAEy9B,GAAK/yB,KAAK,eAAiB68C,EAAc,EAAIxnD,KAAKkpD,YAAYzC,GAAM,GAAK,KAAK3jC,IAAI,KAE9EmmC,EAAOhtB,UAAYwqB,EAAGxqB,SAAWwqB,EAAGxhC,UAAYgkC,EAAOhkC,QAGlE,OAFAjlB,KAAKqmD,mBAAmB9qB,QACxBv7B,KAAKitC,aAAap4B,GAItBsoB,EAAUn9B,KAAKkpD,YAAYzC,GAAMzmD,KAAKkpD,YAAYD,GAElDhpD,EAAEwmD,GAAIzlB,KAAK6hB,EAAS1lB,GACdtgB,OAAO3T,EAAIysB,UAAUszB,GAAU,GAAK,QAAUA,EAAO5jC,WAE3DplB,EAAEwmD,GAAIt4C,MAAMs4C,EAAGhB,aACfxlD,EAAEgpD,GAAQ3xC,SAENmvC,EAAGzxC,aAAawtC,KAAWE,GAC3B+D,EAAGrnC,aAAaojC,EAAOI,GAEvB6D,EAAGzxC,aAAawtC,KAAWI,GAC3B5iD,KAAK2mD,iBAAiBjpB,EAAKnC,GAG3Bt7B,EAAEs7B,GAAO5wB,KAAK,aAAa7I,OAAS,GACpC9B,KAAKgnD,oBAAoBzrB,GAG7Bv7B,KAAKqmD,mBAAmB9qB,GACxBv7B,KAAKitC,aAAap4B,GAClB7U,KAAKumD,sBAAsBvmD,KAAKiJ,OAlChC,MAZIjJ,KAAKitC,aAAap4B,EA+C9B,EACAq0C,YAAa,SAASzC,GAClB,OAAOv9B,SAASu9B,EAAGzxC,aAAa6tC,GAAU,KAAO,CACrD,IAGAsG,EAA8B/C,EAAyB5lD,OAAO,CAC9DmU,KAAM,WACF,IAEIy0C,EAAIzrC,EAAQ4d,EAAOisB,EAAa5rB,EAAUytB,EAAWC,EAFrDz0C,EAAQ7U,KAAKgtC,YACbyZ,EAAKv9C,EAAIG,QAAQwL,EAAM6B,aAAc,CAACysC,EAAIC,IAG1C,GAAKqD,EAWL,GANA2C,EAAKlgD,EAAIG,QAAQo9C,EAAIvD,GACrBvlC,EAASzU,EAAIG,QAAQo9C,EAAI,CAACzD,EAAOC,IACjC1nB,EAAQryB,EAAIG,QAAQo9C,EAAI1D,GACxByE,EAAct+C,EAAIsoB,cAAci1B,GAAI,IACpC7qB,EAAW1yB,EAAIsoB,cAAc43B,GAAI,IAElB,IAAMzrC,EAAOnN,KAAK1O,OAQjC,IAHAunD,EAAY1rC,EAAOnN,KAAKorB,EAAW57B,KAAKupD,YAAY9C,MAC5B4C,EAAUxgC,SAAS2+B,GAEvCxnD,KAAK0V,cAAgB3O,EAAO+X,WAAW2qB,gBAAgBgd,GACvDzmD,KAAKitC,aAAap4B,OADtB,CAUA,GALA7U,KAAKy7B,eAAeF,GAEpBisB,EAAcvnD,EAAEwmD,GAAIrsC,KAAK,eACzBkvC,EAAWrpD,EAAEopD,GAAW1+C,KAAK,cAAgB68C,EAAc,KAAK1kC,IAAI,KAEnDwmC,EAASntB,UAAYsqB,EAAGtqB,SAAWsqB,EAAGxhC,UAAYqkC,EAASrkC,QAGxE,OAFAjlB,KAAKqmD,mBAAmB9qB,QACxBv7B,KAAKitC,aAAap4B,GAItB5U,EAAEwmD,GAAIzlB,KAAK8hB,EAAS9iD,KAAKupD,YAAY9C,GAAMzmD,KAAKupD,YAAYD,IACtDzsC,OAAO3T,EAAIysB,UAAU2zB,GAAY,GAAK,QAAUA,EAASjkC,WAE3DohC,EAAGzxC,aAAawtC,KAAWC,GAC3BgE,EAAGrnC,aAAaojC,EAAOG,GAG3B1iD,EAAEqpD,GAAUhyC,SAERrX,EAAEs7B,GAAO5wB,KAAK,aAAa7I,OAAS,GACpC9B,KAAKgnD,oBAAoBzrB,GAG7Bv7B,KAAKqmD,mBAAmB9qB,GACxBv7B,KAAKitC,aAAap4B,EA3BlB,MAVI7U,KAAKitC,aAAap4B,QAXlB7U,KAAKitC,aAAap4B,EAiD9B,EACA00C,YAAa,SAAS9C,GAClB,OAAOv9B,SAASu9B,EAAGzxC,aAAa8tC,GAAU,KAAO,CACrD,IAGA0G,EAAmBpD,EAAyB5lD,OAAO,CACnDmU,KAAM,WACF,IAAIE,EAAQ7U,KAAKgtC,YACblkC,EAAO9I,KAAKe,QAAQ+H,KACpBsR,EAAgB,QAATtR,EAAiB+5C,EAAUC,EAClC2D,EAAKv9C,EAAIG,QAAQwL,EAAM6B,aAAc,CAACysC,EAAIC,IAC1CzlC,EAASzU,EAAIG,QAAQo9C,EAAI,CAACzD,EAAOC,IACjC1nB,EAAQryB,EAAIG,QAAQo9C,EAAI1D,GACxB0G,EAAUvgD,EAAIkwB,gBAAgBp5B,KAAKiJ,OAAOvB,SAAU++C,EAAGzmC,SAASpZ,gBAE/D6/C,GAAOzmD,KAAK0V,cAAgB3O,EAAO+X,WAAW2qB,gBAAgBgd,KAKnEzmD,KAAKy7B,eAAeF,GAEP,QAATzyB,GAAkB7I,EAAEwmD,GAAI1iC,GAAG,IAAM3J,EAAO,KACxCpa,KAAK0pD,uBAAuBjD,EAAI9oC,EAAQvD,EAAMqvC,GAC9B,WAAT3gD,GAAqB7I,EAAEwmD,GAAI1iC,GAAG,IAAM3J,EAAO,MAClDpa,KAAK2pD,qBAAqBlD,EAAI9oC,EAAQvD,EAAMqvC,GAG5CxpD,EAAEwmD,GAAIzlB,KAAK5mB,EAAKxT,gBAAkB,GAClC3G,EAAEwmD,GAAI/4B,WAAWtT,GAGjBna,EAAEs7B,GAAO5wB,KAAK,aAAa7I,OAAS,GACpC9B,KAAKgnD,oBAAoBzrB,GAG7Bv7B,KAAKqmD,mBAAmB9qB,IApBpBv7B,KAAKitC,aAAap4B,EAsB1B,EACA+0C,iBAAkB,SAASnD,GACvB,OAAOv9B,SAASu9B,EAAGzxC,aAAa8tC,GAAU,GAC9C,EACA+G,iBAAkB,SAASpD,GACvB,OAAOv9B,SAASu9B,EAAGzxC,aAAa6tC,GAAU,GAC9C,EACA6G,uBAAwB,SAASjD,EAAI9oC,EAAQvD,EAAMqvC,GAC/C,IAAIxtB,EAAUwqB,EAAGxqB,QACbE,EAAUsqB,EAAGtqB,QACb2tB,EAAU7pD,EAAEwpD,GACZM,EAAgB38B,KAAKi4B,MAAMlpB,EAAU,GAEjC4tB,EAAgB,GAChBD,EAAQ1vC,KAAKyoC,EAASkH,GAGtB9tB,EAAU,GACV6tB,EAAQ1vC,KAAK0oC,EAAS7mB,GAG1Bh8B,EAAEwmD,GAAIzlB,KAAK5mB,EAAM+hB,EAAU4tB,GACtBnW,MAAMkW,GAEX7pD,EAAEwmD,GAAIt4C,MAAMs4C,EAAGhB,aACfqE,EAAQ37C,MAAM27C,EAAQ,GAAGrE,aAErBgB,EAAGjkC,aAAaggC,KACZiE,EAAGzxC,aAAawtC,KAAWI,GAC3BkH,EAAQ1vC,KAAKooC,EAAOE,GACf+D,EAAGzxC,aAAa6tC,IAAyC,MAA7B4D,EAAGzxC,aAAa6tC,IAC7C4D,EAAGrnC,aAAaojC,EAAOE,GAG3B1iD,KAAK2mD,iBAAiBF,EAAGr6B,WAAYzO,EAAOyO,aAE5C09B,EAAQ1vC,KAAKooC,EAAOiE,EAAGzxC,aAAawtC,IAGpD,EACAmH,qBAAsB,SAASlD,EAAI9oC,EAAQvD,EAAMqvC,GAC7C,IAAIL,EAAKlgD,EAAIG,QAAQo9C,EAAGvD,GACpBsE,EAAct+B,SAASjpB,EAAEwmD,GAAIrsC,KAAK,aAAc,IAChDwhB,EAAW1yB,EAAIsoB,cAAc43B,GAAI,GACjCntB,EAAUwqB,EAAGxqB,QACbE,EAAUsqB,EAAGtqB,QACb6tB,EAAgB58B,KAAKi4B,MAAMppB,EAAU,GACrCotB,EAAYppD,EAAE0d,GAAQhT,KAAKu4C,GAAI+B,GAAGrpB,EAAWK,EAAU+tB,GACvDf,EAASjpD,KAAKwmD,iBAAiB6C,EAAW7B,EAAcrrB,GACxD2tB,EAAU7pD,EAAEwpD,GAERO,EAAgB,GAChBF,EAAQ1vC,KAAK0oC,EAASkH,GAEtB7tB,EAAU,GACV2tB,EAAQ1vC,KAAKyoC,EAAS1mB,GAGtB8sB,GAAUA,EAAOnnD,OACjBmnD,EAAOT,OAAOsB,GAEdT,EAAUxsC,OAAOitC,GAGrB7pD,EAAEwmD,GAAIzlB,KAAK5mB,EAAM6hB,EAAU+tB,GAEvBvD,EAAGjkC,aAAaggC,KACZiE,EAAGzxC,aAAawtC,KAAWG,GAC3BmH,EAAQ1vC,KAAKooC,EAAOC,GACfgE,EAAGzxC,aAAa8tC,IAAyC,MAA7B2D,EAAGzxC,aAAa8tC,IAC7C2D,EAAGrnC,aAAaojC,EAAOC,IAG3BqH,EAAQ1vC,KAAKooC,EAAOiE,EAAGzxC,aAAawtC,IAGpD,IAGAyH,EAAwB3pD,EAAKE,OAAO,CACpCa,QAAS,SAASN,GACd,IAAImpD,EAAc,CACdxsB,IAAK,CACDysB,OAAQlD,EACRmD,OAAUpC,EACVvP,MAAOuQ,EACP3gC,MAAOmhC,GAEXa,OAAQ,CACJF,OAAQ5C,EACR6C,OAAUzB,EACVlQ,MAAO0Q,EACP9gC,MAAOmhC,IAOf,OAHAzoD,EAAUP,EAAOO,EAASf,KAAKe,UACvBqvC,OAASrvC,EAAQqvC,QAAU,SAE5B,IAAI8Z,EAAYnpD,EAAQ+H,MAAM/H,EAAQqvC,QAAQrvC,EACzD,EAEAuI,OAAQ,SAASjH,EAAIwlB,GACjB,IAAIrP,GAAe+qC,EAAkB/qC,YAAYqP,GAC7Cjd,EAAUvI,EAAGgH,QAAQ,cAAc8kC,mBAEnB,IAAhB31B,EACA5N,EAAQoP,KAAK3X,GAEbuI,EAAQ0f,KAAKjoB,EAErB,IAGAioD,EAAqBrc,EAAcztC,OAAO,CAC1CmU,KAAM,WACF,IACI1L,EADOjJ,KACOiJ,OAElBglC,EAAcjtC,GAAG2T,KAAK1T,KAAKjB,MAEvBiJ,EAAOkjB,iBACPljB,EAAOkjB,gBAAgBo+B,oBAE/B,IAOAC,EAAkBhT,EAAgBh3C,OAAO,CACzC8I,OAAQ,SAASjH,EAAIwlB,GACjB,IAAI4iC,GAAWlH,EAAkB/qC,YAAYqP,GACzCrP,EAAcxY,KAAKe,QAAQsX,OAAOG,YAAYqP,EAAO7nB,KAAKyqD,SAC1D7/C,EAAUvI,EAAGgH,QAAQ,cAAc8kC,kBAEnCvjC,GACAA,EAAQ+Y,OAAOthB,EAAImW,IAGP,IAAZiyC,EACA7/C,EAAQoP,KAAK3X,GAEbuI,EAAQ0f,KAAKjoB,EAErB,EACAhB,QAAS,SAASisB,GAGd,OAAO,IAAIg9B,EAAmB9pD,EAAO8sB,EAAkB,CACnDyf,UAHO/sC,KAGSe,QAAQgsC,YAEhC,EACA0d,QAAS,SAASh6B,GACd,OAAOvnB,EAAI6a,GAAG0M,EAAM,QACxB,IAGJjwB,EAAOG,EAAM0B,GAAG4G,OAAQ,CACpB66C,UAAWA,EACXN,aAAcA,EACdoB,gBAAiBA,EACjB4F,gBAAiBA,EACjBF,mBAAoBA,EACpBL,sBAAuBA,EACvBhD,iBAAkBA,EAClBM,oBAAqBA,EACrBS,iBAAkBA,EAClBW,oBAAqBA,EACrBK,8BAA+BA,EAC/BG,4BAA6BA,EAC7BK,iBAAkBA,IAItBnpD,EAAa,cAAe,IAAIukD,EAAgB,CAAEviD,GAAI,CAAEugB,OAAO,EAAM8uB,SAAU,YAE/ErxC,EAAa,gBAAiB,IAAI4pD,EAAsB,CAAEnhD,KAAM,SAAUiG,SAAU,YACpF1O,EAAa,iBAAkB,IAAI4pD,EAAsB,CAAEnhD,KAAM,YACjEzI,EAAa,cAAe,IAAI4pD,EAAsB,CAAEnhD,KAAM,MAAOiG,SAAU,YAC/E1O,EAAa,cAAe,IAAI4pD,EAAsB,CAAEnhD,KAAM,SAC9DzI,EAAa,YAAa,IAAI4pD,EAAsB,CAAEnhD,KAAM,MAAOsnC,OAAQ,YAC3E/vC,EAAa,eAAgB,IAAI4pD,EAAsB,CAAEnhD,KAAM,SAAUsnC,OAAQ,YACjF/vC,EAAa,yBAA0B,IAAI4pD,EAAsB,CAAEnhD,KAAM,MAAOsnC,OAAQ,WACxF/vC,EAAa,uBAAwB,IAAI4pD,EAAsB,CAAEnhD,KAAM,SAAUsnC,OAAQ,WACzF/vC,EAAa,wBAAyB,IAAI4pD,EAAsB,CAAEnhD,KAAM,MAAOsnC,OAAQ,WACvF/vC,EAAa,sBAAuB,IAAI4pD,EAAsB,CAAEnhD,KAAM,SAAUsnC,OAAQ,WAExFnpC,EAAe,iBAAkB,CAC7B,CAAEpD,KAAM,CAAC,SAAUuW,KAAM,CAAEnO,MAAO,CAAE4rC,WAAY,GAAIC,YAAa,UACjE,CAAEj0C,KAAM,CAAC,SAAUuW,KAAM,CAAEswC,MAAO,WAEtCrqD,EAAa,iBAAkB,IAAImqD,EAAgB,CAC/C9mD,OAAQyD,EAAQhB,eAChB9D,GAAI,CACAmvC,WAAW,EACXjrB,MAAO,iBAIftf,EAAe,mBAAoB,CAC/B,CAAEpD,KAAM,CAAC,SAAUuW,KAAM,CAAEnO,MAAO,CAAE4rC,WAAY,OAAQC,YAAa,UACrE,CAAEj0C,KAAM,CAAC,SAAUuW,KAAM,CAAEswC,MAAO,aAEtCrqD,EAAa,mBAAoB,IAAImqD,EAAgB,CACjD9mD,OAAQyD,EAAQf,iBAChB/D,GAAI,CACAmvC,WAAW,EACXjrB,MAAO,iBAIftf,EAAe,kBAAmB,CAC9B,CAAEpD,KAAM,CAAC,SAAUuW,KAAM,CAAEnO,MAAO,CAAE4rC,WAAY,OAAQC,YAAa,MACrE,CAAEj0C,KAAM,CAAC,SAAUuW,KAAM,CAAEswC,MAAO,YAEtCrqD,EAAa,kBAAmB,IAAImqD,EAAgB,CAChD9mD,OAAQyD,EAAQd,gBAChBhE,GAAI,CACAmvC,WAAW,EACXjrB,MAAO,gBAId,CAjtCD,CAitCGrkB,OAAOvB,MAAM0uB,QAEhB,SAAUpvB,GAGN,IAAIU,EAAQuB,OAAOvB,MACfwB,EAAQxB,EAAMwB,MACdjC,EAAWS,EAAM0B,GAAG4G,OACpBuL,EAAatU,EAASsU,WACtBtL,EAAMhJ,EAASiJ,IACf5I,EAAeL,EAASK,aACxB0nC,EAAS/nC,EAAS+nC,OAClBxlC,EAAU9B,EAAM4B,QAAQE,QACxBjC,EAASP,EAAEO,OAEfuJ,EAAY5H,EAAM3B,OAAO,CACzBM,KAAM,SAASmI,GACXjJ,KAAKiJ,OAASA,EACd,IAAIkJ,EAAelJ,EAAOlI,QAAQoR,aAClCnS,KAAK2qD,yBAA2B1hD,EAAOlI,QAAQ4pD,0BAA4B,GAC3E3qD,KAAK4qD,SAAW,CACZ,IAAIC,EAAc14C,GAClB,IAAI24C,EAAW34C,GACf,IAAI44C,EAAoB54C,GACxB,IAAI64C,EAAoB74C,GACxB,IAAI84C,EAAgB94C,GACpB,IAAI+4C,EAAgB/4C,GACpB,IAAIg5C,EAAmBh5C,GACvB,IAAIi5C,EAAcj5C,GAE1B,EAEAk5C,eAAgB,SAASn0C,GACrB,IACIV,EADSxW,KAAKiJ,OACDvB,SACbgQ,EAAYxO,EAAI+iB,OAAOzV,EAAK,OAC5B6iC,EAAW7iC,EAAI2tB,yBAInB,IAFAzsB,EAAU2N,UAAYnO,EAEfQ,EAAUiZ,YACb0oB,EAASh6B,YAAY3H,EAAUiZ,YAGnC,OAAO0oB,CACX,EAEA7iB,QAAS,SAAStf,GACd,MAAO,+BAAiCvB,KAAKuB,EACjD,EAEAo0C,mBAAoB,WAChB,IAAIz2C,EACAi4B,EACA7jC,EAASjJ,KAAKiJ,OAElB,IAAIjJ,KAAKurD,YAWT,OAPAvrD,KAAKurD,aAAc,EAEnB12C,EAAQ5L,EAAOqM,WACfw3B,EAAe,IAAIvsC,EAAasU,EAAO5L,EAAO8L,MAE9C7L,EAAI0uB,iBAAiB3uB,EAAOvB,UAErB,CAAEmN,MAAOA,EAAOi4B,aAAcA,EACzC,EAEA0e,iBAAkB,SAASC,GACvBvrD,EAASmqB,cAAcrqB,KAAKiJ,OAAQwiD,EAAiB3e,cAErD9sC,KAAKiJ,OAAO+M,mBAEZhW,KAAKurD,aAAc,CACvB,EAEAG,qBAAsB,SAASlD,EAAQ5U,GACnC,IAAI5qC,EAAOhJ,KACPiJ,EAASD,EAAKC,OACdwiD,EAAmBziD,EAAKsiD,qBAEvBG,IAILjD,EAAOvnD,KAAK+H,EAAMC,EAAQwiD,EAAiB52C,OAE3C6K,YAAW,WACPk0B,EAAM3yC,KAAK+H,EAAMC,EAAQwiD,EAAiB52C,OAE1C7L,EAAKwiD,iBAAiBC,EAC1B,IACJ,EAEAE,gBAAiB,SAAS92C,GAGtB,IAFA,IAAIgT,EAAQrT,EAAW4D,UAAUvD,GAExBlR,EAAI,EAAGA,EAAIkkB,EAAM/lB,OAAQ6B,IAC9BkkB,EAAMlkB,GAAGqd,UAAY9X,EAAI8rB,SAASnN,EAAMlkB,GAAGqd,YAAc6G,EAAMlkB,GAAGqd,SAE1E,EAEA4qC,cAAe,SAAS/2C,GACpB,IAAI0iB,EAAS,IAAI0Q,EACjB1Q,EAAOgR,IAAI1zB,GAEX7U,KAAK2rD,gBAAgB92C,GAErB0iB,EAAOjgB,OAAOzC,GAEd7U,KAAKiJ,OAAOmM,YAAYP,EAC5B,EAEAg3C,OAAQ,WACJ7rD,KAAK4rD,cAAc5rD,KAAKiJ,OAAOqM,WACnC,EAEAw2C,MAAO,WACH9rD,KAAK4rD,cAAc5rD,KAAKiJ,OAAOqM,YAC/BtV,KAAK0rD,qBAAqBzrD,EAAEstB,KAAMttB,EAAEstB,KACxC,EAEAw+B,eAAgB,SAASC,GACrB,IAAIC,EAAWhsD,EAAEmuB,WAEb89B,EAAS,IAAIC,WAUjB,OARMH,aAAgB9pD,OAAOkqD,OAASJ,EAAKK,YACvCL,EAAOA,EAAKK,aAGhBH,EAAO/Q,OAAS8Q,EAASh9B,QAAQ1lB,KAAK0iD,GAEtCC,EAAOI,cAAcN,GAEdC,EAAS59B,SACpB,EAEAk+B,cAAe,SAASr1C,EAAMnW,GAC1B,IAAIutB,EAAO,CAAEpX,KAAMA,GAAQ,IAE3BoX,EAAKpX,KAAOoX,EAAKpX,KAAKvQ,QAAQ,UAAW,IAEzC3G,KAAKiJ,OAAOtH,QAAQ,QAAS2sB,GAE7BtuB,KAAKiX,MAAMqX,EAAKpX,KAAMnW,GAAW,CAAC,EACtC,EAEAyrD,kBAAmB,SAASniD,GACxB,GAAM,eAAgBnI,UAAYO,EAAQ8b,MAAQ9b,EAAQiuB,QAAU,IAApE,CAIA,IAAI+7B,EAAgBpiD,EAAEoiD,eAAiBpiD,EAAEqiD,cAAcD,eAC3CvqD,OAAOuqD,eAAiB,CAAC,EAEjCzwC,EAAQywC,EAAczwC,OAASywC,EAAc/O,MAEjD,OAAO19C,KAAK2sD,cAAc3wC,EAP1B,CAQJ,EAEA2wC,cAAe,SAAS3wC,GACpB,GAAKA,EAAL,CAIA,IAAI86B,EAAS72C,EAAEu1B,KAAKxZ,GAAO,SAASslB,GAAQ,MAAO,YAAc3rB,KAAK2rB,EAAKx4B,KAAO,IAGlF,IAFW7I,EAAEu1B,KAAKxZ,GAAO,SAASslB,GAAQ,MAAO,eAAiB3rB,KAAK2rB,EAAKx4B,KAAO,IAE1EhH,QAAWg1C,EAAOh1C,OAA3B,CAIA,IAAI2pD,EAAmBzrD,KAAKsrD,qBAE5B,GAAKG,EAgBL,OAZAxrD,EAAE2sD,KAAKpyB,MAAMv6B,EAAGA,EAAEuV,IAAIshC,EAAQ92C,KAAK+rD,iBAC9Br9B,KAAK,WACF,IAAIm+B,EAAU7mC,MAAM8H,UAAUvsB,MAAMN,KAAKg5B,WACrC/iB,EAAOjX,EAAEuV,IAAIq3C,GAAS,SAASxiD,GAC/B,MAAO,aAAeA,EAAEuU,OAAO4G,OAAS,MAC5C,IAAG7J,KAAK,IAER3b,KAAKusD,cAAcr1C,GAEnBlX,KAAKwrD,iBAAiBC,EACzB,EAAEliD,KAAKvJ,QAEL,CApBP,CAPA,CA4BJ,EAEA8sD,QAAS,SAASziD,GAC2B,UAArCrK,KAAKiJ,OAAO8L,KAAKkkB,kBAIjBj5B,KAAKwsD,kBAAkBniD,GACvBA,EAAEoW,kBAINzgB,KAAK0sC,qBAEL1sC,KAAK0rD,sBACD,SAAqBziD,EAAQ4L,GACzB,IAAIk4C,EAAgB7jD,EAAI+iB,OAAOhjB,EAAOvB,SAAU,MAAO,CAC/CwU,UAAW,oBACXmJ,UAAW,WAEf5iB,EAAU9B,EAAM4B,QAAQE,QACxBsS,EAAO9L,EAAO8L,KAYlB,GAVA/U,KAAKgtD,wBAAwBD,EAAeh4C,GAE5CA,EAAKsK,YAAY0tC,GAGbtqD,EAAQwqD,QACRjtD,KAAKktD,qBAAqBH,EAAel4C,GAIzCpS,EAAQ8b,MAAQ9b,EAAQiuB,QAAU,GAAI,CACtCrmB,EAAEoW,iBACF,IAAIk1B,EAAI1sC,EAAOsL,cACfohC,EAAEjS,mBAAmBqpB,GACrB9jD,EAAOmM,YAAYugC,GACnB,IAAI/P,EAAY38B,EAAOvB,SAASqN,KAAK8wB,kBACrCD,EAAUiB,kBAAkBkmB,GAC5B9sD,EAAE8U,GAAMgJ,IAAI,SACZ6nB,EAAUhwB,YAAY,SACtB3V,EAAE8U,GAAM+O,GAAG,QAAS9jB,KAAK8sD,QAAQvjD,KAAKvJ,MAC1C,KAAO,CACH,IAAImtD,EAAiBlkD,EAAOsL,cAC5B44C,EAAezpB,mBAAmBqpB,GAClC9jD,EAAOmM,YAAY+3C,EACvB,CAEAt4C,EAAM8uB,gBACV,IACA,SAAoB16B,EAAQ4L,GACxB,IAAeu4C,EAAXl2C,EAAO,GAEXjO,EAAOmM,YAAYP,IAEnBu4C,EAAantD,EAAEgJ,EAAO8L,MAAM8T,SAAS,uBAE1B1P,MAAK,WACZ,IAAI6c,EAAYh2B,KAAKg2B,UAEjBA,GAAa9sB,EAAI6a,GAAGiS,EAAW,OAC/B9sB,EAAIoO,OAAO0e,GAGf9e,GAAQlX,KAAKqlB,SACjB,IAEA+nC,EAAW91C,SAEXtX,KAAKusD,cAAcr1C,EAAM,CAAEsjC,OAAO,GACtC,KAER,EACA6S,WAAY,SAAShjD,IACb5H,EAAQ8b,MAAQ9b,EAAQ+Y,QACxBnR,EAAEya,kBACFza,EAAEoW,iBAEV,EACA6sC,OAAQ,SAASjjD,GACb,GAAM,eAAgBnI,OAAtB,CAIA,IAAIqrD,GAAgBljD,EAAEqiD,eAAiBriD,GAAGkjD,cAAgB,CAAC,EACvDvxC,EAAQuxC,EAAavxC,OAASuxC,EAAa7P,MAE3C19C,KAAK2sD,cAAc3wC,IACnB3R,EAAEoW,gBANN,CAQJ,EACAusC,wBAAyB,SAASv8B,EAAM1b,GACpC,IAAKtS,EAAQ8b,MAAS9b,EAAQwqD,WAI9Bx8B,EAAOxwB,EAAEwwB,IACJpe,IAAI,CACLhD,YAAa,MACblB,MAAO,MACPC,OAAQ,MACRsjC,SAAU,SACV8b,OAAQ,IACRC,QAAS,MAGThrD,EAAQ8b,MAAM,CAEd,IAAI5W,EAAkB1H,EAAE8U,EAAKme,cAAcvrB,iBAE3C8oB,EAAKpe,IAAI,CACLq7C,YAAa,SACbnc,WAAY,SACZoc,YAAa,SACbniD,WAAY,SACZk1B,eAAgB,SAEpB,IAAIpM,EAAQ3sB,EAAgB0K,IAAI,SAC5BiiB,GACA7D,EAAKpe,IAAI,QAASiiB,GAEtB,IAAIsM,EAAaj5B,EAAgB0K,IAAI,cACjCuuB,GACAnQ,EAAKpe,IAAI,aAAcuuB,GAE3B,IAAI/0B,EAAWlE,EAAgB0K,IAAI,YAC/BxG,GACA4kB,EAAKpe,IAAI,WAAYxG,EAE7B,CACJ,EACAqhD,qBAAsB,SAASz8B,EAAM5b,GACjC,IACIE,EADO/U,KACKiJ,OAAO8L,KACnB64C,EAAa1kD,EAAI0X,OAAO6P,EAAM1b,GAC9B84C,EAHO7tD,KAGY8tD,aAAaj5C,EAAOE,GAGvCg5C,EAAY,cAFCF,EAAYrvC,KAAOovC,EAAWpvC,MAEH,OAD3BqvC,EAAYpvC,IAAMmvC,EAAWnvC,KACmB,MAEjExe,EAAEwwB,GAAMpe,IAAI,CACR,oBAAqB07C,EACrBC,UAAaD,GAErB,EACAD,aAAc,SAASj5C,EAAOE,GAC1B,IAGIk5C,EAHAhlD,EAASjJ,KAAKiJ,OACdi/B,EAAQh/B,EAAI+iB,OAAOhjB,EAAOvB,SAAU,OAAQ,CAAE2d,UAAW,WACzD5O,EAAiB5B,EAAM4B,eAG3B,GAAI5B,EAAMyD,UAAW,CACjB,IAAI41C,EAAkBhlD,EAAIyoB,WAAWlb,GACjCy3C,IAAoBhlD,EAAI6rB,MAAMte,IAAyC,IAAtB5B,EAAM8B,aACvDzN,EAAIoR,aAAa4tB,EAAOzxB,GACjBy3C,GAAmBr5C,EAAM8B,cAAgBF,EAAe3U,OAC/DoH,EAAImU,YAAY6qB,EAAOzxB,IAEvB5B,EAAM0vB,WAAW2D,GACjB+lB,GAAe,EAEvB,MACIx3C,EAAiBA,IAAmB1B,EAChC0B,EAAe8b,WAAW1d,EAAM8B,aAAeF,EACnDvN,EAAIoR,aAAa4tB,EAAOzxB,GAG5B,IAAImK,EAAS1X,EAAI0X,OAAOsnB,EAAOnzB,GAC3B6b,EAAOsX,EAAMxW,gBACb7Q,EAAOqnB,EAAMrX,YAIjB,GAFA3nB,EAAIoO,OAAO4wB,GAEP+lB,GAAgB/kD,EAAIyoB,WAAWf,IAAS1nB,EAAIyoB,WAAW9Q,KAAU3X,EAAI6rB,MAAMnE,KAAU1nB,EAAI6rB,MAAMlU,GAAO,CACtG,IAAIstC,EAAav9B,EAAK9uB,OACtB+e,EAAKxE,KAAOuU,EAAKvU,KAAOwE,EAAKxE,KAC7BxH,EAAMgC,SAASgK,EAAMstC,GACrBjlD,EAAIoO,OAAOsZ,GAEX/b,EAAMiC,UAAS,GACf7N,EAAOmM,YAAYP,EACvB,CAEA,OAAO+L,CACX,EAEA8rB,mBAAoB,SAAS73B,GACzB,IAAI5L,EAASjJ,KAAKiJ,OAClB,GAAIA,GAAUA,EAAOlI,QAAQ2U,WAAY,CACrC,IAAIX,EAAO9L,EAAO8L,KAGlB,GAFAF,EAAQA,GAAS5L,EAAOqM,WACxB3U,EAAM0B,GAAG4G,OAAO6V,WAAW4tB,mBAAmB73B,GAC1CA,EAAM4B,iBAAmB1B,GAA8B,IAAtBF,EAAM8B,YAAmB,CAC1D,IACIy3C,EADMr5C,EAAKme,cACG0V,eAAe,UACjC7zB,EAAKuF,aAAa8zC,EAASr5C,EAAKwd,WAAW,IAC3C1d,EAAMyuB,eAAe8qB,EACzB,CACAnlD,EAAOmM,YAAYP,EACvB,CACJ,EAEAw5C,iBAAkB,SAASn+B,EAAOO,GAC9B,IAAIrE,EAAYrX,EAEhB,GAAImb,EACA,OAAOhnB,EAAI4xB,sBAAsBrK,EAAM,CAAC,IAAK,KAAM,QAAUA,EAAKrE,WAMtE,GAHAA,EAAaqE,EAAKrE,WAClBrX,EAAO0b,EAAKyC,cAAcne,KAEtB7L,EAAI2tB,SAASzK,GACb,KAAOA,EAAWA,YAAcrX,IAAS7L,EAAIstB,QAAQpK,EAAWA,aAC5DA,EAAaA,EAAWA,WAIhC,OAAOA,CACX,EAEAnV,MAAO,SAASC,EAAMnW,GAClB,IAII4C,EAAG25B,EAAG/K,EAAY4lB,EAJlBlvC,EAASjJ,KAAKiJ,OACd0hD,EAA2B3qD,KAAK2qD,yBAChC2D,GAAe,EACfC,GAAe,EAOnB,GAJAvuD,KAAK0sC,uBAEL3rC,EAAUP,EAAO,CAAEg6C,OAAO,EAAOnyB,OAAO,GAAQtnB,IAEnC0iD,aACT,IAAK9/C,EAAI,EAAG25B,EAAIt9B,KAAK4qD,SAAS9oD,OAAQ6B,EAAI25B,EAAG35B,IACrC3D,KAAK4qD,SAASjnD,GAAG6qD,WAAWt3C,KAC5BA,EAAOlX,KAAK4qD,SAASjnD,GAAG62C,MAAMtjC,IAKtCnW,EAAQy5C,QAIRtjC,GAFAA,EAAOA,EAAKvQ,QAAQ,8CAA+C,OAEvDA,QAAQ,0BAA2B,KAMnDuQ,GAHAA,EAAOA,EAAKvQ,QAAQ,kCAAmC,sBAG3CA,QAAQ,QAAS,WAAWA,QAAQ,QAAS,YAEzD,IAAIupB,EAAQlwB,KAAKw2B,QAAQtf,GAEzBjO,EAAOiN,QACP,IAAIrB,EAAQ5L,EAAOqM,WACnBT,EAAM8uB,iBAEF9uB,EAAM4B,gBAAkBxN,EAAOvB,UAC/BmN,EAAM6uB,mBAAmBz6B,EAAO8L,MAGpC,IAAIwiB,EAAS,IAAI0Q,EACbC,EAAQ3Q,EAAO4Q,SAAStzB,GAExB8I,EAAS3d,KAAKquD,iBAAiBn+B,EAAOgY,GACtChP,GAAS,EAEb,IAAKv1B,EAAI,EAAGA,EAAIgnD,EAAyB7oD,OAAQ6B,IAAK,CAClD,MAAM8qD,EAAW9D,EAAyBhnD,GACtCsY,EAAMwyC,EAASxyC,KAAOwyC,EAE1B,GAAIvlD,EAAI6a,GAAGpG,EAAQ1B,GAAM,CACrBqyC,GAAe,EACfC,GAAmC,IAApBE,EAASv1B,OACxB,KACJ,CACJ,CAEA,IAAIw1B,EAAa/wC,GAAU1U,EAAO8L,OAAS7L,EAAI6a,GAAGpG,EAAQ,QAAU2wC,EAEhEvtD,EAAQsnB,OAASqmC,IAAex+B,GAAShnB,EAAI2tB,SAASlZ,MACtD9I,EAAMyN,WAAW4lB,GACjB1zB,EAAW6T,MAAMxT,EAAO8I,GAAQ,GAChCub,GAAS,GAGb,IAAImgB,EAAWr5C,KAAKqrD,eAAen0C,GAEnC,GAAImiC,EAAS1oB,YAAgD,sBAAlC0oB,EAAS1oB,WAAWzU,UAAmC,CAC9E,IAAIyyC,EAAgB,GACpB,IAAKhrD,EAAI,EAAG25B,EAAI+b,EAAS9mB,WAAWzwB,OAAQ6B,EAAI25B,EAAG35B,IAC/CgrD,EAAcvtD,KAAKi4C,EAAS9mB,WAAW5uB,GAAG0hB,WAG9Cg0B,EAAWr5C,KAAKqrD,eAAesD,EAAchzC,KAAK,UACtD,CA0BA,GAxBA4W,EAAa8mB,EAAS9mB,WAElBg8B,IACApW,EAASjvC,EAAIoT,KAAKiW,EAAW,IAC7BrpB,EAAIgwB,OAAO3G,EAAW,IAElB4lB,GACAtjC,EAAMyN,WAAW4lB,EAAM9b,aAI/BnsB,EAAEsyB,GACGtZ,OAAO,SAASkB,SAAS,WAAWkmB,MACpC11B,KAAK,SAASwP,SAAS,WAE5Bla,EAAEsyB,GAAYpZ,MAAK,SAAS5R,EAAOqnD,GAC5B1lD,EAAIstB,QAAQo4B,KAAS1lD,EAAIytB,cAAci4B,IAA0B,KAAlBA,EAAIvpC,WAClDupC,EAAIvvC,YAAYpW,EAAOvB,SAASkhC,eAAe,UAEvD,IAEA/zB,EAAM0vB,WAAW8U,GAEjB17B,EAAS3d,KAAKquD,iBAAiBn+B,EAAOgY,GAClChP,EAAQ,CACR,KAAOgP,EAAM9b,YAAczO,GACvBzU,EAAIgwB,OAAOgP,EAAM9b,YAGrBljB,EAAIgwB,OAAOgP,EAAM9b,WACrB,CAEAljB,EAAIsnB,UAAU3b,EAAM8C,yBACpBuwB,EAAMj8B,MAAM2rC,QAAU,SACtB1uC,EAAI8uB,iBAAiB/uB,EAAOvB,UAC5BwB,EAAIiuB,SAAS+Q,GACb3Q,EAAO6Q,YAAYvzB,GAEnB,IAAIg6C,EAAWh6C,EAAM8C,wBAAwByU,YACzCvX,EAAMyD,WAAmC,SAAtBpP,EAAIzF,KAAKorD,IAAwBh6C,EAAMyD,WAAmC,SAAtBpP,EAAIzF,KAAKorD,MAChFh6C,EAAM0uB,cAActjC,EAAE4uD,GAAUxlD,QAAQ,SAAS,IACjDwL,EAAMiC,UAAS,IAGnB,IAAIg4C,EAAe7uD,EAAE4U,EAAM8C,wBAAwByU,YAAY/iB,QAAQ,SAEvE,GAAIylD,EAAahsC,IAAI,GAAI,CAKrB,IAJA,IAAIisC,EAAeD,EAAanxC,SAASmsB,WACrCklB,EAAmBD,EAAajtD,OAAS,EACzCmtD,EAAcF,EAAajsC,IAAIksC,GAEF,OAA1BC,EAAYjuC,YAAiD,MAA1BiuC,EAAYjuC,WAA+C,KAA1BiuC,EAAYjuC,YACnFguC,GAAoB,EACpBC,EAAcF,EAAajsC,IAAIksC,GAG/BC,IAAgBH,EAAahsC,IAAI,IAAOgsC,EAAajqC,QAAQ,SAAS/iB,QACtEoH,EAAImU,YAAYnU,EAAIkwB,gBAAgBnwB,EAAOvB,SAAU,KAAMonD,EAAa,GAEhF,CAEA7lD,EAAOsB,0BACPtB,EAAOmM,YAAYP,EACvB,IAGAq6C,EAAU/sD,EAAM3B,OAAO,CACvBM,KAAM,SAASC,GACXf,KAAKe,QAAUA,GAAW,CAAC,EAC3Bf,KAAKmvD,aAAe,EACxB,EAEA3U,MAAO,SAAStjC,EAAMk4C,GAClB,IAEIzrD,EAAG25B,EADH6xB,EAAeC,GADRpvD,KACmCmvD,aAG9C,IAAKxrD,EAAI,EAAG25B,EAAI6xB,EAAartD,OAAQ6B,EAAI25B,EAAG35B,GAAK,EAC7CuT,EAAOA,EAAKvQ,QAAQwoD,EAAaxrD,GAAIwrD,EAAaxrD,EAAI,IAG1D,OAAOuT,CACX,IAGA2zC,EAAgBqE,EAAQ1uD,OAAO,CAC/BM,KAAM,SAASC,GACXmuD,EAAQluD,GAAGF,KAAKG,KAAKjB,KAAMe,GAE3Bf,KAAKmvD,aAAe,CAChB,wBAAyB,uBAEjC,EAEAX,WAAY,SAASt3C,GACjB,OAAQlX,KAAKe,QAAQ2R,MAAQ,iBAAmBiD,KAAKuB,EACzD,IAGA4zC,EAAaoE,EAAQ1uD,OAAO,CAC5BM,KAAM,SAASC,GACXmuD,EAAQluD,GAAGF,KAAKG,KAAKjB,KAAMe,GAG3Bf,KAAKmvD,aAAe,CAChB,oDAFc,IAGd,OAHc,IAId,wBAJc,IAMtB,EAEAX,WAAY,SAASt3C,GACjB,MAAO,8CAAgDvB,KAAKuB,EAChE,IAGA6zC,EAAsBmE,EAAQ1uD,OAAO,CACrCM,KAAM,SAASC,GACXmuD,EAAQluD,GAAGF,KAAKG,KAAKjB,KAAMe,GAE3Bf,KAAKqvD,iBAAmB,CACpB,iBAAkB,GAClB,mBAAoB,GACpB,UAAW,IACX,uBAAwB,SACxB,yFAA0F,GAC1F,SAAU,IAEdrvD,KAAKmvD,aAAenvD,KAAKqvD,iBAAiBp/B,OAAO,CAC7C,+LAAgM,KAChM,YAAa,WACb,UAAW,QACX,cAAe,IACf,iCAAkC,cAClC,gCAAiC,GACjC,sCAAuC,GACvC,sCAAuC,GACvC,YAAa,OACb,kBAAmB,GACnB,4BAA6B,GAC7B,iBAAkB,GAClB,uBAAwB,eACxB,0BAA2BjwB,KAAKsvD,iBAChC,uBAAwB,WACxB,sBAAuB,GACvB,kBAAmB,SAASC,EAAIC,GAAM,OAAOA,EAAKD,EAAK,GAAK,GAEpE,EAEAD,iBAAkB,SAASt0B,EAAOy0B,EAASnhC,GACvC,IACImT,EADS,yBACK9sB,KAAK2Z,GACnBohC,EAASphC,GAAQmT,GAAQA,EAAK,GAElC,OAAIguB,EACO,UACAC,EACA,4BAA8BA,EAAS,KAEvC,QAEf,EAEAlB,WAAY,SAASt3C,GACjB,MAAO,eAAiBvB,KAAKuB,IACtB,oBAAsBvB,KAAKuB,IAC3B,mCAAqCvB,KAAKuB,EACrD,EAEAy4C,kBAAmB,SAASz4C,GACxB,OAAOA,EAAKvQ,QAAQ,wBAAwB,SAAS4rC,EAAGlrB,GACpD,OAAKA,GAAcA,EAAW+B,QAAQ,QAAU,EACrC,GAGJmpB,CACX,GACJ,EAEAqd,SAAU,SAASpwB,EAAGqwB,GAClB,IAGIC,EAHA54C,EAAOsoB,EAAEna,UACTjS,EAAOlK,EAAIywB,UAAU6F,GAGrBuwB,EAAc74C,EAAK8jB,MAAM,+EACzBg1B,EAASD,GAAeA,EAAY,GACpCE,EAAW,YAAYt6C,KAAKq6C,GAE5BE,EAAgB,SAAS98C,GACzB,OAAOA,EAAKzM,QAAQ,8BAA+B,GACvD,EAQA,OANIopD,IACAD,GAAiB,GAGrB54C,EAAOA,EAAKvQ,QAAQ,iBAAkB,IAAIA,QAAQ,UAAW,MAEvDmpD,GAAkB,sCAAsCn6C,KAAKuB,IAC9D44C,GAAkB,YAAYn6C,KAAKuB,IACnC84C,IAAWC,GAAYJ,EACjB,CACH5zC,IAAK,KACLhQ,MAAOjM,KAAKmwD,yBAAyBD,EAAc98C,KAIvD,6BAA6BuC,KAAKuB,GAC3B,CACH+E,IAAK,KACLhQ,MAAOjM,KAAKowD,uBAAuBF,EAAc98C,UAHzD,CAMJ,EAEAi9C,aAAc,SAAS7wB,GACnB,IAAIn4B,EAWJ,OAT2B,GAAvBm4B,EAAEjN,WAAWzwB,QACbuF,EAAUm4B,EAAE7O,WAAW5P,WAAa7X,EAAIsqB,UAAUG,UAAYzqB,EAAIywB,UAAU6F,GAAKA,EAAE7O,WAAWtL,UAAU1e,QAAQ,uBAAwB,IACxIU,EAAUrH,KAAKswD,gBAAgBjpD,IAE/BA,EAAUrH,KAAKuwD,iBAAiB/wB,GAGpCt2B,EAAIoO,OAAOkoB,GAEJt2B,EAAI+iB,OAAOvkB,SAAU,KAAM,CAAE2d,UAAWhe,GACnD,EAEAipD,gBAAiB,SAASp5C,GACtB,IAAIsoB,EAAIt2B,EAAI+iB,OAAOvkB,SAAU,IAAK,CAAE2d,UAAWnO,IAG/C,MAFgB,mBAEFvB,KAAK6pB,EAAE7F,WACV35B,KAAKuwD,iBAAiB/wB,GAG1BtoB,CACX,EAEAq5C,iBAAkB,SAAS3nD,GACvB,IACInF,EAAOyF,EAAIzF,KAAKmF,GAqBpB,OAnBAM,EAAIoO,OAAO1O,EAAQ+nB,YAGgB,GAA/B/nB,EAAQ+nB,WAAW5P,UACf,kBAAkBpL,KAAK/M,EAAQ+nB,WAAW3P,YAC1C9X,EAAIoO,OAAO1O,EAAQ+nB,YAIvB,kBAAkBhb,KAAK/M,EAAQ+nB,WAAWtL,YAC1Cnc,EAAIoO,OAAO1O,EAAQ+nB,YAGX,KAARltB,EACU,IAAMA,EAAO,IAAMmF,EAAQyc,UAAY,KAAO5hB,EAAO,IAErDmF,EAAQyc,SAI1B,EAEA8qC,yBAA0B,SAASH,GAC/B,MAAI,sCAAsCr6C,KAAKq6C,GACpC,KACA,KAAKr6C,KAAKq6C,GACV,SAEA,QAEf,EACAI,uBAAwB,SAASJ,GAC7B,IAAIJ,EAAW,KAMf,MALK,MAAMj6C,KAAKq6C,KACZJ,GAAY,SAASj6C,KAAKq6C,GAAU,SAAW,WACnC,cAAcr6C,KAAKq6C,GAAU,QAAU,UAGhDJ,CACX,EAEAY,kBAAmB,SAASt5C,GAOxB,OAJAA,EAAOA,EAAKvQ,QAFQ,yEAEe,SAASq0B,EAAO1e,EAAMm0C,GACrD,OAAO9vD,EAAM+C,OAAO,uCAAwC4Y,EAAMm0C,EAAOz1B,EAC7E,GAGJ,EAEA01B,YAAa,SAAS5nD,EAAMk3C,GACxB,OAAO92C,EAAI+iB,OAAOvkB,SAAUoB,EAAM,CAC9BmD,MAAO,CAAE8sC,cAAeiH,IAEhC,EAEA73C,MAAO,SAASkJ,GACZ,IAEI5N,EAEA40C,EACAsY,EACAC,EACAC,EACAC,EACAC,EACAptD,EAAG67B,EAAG12B,EAAM0kD,EAAQlxC,EAAMuzC,EAV1BmB,EAAgB/wD,EAAEoR,GAAa1G,KAAKzB,EAAI8mB,cAAcrU,KAAK,MAC3Ds1C,GAAc,EAEdC,EAAS,CAAC,EAQVC,EAAmB,CAAC,IAAK,KAAM,KAAM,KAAM,KAAM,KAAM,MAG3D,IAAKxtD,EAAI,EAAGA,EAAIqtD,EAAclvD,OAAQ6B,IAAK,CACvC67B,EAAIwxB,EAAcrtD,GAElB,IAAIytD,GADJvB,EAAW5vD,EAAEu/B,GAAGnjB,QACSC,KAIzB,GAHA7Y,EAAOyF,EAAIzF,KAAK+7B,MACEv/B,EAAEu/B,GAAG3a,QAAQ,SAAS/iB,OAExC,CAIA,IAAI8tD,EAAW5vD,KAAK4vD,SAASpwB,EAAGqwB,GAGhC,KAFA/mD,EAAO8mD,GAAYA,EAAS3zC,MAEfk1C,EAAiB/nC,QAAQ3lB,GAAQ,EACrC+7B,EAAEna,UAEIgzB,IAAOyY,GACdzY,EAAGh5B,YAAYmgB,GAFft2B,EAAIoO,OAAOkoB,QAQnB,IAAI/8B,EAAQ8b,KAAZ,CAMA,IAAI8yC,EAAYvoD,EAAOsoD,EAClBF,EAHL1D,EAASqC,EAASY,OAAStzC,WAAWqiB,EAAEvzB,MAAM4rC,YAAc,MAIxDqZ,EAAO1D,GAAU,CAAC,KAGjBmD,GAAcA,EAAa,KAC5BA,EAAanD,EACboD,EAAYQ,EACZP,EAAa5wD,EAAEoR,GAAa1G,KAAK,eAAiBimD,EAAY,MAAMpxC,OAAO,GAC3EuxC,EAAW/wD,KAAK0wD,YAAY5nD,EAAM8mD,EAAS3jD,OAC3C/C,EAAIoR,aAAay2C,EAAUvxB,GAC3ByxB,EAAazD,EACb0D,EAAO1D,GAAQ6D,GAAaN,GAGhCD,EAAeD,IAAerxB,EAE9BljB,EAAO40C,EAAO1D,GAAQ6D,IAElB7D,EAASyD,IAAe30C,KACxBA,EAAOtc,KAAK0wD,YAAY5nD,EAAM8mD,EAAS3jD,OACvCilD,EAAO1D,GAAQ6D,GAAa/0C,EAC5B+7B,EAAGh5B,YAAY/C,IAGnB+7B,EAAKr4C,KAAKqwD,aAAa7wB,GACvBljB,EAAK+C,YAAYg5B,GAEbyY,EACAH,EAAaM,GAAc,EAE3BA,EAAazD,CAnCjB,CAjBA,CAsDJ,CACJ,EAEA8D,iBAAkB,SAAS1oD,GAkBvB,IAjBA,IAeIwR,EAfAiN,EAAaze,EAAQye,WACrB1jB,EAAI0jB,EAAWvlB,OACfyvD,EAAoB,GAQpBC,EAAuB,SAASn6C,IAPb,SAASA,GAGxB,MAFqB,CAAC,SAAU,aAAc,WAExB4B,QAAO,SAASu3B,GAClC,OAAuC,IAAhCn5B,EAAIqB,OAAO0Q,QAAQonB,EAC9B,IAAG1uC,OAAS,CAChB,EAEQ2vD,CAAiBp6C,IACjBk6C,EAAkBnwD,KAAKiW,EAAIqB,OAEnC,EAGG/U,KAC4B,WAA3BuF,EAAIzF,KAAK4jB,EAAW1jB,MAIE,WAHtByW,EAAOiN,EAAW1jB,IACGF,MAEkC,OAArBmF,EAAQoX,UAA0C,OAArBpX,EAAQoX,UACjD5F,EAAK/G,MAAMgV,MAAM,KACnBwV,QAAQ2zB,GAG5B5oD,EAAQ8oD,oBAAoBrqC,EAAW1jB,KAI3C4tD,EAAkBzvD,OAAS,GAC3B8G,EAAQwW,aAAa,QAASmyC,EAAkB51C,KAAK,KAE7D,EAEAg2C,eAAgB,SAASj0B,GACrB,IAAI7B,EAAQ6B,EAAI7B,MACZN,EAAQt7B,EAAEy9B,GAAKr0B,QAAQ,SACvBu9C,EAAWrrB,EAAM1S,SAAS,YAE1BgT,EAAM/5B,OAAS,IAER8kD,EAAS9kD,SAChB+5B,EAAQ+qB,EAAS/9B,WACjB+9B,EAAS,GAAGx6B,WAAW8I,YAAY0xB,EAAS,MAGhDA,EAAW3mD,EAAEA,EAAEuV,IAAIqmB,GAAO,SAASG,GAC3B,IAAI7tB,EAAQ6tB,EAAK7tB,MACjB,OAAIA,GAAiC,IAAxB+a,SAAS/a,EAAO,IAClBxN,EAAM+C,OAAO,8BAA+ByK,GAGhD,SACX,IAAGwN,KAAK,MAGEoI,GAAG,cACb6iC,EAAW3mD,EAAE,eAAe4c,OAAO+pC,IAGvCA,EAAStnB,UAAU/D,GACvB,EAEAq2B,eAAgB,SAASl0B,GACrB,IACI/5B,EADAk4B,EAAQ6B,EAAI7B,MAEZg2B,EAAc5xD,EAAEuV,IAAIqmB,GAAO,SAASG,GAChC,IAAIvG,EAAQx1B,EAAE+7B,GAAMnT,SAAS,KAAKA,SAAS,UAAU,GAErD,GAAI4M,GAA4B,UAAnBvsB,EAAIzF,KAAKgyB,GAClB,OAAOA,CAEf,IAEJ,GAAIo8B,EAAY/vD,QAAU+5B,EAAM/5B,OAAQ,CACpC,IAAK6B,EAAI,EAAGA,EAAIkuD,EAAY/vD,OAAQ6B,IAChCuF,EAAIgwB,OAAO24B,EAAYluD,IAO3B,IAJA1D,EAAEy9B,GAAKr0B,QAAQ,SACVsB,KAAK,YAAYipC,MAAM,mBAAmBvT,MAC1C11B,KAAK,SAASkS,OAAO6gB,GAErB/5B,EAAI,EAAGA,EAAIk4B,EAAM/5B,OAAQ6B,IAC1BuF,EAAIyvB,UAAUkD,EAAMl4B,GAAI,KAEhC,CACJ,EAEAmuD,iBAAkB,SAASj2B,GACvB,IAAIl4B,EAAG+hB,EAAGmK,EAAWkiC,EAErB,IAAKpuD,EAAI,EAAGA,EAAIk4B,EAAM/5B,OAAQ6B,IAO1B,IANA3D,KAAKsxD,iBAAiBz1B,EAAMl4B,IAMvB+hB,EAAI,EAAGmK,GAFZkiC,EADO9xD,EAAE47B,EAAMl4B,IACGklB,SAAS,MAEE/mB,OAAQ4jB,EAAImK,EAAKnK,IACtCA,EAAImK,EAAM,GACV3mB,EAAImU,YAAYnU,EAAI+iB,OAAOvkB,SAAU,MAAOqqD,EAAWrsC,IAG3Dxc,EAAIgwB,OAAO64B,EAAWrsC,GAGlC,EAEAssC,gBAAiB,SAASC,GACtB,IAAItuD,EAAG+hB,EAAG6M,EAAY2/B,EAAax0B,EAEnC,IAAK/5B,EAAI,EAAGA,EAAIsuD,EAAInwD,OAAQ6B,IAIxB,IAFA4uB,GADAmL,EAAMu0B,EAAItuD,IACO4uB,WAEZ7M,EAAI,EAAGA,EAAI6M,EAAWzwB,OAAQ4jB,KAC/BwsC,EAAc3/B,EAAW7M,IAET3E,WAAa7X,EAAIsqB,UAAUG,WACvC+J,EAAIxI,YAAYg9B,EAIhC,EAEAC,OAAQ,SAAS9gD,GACb,IAEIb,EACA+3C,EAAU6J,EAAYzuD,EAAG+hB,EAHzBysC,EAASlyD,EAAEoR,GAAa1G,KAAK,SAC7B3B,EAAOhJ,KAIX,IAAK2D,EAAI,EAAGA,EAAIwuD,EAAOrwD,OAAQ6B,IAAK,CAIhC,IAFAyuD,EAAa7J,GADb/3C,EAAO2hD,EAAOxuD,GAAG6M,MACY,GAExBkV,EAAI,EAAGA,EAAIlV,EAAK1O,OAAQ4jB,IACrBlV,EAAKkV,GAAGmW,MAAM/5B,OAASswD,EAAWv2B,MAAM/5B,SACxCswD,EAAa5hD,EAAKkV,IAI1B1c,EAAK2oD,eAAeS,GACpBppD,EAAK4oD,eAAerJ,GAEpBv/C,EAAKsoD,iBAAiBa,EAAOxuD,IAE7BqF,EAAK8oD,iBAAiBK,EAAOlN,GAAGthD,GAAGgH,KAAK,UAExC3B,EAAKgpD,gBAAgBG,EAAOlN,GAAGthD,GAAGgH,KAAK,MAC3C,CACJ,EAEAgzB,QAAS,SAAStsB,GAGd,IAFA,IAAIghD,EAASpyD,EAAEoR,GAAa1G,KAAK,cAExBhH,EAAI,EAAGA,EAAI0uD,EAAOvwD,OAAQ6B,IAC/BuF,EAAIyvB,UAAU05B,EAAO1uD,GAAI,KAEjC,EAEA2uD,iBAAkB,SAASjhD,GACvBpR,EAAEoR,GAAa1G,KAAK,KAAKwO,MAAK,WAC1BlZ,EAAED,MAAMqS,IAAI,CACRxG,SAAU,GACV+0B,WAAY,KAGX5gC,KAAKgV,aAAa,UAAahV,KAAKiM,MAAM8sB,SAC3C/4B,KAAKq5B,gBAAgB,QAE7B,GACJ,EAEAmhB,MAAO,SAAStjC,GACZ,IAAiB7F,EAAbrI,EAAOhJ,KACPuyD,EAAUvyD,KAAKe,QA0BnB,OAxBIwxD,EAAQ7/C,MACRwE,EAAOg4C,EAAQluD,GAAGw5C,MAAMv5C,KAAK+H,EAAMkO,EAAMlX,KAAKqvD,kBAC9Cn4C,EAAOlO,EAAK2mD,kBAAkBz4C,KAG9BA,EAAOq7C,EAAQ//C,eAAiBxS,KAAKwwD,kBAAkBt5C,GAAQA,EAC/DA,EAAOg4C,EAAQluD,GAAGw5C,MAAMv5C,KAAK+H,EAAMkO,GACnCA,EAAOlO,EAAK2mD,kBAAkBz4C,GAE9B7F,EAAcnI,EAAI+iB,OAAOvkB,SAAU,MAAO,CAAE2d,UAAWnO,IACvDlO,EAAK20B,QAAQtsB,GAETkhD,EAAQ//C,gBACRxJ,EAAKb,MAAMkJ,GAEfrI,EAAKmpD,OAAO9gD,GAERkhD,EAAQhgD,iBACRvJ,EAAKspD,iBAAiBjhD,GAG1B6F,EAAO7F,EAAYgU,UAAU1e,QAAQ,kCAAmC,OAGrEuQ,CACX,IAGA8zC,EAAsBkE,EAAQ1uD,OAAO,CACrCM,KAAM,SAASC,GACXmuD,EAAQluD,GAAGF,KAAKG,KAAKjB,KAAMe,GAE3Bf,KAAKmvD,aAAe,CAChB,qCAAsC,GACtC,oCAAqC,MACrC,qBAAsB,KAE9B,EAEAX,WAAY,SAASt3C,GACjB,MAAO,0DAA4DvB,KAAKuB,EAC5E,IAGAs7C,EAAatD,EAAQ1uD,OAAO,CAC5Bg6C,MAAO,SAAStjC,GACZ,IAAIQ,EAAYxO,EAAI+iB,OAAOvkB,SAAU,MAAO,CAAE2d,UAAWnO,IAEzD,OADAQ,EAAY1X,KAAKyyD,SAAS/6C,IACT2N,SACrB,EAEAotC,SAAU,SAAS/6C,GACf,OAAOA,CACX,IAGAuzC,EAAkBuH,EAAWhyD,OAAO,CACpCiyD,SAAU,SAAS/6C,GACf,IAAI7T,EAAO7D,KAAK0yD,cAMhB,OAJAzyD,EAAEyX,GAAW/M,KAAK9G,GAAMsV,MAAK,WACzBjQ,EAAIgwB,OAAOl5B,KACf,IAEO0X,CACX,EAEAg7C,YAAa,WACT,GAAI1yD,KAAKe,QAAQ4R,KACb,MAAO,MAEf,EAEA67C,WAAY,WACR,OAAOxuD,KAAKe,QAAQ4R,IACxB,IAGAu4C,EAAkBsH,EAAWhyD,OAAO,CACpCiyD,SAAU,SAAS/6C,GACf,IAAI2P,EAAarnB,KAAK2yD,cAItB,OAHY1yD,EAAEyX,GAAW/M,KAAK,IAAM0c,EAAW1L,KAAK,OAAS,KACvD+R,WAAWrG,EAAW1L,KAAK,MAE1BjE,CACX,EAEAi7C,YAAa,WACT,OAAI3yD,KAAKe,QAAQsR,IACN,CAAC,QAAS,SAGd,EACX,EAEAm8C,WAAY,WACR,OAAOxuD,KAAKe,QAAQsR,GACxB,IAGAugD,EAAgB,WAChB5yD,KAAKoT,KAAO,GACZpT,KAAKuoC,IAAM,SAASn1B,GAChBpT,KAAKoT,MAAQA,CACjB,CACJ,EAEIy/C,EAAgB1wD,EAAM3B,OAAO,CAC7BM,KAAM,SAASgyD,GACX9yD,KAAK8yD,WAAaA,GAAc,CACxB1/C,KAAM,IACN2/C,KAAM,SAEd/yD,KAAKgI,MAAQ,GACbhI,KAAKgzD,gBAAkB,GACvBhzD,KAAKizD,WACT,EAEAC,WAAY,SAAS9/C,GACK,IAAlBA,EAAK2N,WACL3N,EAAOA,EAAK4N,WAGhBhhB,KAAKmzD,cAAc5qB,IAAIn1B,EAC3B,EAEAggD,sBAAuB,SAAShgD,GAC5BpT,KAAKgzD,gBAAgB5xD,KAAKgS,EAC9B,EAEAigD,qBAAsB,WACdrzD,KAAKgzD,gBAAgBlxD,SACrB9B,KAAKkzD,WAAWlzD,KAAKgzD,gBAAgBr3C,KAAK,MAC1C3b,KAAKgzD,gBAAkB,GAE/B,EAEAM,QAAS,WACLtzD,KAAKqzD,uBACLrzD,KAAKizD,WACT,EAEA/7C,KAAM,WACF,IAAI47C,EAAa9yD,KAAK8yD,WAClBttC,EAAS,GACTxd,EAAQhI,KAAKgI,MAEjBhI,KAAKqzD,uBAEL,IAAK,IAAI1vD,EAAI,EAAG4vD,EAAKvrD,EAAMlG,OAAQ0xD,EAAMD,EAAK,EAAG5vD,EAAI4vD,EAAI5vD,IAAK,CAE1D,IADA,IAAIovD,EAAO/qD,EAAMrE,GACR+hB,EAAI,EAAG+tC,EAAKV,EAAKjxD,OAAQ4xD,EAAMD,EAAK,EAAG/tC,EAAI+tC,EAAI/tC,IAAK,CAEzDF,GADWutC,EAAKrtC,GAAGtS,KAEfsS,IAAMguC,IACNluC,GAAUstC,EAAW1/C,KAE7B,CACIzP,IAAM6vD,IACNhuC,GAAUstC,EAAWC,KAE7B,CAEA,OAAOvtC,CACX,EAEAytC,UAAW,WACPjzD,KAAKmzD,cAAgB,IAAIP,EACzB5yD,KAAK+yD,KAAO,GACZ/yD,KAAK+yD,KAAK3xD,KAAKpB,KAAKmzD,eACpBnzD,KAAKgI,MAAM5G,KAAKpB,KAAK+yD,KACzB,IAGAY,EAAgBxxD,EAAM3B,OAAO,CAC7BM,KAAM,SAASukC,GACXrlC,KAAKqlC,SAAWA,CACpB,EACA6B,UAAW,SAASzW,GAChB,GAAKA,EAAL,CAIA,IAAImjC,EAAc5zD,KAAKqlC,SAAS5U,GAE5BgF,EAAQhF,EAAKE,YACZijC,GAAen+B,GAChBz1B,KAAKknC,UAAUzR,GAGnBz1B,KAAKknC,UAAUzW,EAAKI,YATpB,CAUJ,IAGAs6B,EAAqB+D,EAAQ1uD,OAAO,CACpCM,KAAM,SAASC,GACXmuD,EAAQluD,GAAGF,KAAKG,KAAKjB,KAAMe,GAC3Bf,KAAK6zD,SAAU,EACf7zD,KAAK8zD,WAAa,IAAIH,EAAc3zD,KAAK+zD,UAAUxqD,KAAKvJ,MAC5D,EAEAw6C,MAAO,SAAStjC,GACZ,IAAIQ,EAAYxO,EAAI+iB,OAAOvkB,SAAU,MAAO,CAAE2d,UAAWnO,IAEzD,OAAOlX,KAAKyyD,SAAS/6C,EACzB,EAEA+6C,SAAU,SAAS/6C,GAMf,OALA1X,KAAK8yD,WAAa9yD,KAAKg0D,uBACvBh0D,KAAKi0D,UAAY,IAAIpB,EAAc7yD,KAAK8yD,YACxC9yD,KAAK8zD,WAAW5sB,UAAUxvB,EAAUiZ,YACpC3wB,KAAK6zD,SAAU,EAER7zD,KAAKi0D,UAAU/8C,MAC1B,EAEA68C,UAAW,SAAStjC,GAChB,GAAIvnB,EAAIyoB,WAAWlB,GAAO,CACtB,GAAIvnB,EAAImtB,aAAa5F,GACjB,OAEJzwB,KAAKi0D,UAAUf,WAAWziC,EAAKzP,UAAUra,QAAQ,KAAM3G,KAAK8yD,WAAWC,OACvE/yD,KAAK6zD,SAAU,CACnB,KAAO,IAAI3qD,EAAIstB,QAAQ/F,IAASzwB,KAAK6zD,QAEjC,OADa7zD,KAAKykB,QAAQvb,EAAIzF,KAAKgtB,KAAUzwB,KAAKykB,QAAQyL,OAC5ClwB,KAAMywB,GACbvnB,EAAI6tB,KAAKtG,IAChBzwB,KAAKi0D,UAAUf,WAAWlzD,KAAK8yD,WAAWC,KAC9C,CACJ,EAEAvE,WAAY,WACR,IAAIjmC,EAAIvoB,KAAKe,QACb,OAAOwnB,EAAEnW,KAAOmW,EAAEjW,YACtB,EAEA0hD,qBAAsB,WAClB,OAAIh0D,KAAKe,QAAQqR,IACN,CAAEgB,KAAM,IAAK2/C,KAAM,KAEnB,CAAE3/C,KAAM,IAAK2/C,KAAM,QAElC,EAEAtuC,QAAS,CACL20B,GAAIn5C,EAAEstB,KACNoS,GAAI1/B,EAAEstB,KACNgO,MAAOt7B,EAAEstB,KACT2mC,MAAOj0D,EAAEstB,KACT4mC,MAAOl0D,EAAEstB,KACTk5B,GAAI,SAAS2N,EAAS3jC,GAClB,IAEI4jC,EAFY,IAAIlJ,EAAmB,CAAE/4C,KAAK,IAErBqgD,SAAShiC,GAGlC,OAFA2jC,EAAQH,UAAUb,sBAAsBiB,IAEjC,CACX,EAEAnkC,MAAO,SAASkkC,GACZA,EAAQH,UAAUX,SACtB,KAIJlI,EAAgB8D,EAAQ1uD,OAAO,CAC/Bg6C,MAAO,SAAStjC,GACZ,OAAOlX,KAAKe,QAAQ8Q,OAAOqF,EAC/B,EAEAs3C,WAAY,WACR,MAAuC,mBAAzBxuD,KAAKe,QAAc,MACrC,IAGJP,EAAON,EAAU,CACb6J,UAAWA,EACXmlD,QAASA,EACTrE,cAAeA,EACfC,WAAYA,EACZC,oBAAqBA,EACrBC,oBAAqBA,EACrBC,gBAAiBA,EACjBC,gBAAiBA,EACjBC,mBAAoBA,EACpB0H,cAAeA,EACfzH,cAAeA,GAGlB,CAh0CD,CAg0CGlpD,OAAOvB,MAAM0uB,QAEhB,SAAUpvB,GAGV,IAAIU,EAAQuB,OAAOvB,MACfwB,EAAQxB,EAAMwB,MACdjC,EAAWS,EAAM0B,GAAG4G,OACpBuL,EAAatU,EAASsU,WACtBtL,EAAMhJ,EAASiJ,IACf5I,EAAeL,EAASK,aACxB0nC,EAAS/nC,EAAS+nC,OAClBxlC,EAAU9B,EAAM4B,QAAQE,QACxBs8B,EAAU,oCACVv+B,EAASP,EAAEO,OACXgzB,EAAYtqB,EAAIsqB,UAChB8gC,EAAmB,kBAOvB,SAASC,EAAW9jC,EAAM8F,EAAWiC,GAGjC,IAFA,IAAIlC,EAAU7F,EAAOA,EAAK8F,GAAa,KAEhCD,IAAYkC,EAAUlC,IACzBA,EAAUA,EAAQC,GAGtB,OAAOD,CACX,CAEA,IAAIk+B,EAAa,gBACbC,EAAqB,6BACrBC,EAAgBD,EAAqB,IAAMD,EAC3CG,EAAU,SAAS9/C,GAAS,OAAQA,EAAMyD,WAAarY,EAAE4U,EAAM8C,yBAAyBoM,GAAG0wC,EAAqB,EAEhHG,EAAqBzyD,EAAM3B,OAAO,CAClC8W,OAAQ,SAASzC,GACb,IACI0iB,EAAS,IAAI0Q,EACjB1Q,EAAOgR,IAAI1zB,GAAO,GAElB,IAAIgT,EAAQrT,EAAWy1B,OAAOp1B,GAAO,SAAS4b,GAAQ,OAAOxwB,EAAEwwB,GAAM1M,GAAG2wC,EAAgB,IACpFl+C,EAAMhC,EAAWyuB,kBAAkBpuB,GACnCurB,EAAQ7I,EAAO6I,MACfC,EAAM9I,EAAO8I,IACbw0B,EAAaL,EAAWnsC,MAAM,KAC9BysC,EAAY5rD,EAAI+pB,aAAamN,EAAOy0B,GACpCE,EAAU7rD,EAAI+pB,aAAaoN,EAAKw0B,GAVzB70D,KAWNg1D,eAAe50B,EAAO00B,GAAW,GAX3B90D,KAYNg1D,eAAe30B,EAAK00B,GAAS,GAClC90D,EAAE4nB,GAAO1O,MAAK,SAASxV,EAAG8sB,KACtBA,EAAOxwB,EAAEwwB,IACH1M,GAAGywC,GAAc/jC,EAAOA,EAAK9lB,KAAK6pD,IAAar7C,MAAK,SAASuM,EAAGsW,GAClEA,EAAK3W,UAAY,UACrB,GACJ,IACIyvC,IAAc10B,EAAM1O,iBACpBxoB,EAAIoR,aAAa9D,EAAIoyB,eAAe,UAAWxI,GAE/C20B,IAAY10B,EAAIxP,aAChB3nB,EAAImU,YAAY7G,EAAIoyB,eAAe,UAAWvI,GAE9Cy0B,EACAjgD,EAAMyuB,eAAelD,GACdvY,EAAM,KAEbitC,GADAA,EAAY70D,EAAE4nB,EAAM,KACE9D,GAAGywC,GAAcM,EAAYA,EAAUnqD,KAAK6pD,GAAYj0C,SAChEze,QACV+S,EAAMgC,SAASi+C,EAAUhyC,IAAI,GAAI,GAIzCjO,EAAMiC,UAAS,GAEf5N,EAAIoO,OAAO8oB,GACXl3B,EAAIoO,OAAO+oB,EACf,EACA20B,eAAgB,SAAS50B,EAAO3hB,EAAK6tB,GACjC,GAAI7tB,EAAK,CACL,IACIoC,EADAyV,EAAUgW,EAAW,cAAgB,kBAErC2oB,EAAU,SAASxkC,GACf,KAAOA,IAASA,EAAK6F,IACjB7F,EAAOA,EAAKrE,WAEhB,OAAOqE,GAAQxwB,EAAE2X,SAAS6G,EAAKgS,GAAQA,EAAK6F,GAAW,IAC3D,EAEJ,IADA8J,EAAQ60B,EAAQ70B,GACTA,GACHvf,EAAOo0C,EAAQ70B,GACfl3B,EAAIoO,OAAO8oB,GACXA,EAAQvf,CAEhB,CACJ,IAGA2I,EAAgBrnB,EAAM3B,OAAO,CAC7BM,KAAM,SAASmI,GACXjJ,KAAKiJ,OAASA,CAClB,EAEA4W,QAAS,SAASxV,GACd,IAAIrB,EAAOhJ,KACPiJ,EAASD,EAAKC,OACdgM,EAAWhM,EAAOgM,SAClB62B,EAAc72B,EAAS62B,YAAYzhC,GACnC6qD,EAAM10D,EAAOP,EAAEk1D,QAAS9qD,GAI5B,GAFArB,EAAKC,OAAOtH,QAAQ,UAAWuzD,GAE3BA,EAAIE,sBAAyB/qD,GAAKA,EAAE+qD,qBAEpC,OADA/qD,EAAEoW,kBACK,EAGX,IAAKy0C,EAAIE,sBAAwBtpB,IAAgB72B,EAASC,qBAAsB,CAC5E,IAAIL,EAAQ5L,EAAOqM,WACfP,EAAO9L,EAAO8L,KAGlB,GAFA/L,EAAKyjC,kBAAoB,IAAIlsC,EAAasU,EAAOE,GAE7C4/C,EAAQ9/C,GACiB,IAAI+/C,EAAmB3rD,GAC7BqO,OAAOzC,GAC1B5L,EAAOmM,YAAYP,GAOvB,GAJIpS,EAAQwqD,SAAWp4C,EAAMyD,WAhHzC,SAAkBmY,EAAM5b,GACpB,OAAOA,EAAM4B,iBAAmBga,GAAQ5b,EAAM6B,eAAiB+Z,GACrC,IAAtB5b,EAAM8B,aAAqB9B,EAAM+B,WAAa6Z,EAAK8B,WAAWzwB,MACtE,CA6GsD+5C,CAAS9mC,EAAMF,KACrDE,EAAKsQ,UAAY,IAGjBpc,EAAOyM,YAAcxV,EAAS4e,WAAWC,kBAAkBlK,GACpC,IAAI3U,EAASqpB,iBAAiBtgB,GACpCosD,gBAAgBxgD,GAQrC,OALAI,EAASqgD,aAAY,WACjBtsD,EAAKusD,iBACLvsD,EAAK0kC,gBAAkBxtC,EAASmqB,cAAcphB,EAAQD,EAAKyjC,kBAC/D,KAEO,CACX,CAEA,OAAO,CACX,EAEAlrB,MAAO,SAASlX,GACZ,IAAI4K,EAAWjV,KAAKiJ,OAAOgM,SAI3B,OAFAjV,KAAKiJ,OAAOtH,QAAQ,QAAS0I,KAEzB4K,EAASC,uBACTD,EAASiJ,aACF,EAIf,EAEAq3C,eAAgB,WACZ,IAAI9kC,EAAOzwB,KAAKiJ,OAAOqM,WAAWqC,wBAE7BzO,EAAIysB,UAAUlF,KACO,IAAlBA,EAAK1P,WACL0P,EAAOA,EAAKrE,YAGZljB,EAAIisB,cAAc1E,KAGlBA,EAAK+kC,YAActsD,EAAI8rB,SAASvE,EAAK+kC,aACrCtsD,EAAIgwB,OAAOzI,IAGvB,IAGAlH,EAAmBpnB,EAAM3B,OAAO,CAChCM,KAAM,SAASmI,GACXjJ,KAAKiJ,OAASA,CAClB,EACAwsD,UAAW,SAAS/9C,GAChB,IAAIwwB,EAAQh/B,EAAI+iB,OAAOjsB,KAAKiJ,OAAOvB,SAAU,KAY7C,OATK/G,EAAM4B,QAAQE,QAAQgZ,QAAU/D,EAAUiZ,YAC3CjZ,EAAUiZ,WAAW5P,WAAayS,EAAUC,eAE5C/b,EAAYA,EAAUiZ,YAG1BznB,EAAIgvB,SAASxgB,EAAWwwB,EAAO,GAC/Bh/B,EAAI+rB,aAAaiT,EAAMxW,iBACvBxoB,EAAI+rB,aAAaiT,EAAMrX,aAChBqX,CACX,EACAwtB,cAAe,SAASxtB,GACpB,IAAIrzB,EAAQ7U,KAAKiJ,OAAOsL,eAEnB2zB,EAAMrX,aAAe3nB,EAAIyoB,WAAWuW,EAAMxW,iBAC3C7c,EAAMgC,SAASqxB,EAAMxW,gBAAiBwW,EAAMxW,gBAAgB5vB,QAE5D+S,EAAM0uB,cAAc2E,GAGxBrzB,EAAMiC,UAAS,GACf9W,KAAKiJ,OAAOmM,YAAYP,GACxB3L,EAAIoO,OAAO4wB,EACf,EACAytB,cAAe,SAAS9gD,GACpB,IAAI4b,EAAO5b,EAAM6B,aACbwZ,EAAQhnB,EAAI4xB,sBAAsBrK,EAAMvnB,EAAI8mB,eAEhD,GAAIE,GAAShwB,EAASsU,WAAW81B,QAAQz1B,EAAOqb,GAAQ,CAEpD,IAAIrP,EAAO3X,EAAI2X,KAAKqP,GACpB,IAAKrP,GAA0B,KAAlB3X,EAAIzF,KAAKod,GAClB,OAAO,EAGX,IAAI+0C,EAAmB1sD,EAAI0sB,sBAAsB/U,GAAM,GACvD+0C,EAAoBA,GAAoB1sD,EAAI2tB,SAAS++B,GAAqBA,EAAmB/0C,EAC7F,IAAIqnB,EAAQloC,KAAKy1D,UAAUG,GAM3B,OAJA51D,KAAK61D,OAAO3lC,EAAOrP,GAEnB7gB,KAAK01D,cAAcxtB,IAEZ,CACX,CAEA,OAAO,CACX,EACA4tB,gBAAiB,SAASjhD,GAKtB,IAJA,IAAI+L,EAAS/L,EAAM8B,YACf8Z,EAAO5b,EAAM4B,eACbrD,EAAOqd,EAAKzP,UACZgZ,EAAQ,EACLpZ,EAASoZ,GAAS,GAAiC,UAA5B5mB,EAAKwN,EAASoZ,EAAQ,IAChDA,IAGAA,EAAQ,IACRvJ,EAAKoC,WAAWjS,EAASoZ,EAAOA,GAEhCnlB,EAAMgC,SAAS4Z,EAAMrD,KAAKhC,IAAI,EAAGxK,EAASoZ,IAC1CnlB,EAAMiC,UAAS,GAEf9W,KAAKiJ,OAAOmM,YAAYP,GAEhC,EACAkhD,iBAAkB,SAASlhD,GACvB,IAII6c,EAJAjB,EAAO5b,EAAM4B,eACb4hC,EAAKnvC,EAAI4xB,sBAAsBrK,EAAM,CAAC,OACtCP,EAAQhnB,EAAI4xB,sBAAsBrK,EAAM,sBAAsBpI,MAAM,MACpEpf,EAASjJ,KAAKiJ,OAGlB,GAAIC,EAAIyoB,WAAWlB,GAAO,CACtB,GAAI5b,EAAMyD,WAAa,gBAAgB3C,KAAK8a,EAAKzP,WAI7C,OAHAnM,EAAMgC,SAAS4Z,EAAM,GACrB5b,EAAMwuB,OAAO5S,EAAMA,EAAK3uB,QACxBmH,EAAOmM,YAAYP,IACZ,EAEX7U,KAAK81D,gBAAgBjhD,EACzB,CAEA6c,EAAkB6iC,EAAWrkC,EAAOokC,GAAkB,SAASh+B,GAC3D,OAAQptB,EAAI6e,gBAAgBuO,EAChC,IAGIzhB,EAAMyD,WAAazD,EAAM8B,cAAgB9B,EAAM+B,WAAa/B,EAAM8B,YAAc,IAChF9B,EAAM8B,YAAc,EACpB9B,EAAM+B,UAAY,EAClB3N,EAAOmM,YAAYP,IAGvB,IAAImhD,EAAY3d,GAAMn4C,EAASsU,WAAW61B,UAAUx1B,EAAOwjC,GACvD4d,EAAU5d,GAAMp4C,EAAEo4C,GAAI9wC,QACtB2uD,EAAoBF,GAAaC,EAAU,EAM/C,GALIC,IACAhmC,EAAQmoB,EACR3mB,EAAkBxoB,EAAI0nB,KAAKynB,IAG3BnoB,GAASwB,GAAmBxoB,EAAI6a,GAAG2N,EAAiB,UAAYxxB,EAASsU,WAAW61B,UAAUx1B,EAAOqb,GAIrG,MAHwB,KAApBA,EAAMyJ,YACNzJ,EAAM7K,UAAY,WAEf,EAIX,GAAInlB,EAASsU,WAAW61B,UAAUx1B,EAAOqb,IAAUhH,SAASgH,EAAMjkB,MAAM4rC,WAAW,IAAM,EAErF,OADA5uC,EAAO0L,KAAK,YACL,EAIX,GAAKub,GAASwB,GAAmBxxB,EAASsU,WAAW61B,UAAUx1B,EAAOqb,IAAWgmC,EAAmB,CAChG,IAAIN,EAAmB1sD,EAAI0sB,sBAAsB1F,GAAO,GACxD0lC,EAAoBA,GAAoB1sD,EAAI2tB,SAAS++B,KAAsB1sD,EAAI4tB,MAAM8+B,GAAqBA,EAAmB1lC,EAE7H,IAAIgY,EAAQloC,KAAKy1D,UAAUG,GAI3B,OAHA51D,KAAK61D,OAAOnkC,EAAiBxB,GAC7BlwB,KAAK01D,cAAcxtB,IAEZ,CACX,CAGA,GAAI8tB,GAAyB,IAAZC,EAAe,CAC5B,IAAIxgC,EAAQ4iB,EAAG1nB,WACV8E,IACD4iB,EAAGhzB,UAAYnlB,EAASytB,oBACxB8H,EAAQ4iB,EAAG1nB,YAGf,IAAIoc,EAAY,IAAI7sC,EAASo3C,cAAcpuC,EAAIzF,KAAK40C,EAAGjsB,YAAa,KAYpE,OAXAvX,EAAM6uB,mBAAmB2U,GACzBtL,EAAUppB,OAAO9O,GAEb3L,EAAIisB,cAAcM,GAClB5gB,EAAMyuB,eAAe7N,GAErB5gB,EAAMgC,SAAS4e,EAAO,GAG1BxsB,EAAOmM,YAAYP,IAEZ,CACX,CAEA,IAAIshD,EAAiB1lC,EAAK8B,WAAW1d,EAAM8B,YAAc,GACrDy9B,EAAYv/B,EACZk/B,EAASoiB,GAAkBjtD,EAAI4xB,sBAAsBq7B,EAAgB,CAAC,MACtEC,EAAe7B,EAAW4B,GAAkB1lC,EAAM6jC,GAAkB,SAASh+B,GAC7E,OAAQptB,EAAIyoB,WAAW2E,KAAcptB,EAAI6rB,MAAMuB,IAAYA,EAAQx0B,OAAS,CAChF,IAUA,IATIiyC,IAAkC,IAAtBl/B,EAAM8B,aAAqBw/C,IAAmBjtD,EAAI6a,GAAGqyC,EAAc,QAC/EriB,EAASA,GAAUqiB,GACnBhiB,EAAYnrC,EAAOsL,eACTsC,SAASk9B,EAAQA,EAAOxhB,WAAWzwB,QAC7CsyC,EAAUt9B,UAAS,KAGvBi9B,EAASA,GAAU7qC,EAAI4xB,sBAAsBq7B,GAAkB/hB,EAAU39B,eAAgB,CAAC,QAC9DvW,EAASsU,WAAW81B,QAAQ8J,EAAWL,GAClD,CACb,IAAI1yC,EAAU,IAAInB,EAASuyC,cAAc,CAAE59B,MAAOu/B,EAAWr/B,KAAM9L,EAAO8L,KAAMW,aAAczM,EAAOyM,aACrGzM,EAAO2M,YAAYvU,GACnB4H,EAAO+M,kBACX,CACA,OAAO,CACX,EACAqgD,iBAAkB,SAASxhD,GACvB,IAIIyhD,EAJA1f,EAAW/hC,EAAM8C,wBACjB4jB,EAAQryB,EAAIG,QAAQutC,EAAU,SAC9B4K,EAAwBthD,EAASytB,oBACjC1kB,EAASjJ,KAAKiJ,OAGlB,GAAI0rD,EAAQ9/C,GAIR,OAHyB,IAAI+/C,EAAmB3rD,GAC7BqO,OAAOzC,GAC1B5L,EAAOmM,YAAYP,IACZ,EAGX,IAAI0iB,EAAS,IAAI0Q,EACjB1Q,EAAOgR,IAAI1zB,GAAO,GAEdA,EAAM8C,0BAA4B1O,EAAO8L,MACzC/U,KAAKu2D,sBAAsBh/B,EAAQ1iB,GAGnC5L,EAAOyM,YACP1V,KAAK62C,kBAAkBtf,GAG3Bv3B,KAAKw2D,6BAA6Bj/B,EAAQ1iB,GAE1CA,EAAM0uB,cAAchM,EAAO6I,OAC3BvrB,EAAM2uB,aAAajM,EAAO8I,KAE1B,IAAID,EAAQvrB,EAAM4B,eACd4pB,EAAMxrB,EAAM6B,aA0ChB,OAxCA7B,EAAM8uB,iBAEkC,OAApCtD,EAAIpb,QAAQwxC,qBAAgCvtD,EAAIysB,UAAU0K,KAC1DxrB,EAAMyN,WAAW+d,GACjBxrB,EAAM8uB,kBAGNpI,GAA6B,KAApBt7B,EAAEs7B,GAAOnoB,SAClByB,EAAMyN,WAAWiZ,GACjB1mB,EAAM8uB,kBAGViT,EAAW/hC,EAAM8C,wBAEU,MAAvBzO,EAAIzF,KAAKmzC,IAA4C,KAAvBA,EAASvxB,YACvCuxB,EAASvxB,UAAYm8B,EACrB3sC,EAAMgC,SAAS+/B,EAAU,IAG7B52C,KAAK02D,MAAMt2B,EAAOC,GAElBn3B,EAAImU,YAAYpU,EAAOvB,SAASkhC,eAAe,UAAWrR,EAAO6I,OACjE7I,EAAOjgB,OAAOzC,GAEdurB,EAAQvrB,EAAM4B,eACS,MAAnBvN,EAAIzF,KAAK28B,KACTA,EAAQA,EAAM7N,WAAWnF,KAAKhC,IAAI,EAAGvW,EAAM8B,YAAc,IACzD9B,EAAMgC,SAASupB,EAAOl3B,EAAIopB,cAAc8N,KAG5CvrB,EAAMiC,UAAS,GAEf7N,EAAOmM,YAAYP,GAEnByhD,EAAsBl2B,EAAMrgB,eAAiBqgB,EAAMhU,WAE/CljB,EAAIyoB,WAAWyO,KAAWl3B,EAAIysB,UAAU2gC,IACxCt2D,KAAK81D,gBAAgBjhD,IAGlB,CACX,EACAgiC,kBAAmB,SAAStf,GACxB,IAAIkS,EAAkBvpC,EAAS4e,WAAW2qB,gBACtCktB,EAAiBltB,EAAgBlS,EAAO6I,OACxCw2B,EAAentB,EAAgBlS,EAAO6I,OACtCu2B,GACAztD,EAAIoR,aAAaid,EAAO6I,MAAOu2B,GAE/BC,GACA1tD,EAAImU,YAAYka,EAAO8I,IAAKu2B,GAE5BD,GACAztD,EAAIoO,OAAOq/C,GAEXC,GAAgBA,EAAaxqC,YAC7BljB,EAAIoO,OAAOs/C,EAEnB,EACAL,sBAAuB,SAASh/B,EAAQ1iB,GACpC,IAAIgU,EAAWhU,EAAM8C,wBAAwBkR,SACzCugB,EAAcvgB,EAAS,GACvBwgB,EAAYxgB,EAASA,EAAS/mB,OAAS,GAE3C9B,KAAK62D,YAAYt/B,EAAQ1iB,EAAOu0B,EAAaC,EACjD,EACAmtB,6BAA8B,SAASj/B,EAAQ1iB,GAC3C,IAAIurB,EAAQ7I,EAAO6I,MACfgJ,EAAcnpC,EAAEmgC,GAAO/2B,QAAQ,KAAKyZ,IAAI,GACxCud,EAAM9I,EAAO8I,IACbgJ,EAAYppC,EAAEogC,GAAKh3B,QAAQ,KAAKyZ,IAAI,GAExC9iB,KAAK62D,YAAYt/B,EAAQ1iB,EAAOu0B,EAAaC,EACjD,EACAwtB,YAAa,SAASt/B,EAAQ1iB,EAAOu0B,EAAaC,GAC9C,IAAIjJ,EAAQ7I,EAAO6I,MACfC,EAAM9I,EAAO8I,IAEb+I,GAAe50B,EAAW61B,UAAUx1B,EAAOu0B,IAC3ClgC,EAAIoR,aAAa8lB,EAAOgJ,GAGxBC,GAAa70B,EAAW81B,QAAQz1B,EAAOw0B,IACvCngC,EAAImU,YAAYgjB,EAAKgJ,EAE7B,EACAytB,MAAO,SAASrmC,GACZ,KAAOA,GAA0B,QAAlBvnB,EAAIzF,KAAKgtB,IAAmBA,EAAKrE,YAA2C,QAA7BljB,EAAIzF,KAAKgtB,EAAKrE,aACxEqE,EAAOA,EAAKrE,WAGhB,OAAOqE,CACX,EACAimC,MAAO,SAASt2B,EAAOC,IACnBD,EAAQpgC,KAAK82D,MAAM12B,MACnBC,EAAMrgC,KAAK82D,MAAMz2B,KAEGn3B,EAAI6a,GAAGsc,EAAK,MAC5BrgC,KAAK61D,OAAOz1B,EAAOC,EAE3B,EACAw1B,OAAQ,SAASkB,EAAMh9C,GAGnB,IAFA7Q,EAAIkyB,oBAAoB27B,GAEjBA,GAAQh9C,EAAI4W,YACM,GAAjBomC,EAAKh2C,UACLg2C,EAAO7tD,EAAIoT,KAAKy6C,GAAQA,EAAKluC,SAASkuC,EAAKluC,SAAS/mB,OAAS,GAAKi1D,IAG9DA,EAAK13C,YAAYtF,EAAI4W,YAElBomC,EAAKh2C,WAAayS,EAAUG,UACnC3zB,KAAKg3D,mBAAmBD,EAAMh9C,EAAI4W,YAElComC,EAAK3qC,WAAW/M,YAAYtF,EAAI4W,YAIxCznB,EAAIoO,OAAOyC,EACf,EAEAi9C,mBAAoB,SAAS1uB,EAAU2uB,GAC/B3uB,GAAYA,EAASvnB,WAAayS,EAAUG,YACxC2U,EAASzX,aAAe7wB,KAAKk3D,SAAS5uB,EAASzX,aAC/C3nB,EAAImU,YAAY45C,EAAc3uB,EAASzX,aAGvC3nB,EAAImU,YAAY45C,EAAc3uB,GAG1C,EAEA4uB,SAAU,SAAStuD,GACf,OAAO3I,EAAE2I,GAASmb,GAAG,IACzB,EAEAlE,QAAS,SAASxV,GACd,IAAIs0C,EAAQlS,EACRxjC,EAASjJ,KAAKiJ,OACd4L,EAAQ5L,EAAOqM,WACf6K,EAAU9V,EAAE8V,QACZzd,EAAO/B,EAAM+B,KACbqpC,EAAY5rB,IAAYzd,EAAK0d,UAC7B4rB,EAAM7rB,GAAWzd,EAAK2d,OAEtBpX,EAAOyM,YAAczM,EAAOyM,WAAWmK,QAAQxV,EAAGwK,MAIjDk3B,IAAaC,GAASn3B,EAAMyD,UAEtByzB,EACP4S,EAAS,mBACF3S,IACP2S,EAAS,iBAJTA,EAAS,mBAORA,IAILlS,EAAoB,IAAIlsC,EAAasU,EAAO5L,EAAO8L,MAE/C/U,KAAK2+C,GAAQ9pC,KACbxK,EAAEoW,iBAEFvgB,EAASmqB,cAAcphB,EAAQwjC,KAEvC,EACA4oB,gBAAiB,SAASxgD,GACtB7U,KAAKq2D,iBAAiBxhD,EAC1B,EACA0M,MAAOthB,EAAEstB,OAGT9D,EAAgBtnB,EAAM3B,OAAO,CAC7BM,KAAM,SAASmI,GACXjJ,KAAKiJ,OAASA,EACdjJ,KAAKm3D,2BAA4B,CACrC,EAEAC,kBAAmB,WACfp3D,KAAKysC,kBAAoBzsC,KAAK0tC,gBAAkBxtC,EAASmqB,cAAcrqB,KAAKiJ,OAAQjJ,KAAKysC,kBAC7F,EAEAwZ,QAAS,WACL,QAAIjmD,KAAKysC,mBACEzsC,KAAKysC,kBAAkBv1B,MAAQlX,KAAKiJ,OAAO8L,KAAKsQ,SAI/D,EAEAxF,QAAS,SAASxV,GACd,IAAIrB,EAAOhJ,KACPiJ,EAASD,EAAKC,OACdgM,EAAWhM,EAAOgM,SAEtB,OAAIA,EAASoiD,cAAchtD,IAEnB4K,EAASC,sBACTD,EAASiJ,WAAU,GAGvBlV,EAAKyjC,kBAAoB,IAAIlsC,EAAa0I,EAAOqM,WAAYrM,EAAO8L,OAC7D,KAGPE,EAASqiD,SAASjtD,KAClBrB,EAAKmuD,2BAA4B,EAE7BnuD,EAAKi9C,YACLj9C,EAAKmuD,2BAA4B,EACjCnuD,EAAKouD,sBAGF,EAIf,EAEA71C,MAAO,WACH,IAAIvY,EAAOhJ,KAEX,SAAIgJ,EAAKmuD,4BAA6BnuD,EAAKi9C,aACvCj9C,EAAKmuD,2BAA4B,EACjCnuD,EAAKouD,qBACE,EAIf,IAGA1tC,EAAmBvnB,EAAM3B,OAAO,CAChCM,KAAM,SAASmI,GACXjJ,KAAKiJ,OAASA,CAClB,EAEA4W,QAAS,SAASxV,IACT5H,EAAQwqD,QAAU5iD,EAAE+qD,uBACnB/qD,EAAE4X,SAAwB,IAAb5X,EAAE8V,SAAkB9V,EAAE6X,QAAW7X,EAAE8X,WAGlDniB,KAAKiJ,OAAOlI,QAAQ2U,YACpB1V,KAAKu3D,0BAETv3D,KAAKw3D,oBACT,EAEAA,kBAAmB,WACf,IAAIvuD,EAASjJ,KAAKiJ,OACd4L,EAAQ5L,EAAOqM,WACnBT,EAAM6uB,mBAAmBz6B,EAAO8L,MAEhC2K,YAAW,WACPzW,EAAOmM,YAAYP,EACvB,GACJ,EAEA0iD,wBAAyB,WAQrB,IAPA,IACIxiD,EADS/U,KAAKiJ,OACA8L,KACdsqB,EAAYn/B,EAAS4e,WAAWugB,UAChC3J,EAAgBxsB,EAAIwsB,cACpBnV,EAAQxL,EAAK4b,WACbnR,EAAOzK,EAAKihB,UAETN,EAAcnV,IACjBA,EAAQA,EAAMsQ,YAGlB,KAAO6E,EAAclW,IACjBA,EAAOA,EAAKkS,gBAGZnR,GAAS8e,EAAU9e,IACnBtgB,EAAE8+B,GAASO,UAAUvqB,GAGrByK,GAAQ6f,EAAU7f,IAClBvf,EAAE8+B,GAAS9hB,SAASlI,EAE5B,EAEAwM,MAAOthB,EAAEstB,OAGTjE,EAAWnnB,EAAM3B,OAAO,CACxBM,KAAM,SAAS8c,GACX5d,KAAK4d,SAAWA,EAChB5d,KAAK6rC,kBAAmB,CAC5B,EAEA4rB,YAAa,SAASt3C,GAClB,OAAQA,GAAW,IAAMA,GAAW,IAAQA,GAAW,IAAMA,GAAW,KAChEA,GAAW,KAAOA,GAAW,KAASA,GAAW,KAAOA,GAAW,KACzD,KAAXA,CACX,EAEAc,iBAAkB,SAAS3N,EAAOjJ,GAC9B,IACIxD,EACAqa,EAFAzL,EAAMiiD,OAAOC,aAAattD,EAAE8V,SAG5By3C,EAAW53D,KAAK63D,qBAAqBxtD,EAAGytD,UAAUC,UAEtD,IAAKlxD,KAAYyM,EAGb,KAFA4N,EAAcjhB,EAAEO,OAAO,CAAEqpB,MAAM,EAAOE,KAAK,EAAOD,OAAO,GAASxW,EAAMzM,GAAU9F,UAEjE0U,KAAOA,GAAOyL,EAAYzL,KAAOpL,EAAE8V,UAChDe,EAAY2I,MAAQ+tC,GACpB12C,EAAY6I,KAAO1f,EAAE6X,QACrBhB,EAAY4I,OAASzf,EAAE8X,SACvB,OAAOtb,CAGnB,EAEAgxD,qBAAsB,SAASxtD,EAAG0tD,GAE9B,OADUA,EAASC,cAAc5uC,QAAQ,QAAU,EACtC/e,EAAE4tD,QAAU5tD,EAAE4X,OAC/B,EAEAqG,kBAAmB,SAAShV,EAAOjJ,GAC/B,IACIxD,EACA0hB,EAFA9S,EAAMiiD,OAAOC,aAAattD,EAAE8V,SAI5B+3C,EAAQ,GACRC,EAAW,SAASC,GAAW,OAAOA,GAAW3iD,GAAO2iD,GAAW/tD,EAAE8V,SAAWi4C,GAAW/tD,EAAEuqB,QAAU,EAE3G,IAAK/tB,KAAYyM,EACbiV,EAAItoB,EAAEO,OAAO,CAAEqpB,MAAM,EAAOE,KAAK,EAAOD,OAAO,GAASxW,EAAMzM,GAAU9F,UAE3DilB,MAAMC,QAAQsC,EAAE9S,KAAOxV,EAAEu1B,KAAKjN,EAAE9S,IAAK0iD,GAAUr2D,OAAS,EAAIq2D,EAAS5vC,EAAE9S,OAEhF8S,EAAEsB,MAAQxf,EAAE4X,SACZsG,EAAEwB,KAAO1f,EAAE6X,QACXqG,EAAEuB,OAASzf,EAAE8X,UACb+1C,EAAM92D,KAAKkS,EAAMzM,IAIzB,OAAOqxD,CACX,EAEApsB,YAAa,SAASzhC,GAClB,IAAI8V,EAAU9V,EAAE8V,QAChB,OAAQngB,KAAKy3D,YAAYt3C,KAAa9V,EAAE4X,UAAY5X,EAAE6X,QACpC,IAAX/B,GAA4B,IAAXA,GAA4B,GAAXA,GACtB,IAAXA,IAAkB9V,EAAE8X,WAAa9X,EAAE4X,UAAY5X,EAAE6X,MAC7D,EAEAm1C,cAAe,SAAShtD,GACpB,IAAI8V,EAAU9V,EAAE8V,QAChB,OAAmB,IAAXA,IAAkB9V,EAAE8X,WAAa9X,EAAE6X,QACxB,IAAX/B,IAAkB9V,EAAE4X,UAAY5X,EAAE6X,QACvB,IAAX/B,IAAkB9V,EAAE4X,UAAY5X,EAAE8X,QAC9C,EAEAm1C,SAAU,SAASjtD,GACf,OAAoB,IAAbA,EAAE8V,SAAiB9V,EAAE4X,UAAY5X,EAAE6X,SAAW7X,EAAE8X,QAC3D,EAEAmzC,YAAa,SAASjwB,GAClBrlC,KAAKq4D,YAAchzB,EACnBrlC,KAAK6rC,kBAAmB,CAC5B,EAEAysB,WAAY,WACJt4D,KAAK6rC,kBAAoB7rC,KAAKq4D,aAC9Br4D,KAAKq4D,cAETr4D,KAAK6rC,kBAAmB,CAC5B,EAEA3tB,UAAW,SAASq6C,GAChB,IAAIvvD,EAAOhJ,KACXgJ,EAAKyK,eACD8kD,EACAvvD,EAAKsvD,aAELtvD,EAAKwvD,QAAUt2D,OAAOwd,WAAW1W,EAAKsvD,WAAW/uD,KAAKP,GAAO,IAErE,EAEAkM,mBAAoB,WAChB,OAAOlV,KAAK6rC,gBAChB,EAEAp4B,aAAc,WACVvR,OAAOuR,aAAazT,KAAKw4D,QAC7B,EAEAztD,OAAQ,SAASV,EAAGouD,GAChB,IAAI90D,EAAGia,EAAW5d,KAAK4d,SAEvB,IAAKja,EAAI,EAAGA,EAAIia,EAAS9b,SACjB8b,EAASja,GAAG80D,GAAMpuD,GADO1G,KAKrC,EAEAkc,QAAS,SAASxV,GACdrK,KAAK+K,OAAOV,EAAG,UACnB,EAEAkX,MAAO,SAASlX,GACZrK,KAAK+K,OAAOV,EAAG,QACnB,IAGJ7J,EAAON,EAAU,CACbspB,cAAeA,EACfC,cAAeA,EACfF,iBAAkBA,EAClBG,iBAAkBA,EAClBJ,SAAUA,GAGb,CA9yBD,CA8yBGpnB,OAAOvB,MAAM0uB,QAEhB,SAAUpvB,GAGN,IACIC,EADQgC,OAAOvB,MACE0B,GAAG4G,OACpB9I,EAAUD,EAASC,QAEnBE,EADcH,EAASoD,YACIjD,aAC3BC,EAAOJ,EAASI,KAChBE,EAASP,EAAEO,OAEfk4D,EAAmBv4D,EAAQK,OAAO,CAClCM,KAAM,SAASC,GACXf,KAAK6V,OAAQ,EACb1V,EAAQa,GAAGF,KAAKG,KAAKjB,KAAMe,EAC/B,EAEA4T,KAAM,WACF,IAAI3L,EAAOhJ,KACP6U,EAAQ7L,EAAKgkC,WAAU,GACvB/jC,EAASD,EAAKC,OAElBA,EAAOiL,oBAEPjL,EAAOilB,YAAYK,MAAK,WACpBvlB,EAAKikC,aAAap4B,GAClB5L,EAAOka,4BACPla,EAAOma,yBACPna,EAAOoa,4BACX,GACJ,IAGJ7iB,EAAON,EAAU,CACbw4D,iBAAkBA,IAGtBr4D,EAAa,MAAO,IAAIC,EAAK,CAAEe,QAASq3D,IAEvC,CAvCD,CAuCGx2D,OAAOvB,MAAM0uB,QAEhB,SAAUpvB,GAGN,IAAIU,EAAQuB,OAAOvB,MACfT,EAAWS,EAAM0B,GAAG4G,OACpB9I,EAAUD,EAASC,QAEnBE,EADcH,EAASoD,YACIjD,aAC3BC,EAAOJ,EAASI,KAChBE,EAASP,EAAEO,OAEfm4D,EAAex4D,EAAQK,OAAO,CAC9BM,KAAM,SAASC,GACXZ,EAAQa,GAAGF,KAAKG,KAAKjB,KAAMe,GAE3Bf,KAAKiW,iBAAkB,CAC3B,EAEAtB,KAAM,WACF,IAAI1L,EAASjJ,KAAKiJ,OAEdtI,EAAM4B,QAAQE,QAAQ8b,KACtBtV,EAAOvB,SAASkO,YAAY,SAAS,EAAO,MACrC3M,EAAO/G,OAAO2O,OACrB5H,EAAO/G,OAAO2O,OAEtB,IAGJrQ,EAAON,EAAU,CACby4D,aAAcA,IAGlBt4D,EAAa,QAAS,IAAIC,EAAK,CAAEe,QAASs3D,IAEzC,CAnCD,CAmCGz2D,OAAOvB,MAAM0uB,QAEhB,SAAUpvB,GAEV,IACI8G,EADQ7E,OAAOvB,MACA0B,GAAG4G,OAClB3I,EAAOyG,EAAOzG,KACdH,EAAU4G,EAAO5G,QACjBmD,EAAcyD,EAAOzD,YACrB4F,EAAMnC,EAAOoC,IACbqL,EAAazN,EAAOyN,WACpBnU,EAAeiD,EAAYjD,aAE3Bu4D,EAAoBz4D,EAAQK,OAAO,CACnCM,KAAM,SAASC,GACXZ,EAAQa,GAAGF,KAAKG,KAAKjB,KAAMe,EAC/B,EAEA4T,KAAM,WACF,IAAIE,EAAQ7U,KAAKgtC,WAAU,GAC3BhtC,KAAK8gC,aAAe,GACpB9gC,KAAK64D,YAAc,GACnB74D,KAAK84D,cAAcjkD,GACnB7U,KAAKiJ,OAAO63B,aAAe9gC,KAAK8gC,aAChC9gC,KAAKiJ,OAAO4vD,YAAc74D,KAAK64D,YAC/B74D,KAAKitC,aAAap4B,EACtB,EAEAikD,cAAe,SAASjkD,GACpB,IACI4b,EADAsoC,EAAavkD,EAAWqT,MAAMhT,GASlC,IALI4b,EADsB,IAAtBsoC,EAAWj3D,OACJi3D,EAAW,GAAG3sC,WAEdvX,EAAM4B,eAGVga,IAASvnB,EAAI6a,GAAG0M,EAAM,SAA8C,WAAnCA,EAAKzb,aAAa,cAClD9L,EAAIstB,QAAQ/F,IACZzwB,KAAKg5D,eAAevoC,EAAM,eAEtBA,EADAvnB,EAAI6a,GAAG0M,EAAM,MACNA,EAAKrE,WAEL,OAGXpsB,KAAKg5D,eAAevoC,EAAM,gBAC1BA,EAAOA,EAAKrE,WAGxB,EAEA4sC,eAAgB,SAASvoC,EAAMwoC,GAC3B,IAQIC,EAAYC,EAAUC,EAAc1pB,EAAgB/rC,EARpD01D,EAAS5oC,EAAKxkB,MACdob,EAAaoJ,EAAKpJ,WAClBiyC,EAAa,CACbz1D,KAAM,CAAE4sB,EAAKxL,SACb7K,KAAM,CACFnO,MAAO,CAAC,IAKhB,IAAKtI,EAAI,EAAG01D,GAAU11D,EAAI01D,EAAOv3D,OAAQ6B,IAErCu1D,EAAaG,EADbF,EAAWE,EAAO11D,IAElB21D,EAAWl/C,KAAKnO,MAAMktD,GAAYD,EAGtC,IAAKv1D,EAAI,EAAG0jB,GAAc1jB,EAAI0jB,EAAWvlB,OAAQ6B,IAC7Cy1D,EAAe/xC,EAAW1jB,GAAGqc,SAC7B0vB,EAAiBroB,EAAW1jB,GAAGqd,UACV,UAAjBo4C,IAEwB,UAAjBA,EACPE,EAAWl/C,KAAK8B,UAAYwzB,EAE5B4pB,EAAWl/C,KAAKg/C,GAAgB1pB,GAIxC1vC,KAAKi5D,GAAa73D,KAAKk4D,EAC3B,IAGAC,EAAqBp5D,EAAQK,OAAO,CACpCM,KAAM,SAASC,GACXZ,EAAQa,GAAGF,KAAKG,KAAKjB,KAAMe,EAC/B,EAEA4T,KAAM,WACF,IAKIkT,EALAhT,EAAQ7U,KAAKgtC,WAAU,GACvBsF,EAAU99B,EAAW41B,WAAWv1B,GAChC5L,EAASjJ,KAAKiJ,OACd63B,EAAe73B,EAAO63B,aACtB+3B,EAAc5vD,EAAO4vD,aAGnB/3B,GAAwC,IAAxBA,EAAah/B,QAAmB+2D,GAAsC,IAAvBA,EAAY/2D,UAI1D,IAAnBwwC,EAAQxwC,SACR9B,KAAKu3B,OAAO6Q,YAAYvzB,GACxB7U,KAAKu3B,OAAO2Q,MAAQ,MAGxBloC,KAAKw5D,6BAA6B3kD,GAClCgT,EAAQrT,EAAWqT,MAAMhT,GACzB7U,KAAKy5D,mBAAmB5xC,GACxB3e,EAAIsnB,UAAU3b,EAAM8C,yBAEG,IAAnB26B,EAAQxwC,QACR+S,EAAM0uB,cAAc+O,EAAQ,IAC5Bz9B,EAAM2uB,aAAa8O,EAAQ,MAE3Bz9B,EAAMyuB,eAAezb,EAAM,IAC3BhT,EAAM4uB,YAAY5b,EAAM,MAG5BA,EAAQrT,EAAWqT,MAAMhT,KAEZgkD,GAAeA,EAAY/2D,QACpC9B,KAAK05D,iBAAiB7xC,EAAOgxC,GAG7BhxC,GAASiZ,GAAgBA,EAAah/B,QACtC9B,KAAK25D,kBAAkB9xC,EAAOiZ,GAGlC9gC,KAAKitC,aAAap4B,GACtB,EAEA2kD,6BAA8B,SAAS3kD,GACnC,IAGI+kD,EAAej2D,EAInB,IAFAi2D,EAAgBplD,EAAWy1B,OAAOp1B,GALd,SAAS4b,GACzB,OAAOvnB,EAAI2tB,SAASpG,KAAUA,EAAKE,aAAeznB,EAAI+sB,SAASxF,EACnE,MAKqBmpC,EAAc93D,OAAS,EACxC,IAAK6B,EAAI,EAAGA,EAAIi2D,EAAc93D,OAAQ6B,IAClCi2D,EAAcj2D,GAAGyoB,WAAW8I,YAAY0kC,EAAcj2D,GAGlE,EAEA81D,mBAAoB,SAAS5xC,GACzB,IAAIlkB,EAAG8sB,EAAM9S,EAAQkL,EAAUnD,EAAG+P,EAAO/C,EAEzC,IAAK/uB,EAAI,EAAGA,EAAIkkB,EAAM/lB,OAAQ6B,IAI1B,GAFAga,GADA8S,EAAO5I,EAAMlkB,IACCyoB,YAEVpsB,KAAKypC,gBAAgBhZ,GAIzB,KAAO9S,GAAUzU,EAAI2tB,SAASlZ,IAAS,CAGnC,IAFAkL,EAAWlL,EAAO4U,WAEb7M,EAAI,EAAGA,EAAImD,EAAS/mB,OAAQ4jB,IAC7B+P,EAAQ5M,EAASnD,GAEZxc,EAAI+sB,SAASR,IAAUA,IAAUhF,KAClCiC,EAAU/U,EAAOgV,WAAU,IACnBtN,UAAY,GACpBnc,EAAIwU,KAAK+X,EAAO/C,IAIxBxpB,EAAIgwB,OAAOvb,GACXA,EAAS8S,EAAKrE,UAClB,CAER,EAEAstC,iBAAkB,SAAS7xC,EAAOgxC,GAC9B,IAGIl1D,EAAGksB,EAAKY,EAAM/lB,EAASmvD,EAAaC,EACpCC,EAAeC,EAAW53B,EAAUvhB,EAAMo5C,EAAaC,EAAazkC,EAAO/P,EAAGy0C,EAJ9E9iB,EAAYwhB,EAAY,GAAGh1D,KAAK,GAChCuW,EAAOy+C,EAAY,GAAGz+C,KACtB1S,EAAW1H,KAAKiJ,OAAOvB,SAI3B,IAAK/D,EAAI,EAAGksB,EAAMhI,EAAM/lB,OAAQ6B,EAAIksB,EAAKlsB,IAGrC,GAFA8sB,EAAO5I,EAAMlkB,IAETuF,EAAI2sB,aAAapF,KAASzwB,KAAKypC,gBAAgBhZ,GAMnD,GAA4B,UAF5BopC,EAAc3wD,EAAI8pB,kBAAkBvC,IAEpBxL,SAAsB40C,EAAY50C,UAAYoyB,EAAW,CACrE,GAA4B,OAAxBwiB,EAAY50C,SAA4C,OAAxB40C,EAAY50C,SAA4C,OAAxB40C,EAAY50C,QAAkB,CAM9F,IALA80C,EAAgB,GAChBC,EAAY,GACZ53B,EAAW3R,EAAKiB,gBAChB7Q,EAAO4P,EAAKI,YAELuR,GACEl5B,EAAI+sB,SAASmM,IACd23B,EAAc34D,KAAKghC,GAGvBA,EAAWA,EAAS1Q,gBAGxB,GAAIqoC,EAAcj4D,OAKd,KAJAm4D,EAAcJ,EAAYlnC,WAAU,IACxBtN,UAAY,GACxBnc,EAAIoR,aAAa2/C,EAAaF,EAAc,IAEvCr0C,EAAI,EAAGA,EAAIq0C,EAAcj4D,OAAQ4jB,IAClC+P,EAAQskC,EAAcr0C,GACtBxc,EAAIgvB,SAAS+hC,EAAaxkC,EAAO,GAIzC,KAAO5U,GACE3X,EAAI+sB,SAASpV,IACdm5C,EAAU54D,KAAKyf,GAGnBA,EAAOA,EAAKgQ,YAGhB,GAAImpC,EAAUl4D,OAKV,KAJAo4D,EAAcL,EAAYlnC,WAAU,IACxBtN,UAAY,GACxBnc,EAAIoR,aAAa4/C,EAAaF,EAAU,IAEnCt0C,EAAI,EAAGA,EAAIs0C,EAAUl4D,OAAQ4jB,IAC9B+P,EAAQukC,EAAUt0C,GAClBw0C,EAAY76C,YAAYoW,GAIhCvsB,EAAIgwB,OAAO2gC,EACf,CAEAnvD,EAAUxB,EAAI+iB,OAAOvkB,EAAU2vC,EAAWj9B,GAC1ClR,EAAIwU,KAAK+S,EAAM/lB,EACnB,MAAWmvD,EAAY50C,UAAYoyB,GAC/BnuC,EAAIkR,KAAKy/C,EAAaz/C,GAI9B,GAAIy/C,GAAsC,IAAvBhB,EAAY/2D,QAAwC,OAAxB+3D,EAAY50C,SAAkC,OAAdoyB,EAAoB,CAG/F,IAFA8iB,EAAY,GAELjxD,EAAI6a,GAAGrZ,EAAS,OACnByvD,EAAU/4D,KAAKsJ,GACfA,EAAUxB,EAAI0nB,KAAKlmB,GAOvB,IAJAovD,EAAe5wD,EAAI+iB,OAAOvkB,EAAUmxD,EAAY,GAAGh1D,KAAK,GAAIg1D,EAAY,GAAGz+C,MAC3ElR,EAAIoR,aAAaw/C,EAAcK,EAAUA,EAAUr4D,OAAS,IAC5Dg4D,EAAaz6C,YAAY86C,EAAU,IAE9Bx2D,EAAI,EAAGksB,EAAMsqC,EAAUr4D,OAAQ6B,EAAIksB,EAAKlsB,IACzCuF,EAAIoR,aAAa6/C,EAAUx2D,GAAIm2D,EAAanpC,WAEpD,MAAWkpC,GAAsC,IAAvBhB,EAAY/2D,QAAwC,OAAxB+3D,EAAY50C,UAC9D60C,EAAe5wD,EAAI+iB,OAAOvkB,EAAUmxD,EAAY,GAAGh1D,KAAK,GAAIg1D,EAAY,GAAGz+C,MAC3ElR,EAAIwU,KAAKhT,EAASovD,GAE1B,EAEAH,kBAAmB,SAAS9xC,EAAOiZ,GAC/B,IACIs5B,EAAcC,EAAaC,EAAS32D,EAAG+uB,EAASjC,EADhD/oB,EAAW1H,KAAKiJ,OAAOvB,SAG3B,IAAK/D,EAAI,EAAGA,EAAIm9B,EAAah/B,OAAQ6B,IACjCy2D,EAAet5B,EAAan9B,GAC5B02D,EAAcnxD,EAAI+iB,OAAOvkB,EAAU0yD,EAAav2D,KAAK,GAAIu2D,EAAahgD,MAElEkgD,GACAD,EAAYh7C,YAAYi7C,GAG5BA,EAAUD,EAGd,GAAIC,EACA,IAAK32D,EAAI,EAAGA,EAAIkkB,EAAM/lB,OAAQ6B,IAE1B,GADA8sB,EAAO5I,EAAMlkB,IACTuF,EAAI2sB,aAAapF,KAASzwB,KAAKypC,gBAAgBhZ,GAAnD,CAMA,IAHAiC,EAAU4nC,EAAQ3nC,WAAU,GAC5BzpB,EAAIoR,aAAaoY,EAASjC,GAEnBiC,EAAQ7J,UAAY6J,EAAQ7J,SAAS/mB,QACxC4wB,EAAUA,EAAQ7J,SAAS,GAG/B6J,EAAQrT,YAAYoR,EARpB,CAWZ,EAEA/a,WAAY,WACR,OAAO1V,KAAKiJ,QAAUjJ,KAAKiJ,OAAOlI,QAAQ2U,UAC9C,EAEA+zB,gBAAiB,SAAShZ,GACtB,OAAOzwB,KAAK0V,cAAgB3O,EAAO+X,WAAW2qB,gBAAgBhZ,EAClE,IAGA8pC,EAAiBj6D,EAAKE,OAAO,CAC7BM,KAAM,SAASC,GACXT,EAAKU,GAAGF,KAAKG,KAAKjB,KAAMe,EAC5B,EAEAM,QAAS,SAASisB,GACd,OAAO,IAAIsrC,EAAkBtrC,EACjC,IAGAktC,EAAkBl6D,EAAKE,OAAO,CAC9BM,KAAM,SAASC,GACXT,EAAKU,GAAGF,KAAKG,KAAKjB,KAAMe,EAC5B,EAEAM,QAAS,SAASisB,GACd,OAAO,IAAIisC,EAAmBjsC,EAClC,IAGJrtB,EAAEO,OAAOuG,EAAQ,CACb6xD,kBAAmBA,EACnBW,mBAAoBA,EACpBgB,eAAgBA,EAChBC,gBAAiBA,IAGrBn6D,EAAa,aAAc,IAAIk6D,EAAe,CAAE,IAChDl6D,EAAa,cAAe,IAAIm6D,EAAgB,CAAE,GAEjD,CArVD,CAqVGt4D,OAAOvB,MAAM0uB,QAEhB,SAAUpvB,GAEN,MAAMU,EAAQuB,OAAOvB,MACjBH,EAASP,EAAEO,OACXuG,EAASpG,EAAM0B,GAAG4G,OAClB9B,EAAUxG,EAAM0B,GAAG0E,OAAO/F,GAAGD,QAAQoG,QACrC+B,EAAMnC,EAAOoC,IACb7I,EAAOyG,EAAOzG,KACdgwC,EAAuBvpC,EAAOupC,qBAC9BqG,EAAiB5vC,EAAO4vC,eACxB1I,EAAgBlnC,EAAOknC,cACvBqB,EAA2BvoC,EAAOuoC,yBAClChsC,EAAcyD,EAAOzD,YACrBjD,EAAeiD,EAAYjD,aAC3B4G,EAAiB3D,EAAY2D,eAC7BuN,EAAazN,EAAOyN,WAIlBimD,EAAoBxsB,EAAcztC,OAAO,CAC3CmU,KAAM,WACF,MAAMi5B,EAAM5tC,KACR6U,EAAQ+4B,EAAIZ,WAAU,GACtBnlB,EAAQ3e,EAAI4e,SAAStT,EAAWqT,MAAMhT,GAAQ3L,EAAI6e,iBAAiB,GAEvE6lB,EAAIb,UAAUrpC,OAAO,GAAG0W,KAAKnO,MAAMT,WAAaoiC,EAAI7sC,QAAQsS,MAAM7H,WAClEoiC,EAAIb,UAAUvS,MAAM3S,GACpB+lB,EAAIX,aAAap4B,EACrB,IAGE6lD,EAAuBpqB,EAAqB9vC,OAAO,CACrDM,KAAM,SAASC,GACXT,EAAKU,GAAGF,KAAKG,KAAKjB,KAAMe,GAExBf,KAAK8I,KAAO,gBACZ9I,KAAK0D,OAAS,CAAC,CAAEG,KAAM,CAAC,IAAK,gBAC7B7D,KAAKqY,OAAS,IAAIi3B,EAAyBtvC,KAAK0D,OAAQ3C,EAAQyvC,QAASzvC,EAAQyuC,SAAUzuC,EAAQmkB,aACvG,EAEA7jB,QAAS,SAASisB,GACd,IAAItkB,EAAOhJ,KAEX,OAAO,IAAIy6D,EAAkBj6D,EAAO8sB,EAAkB,CAClDyf,UAAW,WACP,OAAO,IAAI4J,EAAe3tC,EAAKjI,QAAQ2C,OAC3C,IAER,EAEA0V,WAAY,SAAS/W,EAAI4G,GACrB,IACI6S,EAAYzZ,EAAGs4D,mBADR36D,KAGNiJ,OAASA,EAEd6S,EAAUvS,KAAK,SAAUvJ,KAAKk/C,cAAc31C,KAAKvJ,OACjD8b,EAAUvS,KAAK,QAASvJ,KAAK46D,aAAarxD,KAAKvJ,OAE/C8b,EAAUpR,QAAQoZ,GA3CP,wBA2CwB,iCAAkC9jB,KAAK66D,iBAAiBtxD,KAAKvJ,OAC3F8jB,GA3CI,sBA2CW9jB,KAAK86D,eAAevxD,KAAKvJ,MACjD,EAEAk/C,cAAe,SAAS70C,GACpBrK,KAAKm/C,MAAM90C,EAAEumC,OAAOv9B,QACxB,EAEAunD,aAAc,WACV,IAAI5xD,EAAOhJ,KACPiJ,EAASD,EAAKC,OAElByW,YAAW,WACPzW,EAAO4S,oBACP7S,EAAK+xD,aAAe,IACxB,GAAE,EACN,EAEAF,iBAAkB,WACd,IAAIhqB,EAAW7wC,KAAKiJ,OAAOqM,WAE3BtV,KAAK+6D,aAAe/6D,KAAKiJ,OAAOsQ,eAAes3B,GAAYA,EAAW7wC,KAAK+6D,YAC/E,EAEAD,eAAgB,SAASzwD,GACjBA,EAAE8V,UAAYxf,EAAM+B,KAAKouC,QACzB9wC,KAAKiJ,OAAO4S,oBACZ7b,KAAK+6D,aAAe,KACpB1wD,EAAEoW,iBAEV,EAEA0+B,MAAO,SAAS9rC,GACCrT,KAAKiJ,OACXoM,OAASrV,KAAK+6D,aACjB1nD,GACA/S,EAAKqU,KAAK3U,KAAKiJ,OAAQjJ,KAAKe,QAAQ0C,KAAM,CAAE+H,WAAY6H,GAEhE,IAGJpT,EAAEO,OAAOuG,EAAQ,CACb0zD,kBAAmBA,EACnBC,qBAAsBA,IAG1BzzD,EAAe,aAAc,CACzB,CAAEpD,KAAMqF,EAAI8mB,cAAe5V,KAAM,CAAEnO,MAAO,CAAET,WAAY,cAG5DnL,EAAa,aAAc,IAAIq6D,EAAqB,CAChDlqB,QAAS,cACT9sC,OAAQyD,EAAQqE,WAChB0Z,aAAc,KACd7iB,GAAI,CACAyG,KAAM,YACNgT,UAAW,WACXyL,iBAAkB,CACdlU,MAAO,KACP0+B,cAAe,OACfD,eAAgB,QAChBkpB,cAAe,CACXj3D,KAAM,mBAEVq6C,UAAU,EACVriC,WAAY,CACR,CAAE3I,KAAM,IAAKC,MAAO,KACpB,CAAED,KAAM,OAAQC,MAAO,QACvB,CAAED,KAAM,MAAOC,MAAO,OACtB,CAAED,KAAM,IAAKC,MAAO,KACpB,CAAED,KAAM,MAAOC,MAAO,YAKzC,CAtID,CAsIGnR,OAAOvB,MAAM0uB,QAEhB,SAAUpvB,GAEN,MACI8G,EADU7E,OAAOvB,MACF0B,GAAG4G,OAClB3I,EAAOyG,EAAOzG,KACdH,EAAU4G,EAAO5G,QAEjBE,EADc0G,EAAOzD,YACMjD,aAC3B46D,EAAMl0D,EAAOoC,IAIX+xD,EAAa,SAASrmD,EAAOnN,EAAUyzD,EAAWh9C,EAAW5W,EAAO6zD,GACtE,MAAMC,EAAcxmD,EAAM+uB,aACpBlsB,EAAY2jD,EAAY5kD,eAE9B,IAAI6kD,EAAS9mC,EAAG+mC,EAAGjzB,EAAUkzB,EA8B7B,OA5BIj0D,UACA8zD,EAAYxkD,SAASa,EAAWnQ,GAChC8zD,EAAYh4B,OAAO3rB,EAAWnQ,EAAQ,IAG1C+zD,EAAUD,EAAYI,wBAElBL,GACAI,EAAaJ,EAAkBK,wBAC/BjnC,EAAI8mC,EAAQ98C,KAAOg9C,EAAWh9C,KAAO88C,EAAQntD,MAAQ,EACrDotD,EAAID,EAAQ78C,IAAM+8C,EAAW/8C,IAAM68C,EAAQltD,OAAS+P,GAnBxC,MAqBRg9C,GACA3mC,EAAI8mC,EAAQ9mC,EAAI8mC,EAAQntD,MAAQ,EAChCotD,EAAID,EAAQC,EAAID,EAAQltD,OAAS+P,GAtBtB,MAuBJg9C,IACP3mC,EAAI8mC,EAAQ9mC,EACZ+mC,EAAID,EAAQC,EAAID,EAAQltD,OAAS+P,GAIzCmqB,EAAW5gC,EAASg0D,gBAAgB,6BAA8B,QAClEpzB,EAASqzB,eAAe,KAAM,IAAKnnC,GACnC8T,EAASqzB,eAAe,KAAM,IAAKJ,GACnCjzB,EAASqzB,eAAe,KAAM,OAAQ,WACtCrzB,EAASqzB,eAAe,KAAM,YAAa,GAAGvuC,KAAKuK,KAAK2jC,EAAQltD,OAASktD,EAAQntD,YACjFm6B,EAASktB,YAAc2F,EAEhB7yB,CACX,EAEMszB,EAAiB,WACnB,MAAM5yD,EAAOhJ,KACT6U,EAAQ7L,EAAKsM,WAAWsuB,aACxBi4B,EAAU7yD,EAAKgU,wBAAwB,GACvCq8B,EAAWrwC,EAAKtB,SAASy8B,yBACzBz8B,EAAWsB,EAAKtB,SAChBo0D,EAAiB9yD,EAAKoU,kBACtBg+C,EAAoBU,EAAiB9yD,EAAK+L,KAAKgL,cAAgB,KAC/D5B,EAAY29C,EAAiBV,EAAkBj9C,UAAYzW,EAASC,gBAAgBwW,UAExF,IAAKnV,EAAK+L,KAAK4b,aAAe3nB,EAAK+L,KAAKihB,UACpC,OAGJnhB,EAAMgC,SAAS7N,EAAK+L,KAAK4b,WAAY,GACrC9b,EAAMwuB,OAAOr6B,EAAK+L,KAAKihB,UAAW,GAEpBilC,EAAInlC,aAAa9sB,EAAK+L,MAAMkb,OAAOhwB,EAAE+I,EAAK+L,MAAMpK,KAAK,MAAMslC,WAEnEpS,SAASpN,IACX,GAAIA,EAAK1P,WAAak6C,EAAIznC,UAAUG,UAAW,CAC3C9e,EAAM6uB,mBAAmBjT,GAEzB,IAAK,IAAI9sB,EAAIkR,EAAM8B,YAAahT,EAAIkR,EAAM+B,UAAWjT,IACO,KAAnDkR,EAAM4B,eAAe++C,YAAY3gC,WAAWlxB,IAAgE,MAAnDkR,EAAM4B,eAAe++C,YAAY3gC,WAAWlxB,IACtG01C,EAASh6B,YAAY67C,EAAWrmD,EAAOnN,EAjEvC,IAiEgEyW,EAAWxa,EAAGy3D,GAG1F,MACIvmD,EAAMyN,WAAWmO,GACjB4oB,EAASh6B,YAAY67C,EAAWrmD,EAAOnN,EArE5B,IAqEwDyW,EAAW,KAAMi9C,GACxF,IAGJS,EAAQx8C,YAAYg6B,EACxB,EAEM1wB,EAA8B,SAAS1f,GACzCA,EAAO+T,wBAAwB+L,OACnC,EAEML,EAAuB,SAASzf,GAClCA,EAAOqU,sCACPs+C,EAAe36D,KAAKgI,EACxB,EAEM8yD,EAAyB57D,EAAQK,OAAO,CAC1CmU,KAAM,WACF,MAAMi5B,EAAM5tC,KACR6U,EAAQ+4B,EAAIZ,WAAU,GACtB/jC,EAAS2kC,EAAI3kC,OAEZA,EAAO2f,yBAOR3f,EAAO2f,yBAA0B,EACjC3f,EAAOkL,mCAPPlL,EAAO2f,yBAA0B,EACjC3f,EAAO6T,gCACP7T,EAAOwT,+BACPkM,EAA4B1f,GAC5Byf,EAAqBzf,IAMzB2kC,EAAIX,aAAap4B,EACrB,IAGJ5U,EAAEO,OAAOuG,EAAQ,CACbg1D,uBAAwBA,EACxBrzC,qBAAsBA,EACtBC,4BAA6BA,IAGjCtoB,EAAa,kBAAmB,IAAIC,EAAK,CAAEe,QAAS06D,EAAwBh4D,KAAM,gBAAiB1B,GAAI,CAAEmvC,WAAW,KACvH,CA3HD,CA2HGtvC,OAAOvB,MAAM0uB,QAEhB,SAAU1uB,EAAOsB,GACb,IAAI5C,EAAS6C,OACT85D,EAAO38D,EAAO+tB,KACdlC,EAAM8wC,EAAK9wC,IACXE,EAAM4wC,EAAK5wC,IACXjO,EAAa9d,EAAO8d,WAEpBld,EAAIU,EAAM0uB,OACV7uB,EAASP,EAAEO,OAEXuG,EAASpG,EAAM0B,GAAG4G,OAIlBgzD,EAA8B,mBAC9BC,EAAyB,oBACzBC,EAAS,SA2Bb,SAASC,EAAc/oD,GACnB,cAAc,IAAY8oD,GAAUF,EAA4BtmD,KAAKtC,EACzE,CAwBA7S,EAAOuG,EAAQ,CACXs1D,cAXgB,CAChBC,UA1CJ,SAAmBv7D,GACf,IAAIsS,EAAQtS,EAAQsS,MAChBkpD,EAAax7D,EAAQmqB,IACrBsxC,EAAaz7D,EAAQqqB,IAEzB,OAAOA,EAAIF,EAAI/N,EAAW9J,GAAQ8J,EAAWq/C,IAAcr/C,EAAWo/C,GAC1E,EAqCIE,kBAnCJ,SAA2B7zD,GACvB,OAAIA,IAAY3I,EAAE2I,GAASmb,GAAG,SAAWnb,EAAQ2U,aAAe3U,EAAQ0V,aAC7D3d,EAAM4B,QAAQm6D,YAGlB,CACX,EA8BIC,yBA5BJ,SAAkCtpD,EAAOupD,GACrC,OAAIR,EAAc/oD,GACP8J,EAAW9J,GAGT8J,EAAW9J,GAASupD,EAAS,GAE9C,EAsBIR,cAAeA,EACfS,SAjBJ,SAAkBxpD,GACd,cAAc,IAAY8oD,GAAUD,EAAuBvmD,KAAKtC,EACpE,EAgBIypD,cAdJ,SAAuBzpD,GACnB,OAAQ8J,EAAW9J,GAxCN,GAyCjB,EAaI0pD,SAXJ,SAAkB1pD,GACd,OAAQ8J,EAAW9J,GA3CX,IA4CZ,IAeH,CAxED,CAwEGnR,OAAOvB,OAEV,SAAUA,EAAOsB,GACb,IAAIhC,EAAIU,EAAM0uB,OACV7uB,EAASP,EAAEO,OACX+sB,EAAOttB,EAAEstB,KAETxmB,EAASpG,EAAM0B,GAAG4G,OAClB9G,EAAQxB,EAAMwB,MAEd66D,EAAW,UAGXC,EAAc,aAEdC,EAAW,UAMXna,EAAQ,QAERoa,EAAuBh7D,EAAM3B,OAAO,CACpCM,KAAM,SAAS8H,EAAS7H,GACpB,IAAIiI,EAAOhJ,KAEXgJ,EAAKjI,QAAUP,EAAO,CAAC,EAAGwI,EAAKjI,QAASA,GAExCiI,EAAKjI,QAAQ8C,KAAOmiB,MAAMC,QAAQjd,EAAKjI,QAAQ8C,MAAQmF,EAAKjI,QAAQ8C,KAAO,CAACmF,EAAKjI,QAAQ8C,MAErF5D,EAAE2I,GAASmb,GAAGg/B,KACd/5C,EAAKJ,QAAUA,EACfI,EAAKo0D,uBAEb,EAEA7pD,QAAS,WACL,IAAIvK,EAAOhJ,KACPq9D,EAAiBr0D,EAAKjI,QAAQs8D,eAE9Br0D,EAAKJ,UACL3I,EAAE+I,EAAKJ,SAASmV,IAAIs/C,GACpBr0D,EAAKJ,QAAU,MAGnB3I,EAAE+I,EAAKjI,QAAQu8D,aAAav/C,IAAIi/C,EAAWK,GAE3Cr0D,EAAKu0D,sBACT,EAEAx8D,QAAS,CACL8C,KAAM,GACNqnB,IAAK,EACLoyC,YAAa,KACbD,eAAgB,GAChBG,KAAK,EACLC,OAAQ,CACJC,cAAe,GACftvD,OAAQ,EACRD,MAAO,EACPyrB,WAAY,CAAC,EACb3S,SAAU,KAIlBm2C,qBAAsB,WAClB,IAAIp0D,EAAOhJ,KACPe,EAAUiI,EAAKjI,QAEnBd,EAAE+I,EAAKJ,SAASkb,GAxDP,YAwDuB/iB,EAAQs8D,eAAgBt8D,EAAQ8C,KAAK8X,KArDjE,KAqD8E3S,EAAK20D,4BAA4Bp0D,KAAKP,GAC5H,EAEA40D,mBAAoB,WAChB,IACIjsD,EADO3R,KACU2J,WAErB,QAAIgI,KACSA,EAAUksD,QAI3B,EAEAhzD,OAAQ0iB,EAERowC,4BAA6B,SAAStzD,GAClC,IAAIrB,EAAOhJ,KAEP89D,EADU90D,EAAKjI,QACS08D,OACxBM,EAAe99D,EAAEoK,EAAE2zD,eACnBC,EAAej1D,EAAKi1D,aACpBP,EAAgBI,EAAcJ,cAE7B10D,EAAK40D,wBACDG,EAAah6C,GA5Eb,gBA4E+B/a,EAAKk1D,qBAAqBH,EAAc1zD,GACpE4zD,EACIA,EAAa5hD,KAAKqhD,IAAkBO,EAAa5hD,KAAKqhD,KAAmBK,EAAa,IACtF/0D,EAAKm1D,iBAAiBJ,EAAc1zD,GAIxCrB,EAAKm1D,iBAAiBJ,EAAc1zD,GAIpC4zD,GACAj1D,EAAKu0D,uBAIrB,EAEAW,qBAAsB3wC,EAEtB4wC,iBAAkB,SAASJ,EAAc1zD,GACrC,IAAIrB,EAAOhJ,KAEO,IAAdqK,EAAEsd,UAKN3e,EAAKo1D,oBACLp1D,EAAKq1D,wBAAwBN,GAC7B/0D,EAAKs1D,4BACLt1D,EAAKu1D,8BAA8BR,EAAa,IAChD/0D,EAAKw1D,mCAELx1D,EAAKy1D,eAAeV,GAEpB/0D,EAAK01D,oBACL11D,EAAKi1D,aAAa3zC,OACtB,EAEA8zC,kBAAmB,WACf,IAAIp1D,EAAOhJ,KACPe,EAAUiI,EAAKjI,QAEnBiI,EAAKu0D,uBAELv0D,EAAKi1D,aAAeh+D,EAAEc,EAAQ08D,OAAOx2C,UAAUhK,SAASlc,EAAQu8D,YACpE,EAEAe,wBAAyB9wC,EAEzB+wC,0BAA2B/wC,EAE3BgxC,8BAA+B,SAASR,GACzB/9D,KAENi+D,aAAa5hD,KAFPrc,KAEiBe,QAAQ08D,OAAOC,cAAeK,EAC9D,EAEAS,iCAAkC,WAC9B,IAAIx1D,EAAOhJ,KACPe,EAAUiI,EAAKjI,QACfs8D,EAAiBt8D,EAAQs8D,eACzBsB,EAAc59D,EAAQ08D,OAAO7jC,WAAWrC,OACxC0mC,EAAej1D,EAAKi1D,aAExBj1D,EAAKi1D,aACAn6C,GAvJI,YAuJYu5C,GAAgB,WAC7BY,EAAatzD,KAjJnB,IAiJ8Bg0D,GAAar0C,MACzC,IACCxG,GAAGo5C,EAAWG,GAAgB,WAC3BY,EAAatzD,KApJnB,IAoJ8Bg0D,GAAa3kD,MACzC,GACR,EAEA0kD,kBAAmB,WACJ1+D,KAENi+D,aAAatzD,KA3JhB,IAyJS3K,KAEuBe,QAAQ08D,OAAO7jC,WAAWrC,QAAQvd,MACxE,EAEAujD,qBAAsB,WAClB,IAAIv0D,EAAOhJ,KAEPgJ,EAAKi1D,eACLj1D,EAAK41D,oBACL51D,EAAKi1D,aAAalgD,IAAI/U,EAAKjI,QAAQs8D,gBAAgB/lD,SACnDtO,EAAKi1D,aAAe,KAE5B,EAEAQ,eAAgB,SAASV,GACrB,IAAI/0D,EAAOhJ,KAENgJ,EAAKi1D,eAIVj1D,EAAK41D,oBAEL51D,EAAKW,WAAa,IAAIhJ,EAAM0B,GAAGw8D,UAAUd,EAAc,CACnDe,iBAAkB91D,EAAKi1D,aAAa,GACpC79B,MAAOp3B,EAAK+1D,cAAcx1D,KAAKP,GAC/B6B,OAAQ7B,EAAKg2D,SAASz1D,KAAKP,GAC3Bi2D,UAAWj2D,EAAKk2D,YAAY31D,KAAKP,KAEzC,EAEA41D,kBAAmB,WACf,IAAI51D,EAAOhJ,KAEPgJ,EAAKW,aACLX,EAAKW,WAAW4J,UAChBvK,EAAKW,WAAa,KAE1B,EAEAo1D,cAAe,WACX/+D,KAAKm/D,kBACT,EAEAH,SAAU,SAAS30D,GACfrK,KAAKo/D,4BAA4B/0D,EACrC,EAEA+0D,4BAA6B7xC,EAE7B2xC,YAAa,SAAS70D,GAClB,IAAIrB,EAAOhJ,KAEXgJ,EAAK6B,OAAOR,GACZrB,EAAKu0D,uBACLv0D,EAAKq2D,kBAEDr/D,KAAKe,QAAQkI,QACbjJ,KAAKe,QAAQkI,OAAOsB,yBAE5B,EAEA80D,gBAAiB,WACb,IAAIt+D,EAAUf,KAAKe,QAEnBd,EAAEc,EAAQu8D,aAAav/C,IAAIi/C,EAAWj8D,EAAQs8D,eAClD,EAEA8B,iBAAkB,WACd,IAAIp+D,EAAUf,KAAKe,QAEnBd,EAAEc,EAAQu8D,aAAax5C,GAAGk5C,EAAWj8D,EAAQs8D,gBAAgB,SAAShzD,GAClEA,EAAEoW,gBACN,GACJ,EAEA6+C,eAAgB,SAASj1D,GACrB,IAAIsH,EAAY3R,KAAK2J,WAEjBgI,GAAaA,EAAU4tD,YACvB5tD,EAAU4tD,WAAWr6B,KAAK76B,EAElC,IAGAm1D,EAAkBr9D,EAAM3B,OAAO,CAC/ByrB,OAAQ,SAAShjB,EAAQlI,GACrB,IAAIiI,EAAOhJ,KACPy/D,EAAe1+D,EAAQ0C,KACvBykB,EAAKnnB,EAAQs8D,eAEjBp9D,EAAEgJ,EAAO8L,MACJ+O,GA5PK,aA4PYoE,EAAI66B,GAAO,SAAS14C,GAClC,IAAIkxB,EAAQlxB,EAAE2zD,cACVH,EAAW50D,EAAOw2D,GAEtBp1D,EAAEya,kBAEE+4C,EACIA,EAASj1D,UAAY2yB,GAAUsiC,EAASD,uBACxC50D,EAAK02D,iBAAiBz2D,EAAQlI,GAC9BiI,EAAK22D,cAAc12D,EAAQsyB,EAAOx6B,IAItCiI,EAAK22D,cAAc12D,EAAQsyB,EAAOx6B,EAE1C,IACC+iB,GAAGm5C,EAAc/0C,EAAI66B,GAAO,SAAS14C,GAClC,IAAIu1D,EACA/B,EAAW50D,EAAOw2D,GAEtBp1D,EAAEya,mBAEE+4C,GAAaA,EAASD,sBAAyBC,EAASI,eACxD2B,EAAc3/D,EAAE49D,EAASj1D,SAASic,QAAQk+B,GAAO,MAG7C/5C,EAAK02D,iBAAiBz2D,EAAQlI,GAC9BiI,EAAK22D,cAAc12D,EAAQ22D,EAAa7+D,GAGpD,IACC+iB,GAAGm5C,EAAc/0C,GAAI,WAClB,IAAI21C,EAAW50D,EAAOw2D,GAElB5B,IAAaA,EAASD,sBACtB50D,EAAK02D,iBAAiBz2D,EAAQlI,EAEtC,IACC+iB,GAAGo5C,EAAWh1C,GAAI,SAAS7d,GACxB,IACIu1D,EADA/B,EAAW50D,EAAOw2D,GAGlB5B,GAAYA,EAASD,uBACrBgC,EAAc3/D,EAAEoK,EAAEuU,QAAQiG,QAAQk+B,GAAO,MAGrC8a,EAASyB,eAAej1D,GACxBrB,EAAK02D,iBAAiBz2D,EAAQlI,GAC9BiI,EAAK22D,cAAc12D,EAAQ22D,EAAa7+D,GAGpD,GACR,EAEA6qB,QAAS,SAAS3iB,EAAQlI,GACtBd,EAAEgJ,EAAO8L,MAAMgJ,IAAIhd,EAAQs8D,eAC/B,EAEAsC,cAAe,SAAS12D,EAAQ80D,EAAch9D,GAC1C,IAAI0+D,EAAe1+D,EAAQ0C,KACvBo8D,EAAe9+D,EAAQ+H,KAE3BG,EAAOw2D,GAAgB,IAAII,EAAa9B,EAAc,CAClDP,IAAK78D,EAAM4B,QAAQ+Y,MAAMrS,EAAOL,SAChC00D,YAAar0D,EAAO8L,KACpB9L,OAAQA,GAEhB,EAEAy2D,iBAAkB,SAASz2D,EAAQlI,GAC/B,IAAI0+D,EAAe1+D,EAAQ0C,KAEvBwF,EAAOw2D,KACPx2D,EAAOw2D,GAAclsD,UACrBtK,EAAOw2D,GAAgB,KAE/B,IAEJD,EAAgBj6C,QAAU,IAAIi6C,EAE9BrC,EAAqBlxC,OAAS,SAAShjB,EAAQlI,GAC3Cy+D,EAAgBj6C,QAAQ0G,OAAOhjB,EAAQlI,EAC3C,EAEAo8D,EAAqBvxC,QAAU,SAAS3iB,EAAQlI,GAC5Cy+D,EAAgBj6C,QAAQqG,QAAQ3iB,EAAQlI,EAC5C,EAEAP,EAAOuG,EAAQ,CACXo2D,qBAAsBA,GAG7B,CAlWD,CAkWGj7D,OAAOvB,OAEV,SAAUA,EAAOsB,GACb,IAEI69D,EAFS59D,OACKkrB,KACH0yC,IAEX7/D,EAAIU,EAAM0uB,OACV7uB,EAASP,EAAEO,OAEXuG,EAASpG,EAAM0B,GAAG4G,OAClBC,EAAMnC,EAAOoC,IACbg0D,EAAuBp2D,EAAOo2D,qBAC9Bd,EAAgBt1D,EAAOs1D,cACvBC,EAAYD,EAAcC,UAC1BK,EAA2BN,EAAcM,yBACzCF,EAAoBJ,EAAcI,kBAClCL,EAAgBC,EAAcD,cAC9BU,EAAgBT,EAAcS,cAC9BC,EAAWV,EAAcU,SACzBp6D,EAAahC,EAAMiC,YAEnBslB,EAAK,6BACL63C,EAAsB,yBACtBC,EAAsB,yBAEtBC,EAAO,OACPhd,EAAQ,QACRD,EAAQ,QAGRE,EAAK,KAELgd,EAAU,YAEVC,EAAQ,IACRC,EAAQ,QAERp0C,EAAiBmxC,EAAqB38D,OAAO,CAC7CO,QAAS,CACL8C,KAAM,CAXL,KACA,MAWDqnB,IAAK,GACLoyC,YAAa,KACbD,eAAgBn1C,EAChBs1C,KAAK,EACLC,OAAQ,CACJC,cAAe,SACfvvD,MAAO,GACPC,OAAQ,EACRwrB,WAAY,CACR6jC,OAAQsC,EACRxoC,OAAQyoC,GAEZ/4C,SACI,qGACqB84C,EADrB,iBAEyBC,EAFzB,yBAQZ9B,qBAAsB,SAAS7T,EAAQhgD,GACnC,IACItJ,EADOf,KACQe,QACfs/D,EAAct/D,EAAQ08D,OAAOtvD,MAC7BmyD,EAAejW,EAAOzpC,SAASpC,MAAQzd,EAAQy8D,IAAM,EAAI76D,EAAW0nD,IAGpEkW,EAAgBl2D,EAAEk7C,QAAUtlD,EAAEoqD,EAAO,GAAGn3B,eAAesyB,aAE3D,OAAK+a,EAAiBD,EAAeD,GAAkBE,EAAiBD,EAAeD,CAM3F,EAEAhC,wBAAyB,SAAShU,GAC9B,IAAIrhD,EAAOhJ,KACPwgE,EAAoBvgE,EAAE+I,EAAKJ,QAAQi0B,OAAS7zB,EAAKJ,QAAQ63D,QAAQ,IACjE1/D,EAAUiI,EAAKjI,QACfy8D,EAAMz8D,EAAQy8D,IACd6C,EAAct/D,EAAQ08D,OAAOtvD,MAC7BmvD,EAAcr9D,EAAEc,EAAQu8D,aACxBoD,EAAkBpD,EAAYv5C,GAAGk8C,GAAQ,EAAI3C,EAAYn/C,YACzDwiD,EAAmBrD,EAAYv5C,GAAGk8C,GAAQ,EAAIt/D,EAAM6kD,WAAW8X,GAC/DsD,EAAoBpD,EAAM,EAAI76D,EAAW0nD,GACzCwW,EAAiBrD,EAAMf,EAAkBa,EAAY,IAAM,EAC3DwD,EAAmBzW,EAAOzpC,SAASpC,MACd8+C,EAAY18C,SAASpC,KAAOrB,WAAWmgD,EAAYjrD,IAAI,qBACxD8K,WAAWktC,EAAOh4C,IAAI,eAC1C0uD,EAAwBP,EAAkB5/C,SAASnC,KAC9B6+C,EAAY18C,SAASnC,IAAMtB,WAAWmgD,EAAYjrD,IAAI,oBACvD8K,WAAWqjD,EAAkBnuD,IAAI,cACrD5P,EAAU9B,EAAM4B,QAAQE,QAExB+6D,IAAQ/6D,EAAQ2nB,SAAY3nB,EAAQwqD,QAAUxqD,EAAQiuB,SAAW,MACjEiwC,IAAuC,GAG3C33D,EAAKi1D,aAAa5rD,IAAI,CAClBoM,IAAKsiD,EAAwBL,EAC7BliD,KAAMsiD,EAAmBF,GAAqBD,EAAmBE,GAAmBR,EAAc,EAClGtxD,SAAU,YAElB,EAEAuvD,0BAA2B,WACvB,IAAIt1D,EAAOhJ,KACPghE,EAAY/gE,EAAE+I,EAAKJ,SAASigB,SAASm6B,GACrCie,EAAYhhE,EAAE+I,EAAKJ,SAASigB,SAASo6B,GACrCie,EAAaF,EAAUl/D,OAAS,EAAIk/D,EAAU5yD,SAAW6yD,EAAU7yD,SAAW6yD,EAAU7yD,SAE5FpF,EAAKi1D,aAAa5rD,IAAI,CAClBlE,MAAOnF,EAAKjI,QAAQ08D,OAAOtvD,MAC3BC,OAAQ8yD,GAEhB,EAEA9B,4BAA6B,SAAS/0D,GAClC,IAAIrB,EAAOhJ,KACPqqD,EAASpqD,EAAEA,EAAEoK,EAAE2zD,eAAe3hD,KAAKrT,EAAKjI,QAAQ08D,OAAOC,gBACvD38D,EAAUiI,EAAKjI,QACfu8D,EAAcr9D,EAAEc,EAAQu8D,aACxB+C,EAAct/D,EAAQ08D,OAAS18D,EAAQ08D,OAAOtvD,MAAQ,EACtD+c,EAAMnqB,EAAQmqB,IACdsyC,EAAMz8D,EAAQy8D,IACd2D,EAAcx+D,EAAW0nD,GACzB+W,EAAmB/W,EAAOzpC,SAASpC,MACd8+C,EAAY18C,SAASpC,KAAOrB,WAAWmgD,EAAYjrD,IAAI,qBACxD8K,WAAWktC,EAAOh4C,IAAI,eAC1CgvD,EAAsB1+D,EAAW0nD,EAAOxpC,QACxCo9C,EAAeh+D,EAAE+I,EAAKi1D,cACtB0C,EAAmBrD,EAAYv5C,GAAGk8C,GAAQ,EAAIt/D,EAAM6kD,WAAW8X,GAC/DuD,EAAiBrD,EAAMf,EAAkBa,EAAY,IAAM,EAC3DgE,EAAyBrD,EAAar9C,SAASpC,MAClB8+C,EAAY18C,SAASpC,KAAOrB,WAAWmgD,EAAYjrD,IAAI,qBACxD8K,WAAW8gD,EAAa5rD,IAAI,eACxD5P,EAAU9B,EAAM4B,QAAQE,QAExB+6D,IAAQ/6D,EAAQ2nB,SAAY3nB,EAAQwqD,QAAUxqD,EAAQiuB,SAAW,MACjEiwC,IAAuC,GAG3C,IAAIY,EAAejF,EAAU,CACzBjpD,MAAOiuD,GAA0BX,EAAmBE,GAAkBx2D,EAAEmqB,EAAE8Q,MAC1Epa,IAAKk2C,GAAoBT,EAAmBE,IAAmBrD,EAAM6D,EAAsB,GAAKn2C,EAChGE,IAAKg2C,EAAmBD,GAAeR,EAAmBE,IAAmBrD,EAAM,EAAI6D,GAAuBhB,EAAcn1C,IAGhI+yC,EAAa5rD,IAAI,CAAEmM,KAAM+iD,GAC7B,EAEA12D,OAAQ,SAASR,GACb,IAMIm3D,EACAC,EACAC,EACA5lC,EACA6lC,EAVA34D,EAAOhJ,KACPqqD,EAASpqD,EAAEA,EAAEoK,EAAE2zD,eAAe3hD,KAAKrT,EAAKjI,QAAQ08D,OAAOC,gBACvD38D,EAAUiI,EAAKjI,QACf6gE,EAAc7gE,EAAQy8D,KAAQ,EAAK,EACnCtyC,EAAMnqB,EAAQmqB,IACd22C,EAAgBD,EAAcv3D,EAAEmqB,EAAEstC,aAOtC54D,EAAIoyB,kBAAkBtyB,EAAKJ,QAASs3D,GAEpCpkC,EAAW5S,SAASmhC,EAAOjwC,KAAK8lD,GAAU,IAEtC7V,EAAOrpB,KAAK,WAAa,IACzBqpB,EAASpqD,EAAE+I,EAAKJ,SAAS+B,KAAK,IAAMu1D,EAAU,KAAOpkC,EAAWuuB,EAAOrpB,KAAK,WAAa,GAAK,KAAKikB,GAAG,GACtGnpB,EAAW5S,SAASmhC,EAAOjwC,KAAK8lD,GAAU,KAG9CyB,EAAa1hE,EAAE+I,EAAKJ,SAAS+B,KAAK,IAAMu1D,EAAU,KAAOpkC,EAAW,GAAK,oBAEzE9yB,EAAK+4D,yBACL/4D,EAAKg5D,2BAELN,EAAqB/+D,EAAW0nD,GAChCoX,EAA6B9+D,EAAWg/D,GAExCH,EAAWlF,EAAU,CACjBjpD,MAAOquD,EAAqBG,EAC5B32C,IAAKA,EACLE,IAAKs2C,EAAqBD,EAA6Bv2C,IAG3DliB,EAAKi5D,cAAc5X,EAAO,GAAImX,GAC9Bx4D,EAAKk5D,2BAA2B7X,EAAO,GAAImX,GAC3Cx4D,EAAKm5D,uBAAuBj5C,SAASmhC,EAAOjwC,KAAK8lD,GAAS,IAAKuB,EAA4BC,EAAqBA,EAAqBF,GAErIt4D,EAAIwyB,mBAAmB1yB,EAAKJ,QAASs3D,EACzC,EAEA6B,uBAAwB,WACpB,IAAIn5D,EAAU5I,KAAK4I,QAEU,KAAzBA,EAAQqD,MAAMm0D,KACdx3D,EAAQqD,MAAMm0D,GAASrD,EAASp6D,EAAW1C,EAAE2I,KAErD,EAEAo5D,yBAA0B,WACtB,IAQIr+D,EAPA68D,EAAoBvgE,EADbD,KACoB4I,QAAQi0B,OAD5B78B,KAC0C4I,QAAQ63D,QAAQ,IACjE2B,EAAoBz/D,EAAW69D,GAC/BjwD,EAAUiwD,EAAkB33C,SAASq6B,GAAIr6B,SArL5C,MAsLG/mB,EAASyO,EAAQzO,OACjBugE,EAAuB9xD,EAAQiF,KAAI,WACnC,OAAO7S,EAAW1C,EAAED,MACxB,IAGA,IAAK2D,EAAI,EAAGA,EAAI7B,EAAQ6B,IAChBy4D,EAAc7rD,EAAQ5M,GAAGsI,MAAMm0D,IAC/B7vD,EAAQ5M,GAAGsI,MAAMm0D,GAAStD,EAAcH,EAAyB0F,EAAqB1+D,GAAIy+D,IAG1F7xD,EAAQ5M,GAAGsI,MAAMm0D,GAASrD,EAASsF,EAAqB1+D,GAGpE,EAEAu+D,2BAA4B,SAAS7X,EAAQmX,GACzC,IAQI79D,EARAqF,EAAOhJ,KACPwnD,EAAcvnD,EAAEoqD,GAAQjwC,KAAK8lD,GAC7BoC,EAAsBriE,EAAE+I,EAAKJ,SAASigB,SAASo6B,EAAQkd,EAAQnd,GAAOn6B,SAASq6B,GAAIr6B,SAAS7f,EAAKjI,QAAQ8C,KAAK8X,KAAKwkD,IAClHlnD,QAAO,WAEJ,OAAQhZ,EADGD,MACKoa,KAAK8lD,KAAa1Y,GADvBxnD,OAC+CqqD,CAC9D,IACAvoD,EAASwgE,EAAoBxgE,OAGjC,IAAK6B,EAAI,EAAGA,EAAI7B,EAAQ6B,IACpBqF,EAAKi5D,cAAcK,EAAoB3+D,GAAI69D,EAEnD,EAEAS,cAAe,SAAS5X,EAAQmX,GAC5B,IAAIe,EAAoBtiE,EAAED,KAAK4I,QAAQi0B,OAAS78B,KAAK4I,QAAQ63D,QAAQ,IACjErE,EAAc/R,EAAOp+C,MAAMm0D,IAC3B/V,EAAOp+C,MAAMm0D,GAAStD,EAAcH,EAAyB6E,EAAU7+D,EAAW4/D,KAGlFlY,EAAOp+C,MAAMm0D,GAASrD,EAASyE,EAEvC,EAEAW,uBAAwB,SAAS3a,EAAaia,EAA4BC,EAAoBc,GAC1F,IAMI7+D,EANAqF,EAAOhJ,KACPyiE,EAAkBxiE,EAAE+I,EAAKJ,SAASigB,SAASo6B,EAAQkd,EAAQnd,GAAOn6B,SAASq6B,GAAIr6B,SAAS7f,EAAKjI,QAAQ8C,KAAK8X,KAAKwkD,IAC9GlnD,QAAO,WACJ,OAAQiQ,SAASjpB,EAAED,MAAMoa,KAAK8lD,GAAS,MAAS1Y,EAAc,CAClE,IACA1lD,EAAS2gE,EAAgB3gE,OAG7B,IAAK6B,EAAI,EAAGA,EAAI7B,EAAQ6B,IACpBqF,EAAK05D,sBAAsBD,EAAgB9+D,GAAI89D,EAA4BC,EAAoBc,EAEvG,EAEAE,sBAAuB,SAASC,EAAgBlB,EAA4BC,EAAoBc,GAC5F,IAEIhB,EADAt2C,EADOlrB,KACIe,QAAQmqB,IAGvBs2C,EAAWlF,EAAU,CACjBjpD,MAAOouD,EAA6Be,EACpCt3C,IAAKA,EACLE,IAAK00C,EAAI4B,EAAqBD,EAA6Bv2C,KAPpDlrB,KAUNiiE,cAAcU,EAAgBnB,EACvC,IAGJx1C,EAAeC,OAAS,SAAShjB,GAC7Bk0D,EAAqBlxC,OAAOhjB,EAAQ,CAChCxF,KAAM,iBACNqF,KAAMkjB,EACNqxC,eAAgBn1C,GAExB,EAEA8D,EAAeJ,QAAU,SAAS3iB,GAC9Bk0D,EAAqBvxC,QAAQ3iB,EAAQ,CACjCo0D,eAAgBn1C,GAExB,EAEA1nB,EAAOuG,EAAQ,CACXilB,eAAgBA,GAGvB,CA1SD,CA0SG9pB,OAAOvB,OAEV,SAAUA,EAAOsB,GACb,IACI69D,EADO59D,OAAOkrB,KACH0yC,IAEX7/D,EAAIU,EAAM0uB,OACV7uB,EAASP,EAAEO,OAEXuG,EAASpG,EAAM0B,GAAG4G,OAClBk0D,EAAuBp2D,EAAOo2D,qBAC9Bd,EAAgBt1D,EAAOs1D,cACvBI,EAAoBJ,EAAcI,kBAClCH,EAAYD,EAAcC,UAC1BK,EAA2BN,EAAcM,yBACzCP,EAAgBC,EAAcD,cAC9BU,EAAgBT,EAAcS,cAC9BC,EAAWV,EAAcU,SACzBl6D,EAAclC,EAAMmC,aAEpBolB,EAAK,0BACL63C,EAAsB,sBAEtBC,EAAsB,sBAEtBC,EAAO,OACP/c,EAAK,KACLD,EAAQ,QACRD,EAAQ,QAGR4f,EAAS,SAET92C,EAAcqxC,EAAqB38D,OAAO,CAC1CO,QAAS,CACL8C,KAAM,CAACq/C,GACPh4B,IAAK,GACLoyC,YAAa,KACbD,eAAgBn1C,EAChBs1C,KAAK,EACLC,OAAQ,CACJC,cAAe,MACfvvD,MAAO,EACPC,OAAQ,GACRwrB,WAAY,CACR6jC,OAAQsC,EACRxoC,OAAQyoC,GAEZ/4C,SACI,kGACqB84C,EADrB,0DAG6BC,EAH7B,+BAUZ9B,qBAAsB,SAASH,EAAc1zD,GACzC,IACIw4D,EADO7iE,KACae,QAAQ08D,OAAOmF,GACnCtC,EAAevC,EAAan9C,SAASnC,IAAM5b,EAAYk7D,GACvDwC,EAAgBl2D,EAAEi7C,QAAUrlD,EAAE89D,EAAa,GAAG7qC,eAAe/U,YAEjE,OAAKoiD,EAAiBD,EAAeuC,GAAmBtC,EAAiBD,EAAeuC,CAM5F,EAEAxE,wBAAyB,SAAS3gC,GAC9B,IACI38B,EADOf,KACQe,QACf8hE,EAAe9hE,EAAQ08D,OAAOmF,GAC9BtF,EAAcr9D,EAAEc,EAAQu8D,aACxBoD,EAAkBpD,EAAYv5C,GAAGk8C,GAAQ,EAAI3C,EAAYn/C,YACzDwiD,EAAmBrD,EAAYv5C,GAAGk8C,GAAQ,EAAIt/D,EAAM6kD,WAAW8X,GAC/DuD,EAAiB9/D,EAAQy8D,IAAMf,EAAkBa,EAAY,IAAM,EAEnEwF,EAAgBplC,EAAI9c,SAASpC,MACR8+C,EAAY18C,SAASpC,KAAOrB,WAAWmgD,EAAYjrD,IAAI,qBACxD8K,WAAWugB,EAAIrrB,IAAI,eACvC0wD,EAAerlC,EAAI9c,SAASnC,KACP6+C,EAAY18C,SAASnC,IAAMtB,WAAWmgD,EAAYjrD,IAAI,oBACvD8K,WAAWugB,EAAIrrB,IAAI,cACvC5P,EAAU9B,EAAM4B,QAAQE,QAExB1B,EAAQy8D,MAAQ/6D,EAAQ2nB,SAAY3nB,EAAQwqD,QAAUxqD,EAAQiuB,SAAW,MACzEiwC,IAAuC,GAjBhC3gE,KAoBNi+D,aAAa5rD,IAAI,CAClBoM,IAAKskD,EAAelgE,EAAY66B,GAAOgjC,EAAmBmC,EAAe,EACzErkD,KAAMskD,GAAiBnC,EAAmBE,GAC1C9xD,SAAU,YAElB,EAEAuvD,0BAA2B,WACvB,IAAIt1D,EAAOhJ,KACPuiE,EAAoBtiE,EAAE+I,EAAKJ,QAAQi0B,OAAS7zB,EAAKJ,QAAQ63D,QAAQ,IAErEz3D,EAAKi1D,aAAa5rD,IAAI,CAClBlE,MAAOo0D,EAAkBp0D,QACzBC,OAAQpF,EAAKjI,QAAQ08D,OAAOmF,IAEpC,EAEAxD,4BAA6B,SAAS/0D,GAClC,IAAIrB,EAAOhJ,KACPe,EAAUiI,EAAKjI,QACfmqB,EAAMnqB,EAAQmqB,IACd81C,EAAY/gE,EAAE+I,EAAKJ,SAASigB,SAASm6B,GACrCie,EAAYhhE,EAAE+I,EAAKJ,SAASigB,SAASo6B,GACrC+f,EAAuBhC,EAAUl/D,OAAS,EAAIk/D,EAAYC,EAC1DhD,EAAeh+D,EAAE+I,EAAKi1D,cACtBvgC,EAAMz9B,EAAEoK,EAAE2zD,eAAe3hD,KAAKtb,EAAQ08D,OAAOC,eAC7CuF,EAAOhjE,EAAEy9B,GACT4/B,EAAcr9D,EAAEc,EAAQu8D,aACxBoD,EAAkBpD,EAAYv5C,GAAGk8C,GAAQ,EAAI3C,EAAYn/C,YACzD+kD,EAAiBF,EAAqBpiD,SAASnC,KAC1B6+C,EAAY18C,SAASnC,IAAMtB,WAAWmgD,EAAYjrD,IAAI,oBACvD8K,WAAW6lD,EAAqB3wD,IAAI,cAExD0wD,EAAeE,EAAKriD,SAASnC,KACZ6+C,EAAY18C,SAASnC,IAAMtB,WAAWmgD,EAAYjrD,IAAI,oBACvD8K,WAAW8lD,EAAK5wD,IAAI,cAEpC8wD,EAAwBlF,EAAar9C,SAASnC,KAC7B2O,KAAKhC,IAAI,EAAIkyC,EAAY18C,SAASnC,KAAOtB,WAAWmgD,EAAYjrD,IAAI,oBACrE8K,WAAW8gD,EAAa5rD,IAAI,cAE5CkvD,EAAejF,EAAU,CACzBjpD,MAAO8vD,EAAwBzC,EAAkBr2D,EAAEkxD,EAAEj2B,MACrDpa,IAAK63C,EAAerC,EAAkBx1C,EACtCE,IAAK83C,EAAiBrgE,EAAYm+D,GAAan+D,EAAYo+D,GAAaP,EAAkB3/D,EAAQ08D,OAAOmF,GAAU13C,IAGvH+yC,EAAa5rD,IAAI,CAAEoM,IAAK8iD,GAC5B,EAEA12D,OAAQ,SAASR,GACb,IAAIrB,EAAOhJ,KACPe,EAAUiI,EAAKjI,QACf28B,EAAMz9B,EAAEoK,EAAE2zD,eAAe3hD,KAAKtb,EAAQ08D,OAAOC,eAC7C0F,EAAmBvgE,EAAY5C,EAAEy9B,IACjC90B,EAAU3I,EAAE+I,EAAKJ,SACjBy6D,EAAqBxgE,EAAY+F,GACjCo4D,EAAYp4D,EAAQigB,SAASm6B,GAC7BsgB,EAAkBtC,EAAUl/D,OAAS,EAAIk/D,EAAU5yD,SAAW,EAE9Dm1D,EADY36D,EAAQigB,SAASo6B,GACD70C,SAC5Bo1D,EAAqB9lC,EAAIzxB,MAAM22D,GAC/Ba,EAAenH,EAAU,CACzBjpD,MAAO+vD,EAAmB/4D,EAAEkxD,EAAEuG,aAC9B52C,IAAKnqB,EAAQmqB,IACbE,IAAK00C,EAAIwD,EAAkBC,EAAkBxiE,EAAQmqB,OAGzDliB,EAAK06D,yBACLhmC,EAAIzxB,MAAM22D,GAAU7F,EAAS0G,GAC7Bz6D,EAAK26D,gBAAgBN,GAAsBI,EAAeL,IAEtDhH,EAAcoH,IAEdx6D,EAAK46D,6BAEb,EAEAF,uBAAwB,WACpB,IAMI//D,EALA6M,EAAOvQ,EADAD,KACO4I,SAASigB,SAASo6B,EAhJhC,IAgJgDD,GAAOn6B,SAASq6B,GAChEphD,EAAS0O,EAAK1O,OACd+hE,EAAqBrzD,EAAKgF,KAAI,WAC9B,OAAO3S,EAAY5C,EAAED,MACzB,IAGA,IAAK2D,EAAI,EAAGA,EAAI7B,EAAQ6B,IACpB6M,EAAK7M,GAAGsI,MAAM22D,GAAU7F,EAAS8G,EAAmBlgE,GAE5D,EAEAigE,4BAA6B,WACzB,IAUIjgE,EAVAqF,EAAOhJ,KACPghE,EAAY/gE,EAAE+I,EAAKJ,SAASigB,SAASm6B,GACrCsgB,EAAkBtC,EAAUl/D,OAAS,EAAIk/D,EAAU5yD,SAAW,EAE9Dm1D,EADYtjE,EAAE+I,EAAKJ,SAASigB,SAASo6B,GACT70C,SAC5BoC,EAAOvQ,EAAE+I,EAAKJ,SAASigB,SAASm6B,EAlKhC,IAkKgDC,GAAOp6B,SAASq6B,GAChEphD,EAAS0O,EAAK1O,OACd+hE,EAAqBrzD,EAAKgF,KAAI,WAC9B,OAAO3S,EAAY5C,EAAED,MACzB,IAGA,IAAK2D,EAAI,EAAGA,EAAI7B,EAAQ6B,IACpB6M,EAAK7M,GAAGsI,MAAM22D,GAAU9F,EAAcH,EAAyBkH,EAAmBlgE,GAAI2/D,EAAkBC,GAEhH,EAEAI,gBAAiB,SAASG,GACtB,IAAIl7D,EAAU5I,KAAK4I,QAEfwzD,EAAcxzD,EAAQqD,MAAM22D,IAC5Bh6D,EAAQqD,MAAM22D,GAAU9F,EAAcH,EAAyBmH,EAAW7jE,EAAE2I,GAAS+U,SAASvP,WAG9FxF,EAAQqD,MAAM22D,GAAU7F,EAAS+G,EAEzC,IAGJh4C,EAAYG,OAAS,SAAShjB,GAC1Bk0D,EAAqBlxC,OAAOhjB,EAAQ,CAChCxF,KAAM,cACNqF,KAAMgjB,EACNuxC,eAAgBn1C,GAExB,EAEA4D,EAAYF,QAAU,SAAS3iB,GAC3Bk0D,EAAqBvxC,QAAQ3iB,EAAQ,CACjCo0D,eAAgBn1C,GAExB,EAEA1nB,EAAOuG,EAAQ,CACX+kB,YAAaA,GAGpB,CAxOD,CAwOG5pB,OAAOvB,OAEV,SAAUA,EAAOsB,GACb,IAAIhC,EAAIU,EAAM0uB,OACV7uB,EAASP,EAAEO,OACX+sB,EAAOttB,EAAEstB,KAETxmB,EAASpG,EAAM0B,GAAG4G,OAClB9G,EAAQxB,EAAMwB,MACd4hE,EAAYpjE,EAAM0B,GAAG0hE,UACrBljE,EAAaF,EAAME,WACnB47D,EAAoB11D,EAAOs1D,cAAcI,kBACzC95D,EAAahC,EAAMiC,YACnBC,EAAclC,EAAMmC,aAEpBolB,EAAK,kCACL63C,EAAsB,0BAEtBiE,EAAa,YACbC,EAAO,OACPC,EAAW,UACXC,EAAc,aACdC,EAAa,YACbC,EAAY,WAKZC,EAAO,OACPC,EAAQ,QACRC,EAAY,YACZC,EAAY,YACZC,EAAQ,QACRC,EAAY,YACZC,EAAY,YACZC,EAAO,OAIPC,EAAsBjkE,EAAWL,OAAO,CACxCM,KAAM,SAASC,GACX,IAAIiI,EAAOhJ,KAEXa,EAAWG,GAAGF,KAAKG,KAAK+H,GAExBA,EAAKjI,QAAUP,EAAO,CAAC,EAAGwI,EAAKjI,QAASA,GACxCiI,EAAKJ,QAAU3I,EAAE+I,EAAKjI,QAAQkmB,UAAUhK,SAASjU,EAAKjI,QAAQkc,UAAU,GAExEjU,EAAKo0D,uBACLp0D,EAAK+7D,aACL/7D,EAAKg8D,iBACLh8D,EAAKi8D,2BACLj8D,EAAKk8D,wBAELjlE,EAAE+I,EAAKJ,SAASyT,KA5BZ,QA4BwBrT,EAAKjI,QAAQokE,iBAC7C,EAEA5xD,QAAS,WACL,IAAIvK,EAAOhJ,KAEXC,EAAE+I,EAAKJ,SAASmV,IAAImK,GAAI5Q,SACxBtO,EAAKJ,QAAU,KAEfI,EAAKo8D,oBAELp8D,EAAKgQ,QACT,EAEAjY,QAAS,CACLkc,SAAU,KACVsZ,UAAWouC,EACXQ,iBAAkB,KAClB3H,KAAK,EACLv2C,SACI,sGACqB84C,EADrB,kBAKR5+D,OAAQ,CACJ6iE,EACAC,EACAC,EACAE,EACAC,GAGJ/5C,KAAM,WACFtqB,KAAKqlE,cACT,EAEAA,aAAc,WACV,IACIt2D,EADO/O,KACSslE,qBAAqBC,cAEzCtlE,EAHWD,KAGJ4I,SAASyJ,IAAI,CAChBoM,IAAK1P,EAAS0P,IACdD,KAAMzP,EAASyP,KACfzP,SAAU,YAElB,EAEAquD,qBAAsB,WAClB,IAAIp0D,EAAOhJ,KAEXC,EAAE+I,EAAKJ,SACFkb,GAAGsgD,EAAal8C,EAAIlf,EAAKw8D,aAAaj8D,KAAKP,IAC3C8a,GAAGugD,EAAYn8C,EAAIlf,EAAKy8D,YAAYl8D,KAAKP,GAClD,EAEAw8D,aAAc,WACVxlE,KAAK2B,QAAQyiE,EACjB,EAEAqB,YAAa,WACTzlE,KAAK2B,QAAQ0iE,EACjB,EAEAU,WAAY,WAER9kE,EADWD,KACJ4I,SAASigB,SAnFd,IAmF6Bk3C,GAAqB5lD,SAAS,YADlDna,KACqEe,QAAQw1B,UAC5F,EAEA0uC,yBAA0B,WACtB,IAAIj8D,EAAOhJ,KACPe,EAAUiI,EAAKjI,QAEnBiI,EAAKs8D,qBAAuBI,EAA0Bz5C,OAAO,CACzDxoB,KAAM1C,EAAQw1B,UACdknC,OAAQz0D,EAAKJ,QACbu8D,iBAAkBpkE,EAAQokE,iBAC1B7H,YAAav8D,EAAQu8D,YACrBE,IAAKz8D,EAAQy8D,KAErB,EAEAwH,eAAgB,WACZ,IAAIh8D,EAAOhJ,KACP4I,EAAUI,EAAKJ,SAEfI,EAAK28D,YAAe/8D,IAIxBI,EAAK28D,WAAa,IAAI5B,EAAUn7D,EAAS,CACrCg9D,UAAW58D,EAAK68D,aAAat8D,KAAKP,GAClC88D,KAAM98D,EAAK+8D,QAAQx8D,KAAKP,GACxB0b,QAAS1b,EAAKg9D,WAAWz8D,KAAKP,KAEtC,EAEA68D,aAAc,WACV7lE,KAAK2B,QAAQqiE,EACjB,EAEA+B,QAAS,SAAS17D,GACd,IAAIrB,EAAOhJ,KAEXgJ,EAAKrH,QAAQsiE,EAAMj7D,EAAKi9D,kBAAkBC,gBAAgB,CACtDC,OAAQ97D,EAAEmqB,EAAE8Q,MACZ8gC,OAAQ/7D,EAAEkxD,EAAEj2B,MACZu8B,cAAex3D,EAAEmqB,EAAEstC,aACnBuE,cAAeh8D,EAAEkxD,EAAEuG,gBAGnB94D,EAAKjI,QAAQkI,QACbD,EAAKjI,QAAQkI,OAAOsB,yBAE5B,EAEAy7D,WAAY,WACRhmE,KAAK2B,QAAQuiE,EACjB,EAEAkB,kBAAmB,WACf,IAAIp8D,EAAOhJ,KAEPgJ,EAAK28D,aACL38D,EAAK28D,WAAWpyD,UAChBvK,EAAK28D,WAAa,KAE1B,EAEAT,sBAAuB,WACRllE,KAENimE,kBAAoBK,EAAuBr6C,OAAO,CACnDxoB,KAHOzD,KAGIe,QAAQw1B,WAE3B,IAGAgwC,EAAkBpkE,EAAM3B,OAAO,CAC/BM,KAAM,WACFd,KAAKwmE,OAAS,EAClB,EAEAC,SAAU,SAAShjE,EAAMqF,GACrB9I,KAAKwmE,OAAOplE,KAAK,CACbqC,KAAMA,EACNqF,KAAMA,GAEd,EAEAmjB,OAAQ,SAASlrB,GACb,IAGIi6B,EACAsG,EACA39B,EALAqY,EAAQhc,KAAKwmE,OACbE,EAAc1qD,EAAMla,OACpB2B,EAAO1C,EAAQ0C,KAAO1C,EAAQ0C,KAAKmD,cAAgB,GAKvD,IAAKjD,EAAI,EAAGA,EAAI+iE,EAAa/iE,IAGzB,IAFA29B,EAAOtlB,EAAMrY,IAEJF,KAAKmD,gBAAkBnD,EAAM,CAClCu3B,EAAQsG,EACR,KACJ,CAGJ,GAAItG,EACA,OAAO,IAAIA,EAAMlyB,KAAK/H,EAE9B,IAGA4lE,EAA6BJ,EAAgB/lE,OAAO,CAAC,GACzDmmE,EAA2BphD,QAAU,IAAIohD,EAEzC,IAAIjB,EAA4BvjE,EAAM3B,OAAO,CACzCM,KAAM,SAASC,GACAf,KACNe,QAAUP,EAAO,CAAC,EADZR,KACoBe,QAASA,EAC5C,EAEAA,QAAS,CACL08D,OAAQ,KACR78C,OAAQujD,EACRgB,iBAAkB,KAClB7H,YAAa,KACbE,KAAK,GAGT+H,YAAa,WACT,IAAIv8D,EAAOhJ,KAEP+O,EAAW/F,EAAK49D,oBAChBC,EAAuB79D,EAAK89D,kBAAkB/3D,GAGlD,OAF2B/F,EAAK+9D,kBAAkBF,EAGtD,EAEAD,kBAAmBr5C,EAEnBu5C,kBAAmB,SAAS/3D,GACxB,IAAIhO,EAAUf,KAAKe,QACf08D,EAASx9D,EAAEc,EAAQ08D,QAEvB,OAAI18D,EAAQ6f,SAAWujD,EACZ,CACH1lD,IAAK1P,EAAS0P,IAAO5b,EAAY46D,GAAU,EAC3Cj/C,KAAMzP,EAASyP,KAAQ7b,EAAW86D,GAAU,GAI7C1uD,CACX,EAEAg4D,kBAAmB,SAASh4D,GACxB,IAIIi4D,EAJAjmE,EAAUf,KAAKe,QACfu8D,EAAcr9D,EAAEc,EAAQu8D,aACxBuD,EAAiB9/D,EAAQy8D,IAAMf,EAAkBa,EAAY,IAAM,EACnE76D,EAAU9B,EAAM4B,QAAQE,QAG5B,OAAK66D,EAAYv5C,GA5Pd,QAyQIhV,GAZHi4D,EAAWrmE,EAAM6kD,WAAW8X,IAAgB,EAExCv8D,EAAQy8D,MAAQ/6D,EAAQ2nB,SAAY3nB,EAAQwqD,QAAUxqD,EAAQiuB,SAAW,MACzEs2C,IAAuB,GAGpB,CACHvoD,IAAK1P,EAAS0P,KAAO6+C,EAAYn/C,aAAe,GAChDK,KAAMzP,EAASyP,KAAOwoD,EAAWnG,GAK7C,IAGJ6E,EAA0Bz5C,OAAS,SAASlrB,GACxC,OAAO4lE,EAA2BphD,QAAQ0G,OAAOlrB,EACrD,EAEA,IAAIkmE,EAA0BvB,EAA0BllE,OAAO,CAC3DomE,kBAAmB,WACf,IAAIzB,EAAmBllE,EAAED,KAAKe,QAAQokE,kBAClCvkD,EAASukD,EAAiBp2D,WAC1B8oC,EAAa3uB,SAASi8C,EAAiB9yD,IAAI,cAAe,IAE9D,MAAO,CACHoM,IAAKmC,EAAOnC,IAAO5b,EAAYsiE,GAAoB,EACnD3mD,KAAMoC,EAAOpC,KAAO7b,EAAWwiE,GAAoBttB,EAE3D,IAEJ8uB,EAA2BphD,QAAQkhD,SAASnC,EAAM2C,GAElD,IAAIC,EAA2BxB,EAA0BllE,OAAO,CAC5DomE,kBAAmB,WACf,IAAIzB,EAAmBllE,EAAED,KAAKe,QAAQokE,kBAClCvkD,EAASukD,EAAiBp2D,WAC1B8oC,EAAa3uB,SAASi8C,EAAiB9yD,IAAI,cAAe,IAE9D,MAAO,CACHoM,IAAKmC,EAAOnC,IACZD,KAAMoC,EAAOpC,KAAQ7b,EAAWwiE,GAAoB,EAAKttB,EAEjE,IAEJ8uB,EAA2BphD,QAAQkhD,SAASlC,EAAO2C,GAEnD,IAAIC,EAA+BzB,EAA0BllE,OAAO,CAChEomE,kBAAmB,WACf,IAAIzB,EAAmBllE,EAAED,KAAKe,QAAQokE,kBAClCvkD,EAASukD,EAAiBp2D,WAC1B8oC,EAAa3uB,SAASi8C,EAAiB9yD,IAAI,cAAe,IAE9D,MAAO,CACHoM,IAAKmC,EAAOnC,IACZD,KAAMoC,EAAOpC,KAAO7b,EAAWwiE,GAAoBttB,EAE3D,IAEJ8uB,EAA2BphD,QAAQkhD,SAASjC,EAAW2C,GAEvD,IAAIC,EAA+B1B,EAA0BllE,OAAO,CAChEomE,kBAAmB,WACf,IAAIzB,EAAmBllE,EAAED,KAAKe,QAAQokE,kBAClCvkD,EAASukD,EAAiBp2D,WAC1B8oC,EAAa3uB,SAASi8C,EAAiB9yD,IAAI,cAAe,IAE9D,MAAO,CACHoM,IAAKmC,EAAOnC,IACZD,KAAMoC,EAAOpC,KAAOq5B,EAE5B,IAEJ8uB,EAA2BphD,QAAQkhD,SAAShC,EAAW2C,GAEvD,IAAIC,EAA2B3B,EAA0BllE,OAAO,CAC5DomE,kBAAmB,WACf,IAAIzB,EAAmBllE,EAAED,KAAKe,QAAQokE,kBAClCvkD,EAASukD,EAAiBp2D,WAC1B8oC,EAAa3uB,SAASi8C,EAAiB9yD,IAAI,cAAe,IAE9D,MAAO,CACHoM,IAAKmC,EAAOnC,IAAM5b,EAAYsiE,GAC9B3mD,KAAMoC,EAAOpC,KAAQ7b,EAAWwiE,GAAoB,EAAKttB,EAEjE,IAEJ8uB,EAA2BphD,QAAQkhD,SAAS/B,EAAO2C,GAEnD,IAAIC,EAA+B5B,EAA0BllE,OAAO,CAChEomE,kBAAmB,WACf,IAAIzB,EAAmBllE,EAAED,KAAKe,QAAQokE,kBAClCvkD,EAASukD,EAAiBp2D,WAC1B8oC,EAAa3uB,SAASi8C,EAAiB9yD,IAAI,cAAe,IAE9D,MAAO,CACHoM,IAAKmC,EAAOnC,IAAM5b,EAAYsiE,GAC9B3mD,KAAMoC,EAAOpC,KAAO7b,EAAWwiE,GAAoBttB,EAE3D,IAEJ8uB,EAA2BphD,QAAQkhD,SAAS9B,EAAW2C,GAEvD,IAAIC,EAA+B7B,EAA0BllE,OAAO,CAChEomE,kBAAmB,WACf,IAAIzB,EAAmBllE,EAAED,KAAKe,QAAQokE,kBAClCvkD,EAASukD,EAAiBp2D,WAC1B8oC,EAAa3uB,SAASi8C,EAAiB9yD,IAAI,cAAe,IAE9D,MAAO,CACHoM,IAAKmC,EAAOnC,IAAM5b,EAAYsiE,GAC9B3mD,KAAMoC,EAAOpC,KAAOq5B,EAE5B,IAEJ8uB,EAA2BphD,QAAQkhD,SAAS7B,EAAW2C,GAEvD,IAAIC,EAA0B9B,EAA0BllE,OAAO,CAC3DomE,kBAAmB,WACf,IAAIzB,EAAmBllE,EAAED,KAAKe,QAAQokE,kBAClCvkD,EAASukD,EAAiBp2D,WAC1B8oC,EAAa3uB,SAASi8C,EAAiB9yD,IAAI,cAAe,IAE9D,MAAO,CACHoM,IAAKmC,EAAOnC,IAAO5b,EAAYsiE,GAAoB,EACnD3mD,KAAMoC,EAAOpC,KAAOq5B,EAE5B,IAEJ8uB,EAA2BphD,QAAQkhD,SAAS5B,EAAM2C,GAElD,IAAIC,EAA0BlB,EAAgB/lE,OAAO,CAAC,GACtDinE,EAAwBliD,QAAU,IAAIkiD,EAEtC,IAAInB,EAAyBnkE,EAAM3B,OAAO,CACtCM,KAAM,SAASC,GACAf,KACNe,QAAUP,EAAO,CAAC,EADZR,KACoBe,QAASA,EAC5C,EAEAA,QAAS,CACLolE,OAAQ,CACJuB,WAAY,KACZ9P,SAAU,MAEdwO,OAAQ,CACJsB,WAAY,KACZ9P,SAAU,OAIlBsO,gBAAiB,SAASyB,GACtB,IAAI5mE,EAAUf,KAAKe,QACf6mE,EAAkB7mE,EAAQolE,OAAOuB,WAAa3mE,EAAQolE,OAAOvO,SAC7DiQ,EAAkB9mE,EAAQqlE,OAAOsB,WAAa3mE,EAAQqlE,OAAOxO,SAEjE,MAAO,CACHuO,OAAQwB,EAAOxB,OAASyB,EACxBxB,OAAQuB,EAAOvB,OAASyB,EACxBhG,cAAe8F,EAAO9F,cAAgB+F,EACtCvB,cAAesB,EAAOtB,cAAgBwB,EAE9C,IAGJvB,EAAuBr6C,OAAS,SAASlrB,GACrC,OAAO0mE,EAAwBliD,QAAQ0G,OAAOlrB,EAClD,EAEA,IAAI+mE,EAA6BxB,EAAuB9lE,OAAO,CAC3DO,QAAS,CACLolE,OAAQ,CACJuB,WAAY,EACZ9P,SAAU,GAEdwO,OAAQ,CACJsB,WAAY,EACZ9P,SAAU,MAKlBmQ,EAAuBD,EAA2BtnE,OAAO,CACzDO,QAAS,CACLolE,OAAQ,CACJvO,SAAU,MAItB6P,EAAwBliD,QAAQkhD,SAASnC,EAAMyD,GAE/C,IAAIC,EAAuBF,EAA2BtnE,OAAO,CACzDO,QAAS,CACLolE,OAAQ,CACJvO,UAAY,MAIxB6P,EAAwBliD,QAAQkhD,SAAS5B,EAAMmD,GAE/C,IAAIC,EAA2B3B,EAAuB9lE,OAAO,CACzDO,QAAS,CACLolE,OAAQ,CACJuB,WAAY,EACZ9P,SAAU,GAEdwO,OAAQ,CACJsB,WAAY,EACZ9P,SAAU,MAKlBsQ,EAAwBD,EAAyBznE,OAAO,CACxDO,QAAS,CACLqlE,OAAQ,CACJxO,UAAY,MAIxB6P,EAAwBliD,QAAQkhD,SAASlC,EAAO2D,GAEhD,IAAIC,EAAwBF,EAAyBznE,OAAO,CACxDO,QAAS,CACLqlE,OAAQ,CACJxO,SAAU,MAItB6P,EAAwBliD,QAAQkhD,SAAS/B,EAAOyD,GAEhD,IAAIC,EAAwC9B,EAAuB9lE,OAAO,CACtEO,QAAS,CACLolE,OAAQ,CACJuB,WAAY,EACZ9P,SAAU,GAEdwO,OAAQ,CACJsB,WAAY,EACZ9P,SAAU,MAKlByQ,EAA4BD,EAAsC5nE,OAAO,CACzEO,QAAS,CACLolE,OAAQ,CACJvO,SAAU,GAEdwO,OAAQ,CACJxO,UAAY,MAIxB6P,EAAwBliD,QAAQkhD,SAASjC,EAAW6D,GAEpD,IAAIC,EAA4BF,EAAsC5nE,OAAO,CACzEO,QAAS,CACLolE,OAAQ,CACJvO,UAAY,GAEhBwO,OAAQ,CACJxO,UAAY,MAIxB6P,EAAwBliD,QAAQkhD,SAAShC,EAAW6D,GAEpD,IAAIC,EAA4BH,EAAsC5nE,OAAO,CACzEO,QAAS,CACLolE,OAAQ,CACJvO,SAAU,GAEdwO,OAAQ,CACJxO,SAAU,MAItB6P,EAAwBliD,QAAQkhD,SAAS9B,EAAW4D,GAEpD,IAAIC,EAA4BJ,EAAsC5nE,OAAO,CACzEO,QAAS,CACLolE,OAAQ,CACJvO,UAAY,GAEhBwO,OAAQ,CACJxO,SAAU,MAItB6P,EAAwBliD,QAAQkhD,SAAS7B,EAAW4D,GAEpDhoE,EAAOuG,EAAQ,CACX+9D,oBAAqBA,GAE5B,CA5jBD,CA4jBG5iE,OAAOvB,OAEV,SAAUA,EAAOsB,GACb,IACI+5D,EADS95D,OACKkrB,KACdlC,EAAM8wC,EAAK9wC,IACXE,EAAM4wC,EAAK5wC,IAEXnrB,EAAIU,EAAM0uB,OACVzX,EAAW3X,EAAE2X,SACbpX,EAASP,EAAEO,OAEXiC,EAAU9B,EAAM4B,QAAQE,QACxBsE,EAASpG,EAAM0B,GAAG4G,OAClB9G,EAAQxB,EAAMwB,MACd2iE,EAAsB/9D,EAAO+9D,oBAC7BzI,EAAgBt1D,EAAOs1D,cACvBM,EAA2BN,EAAcM,yBACzCL,EAAYD,EAAcC,UAC1BF,EAAgBC,EAAcD,cAC9BS,EAAWR,EAAcQ,SACzBC,EAAgBT,EAAcS,cAC9BC,EAAWV,EAAcU,SACzBp6D,EAAahC,EAAMiC,YACnBC,EAAclC,EAAMmC,aACpB0R,EAAazN,EAAOyN,WAEpB0T,EAAK,8BACLugD,EAA8B,kCAE9BC,EAAyB,qBAEzB1E,EAAa,YACbC,EAAO,OACPC,EAAW,UACXlH,EAAW,UACX2L,EAAa,YACbzlE,EAAS,SAITu/C,EAAM,KACNQ,EAAQ,QACRD,EAAQ,QACRD,EAAQ,QAER6lB,EAAgB,CAAC,QAAS,OAE1BzI,EAAQ,IACRC,EAAQ,QACRwC,EAAS,SAab,SAASiG,EAAYx1D,GACjB,YAAyB,IAAZ,CACjB,CAEA,IAAIy1D,EAAkB3mE,EAAM3B,OAAO,CAC/BM,KAAM,SAAS8H,EAAS7H,GACpB,IAAIiI,EAAOhJ,KAEXgJ,EAAKjI,QAAUP,EAAO,CAAC,EAAGwI,EAAKjI,QAASA,GACxCiI,EAAK+/D,QAAU,GAGXH,EAAcx/C,QAAQxgB,EAAQoX,WAAa,IAC3ChX,EAAKJ,QAAUA,EAEvB,EAEA2K,QAAS,WACL,IAAIvK,EAAOhJ,KAEXC,EAAE+I,EAAKJ,SAASmV,IAAImK,GACpBlf,EAAKJ,QAAU,KAEf3I,EAAE+I,EAAKjI,QAAQu8D,aAAav/C,IAAIi/C,EAAW90C,GAE3Clf,EAAKggE,uBACT,EAEAjoE,QAAS,CACLkoE,gBAAiB,KACjBzL,KAAK,EACLF,YAAa,KACbhyC,SAAU,GACVhH,UAAW,GACXykD,QAAS,CAAC,CACNxyC,UA3CI,aA4CL,CACCA,UA/CA,SAgDD,CACCA,UAhDI,aAiDL,CACCA,UApDD,QAqDA,CACCA,UAjDI,aAkDL,CACCA,UApDA,SAqDD,CACCA,UApDI,aAqDL,CACCA,UArDD,UAyDP1rB,OAAQ,SAASyjB,GACb,IAAItlB,EAAOhJ,KACP2nE,EAASnnE,EAAO,CAAC,EAAG,CACpB2lE,OAAQ,EACRC,OAAQ,EACRvE,cAAe,EACfwE,cAAe,GAChB/3C,GAEHtlB,EAAKkgE,aAAavB,EAAOxB,OAAQwB,EAAO9F,eACxC74D,EAAKmgE,cAAcxB,EAAOvB,OAAQuB,EAAOtB,eAEzCr9D,EAAKqjB,mBACT,EAEA68C,aAAc,WACV,OAAO,CACX,EAEAC,cAAe,WACX,OAAO,CACX,EAEAC,sBAAuB,SAASC,GAC5B,IAAIrgE,EAAOhJ,KACP4I,EAAU3I,EAAE+I,EAAKJ,SACjB0gE,EAAqBD,EAAUziE,cAC/Bg7D,EAAc54D,EAAKjI,QAAQy8D,KAAQ,EAAK,EACxC7/C,EAAS1d,EAAE+I,EAAKJ,SAAS+U,SACzBoC,EAAgBpC,EAAO,GACvB4rD,EAAkB5rD,EAAO2rD,KACzBE,EAAqB5H,GAAeyH,IAAcjJ,EAAQz/D,EAAM6kD,WAAW7nC,GAAUA,EAAOQ,aAEhG,OAAI4B,GAAiBA,IAAkBnX,EAAQS,QA7G1C,MA6G0D,GACX,KAA5C0W,EAAc9T,MAAMq9D,IAA+BlN,EAAcpzD,EAAKJ,QAAQqD,MAAMq9D,IAI5EC,EAAkBC,EAHnBpvC,IAOHmvC,EAAkBC,CAElC,EAEAn9C,kBAAmB,WACJrsB,KAENypE,qBAFMzpE,KAGNuqD,oBACT,EAEAkf,mBAAoB,WAChB,IAKI9lE,EALAqF,EAAOhJ,KACP+oE,EAAU//D,EAAK+/D,QACfhoE,EAAUiI,EAAKjI,QACf+8D,EAAgB90D,EAAKjI,QAAQgoE,QAC7BjnE,EAASg8D,EAAch8D,OAG3B,KAAIinE,GAAWA,EAAQjnE,OAAS,GAAhC,CAIA,IAAK6B,EAAI,EAAGA,EAAI7B,EAAQ6B,IACpBqF,EAAK+/D,QAAQ3nE,KAAK,IAAI0jE,EAAoBtkE,EAAO,CAC7Cyc,SAAUlc,EAAQkoE,gBAClB9D,iBAAkBn8D,EAAKJ,QACvB00D,YAAav8D,EAAQu8D,YACrBE,IAAKz8D,EAAQy8D,IACbv0D,OAAQD,EAAKjI,QAAQkI,QACtB60D,EAAcn6D,MAGrBqF,EAAK0gE,4BAZL,CAaJ,EAEAV,sBAAuB,WAInB,IAHA,IAAIhgE,EAAOhJ,KACP8B,EAASkH,EAAK+/D,QAAU//D,EAAK+/D,QAAQjnE,OAAS,EAEzC6B,EAAI,EAAGA,EAAI7B,EAAQ6B,IACxBqF,EAAK+/D,QAAQplE,GAAG4P,UAGpBvK,EAAK+/D,QAAU,EACnB,EAEAxe,mBAAoB,WAChB,IAGI5mD,EADA7B,GAFO9B,KACQ+oE,SAAW,IACTjnE,OAGrB,IAAK6B,EAAI,EAAGA,EAAI7B,EAAQ6B,IALb3D,KAMF+oE,QAAQplE,GAAG2mB,MAExB,EAEAo/C,2BAA4B,WACxB,OAAO,CACX,EAEAC,yBAA0B,WACtB,IAAI3gE,EAAOhJ,KACP4I,EAAU3I,EAAE+I,EAAKJ,SAErBA,EAAQuR,SAASuuD,GAEjB1/D,EAAK4gE,sBAAwB/mE,EAAY+F,GACzCI,EAAK6gE,qBAAuBlnE,EAAWiG,GACvCI,EAAKm2D,kBACT,EAEA2K,oBAAqB,SAASz/D,GAC1BrK,KAAK6K,OAAOR,EAChB,EAEA0/D,uBAAwB,WAEpB9pE,EADWD,KACJ4I,SAASqa,YAAYylD,GADjB1oE,KAENq/D,iBACT,EAEAA,gBAAiB,WACbp/D,EAAED,KAAKe,QAAQu8D,aAAav/C,IAAIi/C,EAAW90C,EAC/C,EAEAi3C,iBAAkB,WACdl/D,EAAED,KAAKe,QAAQu8D,aAAax5C,GAAGk5C,EAAW90C,GAAI,SAAS7d,GACnDA,EAAEoW,gBACN,GACJ,IAGAupD,EAAgBlB,EAAgBtoE,OAAO,CACvCkpE,2BAA4B,WACxB,IAGI/lE,EACA85D,EAJAz0D,EAAOhJ,KACP+oE,EAAU//D,EAAK+/D,SAAW,GAC1BjnE,EAASinE,EAAQjnE,OAIrB,IAAK6B,EAAI,EAAGA,EAAI7B,EAAQ6B,KACpB85D,EAASsL,EAAQplE,IACV4F,KAAKy6D,EAAYh7D,EAAK2gE,yBAAyBpgE,KAAKP,IAC3Dy0D,EAAOl0D,KAAK06D,EAAMj7D,EAAK8gE,oBAAoBvgE,KAAKP,IAChDy0D,EAAOl0D,KAAK26D,EAAUl7D,EAAK+gE,uBAAuBxgE,KAAKP,GAE/D,EAEAihE,iBAAkB,WAId,IAHA,IACIz5D,EAAOvQ,EADAD,KACO4I,SAASigB,SAASm6B,EAAQmd,EAAQld,GAAOp6B,SAAS45B,GAE3D9+C,EAAI,EAAGA,EAAI6M,EAAK1O,OAAQ6B,IAC7B,GAA6B,KAAzB6M,EAAK7M,GAAGsI,MAAMmC,QAAiByuD,EAASrsD,EAAK7M,GAAGsI,MAAMmC,QACtD,OAAO,EAIf,OAAO,CACX,EAEA86D,aAAc,SAAS5jC,EAAOw8B,GAC1B,IAMIN,EACA0I,EACAC,EACAC,EATAphE,EAAOhJ,KACP4I,EAAU3I,EAAE+I,EAAKJ,SACjByhE,EAAazhE,EAAQ,GAAGqD,MAAMm0D,GAC9BkK,EAAe3nE,EAAWiG,GAC1B2hE,EAAc3hE,EAAQ+U,SAASxP,QAC/Bod,EAAWviB,EAAKogE,sBAAsBhJ,GAM5B,IAAV96B,IAIAujC,EAAY7/D,EAAK6gE,wBACjB7gE,EAAK6gE,qBAAuBS,GAKhCF,EAAmB9N,EAAU,CACzBjpD,MAAOrK,EAAK6gE,qBAAuB/H,EACnC52C,IAAKliB,EAAKjI,QAAQuqB,SAClBF,IAAKG,IAGL6wC,EAAciO,IAEVC,EAAehlC,EAAQilC,GACvBL,EAAa9+C,EAAIg/C,EAAkBG,GACnCJ,EAAkBj/C,EAAIk/C,EAAkBG,KAGxCL,EAAah/C,EAAIk/C,EAAkBG,GACnCJ,EAAkB/+C,EAAIg/C,EAAkBG,IAG5C/I,EAAW1E,EAAcH,EAAyBuN,EAAYC,KAG9D3I,EAAWzE,EAASqN,GAGxBphE,EAAKwhE,mBAEL5hE,EAAQ,GAAGqD,MAAMm0D,GAASoB,EAC9B,EAEA2H,cAAe,SAAS7jC,EAAOw8B,GAC3B,IAOIgC,EACAoG,EACAC,EACAM,EAVAzhE,EAAOhJ,KACP4I,EAAU3I,EAAE+I,EAAKJ,SACjB8hE,EAAc9hE,EAAQ,GAAGqD,MAAM22D,GAC/B+H,EAAgB9nE,EAAY+F,GAE5BgiE,EADShiE,EAAQ+U,SACKvP,SACtBid,EAAYriB,EAAKogE,sBAAsBxG,GAKvCt+C,EAAYtb,EAAKjI,QAAQujB,UACzBumD,EAAkB7hE,EAAKihE,mBAEb,IAAV3kC,IAIAujC,EAAY7/D,EAAK4gE,yBACjB5gE,EAAK4gE,sBAAwBe,GAKjCF,EAAoBnO,EAAU,CAC1BjpD,MAAOrK,EAAK4gE,sBAAwB9H,EACpC52C,IAAK5G,EACL8G,IAAKC,IAGLw/C,GAAmBvlC,EAAQ,GAE3Bt8B,EAAK46D,8BAGLxH,EAAcsO,IAEVC,EAAgBrlC,EAAQslC,GACxBV,EAAa9+C,EAAIq/C,EAAmBG,GACpCT,EAAkBj/C,EAAIu/C,EAAmBG,KAGzCV,EAAah/C,EAAIu/C,EAAmBG,GACpCT,EAAkB/+C,EAAIq/C,EAAmBG,IAG7C9G,EAAYhH,EAAcH,EAAyBuN,EAAYC,KAG/DrG,EAAY/G,EAAS0N,GAGzB7hE,EAAQ,GAAGqD,MAAM22D,GAAUkB,EAEvB+G,GAAmBvlC,EAAQ,GAE3Bt8B,EAAK06D,yBAEb,EAEA8G,iBAAkB,WACd,IAMI7mE,EALAiF,EAAU3I,EADHD,KACU4I,SACjBmX,EAAgBnX,EAAQ+U,SAAS,GACjCmtD,EAAeliE,EAAQS,QApWtB,MAqWDkH,EAAUu6D,EAAazhE,QAAQo5C,GAAK55B,WACpCkiD,EAAgBx6D,EAAQzO,OAc5B,GAXA,SAA8B8G,GAC1B,IAAIyhE,EAAazhE,EAAQqD,MAAMkC,MAE/B,MAAmB,KAAfk8D,IACOjO,EAAciO,KAGdpqE,EAAE2I,GAASoa,SA3XhB,UA6XV,CAEIgoD,CAAqBpiE,EAAQ,KAAOmX,IAAkB+qD,EAAa,IAAqC,KAA/B/qD,EAAc9T,MAAMm0D,GAC7F,IAAKz8D,EAAI,EAAGA,EAAIonE,EAAepnE,IAC3B4M,EAAQ5M,GAAGsI,MAAMm0D,GAASrD,EAAS98D,EAAEsQ,EAAQ5M,IAAIwK,QAG7D,EAEAy1D,4BAA6B,WACzB,IAUIjgE,EAVAqF,EAAOhJ,KACPghE,EAAY/gE,EAAE+I,EAAKJ,SAASigB,SAASm6B,GACrCsgB,EAAkBtC,EAAUl/D,OAAS,EAAIk/D,EAAU5yD,SAAW,EAE9Dm1D,EADYtjE,EAAE+I,EAAKJ,SAASigB,SAASo6B,GACT70C,SAC5BoC,EAAOvQ,EAAE+I,EAAKJ,SAASigB,SAASm6B,EAAQmd,EAAQld,GAAOp6B,SAAS45B,GAChE3gD,EAAS0O,EAAK1O,OACd+hE,EAAqBrzD,EAAKgF,KAAI,WAC9B,OAAO3S,EAAY5C,EAAED,MACzB,IAGA,IAAK2D,EAAI,EAAGA,EAAI7B,EAAQ6B,IACpB6M,EAAK7M,GAAGsI,MAAM22D,GAAU9F,EAAcH,EAAyBkH,EAAmBlgE,GAAI2/D,EAAkBC,GAEhH,EAEAG,uBAAwB,WACpB,IAMI//D,EALA6M,EAAOvQ,EADAD,KACO4I,SAASigB,SAASm6B,EAAQmd,EAAQld,GAAOp6B,SAAS45B,GAChE3gD,EAAS0O,EAAK1O,OACd+hE,EAAqBrzD,EAAKgF,KAAI,WAC9B,OAAO3S,EAAY5C,EAAED,MACzB,IAGA,IAAK2D,EAAI,EAAGA,EAAI7B,EAAQ6B,IACpB6M,EAAK7M,GAAGsI,MAAM22D,GAAU7F,EAAS8G,EAAmBlgE,GAE5D,IAGAsnE,EAAgBnC,EAAgBtoE,OAAO,CACvCkpE,2BAA4B,WACxB,IAGI/lE,EACA85D,EAJAz0D,EAAOhJ,KACP+oE,EAAU//D,EAAK+/D,SAAW,GAC1BjnE,EAASinE,EAAQjnE,OAIrB,IAAK6B,EAAI,EAAGA,EAAI7B,EAAQ6B,KACpB85D,EAASsL,EAAQplE,IACV4F,KAAKy6D,EAAYh7D,EAAK2gE,yBAAyBpgE,KAAKP,IAE1B,UAA7By0D,EAAO18D,QAAQw1B,WAAsD,UAA7BknC,EAAO18D,QAAQw1B,UACvDknC,EAAOl0D,KAAK06D,EAAMj7D,EAAKkiE,4BAA4B3hE,KAAKP,IACpB,SAA7By0D,EAAO18D,QAAQw1B,WAAqD,SAA7BknC,EAAO18D,QAAQw1B,UAC7DknC,EAAOl0D,KAAK06D,EAAMj7D,EAAKmiE,8BAA8B5hE,KAAKP,IAE1Dy0D,EAAOl0D,KAAK06D,EAAMj7D,EAAKoiE,0BAA0B7hE,KAAKP,IAG1Dy0D,EAAOl0D,KAAK26D,EAAUl7D,EAAK+gE,uBAAuBxgE,KAAKP,GAE/D,EAEAqiE,WAAY,SAAS/8C,GACjB,OAAO9tB,EAAO,CAAC,EAAG,CACd2lE,OAAQ,EACRC,OAAQ,EACRvE,cAAe,EACfwE,cAAe,GAChB/3C,EACP,EAEA48C,4BAA6B,SAAS58C,GAClC,IAAIq5C,EAAS3nE,KAAKqrE,WAAW/8C,GAE7BtuB,KAAKmpE,cAAcxB,EAAOvB,OAAQuB,EAAOtB,eACzCrmE,KAAKqsB,mBACT,EAEA8+C,8BAA+B,SAAS78C,GACpC,IAAIq5C,EAAS3nE,KAAKqrE,WAAW/8C,GAE7BtuB,KAAKkpE,aAAavB,EAAOxB,OAAQwB,EAAO9F,eACxC7hE,KAAKqsB,mBACT,EAEA++C,0BAA2B,SAAS98C,GAChC,IAGIq5C,EAHAz8C,EAAMkC,KAAKlC,IAAIkC,KAAK0yC,IAAIxxC,EAAKuzC,eAAgBz0C,KAAK0yC,IAAIxxC,EAAK+3C,gBAC3DiF,EAAetrE,KAAK6pE,qBACpB0B,EAAgBvrE,KAAK4pE,sBAGrB1+C,IAAQoD,EAAKuzC,eAAiB32C,KAA8B,EAAtBoD,EAAKuzC,eAC3CvzC,EAAK+3C,cAAgB/3C,EAAKuzC,cAAgB0J,EAAgBD,EAC1Dh9C,EAAK83C,OAAS93C,EAAK63C,QACZj7C,IAAQoD,EAAK+3C,eAAiBn7C,KAA8B,EAAtBoD,EAAK+3C,gBAClD/3C,EAAKuzC,cAAgBvzC,EAAK+3C,cAAgBiF,EAAeC,EACzDj9C,EAAK63C,OAAS73C,EAAK83C,QAGvBuB,EAAS3nE,KAAKqrE,WAAW/8C,GAEzBtuB,KAAKkpE,aAAavB,EAAOxB,OAAQwB,EAAO9F,eACxC7hE,KAAKmpE,cAAcxB,EAAOvB,OAAQuB,EAAOtB,eAEzCrmE,KAAKqsB,mBACT,EAEA68C,aAAc,SAAS5jC,EAAOw8B,GAC1B,IAGIN,EACA4I,EAJAphE,EAAOhJ,KACP4I,EAAU3I,EAAE+I,EAAKJ,SACjB0hE,EAAe3nE,EAAWiG,GAIhB,IAAV08B,IAIAujC,EAAY7/D,EAAK6gE,wBACjB7gE,EAAK6gE,qBAAuBS,GAKhCF,EAAmB9N,EAAU,CACzBjpD,MAAOrK,EAAK6gE,qBAAuB/H,EACnC52C,IAAKliB,EAAKjI,QAAQuqB,SAClBF,IAAKpiB,EAAKogE,sBAAsBhJ,KAGpCoB,EAAWzE,EAASqN,GACpBxhE,EAAQ,GAAGqD,MAAMm0D,GAASoB,EAC1B54D,EAAQwR,KAAKgmD,EAAOhzC,KAAKi4B,MAAM+kB,IACnC,EAEAjB,cAAe,SAAS7jC,EAAOw8B,GAC3B,IAGIgC,EACA2G,EAJAzhE,EAAOhJ,KACP4I,EAAU3I,EAAE+I,EAAKJ,SACjB+hE,EAAgB9nE,EAAY+F,GAIlB,IAAV08B,IAIAujC,EAAY7/D,EAAK4gE,yBACjB5gE,EAAK4gE,sBAAwBe,GAKjCF,EAAoBnO,EAAU,CAC1BjpD,MAAOrK,EAAK4gE,sBAAwB9H,EACpC52C,IAAKliB,EAAKjI,QAAQujB,UAClB8G,IAAK8S,OAAOstC,mBAGhB1H,EAAY/G,EAAS0N,GACrB7hE,EAAQ,GAAGqD,MAAM22D,GAAUkB,EAC3Bl7D,EAAQwR,KAAKwoD,EAAQx1C,KAAKi4B,MAAMolB,IACpC,IAGJ,MAAM9+C,EAAyBxpB,EAAM3B,OAAO,CACxCyrB,OAAQ,SAAShjB,GACb,IAAI3J,EAAUU,KAEdC,EAAEgJ,EAAO8L,MACJ+O,GAAG,YAAcoE,GAAI,WAClB,IAAIL,EAAQrT,EAAWqT,MAAM5e,EAAOqM,YAChCm2D,GAAS,EAEb5jD,EAAMgW,SAAQ,SAASpN,GACG,QAAlBA,EAAKzQ,WACLyrD,GAAS,EAEjB,IAEIA,GAAU5jD,EAAM/lB,OAAS,GACzBmH,EAAOkjB,gBAAgB68C,uBAE/B,IACCllD,GA/iBF,OA+iBYoE,GAAI,WACXxI,YAAW,WACP,IAAIgqB,EAAQl1B,EAAWk1B,MAAMzgC,EAAOqM,YAEhCo0B,IACAzgC,EAAOkjB,gBAAgB68C,wBACvB//D,EAAOkjB,gBAAgBvjB,QAAU8gC,EACjCzgC,EAAOkjB,gBAAgBE,oBAE/B,GACJ,IACCvI,GAAG6kD,EAAazgD,EAAI66B,EAAQod,EAnjB/B,OAmjB4C,SAAS91D,GAC/C,IAAIqhE,EAAcrhE,EAAEuU,OAChB+sD,EAAqBthE,EAAE2zD,cACvB7xC,EAAkBljB,EAAOkjB,gBACzBvjB,EAAUujB,EAAkBA,EAAgBvjB,QAAU,KAE1D,GAAIujB,GACA,GAAIvjB,GAAW+iE,IAAuB/iE,EAAS,CAC3C,GAAIgP,EAAS+zD,EAAoB/iE,IAAYA,IAAY8iE,GAAe9zD,EAAShP,EAAS8iE,GAGtF,OAGI9iE,IAAY8iE,IACZziE,EAAOyiB,0BACPpsB,EAAQqgE,cAAc12D,EAAQ0iE,GAG1C,OAGArsE,EAAQqgE,cAAc12D,EAAQ0iE,GAGlC1iE,EAAOqY,2BACX,IACCwC,GAAG6kD,EAAazgD,GAAI,SAAS7d,GAC1B,IAAI8hB,EAAkBljB,EAAOkjB,gBACzBvjB,EAAUujB,EAAkBA,EAAgBvjB,QAAU,KACtDgW,EAASvU,EAAEuU,OACXgtD,EAAwB3rE,EAAE2e,GAAQoE,SAASylD,IAAgCxoE,EAAE2e,GAAQiG,QAlkB/F,IAkkB6G4jD,GAA6B3mE,OAAS,GAEzIqqB,GAAmBvjB,IAAYgW,GAAWhH,EAAShP,EAASgW,IAAYgtD,GACxE3iE,EAAOyiB,yBAEf,GACR,EAEAE,QAAS,SAAS3iB,GACdhJ,EAAEgJ,EAAO8L,MAAMgJ,IAAImK,EACvB,EAEAy3C,cAAe,SAAS12D,EAAQL,GAIvBnG,EAAQ8b,OACLte,EAAE2I,GAASmb,GAAGg/B,GACd95C,EAAOkjB,gBAAkBljB,EAAO4iE,cAAgB,IAAI7B,EAAcphE,EAAS,CACvEqgE,gBAAiBhgE,EAAO8L,KACxByoD,IAAK78D,EAAM4B,QAAQ+Y,MAAMrS,EAAOL,SAChC00D,YAAar0D,EAAO8L,KACpB9L,OAAQA,IAELhJ,EAAE2I,GAASmb,GA1mBxB,SA2mBM9a,EAAOkjB,gBAAkB,IAAI8+C,EAAcriE,EAAS,CAChDqgE,gBAAiBhgE,EAAO8L,KACxByoD,IAAK78D,EAAM4B,QAAQ+Y,MAAMrS,EAAOL,SAChC00D,YAAar0D,EAAO8L,KACpB9L,OAAQA,KAIZA,EAAOijB,iCACPjjB,EAAO+P,OAAO9V,EAAQ+F,EAAOijB,gCAC7BjjB,EAAOM,KAAKrG,EAAQ+F,EAAOijB,iCAGvC,IAGJP,EAAuBpG,QAAU,IAAIoG,EAErCnrB,EAAOuG,EAAQ,CACXijE,cAAeA,EACfiB,cAAeA,EACfnC,gBAAiBA,EACjBn9C,uBAAwBA,GAG/B,CA/qBD,CA+qBGzpB,OAAOvB,OAEV,SAAUV,EAAGgC,GAEb,IAAItB,EAAQuB,OAAOvB,MACfoG,EAASpG,EAAM0B,GAAG4G,OAClB3F,EAAcyD,EAAOzD,YACrBkR,EAAazN,EAAOyN,WACpBtL,EAAMnC,EAAOoC,IACb9I,EAAeiD,EAAYjD,aAC3BF,EAAU4G,EAAO5G,QAEjBojD,EAAoB,IAAIx8C,EAAOqvC,kBAAkB,CAAC,CAAEvyC,KAAM,CAAC,YAC3DioE,EAAoB,IAAI/kE,EAAOqvC,kBAAkB,CAAC,CAAEvyC,KAAM,CAAC,KAAK,SAChEkoE,EAAS,eAKTvpB,EAAQ,QACRwpB,EAAY,YACZ5oB,EAAK,KACLD,EAAK,KAKLqB,EAAqBrkD,EAAQK,OAAO,CACpCmU,KAAM,WACF,IAAIi5B,EAAM5tC,KACNiJ,EAAS2kC,EAAI3kC,OACb4L,EAAQ+4B,EAAI/4B,MAAQ+4B,EAAIZ,YACxBi/B,EAAoBr+B,EAAI7sC,QAAQmrE,gBAChCC,EAAgBv+B,EAAIw+B,aAAgBx+B,EAAI7sC,QAAQ0jD,eAA6CxiD,EAA5B2rC,EAAIy+B,eAAex3D,GACpFy3D,EAAgB1+B,EAAI2+B,oBAAsBJ,EAAgBv+B,EAAI4+B,eAAe33D,GAAS5S,EACtFlB,EAAU,CACVwjB,SAAS,EACTtZ,SAAUhC,EAAOlI,QAAQkK,SACzBwhE,cAAe7+B,EAAI8+B,cAAcnjE,KAAKqkC,GACtCrS,MAAOqS,EAAI++B,WAAWR,EAAeG,GACrCz5D,cAAe5J,EAAOlI,QAAQ8R,cAC9ByI,MAAO3a,EAAM4B,QAAQ+Y,MAAMrS,EAAOyB,UAGzB,IAAI3D,EAAO6lE,kBAAkB7rE,GACnCqa,KAAK6wD,EAChB,EAEAS,cAAe,SAASrwD,GACpB,IAAIuxB,EAAM5tC,KACV4tC,EAAIX,aAAaW,EAAI/4B,OAEjBwH,IACIuxB,EAAI7sC,QAAQ0jD,eACZ7W,EAAIi/B,YAAYj/B,EAAIk/B,eAAezwD,IAEnCuxB,EAAIm/B,YAAY1wD,EAAMuxB,EAAIw+B,aAAcx+B,EAAI2+B,qBAGxD,EACAt/B,aAAc,SAASp4B,GACnB,IACI2B,EADMxW,KACIiJ,OAAOvB,SACrBwB,EAAImqB,mBAAmB7c,GAAKN,QAC5B/V,EAAQa,GAAGisC,aAAahsC,KAHdjB,KAGwB6U,EACtC,EACAg4D,YAAa,SAAStxC,GAClB,IAAI1mB,EAAQ7U,KAAK6U,MAEjBA,EAAM0vB,WAAWhJ,GACjB1mB,EAAMiC,UAAS,GACf9W,KAAKiJ,OAAOmM,YAAYP,GAExB7U,KAAKgtE,2BAA2BzxC,EACpC,EACAyxC,2BAA4B,SAASzxC,GAKjC,IAJA,IAAIwzB,EAAe9uD,EAAEs7B,GAAO5d,SAASmsB,WACjCklB,EAAmBD,EAAajtD,OAAS,EACzCmtD,EAAcF,EAAajsC,IAAIksC,GAEF,OAA1BC,EAAYjuC,YAAiD,MAA1BiuC,EAAYjuC,WAA+C,KAA1BiuC,EAAYjuC,YACnFguC,GAAoB,EACpBC,EAAcF,EAAajsC,IAAIksC,GAG/BC,IAAgB1zB,GAChBryB,EAAImU,YAAYnU,EAAIkwB,gBAAgBp5B,KAAKiJ,OAAOvB,SAAU,KAAM6zB,EAExE,EACAwxC,YAAa,SAAS1wD,EAAMkf,EAAO+wC,GAU/B,IATA,IAMIW,EAAiBC,EANjBt/B,EAAM5tC,KACNy8B,EAAYx8B,EAAEs7B,EAAM/qB,MAAMy/B,UAC1Bk9B,EAAY9wD,EAAKrW,gBACjBwK,EAAO28D,EAAU38D,KACjBqsB,EAAQtB,EAAMsB,MACdrd,EAAOouB,EAAIw/B,kBAIRd,EAAcxqE,OAAS,GAC1BwqE,EAAcj9B,MAGlB49B,EAAkBX,EAAcxqE,OAAS0d,EAAK8sD,GAAelgD,WAAa5M,EAAKid,GAE/EmR,EAAIy/B,iBAAiB5wC,EAAWA,EAAU36B,OAAS0O,GAE/CisB,EAAU36B,OAAS0O,GACnBo9B,EAAI0/B,SAASL,EAAiBz8D,EAAMisB,GAGxCvzB,EAAIoyB,kBAAkBC,EAAOywC,GAC7Bp+B,EAAI2/B,eAAe9wC,EAAW0wC,EAAU58D,QAAS+7D,EAAeW,GAChEr/B,EAAI4/B,uBAAuBjyC,EAAO4xC,GAElCD,EAAW7wD,EAAKoxD,eACZnB,EAAc,IACdpjE,EAAIkR,KAAKkyD,EAAc,GAAI,CAAEp9D,IAAKg+D,GAAY,CAAC,GAAGh+D,IAAM,OAExDg+D,IACCA,EAASz8D,eAAiBxQ,EAAEw8B,GAAW5T,WAAa5oB,EAAEqsE,IAAgBnzD,MAAK,SAASxV,EAAGq4B,GACpF4R,EAAI8/B,sBAAsB1xC,EAAMkxC,EAAUC,EAC9C,IAGJv/B,EAAI+/B,eAAepyC,EAAO4xC,GAEtBtwC,EACA+Q,EAAIggC,wBAAwBryC,EAAOlf,GAEnCuxB,EAAIigC,sBAAsBtyC,EAAOlf,GAGrCuxB,EAAIkgC,wBAAwBvyC,EAAO4xC,GACnCjkE,EAAIwyB,mBAAmBH,EAAOywC,EAClC,EACA+B,cAAe,SAASrwC,GACpB,OAAOx0B,EAAI6a,GAAG2Z,EAAI7B,MAAM,GAAIunB,IAAOl6C,EAAI6a,GAAG2Z,EAAItR,WAlH1C,QAmHR,EACA4hD,eAAgB,SAAShyC,GACrB,OAAO9yB,EAAI6a,GAAGiY,EAAMonB,EACxB,EACA6qB,2BAA4B,SAAS1yC,GACjC,IAAIM,EAAQ57B,EAAEs7B,EAAM/qB,MAAMqY,WACtBqlD,EAAa,GACbC,EAAc,SAASC,GACvB,OAAOF,EAAW9kD,QAAQglD,IAAW,CACzC,EAuBA,OArBAvyC,EAAM1iB,MAAK,SAASwb,EAAGqH,GACfA,EAAK9sB,IAAMhG,EAAI6a,GAAGiY,EAAMonB,IACxB8qB,EAAW9sE,KAAK46B,EAAK9sB,GAE7B,MAEsB2sB,EAAM5iB,QAAO,SAAS0b,EAAGqH,GAC3C,IACIqyC,EADAC,EAActyC,EAAKhnB,aApIrB,WAuIF,SAAIs5D,IAAgBplE,EAAI6a,GAAGiY,EAAMonB,KAC7BirB,EAAeC,EAAYjmD,MAAM,OAEbgmD,EAAavsE,OAAS,IAC/BusE,EAAaE,KAAKJ,EAKrC,IAEyBrsE,MAC7B,EACA0sE,aAAc,SAASx0C,EAAO0D,EAAKn2B,GAC/BA,EAAQ8hB,MAAM9hB,IAAU,EAAIA,EAC5B,IAAK,IAAI5D,EAAI,EAASA,EAAIq2B,EAAOr2B,IACtB+5B,EAAI+wC,WAAWlnE,GACjB8d,UAAY,QAEzB,EACAgoD,iBAAkB,SAAS78D,EAAMwpB,GAC7B,IAAK,IAAW0D,EAAKwqB,EAAZvkD,EAAI,EAAmBA,EAAIq2B,EAAOr2B,KAEvCukD,GADAxqB,EAAMltB,EAAK6+B,OACKjjB,YACN8I,YAAYwI,GACjBwqB,EAAU13C,KAAK1O,QAChBoH,EAAIoO,OAAO4wC,EAGvB,EACA4kB,eAAgB,SAASzwD,GACrB,IAKI63C,EALAtmB,EAAM5tC,KACNwW,EAAMo3B,EAAI3kC,OAAOvB,SACjBylE,EAAY9wD,EAAKrW,gBACjBu1B,EAAQryB,EAAI+iB,OAAOzV,EAxKnB,SAyKAolB,EAAW,EAGfgS,EAAI4/B,uBAAuBjyC,EAAO4xC,GAClCv/B,EAAI+/B,eAAepyC,EAAO4xC,GAEtBA,EAAUr8D,YAAcq8D,EAAUr8D,WAAa,IAC/CojD,EAAQ34B,EAAMmzC,cACd9gC,EAAI+gC,iBAAiBtyD,EAAM63C,EAAOt4B,GAAU,GAC5CA,GAAYuxC,EAAUr8D,YAG1B,IAAIqjD,EAAQ54B,EAAMqzC,cAalB,OAZAhhC,EAAI+gC,iBAAiBtyD,EAAM83C,EAAOv4B,GAAU,GAE5C1yB,EAAIoyB,kBAAkBC,EAAOywC,GAEM,QAA/BmB,EAAU0B,iBACV3lE,EAAIozB,iBAAiBf,GACiB,UAA/B4xC,EAAU0B,kBACjBjhC,EAAIkhC,WAAWvzC,EAAO4xC,EAAUr8D,WAAYq8D,EAAUp8D,eAG1D7H,EAAIwyB,mBAAmBH,EAAOywC,GAEvBzwC,CACX,EACAozC,iBAAkB,SAAStyD,EAAM3E,EAAWq3D,EAAcj+D,GAQtD,IAPA,IAO2B4sB,EANvByvC,EAAY9wD,EAAKrW,gBACjBknE,EAAW7wD,EAAKoxD,eAChBl9D,EAAU48D,EAAU58D,QACpBC,EAAOM,EAAaq8D,EAAUr8D,WAAaq8D,EAAU38D,KACrDO,EAAgBo8D,EAAUp8D,cAErB4kC,EAAIo5B,EAAmBp5B,EAAInlC,EAAMmlC,IAAK,CAC3CjY,EAAMhmB,EAAUs3D,YAEhB,IAAK,IAAWhzC,EAAPrH,EAAI,EAASA,EAAIpkB,EAASokB,IAE3BqH,EADAlrB,GAAcC,EAAgB4jB,EACvBjtB,SAASyX,cAAcikC,GAEvB17C,SAASyX,cAAcgkC,GAGlCzlB,EAAIre,YAAY2c,GAChBA,EAAK3W,UAAY,SACb6nD,GAAkB,IAANv3B,GAAiB,IAANhhB,GAAWu4C,EAASh+D,KAC3C8sB,EAAK9sB,GAAKg+D,EAASh+D,IApBrBlP,KAuBE0tE,sBAAsB1xC,EAAMkxC,IAAaA,EAASz8D,gBAAyB,IAANklC,GAAiB,IAANhhB,GAAYu4C,EAAW,CAAC,EAAGC,EAEvH,CACJ,EACAG,SAAU,SAASL,EAAiBz8D,EAAMisB,GAQtC,IAPA,IAKIiB,EAJA9B,EAAW37B,EAAEgtE,GAAiB1lE,QAC9B0nE,EAAchC,EAAgBpxC,MAAM/5B,OACpCotE,EAAe1+D,EAAOisB,EAAU36B,OAChC6b,EAASsvD,EAAgB7gD,WAGtB8iD,GACHxxC,EAAM/f,EAAOqxD,UAAUpzC,EAAW,GAR5B57B,KASFwuE,aAAaS,EAAcvxC,EAAI7B,MAAM/5B,OAAQ47B,GACjDwxC,GAER,EACA3B,eAAgB,SAAS9wC,EAAWlsB,EAAS+7D,EAAeW,GACxD,IAAIr/B,EAAM5tC,KACNwf,EAAOouB,EAAIw/B,kBACX+B,EAAmB3vD,EAAKid,EAAU,GAAGZ,OACrCuzC,EAAkBlxC,OAAOixC,EAAiBn6D,aAAag3D,IAAcmD,EAAiBhzC,QAoB1F,GAlBIizC,EAAkB7+D,GAClBtQ,EAAEw8B,GAAWtjB,MAAK,SAASxV,EAAG+5B,GAI1B,IAHA,IAAI2xC,EAAkB7vD,EAAKke,EAAI7B,OAC3ByzC,EAAapxC,OAAOmxC,EAAgBr6D,aAAag3D,IAAcqD,EAAgBlzC,QAE5EmzC,EAAa/+D,GACZ8+D,EAAgBlzC,SAAWkzC,EAAgBlzC,QAAU,EACrDkzC,EAAgBlzC,SAAW,EAE3BuB,EAAI6xC,YAAY,GAGpBF,EAAkB7vD,EAAKke,EAAI7B,OAC3ByzC,EAAapxC,OAAOmxC,EAAgBr6D,aAAag3D,IAAcqD,EAAgBlzC,OAEvF,IAGAizC,EAAkB7+D,EAAS,CAC3B,IAAIwrB,EAAY97B,EAAEuf,EAAK8sD,IAAkB9sD,EAAKytD,EAAgBpxC,QAAQt0B,QACtEtH,EAAEw8B,GAAWtjB,MAAK,SAASxV,EAAG+5B,GAC1B,IAAI2xC,EAAkB7vD,EAAKke,EAAI7B,OAC/B+R,EAAI4gC,aAAaj+D,EAAU2tB,OAAOmxC,EAAgBr6D,aAAag3D,IAAcqD,EAAgBlzC,QAASuB,EAAK3B,EAAY,EAC3H,GACJ,CACJ,EACAyxC,uBAAwB,SAASjyC,EAAOlf,GACpC,IAAIpQ,EAAQjM,KAAKwvE,eAAenzD,GAChCnT,EAAIkR,KAAKmhB,EAAO,CACZjtB,YAAa+N,EAAK/N,aAAe,KACjCmhE,eAAgBzvE,KAAK0vE,iBAAiBrzD,EAAKozD,iBAAmB,GAC9DE,gBAAiB3vE,KAAK0vE,iBAAiBrzD,EAAKszD,kBAAoB,GAChEC,kBAAmB5vE,KAAK0vE,iBAAiBrzD,EAAKuzD,oBAAsB,GACpEC,iBAAkB7vE,KAAK0vE,iBAAiBrzD,EAAKwzD,mBAAqB,GAClE3zD,UAAWG,EAAKH,WAAa,KAC7BhN,GAAImN,EAAKnN,IAAM,KACfhB,QAASmO,EAAKnO,SAAW,KACzBjC,MAAOA,GAAS,OAEpBhM,EAAEs7B,GAAOphB,SAAS,UACtB,EACAuzD,sBAAuB,SAAS1xC,EAAM3f,EAAMyzD,GACxC,IAAI7jE,EAAQjM,KAAKwvE,eAAenzD,GAChCpQ,EAAM8jE,WAAa/vE,KAAK0vE,iBAAiBrzD,EAAKozD,iBAAmBzvE,KAAK0vE,iBAAiBI,GAAWL,iBAAmB,GACrHxjE,EAAM+jE,YAAchwE,KAAK0vE,iBAAiBrzD,EAAKszD,kBAAoB3vE,KAAK0vE,iBAAiBI,GAAWH,kBAAoB,GACxH1jE,EAAMgkE,cAAgBjwE,KAAK0vE,iBAAiBrzD,EAAKuzD,oBAAsB5vE,KAAK0vE,iBAAiBI,GAAWF,oBAAsB,GAC9H3jE,EAAMikE,aAAelwE,KAAK0vE,iBAAiBrzD,EAAKwzD,mBAAqB7vE,KAAK0vE,iBAAiBI,GAAWD,mBAAqB,GAC3H5jE,EAAMuhD,OAASnxC,EAAKxN,YAAc,KAClC3F,EAAIkR,KAAK4hB,EAAM,CACX/vB,MAAOA,GAAS,KAChBiQ,UAAWG,EAAKH,WAAa,MAErC,EACAyxD,eAAgB,SAASpyC,EAAOlf,GAC5B,GAAIkf,EAAMttB,UAAYoO,EAAK8zD,eACvB50C,EAAM60C,qBACH,GAAI/zD,EAAK8zD,eAAgB,CAC5B,IAAIliE,EAAUstB,EAAM80C,gBACpBpiE,EAAQoX,UAAYhJ,EAAK8zD,eACzB,IAAIpoE,EAAY/H,KAAKswE,kBAAkBj0D,EAAKvN,kBAC5C5F,EAAIkR,KAAKnM,EAAS,CACdhC,MAAO,CACHyrC,UAAW3vC,EAAU2vC,UACrB64B,cAAexoE,EAAUwoE,gBAGrC,CACJ,EACA1C,sBAAuB,SAAStyC,EAAOlf,GACnC,IAGSwf,EAAOG,EAAMr4B,EAAG+hB,EAFrBynD,EAAY9wD,EAAKrW,gBACjBwK,EAAO+qB,EAAM/qB,KAGjB,IAAK7M,EAAI,EAAGA,EAAI6M,EAAK1O,OAAQ6B,IAIzB,IAFAk4B,EADMrrB,EAAK7M,GACCk4B,MAEPnW,EAAI,EAAGA,EAAImW,EAAM/5B,OAAQ4jB,IAC1BsW,EAAOH,EAAMnW,IAVX1lB,KAWOguE,eAAehyC,KAAUr4B,EAAIwpE,EAAUr8D,YAAcq8D,EAAUp8D,cAAgBirB,EAAKhnB,aAAag3D,IACtG9iE,EAAIyvB,UAAUqD,EAAMonB,GAAI,GAZ1BpjD,KAaaguE,eAAehyC,IAASr4B,GAAKwpE,EAAUr8D,YAAcq8D,EAAUp8D,eAAiBirB,EAAKhnB,aAAag3D,IAC7G9iE,EAAIyvB,UAAUqD,EAAMmnB,GAAI,EAIxC,EACAyqB,wBAAyB,SAASryC,EAAOlf,GACrC,IAKIqhB,EAAK1B,EAAMr4B,EALXiqC,EAAM5tC,KACNmtE,EAAY9wD,EAAKrW,gBACjBkuD,EAAQ34B,EAAMsB,MACdjB,EAAW,EACXu4B,EAAQ54B,EAAMklC,QAAQ,GAO1B,GAJKtM,IACDA,EAAQ54B,EAAMqzC,eAGdzB,EAAUr8D,YAAcq8D,EAAUr8D,WAAa,EAAG,CAKlD,IAJKojD,IACDA,EAAQ34B,EAAMmzC,eAGXxa,EAAM1jD,KAAK1O,OAASqrE,EAAUr8D,YACjCojD,EAAM70C,YAAY80C,EAAM3jD,KAAK,IAGjC,KAAO0jD,EAAM1jD,KAAK1O,OAASqrE,EAAUr8D,YACjCqjD,EAAM90C,YAAY60C,EAAM1jD,KAAK,IAGjCo9B,EAAI4iC,mBAAmBtc,EAC3B,MAAO,GAAIA,EAAO,CACd,KAAOA,EAAM1jD,KAAK1O,OAAS,GACvBqyD,EAAM90C,YAAY60C,EAAM1jD,KAAK0jD,EAAM1jD,KAAK1O,OAAS,IAGrDy5B,EAAMk1C,aACV,CAEA,KAAOtc,EAAM3jD,KAAK1O,OAAS85B,GAAU,CAEjC,IADA8B,EAAMy2B,EAAM3jD,KAAKorB,GACZj4B,EAAI,EAAGA,EAAI+5B,EAAI7B,MAAM/5B,OAAQ6B,IAC9Bq4B,EAAO0B,EAAI7B,MAAMl4B,GACbiqC,EAAIogC,eAAehyC,IAASmxC,EAAUp8D,eAAiBirB,EAAKhnB,aAAag3D,GACzE9iE,EAAIyvB,UAAUqD,EAAMmnB,GAAI,IAChBvV,EAAIogC,eAAehyC,IAASmxC,EAAUp8D,cAAgBirB,EAAKhnB,aAAag3D,IAChF9iE,EAAIyvB,UAAUqD,EAAMonB,GAAI,GAGhCxnB,GAAY,CAChB,CACJ,EACAkyC,wBAAyB,SAASvyC,EAAO4xC,GACrC,IAAIv/B,EAAM5tC,KAEyB,QAA/BmtE,EAAU0B,kBACLjhC,EAAIqgC,2BAA2B1yC,IAChCqS,EAAI8iC,cAAcn1C,GAEtBryB,EAAIozB,iBAAiBf,IACiB,UAA/B4xC,EAAU0B,kBACbjhC,EAAIqgC,2BAA2B1yC,IAC/BqS,EAAI+iC,kBAAkBp1C,GAE1BqS,EAAIkhC,WAAWvzC,EAAO4xC,EAAUr8D,WAAYq8D,EAAUp8D,gBAElD68B,EAAIqgC,2BAA2B1yC,GAC/BqS,EAAI+iC,kBAAkBp1C,GAEtBqS,EAAI8iC,cAAcn1C,EAG9B,EACAuzC,WAAY,SAASvzC,EAAOzqB,EAAY8/D,GACpC,IACIjtE,EAAG+hB,EAAGgY,EAAK1B,EADXxrB,EAAO+qB,EAAM/qB,KAGjB,IAAK7M,EAAI,EAAGA,EAAI6M,EAAK1O,OAAQ6B,IAGzB,IAFA+5B,EAAMltB,EAAK7M,GAEN+hB,EAAI,EAAGA,EAAIgY,EAAI7B,MAAM/5B,OAAQ4jB,IAC9BsW,EAAO0B,EAAI7B,MAAMnW,GAEb/hB,EAAImN,EACJkrB,EAAK5c,aAAaojC,EApa5B,OAqaiBxmB,EAAKhnB,aAAag3D,GAAa4E,GACtC50C,EAAK5c,aAAaojC,EAra5B,MAyaN,EACAkuB,cAAe,SAASn1C,GACpBt7B,EAAEs7B,GAAO5wB,KAAKy4C,GAAI11B,WAAW80B,GAC7BviD,EAAEs7B,GAAO5wB,KA7aP,OA6aiB2M,SACnBrX,EAAEs7B,GAAO5wB,KA5aF,YA4aiB2M,QAC5B,EACAq5D,kBAAmB,SAASp1C,GACxBt7B,EAAEs7B,GAAO5wB,KAAK,UAAU+iB,WAAW,aACvC,EACA8iD,mBAAoB,SAAStc,GACfj0D,EAAEi0D,GAAOvpD,KAAK,MAIpBwO,MAHW,SAAS5R,EAAOy0B,GAC3B9yB,EAAIyvB,UAAUqD,EAAMonB,GAAI,EAC5B,GAEJ,EACAosB,eAAgB,SAASnzD,GACrB,IACItU,EAAY/H,KAAKswE,kBAAkBj0D,EAAKtU,WACxC8oE,EAAa,aAAcx0D,EAAQA,EAAK7M,SAAW,GAAK,SAAY,KAExE,OAAOvP,EAAEO,OAAO,CACZ2N,MAAOkO,EAAKlO,MAAQkO,EAAKlO,MAAQkO,EAAKy0D,UAAY,KAClD1iE,OAAQiO,EAAKjO,OAASiO,EAAKjO,OAASiO,EAAK00D,WAAa,KACtDr5B,UAAW3vC,EAAU2vC,UACrB64B,cAAexoE,EAAUwoE,cACzBS,gBAAiB30D,EAAK40D,SAAW,GACjC5hE,YAAagN,EAAKhN,YAClBD,YAAaiN,EAAKjN,YAClBE,YAAa+M,EAAK/M,aAAe,GACjC4hE,eAAgB70D,EAAK9M,gBAAkB,WAAa,KACpDshE,WAAYA,GAdL7wE,KAeHmxE,sBAAsB90D,EAAKtN,UACvC,EACAuhE,kBAAmB,SAASvoE,GACxB,IAAI2vC,EAAY,GACZ64B,EAAgB74B,EAEpB,GAAI3vC,EACA,IAA+B,GAA3BA,EAAUqhB,QAAQ,KAAY,CAC9B,IAAIshC,EAAQ3iD,EAAUsgB,MAAM,KAC5BqvB,EAAYgT,EAAM,GAClB6lB,EAAgB7lB,EAAM,EAC1B,MACIhT,EAAY3vC,EAGpB,MAAO,CAAE2vC,UAAWA,EAAW64B,cAAeA,EAClD,EACAY,sBAAuB,SAASpiE,GAC5B,OAAKA,EAIE,CAAE8oC,WAAwB,QAAZ9oC,EAAqB,OAAS,GAAI+oC,YAAyB,SAAZ/oC,EAAsB,OAAS,IAHxF,CAAC,CAIhB,EACA49D,WAAY,SAASpxC,EAAO+wC,GACxB,IAAK/wC,EACD,MAAO,CAAEv1B,gBAAiB,CAAC,EAAGsmE,cAAe,IAGjD,IAAI1+B,EAAM5tC,KACNoxE,EAAS71C,EAAMtvB,MACfuE,EAAO+qB,EAAM/qB,KACbvC,EAAUstB,EAAMttB,QAChBojE,EAAepxE,EAAEgO,EAAUA,EAAQ0kB,WAAU,GAAQ1wB,GACzDovE,EAAa1mE,KAAK,aAAa2M,SAE/B,IAAItT,EAAWu3B,EAAMrf,UAGrBlY,GADAA,GADAA,EAAWA,EAAS2C,QAAQ,wBAAyB,KACjCA,QAAQ,cAAe,MACvBA,QAAQ,YAAa,IAEzC,IAKIkoE,EALAyC,EAAiB1jC,EAAI2jC,cAAch2C,GAAO,GAC1Ci2C,EAAgB5jC,EAAI6jC,kBAAkBl2C,GACtCzsB,EAAmBb,EAAU2/B,EAAI2jC,cAActjE,GAAWhM,EAC1Dm8B,EAAqBl1B,EAAI4zB,uBAAuBvB,GAIhDszC,EADAjhC,EAAIqgC,2BAA2B1yC,GACZ,MACZt7B,EAAEs7B,GAAO5wB,KAAK,aAAa7I,OAAS,EACxB,QAEA,OAGvBoH,EAAIoyB,kBAAkBC,EAAOywC,GAC7B,IAAIoD,EAAkBlmE,EAAI60B,oBAAoBxC,GAC1Cm2C,EAAwBxoE,EAAIi1B,0BAA0B5C,EAAO6C,GACjEl1B,EAAIwyB,mBAAmBH,EAAOywC,GAE9B,IAAI2F,EAAY,CACZ3rE,gBAAiB,CACbmI,MAAOijE,EAAOjjE,OAASotB,EAAMptB,MAAQgP,WAAWi0D,EAAOjjE,OAASotB,EAAMptB,OAAS,KAC/EC,OAAQgjE,EAAOhjE,QAAUmtB,EAAMntB,OAAS+O,WAAWi0D,EAAOhjE,QAAUmtB,EAAMntB,QAAU,KACpFmC,QAAS6+D,EACT5+D,KAAMA,EAAK1O,OACXgvE,UAAWljC,EAAIgkC,SAASR,EAAOjjE,OAC/B4iE,WAAYnjC,EAAIgkC,SAASR,EAAOhjE,QAChCE,YAAaitB,EAAMjtB,YACnBmhE,eAAgBl0C,EAAMk0C,eACtBE,gBAAiBp0C,EAAMo0C,gBACvBC,kBAAmBr0C,EAAMq0C,kBACzBC,iBAAkBt0C,EAAMs0C,iBACxB9nE,UAAWupE,EAAe55B,UAC1B3oC,SAAUyiE,EACVP,QAASG,EAAOJ,iBAAmBz1C,EAAM01C,QACzC/0D,UAAWlY,EACXkL,GAAIqsB,EAAMrsB,GACVG,YAAa+hE,EAAO/hE,aAAeksB,EAAMpsB,OACzCG,YAAa8hE,EAAO9hE,YACpBF,YAAagiE,EAAOhiE,aAAe,GACnCG,kBAAmB6hE,EAAOF,eAC1BhjE,QAASqtB,EAAMrtB,QACfiiE,eAAgBliE,EAAUojE,EAAan6D,OAAS,GAChDpI,iBAAkBb,GAAWa,EAAiB4oC,UAAY5oC,EAAiB4oC,UAAY,IAAM5oC,EAAiByhE,cAAgB,GAC9Hz/D,WAAYstB,EACZrtB,cAAe2gE,EACf7C,iBAAkBA,GAEtBvC,cAAe,IAKnB,OAFAqF,EAAUnhE,KAAOo9B,EAAIikC,eAAerhE,EAAM87D,EAAeqF,GAElDA,CACX,EACAE,eAAgB,SAASrhE,EAAM87D,EAAeqF,GAG1C,IAFA,IACoBG,EAASj2C,EAAOG,EAAM+1C,EAAtC11D,EAAO,GACF1Y,EAAI,EAAGA,EAAI6M,EAAK1O,OAAQ6B,IAAK,CAElCmuE,EAAU,CAAEj2C,MAAO,IACnBA,EAFMrrB,EAAK7M,GAECk4B,MACZxf,EAAKjb,KAAK0wE,GACV,IAAK,IAAIpsD,EAAI,EAAGA,EAAImW,EAAM/5B,OAAQ4jB,IAC9BsW,EAAOH,EAAMnW,GACbqsD,EATE/xE,KASagyE,UAAUh2C,IACc,GAAnC/7B,EAAE2D,QAAQo4B,EAAMswC,IAChBqF,EAAUrF,cAAclrE,KAAK2wE,GAEjCD,EAAQj2C,MAAMz6B,KAAK2wE,EAE3B,CACA,OAAO11D,CACX,EACA21D,UAAW,SAASh2C,GAChB,IAAI4R,EAAM5tC,KACNiyE,EAASj2C,EAAK/vB,MACdlE,EAAY6lC,EAAI2jC,cAAcv1C,GAuBlC,OAtBAj0B,EAAYA,EAAU2vC,UAAY3vC,EAAU2vC,UAAY,IAAM3vC,EAAUwoE,cAAgB,GAE7E,CACPpiE,MAAO8jE,EAAO9jE,OAAS6tB,EAAK7tB,MAAQgP,WAAW80D,EAAO9jE,OAAS6tB,EAAK7tB,OAAS,KAC7EC,OAAQ6jE,EAAO7jE,QAAU4tB,EAAK5tB,OAAS+O,WAAW80D,EAAO7jE,QAAU4tB,EAAK5tB,QAAU,KAClF0iE,UAAWljC,EAAIgkC,SAASK,EAAO9jE,OAC/B4iE,WAAYnjC,EAAIgkC,SAASK,EAAO7jE,QAChCS,WAAYojE,EAAOzkB,OACnBiiB,eAAgBwC,EAAOlC,WACvBJ,gBAAiBsC,EAAOjC,YACxBJ,kBAAmBqC,EAAOhC,cAC1BJ,iBAAkBoC,EAAO/B,aACzBnoE,UAAWA,EACXkpE,QAASgB,EAAOjB,iBAAmBh1C,EAAKi1C,QACxC/0D,UAAW8f,EAAK9f,UAChBhN,GAAI8sB,EAAK9sB,GACTG,YAAa4iE,EAAO5iE,aAAe2sB,EAAK7sB,OACxCG,YAAa2iE,EAAO3iE,YACpBF,YAAa6iE,EAAO7iE,YACpBI,SAA+B,UAArByiE,EAAOpB,WAIzB,EACAY,kBAAmB,SAAS7oE,GACxB,IAAIqD,EAAQrD,EAAQqD,MACpB,MAAwB,QAApBA,EAAM4rC,YAA6C,QAArB5rC,EAAM6rC,YAC7B,SAGa,QAApB7rC,EAAM4rC,WACC,QAGJ,MACX,EACA05B,cAAe,SAAS3oE,EAASspE,GAC7B,IAAIjmE,EAAQrD,EAAQqD,MAChBkmE,EAASlmE,EAAMyrC,WAAa9uC,EAAQ8hD,OAAS,GACjD,GAAIwnB,EACA,MAAO,CAAEx6B,UAAWy6B,GAExB,IAAIC,EAASnmE,EAAMskE,eAAiB3nE,EAAQwpE,QAAU,GACtD,OAAID,GAAUC,EACH,CAAE16B,UAAWy6B,EAAQ5B,cAAe6B,IAE1CD,GAAUC,EACJ,CAAE16B,UAAW,OAAQ64B,cAAe6B,GAE3CD,IAAWC,EACJ,CAAE16B,UAAWy6B,EAAQ5B,cAAe,OAExC,CAAE74B,UAAW,GAAI64B,cAAe,GAC3C,EACAqB,SAAU,SAASv+D,GACf,IAAIy0C,GAAQz0C,GAAS,IAAI2nB,MAAM+wC,GAC/B,OAAOjkB,EAAOA,EAAK,GAAK,IAC5B,EACAukB,eAAgB,SAASx3D,GACrB,IAAIgT,EAAQ3e,EAAI4e,SAAStT,EAAWqT,MAAMhT,GAAQ3L,EAAI6e,iBAAiB,GACvE,OAAOw7B,EAAkB3U,aAAa/mB,GAAO,EACjD,EACA2kD,eAAgB,SAAS33D,GACrB,IAAIgT,EAAQ3e,EAAI4e,SAAStT,EAAWqT,MAAMhT,GAAQ3L,EAAI6e,iBAAiB,GACvE,OAAO+jD,EAAkBl9B,aAAa/mB,EAC1C,EACAulD,kBAAmB,SAASiF,GACxB,OAAOA,EAAWA,EAAWvwE,OAAS,EAC1C,EACA4tE,iBAAkB,SAASr8D,GACvB,OAAQgW,MAAMhW,IAA2B,iBAAVA,EAA6B,KAARA,CACxD,IAGAkxC,EAAkBx9C,EAAOzG,KAAKE,OAAO,CACrCa,QAAS,SAASN,GAGd,OAFAA,EAAQ0jD,eAAiBzkD,KAAKe,QAAQ0jD,eACtC1jD,EAAQmrE,kBAAoBlsE,KAAKe,QAAQmrE,gBAClC,IAAI1nB,EAAmBzjD,EAClC,IAGAuxE,EAAsB/tB,EAAgB/jD,OAAO,CAC7C8I,OAAQ,SAASjH,EAAIwlB,GACjB,IAAIrP,GAAe+qC,EAAkB/qC,YAAYqP,GAC7Cjd,EAAUvI,EAAGgH,QAAQ,cAAc8kC,mBAEnB,IAAhB31B,EACA5N,EAAQoP,KAAK3X,GAEbuI,EAAQ0f,KAAKjoB,EAErB,IAGAkwE,EAA0BhuB,EAAgB/jD,OAAO,CACjD8I,OAAQ,SAASjH,EAAIwlB,GACjB,IAAIrP,GAAe+qC,EAAkB/qC,YAAYqP,GAC7Cjd,EAAUvI,EAAGgH,QAAQ,cAAc8kC,mBAEnB,IAAhB31B,EACA5N,EAAQoP,KAAK3X,GAEbuI,EAAQ0f,KAAKjoB,EAErB,IAGJ1B,EAAM0B,GAAG4G,OAAOs7C,gBAAkBA,EAClC5jD,EAAM0B,GAAG4G,OAAOu7C,mBAAqBA,EAErCnkD,EAAa,kBAAmB,IAAIiyE,EAAoB,CAAEjxE,QAASmjD,EAAoBC,gBAAgB,EAAO7iB,SAAU,qBACxHvhC,EAAa,sBAAuB,IAAIkyE,EAAwB,CAAElxE,QAASmjD,EAAoB0nB,iBAAiB,EAAMznB,gBAAgB,EAAO7iB,SAAU,wBAEtJ,CAjsBD,CAisBG1/B,OAAOvB,MAAM0uB,QAEhB,SAAUpvB,EAAGgC,GAEb,MAAMuwE,EAAmB,eACnBC,EAAkB,yBAClBC,EAAM,IAEZ,IAAI/xE,EAAQuB,OAAOvB,MACf+T,EAAS/T,EAAMqhC,WACf2wC,EAAyB,CAAEjvE,OAAQ,IAAKwnB,IAAK,GAC7C7c,EAAQ,CAAC,KAAM,MACfukE,EAAe,CAAC,QAAS,SAAU,SAAU,SAAU,SAAU,QAAS,QAAS,SAAU,UAAW,UAAW,OAAQ,UAI3HC,EAA2B,CAC3B92D,WAAY,CAAC,CACTG,UAAW,YACX7I,MAAO,QACR,CACC6I,UAAW,mBACX7I,MAAO,WAEX0+B,cAAe,YACfD,eAAgB,QAChB7qB,SAAU,EAAG/K,YAAWkL,aAAczmB,EAAM0B,GAAG0B,KAAK9D,EAAE,gBAAgByU,EAAO0S,eAAsB,CAAErjB,KAAM2Q,EAAOwH,KAAgBxH,EAAO0S,GACzIi4B,cAAe,EAAGnjC,YAAWkL,aAAczmB,EAAM0B,GAAG0B,KAAK9D,EAAE,gBAAgByU,EAAO0S,eAAsB,CAAErjB,KAAM2Q,EAAOwH,GAAYojC,UAAW,gBAAmB5qC,EAAO0S,IAGxK0rD,EAAgC,CAChC/2D,WAAY,CAAC,CACTG,UAAW,uBACX7I,MAAO,QACR,CACC6I,UAAW,wBACX7I,MAAO,UACR,CACC6I,UAAW,qBACX7I,MAAO,UAEX0+B,cAAe,YACfD,eAAgB,QAChB7qB,SAAU,EAAG/K,YAAWkL,aAAczmB,EAAM0B,GAAG0B,KAAK9D,EAAE,gBAAgByU,EAAO0S,eAAsB,CAAErjB,KAAM2Q,EAAOwH,KAAgBxH,EAAO0S,GACzIi4B,cAAe,EAAGnjC,YAAWkL,aAAczmB,EAAM0B,GAAG0B,KAAK9D,EAAE,gBAAgByU,EAAO0S,eAAsB,CAAErjB,KAAM2Q,EAAOwH,GAAYojC,UAAW,kBAAqB5qC,EAAO0S,IAG1K2rD,EAAiC,CACjCh3D,WAAY,CAAC,CACTG,UAAW,0BACX7I,MAAO,QACR,CACC6I,UAAW,4BACX7I,MAAO,UACR,CACC6I,UAAW,2BACX7I,MAAO,SACR,CACC6I,UAAW,eACX7I,MAAO,KAEX0+B,cAAe,YACfD,eAAgB,QAChB7qB,SAAU,EAAG/K,YAAWkL,aAAczmB,EAAM0B,GAAG0B,KAAK9D,EAAE,gBAAgByU,EAAO0S,eAAsB,CAAErjB,KAAM2Q,EAAOwH,KAAgBxH,EAAO0S,GACzIi4B,cAAe,EAAGnjC,YAAWkL,aAAczmB,EAAM0B,GAAG0B,KAAK9D,EAAE,gBAAgByU,EAAO0S,eAAsB,CAAErjB,KAAM2Q,EAAOwH,GAAYojC,UAAW,kBAAqB5qC,EAAO0S,IAG1K4rD,EAAgC,CAChCj3D,WAAY,CAAC,CACTG,UAAW,uBACX7I,MAAO,YACR,CACC6I,UAAW,yBACX7I,MAAO,cACR,CACC6I,UAAW,wBACX7I,MAAO,aACR,CACC6I,UAAW,0BACX7I,MAAO,eACR,CACC6I,UAAW,4BACX7I,MAAO,iBACR,CACC6I,UAAW,2BACX7I,MAAO,gBACR,CACC6I,UAAW,0BACX7I,MAAO,eACR,CACC6I,UAAW,4BACX7I,MAAO,iBACR,CACC6I,UAAW,2BACX7I,MAAO,gBACR,CACC6I,UAAW,eACX7I,MAAO,KAEX0+B,cAAe,YACfD,eAAgB,QAChB7qB,SAAU,EAAG/K,YAAWkL,aAAczmB,EAAM0B,GAAG0B,KAAK9D,EAAE,gBAAgByU,EAAO0S,eAAsB,CAAErjB,KAAM2Q,EAAOwH,KAAgBxH,EAAO0S,GACzIi4B,cAAe,EAAGnjC,YAAWkL,aAAczmB,EAAM0B,GAAG0B,KAAK9D,EAAE,gBAAgByU,EAAO0S,eAAsB,CAAErjB,KAAM2Q,EAAOwH,GAAYojC,UAAW,kBAAqB5qC,EAAO0S,IAG1K6rD,EAAyC,CACzCl3D,WAAY,CAAC,CACTG,UAAW,uBACX7I,MAAO,YACR,CACC6I,UAAW,yBACX7I,MAAO,cACR,CACC6I,UAAW,wBACX7I,MAAO,aACR,CACC6I,UAAW,0BACX7I,MAAO,eACR,CACC6I,UAAW,4BACX7I,MAAO,iBACR,CACC6I,UAAW,2BACX7I,MAAO,gBACR,CACC6I,UAAW,eACX7I,MAAO,KAEX0+B,cAAe,YACfD,eAAgB,QAChB7qB,SAAU,EAAG/K,YAAWkL,aAAczmB,EAAM0B,GAAG0B,KAAK9D,EAAE,gBAAgByU,EAAO0S,eAAsB,CAAErjB,KAAM2Q,EAAOwH,KAClHmjC,cAAe,EAAGnjC,YAAWkL,aAAczmB,EAAM0B,GAAG0B,KAAK9D,EAAE,gBAAgByU,EAAO0S,eAAsB,CAAErjB,KAAM2Q,EAAOwH,GAAYojC,UAAW,mBAG9I4zB,EAAgC,EAAGjoE,cAIvB,0KAAyBA,EAAS6C,oBAC1B7C,EAAS+C,8LAMjBrN,EAAMuW,KAAKs2B,aAAa,2DAA4DviC,EAASyC,2BAA6B,CACtH3J,KAAM,QACF0pC,WAAY,YAEhB9sC,EAAMuW,KAAKs2B,aAAa,8DAA+DviC,EAAS0C,+BAAiC,CAC7H5J,KAAM,mBAf1B,eAmBIovE,EAA+B,EAAGloE,cACtC,8MAGYtK,EAAMuW,KAAKs2B,aAAa,2DAA4DviC,EAASyC,2BAA6B,CACtH3J,KAAM,QACF0pC,WAAY,YAEhB9sC,EAAMuW,KAAKs2B,aAAa,8DAA+DviC,EAAS0C,+BAAiC,CAC7H5J,KAAM,mBAR1B,eAaA6oE,EAAoBjsE,EAAMwB,MAAM3B,OAAO,CACvCM,KAAM,SAASC,GACXf,KAAKe,QAAUA,CACnB,EACAqyE,2BAA4B,WACxB,IAIIvlC,EAJA7kC,EAAOhJ,KACPe,EAAUiI,EAAKjI,QACf8R,EAAgB9R,EAAQ8R,cACxBi9D,EAAY/uE,EAAQw6B,MAEpBtwB,EAAWlK,EAAQkK,SACnBqwC,EAAO36C,EAAM4B,QAAQE,QAAQ8b,KAEjC,SAAS3C,EAAMvR,GACXA,EAAEoW,iBACFzX,EAAKuK,UACLs6B,EAAOt6B,SACX,CAcA,SAASqnD,EAAavwD,GAClBuR,EAAMvR,GACNtJ,EAAQ0rE,eACZ,CAEA55D,EAAc+I,MAAQg/C,EACtB/nD,EAAcyY,SAAW,IACzBzY,EAAc1E,MAAQ,IACtB0E,EAAcoH,MAAQhP,EAASjF,gBAC/B6M,EAAc0R,QAAUxjB,EAAQwjB,QAUhC,IAAI3b,GARJilC,EAAS5tC,EAAE+I,EAAKqqE,gBAAgBpoE,IAAWgS,SAASvV,SAASqN,MACxDoP,YAAYtR,GACZsH,SAAS,mBACT9Q,QAAQ,aAAamhB,YAAY,QAASzpB,EAAQua,OAAO+kB,MACzD11B,KAAK,gBAAgBmZ,GAAG,SA3B7B,SAAmBzZ,GACfrB,EAAKsqE,yBAAyBxD,GAE9Bl0D,EAAMvR,GAEFrB,EAAK8M,QACL9M,EAAK8M,SAGT/U,EAAQ0rE,cAAcqD,EAC1B,IAiBiDzvC,MAC5C11B,KAAK,mBAAmBmZ,GAAG,QAAS82C,GAAcv6B,MAClDhkB,KAAK,gBAEWzT,QASrB,GARA5I,KAAKuzE,WAAa,CAAC,EACnBvqE,EAAKwqE,uBAAuB5qE,GAC5BI,EAAKyqE,qBAAuBzqE,EAAK0qE,2BAA2B7lC,EAAQ5iC,GACpEjC,EAAK2qE,6BAA+B3qE,EAAK4qE,mCAAmC/lC,EAAQ5iC,GAEpF4iC,EAAOG,SACPH,EAAOzyB,OAEHkgC,EAAM,CACN,IAAIQ,EAAelzC,EAAQS,QAAQ,aAAa+E,SAChDxF,EAAQyJ,IAAI,aAAcypC,EAC9B,CACJ,EACA+3B,0BAA2B,WACvB,IAIIhmC,EAJA7kC,EAAOhJ,KACPe,EAAUiI,EAAKjI,QACf8R,EAAgB9R,EAAQ8R,cACxBi9D,EAAY/uE,EAAQw6B,MAEpBtwB,EAAWlK,EAAQkK,SACnBqwC,EAAO36C,EAAM4B,QAAQE,QAAQ8b,KAEjC,SAAS3C,EAAMvR,GACXA,EAAEoW,iBACFzX,EAAKuK,UACLs6B,EAAOt6B,SACX,CAcA,SAASqnD,EAAavwD,GAClBuR,EAAMvR,GACNtJ,EAAQ0rE,eACZ,CAEA55D,EAAc+I,MAAQg/C,EACtB/nD,EAAcyY,SAAW,IACzBzY,EAAcoH,MAAQhP,EAAShF,oBAC/B4M,EAAc0R,QAAUxjB,EAAQwjB,QAUhC,IAAI3b,GARJilC,EAAS5tC,EAAE+I,EAAKqqE,gBAAgBpoE,EAAUkoE,IAA+Bl2D,SAASvV,SAASqN,MACtFoP,YAAYtR,GACZsH,SAAS,mBACT9Q,QAAQ,aAAamhB,YAAY,QAASzpB,EAAQua,OAAO+kB,MACzD11B,KAAK,gBAAgBmZ,GAAG,SA1B7B,SAAmBzZ,GACfrB,EAAK8qE,wBAAwBhE,GAE7Bl0D,EAAMvR,GAEFrB,EAAK8M,QACL9M,EAAK8M,SAGT/U,EAAQ0rE,cAAcqD,EAC1B,IAgBiDzvC,MAC5C11B,KAAK,mBAAmBmZ,GAAG,QAAS82C,GAAcv6B,MAClDhkB,KAAK,gBAEWzT,QAMrB,GALAI,EAAK+qE,oBAAsB/qE,EAAKgrE,0BAA0BnmC,EAAQ5iC,GAElE4iC,EAAOG,SACPH,EAAOzyB,OAEHkgC,EAAM,CACN,IAAIQ,EAAelzC,EAAQS,QAAQ,aAAa+E,SAChDxF,EAAQyJ,IAAI,aAAcypC,EAC9B,CACJ,EACA1gC,KAAM,SAAS64D,GACNA,EAGDj0E,KAAK6zE,4BAFL7zE,KAAKozE,4BAIb,EAEAI,uBAAwB,SAAS5qE,IACZ5I,KAAKuzE,WAAa,CAAC,GACzBW,SAAWtrE,EAAQ+B,KAAK,wBAAwBwpE,cAAc,CACrEnhE,WAAW,IACZqJ,KAAK,gBACZ,EAEAi3D,yBAA0B,WACtB,IAAItqE,EAAOhJ,KACPqc,EAAOrT,EAAKjI,QAAQw6B,MACxBvyB,EAAKorE,wBAAwB/3D,GAC7BrT,EAAKqrE,gCAAgCh4D,EACzC,EAEAy3D,wBAAyB,WACrB,IACIz3D,EADOrc,KACKe,QAAQw6B,MADbv7B,KAENs0E,uBAAuBj4D,EAChC,EAEA+3D,wBAAyB,SAAStE,GAC9B,IAAIyE,EAAYv0E,KAAKuzE,WAAWgB,UAC5BvuE,EAAkB8pE,EAAU9pE,gBAC5B+rE,EAAWjC,EAAUrC,eAAiBqC,EAAUrC,gBAAkB,CAAC,EACvEznE,EAAgBmI,MAAQomE,EAAUpmE,MAAMkF,QACxCrN,EAAgB8qE,UAAYyD,EAAUzD,UAAUz9D,QAChDrN,EAAgBoI,OAASmmE,EAAUnmE,OAAOiF,QAC1CrN,EAAgBuK,QAAUgkE,EAAUhkE,QAAQ8C,QAC5CrN,EAAgBwK,KAAO+jE,EAAU/jE,KAAK6C,QACtCrN,EAAgB+qE,WAAawD,EAAUxD,WAAW19D,QAClDrN,EAAgBsI,YAAcimE,EAAUjmE,YAAY+E,QACpDrN,EAAgBypE,eAAiB8E,EAAU9E,eAAep8D,QAC1DrN,EAAgB2pE,gBAAkB4E,EAAU5E,gBAAgBt8D,QAC5DrN,EAAgB4pE,kBAAoB2E,EAAU3E,kBAAkBv8D,QAChErN,EAAgB6pE,iBAAmB0E,EAAU1E,iBAAiBx8D,QAC9DrN,EAAgB+B,UAAYwsE,EAAUxsE,UAAUsL,QAChDrN,EAAgB+I,SAAWwlE,EAAUxlE,SAASsE,QAC9CrN,EAAgBirE,QAAUsD,EAAUtD,QAAQ59D,QAC5CrN,EAAgBqJ,YAAcklE,EAAUllE,YAAYgE,QACpDrN,EAAgBsJ,YAAcilE,EAAUjlE,YAAY+D,QACpDrN,EAAgBoJ,YAAcmlE,EAAUnlE,YAAYiE,QACpDrN,EAAgBuJ,gBAAkBglE,EAAUhlE,gBAAgBilE,QAEvDzC,EAAS5jE,QACV4jE,EAASthE,gBAAiB,EAC1BshE,EAAS5jE,MAAQ,IAAM2hE,EAAU9pE,gBAAgBuK,QACjDwhE,EAASjB,UAAY,IAE7B,EAEAwD,uBAAwB,SAAS/4C,GAC7B,IAAIw2C,EAAWx2C,EAAMkyC,eAAiBlyC,EAAMkyC,gBAAkB,CAAC,EAC3DgH,EAAWz0E,KAAKuzE,WAAWkB,SAE/B1C,EAASthE,eAAiBgkE,EAAShkE,eAAe+jE,QAClDzC,EAAS5jE,MAAQsmE,EAAStmE,MAAMkF,QAChC0+D,EAASjB,UAAY2D,EAAS3D,UAAUz9D,QACxC0+D,EAAS3jE,OAASqmE,EAASrmE,OAAOiF,QAClC0+D,EAAShB,WAAa0D,EAAS1D,WAAW19D,QAC1C0+D,EAASnjE,wBAA0B6lE,EAAS7lE,wBAAwB4lE,QACpEzC,EAAStC,eAAiBgF,EAAShF,eAAep8D,QAClD0+D,EAASpC,gBAAkB8E,EAAS9E,gBAAgBt8D,QACpD0+D,EAASnC,kBAAoB6E,EAAS7E,kBAAkBv8D,QACxD0+D,EAASlC,iBAAmB4E,EAAS5E,iBAAiBx8D,QACtD0+D,EAASljE,WAAa4lE,EAAS5lE,WAAWwE,QAC1C0+D,EAAShqE,UAAY0sE,EAAS1sE,UAAUsL,QACxC0+D,EAASd,QAAUwD,EAASxD,QAAQ59D,QACpC0+D,EAAS71D,UAAYu4D,EAASv4D,UAAU7I,QACxC0+D,EAAS7iE,GAAKulE,EAASvlE,GAAGmE,QAC1B0+D,EAAS1iE,YAAcolE,EAASplE,YAAYgE,QAC5C0+D,EAASziE,YAAcmlE,EAASnlE,YAAY+D,QAC5C0+D,EAAS3iE,YAAcqlE,EAASrlE,YAAYiE,QAC5C0+D,EAASviE,SAA6C,QAAlCilE,EAASC,cAAcrhE,QAEtC0+D,EAAS5jE,QACV4jE,EAASthE,gBAAiB,EAC1BshE,EAAS5jE,MAAQ,IAAMotB,EAAMv1B,gBAAgBuK,QAC7CwhE,EAASjB,UAAY,IAE7B,EAEDuD,gCAAiC,SAAS94C,GACrC,IAAIv1B,EAAkBu1B,EAAMv1B,gBACxB2uE,EAAoB30E,KAAKuzE,WAAWoB,kBACxC3uE,EAAgBmqE,eAAiBwE,EAAkBxE,eAAe98D,QAClErN,EAAgB8I,iBAAmB6lE,EAAkB7lE,iBAAiBuE,QACtErN,EAAgBkI,QAAUymE,EAAkBzmE,QAAQmF,QACpDrN,EAAgB6oE,iBAAmB8F,EAAkB9F,iBAAiBx7D,QACtErN,EAAgBkW,UAAYy4D,EAAkBz4D,UAAU7I,QACxDrN,EAAgBkJ,GAAKylE,EAAkBzlE,GAAGmE,QAC1CrN,EAAgB8K,WAAa6jE,EAAkB7jE,WAAWuC,QAC1DrN,EAAgB+K,cAAgB4jE,EAAkB5jE,cAAcsC,OACpE,EACAuhE,SAAU,SAASvmE,EAAOgF,GAClBA,IAAqC,GAA5BpT,EAAE2D,QAAQyP,EAAOhF,IAC1BA,EAAMjN,KAAKiS,EAEnB,EAEAwhE,oBAAqB,SAASjsE,EAASg5B,EAAUvlB,EAAMy4D,EAASC,GAC5D,IAAIj5D,EAAYg5D,EAAQlzC,GAAYh5B,EAAQosE,oBACpCD,EAAW90E,EAAEO,OAAO,CAAC,EAAGmyE,EAAwBoC,GAAYpC,GAC9Dt2D,KAAK,uBACPulB,KAAYvlB,GACZP,EAAUzI,MAAM6V,SAAS7M,EAAKulB,GAAW,IAEjD,EAEAqzC,kBAAmB,SAASrsE,EAASg5B,EAAUvlB,EAAMy4D,EAAS/4D,GAC1D,IAAID,EAAYg5D,EAAQlzC,GAAYh5B,EAAQssE,kBAAkB,CAC1Dn5D,WAAYA,IACbM,KAAK,qBACRrc,KAAKm1E,mBAAmBr5D,EAAWO,EAAMulB,EAC7C,EAEAwzC,yBAA0B,SAASxsE,EAASg5B,EAAUvlB,EAAMy4D,EAAS/4D,GACjE,IAAID,EAAYg5D,EAAQlzC,GAAYh5B,EAAQssE,kBAAkB,CAC1Dn5D,WAAYA,EACZ89B,YAAa75C,KAAKe,QAAQkK,SAASmG,aACpCiL,KAAK,qBACRrc,KAAKm1E,mBAAmBr5D,EAAWO,EAAMulB,EAC7C,EAEAyzC,2BAA4B,SAASzsE,EAASyT,GAC1C,IAAIpR,EAAWjL,KAAKe,QAAQkK,SACxBspE,EAAYv0E,KAAKuzE,WAAWgB,UAC5Bx4D,EAAa+2D,EAA8B/2D,WAC/CA,EAAW,GAAGqL,QAAUnc,EAAS9E,eACjC4V,EAAW,GAAGqL,QAAUnc,EAAS7E,iBACjC2V,EAAW,GAAGqL,QAAUnc,EAAS5E,gBAEjCrG,KAAKs1E,sBAAsB1sE,EAASkqE,EAA+B,WAAYz2D,EAAMk4D,EACzF,EAEAgB,4BAA6B,SAAS3sE,EAASyT,GAC3C,IAAIpR,EAAWjL,KAAKe,QAAQkK,SACxBspE,EAAYv0E,KAAKuzE,WAAWgB,UAC5Bx4D,EAAag3D,EAA+Bh3D,WAChDA,EAAW,GAAGqL,QAAUnc,EAASyE,UACjCqM,EAAW,GAAGqL,QAAUnc,EAAS0E,YACjCoM,EAAW,GAAGqL,QAAUnc,EAAS2E,WACjCmM,EAAW,GAAGqL,QAAUnc,EAASqF,YAEjCtQ,KAAKw1E,uBAAuB5sE,EAASmqE,EAAgC,YAAa12D,EAAMk4D,EAC5F,EAEAkB,2BAA4B,SAAS7sE,EAASyT,GAC1C,IAAIpR,EAAWjL,KAAKe,QAAQkK,SACxBwpE,EAAWz0E,KAAKuzE,WAAWkB,SAC3B14D,EAAai3D,EAA8Bj3D,WAC/CA,EAAW,GAAGqL,QAAUnc,EAAS4E,aACjCkM,EAAW,GAAGqL,QAAUnc,EAAS6E,eACjCiM,EAAW,GAAGqL,QAAUnc,EAAS8E,cACjCgM,EAAW,GAAGqL,QAAUnc,EAAS+E,gBACjC+L,EAAW,GAAGqL,QAAUnc,EAASgF,kBACjC8L,EAAW,GAAGqL,QAAUnc,EAASiF,iBACjC6L,EAAW,GAAGqL,QAAUnc,EAASkF,gBACjC4L,EAAW,GAAGqL,QAAUnc,EAASmF,kBACjC2L,EAAW,GAAGqL,QAAUnc,EAASoF,iBACjC0L,EAAW,GAAGqL,QAAUnc,EAASqF,YAEjCtQ,KAAKw1E,uBAAuB5sE,EAASoqE,EAA+B,YAAa32D,EAAMo4D,EAC3F,EAEAiB,oCAAqC,SAAS9sE,EAASyT,GACnD,IAAIpR,EAAWjL,KAAKe,QAAQkK,SACxB0pE,EAAoB30E,KAAKuzE,WAAWoB,kBACpC54D,EAAak3D,EAAuCl3D,WACxDA,EAAW,GAAGqL,QAAUnc,EAAS4E,aACjCkM,EAAW,GAAGqL,QAAUnc,EAAS6E,eACjCiM,EAAW,GAAGqL,QAAUnc,EAAS8E,cACjCgM,EAAW,GAAGqL,QAAUnc,EAASkF,gBACjC4L,EAAW,GAAGqL,QAAUnc,EAASmF,kBACjC2L,EAAW,GAAGqL,QAAUnc,EAASoF,iBACjC0L,EAAW,GAAGqL,QAAUnc,EAASqF,YAEjCtQ,KAAKw1E,uBAAuB5sE,EAASqqE,EAAwC,mBAAoB52D,EAAMs4D,EAC3G,EACAgB,sBAAuB,SAAS/sE,EAASyT,GACrC,IAAIpR,EAAWjL,KAAKe,QAAQkK,SACxBxH,EAAO,gBACX4Y,EAAKq4D,cAAgBr4D,EAAK7M,SAAW,OAAS,SAE9C,IAAIilE,EAAWz0E,KAAKuzE,WAAWkB,SAC3B14D,EAAa82D,EAAyB92D,WAC1CA,EAAW,GAAGqL,QAAUnc,EAASuE,SACjCuM,EAAW,GAAGqL,QAAUnc,EAASM,UACjC,IAAIuQ,EAAY24D,EAAShxE,GACrBmF,EAAQssE,kBAAkBrC,GAA0Bx2D,KAAK,qBAE7DP,EAAUQ,KAAKnC,SAAS,eACxBna,KAAKm1E,mBAAmBr5D,EAAWO,EAAM5Y,EAC7C,EACA6xE,sBAAuB,SAAS1sE,EAASmsE,EAAUtxE,EAAM4Y,EAAMy4D,GAC3D,IAAIh5D,EAAYg5D,EAAQrxE,GACpBmF,EAAQssE,kBAAkBH,GAAU14D,KAAK,qBAE7CP,EAAUQ,KAAKnC,SAAS,cACxBna,KAAKm1E,mBAAmBr5D,EAAWO,EAAM5Y,EAC7C,EACA+xE,uBAAwB,SAAS5sE,EAASmsE,EAAUtxE,EAAM4Y,EAAMy4D,GAC5D,IAAIh5D,EAAYg5D,EAAQrxE,GACpBmF,EAAQssE,kBAAkBH,GAAU14D,KAAK,qBAE7CP,EAAUQ,KAAKnC,SAAS,WACxBna,KAAKm1E,mBAAmBr5D,EAAWO,EAAM5Y,EAC7C,EACAmyE,yBAA0B,SAAShtE,EAASnF,EAAMsxE,EAAU14D,EAAMy4D,GAC9D,IAAIh5D,EAAYg5D,EAAQrxE,GACpBmF,EAAQssE,kBAAkBH,GAAU14D,KAAK,qBAE7Crc,KAAKm1E,mBAAmBr5D,EAAWO,EAAM5Y,EAC7C,EACA0xE,mBAAoB,SAASr5D,EAAWO,EAAMulB,GACtCA,KAAYvlB,GACZP,EAAUzI,MAAMgJ,EAAKulB,GAE7B,EAEAi0C,iBAAkB,SAASjtE,EAASg5B,EAAUvlB,EAAMy4D,GAChD,IAAIh5D,EAAYg5D,EAAQlzC,GACpBh5B,EAAQktE,iBAAiB,CAAEnuD,SAAS,EAAOouD,aAAa,IAAQ15D,KAAK,oBAErEA,EAAKulB,IACL9lB,EAAUzI,MAAMgJ,EAAKulB,GAE7B,EACAo0C,WAAY,SAASptE,EAASg5B,EAAUvlB,EAAMy4D,EAASC,GACnD,IAAIj5D,EAAYg5D,EAAQlzC,GAAYh5B,EAAQqtE,aAAalB,GAAY,CAAC,GAAG14D,KAAK,gBAC1EulB,KAAYvlB,GACZP,EAAUzI,MAAMgJ,EAAKulB,GAE7B,EAEAs0C,cAAe,SAASttE,EAASg5B,EAAUvlB,EAAMy4D,EAASC,GACtD,IAAIj5D,EAAYg5D,EAAQlzC,GAAYh5B,EAAQutE,cAAcpB,GAAY,CAAC,GAAG14D,KAAK,iBAC3EulB,KAAYvlB,GACZP,EAAU04D,MAAMn4D,EAAKulB,GAE7B,EAEAw0C,cAAe,SAASxtE,EAASg5B,EAAUvlB,EAAMy4D,EAASC,GACtD,IAAIj5D,EAAYg5D,EAAQlzC,GAAYh5B,EAAQytE,cAActB,GAAY,CAAC,GAAG14D,KAAK,iBAC3EulB,KAAYvlB,GACZP,EAAUzI,MAAMgJ,EAAKulB,GAE7B,EAEAruB,QAAS,WACMvT,KACNs2E,mBAAmBt2E,KAAKuzE,mBADlBvzE,KAGCuzE,UAChB,EACA+C,mBAAoB,SAAS/C,GACzB,IAAK,IAAI7iC,KAAU6iC,EACXA,EAAW7iC,GAAQn9B,SACnBggE,EAAW7iC,GAAQn9B,iBAEhBggE,EAAW7iC,EAE1B,EAEA2iC,gBAAiB,SAASpoE,EAAUsrE,GAChC,OAAO51E,EAAMsmB,SAASsvD,GAAkBrD,EAAjCvyE,CAAgE,CAAEsK,SAAUA,GACvF,EAEAurE,oBAAqB,SAASnsE,GAC1B,IAAIosE,EAAWz2E,KAAKuzE,WAAWgB,UAAY,YAAc,WACrD3tD,EAAO5mB,KAAKuzE,WAAWkD,GACvB7nE,GAA2BgY,EAAKhY,wBAAwB4lE,QACxDkC,EAAwB9vD,EAAK6oD,eAC7BkH,EAAsBD,EAAsBrjE,QAC5CujE,EAAyBhwD,EAAK+oD,gBAC9BkH,EAA2BjwD,EAAKgpD,kBAChCkH,EAA0BlwD,EAAKipD,iBAE/BjhE,IACAgoE,EAAuBvjE,MAAMsjE,GAC7BE,EAAyBxjE,MAAMsjE,GAC/BG,EAAwBzjE,MAAMsjE,IAGlCD,EAAsBK,eAAiBJ,CAC3C,EAEAK,sBAAuB,SAAS3sE,GAC5B,IAAIosE,EAAWz2E,KAAKuzE,WAAWgB,UAAY,YAAc,WACrDtpE,EAAWjL,KAAKe,QAAQkK,SACxBgsE,EAAU5sE,EAAEumC,OAAO4jC,QACnB5tD,EAAO5mB,KAAKuzE,WAAWkD,GACvBC,EAAwB9vD,EAAK6oD,eAC7BmH,EAAyBhwD,EAAK+oD,gBAC9BkH,EAA2BjwD,EAAKgpD,kBAChCkH,EAA0BlwD,EAAKipD,iBAC/B8G,EAAsBD,EAAsBrjE,QAC5C6jE,EAAyBL,EAAyBxjE,QAClD8jE,EAAuBP,EAAuBvjE,QAC9C+jE,EAAwBN,EAAwBzjE,QAE/C4jE,GAiBI5tD,MAAMqtD,EAAsBK,iBAC7BL,EAAsBrjE,MAAMqjE,EAAsBK,gBAGtDH,EAAuBlsE,QAAQrB,QAAQqpE,EAAMF,GAAkBvvD,YAAYwvD,GAC3EoE,EAAyBnsE,QAAQrB,QAAQqpE,EAAMF,GAAkBvvD,YAAYwvD,GAC7EqE,EAAwBpsE,QAAQrB,QAAQqpE,EAAMF,GAAkBvvD,YAAYwvD,GAE5EiE,EAAsBhsE,QAAQrB,QAAQqpE,EAAMF,GAAkB7nE,KAAK,iBAAiByI,KAAKnI,EAASuD,cAxB9FmoE,IAAwBO,GACpBP,IAAwBQ,GACxBR,IAAwBS,GAC5BR,EAAuBvjE,MAAMsjE,GAC7BE,EAAyBxjE,MAAMsjE,GAC/BG,EAAwBzjE,MAAMsjE,IAE9BD,EAAsBrjE,MAAM,MAGhCujE,EAAuBlsE,QAAQrB,QAAQqpE,EAAMF,GAAkBr4D,SAASs4D,GACxEoE,EAAyBnsE,QAAQrB,QAAQqpE,EAAMF,GAAkBr4D,SAASs4D,GAC1EqE,EAAwBpsE,QAAQrB,QAAQqpE,EAAMF,GAAkBr4D,SAASs4D,GAEzEiE,EAAsBhsE,QAAQrB,QAAQqpE,EAAMF,GAAkB7nE,KAAK,iBAAiByI,KAAKnI,EAASsD,aAY1G,EAEA8oE,uBAAwB,SAAS/oD,GAC7B,IAEIgpD,EAFOt3E,KACkBuzE,WAAWoB,kBACK5jE,cACzCwmE,EAAgCD,EAAqBjkE,QACrD+7D,EAAkB9gD,EAAKsiB,OAAOv9B,QAE9B+7D,EAAkBmI,GAClBD,EAAqBjkE,MAAM+7D,GAG/BkI,EAAqBlsD,IAAIgkD,EAC7B,EAEAoI,oBAAqB,SAASlpD,GAC1B,IAEImpD,EAFOz3E,KACkBuzE,WAAWoB,kBACE7jE,WACtC4mE,EAA4BD,EAAkBpkE,QAC9CskE,EAAerpD,EAAKsiB,OAAOv9B,QAE3BskE,EAAeD,GACfD,EAAkBpkE,MAAMskE,GAG5BF,EAAkBrsD,IAAIusD,EAC1B,EAEAjE,2BAA4B,SAAS7lC,EAAQ5iC,GACzC,IAMIqoC,EANAtqC,EAAOhJ,KACPu7B,EAAQvyB,EAAKjI,QAAQw6B,MACrB8X,EAAcxF,EAAOjlC,QAAQ+B,KAAK,uBAElC4pE,EADavrE,EAAKuqE,WACKgB,UAAY,CAAC,EACpCvuE,EAAkBu1B,EAAMv1B,gBAAkBu1B,EAAMv1B,iBAAmB,CAAC,EAyNxE,OAtNAgD,EAAK4rE,SAASvmE,EAAOrI,EAAgB8qE,WACrC9nE,EAAK4rE,SAASvmE,EAAOrI,EAAgB+qE,YACrC/qE,EAAgBoJ,YAAcpJ,EAAgBoJ,aAAe,IAC7DkkC,EAAOD,EAAYE,UAAU,CACzBC,eAAe,EACfokC,OAAQ,OACRC,KAAM,CACFhzB,KAAM,GAEV7oC,MAAO,CACH,CACImgB,QAAS,EACTsX,MAAO,yBACPC,MAAOh/B,EAAOzJ,EAASsF,SACvBtH,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAK6rE,oBAAoB50E,EAAE,wDAAwDgd,SAASvF,GACxF,UACA1R,EACAuuE,EACA,CACIrpD,IAAK,EACL7X,MA7pBM,EA8pBNyC,OAAQ9M,EAAKquE,uBAAuB9tE,KAAKP,IAErD,GACF,CACEmzB,QAAS,EACTsX,MAAO,sBACPC,MAAOh/B,EAAOzJ,EAASuF,MACvBvH,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAK6rE,oBAAoB50E,EAAE,qDAAqDgd,SAASvF,GACrF,OACA1R,EACAuuE,EACA,CACIrpD,IAAK,EACL7X,MA5qBM,EA6qBNyC,OAAQ9M,EAAKwuE,oBAAoBjuE,KAAKP,IAElD,GACF,CACEmzB,QAAS,EACTsX,MAAO,uBACPC,MAAOh/B,EAAOzJ,EAASkD,OACvBlF,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAK6rE,oBAAoB50E,EAAE,uCAAuCgd,SAASvF,GAAY,QAAS1R,EAAiBuuE,EAAW,CAAEljE,YAAaqD,EAAOzJ,EAASC,OAC/J,GACF,CACEixB,QAAS,EACTsX,MAAO,4BACPC,MAAO,CACHliC,SAAS,EACT4B,KAAM,UAEVnK,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAKisE,kBAAkBh1E,EAAE,qDAAsDgL,EAASoD,aAAc4O,SAASvF,GAC3G,YACA1R,EACAuuE,EACAlmE,EACR,GACF,CACE8tB,QAAS,EACTsX,MAAO,wBACPC,MAAOh/B,EAAOzJ,EAASmD,QACvBnF,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAK6rE,oBAAoB50E,EAAE,wCAAwCgd,SAASvF,GAAY,SAAU1R,EAAiBuuE,EAAW,CAAEljE,YAAaqD,EAAOzJ,EAASC,OACjK,GACF,CACEixB,QAAS,EACTsX,MAAO,6BACPC,MAAO,CACHliC,SAAS,EACT4B,KAAM,UAEVnK,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAKisE,kBAAkBh1E,EAAE,sDAAuDgL,EAASoD,aAAc4O,SAASvF,GAC5G,aACA1R,EACAuuE,EACAlmE,EACR,GACF,CACE8tB,QAAS,EACTsX,MAAO,0BACPC,MAAOh/B,EAAOzJ,EAAS8D,UACvB9F,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAKqsE,2BAA2Bp1E,EAAE,6DAA6Dgd,SAASvF,GAAY1R,EACxH,GAEJ,CACIm2B,QAAS,EACTsX,MAAO,2BACPC,MAAOh/B,EAAOzJ,EAASlD,WACvBkB,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAKusE,4BAA4Bt1E,EAAE,2DAA2Dgd,SAASvF,GAAY1R,EACvH,GACF,CACEm2B,QAAS,EACTsX,MAAO,8BACPC,MAAOh/B,EAAOzJ,EAASqD,aACvBrF,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAK6rE,oBAAoB50E,EAAE,8CAA8Cgd,SAASvF,GAAY,cAAe1R,EAAiBuuE,EAAW,CAAEljE,YAAaqD,EAAOzJ,EAASC,OAC5K,GACF,CACEpC,KAAM,QACN4qC,MAAO,gBACPkkC,OAAQ,OACRz7C,QAAS,EACT07C,KAAM,CACFhzB,KAAM,EACNizB,OAAQ,IAEZ97D,MAAO,CACH,CACImgB,QAAS,OACTsX,MAAO,6BACPC,MAAO,GACPzqC,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAKktE,cAAcj2E,EAAE,6CAA6Cgd,SAASvF,GAAY,0BAA2B1R,EAAiBuuE,EACnI,CACI0C,SAAS,EACTvjC,MAAOh/B,EAAOzJ,EAAS2D,yBACvBkH,OAAQ9M,EAAKguE,sBAAsBztE,KAAKP,IAEhD,GACF,CACEmzB,QAAS,EACTsX,MAAO,kCACPC,MAAOh/B,EAAOzJ,EAASuD,YACvBvF,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAK6rE,oBAAoB50E,EAAE,kDAAkDgd,SAASvF,GAAY,iBAAkB1R,EAAiBuuE,EACrI,CACIljE,YAAaqD,EAAOzJ,EAASC,MAC7B4K,OAAQ9M,EAAKwtE,oBAAoBjtE,KAAKP,IAE9C,GACF,CACEmzB,QAAS,EACTsX,MAAO,oCACPC,MAAOh/B,EAAOzJ,EAAS0D,cACvB1F,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAK6rE,oBAAoB50E,EAAE,oDAAoDgd,SAASvF,GAAY,mBAAoB1R,EAAiBuuE,EAAW,CAAEljE,YAAaqD,EAAOzJ,EAASC,OACvL,GACF,CACEixB,QAAS,EACTsX,MAAO,sCACPC,MAAOh/B,EAAOzJ,EAASyD,eACvBzF,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAK6rE,oBAAoB50E,EAAE,qDAAqDgd,SAASvF,GAAY,oBAAqB1R,EAAiBuuE,EAAW,CAAEljE,YAAaqD,EAAOzJ,EAASC,OACzL,GACF,CACEixB,QAAS,EACTsX,MAAO,mCACPC,MAAOh/B,EAAOzJ,EAASwD,aACvBxF,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAK6rE,oBAAoB50E,EAAE,mDAAmDgd,SAASvF,GAAY,kBAAmB1R,EAAiBuuE,EAAW,CAAEljE,YAAaqD,EAAOzJ,EAASC,OACrL,KAGT,CACCpC,KAAM,QACN4qC,MAAO,UACPkkC,OAAQ,OACRz7C,QAAS,EACT07C,KAAM,CACFhzB,KAAM,EACNizB,OAAQ,IAEZ97D,MAAO,CAAC,CACJmgB,QAAS,OACTsX,MAAO,oBACPC,MAAOh/B,EAAOzJ,EAASgE,iBACvBhG,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAK6sE,iBAAiB51E,EAAE,oCAAoCgd,SAASvF,GAAY,UAAW1R,EAAiBuuE,EACjH,GACF,CACEp4C,QAAS,EACTsX,MAAO,wBACPC,MAAOh/B,EAAOzJ,EAASoE,aACvBpG,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAK6rE,oBAAoB50E,EAAE,wCAAwCgd,SAASvF,GAAY,cAAe1R,EAAiBuuE,EAC5H,GACF,CACEp4C,QAAS,EACTsX,MAAO,wBACPC,MAAOh/B,EAAOzJ,EAASqE,aACvBrG,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAK6sE,iBAAiB51E,EAAE,wCAAwCgd,SAASvF,GAAY,cAAe1R,EAAiBuuE,EACzH,GACF,CACEp4C,QAAS,EACTsX,MAAO,wBACPC,MAAOh/B,EAAOzJ,EAASmE,aACvBnG,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAKosE,yBAAyBn1E,EAAE,wCAAwCgd,SAASvF,GAC7E,cACA1R,EACAuuE,EACA3B,EACR,GACF,CACEz2C,QAAS,OACTsX,MAAO,4BACPC,MAAO,GACPzqC,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAKktE,cAAcj2E,EAAE,2CAA2Cgd,SAASvF,GAAY,kBAAmB1R,EAAiBuuE,EAAW,CAAE7gC,MAAOh/B,EAAOzJ,EAASsE,kBACjK,QAIb8M,KAAK,cACH07D,cAAc59D,SAAS,aAErBm5B,CACX,EAEA0gC,0BAA2B,SAASnmC,EAAQ5iC,GACxC,IAMIqoC,EANAtqC,EAAOhJ,KACPu7B,EAAQvyB,EAAKjI,QAAQw6B,MACrB8X,EAAcxF,EAAOjlC,QAAQ+B,KAAK,sBAElC8pE,GADazrE,EAAKuqE,WAAavqE,EAAKuqE,YAAc,CAAC,GAC7BkB,SAAW,CAAC,EAClChH,EAAkBlyC,EAAM+wC,eAAiB/wC,EAAM+wC,cAAc,IAAO,CAAEl9D,YAAa,GAAII,UAAU,GAgNrG,OA7MAxG,EAAK4rE,SAASvmE,EAAOo/D,EAAeqD,WACpC9nE,EAAK4rE,SAASvmE,EAAOo/D,EAAesD,aACpCz9B,EAAOD,EAAYE,UAAU,CACzBC,eAAe,EACfokC,OAAQ,OACRC,KAAM,CACFhzB,KAAM,GAEV7oC,MAAO,CACH,CACImgB,QAAS,OACTsX,MAAO,0BACPC,MAAO,GACPzqC,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAKktE,cAAcj2E,EAAE,0CAA0Cgd,SAASvF,GAAY,iBAAkB6jB,EAAMv1B,gBAAiByuE,EAAU,CAAE/gC,MAAOh/B,EAAOzJ,EAASwF,iBACpK,GACF,CACE0rB,QAAS,EACTsX,MAAO,sBACPC,MAAOh/B,EAAOzJ,EAASkD,OACvB6pE,KAAMtjE,EAAOzJ,EAASyF,eACtBzH,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAK6rE,oBAAoB50E,EAAE,sCAAsCgd,SAASvF,GAAY,QAAS+1D,EAAgBgH,EAAU,CAAEpjE,YAAaqD,EAAOzJ,EAASC,OAC5J,GACF,CACEixB,QAAS,EACTsX,MAAO,2BACPC,MAAO,CACHliC,SAAS,EACT4B,KAAM,UAEVnK,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAKisE,kBAAkBh1E,EAAE,oDAAqDgL,EAASoD,aAAc4O,SAASvF,GAC1G,YACA+1D,EACAgH,EACApmE,EACR,GACF,CACE8tB,QAAS,EACTsX,MAAO,uBACPC,MAAOh/B,EAAOzJ,EAASmD,QACvB4pE,KAAMtjE,EAAOzJ,EAAS0F,YACtB1H,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAK6rE,oBAAoB50E,EAAE,uCAAuCgd,SAASvF,GAAY,SAAU+1D,EAAgBgH,EAAU,CAAEpjE,YAAaqD,EAAOzJ,EAASC,OAC9J,GACF,CACEixB,QAAS,EACTsX,MAAO,4BACPC,MAAO,CACHliC,SAAS,EACT4B,KAAM,UAEVnK,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAKisE,kBAAkBh1E,EAAE,qDAAsDgL,EAASoD,aAAc4O,SAASvF,GAC3G,aACA+1D,EACAgH,EACApmE,EACR,GACF,CACE8tB,QAAS,EACTsX,MAAO,0BACPC,MAAOh/B,EAAOzJ,EAASlD,WACvBkB,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAKysE,2BAA2Bx1E,EAAE,0DAA0Dgd,SAASvF,GAAY+1D,EACrH,GACF,CACEtxC,QAAS,EACTsX,MAAO,qBACPC,MAAO,eACPzqC,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAK2sE,sBAAsB11E,EAAE,qCAAqCgd,SAASvF,GAC3E+1D,EACJ,GACF,CACEtxC,QAAS,OACTsX,MAAO,mBACPC,MAAOh/B,EAAOzJ,EAAS+D,YACvB/F,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAK6sE,iBAAiB51E,EAAE,mCAAmCgd,SAASvF,GAAY,UAAW+1D,EAAgBgH,EAC/G,GACF,CACEt4C,QAAS,EACTsX,MAAO,6BACPC,MAAOh/B,EAAOzJ,EAAS4D,YACvB5F,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAK6rE,oBAAoB50E,EAAE,6CAA6Cgd,SAASvF,GAAY,aAAc+1D,EAAgBgH,EAAU,CAAEpjE,YAAaqD,EAAOzJ,EAASC,OACxK,GACF,CACEpC,KAAM,QACN4qC,MAAO,gBACPkkC,OAAQ,OACRz7C,QAAS,EACT07C,KAAM,CACFhzB,KAAM,EACNizB,OAAQ,IAEZ97D,MAAO,CACH,CACImgB,QAAS,OACTsX,MAAO,6BACPC,MAAO,GACPzqC,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAKktE,cAAcj2E,EAAE,6CAA6Cgd,SAASvF,GAAY,0BAA2B6jB,EAAMv1B,gBAAiByuE,EACzI,CACIwC,SAAS,EACTvjC,MAAOh/B,EAAOzJ,EAAS2D,yBACvBkH,OAAQ9M,EAAKguE,sBAAsBztE,KAAKP,IAEhD,GACF,CACEmzB,QAAS,EACTsX,MAAO,mCACPC,MAAOh/B,EAAOzJ,EAASuD,YACvBvF,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAK6rE,oBAAoB50E,EAAE,mDAAmDgd,SAASvF,GAAY,iBAAkB+1D,EAAgBgH,EACrI,CACIpjE,YAAaqD,EAAOzJ,EAASC,MAC7B4K,OAAQ9M,EAAKwtE,oBAAoBjtE,KAAKP,IAE9C,GACF,CACEmzB,QAAS,EACTsX,MAAO,qCACPC,MAAOh/B,EAAOzJ,EAAS0D,cACvB1F,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAK6rE,oBAAoB50E,EAAE,qDAAqDgd,SAASvF,GAAY,mBAAoB+1D,EAAgBgH,EAAU,CAAEpjE,YAAaqD,EAAOzJ,EAASC,OACtL,GACF,CACEixB,QAAS,EACTsX,MAAO,sCACPC,MAAOh/B,EAAOzJ,EAASyD,eACvBzF,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAK6rE,oBAAoB50E,EAAE,sDAAsDgd,SAASvF,GAAY,oBAAqB+1D,EAAgBgH,EAAU,CAAEpjE,YAAaqD,EAAOzJ,EAASC,OACxL,GACF,CACEixB,QAAS,EACTsX,MAAO,oCACPC,MAAOh/B,EAAOzJ,EAASwD,aACvBxF,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAK6rE,oBAAoB50E,EAAE,oDAAoDgd,SAASvF,GAAY,kBAAmB+1D,EAAgBgH,EAAU,CAAEpjE,YAAaqD,EAAOzJ,EAASC,OACpL,KAGV,CACEpC,KAAM,QACN4qC,MAAO,UACPkkC,OAAQ,OACRz7C,QAAS,EACT07C,KAAM,CACFhzB,KAAM,EACNizB,OAAQ,IAEZ97D,MAAO,CAAC,CACJmgB,QAAS,EACTsX,MAAO,6BACPC,MAAOh/B,EAAOzJ,EAASoE,aACvBpG,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAK6rE,oBAAoB50E,EAAE,6CAA6Cgd,SAASvF,GAAY,cAAe+1D,EAAgBgH,EAAU,CAAEpjE,YAAaqD,EAAOzJ,EAASC,OACzK,GACF,CACEixB,QAAS,EACTsX,MAAO,6BACPC,MAAOh/B,EAAOzJ,EAASqE,aACvBrG,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAK6sE,iBAAiB51E,EAAE,6CAA6Cgd,SAASvF,GAAY,cAAe+1D,EAAgBgH,EAAU,CAAEpjE,YAAaqD,EAAOzJ,EAASC,OACtK,GACF,CACEixB,QAAS,EACTsX,MAAO,6BACPC,MAAOh/B,EAAOzJ,EAASmE,aACvBnG,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAKosE,yBAAyBn1E,EAAE,6CAA6Cgd,SAASvF,GAClF,cACA+1D,EACAgH,EACA7B,EACR,KAEN,CACEz2C,QAAS,OACTsX,MAAO,mBACPC,MAAO,CACHtgC,KAAMsB,EAAOzJ,EAASiE,IACtB+oE,UAAU,GAEdhvE,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAKgtE,WAAW/1E,EAAE,mCAAmCgd,SAASvF,GAAY,KAAM+1D,EAAgBgH,EACpG,GACF,CACEt4C,QAAS,OACTsX,MAAO,0BACPC,MAAO,CACHtgC,KAAMsB,EAAOzJ,EAASjH,UACtBi0E,UAAU,GAEdhvE,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAKgtE,WAAW/1E,EAAE,0CAA0Cgd,SAASvF,GAAY,YAAa+1D,EAAgBgH,EAClH,MAGTp4D,KAAK,cACH07D,cAAc59D,SAAS,aAErBm5B,CACX,EAEAsgC,mCAAoC,SAAS/lC,EAAQ5iC,GACjD,IAMIqoC,EANAtqC,EAAOhJ,KACPu7B,EAAQvyB,EAAKjI,QAAQw6B,MACrB8X,EAAcxF,EAAOjlC,QAAQ+B,KAAK,+BAElCgqE,EADa3rE,EAAKuqE,WACaoB,kBAAoB,CAAC,EACpD3uE,EAAkBu1B,EAAMv1B,gBAsH5B,OAnHAstC,EAAOD,EAAYE,UAAU,CACzBC,eAAe,EACfokC,OAAQ,OACRC,KAAM,CACFhzB,KAAM,GAEV7oC,MAAO,CACH,CACImgB,QAAS,OACTsX,MAAO,cACPC,MAAO,CACHtgC,KAAMsB,EAAOzJ,EAASiE,IACtB+oE,UAAU,GAEdhvE,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAKgtE,WAAW/1E,EAAE,8BAA8Bgd,SAASvF,GAAY,KAAM1R,EAAiB2uE,EAChG,GACF,CACEx4C,QAAS,OACTsX,MAAO,qBACPC,MAAO,CACHtgC,KAAMsB,EAAOzJ,EAASjH,UACtBi0E,UAAU,GAEdhvE,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAKgtE,WAAW/1E,EAAE,qCAAqCgd,SAASvF,GAAY,YAAa1R,EAAiB2uE,EAC9G,GAEJ,CACIiD,OAAQ,OACRC,KAAM,CACFhzB,KAAM,EACNizB,OAAQ,IAEZ37C,QAAS,OACTrzB,KAAM,QACN4qC,MAAO,gBACP13B,MAAO,CACH,CACImgB,QAAS,EACTsX,MAAO,yBACPC,MAAO,CACHtgC,KAAMsB,EAAOzJ,EAASgD,SACtBgqE,UAAU,GAEdhvE,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAKgtE,WAAW/1E,EAAE,yCAAyCgd,SAASvF,GAAY,iBAAkB1R,EAAiB2uE,EACvH,GACF,CACEx4C,QAAS,EACTsX,MAAO,mCACPC,MAAOh/B,EAAOzJ,EAAS6D,kBACvB7F,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAK0sE,oCAAoCz1E,EAAE,mDAAmDgd,SAASvF,GAAY1R,EACvH,GACF,CACEm2B,QAAS,EACTsX,MAAO,6BACPC,MAAOh/B,EAAOzJ,EAAS6F,YACvB7H,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAK6rE,oBAAoB50E,EAAE,6CAA6Cgd,SAASvF,GACjF,aACA1R,EACA2uE,EACA,CACIvpD,IAAKplB,EAAgBwK,MApoCnB,GAsoCV,GACF,CACE2rB,QAAS,EACTsX,MAAO,gCACPC,MAAOh/B,EAAOzJ,EAAS8F,eACvB9H,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAK6rE,oBAAoB50E,EAAE,gDAAgDgd,SAASvF,GACpF,gBACA1R,EACA2uE,EACA,CACIvpD,IAAKplB,EAAgBuK,SAjpCnB,GAmpCV,GACF,CACE4rB,QAAS,EACTsX,MAAO,yBACPC,MAAOh/B,EAAOzJ,EAASwE,2BACvBxG,OAAQ,SAASyO,EAAW3W,GACxB,IAAI6H,EAAU3I,EAAE,kGACQgL,EAASgG,qFACRhG,EAASiG,oFACXjG,EAASkG,oEACxB8L,SAASvF,GAEjB1O,EAAK4sE,yBAAyBhtE,EAAS,mBAAoB,CAAEopC,gBAAgB,GAAQhsC,EAAiB2uE,EAC1G,GACF,CACEx4C,QAAS,OACTsX,MAAO,iCACPC,MAAO,CACHtgC,KAAMsB,EAAOzJ,EAASiD,SACtB+pE,UAAU,GAEdhvE,OAAQ,SAASyO,EAAW3W,GACxBiI,EAAKotE,cAAcn2E,EAAE,6DAA6Dgd,SAASvF,GAAY,UAAW1R,EAAiB2uE,EAAmB,CAClJnkE,KAAM,EACNa,YAAapG,EAAS+F,yBAE9B,QAKjBqL,KAAK,cAEH07D,cAAc59D,SAAS,aAErBm5B,CACX,IAGJ3yC,EAAM0B,GAAG4G,OAAO2jE,kBAAoBA,CAEnC,CAxsCD,CAwsCG1qE,OAAOvB,MAAM0uB,QAgChB,OAFc1uB,KAIjB","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('kendo.combobox.js'), require('kendo.dropdownlist.js'), require('kendo.resizable.js'), require('kendo.window.js'), require('kendo.colorpicker.js'), require('kendo.imagebrowser.js'), require('kendo.numerictextbox.js'), require('kendo.textarea.js'), require('kendo.core.js'), require('kendo.toolbar.js'), require('kendo.icons.js'), require('kendo.form.js'), require('kendo.filebrowser.js'), require('kendo.draganddrop.js'), require('kendo.html.button.js'), require('kendo.tabstrip.js')) :\n    typeof define === 'function' && define.amd ? define(['kendo.combobox', 'kendo.dropdownlist', 'kendo.resizable', 'kendo.window', 'kendo.colorpicker', 'kendo.imagebrowser', 'kendo.numerictextbox', 'kendo.textarea', 'kendo.core', 'kendo.toolbar', 'kendo.icons', 'kendo.form', 'kendo.filebrowser', 'kendo.draganddrop', 'kendo.html.button', 'kendo.tabstrip'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (global.kendoeditor = global.kendoeditor || {}, global.kendoeditor.js = factory()));\n})(this, (function () {\n    (function(kendo) {\n        var UndoRedoStack = kendo.Observable.extend({\n            init: function(options) {\n                kendo.Observable.fn.init.call(this, options);\n                this.clear();\n            },\n            events: [ \"undo\", \"redo\" ],\n            push: function (command) {\n                this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\n                this.currentCommandIndex = this.stack.push(command) - 1;\n            },\n            undo: function () {\n                if (this.canUndo()) {\n                    var command = this.stack[this.currentCommandIndex--];\n                    command.undo();\n                    this.trigger(\"undo\", { command: command });\n                }\n            },\n            redo: function () {\n                if (this.canRedo()) {\n                    var command = this.stack[++this.currentCommandIndex];\n                    command.redo();\n                    this.trigger(\"redo\", { command: command });\n                }\n            },\n            clear: function() {\n                this.stack = [];\n                this.currentCommandIndex = -1;\n            },\n            canUndo: function () {\n                return this.currentCommandIndex >= 0;\n            },\n            canRedo: function () {\n                return this.currentCommandIndex != this.stack.length - 1;\n            }\n        });\n\n        kendo.deepExtend(kendo, {\n            util: {\n                UndoRedoStack: UndoRedoStack\n            }\n        });\n    })(kendo);\n\n    (function($,undefined$1) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            Class = kendo.Class,\n            Widget = kendo.ui.Widget,\n            os = kendo.support.mobileOS,\n            browser = kendo.support.browser,\n            extend = $.extend,\n            deepExtend = kendo.deepExtend,\n            keys = kendo.keys,\n            outerWidth = kendo._outerWidth,\n            outerHeight = kendo._outerHeight,\n            NS = \".kendoEditor\";\n\n        const FORMATTING_MARKS_STYLE_ID = \"formatting-marks-style\",\n              FORMATTING_MARKS_OVERLAY_ID = \"formatting-marks-overlay\",\n              FORMATTING_MARKS_OVERLAY_WRAPPER_ID = \"formatting-marks-overlay-wrapper\";\n\n        var SELECT = \"select\";\n        var SELECT_OVERLAY_SELECTOR = \"select.k-select-overlay\";\n        var PLACEHOLDER_CLASS = \"k-placeholder\";\n        var PLACEHOLDER_TAG_ID = \"placeholder\";\n        var REFRESH_INTERVAL = 200;\n        var DEFAULT_LANGUAGE = \"en\";\n\n        var NATIVE_TOOLS = [\n            \"insertLineBreak\",\n            \"insertParagraph\",\n            \"redo\",\n            \"undo\",\n            \"autoLink\"\n        ];\n\n        const TOOLBAR_ALLOWED_CLOSE_SELECTORS = \".k-icon,.k-svg-icon,svg,path,.k-editor-window,.k-editor-toolbar,.k-editortoolbar-dragHandle,.k-toolbar-tool,.k-toolbar-tool *\";\n\n        var EditorUtils = {\n            editorWrapperTemplate: () =>\n                '<div class=\"k-editor\">' +\n                    '<div class=\"k-editor-toolbar\" role=\"toolbar\"></div>' +\n                    '<div class=\"k-editable-area k-editor-content\"></div>' +\n                '</div>',\n\n            formatByName: function(name, format) {\n                for (var i = 0; i < format.length; i++) {\n                    if ($.inArray(name, format[i].tags) >= 0) {\n                        return format[i];\n                    }\n                }\n            },\n\n            getToolCssClass: function(name, icon) {\n                var toolCssClassNames = {\n                    superscript: \"supscript\",\n                    subscript: \"subscript\",\n                    justifyLeft: \"align-left\",\n                    justifyCenter: \"align-center\",\n                    justifyRight: \"align-right\",\n                    justifyFull: \"align-justify\",\n                    insertUnorderedList: \"list-unordered\",\n                    insertOrderedList: \"list-ordered\",\n                    insertUpperRomanList: \"list-roman-upper\",\n                    insertLowerRomanList: \"list-roman-lower\",\n                    \"import\": \"import\",\n                    indent: \"indent\",\n                    outdent: \"outdent\",\n                    createLink: \"link\",\n                    unlink: \"unlink\",\n                    insertImage: \"image\",\n                    insertFile: \"file-add\",\n                    viewHtml: \"code\",\n                    foreColor: \"foreground-color\",\n                    backColor: \"droplet\",\n                    createTable: \"table-add\",\n                    addColumnLeft: \"table-column-insert-left\",\n                    addColumnRight: \"table-column-insert-right\",\n                    addRowAbove: \"table-row-insert-above\",\n                    addRowBelow: \"table-row-insert-below\",\n                    deleteRow: \"table-row-delete\",\n                    deleteColumn: \"table-column-delete\",\n                    mergeCellsHorizontally: \"cells-merge-horizontally\",\n                    mergeCellsVertically: \"cells-merge-vertically\",\n                    splitCellHorizontally: \"cell-split-horizontally\",\n                    splitCellVertically: \"cell-split-vertically\",\n                    tableProperties: \"table-properties\",\n                    tableCellProperties: \"table-cell-properties\",\n                    tableWizardInsert: \"table-wizard\",\n                    tableAlignLeft: \"table-position-start\",\n                    tableAlignCenter: \"table-position-center\",\n                    tableAlignRight: \"table-position-end\",\n                    cleanFormatting: \"clear-css\",\n                    copyFormat: \"copy-format\",\n                    applyFormat: \"apply-format\",\n                    pdf: \"file-pdf\"\n                };\n\n                var cssClass = toolCssClassNames[name];\n\n                if (cssClass) {\n                    return cssClass;\n                }\n\n                if (icon) {\n                    return icon;\n                }\n\n                return EditorUtils.nameToKebab(name);\n            },\n\n            nameToKebab: function(name) {\n                return name.replace(/([a-z])([A-Z])/g, \"$1-$2\")\n                    .replace(/[\\s_]+/g, '-')\n                    .toLowerCase();\n            },\n\n            registerTool: function(toolName, tool) {\n                if (!tool.name) {\n                    tool.options.name = toolName;\n                    tool.name = toolName.toLowerCase();\n                }\n\n                if (!tool.options.ui) {\n                    tool.options.ui = {};\n                }\n\n                tool.options.ui.command = toolName;\n\n                Editor.defaultTools[toolName] = tool;\n            },\n\n            registerFormat: function(formatName, format) {\n                Editor.fn.options.formats[formatName] = format;\n            },\n\n            cacheComments: function(content, comments) {\n                for (var index in comments) {\n                    content = content.replace(comments[index], \"{\" + index + \"}\");\n                }\n                return content;\n            },\n\n            retrieveComments: function(content, comments) {\n                for (var index in comments) {\n                    content = content.replace(\"{\" + index + \"}\", comments[index]);\n                }\n                return content;\n            }\n        };\n\n        var messages = {\n            auto: \"Auto\",\n            bold: \"Bold\",\n            italic: \"Italic\",\n            underline: \"Underline\",\n            strikethrough: \"Strikethrough\",\n            superscript: \"Superscript\",\n            subscript: \"Subscript\",\n            fitToCell: \"Fit to cell\",\n            justifyCenter: \"Center text\",\n            justifyLeft: \"Align text left\",\n            justifyRight: \"Align text right\",\n            justifyFull: \"Justify\",\n            insertUnorderedList: \"Insert unordered list\",\n            insertOrderedList: \"Insert ordered list\",\n            lineHeight: \"Set line height\",\n            formattingMarks: \"Toggle formatting marks\",\n            indent: \"Indent\",\n            outdent: \"Outdent\",\n            createLink: \"Insert hyperlink\",\n            unlink: \"Remove hyperlink\",\n            insertImage: \"Insert image\",\n            insertFile: \"Insert file\",\n            insertHtml: \"Insert HTML\",\n            viewHtml: \"View HTML\",\n            fontName: \"Select font family\",\n            fontNameInherit: \"(inherited font)\",\n            fontSize: \"Select font size\",\n            fontSizeInherit: \"(inherited size)\",\n            formatBlock: \"Format\",\n            formatting: \"Format\",\n            foreColor: \"Color\",\n            backColor: \"Background color\",\n            style: \"Styles\",\n            emptyFolder: \"Empty Folder\",\n            editAreaTitle: \"Editable area. Press F10 for toolbar.\",\n            uploadFile: \"Upload\",\n            overflowAnchor: \"More tools\",\n            orderBy: \"Arrange by:\",\n            orderBySize: \"Size\",\n            orderByName: \"Name\",\n            invalidFileType: \"The selected file {0} is not valid. Supported file types are {1}.\",\n            deleteFile: 'Are you sure you want to delete {0}?',\n            overwriteFile: 'A file with name {0} already exists in the current directory. Do you want to overwrite it?',\n            directoryNotFound: \"A directory with this name was not found.\",\n            imageWebAddress: \"Web address\",\n            imageAltText: \"Alternate text\",\n            imageWidth: \"Width (px)\",\n            imageHeight: \"Height (px)\",\n            fileWebAddress: \"Web address\",\n            fileTitle: \"Title\",\n            fileText: \"Text\",\n            linkWebAddress: \"Web address\",\n            linkText: \"Text\",\n            linkToolTip: \"ToolTip\",\n            linkOpenInNewWindow: \"Open link in new window\",\n            dialogUpdate: \"Update\",\n            dialogInsert: \"Insert\",\n            dialogOk: \"Confirm\",\n            dialogCancel: \"Cancel\",\n            cleanFormatting: \"Clean formatting\",\n            createTable: \"Create a table\",\n            createTableHint: \"Create a {0} x {1} table\",\n            addColumnLeft: \"Add column on the left\",\n            addColumnRight: \"Add column on the right\",\n            addRowAbove: \"Add row above\",\n            addRowBelow: \"Add row below\",\n            deleteRow: \"Delete row\",\n            deleteColumn: \"Delete column\",\n            mergeCellsHorizontally: \"Merge cells horizontally\",\n            mergeCellsVertically: \"Merge cells vertically\",\n            splitCellHorizontally: \"Split cells horizontally\",\n            splitCellVertically: \"Split cells vertically\",\n            tableAlignLeft: \"Table Align Left\",\n            tableAlignCenter: \"Table Align Center\",\n            tableAlignRight: \"Table Align Right\",\n            tableWizard: \"Table Wizard\",\n            tableProperties: \"Table Properties\",\n            tableCellProperties: \"Cell Properties\",\n            tableTab: \"General\",\n            cellTab: \"Cell\",\n            accessibilityTab: \"Advanced\",\n            caption: \"Caption\",\n            summary: \"Summary\",\n            width: \"Width\",\n            height: \"Height\",\n            units: \"Units\",\n            cellSpacing: \"Cell Spacing\",\n            cellPadding: \"Cell Padding\",\n            topPadding: \"Top\",\n            leftPadding: \"Left\",\n            bottomPadding: \"Bottom\",\n            rightPadding: \"Right\",\n            independentCellPaddings: \"Independent Cell Paddings\",\n            cellMargin: \"Cell Margin\",\n            alignment: \"Alignment\",\n            captionAlignment: \"Caption alignment\",\n            position: \"Position\",\n            background: \"Background\",\n            tableBackground: \"Table background\",\n            cssClass: \"CSS Class\",\n            id: \"ID\",\n            border: \"Border\",\n            borderStyle: \"Border Style\",\n            borderWidth: \"Border Width\",\n            borderColor: \"Border Color\",\n            collapseBorders: \"Collapse borders\",\n            wrapText: \"Wrap text\",\n            associateCellsWithHeaders: \"Associate headers\",\n            alignLeft: \"Align Left\",\n            alignCenter: \"Align Center\",\n            alignRight: \"Align Right\",\n            alignLeftTop: \"Align Left Top\",\n            alignCenterTop: \"Align Center Top\",\n            alignRightTop: \"Align Right Top\",\n            alignLeftMiddle: \"Align Left Middle\",\n            alignCenterMiddle: \"Align Center Middle\",\n            alignRightMiddle: \"Align Right Middle\",\n            alignLeftBottom: \"Align Left Bottom\",\n            alignCenterBottom: \"Align Center Bottom\",\n            alignRightBottom: \"Align Right Bottom\",\n            alignRemove: \"Remove Alignment\",\n            columns: \"Columns\",\n            rows: \"Rows\",\n            selectAllCells: \"Apply to all cells\",\n            applyToColumn: \"apply to column\",\n            applyToRow: \"apply to row\",\n            exportAs: \"Export As\",\n            \"import\": \"Import\",\n            print: \"Print\",\n            headerRows: \"Header Rows\",\n            headerColumns: \"Header Cols\",\n            tableSummaryPlaceholder: \"Summary attribute is not HTML5 compatible.\",\n            associateNone: \"None\",\n            associateScope: \"Associate using 'scope' attribute\",\n            associateIds: \"Associate using Ids\",\n            copyFormat: \"Copy format\",\n            applyFormat: \"Apply format\",\n            borderNone: \"None\",\n            undo: \"Undo\",\n            redo: \"Redo\"\n        };\n\n        var supportedContentEditable = typeof(document.documentElement.contentEditable) != 'undefined';\n\n        var toolGroups = {\n            basic: [\"bold\", \"italic\", \"underline\", \"strikethrough\"],\n            undo: [\"undo\", \"redo\"],\n            scripts: [\"subscript\", \"superscript\" ],\n            alignment: [\"justifyLeft\", \"justifyCenter\", \"justifyRight\", \"justifyFull\" ],\n            lines: [\"lineHeight\"],\n            symbols: [\"formattingMarks\"],\n            links: [\"insertImage\", \"insertFile\", \"createLink\", \"unlink\"],\n            lists: [\"insertUnorderedList\", \"insertOrderedList\", \"insertUpperRomanList\", \"insertLowerRomanList\",],\n            dent: [\"indent\", \"outdent\"],\n            tablesWizard: [\"tableProperties\", \"tableCellProperties\"],\n            tablesInsert: [\"createTable\"],\n            tablesAddDelete: [ \"addColumnLeft\", \"addColumnRight\", \"addRowAbove\", \"addRowBelow\", \"deleteRow\", \"deleteColumn\" ],\n            tablesMerge: [ \"mergeCellsHorizontally\", \"mergeCellsVertically\", \"splitCellHorizontally\", \"splitCellVertically\" ],\n            tablesPosition: [ \"tableAlignLeft\", \"tableAlignCenter\", \"tableAlignRight\" ],\n            formatPainter: [ \"copyFormat\", \"applyFormat\" ]\n        };\n\n        var Editor = Widget.extend({\n            __suppressEditableCheck: false,\n            init: function(element, options) {\n                var that = this,\n                    editorNS = kendo.ui.editor,\n                    dom = editorNS.Dom,\n                    toolbarContainer,\n                    type, domElement;\n\n\n                /* suppress initialization in devices w/o proper contenteditable support */\n                if (!supportedContentEditable && !that.__suppressEditableCheck) {\n                    return;\n                }\n\n                Widget.fn.init.call(that, element, options);\n\n                that.options = deepExtend({}, that.options, options);\n\n                element = that.element;\n                domElement = element[0];\n                type = dom.name(domElement);\n\n                this._registerHandler(\n                    element.closest(\"form\"), \"submit\", that.update.bind(that, undefined$1)\n                );\n\n                toolbarContainer = that._setupType(element);\n\n                that._initToolbar(toolbarContainer);\n                that._setupHeight(type);\n                that._resizable();\n                that._initializeContentElement(that);\n                that._setupKeyboard();\n\n                that.clipboard = new editorNS.Clipboard(this);\n                that.undoRedoStack = new kendo.util.UndoRedoStack();\n\n                that._populateValue(options, domElement);\n\n                that._registerHandler(document, {\n                    \"mousedown\": function() { that._endTyping(); },\n                    \"mouseup\": function(e) { that._mouseup(e); }\n                });\n\n                that._registerHandler(window, \"resize\", that._handleSpaceAndNewLines.bind(that));\n\n                that._initializeImmutables();\n\n                if (type == \"textarea\") {\n                    that._ariaLabel(that.wrapper.find(\"iframe\"));\n                }\n\n                that.toolbar.resize();\n\n                that._initInlineOverflowWrapper();\n\n                kendo.notify(that);\n\n                if (that._showWatermarkOverlay) {\n                    that._showWatermarkOverlay((that.wrapper && that.wrapper[0]) || that.element[0]);\n                }\n            },\n\n            events: [\n                \"select\",\n                \"change\",\n                \"execute\",\n                \"error\",\n                \"paste\",\n                \"keydown\",\n                \"keyup\"\n            ],\n\n            options: {\n                name: \"Editor\",\n                messages: messages,\n                placeholder: \"\",\n                nonce: \"\",\n                unsafeInline: true,\n                formats: {},\n                encoded: true,\n                formattingMarksRefreshDelay: 250,\n                domain: null,\n                resizable: false,\n                deserialization: {\n                    custom: null\n                },\n                serialization: {\n                    entities: true,\n                    semantic: true,\n                    scripts: false,\n                    optimizeTags: false,\n                    keepEOL: false\n                },\n                pasteCleanup: {\n                    all: false,\n                    css: false,\n                    custom: null,\n                    keepNewLines: false,\n                    msAllFormatting: false,\n                    msConvertLists: true,\n                    msTags: true,\n                    none: false,\n                    span: false\n                },\n                stylesheets: [],\n                dialogOptions: {\n                    modal: true, resizable: false, draggable: true,\n                    animation: false\n                },\n                imageBrowser: null,\n                fileBrowser: null,\n                navigateOnTab: false,\n                fontName: [\n                    { text: \"Arial\", value: \"Arial, Helvetica, sans-serif\" },\n                    { text: \"Courier New\", value: \"\\\"Courier New\\\", Courier, monospace\" },\n                    { text: \"Georgia\", value: \"Georgia, serif\" },\n                    { text: \"Impact\", value: \"Impact, Charcoal, sans-serif\" },\n                    { text: \"Lucida Console\", value: \"\\\"Lucida Console\\\", Monaco, monospace\" },\n                    { text: \"Tahoma\", value: \"Tahoma, Geneva, sans-serif\" },\n                    { text: \"Times New Roman\", value: \"\\\"Times New Roman\\\", Times, serif\" },\n                    { text: \"Trebuchet MS\", value: \"\\\"Trebuchet MS\\\", Helvetica, sans-serif\" },\n                    { text: \"Verdana\", value: \"Verdana, Geneva, sans-serif\" }\n                ],\n                fontSize: [\n                    { text: \"1 (8pt)\", value: \"xx-small\" },\n                    { text: \"2 (10pt)\", value: \"x-small\" },\n                    { text: \"3 (12pt)\", value: \"small\" },\n                    { text: \"4 (14pt)\", value: \"medium\" },\n                    { text: \"5 (18pt)\", value: \"large\" },\n                    { text: \"6 (24pt)\", value: \"x-large\" },\n                    { text: \"7 (36pt)\", value: \"xx-large\" }\n                ],\n                formatBlock: [\n                    { text: \"Paragraph\", value: \"p\" },\n                    { text: \"Quotation\", value: \"blockquote\" },\n                    { text: \"Heading 1\", value: \"h1\" },\n                    { text: \"Heading 2\", value: \"h2\" },\n                    { text: \"Heading 3\", value: \"h3\" },\n                    { text: \"Heading 4\", value: \"h4\" },\n                    { text: \"Heading 5\", value: \"h5\" },\n                    { text: \"Heading 6\", value: \"h6\" }\n                ],\n                tools: [\n                    \"formatting\",\n                    \"bold\",\n                    \"italic\",\n                    \"underline\",\n                    \"undo\",\n                    \"redo\",\n                    \"justifyLeft\",\n                    \"justifyCenter\",\n                    \"justifyRight\",\n                    \"copyFormat\",\n                    \"applyFormat\",\n                    \"insertUnorderedList\",\n                    \"insertOrderedList\",\n                    \"indent\",\n                    \"outdent\",\n                    \"createLink\",\n                    \"unlink\",\n                    \"insertImage\",\n                    \"tableProperties\",\n                    \"tableCellProperties\",\n                    \"createTable\",\n                    \"addRowAbove\",\n                    \"addRowBelow\",\n                    \"addColumnLeft\",\n                    \"addColumnRight\",\n                    \"deleteRow\",\n                    \"deleteColumn\",\n                    \"mergeCellsHorizontally\",\n                    \"mergeCellsVertically\",\n                    \"splitCellHorizontally\",\n                    \"splitCellVertically\",\n                    \"tableAlignLeft\",\n                    \"tableAlignCenter\",\n                    \"tableAlignRight\"\n                ]\n            },\n\n            destroy: function() {\n                var editor = this;\n\n                Widget.fn.destroy.call(this);\n\n                this._endTyping(true);\n\n                this._deregisterHandlers();\n\n                clearTimeout(this._spellCorrectTimeout);\n\n                this._focusOutside();\n\n                this.toolbar.destroy();\n\n                if (this.windowInstance) {\n                    this.windowInstance.destroy();\n                }\n                if (this.tablePopup) {\n                    this.tablePopup.destroy();\n                }\n\n                editor._destroyUploadWidget();\n\n                if (this.interSectionObserver) {\n                    this.interSectionObserver.disconnect();\n                    this.interSectionObserver = null;\n                }\n\n                if (this.resizeObserver) {\n                    this.resizeObserver.disconnect();\n                    this.resizeObserver = null;\n                    this.wrapper.css(\"min-height\", \"\");\n                    this.wrapper.css(\"max-height\", \"\");\n                }\n\n                editor._destroyResizings();\n\n                editor._destroyFormattingMarksOverlay();\n\n                kendo.destroy(this.wrapper);\n            },\n\n            setOptions: function(options) {\n                var editor = this;\n\n                Widget.fn.setOptions.call(editor, options);\n\n                if (options.tools) {\n                    this._setOptionsTools(options.tools);\n                }\n\n                this._initializePlaceholder();\n            },\n\n            createRange: function(document) {\n                return kendo.ui.editor.RangeUtils.createRange(document || this.document);\n            },\n\n            encodedValue: function() {\n                return kendo.ui.editor.Dom.encode(this.value());\n            },\n\n            exec: function(name, params) {\n                var that = this;\n                var command = null;\n                var defaultTools = kendo.ui.Editor.defaultTools;\n                var range, tool, prevented;\n\n                if (!name) {\n                    throw new Error(\"kendoEditor.exec(): `name` parameter cannot be empty\");\n                }\n\n                if (that.body.getAttribute(\"contenteditable\") !== \"true\" &&\n                    name !== \"print\" &&\n                    name !== \"pdf\" &&\n                    name !== \"exportAs\") {\n                    return false;\n                }\n\n                if (!that.keyboard.isTypingInProgress()) {\n                    that._focusBody();\n                    that.selectRange(that._range || that.getRange());\n                }\n\n                tool = that.tools[name] || defaultTools[name];\n\n                if (!tool) {\n                    Object.keys(defaultTools).map(key => {\n                        if (key.toLowerCase() === name) {\n                            tool = defaultTools[key];\n                        }\n                    });\n                }\n\n                if (tool) {\n                    range = that.getRange();\n\n                    if (tool.command) {\n                        command = tool.command(extend({ range: range, body: that.body, immutables: !!that.immutables }, params));\n                    }\n\n                    prevented = that.trigger(\"execute\", { name: name, command: command });\n\n                    if (prevented) {\n                        return;\n                    }\n\n                    if (/^(undo|redo)$/i.test(name)) {\n                        that.undoRedoStack[name]();\n                    } else if (command) {\n                        that.execCommand(command);\n\n                        if (command.async) {\n                            command.change = that._commandChange.bind(that);\n                            return;\n                        }\n                    }\n\n                    // Prevent double execution when the formatting marks tool is used.\n                    if (name !== \"formattingMarks\") {\n                        that._handleSpaceAndNewLines();\n                    }\n                    that._selectionChange();\n                }\n            },\n\n            _commandChange: function() {\n                const that = this;\n                that._selectionChange.call(that);\n                that._handleSpaceAndNewLines.call(that);\n            },\n\n            execCommand: function(command) {\n                if (!command.managesUndoRedo) {\n                    this.undoRedoStack.push(command);\n                }\n\n                command.editor = this;\n                command.exec();\n            },\n\n            focus: function() {\n                this.restoreSelection();\n            },\n\n            getRange: function() {\n                var selection = this.getSelection(),\n                    range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(),\n                    doc = this.document;\n\n                if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\n                    range.setStart(this.body, 0);\n                    range.collapse(true);\n                }\n\n                return range;\n            },\n\n            getSelection: function() {\n                return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\n            },\n\n            paste: function(html, options) {\n                this.focus();\n\n                var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\n                    range: this.getRange(),\n                    html: html\n                }, options));\n\n                command.editor = this;\n\n                command.exec();\n            },\n\n            refresh: function() {\n                var that = this;\n\n                if (that.textarea) {\n                    that._destroyResizings();\n                    // preserve updated value before re-initializing\n                    // don't use update() to prevent the editor from encoding the content too early\n                    var value = that.value();\n                    that.textarea.val(value);\n                    that.wrapper.find(\"iframe\").remove();\n                    that._initializeContentElement(that);\n                    that.value(value);\n                }\n            },\n\n            restoreSelection: function() {\n                this._focusBody();\n\n                if (this.selectionRestorePoint) {\n                    this.selectRange(this.selectionRestorePoint.toRange());\n                }\n            },\n\n            saveSelection: function(range) {\n                range = range || this.getRange();\n                var container = range.commonAncestorContainer,\n                    body = this.body;\n\n                if (container == body || $.contains(body, container)) {\n                    this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range, body);\n                }\n            },\n\n            selectedHtml: function() {\n                return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\n            },\n\n            selectRange: function(range) {\n                this._focusBody();\n                var selection = this.getSelection();\n                selection.removeAllRanges();\n                selection.addRange(range);\n                this.saveSelection(range);\n            },\n\n            state: function(toolName) {\n                var tool = kendo.ui.Editor.defaultTools[toolName];\n                var finder = tool && (tool.options.finder || tool.finder);\n                var RangeUtils = kendo.ui.editor.RangeUtils;\n                var range, textNodes;\n\n                if (finder) {\n                    range = this.getRange();\n\n                    textNodes = RangeUtils.textNodes(range);\n\n                    if (!textNodes.length && range.collapsed) {\n                        textNodes = [range.startContainer];\n                    }\n\n                    return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\n                }\n\n                return false;\n            },\n\n            update: function(value) {\n                value = value || this.options.encoded ? this.encodedValue() : this.value();\n\n                if (this.textarea) {\n                    this.textarea.val(value);\n                    this._togglePlaceholder(!value.trim());\n                } else {\n                    this._oldValue = value;\n                }\n            },\n\n            value: function(html) {\n                var body = this.body,\n                    editorNS = kendo.ui.editor,\n                    options = this.options,\n                    currentHtml = editorNS.Serializer.domToXhtml(body, options.serialization);\n\n                if (html === undefined$1) {\n                    return currentHtml;\n                }\n\n                if (html == currentHtml) {\n                    return;\n                }\n\n                editorNS.Serializer.htmlToDom(html, body, options.deserialization);\n\n                this.selectionRestorePoint = null;\n                this.update();\n                this._refreshTools();\n            },\n\n            _bindTools: function() {\n                var that = this,\n                    defaultTools = this.tools;\n\n                that.unbind(\"select\", that.toolbar.resize.bind(that.toolbar));\n\n                that.toolbar.element.find(\"[data-command]\")\n                    .filter((i, el) => $(el).find(\"[data-command]\").length === 0)\n                    .each((i, el) => {\n                        var toolName = el.getAttribute(\"data-command\"),\n                            tool = defaultTools[toolName];\n\n                        if (tool && tool.initialize) {\n                            tool.initialize($(el), that);\n                        }\n                    });\n\n                that.bind(\"select\", that.toolbar.resize.bind(that.toolbar));\n            },\n\n            _blur: function() {\n                var textarea = this.textarea;\n                var old = textarea ? textarea.val() : this._oldValue;\n                var value = this.options.encoded ? this.encodedValue() : this.value();\n\n                this.update();\n\n                if (textarea) {\n                    textarea.trigger(\"blur\");\n                }\n\n                if (value != old) {\n                    this.trigger(\"change\");\n                    if (textarea) {\n                        textarea.trigger(\"change\");\n                    }\n                }\n            },\n\n            _containsRange: function(range) {\n                var dom = kendo.ui.editor.Dom;\n                var body = this.body;\n                return range && dom.isAncestorOrSelf(body, range.startContainer) &&\n                    dom.isAncestorOrSelf(body, range.endContainer);\n            },\n\n            _createContentElement: function(stylesheets) {\n                var editor = this;\n                var iframe, wnd, doc;\n                var textarea = editor.textarea;\n                var specifiedDomain = editor.options.domain;\n                var domain = specifiedDomain || document.domain;\n                var domainScript = \"\";\n                var src = 'javascript:\"\"';\n                var lang = \"\";\n\n                textarea.hide();\n\n                iframe = $(\"<iframe />\", { title: editor.options.messages.editAreaTitle, frameBorder: \"0\" })[0];\n\n                $(iframe)\n                    .css(\"display\", \"\")\n                    .addClass(\"k-content k-iframe\")\n                    .attr(\"tabindex\", textarea[0].tabIndex)\n                    .insertBefore(textarea);\n\n                // automatically relax same-origin policy if document.domain != location.hostname,\n                // or forcefully relax if options.domain is specified (for document.domain = document.domain scenario)\n                if (specifiedDomain || domain != location.hostname) {\n                    // relax same-origin policy\n                    domainScript = `<script ${editor.options.nonce ? `nonce=\"${editor.options.nonce}\"` : \"\" }>document.domain=\"${domain}\"</script>`;\n                    src = \"javascript:document.write('\" + domainScript + \"')\";\n                    iframe.src = src;\n                }\n\n                if (!iframe.src) {\n                    iframe.src = \"\";\n                }\n\n                wnd = iframe.contentWindow || iframe;\n                doc = wnd.document || iframe.contentDocument;\n\n                // https://github.com/telerik/kendo-ui-core/issues/7561\n                const observer = editor.interSectionObserver = new IntersectionObserver(entries => {\n                    for (const entry of entries) {\n                        if (entry.isIntersecting) {\n                            editor._decorateFormatting(doc.body);\n                            observer.unobserve(iframe);\n                        }\n                    }\n                });\n                observer.observe(iframe);\n\n                lang = document.getElementsByTagName(\"html\")[0].getAttribute(\"lang\") || DEFAULT_LANGUAGE;\n\n                doc.open();\n                doc.write(\n                    \"<!DOCTYPE html><html lang='\" + lang + \"'><head>\" +\n                    \"<meta charset='utf-8' />\" +\n                    \"<title>Kendo UI Editor content</title>\" +\n                    `<style ${editor.options.nonce ? `nonce=\"${editor.options.nonce}\"` : \"\" }>` +\n                        \"html{padding:0;margin:0;height:100%;min-height:100%;cursor:text;}\" +\n                        \"body{padding:0;margin:0;}\" +\n                        \"body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;\" +\n                        \"word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;\" +\n                        (kendo.support.isRtl(textarea) ? \"direction:rtl;\" : \"\") +\n                        (os.ios ? \"word-break:keep-all;\" : \"\") +\n                        (browser.edge || browser.chrome ? \"height:100%;\" : \"\") +\n                        \"}\" +\n                        \"h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}\" +\n                        \"p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}\" +\n                        \"ul,ol{padding-left:2.5em}\" +\n                        \"span{-ms-high-contrast-adjust:none;}\" +\n                        \"a{color:#00a}\" +\n                        \"code{font-size:1.23em}\" +\n                        \"telerik\\\\3Ascript{display: none;}\" +\n                        \".k-table{width:100%;border-spacing:0;margin: 0 0 1em;}\" +\n                        \".k-table td{min-width:1px;padding:.2em .3em;}\" +\n                        \".k-table,.k-table td{outline:0;border: 1px dotted #ccc;}\" +\n                        \".k-table th{outline:0;border: 1px dotted #999;}\" +\n                        \".k-table p{margin:0;padding:0;}\" +\n                        \".k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}\" +\n                        \".k-column-resize-handle {width: 100%; height: 100%;}\" +\n                        \".k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}\" +\n                        \".k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}\" +\n                        \".k-row-resize-handle {display: table; width: 100%; height: 100%;}\" +\n                        \".k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}\" +\n                        \".k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}\" +\n                        \".k-element-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}\" +\n                        \".k-element-resize-handle {width: 100%; height: 100%;}\" +\n                        \".k-element-resize-handle.k-resize-east{cursor:e-resize;}\" +\n                        \".k-element-resize-handle.k-resize-north{cursor:n-resize;}\" +\n                        \".k-element-resize-handle.k-resize-northeast{cursor:ne-resize;}\" +\n                        \".k-element-resize-handle.k-resize-northwest{cursor:nw-resize;}\" +\n                        \".k-element-resize-handle.k-resize-south{cursor:s-resize;}\" +\n                        \".k-element-resize-handle.k-resize-southeast{cursor:se-resize;}\" +\n                        \".k-element-resize-handle.k-resize-southwest{cursor:sw-resize;}\" +\n                        \".k-element-resize-handle.k-resize-west{cursor:w-resize;}\" +\n                        \".k-table.k-element-resizing{opacity:0.6;}\" +\n                        \".k-placeholder{color:grey}\" +\n                        \"k\\\\:script{display:none;}\" +\n                    \"</style>\" +\n                    domainScript +\n                    $.map(stylesheets, function(href) {\n                        return `<link rel='stylesheet' href='${href}' ${editor.options.nonce ? `nonce=\"${editor.options.nonce}\"` : \"\" }>`;\n                    }).join(\"\") +\n                    `</head><body id='${editor.element.attr(\"id\")}' autocorrect='off' contenteditable='true'></body></html>`\n                );\n                doc.close();\n\n                return wnd;\n            },\n\n            _deleteSavedRange: function() {\n                if (\"_range\" in this) {\n                    delete this._range;\n                }\n            },\n\n            _decorateFormatting: function(body) {\n                var formattingElement = this.toolbar.element.find(\"input[data-command=formatting]\"),\n                    dom = kendo.ui.editor.Dom,\n                    component, dataSource, items, i, tag, className, style;\n\n                if (formattingElement.length) {\n                    component = formattingElement.getKendoDropDownList();\n                    if (!component) {\n                        return;\n                    }\n                    dataSource = component.dataSource;\n                    items = dataSource.data();\n\n                    if (body) {\n                        component.list.css(\"background-color\", dom.getEffectiveBackground($(body)));\n                    }\n\n                    if (this.options.unsafeInline !== false) {\n\n                        for (i = 0; i < items.length; i++) {\n                            tag = items[i].tag || \"span\";\n                            className = items[i].className;\n\n                            style = dom.inlineStyle(body, tag, { className: className });\n                            style = style.replace(/\"/g, \"'\");\n\n                            items[i].style = style + \";display:inline-block\";\n                        }\n                    }\n\n                    dataSource.trigger(\"change\");\n                }\n            },\n\n            _appendFormattingMarksStyles: function() {\n                const that = this,\n                    elementId = that.element.attr(\"id\");\n\n                let style, $head;\n\n                style = `<style id='${FORMATTING_MARKS_STYLE_ID + \"-\" + elementId}' ${that.options.nonce ? `nonce=\"${that.options.nonce}\"` : \"\" } >\n                #${elementId} p::after,\n                #${elementId} li::after,\n                #${elementId} h1::after,\n                #${elementId} h2::after,\n                #${elementId} h3::after,\n                #${elementId} h4::after,\n                #${elementId} h5::after,\n                #${elementId} h6::after {content: '\\\\00B6'; color: #6098f2;}\n                #${FORMATTING_MARKS_OVERLAY_WRAPPER_ID + \"-\" + elementId} {\n                    position: absolute;\n                    top: 0;\n                    left: 0;\n                    width: 100%;\n                    z-index: 9999;\n                    pointer-events: none;\n                }\n                #${FORMATTING_MARKS_OVERLAY_ID + \"-\" + elementId} {\n                    width: 100%;\n                    height: 100%;\n                  }\n            </style>`;\n\n                $head = $(that.document.head);\n                $head.find(\"#\" + FORMATTING_MARKS_STYLE_ID + \"-\" + elementId).remove();\n                $head.append(style);\n            },\n\n            _appendFormattingMarksOverlay: function() {\n                const that = this,\n                    elementId = that.element.attr(\"id\");\n\n                that._formattingMarksOverlayWrapper = $(`<div id='${FORMATTING_MARKS_OVERLAY_WRAPPER_ID + \"-\" + elementId}'></div>`);\n                that._formattingMarksOverlay = $(`<svg id='${FORMATTING_MARKS_OVERLAY_ID + \"-\" + elementId}'></svg>`).appendTo(that._formattingMarksOverlayWrapper);\n                that._bodyTopBottomPaddings = parseFloat($(that.body).css(\"padding-top\")) + parseFloat($(that.body).css(\"padding-bottom\"));\n\n                if (that._isInlineEditor()) {\n                    that._formattingMarksOverlayWrapper.insertAfter(that.element);\n                } else {\n                    that._formattingMarksOverlayWrapper.appendTo($(that.document).find(\"html\"));\n                }\n            },\n\n            _destroyFormattingMarksOverlay: function() {\n                const that = this,\n                    elementId = that.element.attr(\"id\");\n\n                $(that.document).find(\"#\" + FORMATTING_MARKS_OVERLAY_WRAPPER_ID + \"-\" + elementId).remove();\n                $(that.document.head).find(\"#\" + FORMATTING_MARKS_STYLE_ID + \"-\" + elementId).remove();\n            },\n\n            _updateFormattingMarksOverlayHeight: function() {\n                const that = this;\n\n                if (that._isInlineEditor()) {\n                    that._formattingMarksOverlayWrapper.height($(that.body).outerHeight());\n                } else {\n                    that._formattingMarksOverlayWrapper.height(that.body.scrollHeight - that._bodyTopBottomPaddings);\n                }\n            },\n\n            _initInlineOverflowWrapper: function() {\n                const that = this,\n                    inlineHeight = that.options.inlineHeight;\n\n                if (that._isInlineEditor() && inlineHeight > -1) {\n                    that._inlineOverflowWrapper = that.element.wrap(`<div class='k-inline-editor-overflow-wrapper k-pos-relative k-overflow-auto'></div>`).parent();\n                    that._inlineOverflowWrapper.height(inlineHeight);\n                }\n            },\n\n            _deregisterHandlers: function() {\n                var handlers = this._handlers;\n\n                for (var i = 0; i < handlers.length; i++) {\n                    var h = handlers[i];\n                    h.element.off(h.type, h.handler);\n                }\n\n                this._handlers = [];\n            },\n\n            _destroyUploadWidget: function() {\n                var editor = this;\n                if (editor._uploadWidget) {\n                    editor._uploadWidget.destroy();\n                    editor._uploadWidget = null;\n                }\n            },\n\n            _endTyping: function() {\n                var keyboard = this.keyboard;\n\n                try {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                        this.saveSelection();\n                    }\n                } catch (e) { }\n            },\n\n            _focusBody: function() {\n                var body = this.body;\n                var iframe = this.wrapper && this.wrapper.find(\"iframe\")[0];\n                var documentElement = this.document.documentElement;\n                var activeElement = kendo._activeElement();\n                var scrollTop;\n\n\n                if (!iframe && body.scrollHeight > body.clientHeight) {\n                    scrollTop = body.scrollTop;\n                    body.focus();\n                    body.scrollTop = scrollTop;\n\n                } else if (activeElement != body && activeElement != iframe) {\n                    scrollTop = documentElement.scrollTop;\n                    body.focus();\n                    documentElement.scrollTop = scrollTop;\n                }\n            },\n\n            _focusOutside: function() {\n                // move focus outside the Editor, see https://github.com/telerik/kendo/issues/3673\n                if (kendo.support.browser.msie && this.textarea) {\n                    var tempInput = $(\"<input />\")\n                        .css({\n                            position: \"fixed\",\n                            left: \"1px\",\n                            top: \"1px\",\n                            width: \"1px\",\n                            height: \"1px\",\n                            \"font-size\": \"0\",\n                            border: \"0\",\n                            opacity: \"0\"\n                    })\n                    .appendTo(document.body).trigger(\"focus\");\n                    tempInput.trigger(\"blur\").remove();\n                }\n            },\n\n            _handleToolbarClick: function(e) {\n                var toolName = e.target.data(\"command\");\n\n                if (toolName && toolName !== \"createTable\") {\n                    this.exec(toolName);\n                }\n            },\n\n            _immutablesContext: function(range) {\n                var editorNS = kendo.ui.editor;\n\n                if (this.options.immutables) {\n                    if (range.collapsed) {\n                        return editorNS.Immutables.immutablesContext(range);\n                    } else {\n                        return editorNS.RangeUtils.editableTextNodes(range).length === 0;\n                    }\n                }\n            },\n\n            _initializeContentElement: function() {\n                var editor = this;\n                var doc;\n                var blurTrigger;\n                var mousedownTrigger;\n\n                if (editor.textarea) {\n                    editor.window = editor._createContentElement(editor.options.stylesheets);\n                    doc = editor.document = editor.window.contentDocument || editor.window.document;\n\n                    // Ensure that body exists as various Firefox plugins can cause a delay of the body creation\n                    // https://github.com/telerik/kendo-ui-core/issues/3515\n                    if (!doc.body) {\n                        var body = doc.createElement(\"body\");\n                        body.setAttribute(\"contenteditable\", \"true\");\n                        body.setAttribute(\"autocorrect\", \"off\");\n                        doc.getElementsByTagName(\"html\")[0].appendChild(body);\n\n                        var interval = setInterval(function() {\n                            if ($(editor.document).find(\"body\").length > 1) {\n                                $(editor.document).find(\"body\").last().remove();\n                                window.clearInterval(interval);\n                            }\n                        },10);\n                    }\n\n                    editor.body = doc.body;\n\n                    blurTrigger = editor.window;\n                    mousedownTrigger = doc;\n\n                    this._registerHandler(doc, \"mouseup\", this._mouseup.bind(this));\n                } else {\n                    editor.window = window;\n                    doc = editor.document = document;\n                    editor.body = editor.element[0];\n\n                    blurTrigger = editor.body;\n                    mousedownTrigger = editor.body;\n\n                    setTimeout(() => {\n                        editor._decorateFormatting(editor.body);\n                    });\n                }\n\n                this._registerHandler(blurTrigger, \"blur\", this._blur.bind(this));\n                editor._registerHandler(mousedownTrigger, \"down\", editor._mousedown.bind(editor));\n\n                try {\n                    doc.execCommand(\"enableInlineTableEditing\", null, false);\n                } catch (e) { }\n\n                if (kendo.support.touch) {\n                    this._registerHandler(doc, {\n                        \"keydown\": function() {\n                            // necessary in iOS when touch events are bound to the page\n                            if (kendo._activeElement() != doc.body) {\n                                editor.window.focus();\n                            }\n                        }\n                    });\n                }\n\n                this._initializePlaceholder();\n\n                this._spellCorrect(editor);\n\n                this._registerHandler(editor.document, {\n                    \"mouseover dragenter\": function(e) {\n                        var height = $(editor.body).height();\n                        var htmlHeight = $(editor.body.parentElement).height();\n\n                        if (htmlHeight > height && e.target.nodeName.toLowerCase() === \"html\") {\n                            editor._cachedHeight = \"\" + editor.body.style.height;\n                            editor.body.style.height = \"100%\";\n                        }\n                    },\n                    \"mouseout dragleave drop contextmenu\": function(e) {\n                        var restoreHeight = function() {\n                            if (editor._cachedHeight !== undefined$1 && e.target === editor.body) {\n                                editor.body.style.height = editor._cachedHeight;\n                                delete editor._cachedHeight;\n                            }\n                        };\n\n                        if (e.type === \"contextmenu\") {\n                            setTimeout(function() {\n                                restoreHeight();\n                            }, 10);\n                        } else {\n                            restoreHeight();\n                        }\n\n                    }\n                });\n\n                this._registerHandler(editor.body, {\n                    \"keydown\": function(e) {\n                        var range;\n\n                        if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute(\"contenteditable\") !== \"true\") {\n                            return false;\n                        }\n\n                        if (e.keyCode === keys.F10) {\n                            editor.toolbar.element.find(\"[tabindex=0]\").first().trigger(\"focus\");\n                            editor.toolbar.preventPopupHide = true;\n                            e.preventDefault();\n                            return;\n                        } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\n                            // skip bom nodes when navigating with arrows\n                            range = editor.getRange();\n                            var left = e.keyCode == keys.LEFT;\n                            var container = range[left ? \"startContainer\" : \"endContainer\"];\n                            var offset = range[left ? \"startOffset\" : \"endOffset\"];\n                            var direction = left ? -1 : 1;\n\n                            var next = offset + direction;\n                            var nextChar = left ? next : offset;\n\n                            if (container.nodeType == 3 && container.nodeValue[nextChar] == \"\\ufeff\") {\n                                range.setStart(container, next);\n                                range.collapse(true);\n                                editor.selectRange(range);\n                            }\n                        }\n\n                        var tools = editor.tools;\n                        var toolName = editor.keyboard.toolFromShortcut(tools, e);\n                        var toolOptions = toolName ? tools[toolName].options : {};\n\n                        if (toolName && !toolOptions.keyPressCommand) {\n                            e.preventDefault();\n\n                            if (!/^(undo|redo)$/.test(toolName)) {\n                                editor.keyboard.endTyping(true);\n                            }\n\n                            editor.trigger(\"keydown\", e);\n                            editor.exec(toolName);\n                            editor._runPostContentKeyCommands(e);\n\n                            return false;\n                        }\n\n                        editor.keyboard.clearTimeout();\n\n                        editor.keyboard.keydown(e);\n                    },\n                    \"keypress\": function(e) {\n                        setTimeout(function() {\n                            editor._runPostContentKeyCommands(e);\n                            editor._showElementResizeHandles();\n                        }, 0);\n                    },\n                    \"keyup\": function(e) {\n                        var selectionCodes = [\n                           keys.BACKSPACE,\n                           keys.TAB,\n                           keys.PAGEUP,\n                           keys.PAGEDOWN,\n                           keys.END,\n                           keys.HOME,\n                           keys.LEFT,\n                           keys.UP,\n                           keys.RIGHT,\n                           keys.DOWN,\n                           keys.INSERT,\n                           keys.DELETE\n                        ];\n\n                        if ($.inArray(e.keyCode, selectionCodes) > -1 || (e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey)) {\n                            window.clearTimeout(this._refreshInterval);\n                            this._refreshInterval = window.setTimeout(function() {\n                                editor._selectionChange();\n                            }, REFRESH_INTERVAL);\n                        }\n\n                        if (e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) {\n                            editor._handleSpaceAndNewLines();\n                        }\n\n                        editor.keyboard.keyup(e);\n                    },\n                    \"click\": function(e) {\n                        var dom = kendo.ui.editor.Dom, range;\n\n                        if (dom.name(e.target) === \"img\") {\n                            range = editor.createRange();\n                            range.selectNode(e.target);\n                            editor.selectRange(range);\n                        }\n                    },\n                    \"cut copy paste drop dragover\": function(e) {\n                        editor.clipboard[\"on\" + e.type](e);\n                        editor._handleSpaceAndNewLines();\n                    },\n                    \"focusin\": function() {\n                        if (editor.body.hasAttribute(\"contenteditable\")) {\n                            $(this).addClass(\"k-active\");\n                            // To be moved to the Editor\n                            editor._showWindow();\n                            editor._togglePlaceholder(false);\n                        }\n                    },\n                    \"focusout\": function() {\n                        setTimeout(function() {\n                            var active = kendo._activeElement();\n                            var body = editor.body;\n                            // All below to be moved to the Editor\n                            var toolbar = editor.toolbar;\n\n                            if (toolbar.options.popup) {\n                                var toolbarContainerElement = editor.windowInstance.element.get(0);\n                                if (toolbarContainerElement && !($.contains(toolbarContainerElement, active) || toolbarContainerElement == active)) {\n                                    toolbar.preventPopupHide = false;\n                                }\n                            }\n\n                            if (active != body && !$.contains(body, active) && !editor._toolbarFocused() && !toolbar.preventPopupHide && !$(active).hasClass(\"k-context-menu\") && !$(active).hasClass(\"k-colorpalette\")) {\n                                $(body).removeClass(\"k-active\");\n                                editor._hideWindow();\n                            }\n\n                            editor._togglePlaceholder(!editor.value().trim());\n                        }, 10);\n                    }\n                });\n\n                editor._initializeColumnResizing();\n                editor._initializeRowResizing();\n                editor._initializeElementResizing();\n            },\n\n            _initializeImmutables: function() {\n                var that = this,\n                    editorNS = kendo.ui.editor;\n\n                if (that.options.immutables) {\n                    that.immutables = new editorNS.Immutables(that);\n                }\n            },\n\n            _initializePlaceholder: function() {\n                var that = this,\n                    placeholder = that.options.placeholder,\n                    style, $head;\n\n                if (!that.textarea || !placeholder) {\n                    return;\n                }\n\n                style = `<style id='${PLACEHOLDER_TAG_ID}' ${that.options.nonce ? `nonce=\"${that.options.nonce}\"` : \"\" } >.` +\n                            PLACEHOLDER_CLASS + \":before { content: '\" + placeholder + \"'; }\" +\n                        \"</style>\";\n\n                $head = $(that.document.head);\n                $head.find(\"#\" + PLACEHOLDER_TAG_ID).remove();\n                $head.append(style);\n\n                that._togglePlaceholder(!that.value().trim());\n            },\n\n            _initToolbar: function(toolbarContainer) {\n                var that = this,\n                    tools, defaults, toolbarOptions;\n\n                that.tools = [];\n                [tools, defaults] = that._processToolbarItems(that.options.tools);\n                that._setNativeTools();\n\n                toolbarOptions = {\n                    tools: tools,\n                    defaultTools: defaults,\n                    parentMessages: that.options.messages,\n                    resizable: that.options.resizable && that.options.resizable.toolbar,\n                    toggle: that._handleToolbarClick.bind(this),\n                    click: that._handleToolbarClick.bind(this),\n                    navigateOnTab: that.options.navigateOnTab,\n                    evaluateTemplates: true\n                };\n\n                that.toolbar = new kendo.ui.ToolBar(toolbarContainer, toolbarOptions);\n\n                that._bindTools();\n                that.bind(\"select\", that._refreshTools.bind(that));\n\n                toolbarContainer.on(\"mousedown\" + NS, \".k-toolbar-tool\", function(e) {\n                    if (!$(e.target).is(\"input\")) {\n                        e.preventDefault();\n                    }\n                });\n\n                if (!that.textarea) {\n                    that._initToolbarWindow(toolbarContainer);\n                }\n            },\n\n            _initToolbarWindow: function(toolbarEl) {\n                var that = this;\n\n                this.windowInstance = toolbarEl\n                    .wrap(\"<div class='editorToolbarWindow k-editor-window' />\")\n                    .parent()\n                    .prepend(\"<span class='k-editortoolbar-dragHandle'>\" + kendo.ui.icon(\"handle-drag\") + \"</span>\")\n                    .kendoWindow({\n                        title: false,\n                        resizable: false,\n                        draggable: {\n                            dragHandle: \".k-editortoolbar-dragHandle\"\n                        },\n                        animation: {\n                            open: { effects: \"fade:in\" },\n                            close: { effects: \"fade:out\" }\n                        },\n                        minHeight: 42,\n                        visible: false,\n                        autoFocus: false,\n                        actions: [],\n                        dragend: function() {\n                            this._moved = true;\n                        }\n                    })\n                    .on(\"mousedown\", function(e) {\n                        if (!$(e.target).is(TOOLBAR_ALLOWED_CLOSE_SELECTORS)) {\n                            that.toolbar.preventPopupHide = true;\n                        }\n                    })\n                    .on(\"focusout\", function() {\n                        that.element.focusout();\n                    })\n                    .data(\"kendoWindow\");\n            },\n\n            _mousedown: function(e) {\n                var editor = this;\n                editor._selectionStarted = true;\n\n                if ($(editor.body).parents('.k-window').length) {\n                    e.stopPropagation();\n                }\n\n                // handle middle-click and ctrl-click on links\n                if (browser.gecko) {\n                    return;\n                }\n\n                var target = $(e.target).closest(\"a[href]\");\n\n                if ((e.which == 2 || (e.which == 1 && e.ctrlKey)) && target && target.is(\"a[href]\")) {\n                    window.open(target.attr(\"href\"), \"_new\");\n                }\n\n                if (e.target.tagName && e.target.tagName.toLowerCase() === \"html\") {\n                    setTimeout(function() {\n                        editor.body.focus();\n                    }, 0);\n                }\n            },\n\n            _mouseup: function(e) {\n                var that = this;\n\n                if (kendo.support.mobileOS.ios && e && $(e.target).is(SELECT_OVERLAY_SELECTOR)) {\n                    return;\n                }\n\n                if (that._selectionStarted) {\n                    setTimeout(function() {\n                        that._selectionChange();\n                    }, 1);\n                }\n            },\n\n            _populateValue: function(options, domElement) {\n                var that = this,\n                    editorNS = kendo.ui.editor,\n                    dom = editorNS.Dom,\n                    value, comments;\n\n                if (options && options.value) {\n                    value = options.value;\n                } else if (that.textarea) {\n                    // indented HTML introduces problematic ranges in IE\n                    value = domElement.value;\n\n                    if (!value.replace(/\\s/g, '').length) {\n                        value = value.replace(/\\s/g, '');\n                    }\n\n                    // revert encoding of value when content is fetched from cache\n                    if (that.options.encoded && domElement.defaultValue && domElement.defaultValue.trim().length) {\n                        value = domElement.defaultValue;\n                    }\n\n                    var deserializedRoot = editorNS.Serializer.htmlToDom(value, $(\"<div></div>\")[0], that.options.deserialization);\n                    comments = dom.getAllComments(deserializedRoot);\n                    value = EditorUtils.cacheComments(value, comments);\n                    value = value.replace(/[\\r\\n\\v\\f\\t ]+/ig, \" \");\n                    value = EditorUtils.retrieveComments(value, comments);\n                } else {\n                    value = domElement.innerHTML;\n                }\n\n                that.value(value || '\\ufeff');\n            },\n\n            _resetGroups: function(current) {\n                var result = {};\n\n                Object.keys(current).map(key => {\n                    result[key + \"_\"] = current[key];\n                });\n\n                return result;\n            },\n\n            _processToolbarItems: function(optionsTools) {\n                var flatDefaultTools = {},\n                    processedObject = {},\n                    tools = [],\n                    currentGroups = $.extend(true, {}, toolGroups),\n                    i, j, t, name, guidGroupName;\n\n                for (i = 0; i < optionsTools.length; i++) {\n                    t = optionsTools[i];\n\n                    if (Array.isArray(t)) {\n                        guidGroupName = kendo.guid();\n\n                        for (j = 0; j < t.length; j++) {\n                            [flatDefaultTools, name] = this._processToolOptions(t[j], flatDefaultTools);\n\n                            if (!name) {\n                                continue;\n                            }\n\n                            flatDefaultTools[name].gr = guidGroupName;\n                        }\n                    } else {\n                        [flatDefaultTools, name] = this._processToolOptions(t, flatDefaultTools);\n\n                        if (!name) {\n                            continue;\n                        } else if (name === \"separator\") {\n                            currentGroups = this._resetGroups(currentGroups);\n                        }\n\n                        Object.keys(currentGroups).map(key => {\n                            var group = currentGroups[key];\n\n                            if (group.includes(name)) {\n                                flatDefaultTools[name].gr = key;\n                            }\n                        });\n                    }\n                }\n\n                Object.values(flatDefaultTools).map((tool) => {\n                    var group = tool.gr;\n\n                    delete tool.gr;\n\n                    if (group === undefined$1) {\n                        processedObject[tool.name] = tool;\n                    } else {\n                        if (!processedObject[group]) {\n                            processedObject[group] = [];\n                        }\n\n                        processedObject[group].push(tool);\n                    }\n                });\n\n                tools = Object.values(processedObject).map((g) => {\n                    var result;\n\n                    if (g.length) {\n                        result = g.map((to) => to.name);\n                    } else {\n                        result = g.name;\n                    }\n\n                    if (result.length === 1) {\n                        result = result[0];\n                    }\n\n                    return result;\n                });\n\n                return [tools, flatDefaultTools];\n            },\n\n            _processDefaultTool: function(tool, defaultTools) {\n                var name = tool.name,\n                    result = {},\n                    options;\n\n                if ($.isPlainObject(tool)) {\n                    if (name && defaultTools[name]) {\n                        // configured tool\n                        result = extend({}, defaultTools[name]);\n                        extend(result.options, tool);\n                    } else {\n                        // custom tool\n                        options = extend({ icon: \"gear\", type: \"button\" }, tool);\n\n                        if (!options.name) {\n                            options.name = \"custom\";\n                        }\n\n                        options.cssClass = \"k-\" + options.name;\n\n                        result = {\n                            options: options\n                        };\n\n                        name = options.name;\n                    }\n                } else if (defaultTools[tool]) {\n                    name = tool;\n                    result = defaultTools[name];\n                } else {\n                    return null;\n                }\n\n                this.tools[name] = result;\n\n                return result;\n            },\n\n            _processToolOptions: function(t, flatDefaultTools) {\n                var that = this,\n                    defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools),\n                    tool, name, view, shortcuts, options, uiOptions, icon, toolOptions, originalOptions, palette;\n\n                tool = this._processDefaultTool(t, defaultTools);\n\n                if (!tool) {\n                    return [flatDefaultTools, null];\n                }\n\n                options = tool.options;\n                name = options.name;\n                uiOptions = options.ui || {};\n                icon = EditorUtils.getToolCssClass(options.name, options.icon);\n\n                // We want to preserve any custom properties from the original tool object.\n                originalOptions = $.isPlainObject(t) ? $.extend({}, t) : {};\n                delete originalOptions.items;\n\n                toolOptions = $.extend({\n                    name: options.name,\n                    command: options.command,\n                    template: options.template,\n                    type: \"button\",\n                    icon: icon,\n                    showText: \"overflow\",\n                    showIcon: \"both\"\n                }, uiOptions, originalOptions);\n\n                if (options.tooltip) {\n                    if (!toolOptions.attributes) {\n                        toolOptions.attributes = {};\n                    }\n\n                    toolOptions.attributes.title = options.tooltip;\n                }\n                if (options.exec) {\n                    toolOptions.click = options.exec.bind(that);\n                    delete toolOptions.exec;\n                }\n\n                if (toolOptions.component === \"ColorPicker\") {\n                    if (options.palette !== undefined$1 || uiOptions.palette !== kendo.ui.editor.ColorTool.fn.options.palette) {\n                        palette = options.palette || kendo.ui.editor.ColorTool.fn.options.palette;\n                        view = options.palette !== undefined$1 && !options.palette ? \"gradient\" : \"palette\";\n                        toolOptions.componentOptions.palette = view === \"palette\" ? palette : undefined$1;\n                        toolOptions.componentOptions.views = [view];\n                        toolOptions.componentOptions.preview = view === \"gradient\";\n                        toolOptions.componentOptions.input = view === \"gradient\";\n                        toolOptions.componentOptions.buttons = view === \"gradient\";\n\n                        if (view === \"gradient\") {\n                            delete toolOptions.componentOptions.columns;\n                        }\n                    }\n                    if (view === \"palette\" && options.columns) {\n                        toolOptions.componentOptions.columns = options.columns;\n                    }\n                }\n\n                if (toolOptions.component === \"DropDownList\" || toolOptions.component === \"ComboBox\") {\n                    if (!toolOptions.componentOptions) {\n                        toolOptions.componentOptions = {};\n                    }\n\n                    if (!toolOptions.componentOptions.dataSource) {\n                        if (that.options[name] && Array.isArray(that.options[name])) {\n                            toolOptions.componentOptions.dataSource = that.options[name];\n                        } else {\n                            toolOptions.componentOptions.dataSource = options.items;\n                        }\n                    }\n                }\n                if (toolOptions.template) {\n                    delete toolOptions.type;\n                }\n\n                shortcuts = this._shortcutSequence(name);\n\n                if (shortcuts !== \"\") {\n                    if (!toolOptions.attributes) {\n                        toolOptions.attributes = {};\n                    }\n\n                    toolOptions.attributes[\"aria-keyshortcuts\"] = shortcuts;\n                }\n\n                flatDefaultTools[name] = toolOptions;\n\n                return [flatDefaultTools, name];\n            },\n\n            _refreshTools: function() {\n                var that = this,\n                    range = that.getRange(),\n                    editorNS = kendo.ui.editor,\n                    rangeUtils = editorNS.RangeUtils,\n                    nodes = rangeUtils.textNodes(range),\n                    immutables = that.options.immutables,\n                    immutablesContext = that._immutablesContext(range),\n                    defaultTools = that.tools;\n\n                nodes = editorNS.Dom.filterBy(nodes, editorNS.Dom.htmlIndentSpace, true);\n\n                if (!nodes.length) {\n                    nodes = [range.startContainer];\n                }\n\n                that.toolbar.element.find(\"[data-command]\")\n                    .filter((i, el) => $(el).find(\"[data-command]\").length === 0)\n                    .each(function() {\n                        var toolName = this.getAttribute(\"data-command\"),\n                            tool = defaultTools[toolName],\n                            ui;\n\n                        if (tool) {\n                            ui = $(this);\n\n                            if (tool.update) {\n                                tool.update(ui, nodes, that.undoRedoStack);\n                            }\n\n                            if (immutables) {\n                                that._updateImmutablesState(tool, ui, immutablesContext);\n                            }\n                        }\n                    });\n            },\n\n            _registerHandler: function(element, type, handler) {\n                var editor = this;\n                var NS = \".kendoEditor\";\n                var eventNames;\n                var i;\n\n                element = $(element);\n\n                if (!this._handlers) {\n                    this._handlers = [];\n                }\n\n                if (element.length) {\n                    if ($.isPlainObject(type)) {\n                        for (var t in type) {\n                            if (type.hasOwnProperty(t)) {\n                                this._registerHandler(element, t, type[t]);\n                            }\n                        }\n                    } else {\n                        //map the original event to handle interaction on mobile platforms\n                        eventNames = kendo.applyEventMap(type).split(\" \");\n\n                        for (i = 0; i < eventNames.length; i++) {\n                            editor._handlers.push({\n                                element: element,\n                                type: eventNames[i] + NS,\n                                handler: handler\n                            });\n\n                            element.on(eventNames[i] + NS, handler);\n                        }\n                    }\n                }\n            },\n\n            _runPostContentKeyCommands: function(e) {\n                var range = this.getRange();\n                var tools = this.keyboard.toolsFromShortcut(this.tools, e);\n\n                for (var i = 0; i < tools.length; i++) {\n                    var tool = tools[i];\n                    var o = tool.options;\n                    if (!o.keyPressCommand) {\n                        continue;\n                    }\n\n                    var cmd = new o.command({ range: range });\n                    if (cmd.changesContent()) {\n                        this.keyboard.endTyping(true);\n                        this.exec(tool.name);\n                    }\n                }\n\n                this._handleSpaceAndNewLines();\n            },\n\n            _handleSpaceAndNewLines: function() {\n                const that = this,\n                    refreshDelay = that.options.formattingMarksRefreshDelay,\n                    editorNS = kendo.ui.editor,\n                    applyFormattingMarks = editorNS.applyFormattingMarks,\n                    clearFormattingMarksOverlay = editorNS.clearFormattingMarksOverlay;\n\n                if (that._toggledFormattingMarks) {\n                    if (that._formattingMarksOverlay.children().length) {\n                        clearFormattingMarksOverlay(that);\n                    }\n\n                    if (refreshDelay) {\n                        clearTimeout(that._formattingMarksTimeout);\n                        that._formattingMarksTimeout = setTimeout(() => applyFormattingMarks(that), refreshDelay);\n                    } else {\n                        applyFormattingMarks(that);\n                    }\n\n                }\n            },\n\n            _selectionChange: function() {\n                this._selectionStarted = false;\n                this.saveSelection();\n                this.trigger(\"select\", {});\n            },\n\n            _setOptionsTools: function(optionsTools) {\n                var that = this,\n                    toolbar = that.toolbar,\n                    toolbarContainer = toolbar.element,\n                    tools, defaults, toolbarOptions;\n\n                toolbar.destroy();\n                toolbarContainer.empty();\n\n                that.tools = [];\n                [tools, defaults] = that._processToolbarItems(optionsTools);\n                that._setNativeTools();\n\n                toolbarOptions = {\n                    tools: tools,\n                    defaultTools: defaults,\n                    parentMessages: that.options.messages,\n                    resizable: that.options.resizable && that.options.resizable.toolbar,\n                    toggle: that._handleToolbarClick.bind(this),\n                    click: that._handleToolbarClick.bind(this)\n                };\n\n                that.toolbar = new kendo.ui.ToolBar(toolbarContainer, toolbarOptions);\n\n                that._bindTools();\n            },\n\n            _setNativeTools: function() {\n                var defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools),\n                    i;\n\n                for (i = 0; i < NATIVE_TOOLS.length; i++) {\n                    if (!this.tools[NATIVE_TOOLS[i]]) {\n                        this.tools[NATIVE_TOOLS[i]] = defaultTools[NATIVE_TOOLS[i]];\n                    }\n                }\n            },\n\n            _setupHeight: function(type) {\n                var that = this;\n\n                if (type == \"textarea\") {\n                    setTimeout(function() {\n                        var heightStyle = that.wrapper[0].style.height;\n                        var expectedHeight = parseInt(heightStyle, 10);\n                        var actualHeight = that.wrapper.height();\n                        if (heightStyle.indexOf(\"px\") > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\n                            that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\n                        }\n                    });\n                }\n            },\n\n            _setupKeyboard: function() {\n                var that = this,\n                    editorNS = kendo.ui.editor;\n\n                that.keyboard = new editorNS.Keyboard([\n                    new editorNS.BackspaceHandler(that),\n                    new editorNS.TypingHandler(that),\n                    new editorNS.SystemHandler(that),\n                    new editorNS.SelectAllHandler(that)\n                ]);\n            },\n\n            _setupType: function(element) {\n                var domElement = element[0],\n                    type = kendo.ui.editor.Dom.name(domElement),\n                    id = domElement.id,\n                    toolbarContainer;\n\n                if (!id) {\n                    id = kendo.guid();\n                    domElement.setAttribute(\"id\", id);\n                }\n\n                if (type == \"textarea\") {\n                    this._wrapTextarea();\n\n                    toolbarContainer = this.wrapper.find(\".k-editor-toolbar\");\n                    toolbarContainer.attr(\"aria-controls\", id);\n                } else {\n                    $(domElement).attr(\"contenteditable\", true).addClass(\"k-editor k-editor-inline\");\n                    toolbarContainer = $('<div class=\"k-editor-toolbar\"/>').insertBefore(element);\n                }\n\n                return toolbarContainer;\n            },\n\n            _isInlineEditor: function() {\n                return this.element.hasClass(\"k-editor-inline\");\n            },\n\n            _shortcutSequence: function(name) {\n                var tool = kendo.ui.Editor.defaultTools[name],\n                    res = \"\",\n                    options;\n\n                if (!tool || !tool.options) {\n                    return res;\n                }\n\n                options = tool.options;\n\n                if (options.ctrl) {\n                    res += \"Ctrl+\";\n                }\n\n                if (options.shift) {\n                    res += \"Shift+\";\n                }\n\n                if (options.alt) {\n                    res += \"Alt+\";\n                }\n\n                if (options.key) {\n                    res += options.key;\n                }\n\n                return res;\n            },\n\n            _spellCorrect: function(editor) {\n                var beforeCorrection;\n                var falseTrigger = false;\n\n                this._registerHandler(editor.body, {\n                    \"contextmenu\": function() {\n                        editor.one(\"select\", function() {\n                            beforeCorrection = null;\n                        });\n\n                        editor._spellCorrectTimeout = setTimeout(function() {\n                            beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange(), editor.body);\n                            falseTrigger = false;\n                        }, 10);\n                    },\n                    \"input\": function() {\n                        if (!beforeCorrection) {\n                            return;\n                        }\n\n                        if (kendo.support.browser.mozilla && !falseTrigger) {\n                            falseTrigger = true;\n                            return;\n                        }\n\n                        kendo.ui.editor._finishUpdate(editor, beforeCorrection);\n                    }\n                });\n            },\n\n            _togglePlaceholder: function(show) {\n                var that = this,\n                    body = that.body,\n                    $body = $(body),\n                    placeholder = that.options.placeholder;\n\n                if (!that.textarea || !placeholder) {\n                    return;\n                }\n\n                $body.attr('aria-label', function() {\n                    return show ? placeholder : \"\";\n                });\n\n                $body.toggleClass(PLACEHOLDER_CLASS, show);\n            },\n\n            _toolbarFocused: function() {\n                var active = kendo._activeElement(),\n                    popup = this.windowInstance,\n                    overflowPopup = this.overflowPopup;\n\n                return (popup && $(active).closest(popup.wrapper).length) ||\n                    (overflowPopup && overflowPopup.visible());\n            },\n\n            _updateImmutablesState: function(tool, ui, immutablesContext) {\n                var toolbar = this.toolbar,\n                    name = tool.name,\n                    uiElement = ui.closest(\".k-toolbar-tool\"),\n                    trackImmutables = tool.options.trackImmutables,\n                    editorNS = kendo.ui.editor;\n\n                if (trackImmutables === undefined$1) {\n                    trackImmutables = $.inArray(name, editorNS.Immutables.toolsToBeUpdated) > -1;\n                }\n\n                if (trackImmutables) {\n                    if (immutablesContext) {\n                        toolbar.hide(uiElement);\n                    } else {\n                        toolbar.show(uiElement);\n                    }\n                }\n            },\n\n            _wrapTextarea: function() {\n                var that = this,\n                    textarea = that.element,\n                    w = textarea[0].style.width,\n                    h = textarea[0].style.height,\n                    template = EditorUtils.editorWrapperTemplate(),\n                    editorWrap = $(template).insertBefore(textarea),\n                    editArea = editorWrap.find(\".k-editable-area\");\n\n                editorWrap.css({\n                    \"width\": w,\n                    \"height\": h\n                });\n\n                textarea.attr(\"autocomplete\", \"off\")\n                    .appendTo(editArea).addClass(\"k-content k-raw-content\").css(\"display\", \"none\");\n\n                that.textarea = textarea;\n                that.wrapper = editorWrap;\n            },\n\n            // Resizing methods\n            _resizable: function() {\n                let that = this;\n                let resizable = this.options.resizable;\n                let isResizable = $.isPlainObject(resizable) ? (resizable.content === undefined$1 || resizable.content === true) : resizable;\n                let resizableMin = $.isPlainObject(resizable.min) ? resizable.min : { minHeight: resizable.min };\n                let resizableMax = $.isPlainObject(resizable.max) ? resizable.max : { maxHeight: resizable.max };\n\n                if (isResizable && this.textarea) {\n                    that.wrapper.addClass('k-editor-resizable');\n\n                    if (resizableMin.minHeight) {\n                        that.wrapper.css(\"min-height\", resizableMin.minHeight);\n                    }\n\n                    if (resizableMax.maxHeight) {\n                        that.wrapper.css(\"max-height\", resizableMax.maxHeight);\n                    }\n\n                    if (resizableMin.minWidth) {\n                        that.wrapper.css(\"min-width\", resizableMin.minWidth);\n                    }\n\n                    if (resizableMax.maxWidth) {\n                        that.wrapper.css(\"max-width\", resizableMax.maxWidth);\n                    }\n\n                    that.resizeObserver = new ResizeObserver(() => {\n                        clearTimeout(that._resizeTimeOut);\n\n                        that._resizeTimeOut = setTimeout(function() {\n                            that.toolbar.resize();\n                            that._handleSpaceAndNewLines();\n                        }, 50);\n\n                    });\n                    that.resizeObserver.observe(that.wrapper[0]);\n                }\n            },\n\n            _destroyResizings: function() {\n                var editor = this;\n\n                editor._destroyElementResizing();\n                kendo.ui.editor.ElementResizingFactory.current.dispose(editor);\n                editor._destroyRowResizing();\n                kendo.ui.editor.RowResizing.dispose(editor);\n                editor._destroyColumnResizing();\n                kendo.ui.editor.ColumnResizing.dispose(editor);\n            },\n\n            _initializeElementResizing: function() {\n                var editor = this;\n\n                kendo.ui.editor.ElementResizingFactory.current.create(editor);\n\n                editor._showElementResizeHandlesProxy = editor._showElementResizeHandles.bind(editor);\n                editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n            },\n\n            _destroyElementResizing: function() {\n                var editor = this;\n                var elementResizing = editor.elementResizing;\n\n                if (elementResizing) {\n                    elementResizing.destroy();\n                    editor.elementResizing = null;\n                }\n\n                if (editor._showElementResizeHandlesProxy) {\n                    editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n                }\n            },\n\n            _showElementResizeHandles: function() {\n                var editor = this;\n                var elementResizing = editor.elementResizing;\n\n                if (elementResizing && elementResizing.element && elementResizing.element.parentNode) {\n                    elementResizing.showResizeHandles();\n                } else if (elementResizing && (!elementResizing.element || !elementResizing.element.parentNode)) {\n                    editor._destroyElementResizing();\n                }\n            },\n\n            _initializeColumnResizing: function() {\n                kendo.ui.editor.ColumnResizing.create(this);\n            },\n\n            _destroyColumnResizing: function() {\n                var editor = this;\n\n                if (editor.columnResizing) {\n                    editor.columnResizing.destroy();\n                    editor.columnResizing = null;\n                }\n            },\n\n            _initializeRowResizing: function() {\n                kendo.ui.editor.RowResizing.create(this);\n            },\n\n            _destroyRowResizing: function() {\n                var editor = this;\n\n                if (editor.rowResizing) {\n                    editor.rowResizing.destroy();\n                    editor.rowResizing = null;\n                }\n            },\n\n            // ToolBar Window methods\n            _getWindowWidth: function() {\n                var that = this,\n                    wrapper = that.windowInstance.wrapper,\n                    editorElement = that.element;\n\n                return outerWidth(editorElement) - parseInt(wrapper.css(\"border-left-width\"), 10) - parseInt(wrapper.css(\"border-right-width\"), 10);\n            },\n\n            _hideWindow: function() {\n                if (this.windowInstance) {\n                    this.windowInstance.close();\n                }\n            },\n\n            _overlapsWindow: function(box) {\n                var toolbarWrapper = this.windowInstance.wrapper,\n                    toolbarWrapperOffset = toolbarWrapper.offset(),\n                    toolbarWrapperLeft = toolbarWrapperOffset.left,\n                    toolbarWrapperTop = toolbarWrapperOffset.top,\n                    boxOffset = box.offset(),\n                    boxOffsetLeft = boxOffset.left,\n                    boxOffsetTop = boxOffset.top;\n\n                return !(boxOffsetLeft + box.width() < toolbarWrapperLeft ||\n                        boxOffsetLeft > toolbarWrapperLeft + toolbarWrapper.width() ||\n                        boxOffsetTop + box.height() < toolbarWrapperTop ||\n                        boxOffsetTop > toolbarWrapperTop + toolbarWrapper.height());\n            },\n\n            _showWindow: function() {\n                var that = this,\n                    windowInstance = that.windowInstance,\n                    wrapper, editorElement, editorOffset,\n                    browser = kendo.support.browser;\n\n                if (windowInstance) {\n                    wrapper = windowInstance.wrapper;\n                    editorElement = that.element;\n\n                    if (!wrapper.is(\":visible\") || !that.windowInstance.options.visible) {\n\n                        if (!wrapper[0].style.width) {\n                            wrapper.width(this._getWindowWidth());\n                        }\n\n                        // track content position when other parts of page change\n                        if (!windowInstance._moved) {\n                            editorOffset = editorElement.offset();\n                            wrapper.css({\n                                top: Math.max(0, parseInt(editorOffset.top, 10) - outerHeight(wrapper) - parseInt(that.windowInstance.element.css(\"padding-bottom\"), 10)),\n                                left: Math.max(0, parseInt(editorOffset.left, 10))\n                            });\n                        }\n\n                        if ((browser.msie || browser.edge) && that._overlapsWindow(editorElement)) {\n                            setTimeout(function() {\n                                windowInstance.open();\n                            }, 0);\n                        } else {\n                            windowInstance.open();\n                        }\n                    }\n                }\n            }\n        });\n\n        Editor.defaultTools = {};\n\n        kendo.ui.plugin(Editor);\n\n        var Tool = Class.extend({\n            init: function(options) {\n                this.options = options;\n            },\n\n            command: function(commandArguments) {\n                return new this.options.command(commandArguments);\n            },\n\n            update: $.noop\n        });\n\n        Tool.exec = function(editor, name, value) {\n            editor.exec(name, { value: value });\n        };\n\n        var UndoTool = Tool.extend({\n            command: $.noop,\n            update: function(ui, nodes, undoRedoStack) {\n                var that = this,\n                    name = that.options.name,\n                    toolbar = ui.closest(\".k-toolbar\").data(\"kendoToolBar\");\n\n                switch (name) {\n                    case \"undo\":\n                        toolbar.enable(ui, undoRedoStack.canUndo());\n                        break;\n                    case \"redo\":\n                        toolbar.enable(ui, undoRedoStack.canRedo());\n                        break;\n                    default:\n                        break;\n                }\n\n                ui.removeAttr(\"disabled\");\n            }\n        });\n\n        EditorUtils.registerTool(\"separator\", new Tool({ ui: { type: \"separator\" } }));\n        EditorUtils.registerTool(\"undo\", new UndoTool({ key: \"Z\", ctrl: true }));\n        EditorUtils.registerTool(\"redo\", new UndoTool({ key: \"Y\", ctrl: true }));\n\n        // Exports ================================================================\n\n        var emptyElementContent = '\\ufeff';\n        var emptyTableCellContent = emptyElementContent;\n\n        if (browser.msie || browser.edge) {\n            emptyTableCellContent = emptyElementContent = \"&nbsp;\";\n        }\n\n        extend(kendo.ui, {\n            editor: {\n                EditorUtils: EditorUtils,\n                Tool: Tool,\n                emptyElementContent: emptyElementContent,\n                emptyTableCellContent: emptyTableCellContent\n            }\n        });\n\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Editor.prototype);\n            Editor.prototype._drawPDF = function() {\n                return kendo.drawing.drawDOM(this.body, this.options.pdf);\n            };\n            Editor.prototype.saveAsPDF = function() {\n                var progress = new $.Deferred();\n                var promise = progress.promise();\n                var args = { promise: promise };\n\n                if (this.trigger(\"pdfExport\", args)) {\n                    return;\n                }\n\n                var options = this.options.pdf;\n\n                this._drawPDF(progress)\n                .then(function(root) {\n                    return kendo.drawing.exportPDF(root, options);\n                })\n                .done(function(dataURI) {\n                    kendo.saveAs({\n                        dataURI: dataURI,\n                        fileName: options.fileName,\n                        proxyURL: options.proxyURL,\n                        proxyTarget: options.proxyTarget,\n                        forceProxy: options.forceProxy\n                    });\n                    progress.resolve();\n                })\n                .fail(function(err) {\n                    progress.reject(err);\n                });\n\n                return promise;\n            };\n        }\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        map = $.map,\n        extend = $.extend,\n        browser = kendo.support.browser,\n        STYLE = \"style\",\n        FLOAT = \"float\",\n        CSSFLOAT = \"cssFloat\",\n        STYLEFLOAT = \"styleFloat\",\n        CLASS = \"class\",\n        KMARKER = \"k-marker\";\n\n    function makeMap(items) {\n        var obj = {},\n            i, len;\n\n        for (i = 0, len = items.length; i < len; i++) {\n            obj[items[i]] = true;\n        }\n        return obj;\n    }\n\n    var empty = makeMap(\"area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed\".split(\",\")),\n        nonListBlockElements = \"p,div,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption\".split(\",\"),\n        blockElements = nonListBlockElements.concat([\"ul\",\"ol\",\"li\"]),\n        block = makeMap(blockElements),\n        selfClosing = makeMap(\"area,base,br,col,command,embed,hr,img,input,keygen,link,menuitem,meta,param,source,track,wbr\".split(\",\")),\n        inlineElements = \"span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby\".split(\",\"),\n        inline = makeMap(inlineElements),\n        fillAttrs = makeMap(\"checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected\".split(\",\")),\n        nonEmptyNonTextContentElements = [\"hgroup\",\"ol\",\"ul\",\"dl\",\"object\",\"video\",\"audio\",\"table\",\"colgroup\",\"tbody\",\"thead\",\"tfoot\",\"tr\",\"select\",\"optgroup\"];\n\n    var normalize = function(node) {\n        if (node.nodeType == 1) {\n            node.normalize();\n        }\n    };\n\n    if (browser.msie && browser.version >= 8) {\n        normalize = function(parent) {\n            if (parent.nodeType == 1 && parent.firstChild) {\n                var prev = parent.firstChild,\n                    node = prev;\n\n                normalize(node);\n\n                while (true) {\n                    node = node.nextSibling;\n\n                    if (!node) {\n                        break;\n                    }\n\n                    normalize(node);\n\n                    if (node.nodeType == 3 && prev.nodeType == 3) {\n                        node.nodeValue = prev.nodeValue + node.nodeValue;\n                        Dom.remove(prev);\n                    }\n\n                    prev = node;\n                }\n            }\n        };\n    }\n\n    var whitespace = /^\\s+$/,\n        emptyspace = /^[\\n\\r\\t]+$/,\n        rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i,\n        bom = /\\ufeff/g,\n        whitespaceOrBom = /^(\\s+|\\ufeff)$/,\n        persistedScrollTop,\n        cssAttributes =\n               (\"color,padding-left,padding-right,padding-top,padding-bottom,\" +\n                \"background-color,background-attachment,background-image,background-position,background-repeat,\" +\n                \"border-top-style,border-top-width,border-top-color,\" +\n                \"border-bottom-style,border-bottom-width,border-bottom-color,\" +\n                \"border-left-style,border-left-width,border-left-color,\" +\n                \"border-right-style,border-right-width,border-right-color,\" +\n                \"font-family,font-size,font-style,font-variant,font-weight,line-height\"\n               ).split(\",\"),\n        htmlRe = /[<>\\&]/g,\n        entityRe = /[\\u00A0-\\u2666<>\\&]/g,\n        entityTable = {\n                34: 'quot', 38: 'amp', 39: 'apos', 60: 'lt', 62: 'gt',\n                160: 'nbsp', 161: 'iexcl', 162: 'cent', 163: 'pound', 164: 'curren',\n                165: 'yen', 166: 'brvbar', 167: 'sect', 168: 'uml', 169: 'copy',\n                170: 'ordf', 171: 'laquo', 172: 'not', 173: 'shy', 174: 'reg',\n                175: 'macr', 176: 'deg', 177: 'plusmn', 178: 'sup2', 179: 'sup3',\n                180: 'acute', 181: 'micro', 182: 'para', 183: 'middot', 184: 'cedil',\n                185: 'sup1', 186: 'ordm', 187: 'raquo', 188: 'frac14', 189: 'frac12',\n                190: 'frac34', 191: 'iquest', 192: 'Agrave', 193: 'Aacute', 194: 'Acirc',\n                195: 'Atilde', 196: 'Auml', 197: 'Aring', 198: 'AElig', 199: 'Ccedil',\n                200: 'Egrave', 201: 'Eacute', 202: 'Ecirc', 203: 'Euml', 204: 'Igrave',\n                205: 'Iacute', 206: 'Icirc', 207: 'Iuml', 208: 'ETH', 209: 'Ntilde',\n                210: 'Ograve', 211: 'Oacute', 212: 'Ocirc', 213: 'Otilde', 214: 'Ouml',\n                215: 'times', 216: 'Oslash', 217: 'Ugrave', 218: 'Uacute', 219: 'Ucirc',\n                220: 'Uuml', 221: 'Yacute', 222: 'THORN', 223: 'szlig', 224: 'agrave',\n                225: 'aacute', 226: 'acirc', 227: 'atilde', 228: 'auml', 229: 'aring',\n                230: 'aelig', 231: 'ccedil', 232: 'egrave', 233: 'eacute', 234: 'ecirc',\n                235: 'euml', 236: 'igrave', 237: 'iacute', 238: 'icirc', 239: 'iuml',\n                240: 'eth', 241: 'ntilde', 242: 'ograve', 243: 'oacute', 244: 'ocirc',\n                245: 'otilde', 246: 'ouml', 247: 'divide', 248: 'oslash', 249: 'ugrave',\n                250: 'uacute', 251: 'ucirc', 252: 'uuml', 253: 'yacute', 254: 'thorn',\n                255: 'yuml', 402: 'fnof', 913: 'Alpha', 914: 'Beta', 915: 'Gamma',\n                916: 'Delta', 917: 'Epsilon', 918: 'Zeta', 919: 'Eta', 920: 'Theta',\n                921: 'Iota', 922: 'Kappa', 923: 'Lambda', 924: 'Mu', 925: 'Nu',\n                926: 'Xi', 927: 'Omicron', 928: 'Pi', 929: 'Rho', 931: 'Sigma',\n                932: 'Tau', 933: 'Upsilon', 934: 'Phi', 935: 'Chi', 936: 'Psi',\n                937: 'Omega', 945: 'alpha', 946: 'beta', 947: 'gamma', 948: 'delta',\n                949: 'epsilon', 950: 'zeta', 951: 'eta', 952: 'theta', 953: 'iota',\n                954: 'kappa', 955: 'lambda', 956: 'mu', 957: 'nu', 958: 'xi',\n                959: 'omicron', 960: 'pi', 961: 'rho', 962: 'sigmaf', 963: 'sigma',\n                964: 'tau', 965: 'upsilon', 966: 'phi', 967: 'chi', 968: 'psi',\n                969: 'omega', 977: 'thetasym', 978: 'upsih', 982: 'piv', 8226: 'bull',\n                8230: 'hellip', 8242: 'prime', 8243: 'Prime', 8254: 'oline', 8260: 'frasl',\n                8472: 'weierp', 8465: 'image', 8476: 'real', 8482: 'trade', 8501: 'alefsym',\n                8592: 'larr', 8593: 'uarr', 8594: 'rarr', 8595: 'darr', 8596: 'harr',\n                8629: 'crarr', 8656: 'lArr', 8657: 'uArr', 8658: 'rArr', 8659: 'dArr',\n                8660: 'hArr', 8704: 'forall', 8706: 'part', 8707: 'exist', 8709: 'empty',\n                8711: 'nabla', 8712: 'isin', 8713: 'notin', 8715: 'ni', 8719: 'prod',\n                8721: 'sum', 8722: 'minus', 8727: 'lowast', 8730: 'radic', 8733: 'prop',\n                8734: 'infin', 8736: 'ang', 8743: 'and', 8744: 'or', 8745: 'cap',\n                8746: 'cup', 8747: 'int', 8756: 'there4', 8764: 'sim', 8773: 'cong',\n                8776: 'asymp', 8800: 'ne', 8801: 'equiv', 8804: 'le', 8805: 'ge',\n                8834: 'sub', 8835: 'sup', 8836: 'nsub', 8838: 'sube', 8839: 'supe',\n                8853: 'oplus', 8855: 'otimes', 8869: 'perp', 8901: 'sdot', 8968: 'lceil',\n                8969: 'rceil', 8970: 'lfloor', 8971: 'rfloor', 9001: 'lang', 9002: 'rang',\n                9674: 'loz', 9824: 'spades', 9827: 'clubs', 9829: 'hearts', 9830: 'diams',\n                338: 'OElig', 339: 'oelig', 352: 'Scaron', 353: 'scaron', 376: 'Yuml',\n                710: 'circ', 732: 'tilde', 8194: 'ensp', 8195: 'emsp', 8201: 'thinsp',\n                8204: 'zwnj', 8205: 'zwj', 8206: 'lrm', 8207: 'rlm', 8211: 'ndash',\n                8212: 'mdash', 8216: 'lsquo', 8217: 'rsquo', 8218: 'sbquo', 8220: 'ldquo',\n                8221: 'rdquo', 8222: 'bdquo', 8224: 'dagger', 8225: 'Dagger', 8240: 'permil',\n                8249: 'lsaquo', 8250: 'rsaquo', 8364: 'euro'\n            };\n\n    var Dom = {\n        block: block,\n        inline: inline,\n\n        findNodeIndex: function(node, skipText) {\n            var i = 0;\n\n            if (!node) {\n                return -1;\n            }\n\n            while (true) {\n                node = node.previousSibling;\n\n                if (!node) {\n                    break;\n                }\n\n                if (!(skipText && node.nodeType == 3)) {\n                    i++;\n                }\n            }\n\n            return i;\n        },\n\n        isDataNode: function(node) {\n            return node && node.nodeValue !== null && node.data !== null;\n        },\n\n        isAncestorOf: function(parent, node) {\n            try {\n                return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\n            } catch (e) {\n                return false;\n            }\n        },\n\n        isAncestorOrSelf: function(root, node) {\n            return Dom.isAncestorOf(root, node) || root == node;\n        },\n\n        findClosestAncestor: function(root, node) {\n            if (Dom.isAncestorOf(root, node)) {\n                while (node && node.parentNode != root) {\n                    node = node.parentNode;\n                }\n            }\n\n            return node;\n        },\n\n        getAllComments: function(rootElem) {\n            var comments = [];\n            // Fourth argument, which is actually obsolete according to the DOM4 standard, is required in IE 11\n            var iterator = document.createNodeIterator(rootElem,\n                NodeFilter.SHOW_COMMENT,\n                function() {\n                    return NodeFilter.FILTER_ACCEPT;\n                }, false);\n\n            var curNode = iterator.nextNode();\n            while (curNode) {\n                comments.push(curNode.nodeValue);\n                curNode = iterator.nextNode();\n            }\n            return comments;\n        },\n\n        getNodeLength: function(node) {\n            return Dom.isDataNode(node) ? node.length : node.childNodes.length;\n        },\n\n        splitDataNode: function(node, offset) {\n            var newNode = node.cloneNode(false);\n            var denormalizedText = \"\";\n            var iterator = node.nextSibling;\n            var temp;\n\n            while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\n                denormalizedText += iterator.nodeValue;\n                temp = iterator;\n                iterator = iterator.nextSibling;\n                Dom.remove(temp);\n            }\n\n            node.deleteData(offset, node.length);\n            newNode.deleteData(0, offset);\n            newNode.nodeValue += denormalizedText;\n            Dom.insertAfter(newNode, node);\n        },\n\n        attrEquals: function(node, attributes) {\n            for (var key in attributes) {\n                var value = node[key];\n\n                if (key == FLOAT) {\n                    value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\n                }\n\n                if (typeof value == \"object\") {\n                    if (!Dom.attrEquals(value, attributes[key])) {\n                        return false;\n                    }\n                } else if (value != attributes[key]) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        blockParentOrBody: function(node) {\n            return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\n        },\n\n        blockParents: function(nodes) {\n            var blocks = [],\n                i, len;\n\n            for (i = 0, len = nodes.length; i < len; i++) {\n                var block = Dom.parentOfType(nodes[i], Dom.blockElements);\n                if (block && $.inArray(block, blocks) < 0) {\n                    blocks.push(block);\n                }\n            }\n\n            return blocks;\n        },\n\n        windowFromDocument: function(document) {\n            return document.defaultView || document.parentWindow;\n        },\n\n        normalize: normalize,\n        blockElements: blockElements,\n        nonListBlockElements: nonListBlockElements,\n        inlineElements: inlineElements,\n        empty: empty,\n        fillAttrs: fillAttrs,\n        nodeTypes: {\n            ELEMENT_NODE: 1,\n            ATTRIBUTE_NODE: 2,\n            TEXT_NODE: 3,\n            CDATA_SECTION_NODE: 4,\n            ENTITY_REFERENCE_NODE: 5,\n            ENTITY_NODE: 6,\n            PROCESSING_INSTRUCTION_NODE: 7,\n            COMMENT_NODE: 8,\n            DOCUMENT_NODE: 9,\n            DOCUMENT_TYPE_NODE: 10,\n            DOCUMENT_FRAGMENT_NODE: 11,\n            NOTATION_NODE: 12\n        },\n\n        toHex: function(color) {\n            var matches = rgb.exec(color);\n\n            if (!matches) {\n                return color;\n            }\n\n            return \"#\" + map(matches.slice(1), function(x) {\n                x = parseInt(x, 10).toString(16);\n                return x.length > 1 ? x : \"0\" + x;\n            }).join(\"\");\n        },\n\n        encode: function(value, options) {\n            var encodableChars = (!options || options.entities) ? entityRe : htmlRe;\n            return value.replace(encodableChars, function(c) {\n                var charCode = c.charCodeAt(0);\n                var entity = entityTable[charCode];\n                return entity ? '&' + entity + ';' : c;\n            });\n        },\n        isBom: function(node) {\n            return node && node.nodeType === 3 && /^[\\ufeff]+$/.test(node.nodeValue);\n        },\n        stripBom: function(text) {\n            return (text || \"\").replace(bom, \"\");\n        },\n\n        stripBomNode: function(node) {\n            if (Dom.isBom(node)) {\n                node.parentNode.removeChild(node);\n            }\n        },\n\n        insignificant: function(node) {\n            var attr = node.attributes;\n\n            return node.className == \"k-marker\" || (Dom.is(node, 'br') && (node.className == \"k-br\" || attr._moz_dirty || attr._moz_editor_bogus_node)) || (Dom.is(node, 'span') && (node.className == \"k-br\"));\n        },\n        tableCell: function(node) {\n            return Dom.is(node, \"td\") || Dom.is(node, \"th\");\n        },\n        significantNodes: function(nodes) {\n            return $.grep(nodes, function(child) {\n                var name = Dom.name(child);\n\n                if (name == 'br') {\n                    return false;\n                } else if (Dom.insignificant(child)) {\n                    return false;\n                } else if (Dom.emptyTextNode(child)) {\n                    return false;\n                } else if (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child)) {\n                    return false;\n                }\n\n                return true;\n            });\n        },\n\n        emptyTextNode: function(node) {\n            return node && node.nodeType == 3 && whitespaceOrBom.test(node.nodeValue);\n        },\n\n        emptyNode: function(node) {\n            return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\n        },\n\n        name: function(node) {\n            return node.nodeName.toLowerCase();\n        },\n\n        significantChildNodes: function(node) {\n            return $.grep(node.childNodes, function(child) {\n                return child.nodeType != 3 || !Dom.isWhitespace(child);\n            });\n        },\n\n        getTextNodes: function(body, nodes) {\n            const childNodes = body.childNodes;\n            nodes = nodes || [];\n\n            for (const node of childNodes) {\n                if (node.nodeType === this.nodeTypes.TEXT_NODE &&\n                    (blockElements.includes(Dom.name(node.parentNode)) ||\n                    inlineElements.includes(Dom.name(node.parentNode)) ||\n                    node.parentNode === body)) {\n                    nodes.push(node);\n                } else if (node.nodeType === this.nodeTypes.ELEMENT_NODE) {\n                    this.getTextNodes(node, nodes);\n                }\n            }\n\n            return nodes;\n        },\n\n        lastTextNode: function(node) {\n            var result = null;\n\n            if (node.nodeType == 3) {\n                return node;\n            }\n\n            for (var child = node.lastChild; child; child = child.previousSibling) {\n                result = Dom.lastTextNode(child);\n\n                if (result) {\n                    return result;\n                }\n            }\n\n            return result;\n        },\n\n        is: function(node, nodeName) {\n            return node && Dom.name(node) == nodeName;\n        },\n\n        isMarker: function(node) {\n            return node.className == KMARKER;\n        },\n\n        isWhitespace: function(node) {\n            return whitespace.test(node.nodeValue);\n        },\n\n        allowsTextContent: function(node) {\n            var result = true;\n\n            nonEmptyNonTextContentElements.every(function(name) {\n                if (Dom.is(node, name)) {\n                    result = false;\n                    return false;\n                } else {\n                    return true;\n                }\n            });\n\n            return result;\n        },\n\n        allWhitespaceContent: function(node) {\n            var child = node.firstChild;\n            while (child && Dom.isWhitespace(child)) {\n                child = child.nextSibling;\n            }\n\n            return !child;\n        },\n\n        isEmptyspace: function(node) {\n            return emptyspace.test(node.nodeValue);\n        },\n\n        htmlIndentSpace: function(node) {\n            if (!(Dom.isDataNode(node) && Dom.isWhitespace(node))) {\n                return false;\n            }\n\n            if (emptyspace.test(node.nodeValue)) {\n                return true;\n            }\n\n            var sibling = function(el, direction) {\n                while (el[direction]) {\n                    el = el[direction];\n                    if (Dom.significantNodes([el]).length > 0) {\n                        return el;\n                    }\n                }\n            };\n\n            var parent = node.parentNode;\n            var prev = sibling(node, \"previousSibling\");\n            var next = sibling(node, \"nextSibling\");\n\n            if (bom.test(node.nodeValue)) {\n                return !!(prev || next);\n            }\n\n            if ($(parent).is(\"tr,tbody,thead,tfoot,table,ol,ul\")) {\n                return true;\n            }\n\n            if (Dom.isBlock(parent) || Dom.is(parent, \"body\")) {\n                var isPrevBlock = prev && Dom.isBlock(prev);\n                var isNextBlock = next && Dom.isBlock(next);\n                if ((!next && isPrevBlock) || (!prev && isNextBlock) || (isPrevBlock && isNextBlock)) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        isBlock: function(node) {\n            return block[Dom.name(node)];\n        },\n\n        isSelfClosing: function(node) {\n            return selfClosing[Dom.name(node)];\n        },\n\n        isEmpty: function(node) {\n            return empty[Dom.name(node)];\n        },\n\n        isInline: function(node) {\n            return inline[Dom.name(node)];\n        },\n\n        isImg: function(node) {\n            return Dom.name(node) == \"img\";\n        },\n\n        isBr: function(node) {\n            return Dom.name(node) == \"br\";\n        },\n\n        list: function(node) {\n            var name = node ? Dom.name(node) : \"\";\n            return name == \"ul\" || name == \"ol\" || name == \"dl\";\n        },\n\n        scrollContainer: function(doc) {\n            var wnd = Dom.windowFromDocument(doc),\n                scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\n\n            if (scrollContainer.compatMode == 'BackCompat') {\n                scrollContainer = scrollContainer.body;\n            } else {\n                scrollContainer = scrollContainer.scrollingElement || scrollContainer.documentElement;\n            }\n\n            return scrollContainer;\n        },\n\n        scrollTo: function(node, toStart) {\n            var doc = node.ownerDocument;\n            var wnd = Dom.windowFromDocument(doc);\n            var windowHeight = wnd.innerHeight;\n            var scrollContainer = Dom.scrollContainer(doc);\n            var element, elementTop, elementHeight, marker;\n\n            if (Dom.isDataNode(node)) {\n                if (toStart) {\n                    marker = Dom.create(doc, \"span\", { \"innerHTML\": \"&#xfeff;\" });\n                    Dom.insertBefore(marker, node);\n                    element = $(marker);\n                } else {\n                    element = $(node.parentNode);\n                }\n            } else {\n                element = $(node);\n            }\n\n            elementTop = element.offset().top;\n            elementHeight = element[0].offsetHeight;\n\n            if (toStart || !elementHeight) {\n                elementHeight = parseInt(element.css(\"line-height\"), 10) ||\n                                Math.ceil(1.2 * parseInt(element.css(\"font-size\"), 10)) ||\n                                15;\n            }\n\n            if (marker) {\n                Dom.remove(marker);\n            }\n\n            if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\n                scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\n            }\n        },\n\n        persistScrollTop: function(doc) {\n            persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\n        },\n\n        offset: function(target, offsetParent) {\n            var result = { top: target.offsetTop, left: target.offsetLeft };\n            var parent = target.offsetParent;\n\n            while (parent && (!offsetParent || Dom.isAncestorOf(offsetParent, parent))) {\n                result.top += parent.offsetTop;\n                result.left += parent.offsetLeft;\n                parent = parent.offsetParent;\n            }\n\n            return result;\n        },\n\n        restoreScrollTop: function(doc) {\n            if (typeof persistedScrollTop == \"number\") {\n                Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\n                persistedScrollTop = undefined;\n            }\n        },\n\n        insertAt: function(parent, newElement, position) {\n            parent.insertBefore(newElement, parent.childNodes[position] || null);\n        },\n\n        insertBefore: function(newElement, referenceElement) {\n            if (referenceElement.parentNode) {\n                return referenceElement.parentNode.insertBefore(newElement, referenceElement);\n            } else {\n                return referenceElement;\n            }\n        },\n\n        insertAfter: function(newElement, referenceElement) {\n            return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\n        },\n\n        remove: function(node) {\n            if (node.parentNode) {\n                node.parentNode.removeChild(node);\n            }\n        },\n\n        removeChildren: function(node) {\n            while (node.firstChild) {\n                node.removeChild(node.firstChild);\n            }\n        },\n\n        removeTextSiblings: function(node) {\n            var parentNode = node.parentNode;\n\n            while (node.nextSibling && node.nextSibling.nodeType == 3) {\n                parentNode.removeChild(node.nextSibling);\n            }\n\n            while (node.previousSibling && node.previousSibling.nodeType == 3) {\n                parentNode.removeChild(node.previousSibling);\n            }\n        },\n\n        trim: function(parent) {\n            for (var i = parent.childNodes.length - 1; i >= 0; i--) {\n                var node = parent.childNodes[i];\n                if (Dom.isDataNode(node)) {\n                    if (!Dom.stripBom(node.nodeValue).length) {\n                        Dom.remove(node);\n                    }\n                } else if (node.className != KMARKER) {\n                    Dom.trim(node);\n\n                    if ((!Dom.isEmpty(node) && node.childNodes.length === 0) ||\n                        (Dom.isBlock(node) && Dom.allWhitespaceContent(node))) {\n                        Dom.remove(node);\n                    }\n                }\n            }\n\n            return parent;\n        },\n\n        closest: function(node, tags) {\n            if (typeof tags === \"string\") {\n                tags = [tags];\n            }\n\n            while (node && tags.indexOf(Dom.name(node)) < 0) {\n                node = node.parentNode;\n            }\n\n            return node;\n        },\n\n        closestBy: function(node, condition, rootCondition) {\n            while (node && !condition(node)) {\n                if (rootCondition && rootCondition(node)) {\n                    return null;\n                }\n                node = node.parentNode;\n            }\n            return node;\n        },\n\n        sibling: function(node, direction) {\n            do {\n                node = node[direction];\n            } while (node && node.nodeType != 1);\n\n            return node;\n        },\n\n        next: function(node) {\n            return Dom.sibling(node, \"nextSibling\");\n        },\n\n        prev: function(node) {\n            return Dom.sibling(node, \"previousSibling\");\n        },\n\n        parentOfType: function(node, tags) {\n            do {\n                node = node.parentNode;\n            } while (node && !(Dom.ofType(node, tags)));\n\n            return node;\n        },\n\n        ofType: function(node, tags) {\n            return $.inArray(Dom.name(node), tags) >= 0;\n        },\n\n        changeTag: function(referenceElement, tagName, skipAttributes) {\n            var newElement = Dom.create(referenceElement.ownerDocument, tagName),\n                attributes = referenceElement.attributes,\n                i, len, name, value, attribute;\n\n            if (!skipAttributes) {\n                for (i = 0, len = attributes.length; i < len; i++) {\n                    attribute = attributes[i];\n                    if (attribute.specified) {\n                        // IE < 8 cannot set class or style via setAttribute\n                        name = attribute.nodeName;\n                        value = attribute.nodeValue;\n                        if (name == CLASS) {\n                            newElement.className = value;\n                        } else if (name == STYLE) {\n                            newElement.style.cssText = referenceElement.style.cssText;\n                        } else {\n                            newElement.setAttribute(name, value);\n                        }\n                    }\n                }\n            }\n\n            while (referenceElement.firstChild) {\n                newElement.appendChild(referenceElement.firstChild);\n            }\n\n            Dom.insertBefore(newElement, referenceElement);\n            Dom.remove(referenceElement);\n            return newElement;\n        },\n\n        editableParent: function(node) {\n            while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\n                node = node.parentNode;\n            }\n\n            return node;\n        },\n\n        wrap: function(node, wrapper) {\n            Dom.insertBefore(wrapper, node);\n            wrapper.appendChild(node);\n            return wrapper;\n        },\n\n        unwrap: function(node) {\n            var parent = node.parentNode;\n            while (node.firstChild) {\n                parent.insertBefore(node.firstChild, node);\n            }\n\n            parent.removeChild(node);\n        },\n\n        wrapper: function(node) {\n            var wrapper = Dom.closestBy(node, function(el) {\n                return el.parentNode && Dom.significantNodes(el.parentNode.childNodes).length > 1;\n            });\n\n            return $(wrapper).is(\"body,.k-editor\") ? undefined : wrapper;\n        },\n\n        isChildOfBaseContainer: function(node) {\n            return $(node).parent().is(\"body,.k-editor\");\n        },\n\n        create: function(document, tagName, attributes) {\n            return Dom.attr(document.createElement(tagName), attributes);\n        },\n\n        createEmptyNode: function(document, tagName, attributes) {\n            var node = Dom.attr(document.createElement(tagName), attributes);\n            node.innerHTML = \"\\ufeff\";\n            return node;\n        },\n\n        attr: function(element, attributes) {\n            attributes = extend({}, attributes);\n\n            if (attributes && STYLE in attributes) {\n                Dom.style(element, attributes.style);\n                delete attributes.style;\n            }\n\n            for (var attr in attributes) {\n                if (attributes[attr] === null) {\n                    element.removeAttribute(attr);\n                    delete attributes[attr];\n                } else if (attr == \"className\") {\n                    element[attr] = attributes[attr];\n                }\n            }\n\n            return extend(element, attributes);\n        },\n\n        mergeAttributes: function(origin, target, traverseCss) {\n            if (!origin.attributes.length) {\n                return;\n            }\n\n            $.each(origin.attributes, function() {\n                if (this.name !== \"contenteditable\" && (!traverseCss || this.name !== STYLE)) {\n                    $(target).attr(this.name, this.value);\n                }\n\n                if (traverseCss && this.name === STYLE) {\n                    $.each(origin.style, function() {\n                        target.style[this] = origin.style[this];\n                    });\n                }\n            });\n        },\n\n        style: function(node, value) {\n            $(node).css(value || {});\n        },\n\n        unstyle: function(node, value) {\n            for (var key in value) {\n                if (key == FLOAT) {\n                    key = kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT;\n                }\n\n                node.style[key] = \"\";\n            }\n\n            if (node.style.cssText === \"\") {\n                node.removeAttribute(STYLE);\n            }\n        },\n\n        inlineStyle: function(body, name, attributes) {\n            var span = $(Dom.create(body.ownerDocument, name, attributes)),\n                style;\n\n            body.appendChild(span[0]);\n\n            style = map(cssAttributes, function(value) {\n                if (browser.msie && value == \"line-height\" && span.css(value) == \"1px\") {\n                    return \"line-height:1.5\";\n                } else {\n                    return value + \":\" + span.css(value);\n                }\n            }).join(\";\");\n\n            span.remove();\n\n            return style;\n        },\n\n        getEffectiveBackground: function(element) {\n            var backgroundStyle = element.css(\"background-color\") || \"\";\n\n            if (backgroundStyle.indexOf(\"rgba(0, 0, 0, 0\") < 0 && backgroundStyle !== \"transparent\") {\n                return backgroundStyle;\n            } else if (element[0].tagName.toLowerCase() === \"html\") {\n                return \"Window\";\n            } else {\n                return Dom.getEffectiveBackground(element.parent());\n            }\n        },\n\n        innerText: function(node) {\n            var text = node.innerHTML;\n            text = text.replace(/<!--(.|\\s)*?-->/gi, \"\");\n            text = text.replace(/<\\/?[^>]+?\\/?>/gm, \"\");\n\n            return text;\n        },\n\n        removeClass: function(node, classNames) {\n            var className = \" \" + node.className + \" \",\n                classes = classNames.split(\" \"),\n                i, len;\n\n            for (i = 0, len = classes.length; i < len; i++) {\n                className = className.replace(\" \" + classes[i] + \" \", \" \");\n            }\n\n            className = kendo.trim(className);\n\n            if (className.length) {\n                node.className = className;\n            } else {\n                node.removeAttribute(CLASS);\n            }\n        },\n\n        commonAncestor: function() {\n            var count = arguments.length,\n                paths = [],\n                minPathLength = Infinity,\n                output = null,\n                i, ancestors, node, first, j;\n\n            if (!count) {\n                return null;\n            }\n\n            if (count == 1) {\n                return arguments[0];\n            }\n\n            for (i = 0; i < count; i++) {\n                ancestors = [];\n                node = arguments[i];\n                while (node) {\n                    ancestors.push(node);\n                    node = node.parentNode;\n                }\n                paths.push(ancestors.reverse());\n                minPathLength = Math.min(minPathLength, ancestors.length);\n            }\n\n            if (count == 1) {\n                return paths[0][0];\n            }\n\n            for (i = 0; i < minPathLength; i++) {\n                first = paths[0][i];\n\n                for (j = 1; j < count; j++) {\n                    if (first != paths[j][i]) {\n                        return output;\n                    }\n                }\n\n                output = first;\n            }\n            return output;\n        },\n\n        closestSplittableParent: function(nodes) {\n            var result;\n\n            if (nodes.length == 1) {\n                result = Dom.parentOfType(nodes[0], [\"ul\",\"ol\"]);\n            } else {\n                result = Dom.commonAncestor.apply(null, nodes);\n            }\n\n            if (!result) {\n                result = Dom.parentOfType(nodes[0], [\"p\", \"td\"]) || nodes[0].ownerDocument.body;\n            }\n\n            if (Dom.isInline(result)) {\n                result = Dom.blockParentOrBody(result);\n            }\n\n            var editableParents = map(nodes, Dom.editableParent);\n            var editableAncestor = Dom.commonAncestor(editableParents)[0];\n\n            if ($.contains(result, editableAncestor)) {\n                result = editableAncestor;\n            }\n\n            return result;\n        },\n\n        closestEditable: function(node, types) {\n            var closest;\n            var editable = Dom.editableParent(node);\n\n            if (Dom.ofType(node, types)) {\n                closest = node;\n            } else {\n                closest = Dom.parentOfType(node, types);\n            }\n\n            if (closest && editable && $.contains(closest, editable)) {\n                closest = editable;\n            } else if (!closest && editable) {\n                closest = editable;\n            }\n\n            return closest;\n        },\n\n        closestEditableOfType: function(node, types) {\n            var editable = Dom.closestEditable(node, types);\n\n            if (editable && Dom.ofType(editable, types) && !$(editable).is(\".k-editor\")) {\n                return editable;\n            }\n        },\n\n        filter: function(tagName, nodes, invert) {\n            var filterFn = function(node) {\n                return Dom.name(node) == tagName;\n            };\n\n            return Dom.filterBy(nodes, filterFn, invert);\n        },\n\n        filterBy: function(nodes, condition, invert) {\n            var i = 0;\n            var len = nodes.length;\n            var result = [];\n            var match;\n\n            for (; i < len; i++) {\n                match = condition(nodes[i]);\n                if ((match && !invert) || (!match && invert)) {\n                    result.push(nodes[i]);\n                }\n            }\n\n            return result;\n        },\n\n        ensureTrailingBreaks: function(node) {\n            var elements = $(node).find(\"p,td,th\");\n            var length = elements.length;\n            var i = 0;\n\n            if (length) {\n                for (; i < length; i++) {\n                    Dom.ensureTrailingBreak(elements[i]);\n                }\n            } else {\n                Dom.ensureTrailingBreak(node);\n            }\n        },\n\n        removeTrailingBreak: function(node) {\n            $(node).find(\"br[type=_moz],.k-br\").remove();\n        },\n\n        ensureTrailingBreak: function(node) {\n            Dom.removeTrailingBreak(node);\n\n            var lastChild = node.lastChild;\n            var name = lastChild && Dom.name(lastChild);\n            var br;\n\n            if (!name ||\n                (name != \"br\" && name != \"img\") ||\n                (name == \"br\" && lastChild.className != \"k-br\")) {\n                br = node.ownerDocument.createElement(\"br\");\n                br.className = \"k-br\";\n                node.appendChild(br);\n            }\n        },\n\n        // Start: Table Utilities\n\n        reMapTableColumns: function(table, colAttr) {\n            Dom._mapColIndices(table, colAttr);\n        },\n\n        clearTableMappings: function(table, colAttr) {\n            $(table).find(\"[\" + colAttr + \"]\").removeAttr(colAttr);\n        },\n\n        _mapColIndices: function(table, colAttr) {\n            var registeredColumns = {};\n\n            for (var rowIndex = 0; rowIndex < table.rows.length; rowIndex++) {\n                var cells = table.rows[rowIndex].cells;\n                var colIndex = 0;\n                for (var cellIndex = 0; cellIndex < cells.length; cellIndex++, colIndex++) {\n                    var cell = cells[cellIndex];\n\n                    if (cell.rowSpan > 1) {\n                        this._mapColspan(cell, rowIndex, colIndex, registeredColumns);\n                    }\n\n                    if (registeredColumns[rowIndex]) {\n                        while (registeredColumns[rowIndex][colIndex]) {\n                            colIndex++;\n                        }\n                    }\n\n                    cell.setAttribute(colAttr, colIndex);\n\n                    if (cell.colSpan > 1) {\n                        colIndex = colIndex + cell.colSpan - 1;\n                    }\n                }\n            }\n        },\n\n        _mapColspan: function(cell, rowIndex, colIndex, registeredColumns) {\n            var rowSpan = cell.rowSpan,\n                colSpan = cell.colSpan,\n                index;\n\n            for (var ci = 0; ci < colSpan; ci++) {\n                index = colIndex + ci;\n\n                for (var ri = rowIndex + 1; ri < rowIndex + rowSpan; ri++) {\n\n                    if (!registeredColumns[ri]) {\n                        registeredColumns[ri] = {};\n                        registeredColumns[ri].length = 0;\n                    }\n\n                    if (registeredColumns[rowIndex]) {\n                        while (registeredColumns[rowIndex][index]) {\n                            index++;\n                        }\n                    }\n\n                    registeredColumns[ri][index] = true;\n                    registeredColumns[ri].length++;\n                }\n            }\n\n        },\n\n        associateWithIds: function(table) {\n            var that = this;\n            var numberOfTheadRows = 0;\n            var tableRows = table.rows;\n            var numberOfTableRows = tableRows.length;\n            var theadMatrix = [];\n            var tbodyMatrix = [];\n            var theadRows, i;\n\n            if (table.tHead) {\n                theadRows = table.tHead.rows;\n                numberOfTheadRows = theadRows.length;\n            } else {\n                numberOfTheadRows = that._getNumberOfHeaderRows(table);\n                theadRows = [];\n                for (i = 0; i < numberOfTheadRows; i++) {\n                    theadRows.push(tableRows[i]);\n                }\n            }\n            for (i = 0; i < numberOfTheadRows; i++) {\n                theadMatrix.push([]);\n            }\n            for (i = 0; i < numberOfTableRows; i++) {\n                tbodyMatrix.push([]);\n            }\n\n            that._generateIdsForColumns(theadMatrix, theadRows);\n            that._generateIdsForRows(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n            that._assignIds(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n        },\n\n        _generateIdsForColumns: function(theadMatrix, theadRows) {\n            var timestamp = new Date().getTime();\n            var numberOfTheadRows = theadRows ? theadRows.length : 0;\n            var row, cells, cell, col, id, colspan, rowspan, i, j, k, l;\n\n            for (i = 0; i < numberOfTheadRows; i++) {\n                row = theadRows[i];\n                cells = row.cells;\n                col = 0;\n\n                for (j = 0; j < cells.length; j++) {\n                    cell = cells[j];\n                    id = \"table\" + i + j + (++timestamp);\n                    cell.setAttribute(\"id\", id);\n                    colspan = cell.getAttribute(\"colspan\") || 1;\n                    rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                    while (theadMatrix[i][j + col]) {\n                        col += 1;\n                    }\n\n                    for (k = 0; k < rowspan; k++) {\n                        for (l = 0; l < colspan; l++) {\n                            theadMatrix[i + k][j + col + l] = id;\n                        }\n                    }\n                }\n            }\n        },\n\n        _generateIdsForRows: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n            var that = this;\n            var timestamp = new Date().getTime();\n            var numberOfTableRows = tableRows.length;\n            var row, cells, cell, col, id, colspan, rowspan, i, j, k, l, colIndex, headers;\n\n            var pushHeaderId = function(row) {\n                headers.push(row[colIndex]);\n            };\n\n            for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n                row = tableRows[i];\n                cells = $(row.cells).filter(\"th\");\n                col = 0;\n\n                for (j = 0; j < cells.length; j++) {\n                    cell = cells[j];\n                    id = \"table\" + i + j + (++timestamp);\n                    cell.setAttribute(\"id\", id);\n                    colspan = cell.getAttribute(\"colspan\") || 1;\n                    rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                    while (tbodyMatrix[i][j + col]) {\n                        col += 1;\n                    }\n\n                    for (k = 0; k < rowspan; k++) {\n                        for (l = 0; l < colspan; l++) {\n                            tbodyMatrix[i + k][j + col + l] = id;\n                        }\n                    }\n\n                    colIndex = cell.getAttribute(\"col-index\");\n                    headers = [];\n                    theadMatrix.forEach(pushHeaderId);\n                    headers = headers.filter(that._onlyUnique);\n                    cell.setAttribute(\"headers\", headers.join(\" \").trim());\n                }\n            }\n        },\n\n        _assignIds: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n            var that = this;\n            var numberOfTableRows = tableRows.length;\n            var row, cells, cell, i, j, colIndex, headers;\n\n            var pushHeaderId = function(row) {\n                headers.push(row[colIndex]);\n            };\n\n            for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n                row = tableRows[i];\n                cells = $(row.cells).filter(\"td\");\n\n                for (j = 0; j < cells.length; j++) {\n                    cell = cells[j];\n                    colIndex = cell.getAttribute(\"col-index\");\n                    headers = tbodyMatrix[i].slice();\n\n                    theadMatrix.forEach(pushHeaderId);\n                    headers = headers.filter(that._onlyUnique);\n                    cell.setAttribute(\"headers\", headers.join(\" \").trim());\n                }\n            }\n        },\n\n        _getNumberOfColumns: function(table) {\n            var cells = $(table).find(\"th, td\");\n            var numberOfCols = 0;\n            var cell, i, currentIndex;\n\n            for (i = 0; i < cells.length; i++) {\n                cell = cells[i];\n                currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n                if (currentIndex > numberOfCols) {\n                    numberOfCols = currentIndex;\n                }\n            }\n\n            return numberOfCols;\n        },\n\n        _getNumberOfHeaderColumns: function(table, numberOfHeaderRows) {\n            var rows = table.rows;\n            var numberOfCols = 0;\n            var currentIndex, row, i, j, cell;\n\n            for (i = numberOfHeaderRows; i < rows.length; i++) {\n                row = rows[i];\n\n                for (j = 0; j < row.cells.length; j++) {\n                    cell = row.cells[j];\n\n                    if (this.is(cell, \"th\")) {\n                        currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n                        if (currentIndex > numberOfCols) {\n                            numberOfCols = currentIndex;\n                        }\n                    }\n                }\n            }\n\n            return numberOfCols;\n        },\n\n        _getNumberOfHeaderRows: function(table) {\n            var rows = table.rows;\n            var thead = table.tHead;\n            var number = thead && table.tHead.rows ? table.tHead.rows.length : 0;\n            var j, row, cell, length;\n\n            if (number === 0) {\n                row = rows[0];\n                length = row.cells && row.cells.length;\n\n                while (row && length && this.is(row.cells[0], \"th\")) {\n                    for (j = 0; j < length; j++) {\n                        cell = row ? row.cells[j] : null;\n\n                        if (!this.is(cell, \"th\")) {\n                            row = null;\n                        }\n                    }\n\n                    if (row) {\n                        number += 1;\n                        row = this.next(row);\n                        length = row && row.cells && row.cells.length;\n                    }\n                }\n            }\n\n            return number;\n        },\n\n        // End: Table Utilities\n\n        _onlyUnique: function(value, index, self) {\n            return self.indexOf(value) === index;\n        }\n    };\n\n    kendo.ui.editor.Dom = Dom;\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    // Imports ================================================================\n    var kendo = window.kendo;\n    var Editor = kendo.ui.editor;\n    var dom = Editor.Dom;\n    var extend = $.extend;\n\n    var fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\n    var quoteRe = /\"/g; //\"\n    var brRe = /<br[^>]*>/i;\n    var pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\n    var emptyPRe = /<p>(?:&nbsp;)?<\\/p>/i;\n    var cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\n    var sizzleAttr = /^sizzle-\\d+/i;\n    var scriptAttr = /^k-script-/i;\n    var onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\n    var br = '<br class=\"k-br\">';\n    var bomSpan = \"<span class='k-br'>\\ufeff</span>\";\n\n    var div = document.createElement(\"div\");\n    div.innerHTML = \" <hr>\";\n    var supportsLeadingWhitespace = div.firstChild.nodeType === 3;\n    div = null;\n    var isFunction = kendo.isFunction;\n\n    var TD = \"td\";\n\n    var Serializer = {\n        toEditableHtml: function(html) {\n            return (html || \"\")\n                .replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, \"<!--[CDATA[$1]]-->\")\n                .replace(/<(\\/?)script([^>]*)>/ig, \"<$1k:script$2>\")\n                .replace(/<img([^>]*)>/ig, function(match) {\n                    return match.replace(onerrorRe, \"\");\n                })\n                .replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/ig, \"$1\")\n                .replace(/^<(table|blockquote)/i, br + '<$1')\n                .replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1')\n                .replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\n        },\n\n        _toEditableImmutables: function(body) {\n            var immutable = Editor.Immutables.immutable,\n                emptyTextNode = dom.emptyTextNode,\n                first = body.firstChild,\n                last = body.lastChild;\n\n            while (emptyTextNode(first)) {\n                first = first.nextSibling;\n            }\n\n            while (emptyTextNode(last)) {\n                last = last.previousSibling;\n            }\n\n            if (first && immutable(first)) {\n                $(bomSpan).prependTo(body);\n            }\n\n            if (last && immutable(last)) {\n                $(bomSpan).appendTo(body);\n            }\n        },\n\n        _fillEmptyElements: function(body) {\n            // fills empty elements to allow them to be focused\n            $(body).find(\"p,td\").each(function() {\n                var p = $(this);\n                if (/^\\s*$/g.test(p.text()) && !p.find(\"img,input\").length) {\n                    var node = this;\n                    while (node.children[0] && node.children[0].nodeType != 3) {\n                        node = node.children[0];\n                    }\n\n                    if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\n                        if (dom.is(node, \"td\")) {\n                            node.innerHTML = kendo.ui.editor.emptyTableCellContent;\n                        }\n                        else {\n                            node.innerHTML = kendo.ui.editor.emptyElementContent;\n                        }\n                    }\n                }\n            });\n        },\n\n        _removeSystemElements: function(body) {\n            // removes persisted system elements\n            $(\".k-paste-container\", body).remove();\n        },\n\n        _resetOrderedLists: function(root) {\n            // fix for IE9 OL bug -- https://connect.microsoft.com/IE/feedback/details/657695/ordered-list-numbering-changes-from-correct-to-0-0\n            var ols = root.getElementsByTagName(\"ol\"), i, ol, originalStart;\n\n            for (i = 0; i < ols.length; i++) {\n                ol = ols[i];\n                originalStart = ol.getAttribute(\"start\");\n\n                ol.setAttribute(\"start\", 1);\n\n                if (originalStart) {\n                    ol.setAttribute(\"start\", originalStart);\n                } else {\n                    ol.removeAttribute(originalStart);\n                }\n            }\n        },\n\n        _preventScriptExecution: function(root) {\n            $(root).find(\"*\").each(function() {\n                var attributes = this.attributes;\n                var attribute, i, l, name;\n                var attributesToRemove = [];\n\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n                    name = attribute.nodeName;\n\n                    if (attribute.specified && /^on/i.test(name)) {\n                        this.setAttribute(\"k-script-\" + name, attribute.value);\n                        attributesToRemove.push(name);\n                    }\n                }\n\n                for (i = 0, l = attributesToRemove.length; i < l; i++) {\n                    this.removeAttribute(attributesToRemove[i]);\n                }\n            });\n        },\n\n        htmlToDom: function(html, root, options) {\n            var browser = kendo.support.browser;\n            var msie = browser.msie;\n            var o = options || {};\n            var immutables = o.immutables;\n\n            html = Serializer.toEditableHtml(html);\n\n            if (isFunction(o.custom)) {\n                html = o.custom(html) || html;\n            }\n            root.innerHTML = html;\n\n            if (immutables) {\n                immutables.deserialize(root);\n            }\n\n            if (msie) {\n                // unicode characters denormalize the DOM tree in IE9\n                dom.normalize(root);\n\n                Serializer._resetOrderedLists(root);\n            }\n\n            Serializer._preventScriptExecution(root);\n\n            Serializer._fillEmptyElements(root);\n\n            Serializer._removeSystemElements(root);\n\n            Serializer._toEditableImmutables(root);\n\n            // add k-table class to all tables\n            $(\"table\", root).addClass(\"k-table\");\n\n            return root;\n        },\n\n        domToXhtml: function(root, options) {\n            var result = [];\n            var immutables = options && options.immutables;\n\n            function semanticFilter(attributes) {\n                return $.grep(attributes, function(attr) {\n                    return attr.name != \"style\";\n                });\n            }\n\n            function mapStart(node, tag) {\n                result.push('<' + tag);\n                attr(node);\n                result.push('>');\n            }\n\n            var tagMap = {\n                iframe: {\n                    start: function(node) { mapStart(node, \"iframe\"); },\n                    end: function() { result.push('</iframe>'); }\n                },\n                'k:script': {\n                    start: function(node) { mapStart(node, \"script\"); },\n                    end: function() { result.push('</script>'); },\n                    skipEncoding: true\n                },\n                span: {\n                    canOptimize: true,\n                    semantic: true,\n                    start: function(node) {\n                        var style = node.style;\n\n                        var attributes = specifiedAttributes(node);\n                        var semanticAttributes = semanticFilter(attributes);\n\n                        if (semanticAttributes.length) {\n                            result.push(\"<span\"); attr(node, semanticAttributes); result.push(\">\");\n                        }\n\n                        if (style.textDecoration == \"underline\") {\n                            result.push(\"<u>\");\n                        }\n\n                        var font = [];\n                        if (style.color) {\n                            font.push('color=\"' + dom.toHex(style.color) + '\"');\n                        }\n\n                        if (style.fontFamily) {\n                            font.push('face=\"' + style.fontFamily + '\"');\n                        }\n\n                        if (style.fontSize) {\n                            var size = $.inArray(style.fontSize, fontSizeMappings);\n                            font.push('size=\"' + size + '\"');\n                        }\n\n                        // Apply the rest of the inline styles back\n                        var inlineStyles = [];\n                        var ignoredStylePrefixes = [\"text-decoration\", \"color\", \"font\"];\n\n                        for (let i = 0; i < style.length; i++) {\n                            var inlineStyle = style[i];\n\n                            if (ignoredStylePrefixes.filter(prop => inlineStyle.startsWith(prop)).length <= 0) {\n                                inlineStyles.push(`${inlineStyle}: ${style[inlineStyle]}`);\n                            }\n                        }\n\n                        if (inlineStyles.length) {\n                            font.push('style=\"' + inlineStyles.join(\";\") + '\"');\n                        }\n\n                        if (font.length) {\n                            result.push(\"<font \" + font.join(\" \") + \">\");\n                        }\n                    },\n                    end: function(node) {\n                        var style = node.style;\n\n                        if (style.color || style.fontFamily || style.fontSize) {\n                            result.push(\"</font>\");\n                        }\n\n                        if (style.textDecoration == \"underline\") {\n                            result.push(\"</u>\");\n                        }\n\n                        if (semanticFilter(specifiedAttributes(node)).length) {\n                            result.push(\"</span>\");\n                        }\n                    }\n                },\n                strong: {\n                    semantic: true,\n                    start: function(node) { mapStart(node, \"b\"); },\n                    end: function() { result.push('</b>'); }\n                },\n                em: {\n                    semantic: true,\n                    start: function(node) { mapStart(node, \"i\"); },\n                    end: function() { result.push('</i>'); }\n                },\n                b: {\n                    semantic: false,\n                    start: function(node) { mapStart(node, \"strong\"); },\n                    end: function() { result.push('</strong>'); }\n                },\n                i: {\n                    semantic: false,\n                    start: function(node) { mapStart(node, \"em\"); },\n                    end: function() { result.push('</em>'); }\n                },\n                u: {\n                    semantic: false,\n                    start: function(node) {\n                        result.push('<span');\n\n                        var attributes = specifiedAttributes(node);\n                        var style = $(attributes).filter(function(i, item) { return item.name == \"style\"; })[0];\n                        var styleObj = { nodeName: \"style\", value: \"text-decoration:underline;\" };\n\n                        if (style) {\n                            styleObj.value = style.value;\n                            if (!/text-decoration/i.test(styleObj.value)) {\n                                styleObj.value = \"text-decoration:underline;\" + styleObj.value;\n                            }\n                            attributes.splice($.inArray(style, attributes), 1);\n                        }\n                        attributes.push(styleObj);\n\n                        attr(node, attributes);\n                        result.push('>');\n                    },\n                    end: function() { result.push('</span>'); }\n                },\n                font: {\n                    canOptimize: true,\n                    semantic: false,\n                    start: function(node) {\n                        result.push('<span style=\"');\n\n                        var color = node.getAttribute('color');\n                        var size = fontSizeMappings[node.getAttribute('size')];\n                        var face = node.getAttribute('face');\n\n                        if (color) {\n                            result.push('color:');\n                            result.push(dom.toHex(color));\n                            result.push(';');\n                        }\n\n                        if (face) {\n                            result.push('font-family:');\n                            result.push(face);\n                            result.push(';');\n                        }\n\n                        if (size) {\n                            result.push('font-size:');\n                            result.push(size);\n                            result.push(';');\n                        }\n\n                        result.push('\">');\n                    },\n                    end: function() {\n                        result.push('</span>');\n                    }\n                }\n            };\n\n            tagMap.script = tagMap[\"k:script\"];\n\n            options = options || {};\n\n            if (typeof options.semantic == \"undefined\") {\n                options.semantic = true;\n            }\n\n            function cssProperties(cssText) {\n                var trim = kendo.trim;\n                var css = trim(cssText);\n                var match;\n                var property, value;\n                var properties = [];\n\n                cssDeclaration.lastIndex = 0;\n\n                while (true) {\n                    match = cssDeclaration.exec(css);\n\n                    if (!match) {\n                        break;\n                    }\n\n                    property = trim(match[1].toLowerCase());\n                    value = trim(match[2]);\n\n                    if (property == \"font-size-adjust\" || property == \"font-stretch\") {\n                        continue;\n                    }\n\n                    if (property.indexOf('color') >= 0) {\n                        value = dom.toHex(value);\n                    } else if (property.indexOf('font') >= 0) {\n                        value = value.replace(quoteRe, \"'\");\n                    } else if (/\\burl\\(/g.test(value)) {\n                        value = value.replace(quoteRe, \"\");\n                    }\n\n                    properties.push({ property: property, value: value });\n                }\n\n                return properties;\n            }\n\n            function styleAttr(cssText) {\n                var properties = cssProperties(cssText);\n                var i;\n\n                for (i = 0; i < properties.length; i++) {\n                    result.push(properties[i].property);\n                    result.push(':');\n                    result.push(properties[i].value);\n                    result.push(';');\n                }\n            }\n\n            function specifiedAttributes(node) {\n                var result = [];\n                var attributes = node.attributes;\n                var attribute, i, l;\n                var name, value, specified;\n\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n\n                    name = attribute.nodeName;\n                    value = attribute.value;\n                    specified = attribute.specified;\n\n                    // In IE < 8 the 'value' attribute is not returned as 'specified'. The same goes for type=\"text\"\n                    if (name == 'value' && 'value' in node && node.value) {\n                        specified = true;\n                    } else if (name == 'type' && value == 'text') {\n                        specified = true;\n                    } else if (name == \"class\" && !value) {\n                        specified = false;\n                    } else if (sizzleAttr.test(name)) {\n                        specified = false;\n                    } else if (name == 'complete') {\n                        specified = false;\n                    } else if (name == 'altHtml') {\n                        specified = false;\n                    } else if (name == 'start' && dom.is(node, \"ul\")) {\n                        specified = false;\n                    } else if (name == 'start' && dom.is(node, \"ol\") && value == \"1\") {\n                        specified = false;\n                    } else if (name.indexOf('_moz') >= 0) {\n                        specified = false;\n                    } else if (scriptAttr.test(name)) {\n                        specified = !!options.scripts;\n                    } else if (name == 'data-role' && value == 'resizable' && (dom.is(node, \"tr\") || dom.is(node, \"td\"))) {\n                        specified = false;\n                    }\n\n                    if (specified) {\n                        result.push(attribute);\n                    }\n                }\n\n                return result;\n            }\n\n            function attr(node, attributes) {\n                var i, l, attribute, name, value;\n\n                attributes = attributes || specifiedAttributes(node);\n\n                if (dom.is(node, 'img')) {\n                    var width = node.style.width,\n                        height = node.style.height,\n                        $node = $(node);\n\n                    if (width && pixelRe.test(width)) {\n                        $node.attr('width', parseInt(width, 10));\n                        dom.unstyle(node, { width: undefined$1 });\n                    }\n\n                    if (height && pixelRe.test(height)) {\n                        $node.attr('height', parseInt(height, 10));\n                        dom.unstyle(node, { height: undefined$1 });\n                    }\n                }\n\n                if (!attributes.length) {\n                    return;\n                }\n\n                // Remove the following if everything seems to be in order.\n                // https://github.com/telerik/kendo-ui-core/issues/3639\n                // attributes.sort(function (a, b) {\n                //     return a.nodeName > b.nodeName ? 1 : a.nodeName < b.nodeName ? -1 : 0;\n                // });\n\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n                    name = attribute.nodeName;\n                    value = attribute.value;\n\n                    if (name == \"class\" && value == \"k-table\") {\n                        continue;\n                    }\n\n                    name = name.replace(scriptAttr, \"\");\n\n                    result.push(' ');\n                    result.push(name);\n                    result.push('=\"');\n\n                    if (name == 'style') {\n                        styleAttr(value || node.style.cssText);\n                    } else if (name == 'src' || name == 'href') {\n                        result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\n                    } else {\n                        result.push(dom.fillAttrs[name] ? name : value);\n                    }\n\n                    result.push('\"');\n                }\n            }\n\n            function children(node, skip, skipEncoding) {\n                for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\n                    child(childNode, skip, skipEncoding);\n                }\n            }\n\n            function text(node) {\n                return node.nodeValue.replace(/\\ufeff/g, \"\");\n            }\n\n            function isEmptyBomNode(node) {\n                if (dom.isBom(node)) {\n                    do {\n                        node = node.parentNode;\n\n                        if (dom.is(node, TD) && node.childNodes.length === 1) {\n                            return true;\n                        }\n\n                        if (node.childNodes.length !== 1) {\n                            return false;\n                        }\n                    } while (!dom.isBlock(node));\n\n                    return true;\n                }\n\n                return false;\n            }\n\n            function child(node, skip, skipEncoding) {\n                var nodeType = node.nodeType,\n                    tagName, mapper,\n                    parent, value, previous, jqNode;\n\n                if (immutables && Editor.Immutables.immutable(node)) {\n                    result.push(immutables.serialize(node));\n                } else if (nodeType == 1) {\n                    tagName = dom.name(node);\n                    jqNode = $(node);\n\n                    if (jqNode.hasClass(\"k-element-resize-handle-wrapper\") || jqNode.hasClass(\"k-column-resize-handle-wrapper\") || jqNode.hasClass(\"k-row-resize-handle-wrapper\")) {\n                        return;\n                    }\n\n                    if (!tagName || dom.insignificant(node)) {\n                        return;\n                    }\n\n                    if (!options.scripts && (tagName == \"script\" || tagName == \"k:script\")) {\n                        return;\n                    }\n\n                    mapper = tagMap[tagName];\n\n                    if (mapper) {\n                        if (mapper.canOptimize &&\n                            options.optimizeTags &&\n                            shouldOptimize(node)) {\n                                children(node, false, mapper.skipEncoding);\n                            return;\n                        }\n\n                        if (typeof mapper.semantic == \"undefined\" ||\n                            (options.semantic ^ mapper.semantic)) {\n                            mapper.start(node);\n                            children(node, false, mapper.skipEncoding);\n                            mapper.end(node);\n                            return;\n                        }\n                    }\n\n                    result.push('<');\n                    result.push(tagName);\n\n                    attr(node);\n\n                    if (dom.empty[tagName]) {\n                        result.push(' />');\n                    } else {\n                        result.push('>');\n                        children(node, skip || dom.is(node, 'pre'));\n                        result.push('</');\n                        result.push(tagName);\n                        result.push('>');\n                    }\n                } else if (nodeType == 3) {\n                    if (isEmptyBomNode(node)) {\n                        result.push('&nbsp;');\n                        return;\n                    }\n\n                    value = text(node);\n\n                    if (!skip && supportsLeadingWhitespace) {\n                        parent = node.parentNode;\n                        previous = node.previousSibling;\n\n                        if (!previous) {\n                             previous = (dom.isInline(parent) ? parent : node).previousSibling;\n                        }\n\n                        if (!previous || previous.innerHTML === \"\" || dom.isBlock(previous)) {\n                            if (options.keepEOL) {\n                                value = value.replace(/[\\r\\n\\v\\f\\t ]+/, ' ');\n                            } else {\n                                value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\n                            }\n                        }\n\n                        value = value.replace(/ +/, ' ');\n                    }\n\n                    result.push(skipEncoding ? value : dom.encode(value, options));\n\n                } else if (nodeType == 4) {\n                    result.push('<![CDATA[');\n                    result.push(node.data);\n                    result.push(']]>');\n                } else if (nodeType == 8) {\n                    if (node.data.indexOf('[CDATA[') < 0) {\n                        result.push('<!--');\n                        result.push(node.data);\n                        result.push('-->');\n                    } else {\n                        result.push('<!');\n                        result.push(node.data);\n                        result.push('>');\n                    }\n                }\n            }\n\n            function shouldOptimize(node) {\n                return node.attributes.length === 0;\n            }\n\n            function textOnly(root) {\n                var childrenCount = root.childNodes.length;\n                var textChild = childrenCount && root.firstChild.nodeType == 3;\n\n                return textChild && (childrenCount == 1 || (childrenCount == 2 && dom.insignificant(root.lastChild)));\n            }\n\n            function runCustom() {\n                if (kendo.isFunction(options.custom)) {\n                    result = options.custom(result) || result;\n                }\n            }\n\n            if (textOnly(root)) {\n                result = dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\n                runCustom();\n\n                return result;\n            }\n\n            children(root);\n            result = result.join('');\n            runCustom();\n\n            // if serialized dom contains only whitespace elements, consider it empty (required field validation)\n            if (result.replace(brRe, \"\").replace(emptyPRe, \"\") === \"\") {\n                return \"\";\n            }\n\n            return result;\n        }\n\n    };\n\n    extend(Editor, {\n        Serializer: Serializer\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            Class = kendo.Class,\n            extend = $.extend,\n            Editor = kendo.ui.editor,\n            browser = kendo.support.browser,\n            dom = Editor.Dom,\n            findNodeIndex = dom.findNodeIndex,\n            isDataNode = dom.isDataNode,\n            findClosestAncestor = dom.findClosestAncestor,\n            getNodeLength = dom.getNodeLength,\n            normalize = dom.normalize;\n\n    var SelectionUtils = {\n        selectionFromWindow: function(window) {\n            if (!window) {\n                return;\n            }\n\n            if (!(\"getSelection\" in window)) {\n                return new W3CSelection(window.document);\n            }\n\n            return window.getSelection();\n        },\n\n        selectionFromRange: function(range) {\n            var rangeDocument = RangeUtils.documentFromRange(range);\n            return SelectionUtils.selectionFromDocument(rangeDocument);\n        },\n\n        selectionFromDocument: function(document) {\n            return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\n        }\n    };\n\n    var W3CRange = Class.extend({\n        init: function(doc) {\n            $.extend(this, {\n                ownerDocument: doc, /* not part of the spec; used when cloning ranges, traversing the dom and creating fragments */\n                startContainer: doc,\n                endContainer: doc,\n                commonAncestorContainer: doc,\n                startOffset: 0,\n                endOffset: 0,\n                collapsed: true\n            });\n        },\n\n        // Positioning Methods\n        setStart: function(node, offset) {\n            this.startContainer = node;\n            this.startOffset = offset;\n            updateRangeProperties(this);\n            fixIvalidRange(this, true);\n        },\n\n        setEnd: function(node, offset) {\n            this.endContainer = node;\n            this.endOffset = offset;\n            updateRangeProperties(this);\n            fixIvalidRange(this, false);\n        },\n\n        setStartBefore: function(node) {\n            this.setStart(node.parentNode, findNodeIndex(node));\n        },\n\n        setStartAfter: function(node) {\n            this.setStart(node.parentNode, findNodeIndex(node) + 1);\n        },\n\n        setEndBefore: function(node) {\n            this.setEnd(node.parentNode, findNodeIndex(node));\n        },\n\n        setEndAfter: function(node) {\n            this.setEnd(node.parentNode, findNodeIndex(node) + 1);\n        },\n\n        selectNode: function(node) {\n            this.setStartBefore(node);\n            this.setEndAfter(node);\n        },\n\n        selectNodeContents: function(node) {\n            this.setStart(node, 0);\n            this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\n        },\n\n        collapse: function(toStart) {\n            var that = this;\n\n            if (toStart) {\n                that.setEnd(that.startContainer, that.startOffset);\n            } else {\n                that.setStart(that.endContainer, that.endOffset);\n            }\n        },\n\n        // Editing Methods\n\n        deleteContents: function() {\n            var that = this,\n                range = that.cloneRange();\n\n            if (that.startContainer != that.commonAncestorContainer) {\n                that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n            }\n\n            that.collapse(true);\n\n            (function deleteSubtree(iterator) {\n                while (iterator.next()) {\n                    if (iterator.hasPartialSubtree()) {\n                        deleteSubtree(iterator.getSubtreeIterator());\n                    } else {\n                        iterator.remove();\n                    }\n                }\n            })(new RangeIterator(range));\n        },\n\n        cloneContents: function() {\n            // clone subtree\n            var document = RangeUtils.documentFromRange(this);\n            return (function cloneSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n\n                    while (node = iterator.next()) {\n                        node = node.cloneNode(!iterator.hasPartialSubtree());\n\n                        if (iterator.hasPartialSubtree()) {\n                            node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\n                        }\n\n                        frag.appendChild(node);\n                    }\n\n                    return frag;\n            })(new RangeIterator(this));\n        },\n\n        extractContents: function() {\n            var that = this,\n                range = that.cloneRange();\n\n            if (that.startContainer != that.commonAncestorContainer) {\n                that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n            }\n\n            that.collapse(true);\n\n            var document = RangeUtils.documentFromRange(that);\n\n            return (function extractSubtree(iterator) {\n                var node, frag = document.createDocumentFragment();\n\n                while (node = iterator.next()) {\n                    if (iterator.hasPartialSubtree()) {\n                        node = node.cloneNode(false);\n                        node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\n                    } else {\n                        iterator.remove(that.originalRange);\n                    }\n\n                    frag.appendChild(node);\n                }\n\n                return frag;\n            })(new RangeIterator(range));\n        },\n\n        insertNode: function(node) {\n            var that = this;\n\n            if (isDataNode(that.startContainer)) {\n                if (that.startOffset != that.startContainer.nodeValue.length) {\n                    dom.splitDataNode(that.startContainer, that.startOffset);\n                }\n\n                dom.insertAfter(node, that.startContainer);\n            } else {\n                dom.insertAt(that.startContainer, node, that.startOffset);\n            }\n\n            that.setStart(that.startContainer, that.startOffset);\n        },\n\n        cloneRange: function() {\n            // fast copy\n            return $.extend(new W3CRange(this.ownerDocument), {\n                startContainer: this.startContainer,\n                endContainer: this.endContainer,\n                commonAncestorContainer: this.commonAncestorContainer,\n                startOffset: this.startOffset,\n                endOffset: this.endOffset,\n                collapsed: this.collapsed,\n\n                originalRange: this /* not part of the spec; used to update the original range when calling extractContents() on clones */\n            });\n        },\n\n        // used for debug purposes\n        toString: function() {\n            var startNodeName = this.startContainer.nodeName,\n                endNodeName = this.endContainer.nodeName;\n\n            return [startNodeName == \"#text\" ? this.startContainer.nodeValue : startNodeName, '(', this.startOffset, ') : ',\n                    endNodeName == \"#text\" ? this.endContainer.nodeValue : endNodeName, '(', this.endOffset, ')'].join('');\n        }\n    });\n\n    W3CRange.fromNode = function(node) {\n        return new W3CRange(node.ownerDocument);\n    };\n\n    /* can be used in Range.compareBoundaryPoints if we need it one day */\n    function compareBoundaries(start, end, startOffset, endOffset) {\n        if (start == end) {\n            return endOffset - startOffset;\n        }\n\n        // end is child of start\n        var container = end;\n        while (container && container.parentNode != start) {\n            container = container.parentNode;\n        }\n\n        if (container) {\n            return findNodeIndex(container) - startOffset;\n        }\n\n        // start is child of end\n        container = start;\n        while (container && container.parentNode != end) {\n            container = container.parentNode;\n        }\n\n        if (container) {\n            return endOffset - findNodeIndex(container) - 1;\n        }\n\n        // deep traversal\n        var root = dom.commonAncestor(start, end);\n        var startAncestor = start;\n\n        while (startAncestor && startAncestor.parentNode != root) {\n            startAncestor = startAncestor.parentNode;\n        }\n\n        if (!startAncestor) {\n            startAncestor = root;\n        }\n\n        var endAncestor = end;\n        while (endAncestor && endAncestor.parentNode != root) {\n            endAncestor = endAncestor.parentNode;\n        }\n\n        if (!endAncestor) {\n            endAncestor = root;\n        }\n\n        if (startAncestor == endAncestor) {\n            return 0;\n        }\n\n        return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\n    }\n\n    function fixIvalidRange(range, toStart) {\n        function isInvalidRange(range) {\n            try {\n                return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\n            } catch (ex) {\n                // range was initially invalid (e.g. when cloned from invalid range) - it must be fixed\n                return true;\n            }\n        }\n\n        if (isInvalidRange(range)) {\n            if (toStart) {\n                range.commonAncestorContainer = range.endContainer = range.startContainer;\n                range.endOffset = range.startOffset;\n            } else {\n                range.commonAncestorContainer = range.startContainer = range.endContainer;\n                range.startOffset = range.endOffset;\n            }\n\n            range.collapsed = true;\n        }\n    }\n\n    function updateRangeProperties(range) {\n        range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\n\n        var node = range.startContainer;\n        while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\n            node = node.parentNode;\n        }\n\n        range.commonAncestorContainer = node;\n    }\n\n    var RangeIterator = Class.extend({\n        init: function(range) {\n            $.extend(this, {\n                range: range,\n                _current: null,\n                _next: null,\n                _end: null\n            });\n\n            if (range.collapsed) {\n                return;\n            }\n\n            var root = range.commonAncestorContainer;\n\n            this._next = range.startContainer == root && !isDataNode(range.startContainer) ?\n            range.startContainer.childNodes[range.startOffset] :\n            findClosestAncestor(root, range.startContainer);\n\n            this._end = range.endContainer == root && !isDataNode(range.endContainer) ?\n            range.endContainer.childNodes[range.endOffset] :\n            findClosestAncestor(root, range.endContainer).nextSibling;\n        },\n\n        hasNext: function() {\n            return !!this._next;\n        },\n\n        next: function() {\n            var that = this,\n                current = that._current = that._next;\n            that._next = that._current && that._current.nextSibling != that._end ?\n            that._current.nextSibling : null;\n\n            if (isDataNode(that._current)) {\n                if (that.range.endContainer == that._current) {\n                    current = current.cloneNode(true);\n                    current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\n                }\n\n                if (that.range.startContainer == that._current) {\n                    current = current.cloneNode(true);\n                    current.deleteData(0, that.range.startOffset);\n                }\n            }\n\n            return current;\n        },\n\n        traverse: function(callback) {\n            var that = this,\n                current;\n\n            function next() {\n                that._current = that._next;\n                that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                return that._current;\n            }\n\n            while (current = next()) {\n                if (that.hasPartialSubtree()) {\n                    that.getSubtreeIterator().traverse(callback);\n                } else {\n                    callback(current);\n                }\n            }\n\n            return current;\n        },\n\n        remove: function(originalRange) {\n            var that = this,\n                inStartContainer = that.range.startContainer == that._current,\n                inEndContainer = that.range.endContainer == that._current,\n                start, end, delta;\n\n            if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\n                start = inStartContainer ? that.range.startOffset : 0;\n                end = inEndContainer ? that.range.endOffset : that._current.length;\n                delta = end - start;\n\n                if (originalRange && (inStartContainer || inEndContainer)) {\n                    if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\n                        originalRange.startOffset -= delta;\n                    }\n\n                    if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\n                        originalRange.endOffset -= delta;\n                    }\n                }\n\n                that._current.deleteData(start, delta);\n            } else {\n                var parent = that._current.parentNode;\n\n                if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\n                    var nodeIndex = findNodeIndex(that._current);\n\n                    if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\n                        originalRange.startOffset -= 1;\n                    }\n\n                    if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\n                        originalRange.endOffset -= 1;\n                    }\n                }\n\n                dom.remove(that._current);\n            }\n        },\n\n        hasPartialSubtree: function() {\n            return !isDataNode(this._current) &&\n            (dom.isAncestorOrSelf(this._current, this.range.startContainer) ||\n                dom.isAncestorOrSelf(this._current, this.range.endContainer));\n        },\n\n        getSubtreeIterator: function() {\n            return new RangeIterator(this.getSubRange());\n        },\n\n        getSubRange: function() {\n            var that = this,\n                subRange = that.range.cloneRange();\n            subRange.selectNodeContents(that._current);\n            if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\n                subRange.setStart(that.range.startContainer, that.range.startOffset);\n            }\n            if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\n                subRange.setEnd(that.range.endContainer, that.range.endOffset);\n            }\n\n            return subRange;\n        }\n    });\n\n    var W3CSelection = Class.extend({\n        init: function(doc) {\n            this.ownerDocument = doc;\n            this.rangeCount = 1;\n        },\n\n        addRange: function(range) {\n            var textRange = this.ownerDocument.body.createTextRange();\n\n            // end container should be adopted first in order to prevent selection with negative length\n            adoptContainer(textRange, range, false);\n            adoptContainer(textRange, range, true);\n\n            textRange.select();\n        },\n\n        removeAllRanges: function() {\n            var selection = this.ownerDocument.selection;\n\n            if (selection.type != \"None\") {\n                selection.empty();\n            }\n        },\n\n        getRangeAt: function() {\n            var textRange,\n                range = new W3CRange(this.ownerDocument),\n                selection = this.ownerDocument.selection,\n                element, commonAncestor;\n\n            try {\n                textRange = selection.createRange();\n                element = textRange.item ? textRange.item(0) : textRange.parentElement();\n                if (element.ownerDocument != this.ownerDocument) {\n                    return range;\n                }\n            } catch (ex) {\n                return range;\n            }\n\n            if (selection.type == \"Control\") {\n                range.selectNode(textRange.item(0));\n            } else {\n                commonAncestor = textRangeContainer(textRange);\n                adoptEndPoint(textRange, range, commonAncestor, true);\n                adoptEndPoint(textRange, range, commonAncestor, false);\n\n                if (range.startContainer.nodeType == 9) {\n                    range.setStart(range.endContainer, range.startOffset);\n                }\n\n                if (range.endContainer.nodeType == 9) {\n                    range.setEnd(range.startContainer, range.endOffset);\n                }\n\n                if (textRange.compareEndPoints(\"StartToEnd\", textRange) === 0) {\n                    range.collapse(false);\n                }\n\n                var startContainer = range.startContainer,\n                    endContainer = range.endContainer,\n                    body = this.ownerDocument.body;\n\n                if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) && // check for full body selection\n                    !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) { // but not when single textnode is selected\n                    var movedStart = false,\n                        movedEnd = false;\n\n                    while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\n                        startContainer = startContainer.parentNode;\n                        movedStart = true;\n                    }\n\n                    while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\n                        endContainer = endContainer.parentNode;\n                        movedEnd = true;\n                    }\n\n                    if (startContainer == body && endContainer == body && movedStart && movedEnd) {\n                        range.setStart(startContainer, 0);\n                        range.setEnd(endContainer, getNodeLength(body));\n                    }\n                }\n            }\n\n            return range;\n        }\n    });\n\n    function textRangeContainer(textRange) {\n        var left = textRange.duplicate(),\n            right = textRange.duplicate();\n\n        left.collapse(true);\n        right.collapse(false);\n\n        return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\n    }\n\n    function adoptContainer(textRange, range, start) {\n        // find anchor node and offset\n        var container = range[start ? \"startContainer\" : \"endContainer\"],\n            offset = range[start ? \"startOffset\" : \"endOffset\"],\n            textOffset = 0,\n            isData = isDataNode(container),\n            anchorNode = isData ? container : container.childNodes[offset] || null,\n            anchorParent = isData ? container.parentNode : container,\n            doc = range.ownerDocument,\n            cursor = doc.body.createTextRange(),\n            cursorNode;\n\n        // visible data nodes need a text offset\n        if (container.nodeType == 3 || container.nodeType == 4) {\n            textOffset = offset;\n        }\n\n        if (!anchorParent) {\n            anchorParent = doc.body;\n        }\n\n        if (anchorParent.nodeName.toLowerCase() == \"img\") {\n            cursor.moveToElementText(anchorParent);\n            cursor.collapse(false);\n            textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n        } else {\n            // create a cursor element node to position range (since we can't select text nodes)\n            cursorNode = anchorParent.insertBefore(dom.create(doc, \"a\"), anchorNode);\n\n            cursor.moveToElementText(cursorNode);\n            dom.remove(cursorNode);\n            cursor[start ? \"moveStart\" : \"moveEnd\"](\"character\", textOffset);\n            cursor.collapse(false);\n            textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n        }\n    }\n\n    function adoptEndPoint(textRange, range, commonAncestor, start) {\n        var cursorNode = dom.create(range.ownerDocument, \"a\"),\n            cursor = textRange.duplicate(),\n            comparison = start ? \"StartToStart\" : \"StartToEnd\",\n            result, parent, target,\n            previous, next,\n            args, index,\n            appended = false;\n\n        cursorNode.innerHTML = \"\\ufeff\";\n        cursor.collapse(start);\n\n        parent = cursor.parentElement();\n\n        if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\n            parent = commonAncestor;\n        }\n\n        // detect range end points\n        // insert cursorNode within the textRange parent and move the cursor until it gets outside of the textRange\n        do {\n            if (appended) {\n                parent.insertBefore(cursorNode, cursorNode.previousSibling);\n            } else {\n                parent.appendChild(cursorNode);\n                appended = true;\n            }\n            cursor.moveToElementText(cursorNode);\n        } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\n\n        target = cursorNode.nextSibling;\n\n        if (result == -1 && isDataNode(target)) {\n            cursor.setEndPoint(start ? \"EndToStart\" : \"EndToEnd\", textRange);\n\n            dom.remove(cursorNode);\n\n            args = [target, cursor.text.length];\n        } else {\n            previous = !start && cursorNode.previousSibling;\n            next = start && cursorNode.nextSibling;\n\n            if (isDataNode(next)) {\n                args = [next, 0];\n            } else if (isDataNode(previous)) {\n                args = [previous, previous.length];\n            } else {\n                index = findNodeIndex(cursorNode);\n\n                if (parent.nextSibling && index == parent.childNodes.length - 1) {\n                    args = [parent.nextSibling, 0];\n                } else {\n                    args = [parent, index];\n                }\n            }\n\n            dom.remove(cursorNode);\n        }\n\n        range[start ? \"setStart\" : \"setEnd\"].apply(range, args);\n    }\n\n    var RangeEnumerator = Class.extend({\n        init: function(range) {\n            this.enumerate = function() {\n                var nodes = [];\n\n                function visit(node) {\n                    if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                        nodes.push(node);\n                    } else {\n                        node = node.firstChild;\n                        while (node) {\n                            visit(node);\n                            node = node.nextSibling;\n                        }\n                    }\n                }\n\n                new RangeIterator(range).traverse(visit);\n\n                return nodes;\n            };\n        }\n    });\n\n    var ImmutablesRangeIterator = RangeIterator.extend({\n        hasPartialSubtree: function() {\n            var immutable = Editor.Immutables && Editor.Immutables.immutable;\n            return immutable && !immutable(this._current) && RangeIterator.fn.hasPartialSubtree.call(this);\n        },\n\n        getSubtreeIterator: function() {\n            return new ImmutablesRangeIterator(this.getSubRange());\n        }\n    });\n\n    var ImmutablesRangeEnumerator = Class.extend({\n        init: function(range) {\n            this.enumerate = function() {\n                var nodes = [];\n                var immutable = Editor.Immutables && Editor.Immutables.immutable;\n                function visit(node) {\n                    if (immutable && !immutable(node)) {\n                        if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                            nodes.push(node);\n                        } else {\n                            node = node.firstChild;\n                            while (node) {\n                                visit(node);\n                                node = node.nextSibling;\n                            }\n                        }\n                    }\n                }\n\n                new ImmutablesRangeIterator(range).traverse(visit);\n\n                return nodes;\n            };\n        }\n    });\n\n    var RestorePoint = Class.extend({\n        init: function(range, body, options) {\n            var that = this;\n            that.range = range;\n            that.rootNode = RangeUtils.documentFromRange(range);\n            that.body = body || that.getEditable(range);\n            if (dom.name(that.body) != \"body\") {\n                that.rootNode = that.body;\n            }\n\n            that.startContainer = that.nodeToPath(range.startContainer);\n            that.endContainer = that.nodeToPath(range.endContainer);\n            that.startOffset = that.offset(range.startContainer, range.startOffset);\n            that.endOffset = that.offset(range.endContainer, range.endOffset);\n\n            that.immutables = options && options.immutables;\n\n            if (that.immutables) {\n                that.serializedImmutables = Editor.Immutables.removeImmutables(that.body);\n            }\n\n            that.html = that.body.innerHTML;\n\n            if (that.immutables && !that.serializedImmutables.empty) {\n                Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n            }\n        },\n\n        index: function(node) {\n            var result = 0,\n                lastType = node.nodeType;\n\n            while (node = node.previousSibling) {\n                var nodeType = node.nodeType;\n\n                if (nodeType != 3 || lastType != nodeType) {\n                    result ++;\n                }\n\n                lastType = nodeType;\n            }\n\n            return result;\n        },\n\n        getEditable: function(range) {\n            var root = range.commonAncestorContainer;\n\n            while (root && (root.nodeType == 3 || root.attributes && (!root.attributes.contentEditable || root.attributes.contentEditable.nodeValue.toLowerCase() == \"false\"))) {\n                root = root.parentNode;\n            }\n\n            return root;\n        },\n\n        restoreHtml: function() {\n            var that = this;\n\n            dom.removeChildren(that.body);\n            that.body.innerHTML = that.html;\n            if (that.immutables && !that.serializedImmutables.empty) {\n                Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n            }\n        },\n\n        offset: function(node, value) {\n            if (node.nodeType == 3) {\n                while ((node = node.previousSibling) && node.nodeType == 3) {\n                    value += node.nodeValue.length;\n                }\n            }\n\n            return value;\n        },\n\n        nodeToPath: function(node) {\n            var path = [];\n\n            while (node != this.rootNode) {\n                path.push(this.index(node));\n                node = node.parentNode;\n            }\n\n            return path;\n        },\n\n        toRangePoint: function(range, start, path, denormalizedOffset) {\n            var node = this.rootNode,\n                length = path.length,\n                offset = denormalizedOffset;\n\n            while (length-- && node) {\n                node = node.childNodes[path[length]];\n            }\n\n            while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\n                offset -= node.nodeValue.length;\n                node = node.nextSibling;\n            }\n\n            if (node && offset >= 0) {\n                range[start ? 'setStart' : 'setEnd'](node, offset);\n            }\n        },\n\n        toRange: function() {\n            var that = this,\n                result = that.range.cloneRange();\n\n            that.toRangePoint(result, true, that.startContainer, that.startOffset);\n            that.toRangePoint(result, false, that.endContainer, that.endOffset);\n\n            return result;\n        }\n\n    });\n\n    var Marker = Class.extend({\n        init: function() {\n            this.caret = null;\n        },\n\n        addCaret: function(range) {\n            var that = this;\n            var caret = that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\n            range.insertNode(caret);\n\n            dom.stripBomNode(caret.previousSibling);\n            dom.stripBomNode(caret.nextSibling);\n\n            range.selectNode(caret);\n            return caret;\n        },\n\n        removeCaret: function(range) {\n            var that = this,\n                previous = that.caret.previousSibling,\n                startOffset = 0;\n\n            if (previous) {\n                startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\n            }\n\n            var container = that.caret.parentNode;\n            var containerIndex = previous ? findNodeIndex(previous) : 0;\n\n            dom.remove(that.caret);\n            normalize(container);\n\n            var node = container.childNodes[containerIndex];\n\n            if (isDataNode(node)) {\n                range.setStart(node, startOffset);\n            } else if (node) {\n                var textNode = dom.lastTextNode(node);\n                if (textNode) {\n                    range.setStart(textNode, textNode.nodeValue.length);\n                } else {\n                    range[previous ? 'setStartAfter' : 'setStartBefore'](node);\n                }\n            } else {\n                if (!browser.msie && !container.innerHTML) {\n                    container.innerHTML = '<br _moz_dirty=\"\" />';\n                }\n\n                range.selectNodeContents(container);\n            }\n            range.collapse(true);\n        },\n\n        add: function(range, expand) {\n            var that = this;\n\n            var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\n            var doc = RangeUtils.documentFromRange(range);\n\n            if (expand && range.collapsed) {\n                that.addCaret(range);\n                range = RangeUtils.expand(range);\n            }\n\n            var rangeBoundary = range.cloneRange();\n\n            rangeBoundary.collapse(false);\n            that.end = dom.create(doc, 'span', { className: 'k-marker' });\n            rangeBoundary.insertNode(that.end);\n\n            rangeBoundary = range.cloneRange();\n            rangeBoundary.collapse(true);\n            that.start = that.end.cloneNode(true);\n            rangeBoundary.insertNode(that.start);\n\n            that._removeDeadMarkers(that.start, that.end);\n\n            if (collapsed) {\n                var bom = doc.createTextNode(\"\\ufeff\");\n                dom.insertAfter(bom.cloneNode(), that.start);\n                dom.insertBefore(bom, that.end);\n            }\n\n            normalize(range.commonAncestorContainer);\n\n            range.setStartBefore(that.start);\n            range.setEndAfter(that.end);\n\n            return range;\n        },\n\n        _removeDeadMarkers: function(start, end) {\n            if (start.previousSibling && start.previousSibling.nodeValue == \"\\ufeff\") {\n                dom.remove(start.previousSibling);\n            }\n\n            if (end.nextSibling && end.nextSibling.nodeValue == \"\\ufeff\") {\n                dom.remove(end.nextSibling);\n            }\n        },\n\n        _normalizedIndex: function(node) {\n            var index = findNodeIndex(node);\n            var pointer = node;\n\n            while (pointer.previousSibling) {\n                if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\n                    index--;\n                }\n\n                pointer = pointer.previousSibling;\n            }\n\n            return index;\n        },\n\n        remove: function(range) {\n            var that = this,\n                start = that.start,\n                end = that.end,\n                shouldNormalizeStart,\n                shouldNormalizeEnd,\n                shouldNormalize;\n\n            normalize(range.commonAncestorContainer);\n\n            while (!start.nextSibling && start.parentNode) {\n                start = start.parentNode;\n            }\n\n            while (!end.previousSibling && end.parentNode) {\n                end = end.parentNode;\n            }\n\n            // merely accessing the siblings will solve range issues in IE\n            shouldNormalizeStart = (start.previousSibling && start.previousSibling.nodeType == 3) &&\n                                   (start.nextSibling && start.nextSibling.nodeType == 3);\n\n            shouldNormalizeEnd = (end.previousSibling && end.previousSibling.nodeType == 3) &&\n                                 (end.nextSibling && end.nextSibling.nodeType == 3);\n\n            shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\n\n            start = start.nextSibling;\n            end = end.previousSibling;\n\n            var isBomSelected = start === end && dom.isBom(start);\n            if (isBomSelected && start.length > 1) {\n                start.nodeValue = start.nodeValue.charAt(0);\n            }\n\n            var collapsed = isBomSelected;\n            var collapsedToStart = false;\n            // collapsed range\n            if (start == that.end) {\n                collapsedToStart = !!that.start.previousSibling;\n                start = end = that.start.previousSibling || that.end.nextSibling;\n                collapsed = true;\n            }\n\n            dom.remove(that.start);\n            dom.remove(that.end);\n\n            if (!start || !end) {\n                range.selectNodeContents(range.commonAncestorContainer);\n                range.collapse(true);\n                return;\n            }\n\n            var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\n            var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\n\n            if (start.nodeType == 3) {\n                while (start.previousSibling && start.previousSibling.nodeType == 3) {\n                    start = start.previousSibling;\n                    startOffset += start.nodeValue.length;\n                }\n            }\n\n            if (end.nodeType == 3) {\n                while (end.previousSibling && end.previousSibling.nodeType == 3) {\n                    end = end.previousSibling;\n                    endOffset += end.nodeValue.length;\n                }\n            }\n\n            var startParent = start.parentNode;\n            var endParent = end.parentNode;\n            var startIndex = this._normalizedIndex(start);\n            var endIndex = this._normalizedIndex(end);\n\n            normalize(startParent);\n            if (start.nodeType == 3) {\n                start = startParent.childNodes[startIndex];\n            }\n\n            normalize(endParent);\n            if (end.nodeType == 3) {\n                end = endParent.childNodes[endIndex];\n            }\n\n            if (collapsed) {\n                if (start.nodeType == 3) {\n                    range.setStart(start, startOffset);\n                } else {\n                    range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\n                }\n\n                range.collapse(true);\n\n            } else {\n                if (start.nodeType == 3) {\n                    range.setStart(start, startOffset);\n                } else {\n                    range.setStartBefore(start);\n                }\n\n                if (end.nodeType == 3) {\n                    range.setEnd(end, endOffset);\n                } else {\n                    range.setEndAfter(end);\n                }\n            }\n\n            if (that.caret) {\n                that.removeCaret(range);\n            }\n        }\n    });\n\n    var boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\n\n    var RangeUtils = {\n        nodes: function(range) {\n            var nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                range.selectNodeContents(range.commonAncestorContainer);\n                nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                }\n            }\n            return nodes;\n        },\n\n        textNodes: function(range) {\n            var allNodes = new RangeEnumerator(range).enumerate(),\n                result = allNodes.filter(function(node) {\n                    return dom.allowsTextContent(node.parentElement);\n                });\n\n            return result;\n        },\n\n        editableTextNodes: function(range) {\n            var nodes = [],\n                immutableParent = Editor.Immutables && Editor.Immutables.immutableParent,\n                result = [];\n\n            if (immutableParent && !immutableParent(range.commonAncestorContainer)) {\n                nodes = new ImmutablesRangeEnumerator(range).enumerate();\n                result = nodes.filter(function(node) {\n                    return dom.allowsTextContent(node.parentElement);\n                });\n            }\n\n            return result;\n        },\n\n        documentFromRange: function(range) {\n            var startContainer = range.startContainer;\n            return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\n        },\n\n        createRange: function(document) {\n            return document.createRange();\n        },\n\n        selectRange: function(range) {\n            var image = RangeUtils.image(range);\n            if (image) {\n                range.setStartAfter(image);\n                range.setEndAfter(image);\n            }\n            var selection = SelectionUtils.selectionFromRange(range);\n            selection.removeAllRanges();\n            selection.addRange(range);\n        },\n\n        stringify: function(range) {\n            return kendo.format(\n                \"{0}:{1} - {2}:{3}\",\n                dom.name(range.startContainer), range.startOffset,\n                dom.name(range.endContainer), range.endOffset\n            );\n        },\n\n        split: function(range, node, trim) {\n            function partition(start) {\n                var partitionRange = range.cloneRange();\n                partitionRange.collapse(start);\n                partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\n                var contents = partitionRange.extractContents();\n                if (trim) {\n                    contents = dom.trim(contents);\n                }\n                dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\n            }\n            partition(true);\n            partition(false);\n        },\n\n        mapAll: function(range, map) {\n            var nodes = [];\n\n            new RangeIterator(range).traverse(function(node) {\n                var mapped = map(node);\n\n                if (mapped && $.inArray(mapped, nodes) < 0) {\n                    nodes.push(mapped);\n                }\n            });\n\n            return nodes;\n        },\n\n        getAll: function(range, predicate) {\n            var selector = predicate;\n\n            if (typeof predicate == \"string\") {\n                predicate = function(node) {\n                    return dom.is(node, selector);\n                };\n            }\n\n            return RangeUtils.mapAll(range, function(node) {\n                if (predicate(node)) {\n                    return node;\n                }\n            });\n        },\n\n        getMarkers: function(range) {\n            return RangeUtils.getAll(range, function(node) {\n                return node.className == 'k-marker';\n            });\n        },\n\n        image: function(range) {\n            var nodes = RangeUtils.getAll(range, \"img\");\n\n            if (nodes.length == 1) {\n                return nodes[0];\n            }\n        },\n\n        isStartOf: function(originalRange, node) {\n            if (originalRange.startOffset !== 0) {\n                return false;\n            }\n\n            var range = originalRange.cloneRange();\n\n            while (range.startOffset === 0 && range.startContainer != node) {\n                var index = dom.findNodeIndex(range.startContainer);\n                var parent = range.startContainer.parentNode;\n\n                while (index > 0 && parent[index - 1] && dom.insignificant(parent[index - 1])) {\n                    index--;\n                }\n\n                range.setStart(parent, index);\n            }\n\n            return range.startOffset === 0 && range.startContainer == node;\n        },\n\n        isEndOf: function(originalRange, node) {\n            var range = originalRange.cloneRange();\n\n            range.collapse(false);\n\n            var start = range.startContainer;\n\n            if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\n                range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\n                range.collapse(true);\n            }\n\n            range.setEnd(node, dom.getNodeLength(node));\n\n            var nodes = [];\n\n            function visit(node) {\n                if (!dom.insignificant(node) && !(dom.isDataNode(node) && /^[\\ufeff]*$/.test(node.nodeValue))) {\n                    nodes.push(node);\n                }\n            }\n\n            new RangeIterator(range).traverse(visit);\n\n            return !nodes.length;\n        },\n\n        wrapSelectedElements: function(range) {\n            var startEditable = dom.editableParent(range.startContainer);\n            var endEditable = dom.editableParent(range.endContainer);\n\n            while (range.startOffset === 0 && range.startContainer != startEditable) {\n                range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\n            }\n\n            function isEnd(offset, container) {\n                var length = dom.getNodeLength(container);\n\n                if (offset == length) {\n                    return true;\n                }\n\n                for (var i = offset; i < length; i++) {\n                    if (!dom.insignificant(container.childNodes[i])) {\n                        return false;\n                    }\n                }\n\n                return true;\n            }\n\n            while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\n                range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\n            }\n\n            return range;\n        },\n\n        expand: function(range) {\n            var result = range.cloneRange();\n\n            var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\n            var endContainer = result.endContainer.childNodes[result.endOffset];\n\n            if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\n                return result;\n            }\n\n            var beforeCaret = startContainer.nodeValue;\n            var afterCaret = endContainer.nodeValue;\n\n            if (!beforeCaret || !afterCaret) {\n                return result;\n            }\n\n            var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n            var endOffset = afterCaret.search(boundary);\n\n            if (!startOffset || !endOffset) {\n                return result;\n            }\n\n            endOffset = endOffset == -1 ? afterCaret.length : endOffset;\n            startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\n\n            result.setStart(startContainer, startOffset);\n            result.setEnd(endContainer, endOffset);\n\n            return result;\n        },\n\n        isExpandable: function(range) {\n            var node = range.startContainer;\n            var rangeDocument = RangeUtils.documentFromRange(range);\n\n            if (node == rangeDocument || node == rangeDocument.body) {\n                return false;\n            }\n\n            var result = range.cloneRange();\n\n            var value = node.nodeValue;\n            if (!value) {\n                return false;\n            }\n\n            var beforeCaret = value.substring(0, result.startOffset);\n            var afterCaret = value.substring(result.startOffset);\n\n            var startOffset = 0, endOffset = 0;\n\n            if (beforeCaret) {\n                startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n            }\n\n            if (afterCaret) {\n                endOffset = afterCaret.search(boundary);\n            }\n\n            return startOffset && endOffset;\n        }\n    };\n\n    extend(Editor, {\n        SelectionUtils: SelectionUtils,\n        W3CRange: W3CRange,\n        RangeIterator: RangeIterator,\n        W3CSelection: W3CSelection,\n        RangeEnumerator: RangeEnumerator,\n        RestorePoint: RestorePoint,\n        Marker: Marker,\n        RangeUtils: RangeUtils\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            Class = kendo.Class,\n            Editor = kendo.ui.editor,\n            dom = Editor.Dom,\n            template = kendo.template,\n            RangeUtils = Editor.RangeUtils,\n            complexBlocks = [\"ul\", \"ol\", \"tbody\", \"thead\", \"table\"],\n            toolsToBeUpdated = [\n                \"bold\",\n                \"italic\",\n                \"underline\",\n                \"strikethrough\",\n                \"superscript\",\n                \"subscript\",\n                \"forecolor\",\n                \"backcolor\",\n                \"fontname\",\n                \"fontsize\",\n                \"createlink\",\n                \"unlink\",\n                \"autolink\",\n                \"addcolumnleft\",\n                \"addcolumnright\",\n                \"addrowabove\",\n                \"addrowbelow\",\n                \"deleterow\",\n                \"deletecolumn\",\n                \"mergecells\",\n                \"formatting\",\n                \"cleanformatting\" ],\n            IMMUTABALE = \"k-immutable\",\n            IMMUTABALE_MARKER_SELECTOR = \"[\" + IMMUTABALE + \"]\",\n            IMMUTABLE_SELECTOR = \"[contenteditable='false']\";\n\n        var rootCondition = function(node) {\n            return $(node).is(\"body,.k-editor\");\n        };\n\n        var immutable = function(node) {\n            return node.getAttribute && node.getAttribute(\"contenteditable\") == \"false\";\n        };\n\n        var immutableParent = function(node) {\n            return dom.closestBy(node, immutable, rootCondition);\n        };\n\n        var expandImmutablesIn = function(range) {\n            var startImmutableParent = immutableParent(range.startContainer);\n            var endImmutableParent = immutableParent(range.endContainer);\n\n            if (startImmutableParent || endImmutableParent) {\n                if (startImmutableParent) {\n                    range.setStartBefore(startImmutableParent);\n                }\n                if (endImmutableParent) {\n                    range.setEndAfter(endImmutableParent);\n                }\n            }\n        };\n\n        var immutablesContext = function(range) {\n            if (immutableParent(range.commonAncestorContainer)) {\n                return true;\n            } else if (immutableParent(range.startContainer) || immutableParent(range.endContainer)) {\n                var editableNodes = RangeUtils.editableTextNodes(range);\n                if (editableNodes.length === 0) {\n                    return true;\n                }\n            }\n            return false;\n        };\n\n        var randomId = function(length) {\n            var result = '';\n            var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n            for (var i = length || 10; i > 0; --i) {\n                result += chars.charAt(Math.round(Math.random() * (chars.length - 1)));\n            }\n            return result;\n        };\n\n        var removeImmutables = function(root) {\n            var serializedImmutables = { empty: true }, nodeName, id, serialized;\n             $(root).find(IMMUTABLE_SELECTOR).each(function(i, node) {\n                nodeName = dom.name(node);\n                id = randomId();\n                serialized = \"<\" + nodeName + \" \" + IMMUTABALE + \"='\" + id + \"'></\" + nodeName + \">\";\n                serializedImmutables[id] = { node: node, style: $(node).attr(\"style\") };\n                serializedImmutables.empty = false;\n                $(node).replaceWith(serialized);\n            });\n\n            return serializedImmutables;\n        };\n\n        var restoreImmutables = function(root, serializedImmutables) {\n            var id, immutable;\n            $(root).find(IMMUTABALE_MARKER_SELECTOR).each(function(i, node) {\n                id = node.getAttribute(IMMUTABALE);\n                immutable = serializedImmutables[id];\n                $(node).replaceWith(immutable.node);\n                if (immutable.style != $(immutable.node).attr(\"style\")) {\n                    $(immutable.node).removeAttr(\"style\").attr(\"style\", immutable.style);\n                }\n            });\n        };\n\n        var deletingKey = function(keyCode) {\n            var keys = kendo.keys;\n            return keyCode === keys.BACKSPACE || keyCode == keys.DELETE;\n        };\n        var updateToolOptions = function(tool) {\n            var options = tool ? tool.options : undefined$1;\n            if (options && options.finder) {\n                options.finder._initOptions({ immutables: true });\n            }\n        };\n\n        var Immutables = Class.extend({\n            init: function(editor) {\n                this.editor = editor;\n                this.serializedImmutables = {};\n                this.options = $.extend({}, editor && editor.options && editor.options.immutables);\n\n                var tools = kendo.ui.Editor.defaultTools;\n                updateToolOptions(tools.justifyLeft);\n                updateToolOptions(tools.justifyCenter);\n                updateToolOptions(tools.justifyRight);\n                updateToolOptions(tools.justifyFull);\n            },\n\n            serialize: function(node) {\n                var result = this._toHtml(node),\n                    id;\n\n                if (result.indexOf(IMMUTABALE) === -1) {\n                    id = this.randomId();\n                    result = result.replace(/>/, ' ' + IMMUTABALE + '=\"' + id + '\">');\n                } else {\n                    id = result.match(/k-immutable\\s*=\\s*['\"](.*)['\"]/)[1];\n                }\n\n                this.serializedImmutables[id] = node;\n                return result;\n            },\n\n            _toHtml: function(node) {\n                var serialization = this.options.serialization;\n                var serializationType = typeof serialization;\n                var nodeName;\n\n                switch (serializationType) {\n                    case \"string\":\n                        return template(serialization)(node);\n                    case \"function\":\n                        return serialization(node);\n                    default:\n                        nodeName = dom.name(node);\n                        return \"<\" + nodeName + \"></\" + nodeName + \">\";\n                }\n            },\n\n            deserialize: function(node) {\n                var that = this;\n                var deserialization = this.options.deserialization;\n\n                $(IMMUTABALE_MARKER_SELECTOR, node).each(function() {\n                    var id = this.getAttribute(IMMUTABALE);\n                    var immutable = that.serializedImmutables[id];\n                    if (kendo.isFunction(deserialization)) {\n                        deserialization(this, immutable);\n                    }\n                    $(this).replaceWith(immutable);\n                });\n\n                that.serializedImmutables = {};\n            },\n\n            randomId: function(length) {\n                return randomId(length);\n            },\n\n            keydown: function(e, range) {\n                var isDeleting = deletingKey(e.keyCode);\n                var shouldCancelEvent = (isDeleting && this._cancelDeleting(e, range)) ||\n                    (!isDeleting && this._cancelTyping(e, range));\n\n                if (shouldCancelEvent) {\n                    e.preventDefault();\n                    return true;\n                }\n            },\n\n            _cancelTyping: function(e, range) {\n                var editor = this.editor;\n                var keyboard = editor.keyboard;\n\n                return range.collapsed && !keyboard.typingInProgress &&\n                    keyboard.isTypingKey(e) && immutablesContext(range);\n            },\n\n            _cancelDeleting: function(e, range) {\n                var keys = kendo.keys;\n                var backspace = e.keyCode === keys.BACKSPACE;\n                var del = e.keyCode == keys.DELETE;\n\n                if (!backspace && !del) {\n                    return false;\n                }\n                var cancelDeleting = false;\n                if (range.collapsed) {\n                    if (immutablesContext(range)) {\n                        return true;\n                    }\n                    var immutable = this.nextImmutable(range, del);\n                    if (immutable && backspace) {\n                        var closestSelectionLi = dom.closest(range.commonAncestorContainer, \"li\");\n                        if (closestSelectionLi) {\n                            var closestImmutableLi = dom.closest(immutable, \"li\");\n                            if (closestImmutableLi && closestImmutableLi !== closestSelectionLi) {\n                                return cancelDeleting;\n                            }\n                        }\n                    }\n                    if (immutable && !dom.tableCell(immutable)) {\n                        if (dom.parentOfType(immutable, complexBlocks) === dom.parentOfType(range.commonAncestorContainer, complexBlocks)) {\n                            while (immutable && immutable.parentNode.childNodes.length == 1) {\n                                immutable = immutable.parentNode;\n                            }\n                            if (dom.tableCell(immutable)) {\n                                return cancelDeleting;\n                            }\n                            this._removeImmutable(immutable, range);\n                        }\n                        cancelDeleting = true;\n                    }\n                }\n                return cancelDeleting;\n            },\n\n            nextImmutable: function(range, forwards) {\n                var commonContainer = range.commonAncestorContainer;\n                if (dom.isBom(commonContainer) || ((forwards && RangeUtils.isEndOf(range, commonContainer)) || (!forwards && RangeUtils.isStartOf(range, commonContainer)))) {\n                    var next = this._nextNode(commonContainer, forwards);\n                    if (next && dom.isBlock(next) && !immutableParent(next)) {\n                        while (next && next.children && next.children[forwards ? 0 : next.children.length - 1]) {\n                            next = next.children[forwards ? 0 : next.children.length - 1];\n                        }\n                    }\n                    return immutableParent(next);\n                }\n            },\n\n            _removeImmutable: function(immutable, range) {\n                var editor = this.editor;\n                var startRestorePoint = new Editor.RestorePoint(range, editor.body);\n                dom.remove(immutable);\n                Editor._finishUpdate(editor, startRestorePoint);\n            },\n\n            _nextNode: function(node, forwards) {\n                var sibling = forwards ? \"nextSibling\" : \"previousSibling\";\n                var current = node, next;\n                while (current && !next && !dom.isChildOfBaseContainer(current)) {\n                    next = current[sibling];\n                    if (next && dom.isDataNode(next) && /^\\s|[\\ufeff]$/.test(next.nodeValue)) {\n                        current = next;\n                        next = current[sibling];\n                    }\n                    if (!next) {\n                        current = current.parentNode;\n                    }\n                }\n                return next;\n            }\n        });\n\n        Immutables.immutable = immutable;\n        Immutables.immutableParent = immutableParent;\n        Immutables.expandImmutablesIn = expandImmutablesIn;\n        Immutables.immutablesContext = immutablesContext;\n        Immutables.toolsToBeUpdated = toolsToBeUpdated;\n        Immutables.removeImmutables = removeImmutables;\n        Immutables.restoreImmutables = restoreImmutables;\n\n        Editor.Immutables = Immutables;\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            Class = kendo.Class,\n            editorNS = kendo.ui.editor,\n            dom = editorNS.Dom,\n            RestorePoint = editorNS.RestorePoint,\n            Marker = editorNS.Marker,\n            extend = $.extend;\n\n    function finishUpdate(editor, startRestorePoint) {\n        var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n        var command = new GenericCommand(startRestorePoint, endRestorePoint);\n        command.editor = editor;\n\n        editor.undoRedoStack.push(command);\n        editor._refreshTools();\n\n        return endRestorePoint;\n    }\n\n    var Command = Class.extend({\n        init: function(options) {\n            this.options = options;\n            this.restorePoint = new RestorePoint(options.range, options.body, { immutables: options.immutables });\n            this.marker = new Marker();\n            this.formatter = options.formatter;\n        },\n\n        getRange: function() {\n            return this.restorePoint.toRange();\n        },\n\n        lockRange: function(expand) {\n            return this.marker.add(this.getRange(), expand);\n        },\n\n        releaseRange: function(range) {\n            this.marker.remove(range);\n            this.editor.selectRange(range);\n        },\n\n        undo: function() {\n            var point = this.restorePoint;\n            point.restoreHtml();\n            this.editor.selectRange(point.toRange());\n        },\n\n        redo: function() {\n            this.exec();\n        },\n\n        createDialog: function(content, options) {\n            var editor = this.editor;\n\n            return $(content).appendTo(document.body)\n                .kendoWindow(extend({}, editor.options.dialogOptions, options))\n                .closest(\".k-window\")\n                .addClass(\"k-editor-window\")\n                .toggleClass(\"k-rtl\", kendo.support.isRtl(editor.wrapper)).end();\n        },\n\n        exec: function() {\n            var range = this.lockRange(true);\n            this.formatter.editor = this.editor;\n            this.formatter.toggle(range);\n            this.releaseRange(range);\n        },\n\n        postExec: function() {\n            this.editor._handleSpaceAndNewLines();\n        },\n\n        immutables: function() {\n            return this.editor && this.editor.options.immutables;\n        },\n\n        expandImmutablesIn: function(range) {\n            if (this.immutables()) {\n                kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                this.restorePoint = new RestorePoint(range, this.editor.body);\n            }\n        },\n\n        _actionButtonsTemplate: function({ messages, insertButtonIcon, cancelButtonIcon }) {\n            return '<div class=\"k-actions k-actions-start k-actions-horizontal k-window-buttons\">' +\n            kendo.html.renderButton(`<button class=\"k-dialog-insert\">${messages.dialogInsert}</button>`, { themeColor: \"primary\", icon: insertButtonIcon }) +\n            kendo.html.renderButton(`<button class=\"k-dialog-close\">${messages.dialogCancel}</button>`, { icon: cancelButtonIcon }) +\n        '</div>';\n        }\n    });\n\n    var GenericCommand = Class.extend({\n        init: function(startRestorePoint, endRestorePoint) {\n            this.body = startRestorePoint.body;\n            this.startRestorePoint = startRestorePoint;\n            this.endRestorePoint = endRestorePoint;\n        },\n\n        redo: function() {\n            dom.removeChildren(this.body);\n\n            this.body.innerHTML = this.endRestorePoint.html;\n            this.editor.selectRange(this.endRestorePoint.toRange());\n        },\n\n        undo: function() {\n            dom.removeChildren(this.body);\n\n            this.body.innerHTML = this.startRestorePoint.html;\n            this.editor.selectRange(this.startRestorePoint.toRange());\n        }\n    });\n\n    extend(editorNS, {\n        _finishUpdate: finishUpdate,\n        Command: Command,\n        GenericCommand: GenericCommand\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        Command = Editor.Command,\n        Tool = Editor.Tool,\n        dom = Editor.Dom;\n\n    var ViewHtmlCommand = Command.extend({\n        init: function(options) {\n            var cmd = this;\n            cmd.options = options;\n            Command.fn.init.call(cmd, options);\n            cmd.attributes = null;\n            cmd.async = true;\n        },\n\n        exec: function() {\n            var that = this,\n                editor = that.editor,\n                options = editor.options,\n                messages = editor.options.messages,\n                dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body),\n                textarea = \".k-editor-textarea > textarea\",\n                content, comments;\n\n            options.serialization.immutables = editor.immutables;\n\n            comments = dom.getAllComments(editor.body);\n\n            content = EditorUtils.cacheComments(editor.value(), comments);\n            content = ViewHtmlCommand.indent(content);\n            content = EditorUtils.retrieveComments(content, comments);\n\n            options.serialization.immutables = undefined$1;\n\n            function apply(e) {\n                options.deserialization.immutables = editor.immutables;\n                editor.value(dialog.find(textarea).val());\n                options.deserialization.immutables = undefined$1;\n\n                close(e);\n\n                if (that.change) {\n                    that.change();\n                }\n\n                editor.trigger(\"change\");\n            }\n\n            function close(e) {\n                e.preventDefault();\n\n                dialog.data(\"kendoWindow\").destroy();\n\n                if (editor.immutables) {\n                    editor.immutables.serializedImmutables = {};\n                }\n\n                editor.focus();\n            }\n\n            let window = this.createDialog(dialog, {\n                title: messages.viewHtml,\n                _footerTemplate: ViewHtmlCommand._footerTemplate,\n                _footerMessages: messages,\n                width: 600,\n                height: 400,\n                resizable: true,\n                close: close,\n                visible: false\n            })\n                .find(textarea).val(content).end()\n                .data(\"kendoWindow\");\n\n                window.center().open();\n\n                window.wrapper.find(\".k-dialog-update\").on(\"click\", apply).end();\n                window.wrapper.find(\".k-dialog-close\").on(\"click\", close).end();\n            dialog.find(textarea).trigger(\"focus\");\n        }\n    });\n\n    extend(ViewHtmlCommand, {\n        template: () =>\n        '<div class=\"k-editor-dialog k-popup-edit-form k-viewhtml-dialog\">' +\n            '<span class=\"k-input k-textarea k-input-solid k-input-md k-rounded-md k-editor-textarea\"><textarea class=\"k-input-inner !k-overflow-auto !k-resize-none\"></textarea></span>' +\n        '</div>',\n        _footerTemplate: ({ dialogUpdate, dialogCancel }) =>\n        `<div class=\"k-actions k-actions-start k-actions-horizontal k-window-actions\">` +\n            kendo.html.renderButton(`<button class=\"k-dialog-update\">${kendo.htmlEncode(dialogUpdate)}</button>`, { themeColor: \"primary\", icon: \"check\" }) +\n            kendo.html.renderButton(`<button class=\"k-dialog-close\">${kendo.htmlEncode(dialogCancel)}</button>`, { icon: \"cancel-outline\" }) +\n        `</div>`,\n        indent: function(content) {\n            return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/ig, \"</$1>\\n\")\n                          .replace(/<(ul|ol)([^>]*)><li/ig, \"<$1$2>\\n<li\")\n                          .replace(/<br \\/>/ig, \"<br />\\n\")\n                          .replace(/\\n$/, \"\");\n        }\n    });\n\n    kendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\n\n    Editor.EditorUtils.registerTool(\"viewHtml\", new Tool({ command: ViewHtmlCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        Tool = Editor.Tool,\n        Command = Editor.Command,\n        EditorUtils = Editor.EditorUtils;\n\n    var FormatCommand = Command.extend({\n        init: function(options) {\n            options.formatter = options.formatter();\n            var finder = options.formatter.finder;\n            if (finder && EditorUtils.formatByName(\"immutable\", finder.format)) {\n                finder._initOptions({ immutables: options.immutables });\n                options.finder && options.finder._initOptions({ immutables: options.immutables });\n            }\n            Command.fn.init.call(this, options);\n        }\n    });\n\n    var FormatTool = Tool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n        },\n\n        command: function(commandArguments) {\n            var that = this;\n\n            return new FormatCommand(extend(commandArguments, {\n                formatter: that.options.formatter,\n                finder: that.options.finder\n            }));\n        },\n\n        update: function(ui, nodes) {\n            var isFormatted = this.options.finder.isFormatted(nodes),\n                toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n            if (toolbar && ui.getKendoToggleButton()) {\n                toolbar.toggle(ui, isFormatted);\n            }\n        }\n    });\n\n    $.extend(Editor, {\n        FormatCommand: FormatCommand,\n        FormatTool: FormatTool\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        Editor = kendo.ui.editor,\n        formats = kendo.ui.Editor.fn.options.formats,\n        Tool = Editor.Tool,\n        FormatTool = Editor.FormatTool,\n        dom = Editor.Dom,\n        RangeUtils = Editor.RangeUtils,\n        extend = $.extend,\n        registerTool = Editor.EditorUtils.registerTool,\n        registerFormat = Editor.EditorUtils.registerFormat,\n        MOUSEDOWN_NS = \"mousedown.kendoEditor\",\n        KEYDOWN_NS = \"keydown.kendoEditor\",\n        KMARKER = \"k-marker\";\n\n    var InlineFormatFinder = Class.extend({\n        init: function(format) {\n            this.format = format;\n        },\n\n        numberOfSiblings: function(referenceNode) {\n            var textNodesCount = 0,\n                elementNodesCount = 0,\n                markerCount = 0,\n                parentNode = referenceNode.parentNode,\n                node;\n\n            for (node = parentNode.firstChild; node; node = node.nextSibling) {\n                if (node != referenceNode) {\n                    if (node.className == KMARKER) {\n                        markerCount++;\n                    } else if (node.nodeType == 3) {\n                        textNodesCount++;\n                    } else {\n                        elementNodesCount++;\n                    }\n                }\n            }\n\n            if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\n                // full node selection\n                return 0;\n            } else {\n                return elementNodesCount + textNodesCount;\n            }\n        },\n\n        findSuitable: function(sourceNode, skip) {\n            if (!skip && this.numberOfSiblings(sourceNode) > 0) {\n                return null;\n            }\n\n            var node = sourceNode.parentNode;\n            var tags = this.format[0].tags;\n\n            while (!dom.ofType(node, tags)) {\n                if (this.numberOfSiblings(node) > 0) {\n                    return null;\n                }\n\n                node = node.parentNode;\n            }\n\n            return node;\n        },\n\n        findFormat: function(sourceNode) {\n            var format = this.format,\n                attrEquals = dom.attrEquals,\n                i, len, node, tags, attributes;\n\n            for (i = 0, len = format.length; i < len; i++) {\n                node = sourceNode;\n                tags = format[i].tags;\n                attributes = format[i].attr;\n\n                if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\n                    return node;\n                }\n\n                while (node) {\n                    node = dom.parentOfType(node, tags);\n                    if (node && attrEquals(node, attributes)) {\n                        return node;\n                    }\n                }\n            }\n\n            return null;\n        },\n\n        isFormatted: function(nodes) {\n            var i, len;\n\n            for (i = 0, len = nodes.length; i < len; i++) {\n                if (this.findFormat(nodes[i])) {\n                    return true;\n                }\n            }\n            return false;\n        }\n    });\n\n    var InlineFormatter = Class.extend({\n        init: function(format, values) {\n            this.finder = new InlineFormatFinder(format);\n            this.attributes = extend({}, format[0].attr, values);\n            this.tag = format[0].tags[0];\n        },\n\n        wrap: function(node) {\n            return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\n        },\n\n        activate: function(range, nodes) {\n            if (this.finder.isFormatted(nodes)) {\n                this.split(range);\n                this.remove(nodes);\n            } else {\n                this.apply(nodes);\n            }\n        },\n\n        toggle: function(range) {\n            var textNodes = this.immutables() ? RangeUtils.editableTextNodes : RangeUtils.textNodes;\n            var nodes = textNodes(range);\n\n            if (nodes.length > 0) {\n                this.activate(range, nodes);\n            }\n        },\n\n        immutables: function() {\n            return this.editor && this.editor.options.immutables;\n        },\n\n        apply: function(nodes) {\n            var formatNodes = [];\n            var i, l, node, formatNode;\n\n            if (nodes.length > 1) {\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    node = nodes[i];\n                    formatNode = this.format(node, true);\n                    formatNodes.push(formatNode);\n\n                }\n            } else {\n                node = nodes[0];\n                formatNode = this.format(node, false);\n            }\n\n            this.consolidate(formatNodes);\n        },\n\n        format: function(node, outerMostInline) {\n            var formatNode = this.finder.findSuitable(node);\n            var attributes = this.attributes;\n            var styleAttr = attributes ? attributes.style || {} : {};\n\n            if (formatNode) {\n                if (dom.is(formatNode, \"font\")) {\n                    if (styleAttr.color) {\n                        formatNode.removeAttribute(\"color\");\n                    }\n                    if (styleAttr.fontName) {\n                        formatNode.removeAttribute(\"face\");\n                    }\n                    if (styleAttr.fontSize) {\n                        formatNode.removeAttribute(\"size\");\n                    }\n                }\n                dom.attr(formatNode, attributes);\n            } else {\n                while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1 && node.parentNode.contentEditable !== 'true' && outerMostInline) {\n                    node = node.parentNode;\n                }\n\n                formatNode = this.wrap(node);\n            }\n\n            return formatNode;\n        },\n\n        remove: function(nodes) {\n            var i, l, formatNode;\n\n            for (i = 0, l = nodes.length; i < l; i++) {\n                formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    if (this.attributes && this.attributes.style) {\n                        dom.unstyle(formatNode, this.attributes.style);\n                        if (!formatNode.style.cssText && !formatNode.attributes[\"class\"]) {\n                            dom.unwrap(formatNode);\n                        }\n                    } else {\n                        dom.unwrap(formatNode);\n                    }\n                }\n            }\n        },\n\n        split: function(range) {\n            var nodes = RangeUtils.textNodes(range);\n            var l = nodes.length;\n            var i, formatNode;\n\n            if (l > 0) {\n                for (i = 0; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        RangeUtils.split(range, formatNode, true);\n                    }\n                }\n            }\n        },\n\n        consolidate: function(nodes) {\n            var node, last;\n\n            while (nodes.length > 1) {\n                node = nodes.pop();\n                last = nodes[nodes.length - 1];\n\n                if (node.previousSibling && node.previousSibling.className == KMARKER) {\n                    last.appendChild(node.previousSibling);\n                }\n\n                if (node.tagName == last.tagName &&\n                    node.previousSibling == last &&\n                    node.style.cssText == last.style.cssText &&\n                    node.className === last.className) {\n\n                    while (node.firstChild) {\n                        last.appendChild(node.firstChild);\n                    }\n\n                    dom.remove(node);\n                }\n            }\n        }\n    });\n\n    var GreedyInlineFormatFinder = InlineFormatFinder.extend({\n        init: function(format, greedyProperty, fontAttr, defaultValue) {\n            this.format = format;\n            this.greedyProperty = greedyProperty;\n            this.fontAttr = fontAttr;\n            this.defaultValue = defaultValue;\n            InlineFormatFinder.fn.init.call(this, format);\n        },\n\n        getInlineCssValue: function(node) {\n            var attributes = node.attributes;\n            var trim = kendo.trim;\n            var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\n            var propertyAndValue, property, value;\n\n            if (!attributes) {\n                return;\n            }\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n                name = attribute.nodeName;\n                attributeValue = attribute.nodeValue;\n\n                if (attribute.specified && name == \"style\") {\n\n                    css = trim(attributeValue || node.style.cssText).split(\";\");\n\n                    for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\n                        pair = css[cssIndex];\n                        if (pair.length) {\n                            propertyAndValue = pair.split(\":\");\n                            property = trim(propertyAndValue[0].toLowerCase());\n                            value = trim(propertyAndValue[1]);\n\n                            if (property != this.greedyProperty) {\n                                continue;\n                            }\n\n                            return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n                        }\n                    }\n                }\n\n                if (this.fontAttr && attribute.specified && name == this.fontAttr) {\n                    property = attribute.nodeValue;\n                    value = attribute.nodeValue;\n\n                    return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n                }\n            }\n        },\n\n        getFormatInner: function(node) {\n            var $node = $(dom.isDataNode(node) ? node.parentNode : node);\n            var parents = $node.parentsUntil(\"[contentEditable]\").addBack().toArray().reverse();\n            var i, len, value;\n\n            for (i = 0, len = parents.length; i < len; i++) {\n                value = this.greedyProperty == \"className\" ? parents[i].className : this.getInlineCssValue(parents[i]);\n\n                if (value) {\n                    return value;\n                }\n            }\n\n            return this.defaultValue || \"inherit\";\n        },\n\n        getFormat: function(nodes) {\n            var result = this.getFormatInner(nodes[0]), i, len;\n\n            for (i = 1, len = nodes.length; i < len; i++) {\n                if (result != this.getFormatInner(nodes[i])) {\n                    return \"\";\n                }\n            }\n\n            return result;\n        },\n\n        isFormatted: function(nodes) {\n            return this.getFormat(nodes) !== \"\";\n        }\n    });\n\n    var GreedyInlineFormatter = InlineFormatter.extend({\n        init: function(format, values, greedyProperty) {\n            InlineFormatter.fn.init.call(this, format, values);\n\n            this.values = values;\n            this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\n\n            if (greedyProperty) {\n                this.greedyProperty = kendo.toCamelCase(greedyProperty);\n            }\n\n        },\n\n        activate: function(range, nodes) {\n            var greedyProperty = this.greedyProperty;\n            var action = \"apply\";\n\n            this.split(range);\n\n            if (greedyProperty && this.values.style[greedyProperty] == \"inherit\") {\n                action = \"remove\";\n            }\n\n            this[action](nodes);\n        }\n    });\n\n    var InlineFormatTool = FormatTool.extend({\n        init: function(options) {\n            FormatTool.fn.init.call(this, extend(options, {\n                finder: new InlineFormatFinder(options.format),\n                formatter: function() { return new InlineFormatter(options.format); }\n            }));\n        }\n    });\n\n    var DelayedExecutionTool = Tool.extend({\n        update: function(ui, nodes) {\n            var list = ui.data(this.type);\n\n            list.close();\n            list.value(this.finder.getFormat(nodes));\n        }\n    });\n\n    var FontTool = DelayedExecutionTool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n\n            // IE has single selection hence we are using select box instead of combobox\n            this.type = \"kendoComboBox\";\n            this.format = [{ tags: [\"span\", \"font\"] }];\n            this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr, options.fontAttr);\n        },\n\n        command: function(commandArguments) {\n            var options = this.options,\n                format = this.format,\n                style = {};\n\n            return new Editor.FormatCommand(extend(commandArguments, {\n                formatter: function() {\n                    style[options.domAttr] = commandArguments.value;\n\n                    return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                }\n            }));\n        },\n\n        initialize: function(ui, editor) {\n            var options = this.options,\n                toolName = options.name,\n                dataSource,\n                range,\n                widget = ui.data(\"kendoComboBox\"),\n                defaultValue = [];\n\n            if (!widget) {\n                return;\n            }\n\n            if (options.defaultValue) {\n               defaultValue = [{\n                    text: editor.options.messages[options.defaultValue[0].text],\n                    value: options.defaultValue[0].value\n               }];\n            }\n\n            dataSource = defaultValue.concat(options.items ? options.items : (editor.options[toolName] || [] ));\n            widget.setDataSource(dataSource);\n\n            widget.bind(\"change\", (e) => {\n                editor._range = range;\n                if (e.sender.value() !== \"\") {\n                    Tool.exec(editor, toolName, e.sender.value());\n                }\n            });\n\n            widget.bind(\"close\", () => {\n                setTimeout(function() {\n                    editor._deleteSavedRange();\n                },0);\n            });\n\n            widget.value(\"inherit\");\n\n            widget.wrapper.on(MOUSEDOWN_NS, \".k-select,.k-input-button,.k-input\", function() {\n                var newRange = editor.getRange();\n                range = editor._containsRange(newRange) ? newRange : range;\n            })\n            .on(KEYDOWN_NS, function(e) {\n                if (e.keyCode === kendo.keys.ENTER) {\n                    editor._deleteSavedRange();\n                    e.preventDefault();\n                }\n            });\n        }\n\n    });\n\n    var ColorTool = Tool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n\n            this.format = [{ tags: [\"span\",\"font\"] }];\n            this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n        },\n\n        options: {\n            palette: \"websafe\",\n            columns: 18\n        },\n\n        update: function() {\n            this._widget.close();\n        },\n\n        command: function(commandArguments) {\n            var options = this.options,\n                format = this.format,\n                style = {};\n\n            return new Editor.FormatCommand(extend(commandArguments, {\n                formatter: function() {\n                    style[options.domAttr] = commandArguments.value;\n\n                    return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                }\n            }));\n        },\n\n        initialize: function(ui, editor) {\n            var that = this,\n                toolName = that.options.name,\n                component = this._widget = ui.getKendoColorPicker();\n\n            if (!component) {\n                return;\n            }\n\n            component.bind(\"change\", () => {\n                var color = component.value();\n\n                if (color) {\n                    Tool.exec(editor, toolName, color);\n                }\n\n                delete that.storedRange;\n                delete that._inputFocused;\n\n                editor.focus();\n            });\n\n            component.bind(\"open\", () => {\n                that.storedRange = editor.getRange();\n\n                component._popup.element.on(MOUSEDOWN_NS, function(e) {\n                    if (!$(e.target).is(\"input.k-color-value\")) {\n                        e.preventDefault();\n                    }\n                });\n\n                if (!component._popup.element.is(\"[unselectable='on']\")) {\n                    component._popup.element\n                        .attr({ unselectable: \"on\" })\n                        .find(\"*:not(input)\").attr(\"unselectable\", \"on\")\n                        .end().find(\"input\").on(\"focus\", function() {\n                            that._inputFocused = true;\n                        });\n                }\n\n                component._popup.one(\"activate\", () => {\n                    component._popup.element.find(\".k-colorpalette\").trigger(\"focus\");\n                });\n            });\n\n            component.bind(\"close\", (e) => {\n                component._popup.element.off(MOUSEDOWN_NS);\n            });\n\n            component.unbind(\"activate\").bind(\"activate\", (e) => {\n                if (!component._value || component._value.toCssRgba() === \"rgba(255, 255, 255, 0)\") {\n                    return;\n                }\n\n                component.trigger(\"change\");\n            });\n\n            component.wrapper\n                .attr({ unselectable: \"on\" })\n                .find(\"*:not(input)\").attr(\"unselectable\", \"on\");\n\n            component.value(\"transparent\");\n        }\n    });\n\n    extend(Editor, {\n        InlineFormatFinder: InlineFormatFinder,\n        InlineFormatter: InlineFormatter,\n        DelayedExecutionTool: DelayedExecutionTool,\n        GreedyInlineFormatFinder: GreedyInlineFormatFinder,\n        GreedyInlineFormatter: GreedyInlineFormatter,\n        InlineFormatTool: InlineFormatTool,\n        FontTool: FontTool,\n        ColorTool: ColorTool\n    });\n\n    registerFormat(\"bold\", [ { tags: [\"strong\", \"b\"] }, { tags: [\"span\"], attr: { style: { fontWeight: \"bold\" } } } ]);\n    registerTool(\"bold\", new InlineFormatTool({\n        key: \"B\",\n        ctrl: true,\n        format: formats.bold,\n        ui: {\n            togglable: true\n        }\n    }));\n\n    registerFormat(\"italic\", [ { tags: [\"em\", \"i\"] }, { tags: [\"span\"], attr: { style: { fontStyle: \"italic\" } } } ]);\n    registerTool(\"italic\", new InlineFormatTool({\n        key: \"I\",\n        ctrl: true,\n        format: formats.italic,\n        ui: {\n            togglable: true\n        }\n    }));\n\n    registerFormat(\"underline\", [ { tags: [\"span\"], attr: { style: { textDecoration: \"underline\" } } }, { tags: [\"u\"] } ]);\n    registerTool(\"underline\", new InlineFormatTool({\n        key: \"U\",\n        ctrl: true,\n        format: formats.underline,\n        ui: {\n            togglable: true\n        }\n    }));\n\n    registerFormat(\"strikethrough\", [ { tags: [\"del\", \"strike\"] }, { tags: [\"span\"], attr: { style: { textDecoration: \"line-through\" } } } ]);\n    registerTool(\"strikethrough\", new InlineFormatTool({\n        format: formats.strikethrough,\n        ui: {\n            togglable: true\n        }\n    }));\n\n    registerFormat(\"superscript\", [ { tags: [\"sup\"] } ]);\n    registerTool(\"superscript\", new InlineFormatTool({\n        format: formats.superscript,\n        ui: {\n            togglable: true\n        }\n    }));\n\n    registerFormat(\"subscript\", [ { tags: [\"sub\"] } ]);\n    registerTool(\"subscript\", new InlineFormatTool({\n        format: formats.subscript,\n        ui: {\n            togglable: true\n        }\n    }));\n\n    registerTool(\"foreColor\", new ColorTool({\n        cssAttr: \"color\",\n        fontAttr: \"color\",\n        domAttr: \"color\",\n        name: \"foreColor\",\n        ui: {\n            type: \"component\",\n            overflow: \"never\",\n            component: \"ColorPicker\",\n            componentOptions: {\n                views: [\"palette\"],\n                toolIcon: \"foreground-color\",\n                palette: \"websafe\",\n                columns: 18,\n                preview: false,\n                input: false,\n                buttons: false,\n                commandOn: \"change\",\n                closeOnSelect: true\n            }\n        }\n    }));\n\n    registerTool(\"backColor\", new ColorTool({\n        cssAttr: \"background-color\",\n        domAttr: \"backgroundColor\",\n        name: \"backColor\",\n        ui: {\n            type: \"component\",\n            overflow: \"never\",\n            component: \"ColorPicker\",\n            componentOptions: {\n                views: [\"palette\"],\n                toolIcon: \"droplet\",\n                palette: \"websafe\",\n                columns: 18,\n                preview: false,\n                input: false,\n                buttons: false,\n                commandOn: \"change\",\n                closeOnSelect: true\n            }\n        }\n    }));\n\n    registerTool(\"fontName\", new FontTool({\n        cssAttr: \"font-family\",\n        fontAttr: \"face\",\n        domAttr: \"fontFamily\",\n        name: \"fontName\",\n        defaultValue: [{ text: \"fontNameInherit\", value: \"inherit\" }],\n        ui: {\n            type: \"component\",\n            component: \"ComboBox\",\n            componentOptions: {\n                dataValueField: \"value\",\n                dataTextField: \"text\",\n                valuePrimitive: true\n            },\n            overflow: \"never\"\n        }\n    }));\n\n    registerTool(\"fontSize\", new FontTool({\n        cssAttr: \"font-size\",\n        fontAttr: \"size\",\n        domAttr: \"fontSize\",\n        name: \"fontSize\",\n        defaultValue: [{ text: \"fontSizeInherit\", value: \"inherit\" }],\n        ui: {\n            type: \"component\",\n            component: \"ComboBox\",\n            componentOptions: {\n                dataValueField: \"value\",\n                dataTextField: \"text\",\n                valuePrimitive: true\n            },\n            overflow: \"never\"\n        }\n    }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        encode = kendo.htmlEncode,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        dom = Editor.Dom,\n        RangeUtils = Editor.RangeUtils,\n        Command = Editor.Command,\n        Tool = Editor.Tool,\n        InlineFormatter = Editor.InlineFormatter,\n        InlineFormatFinder = Editor.InlineFormatFinder,\n        textNodes = RangeUtils.textNodes,\n        editableTextNodes = RangeUtils.editableTextNodes,\n        registerTool = Editor.EditorUtils.registerTool,\n        keys = kendo.keys;\n\n    var HTTP_PROTOCOL = \"http://\";\n    var protocolRegExp = /^\\w*:\\/\\//;\n    var endLinkCharsRegExp = /[\\w\\/\\$\\-_\\*\\?]/i;\n\n    var LinkFormatFinder = Class.extend({\n        findSuitable: function(sourceNode) {\n            return dom.parentOfType(sourceNode, [\"a\"]);\n        }\n    });\n\n    var LinkFormatter = Class.extend({\n        init: function() {\n            this.finder = new LinkFormatFinder();\n        },\n\n        apply: function(range, attributes) {\n            var nodes = this.immutables ? editableTextNodes(range) : textNodes(range);\n            var markers, doc, formatter, a, parent;\n\n            if (attributes.innerText) {\n                doc = RangeUtils.documentFromRange(range);\n                markers = RangeUtils.getMarkers(range);\n\n                range.deleteContents();\n                a = dom.create(doc, \"a\", attributes);\n                range.insertNode(a);\n\n                parent = a.parentNode;\n                if (dom.name(parent) == \"a\") {\n                    dom.insertAfter(a, parent);\n                }\n\n                if (dom.emptyNode(parent)) {\n                    dom.remove(parent);\n                }\n\n                // move range and markers after inserted link\n                var ref = a;\n                for (var i = 0; i < markers.length; i++) {\n                    dom.insertAfter(markers[i], ref);\n                    ref = markers[i];\n                }\n\n                if (markers.length) {\n                    dom.insertBefore(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                    dom.insertAfter(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                    range.setStartBefore(markers[0]);\n                    range.setEndAfter(markers[markers.length - 1]);\n                }\n            } else {\n                formatter = new InlineFormatter([{ tags: [\"a\"] }], attributes);\n                formatter.finder = this.finder;\n                formatter.apply(nodes);\n            }\n        }\n    });\n\n    var UnlinkCommand = Command.extend({\n        init: function(options) {\n            var that = this;\n            options.formatter = /** @ignore */ {\n                toggle: function(range) {\n                    var nodes = that.immutables() ? editableTextNodes(range) : textNodes(range);\n                    new InlineFormatter([{ tags: [\"a\"] }]).remove(nodes);\n                }\n            };\n            this.options = options;\n            Command.fn.init.call(this, options);\n        }\n    });\n\n    var LinkCommand = Command.extend({\n        init: function(options) {\n            var that;\n            this.options = options;\n            Command.fn.init.call(this, options);\n            this.formatter = new LinkFormatter();\n\n            if (!options.url) {\n                this.attributes = null;\n                this.async = true;\n            } else {\n                this.exec = function() {\n                    this.formatter.immutables = that && that.immutables();\n                    this.formatter.apply(options.range, {\n                        href: options.url,\n                        innerText: options.text || options.url,\n                        target: options.target\n                    });\n                };\n            }\n        },\n\n        exec: function() {\n            var messages = this.editor.options.messages;\n            this._initialText = \"\";\n            this._range = this.lockRange(true);\n            this.formatter.immutables = this.immutables();\n\n            var nodes = textNodes(this._range);\n            var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\n            var img = nodes.length && dom.name(nodes[0]) == \"img\";\n\n            var dialog = this.createDialog(\"<div/>\", {\n                title: messages.createLink,\n                minWidth: 340,\n                close: this._close.bind(this),\n                visible: false\n            }).data(\"kendoWindow\");\n\n            this._form = this._createForm(dialog);\n\n            if (a) {\n                this._range.selectNodeContents(a);\n                nodes = textNodes(this._range);\n            }\n\n            this._initialText = this.linkText(nodes);\n\n            dialog.wrapper\n                .find(\".k-dialog-insert\").on(\"click\", this._apply.bind(this)).end()\n                .find(\".k-dialog-close\").on(\"click\", this._close.bind(this)).end()\n                .find(\".k-form-field input\").on(\"keydown\", this._keydown.bind(this)).end()\n                .find(\"#k-editor-link-url\").val(this.linkUrl(a)).end()\n                .find(\"#k-editor-link-text\").val(this._initialText).end()\n                .find(\"#k-editor-link-title\").val(a ? a.title : \"\").end()\n                .find(\"#k-editor-link-target\").prop(\"checked\", a ? a.target == \"_blank\" : false).end()\n                .find(\".k-editor-link-text-row\").toggle(!img);\n\n            this._dialog = dialog.center().open();\n\n            $(\"#k-editor-link-url\", dialog.element).trigger(\"focus\").select();\n        },\n\n        _createForm: function(dialog) {\n            var that = this;\n            var formElement = $(\"<div/>\").appendTo(dialog.element);\n            var messages = that.editor.options.messages;\n            var form = formElement.kendoForm({\n                renderButtons: false,\n                items: [\n                    {\n                        field: \"k-editor-link-url\",\n                        label: encode(messages.linkWebAddress),\n                        title: encode(messages.linkWebAddress),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-link-text\",\n                        label: encode(messages.linkText),\n                        title: encode(messages.linkText),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-link-title\",\n                        label: encode(messages.linkToolTip),\n                        title: encode(messages.linkToolTip),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-link-target\",\n                        editorOptions: {\n                            label: encode(messages.linkOpenInNewWindow)\n                        },\n                        label: \"\",\n                        title: encode(messages.linkOpenInNewWindow),\n                        editor: \"CheckBox\"\n                    }\n                ]\n            }).data(\"kendoForm\");\n\n            formElement.find(\"#k-editor-link-text\").parents(\".k-form-field\").addClass(\"k-editor-link-text-row\");\n\n            dialog.element.after($(that._actionButtonsTemplate({ messages, insertButtonIcon: \"link\", cancelButtonIcon: \"cancel-outline\" })));\n\n            return form;\n        },\n\n        _keydown: function(e) {\n            var keys = kendo.keys;\n\n            if (e.keyCode == keys.ENTER) {\n                this._apply(e);\n            } else if (e.keyCode == keys.ESC) {\n                this._close(e);\n            }\n        },\n\n        _apply: function(e) {\n            var element = this._dialog.element;\n            var href = $(\"#k-editor-link-url\", element).val();\n            var title, text, target;\n            var textInput = $(\"#k-editor-link-text\", element);\n\n            if (href && href != HTTP_PROTOCOL) {\n\n                if (href.indexOf(\"@\") > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\n                    href = \"mailto:\" + href;\n                }\n\n                this.attributes = { href: href };\n\n                title = $(\"#k-editor-link-title\", element).val();\n                if (title) {\n                    this.attributes.title = title;\n                }\n\n                if (textInput.is(\":visible\")) {\n                    text = kendo.trim(textInput.val());\n                    if (!text && !this._initialText) {\n                        this.attributes.innerText = href;\n                    } else if (text && (text !== this._initialText)) {\n                        this.attributes.innerText = dom.stripBom(text);\n                    }\n                }\n\n                target = $(\"#k-editor-link-target\", element).is(\":checked\");\n                this.attributes.target = target ? \"_blank\" : null;\n\n                this.formatter.apply(this._range, this.attributes);\n            }\n\n            this._close(e);\n\n            if (this.change) {\n                this.change();\n            }\n        },\n\n        _close: function(e) {\n            e.preventDefault();\n            this._form.destroy();\n            this._dialog.destroy();\n\n            dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\n\n            this.releaseRange(this._range);\n        },\n\n        linkUrl: function(anchor) {\n            if (anchor) {\n                // IE < 8 returns absolute url if getAttribute is not used\n                return anchor.getAttribute(\"href\", 2);\n            }\n\n            return HTTP_PROTOCOL;\n        },\n\n        linkText: function(nodes) {\n            var text = \"\";\n            var i;\n\n            for (i = 0; i < nodes.length; i++) {\n                text += nodes[i].nodeValue;\n            }\n\n            return dom.stripBom(text || \"\");\n        },\n\n        redo: function() {\n            var range = this.lockRange(true);\n\n            this.formatter.apply(range, this.attributes);\n            this.releaseRange(range);\n        }\n\n    });\n\n    var AutoLinkCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n\n            this.formatter = new LinkFormatter();\n        },\n\n        exec: function() {\n            var detectedLink = this.detectLink();\n            if (!detectedLink) {\n                return;\n            }\n\n            var range = this.getRange();\n            var linkMarker = new kendo.ui.editor.Marker();\n            var linkRange = range.cloneRange();\n\n            linkRange.setStart(detectedLink.start.node, detectedLink.start.offset);\n            linkRange.setEnd(detectedLink.end.node, detectedLink.end.offset);\n\n            range = this.lockRange();\n            linkMarker.add(linkRange);\n\n            this.formatter.apply(linkRange, {\n                href: this._ensureWebProtocol(detectedLink.text)\n            });\n\n            linkMarker.remove(linkRange);\n            this.releaseRange(range);\n        },\n\n        detectLink: function() {\n            var range = this.getRange();\n            var startNode = range.startContainer;\n            var startOffset = range.startOffset;\n            var prev = startNode.previousSibling;\n            if (!prev && ((dom.isBom(startNode) && !startNode.nextSibling) || (!startOffset && dom.isDataNode(startNode)))) {\n                startNode = startNode.parentNode;\n                startOffset = 0;\n            }\n            var traverser = new LeftDomTextTraverser({\n                node: startNode,\n                offset: startOffset,\n                cancelAtNode: function(node) { return node && dom.name(node) === \"a\"; }\n            });\n\n            var detection = new DomTextLinkDetection(traverser);\n            return detection.detectLink();\n        },\n\n        changesContent: function() {\n            return !!this.detectLink();\n        },\n\n        _ensureWebProtocol: function(linkText) {\n            var hasProtocol = this._hasProtocolPrefix(linkText);\n            return hasProtocol ? linkText : this._prefixWithWebProtocol(linkText);\n        },\n\n        _hasProtocolPrefix: function(linkText) {\n            return protocolRegExp.test(linkText);\n        },\n\n        _prefixWithWebProtocol: function(linkText) {\n            return HTTP_PROTOCOL + linkText;\n        }\n    });\n\n    var UnlinkTool = Tool.extend({\n        init: function(options) {\n            this.options = options;\n            this.finder = new InlineFormatFinder([{ tags: [\"a\"] }]);\n\n            Tool.fn.init.call(this, $.extend(options, { command: UnlinkCommand }));\n        },\n\n        update: function(ui, nodes) {\n            var isLink = this.finder.isFormatted(nodes),\n                toolbar = ui.closest(\".k-toolbar\").data(\"kendoToolBar\");\n\n            if (isLink) {\n                toolbar.enable(ui, true);\n            } else {\n                toolbar.enable(ui, false);\n            }\n        }\n    });\n\n    var DomTextLinkDetection = Class.extend({\n        init: function(traverser) {\n            this.traverser = traverser;\n            this.start = DomPos();\n            this.end = DomPos();\n            this.text = \"\";\n        },\n\n        detectLink: function() {\n            var node = this.traverser.node;\n            var offset = this.traverser.offset;\n            if (dom.isDataNode(node)) {\n                var text = node.data.substring(0, offset);\n                if (/\\s{2}$/.test(dom.stripBom(text))) {\n                    return;\n                }\n            } else if (offset === 0) {//heuristic for new line\n                var p = dom.closestEditableOfType(node, dom.blockElements);\n                if (p && p.previousSibling) {\n                    this.traverser.init({\n                        node: p.previousSibling\n                    });\n                }\n            }\n\n            this.traverser.traverse(this._detectEnd.bind(this));\n            if (!this.end.blank()) {\n                this.traverser = this.traverser.clone(this.end);\n                this.traverser.traverse(this._detectStart.bind(this));\n\n                if (!this._isLinkDetected()) {\n                    var puntuationOptions = this.traverser.extendOptions(this.start);\n                    var puntuationTraverser = new RightDomTextTraverser(puntuationOptions);\n                    puntuationTraverser.traverse(this._skipStartPuntuation.bind(this));\n                    if (!this._isLinkDetected()) {\n                        this.start = DomPos();\n                    }\n                }\n            }\n\n            if (this.start.blank()) {\n                return null;\n            } else {\n                return {\n                    start: this.start,\n                    end: this.end,\n                    text: this.text\n                };\n            }\n        },\n\n        _isLinkDetected: function() {\n            return protocolRegExp.test(this.text) || /^w{3}\\./i.test(this.text);\n        },\n\n        _detectEnd: function(text, node) {\n            var i = lastIndexOfRegExp(text, endLinkCharsRegExp);\n            if (i > -1) {\n                this.end.node = node;\n                this.end.offset = i + 1;\n\n                return false;\n            }\n        },\n\n        _detectStart: function(text, node) {\n            var i = lastIndexOfRegExp(text, /\\s/);\n            var ii = i + 1;\n            this.text = text.substring(ii) + this.text;\n\n            this.start.node = node;\n            this.start.offset = ii;\n\n            if (i > -1) {\n                return false;\n            }\n        },\n\n        _skipStartPuntuation: function(text, node, offset) {\n            var i = indexOfRegExp(text, /\\w/);\n            var ii = i;\n            if (i === -1) {\n                ii = text.length;\n            }\n\n            this.text = this.text.substring(ii);\n            this.start.node = node;\n            this.start.offset = ii + (offset | 0);\n\n            if (i > -1) {\n                return false;\n            }\n        }\n    });\n\n    function lastIndexOfRegExp(str, search) {\n        var i = str.length;\n        while (i-- && !search.test(str[i])) {}\n\n        return i;\n    }\n    function indexOfRegExp(str, search) {\n        var r = search.exec(str);\n\n        return r ? r.index : -1;\n    }\n\n    var DomPos = function() {\n        return {\n            node: null,\n            offset: null,\n            blank: function() {\n                return this.node === null && this.offset === null;\n            }\n        };\n    };\n\n    var DomTextTraverser = Class.extend({\n        init: function(options) {\n            this.node = options.node;\n            this.offset = options.offset === undefined$1 ? (dom.isDataNode(this.node) && this.node.length) || 0 : options.offset;\n            this.cancelAtNode = options.cancelAtNode || this.cancelAtNode || $.noop;\n        },\n\n        traverse: function(callback) {\n            if (!callback) {\n                return;\n            }\n            this.cancel = false;\n            this._traverse(callback, this.node, this.offset);\n        },\n\n        _traverse: function(callback, node, offset) {\n            if (!node || this.cancel) {\n                return;\n            }\n            if (node.nodeType === 3) {\n                var text = node.data;\n                if (offset !== undefined$1) {\n                    text = this.subText(text, offset);\n                }\n                this.cancel = (callback(text, node, offset) === false);\n            }\n            else {\n                var edgeNode = this.edgeNode(node);\n                this.cancel = this.cancel || this.cancelAtNode(edgeNode);\n                return this._traverse(callback, edgeNode);\n            }\n\n            var next = this.next(node);\n            if (!next) {\n                var parent = node.parentNode;\n                while (!next && dom.isInline(parent)) {\n                    next = this.next(parent);\n                    parent = parent.parentNode;\n                }\n            }\n            this.cancel = this.cancel || this.cancelAtNode(next);\n            this._traverse(callback, next);\n        },\n\n        extendOptions: function(o) {\n            return $.extend({\n                node: this.node,\n                offset: this.offset,\n                cancelAtNode: this.cancelAtNode\n            }, o || {});\n        },\n\n        edgeNode: function(node) {},\n        next: function(node) {},\n        subText: function(text, offset) {}\n\n    });\n\n    var LeftDomTextTraverser = DomTextTraverser.extend({\n        subText: function(text, splitIndex) {\n            return text.substring(0, splitIndex);\n        },\n\n        next: function(node) {\n            return node.previousSibling;\n        },\n\n        edgeNode: function(node) {\n            return node.lastChild;\n        },\n\n        clone: function(options) {\n            var o = this.extendOptions(options);\n            return new LeftDomTextTraverser(o);\n        }\n    });\n\n    var RightDomTextTraverser = DomTextTraverser.extend({\n        subText: function(text, splitIndex) {\n            return text.substring(splitIndex);\n        },\n\n        next: function(node) {\n            return node.nextSibling;\n        },\n\n        edgeNode: function(node) {\n            return node.firstChild;\n        },\n\n        clone: function(options) {\n            var o = this.extendOptions(options);\n            return new RightDomTextTraverser(o);\n        }\n    });\n\n    extend(kendo.ui.editor, {\n        LinkFormatFinder: LinkFormatFinder,\n        LinkFormatter: LinkFormatter,\n        UnlinkCommand: UnlinkCommand,\n        LinkCommand: LinkCommand,\n        AutoLinkCommand: AutoLinkCommand,\n        UnlinkTool: UnlinkTool,\n        DomTextLinkDetection: DomTextLinkDetection,\n        LeftDomTextTraverser: LeftDomTextTraverser,\n        RightDomTextTraverser: RightDomTextTraverser\n    });\n\n    registerTool(\"createLink\", new Tool({ key: \"K\", ctrl: true, command: LinkCommand }));\n    registerTool(\"unlink\", new UnlinkTool({ key: \"K\", ctrl: true, shift: true, ui: { enable: false } }));\n    registerTool(\"autoLink\", new Tool({ key: [keys.ENTER, keys.SPACEBAR], keyPressCommand: true, command: AutoLinkCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        formats = kendo.ui.Editor.fn.options.formats,\n        dom = Editor.Dom,\n        FormatTool = Editor.FormatTool,\n        EditorUtils = Editor.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        registerFormat = EditorUtils.registerFormat,\n        RangeUtils = Editor.RangeUtils;\n\n    var BlockFormatFinder = Class.extend({\n        init: function(format) {\n            this.format = format;\n        },\n\n        contains: function(node, children) {\n            var i, len, child;\n\n            for (i = 0, len = children.length; i < len; i++) {\n                child = children[i];\n                if (!child || !dom.isAncestorOrSelf(node, child)) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        findSuitable: function(nodes) {\n            var format = this.format,\n                suitable = [],\n                i, len, candidate;\n\n            for (i = 0, len = nodes.length; i < len; i++) {\n                for (var f = format.length - 1; f >= 0; f--) {\n                    candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\n                    if (candidate) {\n                        break;\n                    }\n                }\n\n                if (!candidate || candidate.contentEditable === 'true') {\n                    return [];\n                }\n\n                if ($.inArray(candidate, suitable) < 0) {\n                    suitable.push(candidate);\n                }\n            }\n\n            this._resolveListsItems(suitable);\n\n            for (i = 0, len = suitable.length; i < len; i++) {\n                if (this.contains(suitable[i], suitable)) {\n                    return [suitable[i]];\n                }\n            }\n\n            return suitable;\n        },\n        _resolveListsItems: function(nodes) {\n            var i, node, wrapper;\n            for (i = 0; i < nodes.length; i++) {\n                node = nodes[i];\n                wrapper = dom.is(node, \"li\") ? node : dom.wrapper(node);\n                wrapper = wrapper && dom.list(wrapper) ? wrapper.children[0] : wrapper;\n                if (dom.is(wrapper, \"li\")) {\n                    node = nodes[i] = wrapper;\n                }\n            }\n        },\n\n        findFormat: function(sourceNode, until) {\n            var format = this.format,\n                i, len, node, tags, attributes;\n            var editableParent = dom.editableParent(sourceNode);\n            var immutables = this.options && this.options.immutables;\n            var ImmutablesNS = Editor.Immutables;\n\n            for (i = 0, len = format.length; i < len; i++) {\n                node = sourceNode;\n                tags = format[i].tags;\n                attributes = format[i].attr;\n\n                if (immutables && tags && tags[0] == \"immutable\") {\n                    var immutable = ImmutablesNS.immutableParent(node);\n                    if (immutable && dom.attrEquals(immutable, attributes)) {\n                        return node;\n                    }\n                }\n\n                while (node && dom.isAncestorOf(editableParent, node)) {\n                    if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\n                        return node;\n                    }\n\n                    if (until && until(node)) {\n                        break;\n                    }\n\n                    node = node.parentNode;\n                }\n            }\n            return null;\n        },\n\n        getFormat: function(nodes) {\n            var that = this,\n                findFormat = function(node) {\n                        return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\n                    },\n                result = findFormat(nodes[0]),\n                i, len;\n\n            if (!result) {\n                return \"\";\n            }\n\n            for (i = 1, len = nodes.length; i < len; i++) {\n                if (result != findFormat(nodes[i])) {\n                    return \"\";\n                }\n            }\n\n            return result.nodeName.toLowerCase();\n        },\n\n        isFormatted: function(nodes, until) {\n            for (var i = 0, len = nodes.length; i < len; i++) {\n                if (!this.findFormat(nodes[i], until)) {\n                    return false;\n                }\n            }\n\n            return true;\n        }\n    });\n\n    var BlockFormatter = Class.extend({\n        init: function(format, values) {\n            this.format = format;\n            this.values = values;\n            this.finder = new BlockFormatFinder(format);\n        },\n\n        wrap: function(tag, attributes, nodes) {\n\n            var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\n\n            if (dom.isInline(commonAncestor)) {\n                commonAncestor = dom.blockParentOrBody(commonAncestor);\n            }\n\n            var ancestors = dom.significantChildNodes(commonAncestor),\n                position = dom.findNodeIndex(ancestors[0]),\n                wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes),\n                i, ancestor;\n\n            for (i = 0; i < ancestors.length; i++) {\n                ancestor = ancestors[i];\n                if (dom.isBlock(ancestor)) {\n                    dom.attr(ancestor, attributes);\n\n                    if (wrapper.childNodes.length) {\n                        dom.insertBefore(wrapper, ancestor);\n                        wrapper = wrapper.cloneNode(false);\n                    }\n\n                    position = dom.findNodeIndex(ancestor) + 1;\n\n                    continue;\n                }\n\n                wrapper.appendChild(ancestor);\n            }\n\n            if (wrapper.firstChild) {\n                dom.insertAt(commonAncestor, wrapper, position);\n            }\n        },\n\n        apply: function(nodes) {\n            var format, values = this.values;\n\n            function attributes(format) {\n                return extend({}, format && format.attr, values);\n            }\n\n            this._handleImmutables(nodes, true);\n\n            var images = dom.filter(\"img\", nodes);\n            var imageFormat = EditorUtils.formatByName(\"img\", this.format);\n            var imageAttributes = attributes(imageFormat);\n            $.each(images, function() {\n                dom.attr(this, imageAttributes);\n            });\n\n            // only images were selected, no need to wrap\n            if (images.length == nodes.length) {\n                return;\n            }\n\n            var nonImages = dom.filter(\"img\", nodes, true);\n            var formatNodes = this.finder.findSuitable(nonImages);\n\n            if (formatNodes.length) {\n                for (var i = 0, len = formatNodes.length; i < len; i++) {\n                    format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\n                    dom.attr(formatNodes[i], attributes(format));\n                }\n            } else {\n                format = this.format[0];\n                this.wrap(format.tags[0], attributes(format), nonImages);\n            }\n        },\n\n        _handleImmutables: function(nodes, applyFormatting) {\n            if (!this.immutables()) {\n                return;\n            }\n            var immutableFormat = EditorUtils.formatByName(\"immutable\", this.format);\n            if (!immutableFormat) {\n                return;\n            }\n            var ImmutablesNS = Editor.Immutables;\n            var l = nodes.length - 1;\n            for (var i = l; i >= 0; i--) {\n                var immutableParent = ImmutablesNS.immutableParent(nodes[i]);\n                if (!immutableParent) {\n                    continue;\n                }\n                if (immutableParent !== nodes[i + 1]) {\n                    if (applyFormatting) {\n                        dom.attr(immutableParent, immutableFormat.attr);\n                    } else {\n                        dom.unstyle(immutableParent, immutableFormat.attr.style);\n                    }\n                }\n                nodes.splice(i, 1);\n            }\n        },\n\n        immutables: function() {\n            return this.editor && this.editor.options.immutables;\n        },\n\n        remove: function(nodes) {\n            var i, l, formatNode, namedFormat, name;\n\n            this._handleImmutables(nodes, false);\n\n            for (i = 0, l = nodes.length; i < l; i++) {\n                formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    name = dom.name(formatNode);\n                    namedFormat = EditorUtils.formatByName(name, this.format);\n                    if (namedFormat.attr.style) {\n                        dom.unstyle(formatNode, namedFormat.attr.style);\n                    }\n                    if (namedFormat.attr.className) {\n                        dom.removeClass(formatNode, namedFormat.attr.className);\n                    }\n                }\n            }\n        },\n\n        toggle: function(range) {\n            var that = this,\n                nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n\n            if (that.finder.isFormatted(nodes)) {\n                that.remove(nodes);\n            } else {\n                that.apply(nodes);\n            }\n        }\n    });\n\n    var GreedyBlockFormatter = Class.extend({\n        init: function(format, values) {\n            var that = this;\n            that.format = format;\n            that.values = values;\n            that.finder = new BlockFormatFinder(format);\n        },\n\n        apply: function(nodes) {\n            var format = this.format;\n            var blocks = dom.blockParents(nodes);\n            var formatTag = format[0].tags[0];\n            var i, len, list, formatter, range;\n            var element;\n            var tagName;\n            var block;\n            var immutalbeParent;\n\n            if (blocks.length) {\n                for (i = 0, len = blocks.length; i < len; i++) {\n                    block = blocks[i];\n                    immutalbeParent = this.immutables() && Editor.Immutables.immutableParent(block);\n\n                    if (!immutalbeParent) {\n                        tagName = dom.name(block);\n\n                        if (tagName == \"li\") {\n                            list = block.parentNode;\n                            formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\n                            range = this.editor.createRange();\n                            range.selectNode(blocks[i]);\n                            formatter.toggle(range);\n                        } else if (formatTag && (tagName == \"td\" || block.attributes.contentEditable)) {\n                            new BlockFormatter(format, this.values).apply(block.childNodes);\n                        } else {\n                            element = dom.changeTag(block, formatTag);\n                            dom.attr(element, format[0].attr);\n                        }\n                    }\n                }\n            } else {\n                var blockFormatter = new BlockFormatter(format, this.values);\n                blockFormatter.editor = this.editor;\n                blockFormatter.apply(nodes);\n            }\n        },\n\n        toggle: function(range) {\n            var nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                range.selectNodeContents(range.commonAncestorContainer);\n                nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                }\n            }\n\n            this.apply(nodes);\n        },\n\n        immutables: function() {\n            return this.editor && this.editor.options.immutables;\n        }\n    });\n\n    var BlockFormatTool = FormatTool.extend({ init: function(options) {\n            FormatTool.fn.init.call(this, extend(options, {\n                finder: new BlockFormatFinder(options.format),\n                formatter: function() {\n                    return new BlockFormatter(options.format);\n                }\n            }));\n        }\n    });\n\n    extend(Editor, {\n        BlockFormatFinder: BlockFormatFinder,\n        BlockFormatter: BlockFormatter,\n        GreedyBlockFormatter: GreedyBlockFormatter,\n        BlockFormatTool: BlockFormatTool\n    });\n\n    var listElements = [\"ul\",\"ol\",\"li\"];\n\n    registerFormat(\"justifyLeft\", [\n        { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"left\" } } },\n        { tags: [\"img\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n        { tags: [\"immutable\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n        { tags: listElements, attr: { style: { textAlign: \"left\", listStylePosition: \"\" } } }\n    ]);\n    registerTool(\"justifyLeft\", new BlockFormatTool({\n        format: formats.justifyLeft,\n        ui: {\n            togglable: true,\n            group: \"align\"\n        }\n    }));\n\n    registerFormat(\"justifyCenter\", [\n        { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"center\" } } },\n        { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n        { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n        { tags: listElements, attr: { style: { textAlign: \"center\", listStylePosition: \"inside\" } } }\n    ]);\n    registerTool(\"justifyCenter\", new BlockFormatTool({\n        format: formats.justifyCenter,\n        ui: {\n            togglable: true,\n            group: \"align\"\n        }\n    }));\n\n    registerFormat(\"justifyRight\", [\n        { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"right\" } } },\n        { tags: [\"img\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n        { tags: [\"immutable\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n        { tags: listElements, attr: { style: { textAlign: \"right\", listStylePosition: \"inside\" } } }\n    ]);\n    registerTool(\"justifyRight\", new BlockFormatTool({\n        format: formats.justifyRight,\n        ui: {\n            togglable: true,\n            group: \"align\"\n        }\n    }));\n\n    registerFormat(\"justifyFull\", [\n        { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"justify\" } } },\n        { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n        { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n        { tags: listElements, attr: { style: { textAlign: \"justify\", listStylePosition: \"\" } } }\n    ]);\n    registerTool(\"justifyFull\", new BlockFormatTool({\n        format: formats.justifyFull,\n        ui: {\n            togglable: true,\n            group: \"align\"\n        }\n    }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        dom = Editor.Dom,\n        RangeUtils = Editor.RangeUtils,\n        Command = Editor.Command,\n        FormatTool = Editor.FormatTool,\n        BlockFormatFinder = Editor.BlockFormatFinder,\n        textNodes = RangeUtils.textNodes,\n        registerTool = Editor.EditorUtils.registerTool;\n\n    var ListFormatFinder = BlockFormatFinder.extend({\n        init: function(options) {\n            this.tag = options.tag;\n            this.attr = options.attr;\n            this.altAttr = options.altAttr;\n\n            var tags = this.tags = [this.tag == 'ul' ? 'ol' : 'ul', this.tag];\n            var format = [{ tags: tags, attr: this.attr }];\n\n            if (this.altAttr) {\n                format.push({\n                    tags: tags,\n                    attr: this.altAttr\n                });\n            }\n\n            BlockFormatFinder.fn.init.call(this, format);\n        },\n\n        matchesType: function(node) {\n            return dom.attrEquals(node, this.attr) || (this.altAttr && dom.attrEquals(node, this.altAttr));\n        },\n\n        isList: function(node) {\n            return dom.list(node);\n        },\n\n        isFormatted: function(nodes) {\n            var formatNodes = [];\n            var formatNode, i;\n\n            for (i = 0; i < nodes.length; i++) {\n                formatNode = this.findFormat(nodes[i], this.isList);\n\n                if (formatNode && dom.name(formatNode) == this.tag && this.matchesType(formatNode)) {\n                    formatNodes.push(formatNode);\n                }\n            }\n\n            if (formatNodes.length < 1) {\n                return false;\n            }\n\n            if (formatNodes.length != nodes.length) {\n                return false;\n            }\n\n            // check if sequential lists are selected\n            for (i = 0; i < formatNodes.length; i++) {\n                if (formatNodes[i].parentNode != formatNode.parentNode) {\n                    break;\n                }\n\n                if (formatNodes[i] != formatNode) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        findSuitable: function(nodes) {\n            var candidate = this.findFormat(nodes[0], this.isList);\n\n            if (candidate && dom.name(candidate) == this.tag) {\n                return candidate;\n            }\n\n            return null;\n        }\n\n    });\n\n    var ListFormatter = Class.extend({\n        init: function(options, unwrapTag) {\n            var that = this;\n            options = $.isPlainObject(options) ? options : { tag: options, attr: null };\n            that.tag = options.tag;\n            that.attr = options.attr;\n            that.finder = new ListFormatFinder(options);\n            that.unwrapTag = unwrapTag;\n        },\n\n        isList: function(node) {\n            return dom.list(node);\n        },\n\n        immutables: function() {\n            return this.editor && !!this.editor.options.immutables;\n        },\n\n        wrap: function(list, nodes) {\n            var li = dom.create(list.ownerDocument, \"li\"),\n                i, node,\n                isImmutable = this.immutables() ? Editor.Immutables.immutable : $.noop;\n\n            for (i = 0; i < nodes.length; i++) {\n                node = nodes[i];\n\n                if (dom.is(node, 'li')) {\n                    list.appendChild(node);\n                    continue;\n                }\n\n                if (this.isList(node)) {\n                    while (node.firstChild) {\n                        list.appendChild(node.firstChild);\n                    }\n                    continue;\n                }\n\n                if (dom.is(node, \"td\")) {\n                    while (node.firstChild) {\n                        li.appendChild(node.firstChild);\n                    }\n                    list.appendChild(li);\n                    node.appendChild(list);\n                    list = list.cloneNode(false);\n                    li = li.cloneNode(false);\n                    continue;\n                }\n\n                li.appendChild(node);\n\n                if (dom.isBlock(node)) {\n                    list.appendChild(li);\n                    if (!isImmutable(node)) {\n                        dom.unwrap(node);\n                    }\n                    li = li.cloneNode(false);\n                }\n            }\n\n            if (li.firstChild) {\n                list.appendChild(li);\n            }\n        },\n\n        containsAny: function(parent, nodes) {\n            for (var i = 0; i < nodes.length; i++) {\n                if (dom.isAncestorOrSelf(parent, nodes[i])) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        suitable: function(candidate, nodes) {\n            if (candidate.className == \"k-marker\") {\n                var sibling = candidate.nextSibling;\n\n                if (sibling && dom.isBlock(sibling)) {\n                    return false;\n                }\n\n                sibling = candidate.previousSibling;\n\n                if (sibling && dom.isBlock(sibling)) {\n                    return false;\n                }\n            }\n\n            return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\n        },\n\n        _parentLists: function(node) {\n            var editable = dom.closestEditable(node);\n\n            return $(node).parentsUntil(editable, \"ul,ol\");\n        },\n\n        split: function(range) {\n            var nodes = textNodes(range);\n            var start, end, parents;\n\n            if (nodes.length) {\n                start = dom.parentOfType(nodes[0], ['li']);\n                end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\n                range.setStartBefore(start);\n                range.setEndAfter(end);\n\n                for (var i = 0, l = nodes.length; i < l; i++) {\n                    var formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        parents = this._parentLists(formatNode);\n                        if (parents.length) {\n                            RangeUtils.split(range, parents.last()[0], true);\n                        } else {\n                            RangeUtils.split(range, formatNode, true);\n                        }\n                    }\n                }\n            }\n        },\n\n        merge: function(tag, formatNode) {\n            var prev = formatNode.previousSibling, next;\n\n            while (prev && (prev.className == \"k-marker\" || (prev.nodeType == 3 && dom.isWhitespace(prev)))) {\n                prev = prev.previousSibling;\n            }\n\n            // merge with previous list\n            if (prev && dom.name(prev) == tag && this.finder.matchesType(prev)) {\n                while (formatNode.firstChild) {\n                    prev.appendChild(formatNode.firstChild);\n                }\n                dom.remove(formatNode);\n                formatNode = prev;\n            }\n\n            next = formatNode.nextSibling;\n            while (next && (next.className == \"k-marker\" || (next.nodeType == 3 && dom.isWhitespace(next)))) {\n                next = next.nextSibling;\n            }\n\n            // merge with next list\n            if (next && dom.name(next) == tag && this.finder.matchesType(next)) {\n                while (formatNode.lastChild) {\n                    next.insertBefore(formatNode.lastChild, next.firstChild);\n                }\n                dom.remove(formatNode);\n            }\n        },\n\n        breakable: function(node) {\n            return (\n                node != node.ownerDocument.body &&\n                !/table|tbody|thead|tr|td/.test(dom.name(node)) &&\n                !node.attributes.contentEditable\n            );\n        },\n\n        findSuitableNode: function(nodes) {\n            var that = this,\n                finder = that.finder,\n                tag = that.tag,\n                formatNode;\n\n            formatNode = finder.findSuitable(nodes);\n\n            if (!formatNode) {\n                // Find the opposite tag\n                finder = new ListFormatFinder({ tag: tag == \"ul\" ? \"ol\" : \"ul\" });\n                formatNode = finder.findSuitable(nodes);\n            }\n\n            if (!formatNode) {\n                // Find the same tag\n                finder = new ListFormatFinder({ tag: tag });\n                formatNode = finder.findSuitable(nodes);\n                formatNode = formatNode && that.finder.matchesType(formatNode) ? null : formatNode;\n            }\n\n\n            return formatNode;\n        },\n\n        applyOnSection: function(section, nodes) {\n            var tag = this.tag;\n            var attr = this.attr;\n            var commonAncestor = dom.closestSplittableParent(nodes);\n\n            var ancestors = [];\n            var formatNode = this.findSuitableNode(nodes);\n\n            var childNodes;\n\n            if (/table|tbody|thead/.test(dom.name(commonAncestor))) {\n                childNodes = $.map(nodes, function(node) {\n                    return dom.parentOfType(node, [\"td\"]);\n                });\n            } else {\n                childNodes = dom.significantChildNodes(commonAncestor);\n\n                if ($.grep(childNodes, dom.isBlock).length) {\n                    childNodes = $.grep(childNodes, (function(node) {\n                        return this.containsAny(node, nodes);\n                    }).bind(this));\n                }\n\n                if (!childNodes.length) {\n                    childNodes = nodes;\n                }\n            }\n\n            function pushAncestor() {\n                ancestors.push(this);\n            }\n\n            for (var i = 0; i < childNodes.length; i++) {\n                var child = childNodes[i];\n                var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\n\n                if (!suitable) {\n                    continue;\n                }\n\n                if (formatNode && this.isList(child)) {\n                    // merging lists\n                    $.each(child.children, pushAncestor);\n                    dom.remove(child);\n                } else {\n                    ancestors.push(child);\n                }\n            }\n\n            if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\n                ancestors = [commonAncestor];\n            }\n\n            if (!formatNode) {\n                formatNode = dom.create(commonAncestor.ownerDocument, tag, attr);\n                if (dom.isBlock(ancestors[0])) {\n                    dom.mergeAttributes(ancestors[0], formatNode);\n                }\n                dom.insertBefore(formatNode, ancestors[0]);\n            }\n\n            this.wrap(formatNode, ancestors);\n\n            while (dom.isBom(formatNode.nextSibling)) {\n                dom.remove(formatNode.nextSibling);\n            }\n\n            if (!this.finder.matchesType(formatNode)) {\n                formatNode.removeAttribute(\"type\");\n                formatNode.style.listStyleType = \"\";\n                dom.mergeAttributes(dom.create(commonAncestor.ownerDocument, tag, attr), formatNode, true);\n            }\n\n            if (formatNode && formatNode.getAttribute(\"type\") === \"\") {\n                formatNode.removeAttribute(\"type\");\n            }\n\n            if (!dom.is(formatNode, tag)) {\n                dom.changeTag(formatNode, tag);\n            }\n\n            this.merge(tag, formatNode);\n        },\n\n        apply: function(nodes) {\n            var i = 0,\n                sections = [],\n                lastSection,\n                lastNodes,\n                section,\n                node,\n                l = nodes.length,\n                immutableParent = this.immutables() ? Editor.Immutables.immutableParent : $.noop;\n\n            function addLastSection() {\n                if (lastSection) {\n                    sections.push({\n                        section: lastSection,\n                        nodes: lastNodes\n                    });\n                }\n            }\n\n            // split nodes into sections that need to be different lists\n            for (i = 0; i < l; i++) {\n                node = immutableParent(nodes[i]) || nodes[i];\n                section = dom.closestEditable(node, [\"td\",\"th\",\"body\"]);\n                if (!lastSection || section != lastSection) {\n                    addLastSection();\n                    lastNodes = [node];\n                    lastSection = section;\n                } else {\n                    lastNodes.push(node);\n                }\n            }\n\n            addLastSection();\n\n            for (i = 0; i < sections.length; i++) {\n                this.applyOnSection(sections[i].section, sections[i].nodes);\n            }\n        },\n\n        unwrap: function(ul) {\n            var fragment = ul.ownerDocument.createDocumentFragment(),\n                unwrapTag = this.unwrapTag,\n                parents,\n                li,\n                p,\n                child;\n\n            for (li = ul.firstChild; li; li = li.nextSibling) {\n                p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n\n                while (li.firstChild) {\n                    child = li.firstChild;\n\n                    if (dom.isBlock(child)) {\n\n                        if (p.firstChild) {\n                            fragment.appendChild(p);\n                            p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                        }\n\n                        fragment.appendChild(child);\n                    } else {\n                        p.appendChild(child);\n                    }\n                }\n\n                if (p.firstChild) {\n                    fragment.appendChild(p);\n                }\n            }\n\n            parents = this._parentLists(ul);\n\n            if (parents[0]) {\n                dom.insertAfter(fragment, parents.last()[0]);\n                parents.last().remove();\n            } else {\n                dom.insertAfter(fragment, ul);\n            }\n\n            dom.remove(ul);\n        },\n\n        remove: function(nodes) {\n            var formatNode;\n            for (var i = 0, l = nodes.length; i < l; i++) {\n                formatNode = this.finder.findFormat(nodes[i]);\n\n                if (formatNode) {\n                    this.unwrap(formatNode);\n                }\n            }\n        },\n\n        toggle: function(range) {\n            var that = this,\n                nodes = textNodes(range),\n                ancestor = range.commonAncestorContainer;\n\n            if (!nodes.length) {\n                range.selectNodeContents(ancestor);\n                nodes = textNodes(range);\n                if (!nodes.length) {\n                    var text = ancestor.ownerDocument.createTextNode(\"\");\n                    range.startContainer.appendChild(text);\n                    nodes = [text];\n                    range.selectNode(text.parentNode);\n                }\n            }\n            nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n            if (that.finder.isFormatted(nodes)) {\n                that.split(range);\n                that.remove(nodes);\n            } else {\n                that.apply(nodes);\n            }\n        }\n\n    });\n\n    var ListCommand = Command.extend({\n        init: function(options) {\n            options.formatter = new ListFormatter({ tag: options.tag, attr: options.attr });\n            Command.fn.init.call(this, options);\n        }\n    });\n\n    var ListTool = FormatTool.extend({\n        init: function(options) {\n            this.options = options;\n\n            FormatTool.fn.init.call(this, extend(options, {\n                finder: new ListFormatFinder(options)\n            }));\n        },\n\n        command: function(commandArguments) {\n            return new ListCommand(extend(commandArguments, { tag: this.options.tag, attr: this.options.attr }));\n        }\n    });\n\n    extend(Editor, {\n        ListFormatFinder: ListFormatFinder,\n        ListFormatter: ListFormatter,\n        ListCommand: ListCommand,\n        ListTool: ListTool\n    });\n\n    registerTool(\"insertUnorderedList\", new ListTool({ tag: 'ul', attr: { style: { listStyleType: \"\" }, type: \"\" }, ui: { togglable: true, group: \"lists\" } }));\n    registerTool(\"insertOrderedList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"\" }, type: \"\" }, ui: { togglable: true, group: \"lists\" } }));\n    registerTool(\"insertUpperRomanList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"upper-roman\" } }, altAttr: { type: \"I\" }, ui: { togglable: true, group: \"lists\" } }));\n    registerTool(\"insertLowerRomanList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"lower-roman\" } }, altAttr: { type: \"i\" }, ui: { togglable: true, group: \"lists\" } }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        Editor = kendo.ui.editor,\n        Tool = Editor.Tool,\n        DelayedExecutionTool = Editor.DelayedExecutionTool,\n        Command = Editor.Command,\n        dom = Editor.Dom,\n        EditorUtils = Editor.EditorUtils,\n        RangeUtils = Editor.RangeUtils,\n        registerTool = EditorUtils.registerTool;\n\n\n    var FormattingTool = DelayedExecutionTool.extend({\n        init: function(options) {\n            var that = this;\n            Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\n\n            that.type = \"kendoDropDownList\";\n\n            that.finder = {\n                getFormat: function() { return \"\"; }\n            };\n        },\n\n        options: {\n            items: [\n                { text: \"Paragraph\", value: \"p\" },\n                { text: \"Quotation\", value: \"blockquote\" },\n                { text: \"Heading 1\", value: \"h1\" },\n                { text: \"Heading 2\", value: \"h2\" },\n                { text: \"Heading 3\", value: \"h3\" },\n                { text: \"Heading 4\", value: \"h4\" },\n                { text: \"Heading 5\", value: \"h5\" },\n                { text: \"Heading 6\", value: \"h6\" }\n            ],\n            width: 110\n        },\n\n        toFormattingItem: function(item) {\n            var value = item.value;\n\n            if (!value) {\n                return item;\n            }\n\n            if (item.tag || item.className) {\n                return item;\n            }\n\n            var dot = value.indexOf(\".\");\n\n            if (dot === 0) {\n                item.className = value.substring(1);\n            } else if (dot == -1) {\n                item.tag = value;\n            } else {\n                item.tag = value.substring(0, dot);\n                item.className = value.substring(dot + 1);\n            }\n\n            return item;\n        },\n\n        command: function(args) {\n            var that = this;\n            var item = args.value;\n\n            item = this.toFormattingItem(item);\n\n            return new Editor.FormatCommand({\n                range: args.range,\n                formatter: function() {\n                    var formatter,\n                        tags = (item.tag || item.context || \"span\").split(\",\"),\n                        format = [{\n                            tags: tags,\n                            attr: { className: item.className || \"\" }\n                        }];\n\n                    if ($.inArray(tags[0], dom.inlineElements) >= 0) {\n                        formatter = new Editor.GreedyInlineFormatter(format);\n                    } else {\n                        formatter = new Editor.GreedyBlockFormatter(format);\n                    }\n\n                    formatter.editor = that.editor;\n                    return formatter;\n                }\n            });\n        },\n\n        decorate: function(body) {\n            var component = this.component,\n                dataSource = component.dataSource,\n                items = dataSource.data(),\n                i, tag, className, style;\n\n            if (body) {\n                component.list.css(\"background-color\", dom.getEffectiveBackground($(body)));\n            }\n\n            if (this.component && this.component.options && this.component.options.unsafeInline !== false) {\n                for (i = 0; i < items.length; i++) {\n                    tag = items[i].tag || \"span\";\n                    className = items[i].className;\n\n                    style = dom.inlineStyle(body, tag, { className: className });\n\n                    style = style.replace(/\"/g, \"'\");\n\n                    items[i].style = style + \";display:inline-block\";\n                }\n            }\n\n            dataSource.trigger(\"change\");\n        },\n\n        initialize: function(ui, editor) {\n            var options = this.options;\n            var toolName = options.name;\n            var that = this;\n            var component = ui.getKendoDropDownList();\n\n            if (!component) {\n                return;\n            }\n\n            that.editor = editor;\n            that.component = component;\n\n            // must be moved to themes\n            ui.closest(\".k-dropdownlist\").width(options.width);\n\n            component.setOptions({\n                optionLabel: editor.options.messages.formatting,\n                change: () => {\n                    var dataItem = component.dataItem();\n\n                    if (dataItem) {\n                        Tool.exec(editor, toolName, dataItem.toJSON());\n                    }\n                },\n                dataBound: function() {\n                    var i, items = component.dataSource.data(),\n                        optionLabel = component.list.parent().find(\".k-list-optionlabel\");\n\n                    for (i = 0; i < items.length; i++) {\n                        items[i] = that.toFormattingItem(items[i]);\n                    }\n\n                    if (optionLabel.length) {\n                        optionLabel.remove();\n                    }\n                }\n            });\n        },\n\n        getFormattingValue: function(items, nodes) {\n            for (var i = 0; i < items.length; i++) {\n                var item = items[i];\n                var tag = item.tag || item.context || \"\";\n                var className = item.className ? \".\" + item.className : \"\";\n                var selector = tag + className;\n\n                var element = $(nodes[0]).closest(selector)[0];\n\n                if (!element) {\n                    continue;\n                }\n\n                if (nodes.length == 1) {\n                    return item.value;\n                }\n\n                for (var n = 1; n < nodes.length; n++) {\n                    if (!$(nodes[n]).closest(selector)[0]) {\n                        break;\n                    } else if (n == nodes.length - 1) {\n                        return item.value;\n                    }\n                }\n            }\n\n            return \"\";\n        },\n\n        update: function(ui, nodes) {\n            var selectBox = $(ui).data(this.type);\n            // necessary until formatBlock is deleted\n            if (!selectBox) {\n                return;\n            }\n\n            var dataSource = selectBox.dataSource,\n                items = dataSource.data(),\n                i, context,\n                ancestor = dom.commonAncestor.apply(null, nodes);\n\n            if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\n                return;\n            } else {\n                this._ancestor = ancestor;\n            }\n\n            for (i = 0; i < items.length; i++) {\n                context = items[i].context;\n\n                items[i].visible = !context || !!$(ancestor).closest(context).length;\n            }\n\n            dataSource.filter([{ field: \"visible\", operator: \"eq\", value: true }]);\n\n            DelayedExecutionTool.fn.update.call(this, ui, nodes);\n\n            selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\n\n            selectBox.wrapper.toggleClass(\"k-disabled\", !dataSource.view().length);\n        },\n\n        destroy: function() {\n            this._ancestor = null;\n        }\n    });\n\n    var CleanFormatCommand = Command.extend({\n        exec: function() {\n            var range = this.lockRange(true);\n            this.tagsToClean = this.options.remove || \"strong,em,span,sup,sub,del,b,i,u,font\".split(\",\");\n\n            RangeUtils.wrapSelectedElements(range);\n\n            var nodes = RangeUtils.mapAll(range, function(node) {\n                return node;\n            });\n\n\n            for (var c = nodes.length - 1; c >= 0; c--) {\n                var node = nodes[c];\n                if (!this.immutableParent(node)) {\n                    this.clean(node);\n                }\n            }\n\n            this.releaseRange(range);\n        },\n\n        clean: function(node) {\n            if (!node || dom.isMarker(node)) {\n                return;\n            }\n\n            var name = dom.name(node);\n\n            if (name == \"ul\" || name == \"ol\") {\n                var listFormatter = new Editor.ListFormatter(name);\n                var prev = node.previousSibling;\n                var next = node.nextSibling;\n\n                listFormatter.unwrap(node);\n\n                // clean contents\n                for (; prev && prev != next; prev = prev.nextSibling) {\n                    this.clean(prev);\n                }\n            } else if (name == \"blockquote\") {\n                dom.changeTag(node, \"p\");\n            } else if (node.nodeType == 1 && !dom.insignificant(node)) {\n                for (var i = node.childNodes.length - 1; i >= 0; i--) {\n                    this.clean(node.childNodes[i]);\n                }\n\n                node.removeAttribute(\"style\");\n                node.removeAttribute(\"class\");\n            } else {\n                unwrapListItem(node);\n            }\n\n            if ($.inArray(name, this.tagsToClean) > -1) {\n                dom.unwrap(node);\n            }\n        },\n\n        immutableParent: function(node) {\n            return this.immutables() && Editor.Immutables.immutableParent(node);\n        }\n    });\n\n\n    function unwrapListItem(node) {\n        var li = dom.closestEditableOfType(node, [\"li\"]);\n        if (li) {\n            var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\n            var range = kendo.ui.editor.W3CRange.fromNode(node);\n            range.selectNode(li);\n            listFormatter.toggle(range);\n        }\n    }\n\n    $.extend(Editor, {\n        FormattingTool: FormattingTool,\n        CleanFormatCommand: CleanFormatCommand\n    });\n\n    registerTool(\"formatting\", new FormattingTool({\n        ui: {\n            type: \"component\",\n            component: \"DropDownList\",\n            componentOptions: {\n                dataTextField: \"text\",\n                dataValueField: \"value\",\n                highlightFirst: false,\n                autoWidth: true,\n                template: kendo.template(\n                    (data) => `<span unselectable=\"on\" ${data.style ? `class=\"k-d-block\" style=\"display:block;${data.style || \"\"}` : \"\"}\">${kendo.htmlEncode(data.text)}</span>`\n                )\n            },\n            overflow: \"never\"\n        }\n    }));\n\n    registerTool(\"cleanFormatting\", new Tool({ command: CleanFormatCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        encode = kendo.htmlEncode,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        dom = Editor.Dom,\n        registerTool = EditorUtils.registerTool,\n        RangeUtils = Editor.RangeUtils,\n        Command = Editor.Command,\n        keys = kendo.keys,\n        KEDITORIMAGEURL = \"#k-editor-image-url\",\n        KEDITORIMAGETITLE = \"#k-editor-image-title\",\n        KEDITORIMAGEWIDTH = \"#k-editor-image-width\",\n        KEDITORIMAGEHEIGHT = \"#k-editor-image-height\";\n\n    var ImageCommand = Command.extend({\n        init: function(options) {\n            var that = this;\n            Command.fn.init.call(that, options);\n\n            that.async = true;\n            that.attributes = {};\n        },\n\n        insertImage: function(img, range) {\n            var attributes = this.attributes;\n            var doc = RangeUtils.documentFromRange(range);\n\n            if (attributes.src && attributes.src != \"http://\") {\n\n                var removeIEAttributes = function() {\n                    setTimeout(function() {\n                        if (!attributes.width) {\n                            img.removeAttribute(\"width\");\n                        }\n\n                        if (!attributes.height) {\n                            img.removeAttribute(\"height\");\n                        }\n\n                        img.removeAttribute(\"complete\");\n                    });\n                };\n\n                if (!img) {\n                    img = dom.create(doc, \"img\", attributes);\n                    img.onload = img.onerror = removeIEAttributes;\n\n                    range.deleteContents();\n                    range.insertNode(img);\n\n                    if (!img.nextSibling) {\n                        dom.insertAfter(doc.createTextNode(\"\\ufeff\"), img);\n                    }\n\n                    removeIEAttributes();\n\n                    range.setStartAfter(img);\n                    range.setEndAfter(img);\n                    RangeUtils.selectRange(range);\n                    return true;\n                } else {\n                    img.onload = img.onerror = removeIEAttributes;\n                    dom.attr(img, attributes);\n                    removeIEAttributes();\n                }\n            }\n\n            return false;\n        },\n\n        redo: function() {\n            var that = this,\n                range = that.lockRange();\n\n            if (!that.insertImage(RangeUtils.image(range), range)) {\n                that.releaseRange(range);\n            }\n        },\n\n        exec: function() {\n            var that = this,\n                range = that.lockRange(),\n                applied = false,\n                img = RangeUtils.image(range),\n                imageWidth = img && img.getAttribute(\"width\") || \"\",\n                imageHeight = img && img.getAttribute(\"height\") || \"\",\n                dialog,\n                form,\n                isIE = kendo.support.browser.msie,\n                options = that.editor.options,\n                messages = options.messages,\n                imageBrowser = options.imageBrowser,\n                showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined$1),\n                dialogOptions = {\n                    title: messages.insertImage,\n                    visible: false,\n                    resizable: showBrowser\n                };\n\n            this.expandImmutablesIn(range);\n\n            function apply(e) {\n                var element = dialog.element,\n                    w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10),\n                    h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\n\n                that.attributes = {\n                    src: element.find(KEDITORIMAGEURL).val().replace(/ /g, \"%20\"),\n                    alt: element.find(KEDITORIMAGETITLE).val()\n                };\n\n                that.attributes.width = null;\n                that.attributes.height = null;\n\n                if (!isNaN(w) && w > 0) {\n                    that.attributes.width = w;\n                }\n\n                if (!isNaN(h) && h > 0) {\n                    that.attributes.height = h;\n                }\n\n                applied = that.insertImage(img, range);\n\n                close(e);\n\n                if (that.change) {\n                    that.change();\n                }\n\n                that.editor._handleSpaceAndNewLines();\n            }\n\n            function close(e) {\n                e.preventDefault();\n                form.destroy();\n                dialog.destroy();\n\n                dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                if (!applied) {\n                    that.releaseRange(range);\n                }\n            }\n\n            function keyDown(e) {\n                if (e.keyCode == keys.ENTER) {\n                    apply(e);\n                } else if (e.keyCode == keys.ESC) {\n                    close(e);\n                }\n            }\n\n            dialogOptions.close = close;\n\n            if (showBrowser) {\n                dialogOptions.width = 750;\n            }\n            dialogOptions.minWidth = 350;\n\n            dialog = this.createDialog(\"<div/>\", dialogOptions).data(\"kendoWindow\");\n\n            form = that._createForm(dialog, showBrowser);\n\n            dialog.element.toggleClass(\"k-filebrowser-dialog\", showBrowser);\n            dialog.wrapper\n            .find(\".k-dialog-insert\").on(\"click\", apply).end()\n            .find(\".k-dialog-close\").on(\"click\", close).end()\n            .find(\".k-form-field input\").on(\"keydown\", keyDown).end()\n            // IE < 8 returns absolute url if getAttribute is not used\n            .find(KEDITORIMAGEURL).val(img ? img.getAttribute(\"src\", 2) : \"http://\").end()\n            .find(KEDITORIMAGETITLE).val(img ? img.alt : \"\").end()\n            .find(KEDITORIMAGEWIDTH).val(imageWidth).end()\n            .find(KEDITORIMAGEHEIGHT).val(imageHeight).end();\n\n            var element = dialog.element;\n            if (showBrowser) {\n                this._imageBrowser = new kendo.ui.ImageBrowser(\n                    element.find(\".k-imagebrowser\"),\n                    extend({}, imageBrowser)\n                );\n\n                this._imageBrowser.bind(\"change\", function(ev) {\n                    if (ev.selected.get(\"type\") === \"f\") {\n                        element.find(KEDITORIMAGEURL).val(this.value());\n                    }\n                });\n\n                this._imageBrowser.bind(\"apply\", apply);\n            }\n\n            if (isIE) {\n                var dialogHeight = element.closest(\".k-window\").height();\n                element.css(\"max-height\", dialogHeight);\n            }\n            dialog.center().open();\n            element.find(KEDITORIMAGEURL).trigger(\"focus\").select();\n        },\n\n        _createForm: function(dialog, showBrowser) {\n            var that = this;\n            var formElement = $(\"<div/>\").appendTo(dialog.element);\n            var messages = that.editor.options.messages;\n            var form = formElement.kendoForm({\n                renderButtons: false,\n                items: [\n                    {\n                        field: \"k-editor-image-url\",\n                        label: encode(messages.imageWebAddress),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-image-title\",\n                        label: encode(messages.imageAltText),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-image-width\",\n                        label: encode(messages.imageWidth),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-image-height\",\n                        label: encode(messages.imageHeight),\n                        editor: \"TextBox\"\n                    }\n                ]\n            }).data(\"kendoForm\");\n\n            if (showBrowser) {\n                formElement.prepend($('<div class=\"k-filebrowser k-imagebrowser\"></div>'));\n            }\n\n            dialog.element.after($(that._actionButtonsTemplate({ messages, insertButtonIcon: \"image-add\", cancelButtonIcon: \"cancel-outline\" })));\n\n            return form;\n        }\n\n    });\n\n    kendo.ui.editor.ImageCommand = ImageCommand;\n\n    registerTool(\"insertImage\", new Editor.Tool({ command: ImageCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        Command = Editor.Command,\n        Tool = Editor.Tool,\n        registerTool = EditorUtils.registerTool,\n        loadingOverlay = '<div contenteditable=\"false\" class=\"k-loading-mask\" style=\"width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;\"><div class=\"k-loading-image\"></div><div class=\"k-loading-color\"></div></div>';\n\n    var ImportCommand = Command.extend({\n        exec: function() {\n            (this.editor._uploadWidget || this._initializeUploadWidget()).element.click();\n        },\n\n        _initializeUploadWidget: function() {\n            var cmd = this;\n            var editor = cmd.editor;\n            var importOptions = editor.options[\"import\"];\n            var upload = $('<input id=\"editorImport\" name=\"files\" type=\"file\" />').kendoUpload({\n                success: cmd._onUploadSuccess.bind(cmd),\n                progress: cmd._onUploadProgress.bind(cmd),\n                select: cmd._onUploadSelect.bind(cmd),\n                error: cmd._onUploadError.bind(cmd),\n                complete: cmd._onUploadComplete.bind(cmd),\n                showFileList: false,\n                multiple: false,\n                async: {\n                    saveUrl: importOptions.proxyURL,\n                    autoUpload: true,\n                    saveField: \"file\"\n                },\n                validation: {\n                    allowedExtensions: importOptions.allowedExtensions,\n                    maxFileSize: importOptions.maxFileSize\n                }\n            }).getKendoUpload();\n\n            editor._uploadWidget = upload;\n\n            return upload;\n        },\n        _onUploadComplete: function(ev) {\n            this._trigger(\"complete\", ev);\n            ev.sender.clearAllFiles();\n\n            this._removeLoadingOverlay();\n        },\n        _onUploadSuccess: function(ev) {\n            this.editor.value(ev.response.html.replace(/<\\/?body>/ig, \"\"));\n            this._trigger(\"success\", ev);\n        },\n        _onUploadProgress: function(ev) {\n            this._trigger(\"progress\", ev);\n        },\n        _onUploadSelect: function(ev) {\n            this._trigger(\"select\", ev);\n            if (!ev.files[0].validationErrors) {\n                this._initLoadingOverlay();\n            }\n        },\n        _onUploadError: function(ev) {\n            this._trigger(\"error\", ev);\n        },\n\n        _trigger: function(eventType, uploadEvent) {\n            var editor = this.editor;\n            var importOptions = editor.options[\"import\"];\n            if (typeof importOptions[eventType] === \"function\") {\n                importOptions[eventType].call(editor, uploadEvent);\n            }\n        },\n\n        _initLoadingOverlay: function() {\n            var editable = this.editor.body;\n            if (Editor.Dom.is(editable, \"body\")) {\n                this._iframeWrapper = this._container =\n                    this.editor.wrapper.find(\"iframe\").parent()\n                    .css({ position: \"relative\" }).append(loadingOverlay);\n            } else {\n                this._container = $(editable).append(loadingOverlay);\n            }\n\n            kendo.ui.progress(this._container, true);\n        },\n\n        _removeLoadingOverlay: function() {\n            kendo.ui.progress(this._container, false);\n            $(this._iframeWrapper).css({\n                position: \"\"\n            });\n\n            delete this._container;\n            delete this._iframeWrapper;\n        }\n    });\n\n    extend(Editor, {\n        ImportCommand: ImportCommand\n    });\n\n    registerTool(\"import\", new Tool({\n        command: ImportCommand,\n        ui: {\n            showText: \"both\"\n        }\n    }));\n\n    }(window.kendo.jQuery));\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            editorNS = kendo.ui.editor,\n            Command = editorNS.Command,\n            GenericCommand = editorNS.GenericCommand,\n            EditorUtils = editorNS.EditorUtils,\n            registerTool = EditorUtils.registerTool,\n            Tool = editorNS.Tool,\n            RestorePoint = editorNS.RestorePoint,\n            extend = $.extend;\n\n    var InsertHtmlCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n\n            this.managesUndoRedo = true;\n        },\n\n        exec: function() {\n            var editor = this.editor;\n            var options = this.options;\n            var range = options.range;\n            var body = editor.body;\n            var startRestorePoint = new RestorePoint(range, body);\n            var html = options.html || options.value || '';\n\n            editor.selectRange(range);\n\n            editor.clipboard.paste(html, options);\n\n            if (options.postProcess) {\n                options.postProcess(editor, editor.getRange());\n            }\n\n            var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\n            genericCommand.editor = editor;\n            editor.undoRedoStack.push(genericCommand);\n\n            editor.focus();\n        }\n    });\n\n    var InsertHtmlTool = Tool.extend({\n        initialize: function(ui, editor) {\n            var options = this.options,\n                dataSource = options.items ? options.items : editor.options.insertHtml,\n                component = ui.getKendoDropDownList();\n\n            if (!component) {\n                return;\n            }\n\n            component.one(\"open\", () => {\n                var optionLabel = component.list.parent().find(\".k-list-optionlabel\");\n\n                if (optionLabel.length) {\n                    optionLabel.remove();\n                }\n            });\n\n            component.setOptions({\n                dataSource: dataSource,\n                optionLabel: editor.options.messages.insertHtml\n            });\n            component.bind(\"change\", () => {\n                Tool.exec(editor, 'insertHtml', component.value());\n            });\n        },\n\n        command: function(commandArguments) {\n            return new InsertHtmlCommand(commandArguments);\n        },\n\n        update: function(ui) {\n            var component = ui.data(\"kendoDropDownList\");\n            component.close();\n            component.value(null);\n        }\n    });\n\n    extend(editorNS, {\n        InsertHtmlCommand: InsertHtmlCommand,\n        InsertHtmlTool: InsertHtmlTool\n    });\n\n    registerTool(\"insertHtml\", new InsertHtmlTool({\n        ui: {\n            initialValue: \"Insert HTML\",\n            type: \"component\",\n            component: \"DropDownList\",\n            componentOptions: {\n                dataTextField: \"text\",\n                dataValueField: \"value\",\n                autoSize: true,\n                highlightFirst: false\n            },\n            overflow: \"never\"\n        }\n    }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        Command = Editor.Command,\n        Tool = Editor.Tool,\n        registerTool = EditorUtils.registerTool,\n        defaultExportAsItems = [\n            { text: 'Docx', value: 'docx' },\n            { text: 'Rtf', value: 'rtf' },\n            { text: 'Pdf', value: 'pdf' },\n            { text: 'Html', value: 'html' },\n            { text: 'Plain Text', value: 'txt' }\n        ];\n\n    var ExportAsCommand = Command.extend({\n        init: function(options) {\n            var cmd = this;\n            cmd.options = options;\n            Command.fn.init.call(cmd, options);\n            cmd.attributes = null;\n            cmd.exportType = options.exportType;\n        },\n\n        exec: function() {\n            var cmd = this;\n            var range = this.lockRange(true);\n            cmd.postToProxy();\n            cmd.releaseRange(range);\n        },\n\n        postToProxy: function() {\n            this.generateForm().appendTo('body').submit().remove();\n        },\n\n        generateForm: function() {\n            var cmd = this;\n            var exportAsOptions = cmd.editor.options.exportAs;\n            var form = $('<form>').attr({\n                action: exportAsOptions && exportAsOptions.proxyURL || \"\",\n                method: 'POST'\n            });\n\n            form.append([\n                cmd.valueInput(),\n                cmd.exportTypeInput(),\n                cmd.fileNameInput(),\n                cmd.antiForgeryInput()\n            ]);\n\n            return form;\n        },\n\n        valueInput: function() {\n            var editor = this.editor;\n            return $('<input>').attr({\n                value: editor.encodedValue(),\n                name: 'value',\n                type: 'hidden'\n            });\n        },\n\n        exportTypeInput: function() {\n            var cmd = this;\n            return $('<input>').attr({\n                value: cmd.exportType,\n                name: 'exportType',\n                type: 'hidden'\n            });\n\n        },\n\n        fileNameInput: function() {\n            var editor = this.editor;\n            var exportAsOptions = editor.options.exportAs;\n            var fileName = exportAsOptions && exportAsOptions.fileName || editor.element.attr(\"id\") || \"editor\";\n            return $('<input>').attr({\n                value: fileName,\n                name: 'fileName',\n                type: 'hidden'\n            });\n        },\n\n        antiForgeryInput: function() {\n            var csrf_param = $(\"meta[name=csrf-param],meta[name=_csrf_header]\").attr(\"content\");\n\n            return $(\"input[name^='__RequestVerificationToken']\").clone()\n                        .add($(\"input[name^='\" + csrf_param + \"']\").clone());\n        }\n    });\n\n    var ExportAsTool = Tool.extend({\n        init: function(options) {\n            var tool = this;\n            Tool.fn.init.call(tool, kendo.deepExtend({}, tool.options, options));\n            tool.type = 'kendoDropDownList';\n        },\n\n        options: {\n            items: defaultExportAsItems\n        },\n\n        command: function(args) {\n            var value = args.value;\n            return new Editor.ExportAsCommand({\n                range: args.range,\n                exportType: value.exportType\n            });\n        },\n\n        initialize: function(ui, editor) {\n            var tool = this,\n                component = ui.getKendoDropDownList();\n\n            tool.editor = editor;\n\n            component.bind(\"change\", this.changeHandler.bind(this));\n        },\n\n        changeHandler: function(e) {\n            this._exec(e.sender.value());\n            e.sender.value(null);\n            e.sender.wrapper.find(\".k-export-tool-text\").text(kendo.htmlEncode(this.editor.options.messages.exportAs));\n        },\n\n        update: function(ui, editor) {\n            var component = ui.data(\"kendoDropDownList\");\n\n            component.close();\n            component.value(null);\n            ui.closest(\".k-dropdownlist\").find(\".k-export-tool-text\").text(kendo.htmlEncode(this.editor.options.messages.exportAs));\n        },\n\n        _exec: function(value) {\n            if (value) {\n                Tool.exec(this.editor, this.options.name, { exportType: value } );\n            }\n        },\n\n        destroy: function() {\n            this._ancestor = null;\n        }\n    });\n\n    extend(Editor, {\n        ExportAsTool: ExportAsTool,\n        ExportAsCommand: ExportAsCommand\n    });\n\n    registerTool('exportAs', new ExportAsTool({\n        ui: {\n            type: \"component\",\n            overflow: \"never\",\n            component: \"DropDownList\",\n            componentOptions: {\n                dataTextField: \"text\",\n                dataValueField: \"value\",\n                valuePrimitive: true,\n                value: null,\n                width: \"140px\",\n                highlightFirst: false,\n                autoWidth: true,\n                itemTemplate: (data) => `<span class=\\\"k-link k-menu-link\\\" data-value=\\\"${data.value}\\\">${data.text}</strong></span>`,\n                icon: \"export\",\n                valueTemplate: () => `<span class=\"k-editor-export\">${kendo.ui.icon({ icon: \"export\", iconClass: \"k-button-icon\" })}<span class=\"k-export-tool-text\"></span></span>`\n            }\n        }\n    }));\n\n    }(window.kendo.jQuery));\n\n    (function($, undefined$1) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        dom = Editor.Dom,\n        EditorUtils = Editor.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Command = Editor.Command,\n        Tool = Editor.Tool,\n        RangeUtils = Editor.RangeUtils,\n        blockElements = dom.blockElements,\n        BlockFormatFinder = Editor.BlockFormatFinder,\n        BlockFormatter = Editor.BlockFormatter;\n\n    function indent(node, value) {\n        var isRtl = $(node).css(\"direction\") == \"rtl\",\n            indentDirection = isRtl ? \"Right\" : \"Left\",\n            property = dom.name(node) != \"td\" ? \"margin\" + indentDirection : \"padding\" + indentDirection;\n        if (value === undefined$1) {\n            return node.style[property] || 0;\n        } else {\n            if (value > 0) {\n                node.style[property] = value + \"px\";\n            } else {\n                node.style[property] = \"\";\n\n                if (!node.style.cssText) {\n                    node.removeAttribute(\"style\");\n                }\n            }\n        }\n    }\n\n    var IndentFormatter = Class.extend({\n        init: function() {\n            this.finder = new BlockFormatFinder([{ tags: dom.blockElements }]);\n        },\n\n        apply: function(nodes) {\n            nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n            var formatNodes = this.finder.findSuitable(nodes),\n                targets = [],\n                i, len, formatNode, parentList, sibling;\n\n            formatNodes = this.mapImmutables(formatNodes);\n\n            if (formatNodes.length) {\n                for (i = 0, len = formatNodes.length; i < len; i++) {\n                    if (dom.is(formatNodes[i], \"li\")) {\n                        if (!$(formatNodes[i]).index()) {\n                            targets.push(formatNodes[i].parentNode);\n                        } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\n                            targets.push(formatNodes[i]);\n                        }\n                    } else {\n                        targets.push(formatNodes[i]);\n                    }\n                }\n\n                while (targets.length) {\n                    formatNode = targets.shift();\n                    if (dom.is(formatNode, \"li\")) {\n                        parentList = formatNode.parentNode;\n                        sibling = $(formatNode).prev(\"li\");\n                        var siblingList = sibling.find(\"ul,ol\").last();\n\n                        var nestedList = $(formatNode).children(\"ul,ol\")[0];\n\n                        if (nestedList && sibling[0]) {\n                            if (siblingList[0]) {\n                               siblingList.append(formatNode);\n                               siblingList.append($(nestedList).children());\n                               dom.remove(nestedList);\n                            } else {\n                                sibling.append(nestedList);\n                                nestedList.insertBefore(formatNode, nestedList.firstChild);\n                            }\n                        } else {\n                            nestedList = sibling.children(\"ul,ol\")[0];\n                            if (!nestedList) {\n                                nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList), this.getListTypeAttr(parentList));\n                                sibling.append(nestedList);\n                            }\n\n                            while (formatNode && formatNode.parentNode == parentList) {\n                                nestedList.appendChild(formatNode);\n                                formatNode = targets.shift();\n                            }\n                        }\n                    } else {\n                        var marginLeft = parseInt(indent(formatNode), 10) + 30;\n                        indent(formatNode, marginLeft);\n\n                        for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\n                            if ($.contains(formatNode, targets[targetIndex])) {\n                                targets.splice(targetIndex, 1);\n                            }\n                        }\n                    }\n                }\n            } else {\n                var formatter = new BlockFormatter([{ tags: [\"p\"] }], { style: { marginLeft: 30 } });\n\n                formatter.apply(nodes);\n            }\n        },\n\n        getListTypeAttr: function(list) {\n            var type = list.getAttribute(\"type\");\n            var styleType = list.style.listStyleType;\n\n            return type ? { type: type } : { style: { listStyleType: styleType } };\n        },\n\n        mapImmutables: function(nodes) {\n            if (!this.immutables) {\n                return nodes;\n            } else {\n                var immutables = [];\n                return $.map(nodes, function(node) {\n                    var immutable = Editor.Immutables.immutableParent(node);\n                    if (immutable) {\n                        if ($.inArray(immutable, immutables) === -1) {\n                            immutables.push(immutable);\n                        } else {\n                            return null;\n                        }\n                    }\n                    return immutable || node;\n                });\n            }\n        },\n\n        remove: function(nodes) {\n            nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n            var formatNodes = this.finder.findSuitable(nodes),\n                targetNode, i, len, list, listParent, siblings,\n                formatNode, marginLeft;\n\n            formatNodes = this.mapImmutables(formatNodes);\n\n            for (i = 0, len = formatNodes.length; i < len; i++) {\n                formatNode = $(formatNodes[i]);\n\n                if (formatNode.is(\"li\")) {\n                    list = formatNode.parent();\n                    listParent = list.parent();\n                    // listParent will be ul or ol in case of invalid dom - <ul><li></li><ul><li></li></ul></ul>\n                    if (listParent.is(\"li,ul,ol\") && !indent(list[0])) {\n                        // skip already processed nodes\n                        if (targetNode && $.contains(targetNode, listParent[0])) {\n                            continue;\n                        }\n\n                        siblings = formatNode.nextAll(\"li\");\n                        if (siblings.length) {\n                            $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\n                        }\n\n                        if (listParent.is(\"li\")) {\n                            formatNode.insertAfter(listParent);\n                        } else {\n                            formatNode.appendTo(listParent);\n                        }\n\n                        if (!list.children(\"li\").length) {\n                            list.remove();\n                        }\n\n                        continue;\n                    } else {\n                        if (targetNode == list[0]) {\n                            // removing format on sibling LI elements\n                            continue;\n                        }\n                        targetNode = list[0];\n                    }\n                } else {\n                    targetNode = formatNodes[i];\n                }\n\n                marginLeft = parseInt(indent(targetNode), 10) - 30;\n                indent(targetNode, marginLeft);\n            }\n        }\n\n    });\n\n    var IndentCommand = Command.extend({\n        init: function(options) {\n            var that = this;\n            options.formatter = /** @ignore */ {\n                toggle: (function(range) {\n                    var indentFormatter = new IndentFormatter();\n                    indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                    indentFormatter.apply(RangeUtils.nodes(range));\n                }).bind(that)\n            };\n            Command.fn.init.call(this, options);\n        }\n    });\n\n    var OutdentCommand = Command.extend({\n        init: function(options) {\n            var that = this;\n            options.formatter = {\n                toggle: (function(range) {\n                    var indentFormatter = new IndentFormatter();\n                    indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                    indentFormatter.remove(RangeUtils.nodes(range));\n                }).bind(that)\n            };\n            Command.fn.init.call(this, options);\n        }\n    });\n\n    var OutdentTool = Tool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n\n            this.finder = new BlockFormatFinder([{ tags: blockElements }]);\n        },\n\n        initialize: function(ui, editor) {\n            $.extend(this.options, {\n                immutables: editor && editor.options.immutables\n            });\n        },\n\n        update: function(ui, nodes) {\n            var suitableNodes = this.finder.findSuitable(nodes),\n                toolbar = ui.closest(\".k-toolbar\").data(\"kendoToolBar\"),\n                isOutdentable, listParentsCount, i, len, suitable, immutableParent;\n\n            for (i = 0, len = suitableNodes.length; i < len; i++) {\n                suitable = suitableNodes[i];\n\n                if (this.options.immutables) {\n                    immutableParent = Editor.Immutables.immutableParent(suitable);\n\n                    if (immutableParent) {\n                        suitable = immutableParent;\n                    }\n                }\n\n                isOutdentable = indent(suitable);\n\n                if (!isOutdentable) {\n                    listParentsCount = $(suitable).parents(\"ul,ol\").length;\n                    isOutdentable = (dom.is(suitable, \"li\") && (listParentsCount > 1 || indent(suitable.parentNode))) ||\n                                    (dom.ofType(suitable, [\"ul\",\"ol\"]) && listParentsCount > 0);\n                }\n\n                if (isOutdentable) {\n                    toolbar.enable(ui, true);\n                    return;\n                }\n            }\n\n            toolbar.enable(ui, false);\n        }\n    });\n\n    extend(Editor, {\n        IndentFormatter: IndentFormatter,\n        IndentCommand: IndentCommand,\n        OutdentCommand: OutdentCommand,\n        OutdentTool: OutdentTool\n    });\n\n    registerTool(\"indent\", new Tool({ command: IndentCommand }));\n    registerTool(\"outdent\", new OutdentTool({ command: OutdentCommand, ui: { enable: false } }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        extend = $.extend,\n        editorNS = kendo.ui.editor,\n        dom = editorNS.Dom,\n        Command = editorNS.Command,\n        Tool = editorNS.Tool,\n        BlockFormatter = editorNS.BlockFormatter,\n        normalize = dom.normalize,\n        RangeUtils = editorNS.RangeUtils,\n        registerTool = editorNS.EditorUtils.registerTool;\n\n    var ParagraphCommand = Command.extend({\n        init: function(options) {\n            this.options = options;\n            Command.fn.init.call(this, options);\n        },\n\n        _insertMarker: function(doc, range) {\n            var marker = dom.create(doc, 'a'), container;\n            marker.className = \"k-marker\";\n\n            range.insertNode(marker);\n\n            if (!marker.parentNode) {\n                // inserting paragraph in Firefox full body range\n                container = range.commonAncestorContainer;\n                container.innerHTML = \"\";\n                container.appendChild(marker);\n            }\n\n            normalize(marker.parentNode);\n\n            return marker;\n        },\n\n        _moveFocus: function(range, candidate) {\n            if (dom.isEmpty(candidate)) {\n                range.setStartBefore(candidate);\n            } else {\n                range.selectNodeContents(candidate);\n\n                var focusNode = RangeUtils.textNodes(range)[0];\n\n                if (!focusNode) {\n                    while (candidate.childNodes.length && !dom.is(candidate.firstChild, \"br\")) {\n                        candidate = candidate.firstChild;\n                    }\n\n                    focusNode = candidate;\n                }\n\n                if (dom.isEmpty(focusNode)) {\n                    range.setStartBefore(focusNode);\n                } else {\n                    if (dom.emptyNode(focusNode)) {\n                        focusNode.innerHTML = \"\\ufeff\";\n                    }\n                    var startNode = focusNode.firstChild || focusNode;\n                    if (dom.isDataNode(startNode)) {\n                        range.setStart(startNode, 0);\n                    } else {\n                        range.setStartBefore(startNode);\n                    }\n                }\n            }\n        },\n\n        shouldTrim: function(range) {\n            var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','),\n                startInBlock = dom.parentOfType(range.startContainer, blocks),\n                endInBlock = dom.parentOfType(range.endContainer, blocks);\n            return (startInBlock && !endInBlock) || (!startInBlock && endInBlock);\n        },\n\n        _blankAfter: function(node) {\n            while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === \"\")) {\n                node = node.nextSibling;\n            }\n\n            return !node;\n        },\n\n        exec: function() {\n            const range = this.getRange();\n            const doc = RangeUtils.documentFromRange(range);\n            let parent, previous, next, paragraph, marker, li, heading, tableNode, rng,\n            shouldTrim;\n            const emptyParagraphContent = editorNS.emptyElementContent;\n\n            this.expandImmutablesIn(range);\n\n            shouldTrim = this.shouldTrim(range);\n\n            range.deleteContents();\n            marker = this._insertMarker(doc, range);\n\n            dom.stripBomNode(marker.previousSibling);\n            dom.stripBomNode(marker.nextSibling);\n\n            li = dom.closestEditableOfType(marker, ['li']);\n            heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\n            tableNode = dom.is(marker.parentNode, 'table') && marker.parentNode;\n\n            if (li) {\n                // hitting 'enter' in empty li\n                if (dom.emptyNode(li)) {\n                    paragraph = dom.create(doc, 'p');\n\n                    if (dom.next(li)) {\n                        rng = range.cloneRange();\n                        rng.selectNode(li);\n\n                        RangeUtils.split(rng, li.parentNode);\n                    }\n\n                    const br = $(\"br\", li);\n                    if (br.length == 1) {\n                        br.remove();\n                    }\n\n                    const parentNode = li.parentNode;\n                    const parentChildrenLength = li.parentNode.children.length;\n                    const firstChild = parentChildrenLength >= 1 && li.childNodes.length == 1 && li.children[0];\n\n                    dom.insertAfter(paragraph, parentNode);\n                    dom.remove(parentChildrenLength == 1 ? li.parentNode : li);\n\n                    if (firstChild && firstChild !== marker) {\n                        paragraph.appendChild(firstChild);\n                        paragraph.appendChild(marker);\n                    } else {\n                        paragraph.innerHTML = emptyParagraphContent;\n                    }\n                    next = paragraph;\n                }\n            } else if (heading && this._blankAfter(marker)) {\n                paragraph = this._insertParagraphAfter(heading);\n                dom.remove(marker);\n                next = paragraph;\n            } else if (tableNode) {\n                paragraph = this._insertParagraphAfter(tableNode);\n                dom.remove(marker);\n                next = paragraph;\n            }\n\n            if (!next) {\n                if (!(li || heading)) {\n                    new BlockFormatter([{ tags: ['p'] }]).apply([marker]);\n                }\n\n                range.selectNode(marker);\n\n                parent = dom.parentOfType(marker, [li ? 'li' : heading ? dom.name(heading) : 'p']);\n\n                RangeUtils.split(range, parent, shouldTrim);\n\n                previous = parent.previousSibling;\n\n                if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\n                    previous = previous.firstChild;\n                }\n\n                next = parent.nextSibling;\n\n                this.clean(previous, { links: true });\n                this.clean(next, { links: true });\n\n                if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\n                    next = next.firstChild;\n                }\n\n                dom.remove(parent);\n\n                // normalize updates the caret display in Gecko\n                normalize(previous);\n            }\n\n            normalize(next);\n\n            this._moveFocus(range, next);\n\n            range.collapse(true);\n\n            dom.scrollTo(next, true);\n\n            RangeUtils.selectRange(range);\n        },\n\n        _insertParagraphAfter: function(node) {\n            var range = this.getRange();\n            var doc = RangeUtils.documentFromRange(range);\n            var emptyElementContent = editorNS.emptyElementContent;\n            var paragraph = dom.create(doc, 'p');\n\n            dom.insertAfter(paragraph, node);\n            paragraph.innerHTML = emptyElementContent;\n\n            return paragraph;\n        },\n\n        clean: function(node, options) {\n            var root = node;\n\n            if (node.firstChild && dom.is(node.firstChild, 'br')) {\n                dom.remove(node.firstChild);\n            }\n\n            if (dom.isDataNode(node) && !node.nodeValue) {\n                node = node.parentNode;\n            }\n\n            if (node) {\n                var siblings = false;\n                while (node.firstChild && node.firstChild.nodeType == 1) {\n                    siblings = siblings || (dom.significantNodes(node.childNodes).length > 1);\n                    node = node.firstChild;\n                }\n\n                if (!dom.isEmpty(node) && node.className != \"k-br\" && /^\\s*$/.test(node.innerHTML) && !siblings) {\n                    $(root).find(\".k-br\").remove();\n                    node.innerHTML = editorNS.emptyElementContent;\n                }\n\n                if (options && options.links) {\n                    while (node != root) {\n                        if (dom.is(node, \"a\") && dom.emptyNode(node)) {\n                            dom.unwrap(node);\n                            break;\n                        }\n                        node = node.parentNode;\n                    }\n                }\n            }\n        }\n    });\n\n    var NewLineCommand = Command.extend({\n        init: function(options) {\n            this.options = options;\n            Command.fn.init.call(this, options);\n        },\n\n        exec: function() {\n            var range = this.getRange();\n            this.expandImmutablesIn(range);\n\n            var br = dom.create(RangeUtils.documentFromRange(range), 'br');\n            var node = range.startContainer;\n            var filler;\n            var browser = kendo.support.browser;\n            var oldIE = browser.msie && browser.version < 11;\n            var tableNode = dom.is(node, 'table') && node;\n            var kbrParent;\n\n            range.deleteContents();\n            if (tableNode) {\n                dom.insertAfter(br, tableNode);\n            } else {\n                kbrParent = $(node).closest('.k-br');\n                range.insertNode(br);\n\n                if (kbrParent.length) {\n                    // pressing enter in an k-br node\n                    dom.unwrap(kbrParent[0]);\n                }\n            }\n\n            normalize(br.parentNode);\n\n            if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\n                // Gecko and WebKit cannot put the caret after only one br.\n                if (!!br.nextSibling && dom.isWhitespace(br.nextSibling)) {\n                    $(br.nextSibling).remove();\n                }\n                filler = br.cloneNode(true);\n                filler.className = 'k-br';\n                dom.insertAfter(filler, br);\n            }\n\n            range.setStartAfter(br);\n            range.collapse(true);\n\n            dom.scrollTo(br.nextSibling || br, true);\n\n            RangeUtils.selectRange(range);\n        }\n    });\n\n    extend(editorNS, {\n        ParagraphCommand: ParagraphCommand,\n        NewLineCommand: NewLineCommand\n    });\n\n    registerTool(\"insertLineBreak\", new Tool({ key: 13, shift: true, command: NewLineCommand }));\n    registerTool(\"insertParagraph\", new Tool({ key: 13, command: ParagraphCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        encode = kendo.htmlEncode,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        dom = Editor.Dom,\n        registerTool = EditorUtils.registerTool,\n        RangeUtils = Editor.RangeUtils,\n        Command = Editor.Command,\n        LinkFormatter = Editor.LinkFormatter,\n        textNodes = RangeUtils.textNodes,\n        keys = kendo.keys,\n        KEDITORFILEURL = \"#k-editor-file-url\",\n        KEDITORFILETEXT = \"#k-editor-file-text\",\n        KEDITORFILETITLE = \"#k-editor-file-title\";\n\n    var FileCommand = Command.extend({\n        init: function(options) {\n            var that = this;\n            Command.fn.init.call(that, options);\n\n            that.formatter = new LinkFormatter();\n\n            that.async = true;\n            that.attributes = {};\n        },\n\n        insertFile: function(file, range) {\n            var attributes = this.attributes;\n            var doc = RangeUtils.documentFromRange(range);\n\n            if (attributes.href && attributes.href != \"http://\") {\n\n                if (!file) {\n                    file = dom.create(doc, \"a\", { href: attributes.href });\n                    file.innerHTML = attributes.innerHTML;\n                    file.title = attributes.title;\n\n                    range.deleteContents();\n                    range.insertNode(file);\n\n                    if (!file.nextSibling) {\n                        dom.insertAfter(doc.createTextNode(\"\\ufeff\"), file);\n                    }\n\n                    range.setStartAfter(file);\n                    range.setEndAfter(file);\n                    RangeUtils.selectRange(range);\n                    return true;\n                } else {\n                    dom.attr(file, attributes);\n                }\n            }\n\n            return false;\n        },\n\n        redo: function() {\n            var that = this,\n                range = that.lockRange();\n\n            this.formatter.apply(range, this.attributes);\n            that.releaseRange(range);\n        },\n\n        exec: function() {\n            var that = this,\n                range = that.lockRange(),\n                nodes = textNodes(range),\n                applied = false,\n                file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null,\n                dialog,\n                form,\n                isIE = kendo.support.browser.msie,\n                options = that.editor.options,\n                messages = options.messages,\n                fileBrowser = options.fileBrowser,\n                showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined$1),\n                dialogOptions = {\n                    title: messages.insertFile,\n                    visible: false,\n                    resizable: showBrowser\n                };\n\n            this.expandImmutablesIn(range);\n\n            function apply(e) {\n                var element = dialog.element,\n                    href = element.find(KEDITORFILEURL).val().replace(/ /g, \"%20\"),\n                    innerHTML = element.find(KEDITORFILETEXT).val(),\n                    title = element.find(KEDITORFILETITLE).val();\n\n                that.attributes = {\n                    href: href,\n                    innerHTML: innerHTML !== \"\" ? innerHTML : href,\n                    title: title\n                };\n\n                applied = that.insertFile(file, range);\n\n                close(e);\n\n                if (that.change) {\n                    that.change();\n                }\n            }\n\n            function close(e) {\n                e.preventDefault();\n                form.destroy();\n                dialog.destroy();\n\n                dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                if (!applied) {\n                    that.releaseRange(range);\n                }\n            }\n\n            function keyDown(e) {\n                if (e.keyCode == keys.ENTER) {\n                    apply(e);\n                } else if (e.keyCode == keys.ESC) {\n                    close(e);\n                }\n            }\n\n            dialogOptions.close = close;\n\n            if (showBrowser) {\n                dialogOptions.width = 750;\n            }\n            dialogOptions.minWidth = 350;\n\n            dialog = this.createDialog(\"<div/>\", dialogOptions).data(\"kendoWindow\");\n            form = that._createForm(dialog, showBrowser);\n\n            dialog.element.toggleClass(\"k-filebrowser-dialog\", showBrowser);\n            dialog.wrapper\n            .find(\".k-dialog-insert\").on(\"click\", apply).end()\n            .find(\".k-dialog-close\").on(\"click\", close).end()\n            .find(\".k-form-field input\").on(\"keydown\", keyDown).end()\n            // IE < 8 returns absolute url if getAttribute is not used\n            .find(KEDITORFILEURL).val(file ? file.getAttribute(\"href\", 2) : \"http://\").end()\n            .find(KEDITORFILETEXT).val(file ? file.innerText : \"\").end()\n            .find(KEDITORFILETITLE).val(file ? file.title : \"\").end();\n\n            var element = dialog.element;\n            if (showBrowser) {\n                that._fileBrowser = new kendo.ui.FileBrowser(\n                    element.find(\".k-filebrowser\"),\n                    extend({}, fileBrowser)\n                );\n\n                that._fileBrowser.bind(\"change\", function(ev) {\n                    if (ev.selected.get(\"type\") === \"f\") {\n                        element.find(KEDITORFILEURL).val(this.value());\n                    }\n                } );\n\n                that._fileBrowser.bind(\"apply\", apply);\n            }\n\n            if (isIE) {\n                var dialogHeight = element.closest(\".k-window\").height();\n                element.css(\"max-height\", dialogHeight);\n            }\n            dialog.center().open();\n            element.find(KEDITORFILEURL).trigger(\"focus\").select();\n        },\n\n        _createForm: function(dialog, showBrowser) {\n            var that = this;\n            var formElement = $(\"<div/>\").appendTo(dialog.element);\n            var messages = that.editor.options.messages;\n\n            var form = formElement.kendoForm({\n                renderButtons: false,\n                items: [\n                    {\n                        field: \"k-editor-file-url\",\n                        label: encode(messages.fileWebAddress),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-file-text\",\n                        label: encode(messages.fileText),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-file-title\",\n                        label: encode(messages.fileTitle),\n                        editor: \"TextBox\"\n                    }\n                ]\n            }).data(\"kendoForm\");\n\n            if (showBrowser) {\n                formElement.prepend($('<div class=\"k-filebrowser\"></div>'));\n            }\n\n            dialog.element.after($(that._actionButtonsTemplate({ messages, insertButtonIcon: \"file-add\", cancelButtonIcon: \"cancel-outline\" })));\n\n            return form;\n        }\n\n    });\n\n    kendo.ui.editor.FileCommand = FileCommand;\n\n    registerTool(\"insertFile\", new Editor.Tool({ command: FileCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        dom = Editor.Dom,\n        RangeUtils = Editor.RangeUtils,\n        Command = Editor.Command,\n\n        NS = \"kendoEditor\",\n        ACTIVESTATE = \"k-active\",\n        SELECTEDSTATE = \"k-selected\",\n        SCOPE = \"scope\",\n        ROW = \"row\",\n        COL = \"col\",\n        ROWGROUP = \"rowgroup\",\n        COLGROUP = \"colgroup\",\n        COLSPAN = \"colspan\",\n        ROWSPAN = \"rowspan\",\n        TABLE = \"table\",\n        THEAD = \"thead\",\n        TBODY = \"tbody\",\n        TR = \"tr\",\n        TD = \"td\",\n        TH = \"th\",\n\n        Tool = Editor.Tool,\n        InsertHtmlCommand = Editor.InsertHtmlCommand,\n        BlockFormatFinder = Editor.BlockFormatFinder,\n        BlockFormatTool = Editor.BlockFormatTool,\n        FormatCommand = Editor.FormatCommand,\n        registerTool = Editor.EditorUtils.registerTool,\n        registerFormat = Editor.EditorUtils.registerFormat,\n        formats = kendo.ui.Editor.fn.options.formats,\n        getTouches = kendo.getTouches;\n    var template = kendo.template;\n\n    var columnTemplate = ({ width, content }) => `<td style=\"width:${width}%;\">${content}</td>`;\n\n    var tableFormatFinder = new BlockFormatFinder([{ tags: [TABLE] }]);\n\n    var TableCommand = InsertHtmlCommand.extend({\n        init: function(options) {\n            var o = $.extend({\n                postProcess: this.postProcess,\n                skipCleaners: true\n            }, options || {});\n\n            InsertHtmlCommand.fn.init.call(this, o);\n        },\n        _tableHtml: function(rows, columns) {\n            rows = rows || 1;\n            columns = columns || 1;\n            var columnHtml = template(columnTemplate)({ width: 100 / columns, content: Editor.emptyTableCellContent });\n            var rowHeight = 100 / rows;\n\n            return \"<table class='k-table' data-last>\" +\n                        new Array(rows + 1).join(\n                        \"<tr style='height:\" + rowHeight + \"%;'>\" +\n                            new Array(columns + 1).join(columnHtml) +\n                        \"</tr>\") +\n                   \"</table>\";\n        },\n\n        postProcess: function(editor, range) {\n            var insertedTable = $(\"table[data-last]\", editor.document).removeAttr(\"data-last\");\n\n            range.setStart(insertedTable.find(TD)[0], 0);\n            range.collapse(true);\n\n            editor.selectRange(range);\n        },\n\n        exec: function() {\n            var options = this.options;\n            options.html = this._tableHtml(options.rows, options.columns);\n\n            InsertHtmlCommand.fn.exec.call(this);\n        }\n    });\n\n    var PopupTool = Tool.extend({\n        initialize: function(ui, editor) {\n            var that = this;\n            var btn = $(\"<button>\" + editor.options.messages.tableWizard + \"</button>\");\n            var popup = $(this.options.popupTemplate).appendTo(\"body\").kendoPopup({\n                anchor: ui,\n                copyAnchorStyles: false,\n                open: this._open.bind(this),\n                activate: this._activate.bind(this),\n                close: this._close.bind(this)\n            }).data(\"kendoPopup\");\n\n            ui.on(\"click\", this._toggle.bind(this))\n              .on(\"keydown\", this._keydown.bind(this));\n\n            this._editor = editor;\n            this._popup = popup;\n\n            editor.tablePopup = this._popup;\n\n            var tableWizard = new Editor.TableWizardTool({\n                command: Editor.TableWizardCommand,\n                insertNewTable: true\n            });\n\n            registerTool(\"tableWizardInsert\", tableWizard);\n\n            btn.appendTo(popup.element);\n            btn.kendoButton({\n                icon: \"table-wizard\"\n            });\n\n            btn.on(\"click\", () => {\n                that._editor.exec(\"tableWizardInsert\");\n            });\n        },\n\n        popup: function() {\n            return this._popup;\n        },\n\n        _activate: $.noop,\n\n        _open: function() {\n            this._popup.options.anchor.addClass(ACTIVESTATE);\n        },\n\n        _close: function() {\n            this._popup.options.anchor.removeClass(ACTIVESTATE);\n        },\n\n        _keydown: function(e) {\n            var that = this,\n                keys = kendo.keys,\n                key = e.keyCode;\n\n            if (key == keys.ESC) {\n                that._popup.close();\n            } else if (key == keys.DOWN && e.altKey) {\n                that._popup.open();\n                that._setTableSize({ row: 1, col: 1 });\n            } else if (key === keys.ENTER) {\n                setTimeout(() => {\n                    that._setTableSize({ row: 1, col: 1 });\n                });\n            }\n        },\n\n        _toggle: function(e) {\n            var button = $(e.target).closest(\".k-tool\");\n\n            if (!button.hasClass(\"k-disabled\")) {\n                this.popup().toggle();\n            }\n        },\n\n        update: function(ui) {\n            var popup = this.popup();\n\n            if (popup.wrapper && popup.wrapper.css(\"display\") == \"block\") {\n                popup.close();\n            }\n\n            ui.removeClass(\"k-hover\");\n        },\n\n        destroy: function() {\n            if (this._popup) {\n                this._popup.destroy();\n            }\n        }\n    });\n\n    var InsertTableTool = PopupTool.extend({\n        init: function(options) {\n            this.cols = 8;\n            this.rows = 6;\n\n            PopupTool.fn.init.call(this, $.extend(options, {\n                command: TableCommand,\n                popupTemplate:\n                    \"<div class='k-ct-popup'>\" +\n                        \"<div>\" +\n                            new Array(this.cols * this.rows + 1).join(\"<span class='k-ct-cell k-disabled'></span>\") +\n                        \"</div>\" +\n                        \"<div class='k-status'></div>\" +\n                    \"</div>\"\n            }));\n        },\n\n        _activate: function() {\n            var that = this,\n                element = that._popup.element,\n                cells = element.find(\".k-ct-cell\"),\n                firstCell = cells.eq(0),\n                lastCell = cells.eq(cells.length - 1),\n                start = kendo.getOffset(firstCell),\n                end = kendo.getOffset(lastCell),\n                cols = that.cols,\n                rows = that.rows,\n                cellWidth, cellHeight;\n\n            element.find(\"*\").addBack().attr(\"unselectable\", \"on\");\n\n            end.left += lastCell[0].offsetWidth;\n            end.top += lastCell[0].offsetHeight;\n\n            cellWidth = (end.left - start.left) / cols;\n            cellHeight = (end.top - start.top) / rows;\n\n            function tableFromLocation(e) {\n                var w = $(window);\n                return {\n                    row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\n                    col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\n                };\n            }\n\n            element.autoApplyNS(NS)\n                .on(\"mousemove\", \".k-ct-cell\", function(e) {\n                    that._setTableSize(tableFromLocation(e));\n                })\n                .on(\"mouseleave\", \".k-ct-cell\", function() {\n                    that._setTableSize();\n                })\n                .on(\"down\", \".k-ct-cell\", function(e) {\n                    e.preventDefault();\n                    var touch = getTouches(e)[0];\n                    that._exec(tableFromLocation(touch.location));\n                });\n        },\n\n        _valid: function(size) {\n            return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\n        },\n\n        _exec: function(size) {\n            if (this._valid(size)) {\n                this._editor.exec(\"createTable\", {\n                    rows: size.row,\n                    columns: size.col\n                });\n                this._popup.close();\n            }\n        },\n\n        _setTableSize: function(size) {\n            var element = this._popup.element;\n            var status = element.find(\".k-status\");\n            var cells = element.find(\".k-ct-cell\");\n            var cols = this.cols;\n            var messages = this._editor.options.messages;\n\n            if (this._valid(size)) {\n                status.text(kendo.format(messages.createTableHint, size.row, size.col));\n\n                cells.each(function(i) {\n                    $(this).toggleClass(\n                        SELECTEDSTATE,\n                        i % cols < size.col && i / cols < size.row\n                    );\n                });\n            } else {\n                status.text(messages.createTable);\n                cells.removeClass(SELECTEDSTATE);\n            }\n        },\n\n        _keydown: function(e) {\n            var initiallyVisible = this._popup.visible();\n\n            PopupTool.fn._keydown.call(this, e);\n\n            if (!this._popup.visible()) {\n                return;\n            }\n\n            var keys = kendo.keys;\n            var key = e.keyCode;\n            var cells = this._popup.element.find(\".k-ct-cell\");\n            var focus = Math.max(cells.filter(\".k-selected\").last().index(), 0);\n            var selectedRows = Math.floor(focus / this.cols);\n            var selectedColumns = focus % this.cols;\n\n            var changed = false,\n                button;\n\n            if (key == keys.DOWN && !e.altKey) {\n                changed = true;\n                selectedRows++;\n            } else if (key == keys.UP) {\n                changed = true;\n                selectedRows--;\n            } else if (key == keys.RIGHT) {\n                changed = true;\n                selectedColumns++;\n            } else if (key == keys.LEFT) {\n                changed = true;\n                selectedColumns--;\n            } else if (key == keys.TAB) {\n                button = this._popup.element.find(\".k-button\");\n\n                if (button.length > 0) {\n                    changed = true;\n                    button.trigger(\"focus\");\n                }\n            }\n\n            var tableSize = {\n                row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\n                col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\n            };\n\n            if (key == keys.ENTER && initiallyVisible) {\n                this._exec(tableSize);\n            } else {\n                this._setTableSize(tableSize);\n            }\n\n            if (changed) {\n                e.preventDefault();\n                e.stopImmediatePropagation();\n            }\n        },\n\n        _open: function() {\n            var messages = this._editor.options.messages;\n\n            PopupTool.fn._open.call(this);\n\n            this.popup().element\n                .find(\".k-status\").text(messages.createTable).end()\n                .find(\".k-ct-cell\").removeClass(SELECTEDSTATE);\n        },\n\n        _close: function() {\n            PopupTool.fn._close.call(this);\n            this.popup().element.off(\".\" + NS);\n        }\n    });\n\n    var TableModificationCommand = Command.extend({\n        undo: function() {\n            var point = this.restorePoint;\n            point.restoreHtml();\n\n            $(this.editor.body).find(\".k-element-resize-handle-wrapper\")\n                .each(function(index,el) {\n                    el.remove();\n                });\n\n            this.editor.selectRange(point.toRange());\n        },\n        _clearColIndexAttr: function(table) {\n            dom.clearTableMappings(table, \"col-index\");\n        },\n        _mapColIndices: function(table) {\n            dom.reMapTableColumns(table, \"col-index\");\n        },\n        _findRowSpanCell: function(parent, rowIndex, colIndex) {\n            var row, cell;\n\n            for (var i = rowIndex; i >= 0; i--) {\n                row = parent.rows[i];\n                cell = $(row).find(\"[col-index=\" + colIndex + \"]\");\n\n                if (cell.length) {\n                    return cell;\n                }\n            }\n        },\n        _resetElementResizing: function(editor) {\n            editor._destroyResizings();\n            editor._initializeColumnResizing();\n            editor._initializeRowResizing();\n            editor._initializeElementResizing();\n        },\n        _findNextTdInRow: function(row, colIndex) {\n            var lastTd = row.find(\"td:last-child\"),\n                lastIndex = parseInt(lastTd.attr(\"col-index\"), 10) + lastTd.prop(\"colSpan\") - 1,\n                td;\n\n            for (var i = colIndex; i <= lastIndex; i++) {\n                td = row.find(\"[col-index=\" + i + \"]\");\n                if (td.length) {\n                    return td;\n                }\n            }\n        },\n        _adjustColgroups: function(row, table) {\n            var colElements = table.getElementsByTagName(COL),\n                colgroupElements = table.getElementsByTagName(COLGROUP),\n                cells = row.cells,\n                numberOfCells = cells.length,\n                i, colgroup, cell;\n\n            while (colElements.length > 0) {\n                colElements[0].remove();\n            }\n            while (colgroupElements.length > 0) {\n                colgroupElements[0].remove();\n            }\n\n            for (i = numberOfCells - 1; i >= 0; i--) {\n                cell = cells[i];\n                if (cell.getAttribute(SCOPE) === COLGROUP) {\n                    colgroup = dom.createEmptyNode(this.editor.document, COLGROUP);\n                    colgroup.setAttribute(\"span\", cell.getAttribute(COLSPAN));\n                    table.prepend(colgroup);\n                } else {\n                    table.prepend(dom.createEmptyNode(this.editor.document, COL));\n                }\n            }\n        },\n        _associateHeaderIds: function(table) {\n            dom.clearTableMappings(table, \"col-index\");\n            dom.reMapTableColumns(table, \"col-index\");\n            $(table).find(\"th, td\").removeAttr(\"id headers\");\n            dom.associateWithIds(table);\n        },\n        _getNumberOfColumns: function(table) {\n            return dom._getNumberOfColumns(table, \"td, th\");\n        }\n    });\n\n    var InsertRowCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(true),\n                td = dom.closest(range.endContainer, [TD, TH]),\n                table = dom.closest(td, TABLE),\n                position = this.options.position || \"after\",\n                cellCount, row, cell,\n                newRow, rowIndex, rowSpanIndex, createdCell;\n\n            if (!table || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            row = td.parentNode;\n            rowIndex = dom.findNodeIndex(row, true);\n\n            if (td.rowSpan > 1 && position === \"after\") {\n                row = table.rows[rowIndex + td.rowSpan - 1];\n            }\n\n            cellCount = this._getNumberOfColumns(table);\n            newRow = row.cloneNode(true);\n            $(newRow).empty();\n\n            for (var i = 0; i < cellCount; i = i + cell.prop(\"colSpan\")) {\n                cell = $(row).find(\"[col-index=\" + i + \"]\");\n\n                if (cell.length) {\n                    if (cell.prop(\"rowSpan\") > 1 && position === \"after\" && cell) {\n                        cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                    } else {\n                        this._appendCell(newRow, cell);\n                    }\n                } else {\n                    rowIndex = dom.findNodeIndex(row, true);\n                    cell = this._findRowSpanCell(row.parentElement, rowIndex, i);\n                    rowSpanIndex = cell.closest(TR).index();\n\n                    if (rowSpanIndex + cell.prop(\"rowSpan\") - 1 === rowIndex && position === \"after\") {\n                        this._appendCell(newRow, cell);\n                    } else {\n                        cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                    }\n                }\n\n                createdCell = $(newRow).find(\"[col-index=\" + i + \"]\");\n                if (createdCell.attr(SCOPE) === ROWGROUP && !createdCell.attr(ROWSPAN)) {\n                    createdCell.attr(SCOPE, ROW);\n                }\n            }\n\n            if (position == \"before\") {\n                dom.insertBefore(newRow, row);\n            } else {\n                dom.insertAfter(newRow, row);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n\n            this._resetElementResizing(this.editor);\n        },\n        _appendCell: function(row, cell) {\n            var newCell;\n\n            newCell = cell.clone();\n            newCell.html(Editor.emptyTableCellContent);\n            newCell.removeAttr(ROWSPAN);\n            newCell.appendTo(row);\n        }\n    });\n\n    var InsertColumnCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(true),\n                td = dom.closest(range.endContainer, [TD, TH]),\n                table = dom.closest(td, TABLE),\n                colElements = table.getElementsByTagName(COL),\n                colgroupElements = table.getElementsByTagName(COLGROUP),\n                columnIndex,\n                i,\n                rows = table && table.rows,\n                cell,\n                newCell,\n                position = this.options.position || \"after\";\n\n\n            if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            columnIndex = parseInt(td.getAttribute(\"col-index\"),10);\n\n            if (td.colSpan > 1 && position === \"after\") {\n                td.setAttribute(\"col-index\", columnIndex + td.colSpan - 1);\n                columnIndex = columnIndex + td.colSpan - 1;\n            }\n\n            for (i = 0; i < rows.length; i++) {\n                cell = this._processForColSpan(rows[i], columnIndex, position, td);\n\n                if (!cell) {\n                    continue;\n                }\n\n                newCell = cell.cloneNode();\n                newCell.innerHTML = Editor.emptyTableCellContent;\n                newCell.removeAttribute(COLSPAN);\n\n                if (newCell.getAttribute(SCOPE) && newCell.getAttribute(SCOPE) === COLGROUP) {\n                    newCell.setAttribute(SCOPE, COL);\n                }\n\n                if (position == \"before\") {\n                    dom.insertBefore(newCell, cell);\n                } else {\n                    dom.insertAfter(newCell, cell);\n                }\n\n                this._resizeCells(newCell, cell);\n            }\n\n            if (colElements.length > 0 || colgroupElements.length > 0) {\n                this._adjustColgroups(rows[0], table);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n\n            this._resetElementResizing(this.editor);\n        },\n        _processForColSpan: function(row, columnIndex, position, selectedCell) {\n            var cell,\n                colSpanEffect,\n                index = columnIndex - 1;\n\n            cell = $(row).find(\"[col-index=\" + columnIndex + \"]\")[0];\n\n            if (cell && cell.colSpan > 1 && position === \"after\" && cell !== selectedCell) {\n                cell.colSpan += 1;\n                return;\n            }\n\n            if (cell) {\n                return cell;\n            }\n\n            for (index; index >= 0; index--) {\n                cell = $(row).find(\"[col-index=\" + index + \"]\")[0];\n\n                if (cell && cell.colSpan > 1) {\n                    break;\n                }\n            }\n\n            if (!cell) {\n                return;\n            }\n\n            colSpanEffect = parseInt(cell.getAttribute(\"col-index\"),10) + cell.colSpan - 1;\n\n            if (colSpanEffect === columnIndex && position === \"after\") {\n                return cell;\n            } else if (columnIndex <= colSpanEffect) {\n                cell.setAttribute(COLSPAN, cell.colSpan + 1);\n            }\n        },\n        _resizeCells: function(newCell, cell) {\n            var width = newCell.style.width,\n            parsedWidth, unit, calculatedWidth;\n\n            if (!width) {\n                return;\n            }\n\n            parsedWidth = parseFloat(width);\n            unit = width.slice(parsedWidth.toString().length);\n            calculatedWidth = (parsedWidth / 2) + unit;\n\n            newCell.style.width = calculatedWidth;\n            cell.style.width = calculatedWidth;\n        }\n    });\n\n    var DeleteRowCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange();\n            var rows = RangeUtils.mapAll(range, function(node) {\n                return $(node).closest(TR)[0];\n            });\n            var td = dom.closest(range.endContainer, [TD, TH]);\n            var row = rows[0];\n            var rowSpan = td ? td.rowSpan : 1;\n            var rowIndex = $(rows[0]).index();\n            var table = dom.closest(row, TABLE);\n            var rowParent = row.parentElement;\n            var focusElement;\n\n            if (!table || (this.immutables() && Editor.Immutables.immutableParent(row))) {\n                this.releaseRange(range);\n                return;\n            }\n\n            for (var x = 0; x < rowSpan; x++) {\n                if (rows.indexOf(rowParent.rows[rowIndex + x]) < 0) {\n                    rows.push(rowParent.rows[rowIndex + x]);\n                }\n            }\n\n            if (table.rows.length <= rows.length) {\n                focusElement = dom.next(table);\n                if (!focusElement || dom.insignificant(focusElement)) {\n                    focusElement = dom.prev(table);\n                }\n\n                if (focusElement && focusElement.rows) {\n                    focusElement = focusElement.rows[0].cells[0];\n                }\n\n                dom.remove(table);\n                this._resetElementResizing(this.editor);\n            } else if (rowParent.rows.length <= rows.length) {\n                focusElement = rowParent.nextSibling;\n\n                if (!focusElement) {\n                    focusElement = rowParent.previousSibling;\n                }\n\n                dom.remove(rowParent);\n            } else {\n                this._mapColIndices(table);\n\n                for (var i = 0; i < rows.length; i++) {\n                    row = rows[i];\n                    dom.removeTextSiblings(row);\n                    focusElement = dom.next(row) || dom.prev(row);\n                    focusElement = focusElement.cells[0];\n\n                    // IE needs to focus the new row before removing the old one\n                    this._focusElement(range, focusElement);\n                    focusElement = null;\n\n                    this._handleRowSpanCells(table, row);\n\n                    dom.remove(row);\n                }\n\n                this._clearColIndexAttr(table);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            } else if (dom.is(rowParent, THEAD) && $(table).find(\"[scope]\").length > 0) {\n                this._adjustColgroups(rowParent.rows[0], table);\n            }\n\n            if (focusElement) {\n                this._focusElement(range, focusElement);\n            }\n\n            this._resetElementResizing(this.editor);\n        },\n        _focusElement: function(range, node) {\n            range.setStart(node, 0);\n            range.collapse(true);\n            this.editor.selectRange(range);\n        },\n        _handleRowSpanCells: function(table, row) {\n            var index, cell, adjacentCell, nextRow, rowIndex = dom.findNodeIndex(row, true),\n                firstRow = table.rows[0],\n                lastCell = firstRow.cells[firstRow.cells.length - 1],\n                lastIndex = parseInt(lastCell.getAttribute(\"col-index\"),10) + lastCell.colSpan - 1;\n\n            for (index = 0; index <= lastIndex; index = index + cell.prop(\"colSpan\")) {\n                cell = $(row).find(\"[col-index=\" + index + \"]\");\n\n                if (cell.length && cell.prop(\"rowSpan\") > 1) {\n                    nextRow = table.rows[rowIndex + 1];\n                    adjacentCell = $(nextRow).find(\"[col-index=\" + (index + 1) + \"]\");\n\n                    if (adjacentCell.length) {\n                        adjacentCell.before(cell);\n                    } else {\n                        $(nextRow).append(cell);\n                    }\n                    this._reduceRowSpan(cell);\n                }\n\n                if (!cell.length) {\n                    cell = this._findRowSpanCell(row.parentElement, rowIndex, index);\n                    this._reduceRowSpan(cell);\n                }\n            }\n        },\n        _reduceRowSpan: function(td) {\n            var rowSpanValue = td.prop(\"rowSpan\") - 1;\n\n            if (rowSpanValue <= 1) {\n                td.removeAttr(ROWSPAN);\n                if (td.attr(SCOPE) === ROWGROUP) {\n                    td.attr(SCOPE, ROW);\n                }\n            } else {\n                td.attr(ROWSPAN, rowSpanValue);\n            }\n        }\n    });\n\n    var DeleteColumnCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(),\n                td = dom.closest(range.endContainer, [TD, TH]),\n                table = dom.closest(td, TABLE),\n                rows = table && table.rows,\n                columnIndex = dom.findNodeIndex(td, true),\n                columnCount = rows && rows[0].cells.length,\n                colElements = table.getElementsByTagName(COL),\n                colgroupElements = table.getElementsByTagName(COLGROUP),\n                focusElement, i, cell, x;\n\n            if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n                this.releaseRange(range);\n                return;\n            }\n\n            if (columnCount == 1 || td.colSpan == columnCount) {\n                focusElement = dom.next(table);\n                if (!focusElement || dom.insignificant(focusElement)) {\n                    focusElement = dom.prev(table);\n                }\n\n                if (focusElement && focusElement.rows) {\n                    focusElement = focusElement.rows[0].cells[0];\n                }\n\n                dom.remove(table);\n                this._resetElementResizing(this.editor);\n            } else {\n                dom.removeTextSiblings(td);\n\n                focusElement = dom.next(td) || dom.prev(td);\n\n                this._mapColIndices(table);\n\n                columnIndex = parseInt(td.getAttribute(\"col-index\"), 10);\n\n                for (x = 0; x < td.colSpan; x++) {\n                    for (i = 0; i < rows.length; i = i + (cell.prop(\"rowSpan\") || 1)) {\n                        cell = $(rows[i]).find(\"[col-index=\" + (columnIndex + x) + \"]\");\n\n                        if (cell.length && cell.prop(\"colSpan\") <= 1) {\n                            cell.remove();\n                        } else {\n                            this._handleColSpanCells(rows[i], columnIndex + x);\n                        }\n                    }\n                }\n\n                this._clearColIndexAttr(table);\n            }\n\n            if (colElements.length > 0 || colgroupElements.length > 0) {\n                this._adjustColgroups(rows[0], table);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            if (focusElement) {\n                range.setStart(focusElement, 0);\n                range.collapse(true);\n                this.editor.selectRange(range);\n            }\n\n            this._resetElementResizing(this.editor);\n        },\n        _handleColSpanCells: function(row, colIndex) {\n            var cell = $(row).find(\"[col-index=\" + colIndex + \"]\");\n\n            if (cell.length && cell.prop(\"colSpan\") > 1) {\n                var clone = cell.clone(true);\n                cell.after(clone);\n                this._reduceColSpan(clone);\n                clone.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n                cell.remove();\n                return;\n            }\n\n            for (var i = colIndex; i >= 0; i--) {\n                cell = $(row).find(\"[col-index=\" + i + \"]\");\n\n                if (cell.length) {\n                    this._reduceColSpan(cell);\n                    cell.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n                    return;\n                }\n            }\n        },\n        _reduceColSpan: function(td) {\n            var colSpanValue = td.prop(\"colSpan\") - 1;\n\n            if (colSpanValue <= 1) {\n                td.removeAttr(COLSPAN);\n                if (td.attr(SCOPE) === COLGROUP) {\n                    td.attr(SCOPE, COL);\n                }\n            } else {\n                td.attr(COLSPAN, colSpanValue);\n            }\n        }\n    });\n\n    var MergeCellsHorizontallyCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(),\n                td = dom.closest(range.endContainer, [TD, TH]),\n                table, row, columnIndex, nextTd, colspan;\n\n                if (!td) {\n                    this.releaseRange(range);\n                    return;\n                }\n\n                table = dom.closest(td, TABLE);\n                row = td.parentNode;\n                columnIndex = dom.findNodeIndex(td, true);\n                nextTd = row.children[columnIndex + 1];\n\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n\n                this._mapColIndices(table);\n\n                columnIndex = parseInt($(td).attr(\"col-index\"), 10);\n                nextTd = $(row).find(\"[col-index=\" + (columnIndex + 1 + this._getColspan(td) - 1) + \"]\").get(0);\n\n                if (!nextTd || nextTd.rowSpan !== td.rowSpan || td.tagName !== nextTd.tagName) {\n                    this._clearColIndexAttr(table);\n                    this.releaseRange(range);\n                    return;\n                }\n\n                colspan = this._getColspan(td) + this._getColspan(nextTd);\n\n                $(td).prop(COLSPAN, colspan)\n                     .append(dom.emptyNode(nextTd) ? \"\" : \"<br/>\" + nextTd.innerHTML);\n\n                $(td).width(td.offsetWidth);\n                $(nextTd).remove();\n\n                if (td.getAttribute(SCOPE) === COL) {\n                    td.setAttribute(SCOPE, COLGROUP);\n                }\n                if (td.getAttribute(SCOPE) === COLGROUP) {\n                    this._adjustColgroups(row, table);\n                }\n\n                if ($(table).find(\"[headers]\").length > 0) {\n                    this._associateHeaderIds(table);\n                }\n\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                this._resetElementResizing(this.editor);\n        },\n        _getColspan: function(td) {\n            return parseInt(td.getAttribute(COLSPAN), 10) || 1;\n        }\n    });\n\n    var MergeCellsVerticallyCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(),\n                td = dom.closest(range.endContainer, [TD, TH]),\n                tr, parent, table, columnIndex, rowIndex, targetRow, bottomTd;\n\n                if (!td) {\n                    this.releaseRange(range);\n                    return;\n                }\n\n                tr = dom.closest(td, TR);\n                parent = dom.closest(td, [THEAD, TBODY]);\n                table = dom.closest(td, TABLE);\n                columnIndex = dom.findNodeIndex(td, true);\n                rowIndex = dom.findNodeIndex(tr, true);\n\n                if (rowIndex + 1 === parent.rows.length) {\n                    this.releaseRange(range);\n                    return;\n                }\n\n                targetRow = parent.rows[rowIndex + this._getRowspan(td)];\n                bottomTd = targetRow && targetRow.children[columnIndex];\n\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n\n                this._mapColIndices(table);\n\n                columnIndex = $(td).attr(\"col-index\");\n                bottomTd = $(targetRow).find(\"[col-index=\" + columnIndex + \"]\").get(0);\n\n                if (!bottomTd || bottomTd.colSpan !== td.colSpan || td.tagName !== bottomTd.tagName) {\n                    this._clearColIndexAttr(table);\n                    this.releaseRange(range);\n                    return;\n                }\n\n                $(td).prop(ROWSPAN, this._getRowspan(td) + this._getRowspan(bottomTd))\n                     .append(dom.emptyNode(bottomTd) ? \"\" : \"<br/>\" + bottomTd.innerHTML);\n\n                if (td.getAttribute(SCOPE) === ROW) {\n                    td.setAttribute(SCOPE, ROWGROUP);\n                }\n\n                $(bottomTd).remove();\n\n                if ($(table).find(\"[headers]\").length > 0) {\n                    this._associateHeaderIds(table);\n                }\n\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n        },\n        _getRowspan: function(td) {\n            return parseInt(td.getAttribute(ROWSPAN), 10) || 1;\n        }\n    });\n\n    var SplitCellCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(),\n                type = this.options.type,\n                attr = type === \"row\" ? COLSPAN : ROWSPAN,\n                td = dom.closest(range.endContainer, [TD, TH]),\n                parent = dom.closest(td, [THEAD, TBODY]),\n                table = dom.closest(td, TABLE),\n                emptyTd = dom.createEmptyNode(this.editor.document, td.nodeName.toLowerCase());\n\n            if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            if (type === \"row\" && $(td).is(\"[\" + attr + \"]\")) {\n                this._splitCellHorizontally(td, parent, attr, emptyTd);\n            } else if (type === \"column\" && $(td).is(\"[\" + attr + \"]\")) {\n                this._splitCellVertically(td, parent, attr, emptyTd);\n            }\n\n            if ($(td).prop(attr.toLowerCase()) <= 1) {\n                $(td).removeAttr(attr);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n        },\n        _getRowspanValue: function(td) {\n            return parseInt(td.getAttribute(ROWSPAN), 10);\n        },\n        _getColspanValue: function(td) {\n            return parseInt(td.getAttribute(COLSPAN), 10);\n        },\n        _splitCellHorizontally: function(td, parent, attr, emptyTd) {\n            var rowSpan = td.rowSpan,\n                colSpan = td.colSpan,\n                tdToAdd = $(emptyTd),\n                colSpanResult = Math.floor(colSpan / 2);\n\n                if (colSpanResult > 1) {\n                    tdToAdd.attr(COLSPAN, colSpanResult);\n                }\n\n                if (rowSpan > 1) {\n                    tdToAdd.attr(ROWSPAN, rowSpan);\n                }\n\n                $(td).prop(attr, colSpan - colSpanResult)\n                    .after(tdToAdd);\n\n                $(td).width(td.offsetWidth);\n                tdToAdd.width(tdToAdd[0].offsetWidth);\n\n                if (td.hasAttribute(SCOPE)) {\n                    if (td.getAttribute(SCOPE) === COLGROUP) {\n                        tdToAdd.attr(SCOPE, COL);\n                        if (!td.getAttribute(COLSPAN) || td.getAttribute(COLSPAN) === \"1\") {\n                            td.setAttribute(SCOPE, COL);\n                        }\n\n                        this._adjustColgroups(td.parentNode, parent.parentNode);\n                    } else {\n                        tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                    }\n                }\n        },\n        _splitCellVertically: function(td, parent, attr, emptyTd) {\n            var tr = dom.closest(td,TR),\n                columnIndex = parseInt($(td).attr(\"col-index\"), 10),\n                rowIndex = dom.findNodeIndex(tr, true),\n                rowSpan = td.rowSpan,\n                colSpan = td.colSpan,\n                rowSpanResult = Math.floor(rowSpan / 2),\n                targetRow = $(parent).find(TR).eq(rowIndex + rowSpan - rowSpanResult),\n                nextTd = this._findNextTdInRow(targetRow, columnIndex + colSpan),\n                tdToAdd = $(emptyTd);\n\n                if (rowSpanResult > 1) {\n                    tdToAdd.attr(ROWSPAN, rowSpanResult);\n                }\n                if (colSpan > 1) {\n                    tdToAdd.attr(COLSPAN, colSpan);\n                }\n\n                if (nextTd && nextTd.length) {\n                    nextTd.before(tdToAdd);\n                } else {\n                    targetRow.append(tdToAdd);\n                }\n\n                $(td).prop(attr, rowSpan - rowSpanResult);\n\n                if (td.hasAttribute(SCOPE)) {\n                    if (td.getAttribute(SCOPE) === ROWGROUP) {\n                        tdToAdd.attr(SCOPE, ROW);\n                        if (!td.getAttribute(ROWSPAN) || td.getAttribute(ROWSPAN) === \"1\") {\n                            td.setAttribute(SCOPE, ROW);\n                        }\n                    } else {\n                        tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                    }\n                }\n        }\n    });\n\n    var TableModificationTool = Tool.extend({\n        command: function(options) {\n            var commandsMap = {\n                row: {\n                    insert: InsertRowCommand,\n                    \"delete\": DeleteRowCommand,\n                    merge: MergeCellsHorizontallyCommand,\n                    split: SplitCellCommand\n                },\n                column: {\n                    insert: InsertColumnCommand,\n                    \"delete\": DeleteColumnCommand,\n                    merge: MergeCellsVerticallyCommand,\n                    split: SplitCellCommand\n                }\n            };\n\n            options = extend(options, this.options);\n            options.action = options.action || \"insert\";\n\n            return new commandsMap[options.type][options.action](options);\n        },\n\n        update: function(ui, nodes) {\n            var isFormatted = !tableFormatFinder.isFormatted(nodes),\n                toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n            if (isFormatted === true) {\n                toolbar.hide(ui);\n            } else {\n                toolbar.show(ui);\n            }\n        }\n    });\n\n    var TableFormatCommand = FormatCommand.extend({\n        exec: function() {\n            var that = this;\n            var editor = that.editor;\n\n            FormatCommand.fn.exec.call(this);\n\n            if (editor.elementResizing) {\n                editor.elementResizing._showResizeHandles();\n            }\n        }\n    });\n\n    // var tableAlignFormatFinder = BlockFormatFinder.extend({\n\n    // });\n\n    var TableFormatTool = BlockFormatTool.extend({\n        update: function(ui, nodes) {\n            var isTable = !tableFormatFinder.isFormatted(nodes),\n                isFormatted = this.options.finder.isFormatted(nodes, this.isTable),\n                toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n            if (toolbar) {\n                toolbar.toggle(ui, isFormatted);\n            }\n\n            if (isTable === true) {\n                toolbar.hide(ui);\n            } else {\n                toolbar.show(ui);\n            }\n        },\n        command: function(commandArguments) {\n            var that = this;\n\n            return new TableFormatCommand(extend(commandArguments, {\n                formatter: that.options.formatter\n            }));\n        },\n        isTable: function(node) {\n            return dom.is(node, \"table\");\n        }\n    });\n\n    extend(kendo.ui.editor, {\n        PopupTool: PopupTool,\n        TableCommand: TableCommand,\n        InsertTableTool: InsertTableTool,\n        TableFormatTool: TableFormatTool,\n        TableFormatCommand: TableFormatCommand,\n        TableModificationTool: TableModificationTool,\n        InsertRowCommand: InsertRowCommand,\n        InsertColumnCommand: InsertColumnCommand,\n        DeleteRowCommand: DeleteRowCommand,\n        DeleteColumnCommand: DeleteColumnCommand,\n        MergeCellsHorizontallyCommand: MergeCellsHorizontallyCommand,\n        MergeCellsVerticallyCommand: MergeCellsVerticallyCommand,\n        SplitCellCommand: SplitCellCommand\n    });\n\n\n    registerTool(\"createTable\", new InsertTableTool({ ui: { popup: true, overflow: \"never\" } }));\n\n    registerTool(\"addColumnLeft\", new TableModificationTool({ type: \"column\", position: \"before\" }));\n    registerTool(\"addColumnRight\", new TableModificationTool({ type: \"column\" }));\n    registerTool(\"addRowAbove\", new TableModificationTool({ type: \"row\", position: \"before\" }));\n    registerTool(\"addRowBelow\", new TableModificationTool({ type: \"row\" }));\n    registerTool(\"deleteRow\", new TableModificationTool({ type: \"row\", action: \"delete\" }));\n    registerTool(\"deleteColumn\", new TableModificationTool({ type: \"column\", action: \"delete\" }));\n    registerTool(\"mergeCellsHorizontally\", new TableModificationTool({ type: \"row\", action: \"merge\" }));\n    registerTool(\"mergeCellsVertically\", new TableModificationTool({ type: \"column\", action: \"merge\" }));\n    registerTool(\"splitCellHorizontally\", new TableModificationTool({ type: \"row\", action: \"split\" }));\n    registerTool(\"splitCellVertically\", new TableModificationTool({ type: \"column\", action: \"split\" }));\n\n    registerFormat(\"tableAlignLeft\", [\n        { tags: [\"table\"], attr: { style: { marginLeft: \"\", marginRight: \"auto\" } } },\n        { tags: [\"table\"], attr: { align: \"left\" } }\n    ]);\n    registerTool(\"tableAlignLeft\", new TableFormatTool({\n        format: formats.tableAlignLeft,\n        ui: {\n            togglable: true,\n            group: \"tableAlign\"\n        }\n    }));\n\n    registerFormat(\"tableAlignCenter\", [\n        { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"auto\" } } },\n        { tags: [\"table\"], attr: { align: \"center\" } }\n    ]);\n    registerTool(\"tableAlignCenter\", new TableFormatTool({\n        format: formats.tableAlignCenter,\n        ui: {\n            togglable: true,\n            group: \"tableAlign\"\n        }\n    }));\n\n    registerFormat(\"tableAlignRight\", [\n        { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"\" } } },\n        { tags: [\"table\"], attr: { align: \"right\" } }\n    ]);\n    registerTool(\"tableAlignRight\", new TableFormatTool({\n        format: formats.tableAlignRight,\n        ui: {\n            togglable: true,\n            group: \"tableAlign\"\n        }\n    }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            Class = kendo.Class,\n            editorNS = kendo.ui.editor,\n            RangeUtils = editorNS.RangeUtils,\n            dom = editorNS.Dom,\n            RestorePoint = editorNS.RestorePoint,\n            Marker = editorNS.Marker,\n            browser = kendo.support.browser,\n            extend = $.extend;\n\n    var Clipboard = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n            var pasteCleanup = editor.options.pasteCleanup;\n            this.nonSplittableTagsOnPaste = editor.options.nonSplittableTagsOnPaste || [];\n            this.cleaners = [\n                new ScriptCleaner(pasteCleanup),\n                new TabCleaner(pasteCleanup),\n                new MSWordFormatCleaner(pasteCleanup),\n                new WebkitFormatCleaner(pasteCleanup),\n                new HtmlTagsCleaner(pasteCleanup),\n                new HtmlAttrCleaner(pasteCleanup),\n                new HtmlContentCleaner(pasteCleanup),\n                new CustomCleaner(pasteCleanup) //always keep at end\n            ];\n        },\n\n        htmlToFragment: function(html) {\n            var editor = this.editor,\n                doc = editor.document,\n                container = dom.create(doc, 'div'),\n                fragment = doc.createDocumentFragment();\n\n            container.innerHTML = html;\n\n            while (container.firstChild) {\n                fragment.appendChild(container.firstChild);\n            }\n\n            return fragment;\n        },\n\n        isBlock: function(html) {\n            return (/<(div|p|ul|ol|table|h[1-6])/i).test(html);\n        },\n\n        _startModification: function() {\n            var range;\n            var restorePoint;\n            var editor = this.editor;\n\n            if (this._inProgress) {\n                return;\n            }\n\n            this._inProgress = true;\n\n            range = editor.getRange();\n            restorePoint = new RestorePoint(range, editor.body);\n\n            dom.persistScrollTop(editor.document);\n\n            return { range: range, restorePoint: restorePoint };\n        },\n\n        _endModification: function(modificationInfo) {\n            editorNS._finishUpdate(this.editor, modificationInfo.restorePoint);\n\n            this.editor._selectionChange();\n\n            this._inProgress = false;\n        },\n\n        _contentModification: function(before, after) {\n            var that = this;\n            var editor = that.editor;\n            var modificationInfo = that._startModification();\n\n            if (!modificationInfo) {\n                return;\n            }\n\n            before.call(that, editor, modificationInfo.range);\n\n            setTimeout(function() {\n                after.call(that, editor, modificationInfo.range);\n\n                that._endModification(modificationInfo);\n            });\n        },\n\n        _removeBomNodes: function(range) {\n            var nodes = RangeUtils.textNodes(range);\n\n            for (var i = 0; i < nodes.length; i++) {\n                nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue) || nodes[i].nodeValue;\n            }\n        },\n\n        _onBeforeCopy: function(range) {\n            var marker = new Marker();\n            marker.add(range);\n\n            this._removeBomNodes(range);\n\n            marker.remove(range);\n\n            this.editor.selectRange(range);\n        },\n\n        oncopy: function() {\n            this._onBeforeCopy(this.editor.getRange());\n        },\n\n        oncut: function() {\n            this._onBeforeCopy(this.editor.getRange());\n            this._contentModification($.noop, $.noop);\n        },\n\n        _fileToDataURL: function(blob) {\n            var deferred = $.Deferred();\n\n            var reader = new FileReader();\n\n            if (!(blob instanceof window.File) && blob.getAsFile) {\n                blob = blob.getAsFile();\n            }\n\n            reader.onload = deferred.resolve.bind(deferred);\n\n            reader.readAsDataURL(blob);\n\n            return deferred.promise();\n        },\n\n        _triggerPaste: function(html, options) {\n            var args = { html: html || \"\" };\n\n            args.html = args.html.replace(/\\ufeff/g, \"\");\n\n            this.editor.trigger(\"paste\", args);\n\n            this.paste(args.html, options || {});\n        },\n\n        _handleImagePaste: function(e) {\n            if (!('FileReader' in window) || (browser.msie && browser.version > 10)) {\n                return;\n            }\n\n            var clipboardData = e.clipboardData || e.originalEvent.clipboardData ||\n                        window.clipboardData || {};\n\n            var items = clipboardData.items || clipboardData.files;\n\n            return this._insertImages(items);\n        },\n\n        _insertImages: function(items) {\n            if (!items) {\n                return;\n            }\n\n            var images = $.grep(items, function(item) { return (/^image\\//i).test(item.type); });\n            var html = $.grep(items, function(item) { return (/^text\\/html/i).test(item.type); });\n\n            if (html.length || !images.length) {\n                return;\n            }\n\n            var modificationInfo = this._startModification();\n\n            if (!modificationInfo) {\n                return;\n            }\n\n            $.when.apply($, $.map(images, this._fileToDataURL))\n                .done((function() {\n                    var results = Array.prototype.slice.call(arguments);\n                    var html = $.map(results, function(e) {\n                        return '<img src=\"' + e.target.result + '\" />';\n                    }).join(\"\");\n\n                    this._triggerPaste(html);\n\n                    this._endModification(modificationInfo);\n                }).bind(this));\n\n            return true;\n        },\n\n        onpaste: function(e) {\n            if (this.editor.body.contentEditable === \"false\") {\n                return;\n            }\n\n            if (this._handleImagePaste(e)) {\n                e.preventDefault();\n                return;\n            }\n\n            this.expandImmutablesIn();\n\n            this._contentModification(\n                function beforePaste(editor, range) {\n                    var clipboardNode = dom.create(editor.document, 'div', {\n                            className: 'k-paste-container',\n                            innerHTML: \"\\ufeff\"\n                        });\n                    var browser = kendo.support.browser;\n                    var body = editor.body;\n\n                    this._decoreateClipboardNode(clipboardNode, body);\n\n                    body.appendChild(clipboardNode);\n\n                    //Browser scrolls to clipboardNode\n                    if (browser.webkit) {\n                        this._moveToCaretPosition(clipboardNode, range);\n                    }\n\n                    // text ranges are slow in IE10-, DOM ranges are buggy in IE9-10\n                    if (browser.msie && browser.version < 11) {\n                        e.preventDefault();\n                        var r = editor.createRange();\n                        r.selectNodeContents(clipboardNode);\n                        editor.selectRange(r);\n                        var textRange = editor.document.body.createTextRange();\n                        textRange.moveToElementText(clipboardNode);\n                        $(body).off('paste');\n                        textRange.execCommand('Paste');\n                        $(body).on('paste', this.onpaste.bind(this));\n                    } else {\n                        var clipboardRange = editor.createRange();\n                        clipboardRange.selectNodeContents(clipboardNode);\n                        editor.selectRange(clipboardRange);\n                    }\n\n                    range.deleteContents();\n                },\n                function afterPaste(editor, range) {\n                    var html = \"\", containers;\n\n                    editor.selectRange(range);\n\n                    containers = $(editor.body).children(\".k-paste-container\");\n\n                    containers.each(function() {\n                        var lastChild = this.lastChild;\n\n                        if (lastChild && dom.is(lastChild, 'br')) {\n                            dom.remove(lastChild);\n                        }\n\n                        html += this.innerHTML;\n                    });\n\n                    containers.remove();\n\n                    this._triggerPaste(html, { clean: true });\n                }\n            );\n        },\n        ondragover: function(e) {\n            if (browser.msie || browser.edge) {\n                e.stopPropagation();\n                e.preventDefault();\n            }\n        },\n        ondrop: function(e) {\n            if (!('FileReader' in window)) {\n                return;\n            }\n\n            var dataTransfer = (e.originalEvent || e).dataTransfer || {};\n            var items = dataTransfer.items || dataTransfer.files;\n\n            if (this._insertImages(items)) {\n                e.preventDefault();\n            }\n        },\n        _decoreateClipboardNode: function(node, body) {\n            if (!browser.msie && !browser.webkit) {\n                return;\n            }\n\n            node = $(node);\n            node.css({\n                borderWidth: \"0px\",\n                width: \"0px\",\n                height: \"0px\",\n                overflow: \"hidden\",\n                margin: \"0\",\n                padding: \"0\"\n            });\n\n            if (browser.msie) {\n                //node inherits BODY styles and this causes the browser to add additional\n                var documentElement = $(body.ownerDocument.documentElement);\n\n                node.css({\n                    fontVariant: \"normal\",\n                    fontWeight: \"normal\",\n                    lineSpacing: \"normal\",\n                    lineHeight: \"normal\",\n                    textDecoration: \"none\"\n                });\n                var color = documentElement.css(\"color\");\n                if (color) {\n                    node.css(\"color\", color);\n                }\n                var fontFamily = documentElement.css(\"fontFamily\");\n                if (fontFamily) {\n                    node.css(\"fontFamily\", fontFamily);\n                }\n                var fontSize = documentElement.css(\"fontSize\");\n                if (fontSize) {\n                    node.css(\"fontSize\", fontSize);\n                }\n            }\n        },\n        _moveToCaretPosition: function(node, range) {\n            var that = this;\n            var body = that.editor.body;\n            var nodeOffset = dom.offset(node, body);\n            var caretOffset = that._caretOffset(range, body);\n            var translateX = caretOffset.left - nodeOffset.left;\n            var translateY = caretOffset.top - nodeOffset.top;\n            var translate = \"translate(\" + translateX + \"px,\" + translateY + \"px)\";\n\n            $(node).css({\n                \"-webkit-transform\": translate,\n                \"transform\": translate\n            });\n        },\n        _caretOffset: function(range, body) {\n            var editor = this.editor;\n            var caret = dom.create(editor.document, 'span', { innerHTML: \"\\ufeff\" });\n            var startContainer = range.startContainer;\n            var rangeChanged;\n\n            if (range.collapsed) {\n                var isStartTextNode = dom.isDataNode(startContainer);\n                if (isStartTextNode && (dom.isBom(startContainer) || range.startOffset === 0)) {\n                    dom.insertBefore(caret, startContainer);\n                } else if (isStartTextNode && range.startOffset === startContainer.length) {\n                    dom.insertAfter(caret, startContainer);\n                } else {\n                    range.insertNode(caret);\n                    rangeChanged = true;\n                }\n            } else {\n                startContainer = startContainer === body ?\n                    startContainer.childNodes[range.startOffset] : startContainer;\n                dom.insertBefore(caret, startContainer);\n            }\n\n            var offset = dom.offset(caret, body);\n            var prev = caret.previousSibling;\n            var next = caret.nextSibling;\n\n            dom.remove(caret);\n\n            if (rangeChanged && dom.isDataNode(prev) && dom.isDataNode(next) && !dom.isBom(prev) && !dom.isBom(next)) {\n                var prevLength = prev.length;\n                next.data = prev.data + next.data;\n                range.setStart(next, prevLength);\n                dom.remove(prev);\n\n                range.collapse(true);\n                editor.selectRange(range);\n            }\n\n            return offset;\n        },\n\n        expandImmutablesIn: function(range) {\n            var editor = this.editor;\n            if (editor && editor.options.immutables) {\n                var body = editor.body;\n                range = range || editor.getRange();\n                kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                if (range.startContainer === body && range.startOffset === 0) {\n                    var doc = body.ownerDocument;\n                    var bomNode = doc.createTextNode(\"\\ufeff\");\n                    body.insertBefore(bomNode, body.childNodes[0]);\n                    range.setStartBefore(bomNode);\n                }\n                editor.selectRange(range);\n            }\n        },\n\n        splittableParent: function(block, node) {\n            var parentNode, body;\n\n            if (block) {\n                return dom.closestEditableOfType(node, ['p', 'ul', 'ol']) || node.parentNode;\n            }\n\n            parentNode = node.parentNode;\n            body = node.ownerDocument.body;\n\n            if (dom.isInline(parentNode)) {\n                while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\n                    parentNode = parentNode.parentNode;\n                }\n            }\n\n            return parentNode;\n        },\n\n        paste: function(html, options) {\n            var editor = this.editor,\n                nonSplittableTagsOnPaste = this.nonSplittableTagsOnPaste,\n                preventSplit = false,\n                unwrapPasted = false,\n                i, l, childNodes, isList;\n\n            this.expandImmutablesIn();\n\n            options = extend({ clean: false, split: true }, options);\n\n            if (!options.skipCleaners) {\n                for (i = 0, l = this.cleaners.length; i < l; i++) {\n                    if (this.cleaners[i].applicable(html)) {\n                        html = this.cleaners[i].clean(html);\n                    }\n                }\n            }\n\n            if (options.clean) {\n                // remove br elements which immediately precede block elements\n                html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/ig, \"$3\");\n                // remove empty inline elements\n                html = html.replace(/<(a|span)[^>]*><\\/\\1>/ig, \"\");\n            }\n\n            html = html.replace(/<(a|span|font)([^>]*)> <\\/\\1>/ig, \"<$1$2>&nbsp;</$1>\");\n\n            // It is possible in IE to copy just <li> tags\n            html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\n\n            var block = this.isBlock(html);\n\n            editor.focus();\n            var range = editor.getRange();\n            range.deleteContents();\n\n            if (range.startContainer == editor.document) {\n                range.selectNodeContents(editor.body);\n            }\n\n            var marker = new Marker();\n            var caret = marker.addCaret(range);\n\n            var parent = this.splittableParent(block, caret);\n            var unwrap = false;\n\n            for (i = 0; i < nonSplittableTagsOnPaste.length; i++) {\n                const splitter = nonSplittableTagsOnPaste[i],\n                    tag = splitter.tag || splitter;\n\n                if (dom.is(parent, tag)) {\n                    preventSplit = true;\n                    unwrapPasted = splitter.unwrap !== false;\n                    break;\n                }\n            }\n\n            var splittable = parent != editor.body && !dom.is(parent, \"td\") && !preventSplit;\n\n            if (options.split && splittable && (block || dom.isInline(parent))) {\n                range.selectNode(caret);\n                RangeUtils.split(range, parent, true);\n                unwrap = true;\n            }\n\n            var fragment = this.htmlToFragment(html);\n\n            if (fragment.firstChild && fragment.firstChild.className === \"k-paste-container\") {\n                var fragmentsHtml = [];\n                for (i = 0, l = fragment.childNodes.length; i < l; i++) {\n                    fragmentsHtml.push(fragment.childNodes[i].innerHTML);\n                }\n\n                fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\n            }\n\n            childNodes = fragment.childNodes;\n\n            if (unwrapPasted) {\n                isList = dom.list(childNodes[0]);\n                dom.unwrap(childNodes[0]);\n\n                if (isList) {\n                    range.selectNode(caret.parentNode);\n                }\n            }\n\n            $(childNodes)\n                .filter(\"table\").addClass(\"k-table\").end()\n                .find(\"table\").addClass(\"k-table\");\n\n            $(childNodes).each(function(index, elm) {\n               if (dom.isBlock(elm) && !dom.isSelfClosing(elm) && elm.innerHTML === \"\") {\n                    elm.appendChild(editor.document.createTextNode(\"\\ufeff\"));\n               }\n            });\n\n            range.insertNode(fragment);\n\n            parent = this.splittableParent(block, caret);\n            if (unwrap) {\n                while (caret.parentNode != parent) {\n                    dom.unwrap(caret.parentNode);\n                }\n\n                dom.unwrap(caret.parentNode);\n            }\n\n            dom.normalize(range.commonAncestorContainer);\n            caret.style.display = 'inline';\n            dom.restoreScrollTop(editor.document);\n            dom.scrollTo(caret);\n            marker.removeCaret(range);\n\n            var rangeEnd = range.commonAncestorContainer.parentNode;\n            if (range.collapsed && dom.name(rangeEnd) == \"tbody\" || range.collapsed && dom.name(rangeEnd) == \"thead\") {\n                range.setStartAfter($(rangeEnd).closest(\"table\")[0]);\n                range.collapse(true);\n            }\n\n            var focusedTable = $(range.commonAncestorContainer.parentNode).closest(\"table\");\n\n            if (focusedTable.get(0)) {\n                var siblingNodes = focusedTable.parent().contents();\n                var lastSiblingIndex = siblingNodes.length - 1;\n                var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n                while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n                    lastSiblingIndex -= 1;\n                    lastSibling = siblingNodes.get(lastSiblingIndex);\n                }\n\n                if (lastSibling === focusedTable.get(0) && !focusedTable.parents(\"table\").length) {\n                    dom.insertAfter(dom.createEmptyNode(editor.document, \"p\"), focusedTable[0]);\n                }\n            }\n\n            editor._handleSpaceAndNewLines();\n            editor.selectRange(range);\n        }\n    });\n\n    var Cleaner = Class.extend({\n        init: function(options) {\n            this.options = options || {};\n            this.replacements = [];\n        },\n\n        clean: function(html, customReplacements) {\n            var that = this,\n                replacements = customReplacements || that.replacements,\n                i, l;\n\n            for (i = 0, l = replacements.length; i < l; i += 2) {\n                html = html.replace(replacements[i], replacements[i + 1]);\n            }\n\n            return html;\n        }\n    });\n\n    var ScriptCleaner = Cleaner.extend({\n        init: function(options) {\n            Cleaner.fn.init.call(this, options);\n\n            this.replacements = [\n                /<(\\/?)script([^>]*)>/i, \"<$1telerik:script$2>\"\n            ];\n        },\n\n        applicable: function(html) {\n            return !this.options.none && (/<script[^>]*>/i).test(html);\n        }\n    });\n\n    var TabCleaner = Cleaner.extend({\n        init: function(options) {\n            Cleaner.fn.init.call(this, options);\n\n            var replacement = ' ';\n            this.replacements = [\n                /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi, replacement,\n                /\\t/gi, replacement,\n                /&nbsp;&nbsp; &nbsp;/gi, replacement\n            ];\n        },\n\n        applicable: function(html) {\n            return (/&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i).test(html);\n        }\n    });\n\n    var MSWordFormatCleaner = Cleaner.extend({\n        init: function(options) {\n            Cleaner.fn.init.call(this, options);\n\n            this.junkReplacements = [\n                /<\\?xml[^>]*>/gi, '',\n                /<!--(.|\\n)*?-->/g, '', /* comments */\n                /&quot;/g, \"'\", /* encoded quotes (in attributes) */\n                /<o:p>&nbsp;<\\/o:p>/ig, '&nbsp;',\n                /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/ig, '', /* external references and namespaced tags */\n                /<\\/o>/g, ''\n            ];\n            this.replacements = this.junkReplacements.concat([\n                /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g, '$1',\n                /<br><br>/g, '<BR><BR>',\n                /<br>\\n/g, '<br/>',\n                /<br>(?!\\n)/g, ' ',\n                /<table([^>]*)>(\\s|&nbsp;)+<t/gi, '<table$1><t',\n                /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi, '',\n                /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi, '',\n                /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi, '',\n                /<BR><BR>/g, '<br>',\n                /^\\s*(&nbsp;)+/gi, '',\n                /(&nbsp;|<br[^>]*>)+\\s*$/gi, '',\n                /mso-[^;\"]*;?/ig, '', /* office-related CSS attributes */\n                /<(\\/?)b(\\s[^>]*)?>/ig, '<$1strong$2>',\n                /<(\\/?)font(\\s[^>]*)?>/ig, this.convertFontMatch,\n                /<(\\/?)i(\\s[^>]*)?>/ig, '<$1em$2>',\n                /style=([\"|'])\\s*\\1/g, '', /* empty style attributes */\n                /(<br[^>]*>)?\\n/g, function($0, $1) { return $1 ? $0 : ' '; } /* phantom extra line feeds */\n            ]);\n        },\n\n        convertFontMatch: function(match, closing, args) {\n            var faceRe = /face=['\"]([^'\"]+)['\"]/i;\n            var face = faceRe.exec(args);\n            var family = args && face && face[1];\n\n            if (closing) {\n                return '</span>';\n            } else if (family) {\n                return '<span style=\"font-family:' + family + '\">';\n            } else {\n                return '<span>';\n            }\n        },\n\n        applicable: function(html) {\n            return (/class=\"?Mso/i).test(html) ||\n                   (/style=\"[^\"]*mso-/i).test(html) ||\n                   (/urn:schemas-microsoft-com:office/).test(html);\n        },\n\n        stripEmptyAnchors: function(html) {\n            return html.replace(/<a([^>]*)>\\s*<\\/a>/ig, function(a, attributes) {\n                if (!attributes || attributes.indexOf(\"href\") < 0) {\n                    return \"\";\n                }\n\n                return a;\n            });\n        },\n\n        listType: function(p, listData) {\n            var html = p.innerHTML;\n            var text = dom.innerText(p);\n\n            var startingSymbol;\n            var matchSymbol = html.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);\n            var symbol = matchSymbol && matchSymbol[1];\n            var isNumber = /^[a-z\\d]/i.test(symbol);//including alpha-numeric and roman numerals\n\n            var trimStartText = function(text) {\n                return text.replace(/^(?:&nbsp;|[\\u00a0\\n\\r\\s])+/, '');\n            };\n\n            if (matchSymbol) {\n                startingSymbol = true;\n            }\n\n            html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\u00a0');\n\n            if ((!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html)) ||\n                (startingSymbol && /^.\\u00a0+/.test(html)) ||\n                (symbol && !isNumber && listData)) {\n                return {\n                    tag: 'ul',\n                    style: this._guessUnorderedListStyle(trimStartText(text))\n                };\n            }\n\n            if (/^\\s*\\w+[\\.\\)][\\u00a0 ]{2,}/.test(html)) {\n                return {\n                    tag: 'ol',\n                    style: this._guessOrderedListStyle(trimStartText(text))\n                };\n            }\n        },\n\n        _convertToLi: function(p) {\n            var content;\n\n            if (p.childNodes.length == 1) {\n                content = p.firstChild.nodeType === dom.nodeTypes.TEXT_NODE ? dom.innerText(p) : p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, \"\");\n                content = this._checkForBullet(content);\n            } else {\n                content = this._getHtmlNoBullet(p);\n            }\n\n            dom.remove(p);\n\n            return dom.create(document, 'li', { innerHTML: content });\n        },\n\n        _checkForBullet: function(html) {\n            var p = dom.create(document, 'p', { innerHTML: html });\n            var bulletRgx = /^\\s*\\w+[\\.\\)]\\s+/;\n\n            if (bulletRgx.test(p.innerText)) {\n                return this._getHtmlNoBullet(p);\n            }\n\n            return html;\n        },\n\n        _getHtmlNoBullet: function(element) {\n            var content,\n                name = dom.name(element);\n\n            dom.remove(element.firstChild);\n\n            // check for roman numerals\n            if (element.firstChild.nodeType == 3) {\n                if (/^[ivxlcdm]+\\.$/i.test(element.firstChild.nodeValue)) {\n                    dom.remove(element.firstChild);\n                }\n            }\n\n            if (/^(&nbsp;|\\s)+$/i.test(element.firstChild.innerHTML)) {\n                dom.remove(element.firstChild);\n            }\n\n            if (name != \"p\") {\n                content = \"<\" + name + \">\" + element.innerHTML + \"</\" + name + \">\";\n            } else {\n                content = element.innerHTML;\n            }\n\n            return content;\n        },\n\n        _guessUnorderedListStyle: function(symbol) {\n            if (/^[\\u2022\\u00b7\\u00FC\\u00D8\\u002dv-]/.test(symbol)) {\n                return null;//return \"disc\"; //default CSS value\n            } else if (/^o/.test(symbol)) {\n                return \"circle\";\n            } else {\n                return \"square\";\n            }\n        },\n        _guessOrderedListStyle: function(symbol) {\n            var listType = null;\n            if (!/^\\d/.test(symbol)) {\n                listType = (/^[a-z]/.test(symbol) ? 'lower-' : 'upper-') +\n                           (/^[ivxlcdm]/i.test(symbol) ? 'roman' : 'alpha');\n            }\n\n            return listType;\n        },\n\n        extractListLevels: function(html) {\n            var msoListRegExp = /style=['\"]?[^'\"]*?mso-list:\\s?[a-zA-Z]+(\\d+)\\s[a-zA-Z]+(\\d+)\\s(\\w+)/gi;\n\n            html = html.replace(msoListRegExp, function(match, list, level) {\n                return kendo.format('data-list=\"{0}\" data-level=\"{1}\" {2}', list, level, match);\n            });\n\n            return html;\n        },\n\n        _createList: function(type, styleType) {\n            return dom.create(document, type, {\n                style: { listStyleType: styleType }\n            });\n        },\n\n        lists: function(placeholder) {\n            var blockChildren = $(placeholder).find(dom.blockElements.join(',')),\n                lastMargin = -1,\n                name,\n                levels = {},\n                li,\n                rootMargin,\n                rootIndex,\n                lastRootLi,\n                isLastRootLi,\n                rootList,\n                i, p, type, margin, list, listData,\n                acceptedNameTags = [\"p\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"],\n                isParentTable = false;\n\n            for (i = 0; i < blockChildren.length; i++) {\n                p = blockChildren[i];\n                listData = $(p).data();\n                var listIndex = listData.list;\n                name = dom.name(p);\n                isParentTable = !!$(p).parents(\"table\").length;\n\n                if (isParentTable) {\n                    continue;\n                }\n\n                var listType = this.listType(p, listData);\n                type = listType && listType.tag;\n\n                if (!type || acceptedNameTags.indexOf(name) < 0) {\n                    if (!p.innerHTML) {\n                        dom.remove(p);\n                    } else if (li && !isLastRootLi) {\n                        li.appendChild(p);\n                    }\n                    continue;\n                }\n\n                // not supported list levels in ie\n                if (browser.msie) {\n                    continue;\n                }\n\n                margin = listData.level || parseFloat(p.style.marginLeft || 0);\n\n                var levelType = type + listIndex;\n                if (!levels[margin]) {\n                    levels[margin] = {};\n                }\n\n                if (!rootMargin || rootMargin < 0) {\n                    rootMargin = margin;\n                    rootIndex = listIndex;\n                    lastRootLi = $(placeholder).find(\"[data-list='\" + rootIndex + \"']\").last()[0];\n                    rootList = this._createList(type, listType.style);\n                    dom.insertBefore(rootList, p);\n                    lastMargin = margin;\n                    levels[margin][levelType] = rootList;\n                }\n\n                isLastRootLi = lastRootLi === p;\n\n                list = levels[margin][levelType];\n\n                if (margin > lastMargin || !list) {\n                    list = this._createList(type, listType.style);\n                    levels[margin][levelType] = list;\n                    li.appendChild(list);\n                }\n\n                li = this._convertToLi(p);\n                list.appendChild(li);\n\n                if (isLastRootLi) {\n                    rootMargin = lastMargin = -1;\n                } else {\n                    lastMargin = margin;\n                }\n            }\n        },\n\n        removeAttributes: function(element) {\n            var attributes = element.attributes,\n                i = attributes.length,\n                significantStyles = [],\n                isSignificantCss = function(val) {\n                    var significantCss = [\"border\", \"background\", \"padding\"];\n\n                    return significantCss.filter(function(cssAttr) {\n                        return val.trim().indexOf(cssAttr) === 0;\n                    }).length > 0;\n                },\n                addSignificantStyles = function(val) {\n                    if (isSignificantCss(val)) {\n                        significantStyles.push(val.trim());\n                    }\n                },\n                attr, attributeName, attributeValues;\n\n            while (i--) {\n                if (dom.name(attributes[i]) != \"colspan\") {\n                    attr = attributes[i];\n                    attributeName = attr.name;\n\n                    if (attributeName === \"style\" && (element.nodeName === \"TD\" || element.nodeName === \"TH\")) {\n                        attributeValues = attr.value.split(\";\");\n                        attributeValues.forEach(addSignificantStyles);\n                    }\n\n                    element.removeAttributeNode(attributes[i]);\n                }\n            }\n\n            if (significantStyles.length > 0) {\n                element.setAttribute(\"style\", significantStyles.join(\";\"));\n            }\n        },\n\n        createColGroup: function(row) {\n            var cells = row.cells;\n            var table = $(row).closest(\"table\");\n            var colgroup = table.children(\"colgroup\");\n\n            if (cells.length < 2) {\n                return;\n            } else if (colgroup.length) {\n                cells = colgroup.children();\n                colgroup[0].parentNode.removeChild(colgroup[0]);\n            }\n\n            colgroup = $($.map(cells, function(cell) {\n                    var width = cell.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        return kendo.format('<col style=\"width:{0}px;\"/>', width);\n                    }\n\n                    return \"<col />\";\n                }).join(\"\"));\n\n            // jquery 1.9/2.0 discrepancy\n            if (!colgroup.is(\"colgroup\")) {\n                colgroup = $(\"<colgroup/>\").append(colgroup);\n            }\n\n            colgroup.prependTo(table);\n        },\n\n        convertHeaders: function(row) {\n            var cells = row.cells,\n                i,\n                boldedCells = $.map(cells, function(cell) {\n                    var child = $(cell).children(\"p\").children(\"strong\")[0];\n\n                    if (child && dom.name(child) == \"strong\") {\n                        return child;\n                    }\n                });\n\n            if (boldedCells.length == cells.length) {\n                for (i = 0; i < boldedCells.length; i++) {\n                    dom.unwrap(boldedCells[i]);\n                }\n\n                $(row).closest(\"table\")\n                    .find(\"colgroup\").after(\"<thead></thead>\").end()\n                    .find(\"thead\").append(row);\n\n                for (i = 0; i < cells.length; i++) {\n                    dom.changeTag(cells[i], \"th\");\n                }\n            }\n        },\n\n        removeParagraphs: function(cells) {\n            var i, j, len, cell, paragraphs;\n\n            for (i = 0; i < cells.length; i++) {\n                this.removeAttributes(cells[i]);\n\n                // remove paragraphs and insert line breaks between them\n                cell = $(cells[i]);\n                paragraphs = cell.children(\"p\");\n\n                for (j = 0, len = paragraphs.length; j < len; j++) {\n                    if (j < len - 1) {\n                        dom.insertAfter(dom.create(document, \"br\"), paragraphs[j]);\n                    }\n\n                    dom.unwrap(paragraphs[j]);\n                }\n            }\n        },\n\n        removeTextNodes: function(trs) {\n            var i, j, childNodes, currentNode, row;\n\n            for (i = 0; i < trs.length; i++) {\n                row = trs[i];\n                childNodes = row.childNodes;\n\n                for (j = 0; j < childNodes.length; j++) {\n                    currentNode = childNodes[j];\n\n                    if (currentNode.nodeType === dom.nodeTypes.TEXT_NODE) {\n                        row.removeChild(currentNode);\n                    }\n                }\n            }\n        },\n\n        tables: function(placeholder) {\n            var tables = $(placeholder).find(\"table\"),\n                that = this,\n                rows,\n                firstRow, longestRow, i, j;\n\n            for (i = 0; i < tables.length; i++) {\n                rows = tables[i].rows;\n                longestRow = firstRow = rows[0];\n\n                for (j = 1; j < rows.length; j++) {\n                    if (rows[j].cells.length > longestRow.cells.length) {\n                        longestRow = rows[j];\n                    }\n                }\n\n                that.createColGroup(longestRow);\n                that.convertHeaders(firstRow);\n\n                that.removeAttributes(tables[i]);\n\n                that.removeParagraphs(tables.eq(i).find(\"td,th\"));\n\n                that.removeTextNodes(tables.eq(i).find(\"tr\"));\n            }\n        },\n\n        headers: function(placeholder) {\n            var titles = $(placeholder).find(\"p.MsoTitle\");\n\n            for (var i = 0; i < titles.length; i++) {\n                dom.changeTag(titles[i], \"h1\");\n            }\n        },\n\n        removeFormatting: function(placeholder) {\n            $(placeholder).find(\"*\").each(function() {\n                $(this).css({\n                    fontSize: \"\",\n                    fontFamily: \"\"\n                });\n\n                if (!this.getAttribute(\"style\") && !this.style.cssText) {\n                    this.removeAttribute(\"style\");\n                }\n            });\n        },\n\n        clean: function(html) {\n            var that = this, placeholder;\n            var filters = this.options;\n\n            if (filters.none) {\n                html = Cleaner.fn.clean.call(that, html, this.junkReplacements);\n                html = that.stripEmptyAnchors(html);\n            } else {\n\n                html = filters.msConvertLists ? this.extractListLevels(html) : html;\n                html = Cleaner.fn.clean.call(that, html);\n                html = that.stripEmptyAnchors(html);\n\n                placeholder = dom.create(document, 'div', { innerHTML: html });\n                that.headers(placeholder);\n\n                if (filters.msConvertLists) {\n                    that.lists(placeholder);\n                }\n                that.tables(placeholder);\n\n                if (filters.msAllFormatting) {\n                    that.removeFormatting(placeholder);\n                }\n\n                html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/ig, '$1');\n            }\n\n            return html;\n        }\n    });\n\n    var WebkitFormatCleaner = Cleaner.extend({\n        init: function(options) {\n            Cleaner.fn.init.call(this, options);\n\n            this.replacements = [\n                /\\s+class=\"Apple-style-span[^\"]*\"/gi, '',\n                /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi, '<$1',\n                /^<div>(.*)<\\/div>$/, '$1'\n            ];\n        },\n\n        applicable: function(html) {\n            return (/class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i).test(html);\n        }\n    });\n\n    var DomCleaner = Cleaner.extend({\n        clean: function(html) {\n            var container = dom.create(document, 'div', { innerHTML: html });\n            container = this.cleanDom(container);\n            return container.innerHTML;\n        },\n\n        cleanDom: function(container) {\n            return container;\n        }\n    });\n\n    var HtmlTagsCleaner = DomCleaner.extend({\n        cleanDom: function(container) {\n            var tags = this.collectTags();\n\n            $(container).find(tags).each(function() {\n                dom.unwrap(this);\n            });\n\n            return container;\n        },\n\n        collectTags: function() {\n            if (this.options.span) {\n                return \"span\";\n            }\n        },\n\n        applicable: function() {\n            return this.options.span;\n        }\n    });\n\n    var HtmlAttrCleaner = DomCleaner.extend({\n        cleanDom: function(container) {\n            var attributes = this.collectAttr();\n            var nodes = $(container).find(\"[\" + attributes.join(\"],[\") + \"]\");\n            nodes.removeAttr(attributes.join(\" \"));\n\n            return container;\n        },\n\n        collectAttr: function() {\n            if (this.options.css) {\n                return [\"class\", \"style\"];\n            }\n\n            return [];\n        },\n\n        applicable: function() {\n            return this.options.css;\n        }\n    });\n\n    var TextContainer = function() {\n        this.text = \"\";\n        this.add = function(text) {\n            this.text += text;\n        };\n    };\n\n    var HtmlTextLines = Class.extend({\n        init: function(separators) {\n            this.separators = separators || {\n                    text: \" \",\n                    line: \"<br/>\"\n                };\n            this.lines = [];\n            this.inlineBlockText = [];\n            this.resetLine();\n        },\n\n        appendText: function(text) {\n            if (text.nodeType === 3) {\n                text = text.nodeValue;\n            }\n\n            this.textContainer.add(text);\n        },\n\n        appendInlineBlockText: function(text) {\n            this.inlineBlockText.push(text);\n        },\n\n        flashInlineBlockText: function() {\n            if (this.inlineBlockText.length) {\n                this.appendText(this.inlineBlockText.join(\" \"));\n                this.inlineBlockText = [];\n            }\n        },\n\n        endLine: function() {\n            this.flashInlineBlockText();\n            this.resetLine();\n        },\n\n        html: function() {\n            var separators = this.separators;\n            var result = \"\";\n            var lines = this.lines;\n\n            this.flashInlineBlockText();\n\n            for (var i = 0, il = lines.length, il1 = il - 1; i < il; i++) {\n                var line = lines[i];\n                for (var j = 0, jl = line.length, jl1 = jl - 1; j < jl; j++) {\n                    var text = line[j].text;\n                    result += text;\n                    if (j !== jl1) {\n                        result += separators.text;\n                    }\n                }\n                if (i !== il1) {\n                    result += separators.line;\n                }\n            }\n\n            return result;\n        },\n\n        resetLine: function() {\n            this.textContainer = new TextContainer();\n            this.line = [];\n            this.line.push(this.textContainer);\n            this.lines.push(this.line);\n        }\n    });\n\n    var DomEnumerator = Class.extend({\n        init: function(callback) {\n            this.callback = callback;\n        },\n        enumerate: function(node) {\n            if (!node) {\n                return;\n            }\n\n            var preventDown = this.callback(node);\n\n            var child = node.firstChild;\n            if (!preventDown && child) {\n                this.enumerate(child);\n            }\n\n            this.enumerate(node.nextSibling);\n        }\n    });\n\n    var HtmlContentCleaner = Cleaner.extend({\n        init: function(options) {\n            Cleaner.fn.init.call(this, options);\n            this.hasText = false; //unpleasant flag to prevent an empty line at the beginning of the generated content.\n            this.enumerator = new DomEnumerator(this.buildText.bind(this));\n        },\n\n        clean: function(html) {\n            var container = dom.create(document, 'div', { innerHTML: html });\n\n            return this.cleanDom(container);\n        },\n\n        cleanDom: function(container) {\n            this.separators = this.getDefaultSeparators();\n            this.htmlLines = new HtmlTextLines(this.separators);\n            this.enumerator.enumerate(container.firstChild);\n            this.hasText = false;\n\n            return this.htmlLines.html();\n        },\n\n        buildText: function(node) {\n            if (dom.isDataNode(node)) {\n                if (dom.isEmptyspace(node)) {\n                    return;\n                }\n                this.htmlLines.appendText(node.nodeValue.replace('\\n', this.separators.line));\n                this.hasText = true;\n            } else if (dom.isBlock(node) && this.hasText) {\n                var action = this.actions[dom.name(node)] || this.actions.block;\n                return action(this, node);\n            } else if (dom.isBr(node)) {\n                this.htmlLines.appendText(this.separators.line);\n            }\n        },\n\n        applicable: function() {\n            var o = this.options;\n            return o.all || o.keepNewLines;\n        },\n\n        getDefaultSeparators: function() {\n            if (this.options.all) {\n                return { text: \" \", line: \" \" };\n            } else {\n                return { text: \" \", line: \"<br/>\" };\n            }\n        },\n\n        actions: {\n            ul: $.noop,\n            ol: $.noop,\n            table: $.noop,\n            thead: $.noop,\n            tbody: $.noop,\n            td: function(cleaner, node) {\n                var tdCleaner = new HtmlContentCleaner({ all: true });\n\n                var cellText = tdCleaner.cleanDom(node);\n                cleaner.htmlLines.appendInlineBlockText(cellText);\n\n                return true;\n            },\n\n            block: function(cleaner) {\n                cleaner.htmlLines.endLine();\n            }\n        }\n    });\n\n    var CustomCleaner = Cleaner.extend({\n        clean: function(html) {\n            return this.options.custom(html);\n        },\n\n        applicable: function() {\n            return typeof(this.options.custom) === \"function\";\n        }\n    });\n\n    extend(editorNS, {\n        Clipboard: Clipboard,\n        Cleaner: Cleaner,\n        ScriptCleaner: ScriptCleaner,\n        TabCleaner: TabCleaner,\n        MSWordFormatCleaner: MSWordFormatCleaner,\n        WebkitFormatCleaner: WebkitFormatCleaner,\n        HtmlTagsCleaner: HtmlTagsCleaner,\n        HtmlAttrCleaner: HtmlAttrCleaner,\n        HtmlContentCleaner: HtmlContentCleaner,\n        HtmlTextLines: HtmlTextLines,\n        CustomCleaner: CustomCleaner\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        editorNS = kendo.ui.editor,\n        RangeUtils = editorNS.RangeUtils,\n        dom = editorNS.Dom,\n        RestorePoint = editorNS.RestorePoint,\n        Marker = editorNS.Marker,\n        browser = kendo.support.browser,\n        bomSpan = \"<span  class='k-br'>\\ufeff</span>\",\n        extend = $.extend;\n    var nodeTypes = dom.nodeTypes;\n    var PREVIOUS_SIBLING = \"previousSibling\";\n\n    function selected(node, range) {\n        return range.startContainer === node && range.endContainer === node &&\n            range.startOffset === 0 && range.endOffset == node.childNodes.length;\n    }\n\n    function getSibling(node, direction, condition) {\n        var sibling = node ? node[direction] : null;\n\n        while (sibling && !condition(sibling)) {\n            sibling = sibling[direction];\n        }\n\n        return sibling;\n    }\n\n    var tableCells = \"td,th,caption\";\n    var tableCellsWrappers = \"table,tbody,thead,tfoot,tr\";\n    var tableElements = tableCellsWrappers + \",\" + tableCells;\n    var inTable = function(range) { return !range.collapsed && $(range.commonAncestorContainer).is(tableCellsWrappers); };\n\n    var RemoveTableContent = Class.extend({\n        remove: function(range) {\n            var that = this;\n            var marker = new Marker();\n            marker.add(range, false);\n\n            var nodes = RangeUtils.getAll(range, function(node) { return $(node).is(tableElements); });\n            var doc = RangeUtils.documentFromRange(range);\n            var start = marker.start;\n            var end = marker.end;\n            var cellsTypes = tableCells.split(\",\");\n            var startCell = dom.parentOfType(start, cellsTypes);\n            var endCell = dom.parentOfType(end, cellsTypes);\n            that._removeContent(start, startCell, true);\n            that._removeContent(end, endCell, false);\n            $(nodes).each(function(i, node) {\n                node = $(node);\n                (node.is(tableCells) ? node : node.find(tableCells)).each(function(j, cell) {\n                    cell.innerHTML = \"&#65279;\";\n                });\n            });\n            if (startCell && !start.previousSibling) {\n                dom.insertBefore(doc.createTextNode(\"\\ufeff\"), start);\n            }\n            if (endCell && !end.nextSibling) {\n                dom.insertAfter(doc.createTextNode(\"\\ufeff\"), end);\n            }\n            if (startCell) {\n                range.setStartBefore(start);\n            } else if (nodes[0]) {\n                startCell = $(nodes[0]);\n                startCell = startCell.is(tableCells) ? startCell : startCell.find(tableCells).first();\n                if (startCell.length) {\n                    range.setStart(startCell.get(0), 0);\n                }\n            }\n\n            range.collapse(true);\n\n            dom.remove(start);\n            dom.remove(end);\n        },\n        _removeContent: function(start, top, forwards) {\n            if (top) {\n                var sibling = forwards ? \"nextSibling\" : \"previousSibling\",\n                    next,\n                    getNext = function(node) {\n                        while (node && !node[sibling]) {\n                            node = node.parentNode;\n                        }\n                        return node && $.contains(top, node) ? node[sibling] : null;\n                    };\n                start = getNext(start);\n                while (start) {\n                    next = getNext(start);\n                    dom.remove(start);\n                    start = next;\n                }\n            }\n        }\n    });\n\n    var TypingHandler = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n        },\n\n        keydown: function(e) {\n            var that = this,\n                editor = that.editor,\n                keyboard = editor.keyboard,\n                isTypingKey = keyboard.isTypingKey(e),\n                evt = extend($.Event(), e);\n\n            that.editor.trigger(\"keydown\", evt);\n\n            if (evt.isDefaultPrevented() || (e && e.isDefaultPrevented())) {\n                e.preventDefault();\n                return true;\n            }\n\n            if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\n                var range = editor.getRange();\n                var body = editor.body;\n                that.startRestorePoint = new RestorePoint(range, body);\n\n                if (inTable(range)) {\n                    var removeTableContent = new RemoveTableContent(editor);\n                    removeTableContent.remove(range);\n                    editor.selectRange(range);\n                }\n\n                if (browser.webkit && !range.collapsed && selected(body, range)) {\n                    body.innerHTML = \"\";\n                }\n\n                if (editor.immutables && editorNS.Immutables.immutablesContext(range)) {\n                    var backspaceHandler = new editorNS.BackspaceHandler(editor);\n                    backspaceHandler.deleteSelection(range);\n                }\n\n                keyboard.startTyping(function() {\n                    that._removeBomSpan();\n                    that.endRestorePoint = editorNS._finishUpdate(editor, that.startRestorePoint);\n                });\n\n                return true;\n            }\n\n            return false;\n        },\n\n        keyup: function(e) {\n            var keyboard = this.editor.keyboard;\n\n            this.editor.trigger(\"keyup\", e);\n\n            if (keyboard.isTypingInProgress()) {\n                keyboard.endTyping();\n                return true;\n            }\n\n            return false;\n        },\n\n        _removeBomSpan: function() {\n            var node = this.editor.getRange().commonAncestorContainer;\n\n            if (!dom.emptyNode(node)) {\n                if (node.nodeType === 3) {\n                    node = node.parentNode;\n                }\n\n                if (dom.insignificant(node)) {\n                    // typing in an insignificant node\n                    // make it significant\n                    node.textContent = dom.stripBom(node.textContent);\n                    dom.unwrap(node);\n                }\n            }\n        }\n    });\n\n    var BackspaceHandler = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n        },\n        _addCaret: function(container) {\n            var caret = dom.create(this.editor.document, \"a\");\n\n            // Only if not Chrome: Make sure to include cared in the formatted inline node\n            if (!kendo.support.browser.chrome && container.firstChild &&\n                container.firstChild.nodeType === nodeTypes.ELEMENT_NODE) {\n\n                container = container.firstChild;\n            }\n\n            dom.insertAt(container, caret, 0);\n            dom.stripBomNode(caret.previousSibling);\n            dom.stripBomNode(caret.nextSibling);\n            return caret;\n        },\n        _restoreCaret: function(caret) {\n            var range = this.editor.createRange();\n\n            if (!caret.nextSibling && dom.isDataNode(caret.previousSibling)) {\n                range.setStart(caret.previousSibling, caret.previousSibling.length);\n            } else {\n                range.setStartAfter(caret);\n            }\n\n            range.collapse(true);\n            this.editor.selectRange(range);\n            dom.remove(caret);\n        },\n        _handleDelete: function(range) {\n            var node = range.endContainer;\n            var block = dom.closestEditableOfType(node, dom.blockElements);\n\n            if (block && editorNS.RangeUtils.isEndOf(range, block)) {\n                // join with next sibling\n                var next = dom.next(block);\n                if (!next || dom.name(next) != \"p\") {\n                    return false;\n                }\n\n                var caretPlaceholder = dom.significantChildNodes(next)[0];\n                caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder)) ? caretPlaceholder : next;\n                var caret = this._addCaret(caretPlaceholder);\n\n                this._merge(block, next);\n\n                this._restoreCaret(caret);\n\n                return true;\n            }\n\n            return false;\n        },\n        _cleanBomBefore: function(range) {\n            var offset = range.startOffset;\n            var node = range.startContainer;\n            var text = node.nodeValue;\n            var count = 0;\n            while (offset - count >= 0 && text[offset - count - 1] == \"\\ufeff\") {\n                count++;\n            }\n\n            if (count > 0) {\n                node.deleteData(offset - count, count);\n\n                range.setStart(node, Math.max(0, offset - count));\n                range.collapse(true);\n\n                this.editor.selectRange(range);\n            }\n        },\n        _handleBackspace: function(range) {\n            var node = range.startContainer;\n            var li = dom.closestEditableOfType(node, ['li']);\n            var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\n            var editor = this.editor;\n            var previousSibling;\n\n            if (dom.isDataNode(node)) {\n                if (range.collapsed && /^\\s[\\ufeff]+$/.test(node.nodeValue)) {\n                    range.setStart(node, 0);\n                    range.setEnd(node, node.length);\n                    editor.selectRange(range);\n                    return false;\n                }\n                this._cleanBomBefore(range);\n            }\n\n            previousSibling = getSibling(block, PREVIOUS_SIBLING, function(sibling) {\n                return !dom.htmlIndentSpace(sibling);\n            });\n\n            //deleting the first list item with empty content in IE results in invalid range\n            if (range.collapsed && range.startOffset !== range.endOffset && range.startOffset < 0) {\n                range.startOffset = 0;\n                range.endOffset = 0;\n                editor.selectRange(range);\n            }\n\n            var startAtLi = li && editorNS.RangeUtils.isStartOf(range, li);\n            var liIndex = li && $(li).index();\n            var startAtNonFirstLi = startAtLi && liIndex > 0;\n            if (startAtNonFirstLi) {\n                block = li;\n                previousSibling = dom.prev(li);\n            }\n\n            if (block && previousSibling && dom.is(previousSibling, 'table') && editorNS.RangeUtils.isStartOf(range, block)) {\n                if (block.innerText === '') {\n                    block.innerHTML = '\\ufeff';\n                }\n                return true;\n            }\n\n            // outdent\n            if (editorNS.RangeUtils.isStartOf(range, block) && parseInt(block.style.marginLeft,10) > 0) {\n                editor.exec(\"outdent\");\n                return true;\n            }\n\n            // unwrap block\n            if ((block && previousSibling && editorNS.RangeUtils.isStartOf(range, block)) || startAtNonFirstLi) {\n                var caretPlaceholder = dom.significantChildNodes(block)[0];\n                caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder) && !dom.isImg(caretPlaceholder)) ? caretPlaceholder : block;\n\n                var caret = this._addCaret(caretPlaceholder);\n                this._merge(previousSibling, block);\n                this._restoreCaret(caret);\n\n                return true;\n            }\n\n            // unwrap li element\n            if (startAtLi && liIndex === 0) {\n                var child = li.firstChild;\n                if (!child) {\n                    li.innerHTML = editorNS.emptyElementContent;\n                    child = li.firstChild;\n                }\n\n                var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), \"p\");\n                range.selectNodeContents(li);\n                formatter.toggle(range);\n\n                if (dom.insignificant(child)) {\n                    range.setStartBefore(child);\n                } else {\n                    range.setStart(child, 0);\n                }\n\n                editor.selectRange(range);\n\n                return true;\n            }\n\n            var rangeStartNode = node.childNodes[range.startOffset - 1];\n            var linkRange = range;\n            var anchor = rangeStartNode && dom.closestEditableOfType(rangeStartNode, ['a']);\n            var previousNode = getSibling(rangeStartNode || node, PREVIOUS_SIBLING, function(sibling) {\n                return !dom.isDataNode(sibling) || (!dom.isBom(sibling) && sibling.length > 0);\n            });\n            if (anchor || ((range.startOffset === 0 || rangeStartNode) && dom.is(previousNode, \"a\"))) {\n                anchor = anchor || previousNode;\n                linkRange = editor.createRange();\n                linkRange.setStart(anchor, anchor.childNodes.length);\n                linkRange.collapse(true);\n            }\n\n            anchor = anchor || dom.closestEditableOfType(rangeStartNode || linkRange.startContainer, ['a']);\n            var isEndOfLink = anchor && editorNS.RangeUtils.isEndOf(linkRange, anchor);\n            if (isEndOfLink) {\n                var command = new editorNS.UnlinkCommand({ range: linkRange, body: editor.body, immutables: !!editor.immutables });\n                editor.execCommand(command);\n                editor._selectionChange();\n            }\n            return false;\n        },\n        _handleSelection: function(range) {\n            var ancestor = range.commonAncestorContainer;\n            var table = dom.closest(ancestor, \"table\");\n            var emptyParagraphContent = editorNS.emptyElementContent;\n            var editor = this.editor;\n            var parentElementOrNode;\n\n            if (inTable(range)) {\n                var removeTableContent = new RemoveTableContent(editor);\n                removeTableContent.remove(range);\n                editor.selectRange(range);\n                return true;\n            }\n\n            var marker = new Marker();\n            marker.add(range, false);\n\n            if (range.commonAncestorContainer === editor.body) {\n                this._surroundFullyContent(marker, range);\n            }\n\n            if (editor.immutables) {\n                this._handleImmutables(marker);\n            }\n\n            this._surroundFullySelectedAnchor(marker, range);\n\n            range.setStartAfter(marker.start);\n            range.setEndBefore(marker.end);\n\n            var start = range.startContainer;\n            var end = range.endContainer;\n\n            range.deleteContents();\n\n            if (end.tagName.toLocaleLowerCase() === \"li\" && dom.emptyNode(end)) {\n                range.selectNode(end);\n                range.deleteContents();\n            }\n\n            if (table && $(table).text() === \"\") {\n                range.selectNode(table);\n                range.deleteContents();\n            }\n\n            ancestor = range.commonAncestorContainer;\n\n            if (dom.name(ancestor) === \"p\" && ancestor.innerHTML === \"\") {\n                ancestor.innerHTML = emptyParagraphContent;\n                range.setStart(ancestor, 0);\n            }\n\n            this._join(start, end);\n\n            dom.insertAfter(editor.document.createTextNode(\"\\ufeff\"), marker.start);\n            marker.remove(range);\n\n            start = range.startContainer;\n            if (dom.name(start) == \"tr\") {\n                start = start.childNodes[Math.max(0, range.startOffset - 1)];\n                range.setStart(start, dom.getNodeLength(start));\n            }\n\n            range.collapse(true);\n\n            editor.selectRange(range);\n\n            parentElementOrNode = start.parentElement || start.parentNode;\n\n            if (dom.isDataNode(start) && !dom.emptyNode(parentElementOrNode)) {\n                this._cleanBomBefore(range);\n            }\n\n            return true;\n        },\n        _handleImmutables: function(marker) {\n            var immutableParent = editorNS.Immutables.immutableParent;\n            var startImmutable = immutableParent(marker.start);\n            var endImmutable = immutableParent(marker.start);\n            if (startImmutable) {\n                dom.insertBefore(marker.start, startImmutable);\n            }\n            if (endImmutable) {\n                dom.insertAfter(marker.end, endImmutable);\n            }\n            if (startImmutable) {\n                dom.remove(startImmutable);\n            }\n            if (endImmutable && endImmutable.parentNode) {\n                dom.remove(endImmutable);\n            }\n        },\n        _surroundFullyContent: function(marker, range) {\n            var children = range.commonAncestorContainer.children,\n                startParent = children[0],\n                endParent = children[children.length - 1];\n\n            this._moveMarker(marker, range, startParent, endParent);\n        },\n        _surroundFullySelectedAnchor: function(marker, range) {\n            var start = marker.start,\n                startParent = $(start).closest(\"a\").get(0),\n                end = marker.end,\n                endParent = $(end).closest(\"a\").get(0);\n\n            this._moveMarker(marker, range, startParent, endParent);\n        },\n        _moveMarker: function(marker, range, startParent, endParent) {\n            var start = marker.start,\n                end = marker.end;\n\n            if (startParent && RangeUtils.isStartOf(range, startParent)) {\n                dom.insertBefore(start, startParent);\n            }\n\n            if (endParent && RangeUtils.isEndOf(range, endParent)) {\n                dom.insertAfter(end, endParent);\n            }\n        },\n        _root: function(node) {\n            while (node && dom.name(node) != \"body\" && node.parentNode && dom.name(node.parentNode) != \"body\") {\n                node = node.parentNode;\n            }\n\n            return node;\n        },\n        _join: function(start, end) {\n            start = this._root(start);\n            end = this._root(end);\n\n            if (start != end && dom.is(end, \"p\")) {\n                this._merge(start, end);\n            }\n        },\n        _merge: function(dest, src) {\n            dom.removeTrailingBreak(dest);\n\n            while (dest && src.firstChild) {\n                if (dest.nodeType == 1) {\n                    dest = dom.list(dest) ? dest.children[dest.children.length - 1] : dest;\n\n                    if (dest) {\n                        dest.appendChild(src.firstChild);\n                    }\n                } else if (dest.nodeType === nodeTypes.TEXT_NODE) {\n                    this._mergeWithTextNode(dest, src.firstChild);\n                } else {\n                    dest.parentNode.appendChild(src.firstChild);\n                }\n            }\n\n            dom.remove(src);\n        },\n\n        _mergeWithTextNode: function(textNode, appendedNode) {\n            if (textNode && textNode.nodeType === nodeTypes.TEXT_NODE) {\n                if (textNode.nextSibling && this._isCaret(textNode.nextSibling)) {\n                    dom.insertAfter(appendedNode, textNode.nextSibling);\n                }\n                else {\n                    dom.insertAfter(appendedNode, textNode);\n                }\n            }\n        },\n\n        _isCaret: function(element) {\n            return $(element).is(\"a\");\n        },\n\n        keydown: function(e) {\n            var method, startRestorePoint;\n            var editor = this.editor;\n            var range = editor.getRange();\n            var keyCode = e.keyCode;\n            var keys = kendo.keys;\n            var backspace = keyCode === keys.BACKSPACE;\n            var del = keyCode == keys.DELETE;\n\n            if (editor.immutables && editor.immutables.keydown(e, range)) {\n                return;\n            }\n\n            if ((backspace || del) && !range.collapsed) {\n                method = \"_handleSelection\";\n            } else if (backspace) {\n                method = \"_handleBackspace\";\n            } else if (del) {\n                method = \"_handleDelete\";\n            }\n\n            if (!method) {\n                return;\n            }\n\n            startRestorePoint = new RestorePoint(range, editor.body);\n\n            if (this[method](range)) {\n                e.preventDefault();\n\n                editorNS._finishUpdate(editor, startRestorePoint);\n            }\n        },\n        deleteSelection: function(range) {\n            this._handleSelection(range);\n        },\n        keyup: $.noop\n    });\n\n    var SystemHandler = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n            this.systemCommandIsInProgress = false;\n        },\n\n        createUndoCommand: function() {\n            this.startRestorePoint = this.endRestorePoint = editorNS._finishUpdate(this.editor, this.startRestorePoint);\n        },\n\n        changed: function() {\n            if (this.startRestorePoint) {\n                return this.startRestorePoint.html != this.editor.body.innerHTML;\n            }\n\n            return false;\n        },\n\n        keydown: function(e) {\n            var that = this,\n                editor = that.editor,\n                keyboard = editor.keyboard;\n\n            if (keyboard.isModifierKey(e)) {\n\n                if (keyboard.isTypingInProgress()) {\n                    keyboard.endTyping(true);\n                }\n\n                that.startRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n                return true;\n            }\n\n            if (keyboard.isSystem(e)) {\n                that.systemCommandIsInProgress = true;\n\n                if (that.changed()) {\n                    that.systemCommandIsInProgress = false;\n                    that.createUndoCommand();\n                }\n\n                return true;\n            }\n\n            return false;\n        },\n\n        keyup: function() {\n            var that = this;\n\n            if (that.systemCommandIsInProgress && that.changed()) {\n                that.systemCommandIsInProgress = false;\n                that.createUndoCommand();\n                return true;\n            }\n\n            return false;\n        }\n    });\n\n    var SelectAllHandler = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n        },\n\n        keydown: function(e) {\n            if (!browser.webkit || e.isDefaultPrevented() ||\n                !(e.ctrlKey && e.keyCode == 65 && !e.altKey && !e.shiftKey)) {\n                return;\n            }\n            if (this.editor.options.immutables) {\n                this._toSelectableImmutables();\n            }\n            this._selectEditorBody();\n        },\n\n        _selectEditorBody: function() {\n            var editor = this.editor;\n            var range = editor.getRange();\n            range.selectNodeContents(editor.body);\n\n            setTimeout(function() {\n                editor.selectRange(range);\n            });\n        },\n\n        _toSelectableImmutables: function() {\n            var editor = this.editor,\n                body = editor.body,\n                immutable = editorNS.Immutables.immutable,\n                emptyTextNode = dom.emptyTextNode,\n                first = body.firstChild,\n                last = body.lastChild;\n\n            while (emptyTextNode(first)) {\n                first = first.nextSibling;\n            }\n\n            while (emptyTextNode(last)) {\n                last = last.previousSibling;\n            }\n\n            if (first && immutable(first)) {\n                $(bomSpan).prependTo(body);\n            }\n\n            if (last && immutable(last)) {\n                $(bomSpan).appendTo(body);\n            }\n        },\n\n        keyup: $.noop\n    });\n\n    var Keyboard = Class.extend({\n        init: function(handlers) {\n            this.handlers = handlers;\n            this.typingInProgress = false;\n        },\n\n        isCharacter: function(keyCode) {\n            return (keyCode >= 48 && keyCode <= 90) || (keyCode >= 96 && keyCode <= 111) ||\n                   (keyCode >= 186 && keyCode <= 192) || (keyCode >= 219 && keyCode <= 222) ||\n                   keyCode == 229;\n        },\n\n        toolFromShortcut: function(tools, e) {\n            var key = String.fromCharCode(e.keyCode),\n                toolName,\n                toolOptions,\n                modifier = this._getShortcutModifier(e, navigator.platform);\n\n            for (toolName in tools) {\n                toolOptions = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n                if ((toolOptions.key == key || toolOptions.key == e.keyCode) &&\n                    toolOptions.ctrl == modifier &&\n                    toolOptions.alt == e.altKey &&\n                    toolOptions.shift == e.shiftKey) {\n                    return toolName;\n                }\n            }\n        },\n\n        _getShortcutModifier: function(e, platform) {\n            var mac = platform.toUpperCase().indexOf('MAC') >= 0;\n            return mac ? e.metaKey : e.ctrlKey;\n        },\n\n        toolsFromShortcut: function(tools, e) {\n            var key = String.fromCharCode(e.keyCode),\n                toolName,\n                o,\n                matchesKey,\n                found = [];\n            var matchKey = function(toolKey) { return toolKey == key || toolKey == e.keyCode || toolKey == e.charCode; };\n\n            for (toolName in tools) {\n                o = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n                matchesKey = Array.isArray(o.key) ? $.grep(o.key, matchKey).length > 0 : matchKey(o.key);\n                if (matchesKey &&\n                    o.ctrl == e.ctrlKey &&\n                    o.alt == e.altKey &&\n                    o.shift == e.shiftKey) {\n                    found.push(tools[toolName]);\n                }\n            }\n\n            return found;\n        },\n\n        isTypingKey: function(e) {\n            var keyCode = e.keyCode;\n            return (this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey) ||\n                   keyCode == 32 || keyCode == 13 || keyCode == 8 ||\n                   (keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey);\n        },\n\n        isModifierKey: function(e) {\n            var keyCode = e.keyCode;\n            return (keyCode == 17 && !e.shiftKey && !e.altKey) ||\n                   (keyCode == 16 && !e.ctrlKey && !e.altKey) ||\n                   (keyCode == 18 && !e.ctrlKey && !e.shiftKey);\n        },\n\n        isSystem: function(e) {\n            return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\n        },\n\n        startTyping: function(callback) {\n            this.onEndTyping = callback;\n            this.typingInProgress = true;\n        },\n\n        stopTyping: function() {\n            if (this.typingInProgress && this.onEndTyping) {\n                this.onEndTyping();\n            }\n            this.typingInProgress = false;\n        },\n\n        endTyping: function(force) {\n            var that = this;\n            that.clearTimeout();\n            if (force) {\n                that.stopTyping();\n            } else {\n                that.timeout = window.setTimeout(that.stopTyping.bind(that), 1000);\n            }\n        },\n\n        isTypingInProgress: function() {\n            return this.typingInProgress;\n        },\n\n        clearTimeout: function() {\n            window.clearTimeout(this.timeout);\n        },\n\n        notify: function(e, what) {\n            var i, handlers = this.handlers;\n\n            for (i = 0; i < handlers.length; i++) {\n                if (handlers[i][what](e)) {\n                    break;\n                }\n            }\n        },\n\n        keydown: function(e) {\n            this.notify(e, 'keydown');\n        },\n\n        keyup: function(e) {\n            this.notify(e, 'keyup');\n        }\n    });\n\n    extend(editorNS, {\n        TypingHandler: TypingHandler,\n        SystemHandler: SystemHandler,\n        BackspaceHandler: BackspaceHandler,\n        SelectAllHandler: SelectAllHandler,\n        Keyboard: Keyboard\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            editorNS = kendo.ui.editor,\n            Command = editorNS.Command,\n            EditorUtils = editorNS.EditorUtils,\n            registerTool = EditorUtils.registerTool,\n            Tool = editorNS.Tool,\n            extend = $.extend;\n\n    var ExportPdfCommand = Command.extend({\n        init: function(options) {\n            this.async = true;\n            Command.fn.init.call(this, options);\n        },\n\n        exec: function() {\n            var that = this;\n            var range = that.lockRange(true);\n            var editor = that.editor;\n\n            editor._destroyResizings();\n\n            editor.saveAsPDF().then(function() {\n                that.releaseRange(range);\n                editor._initializeColumnResizing();\n                editor._initializeRowResizing();\n                editor._initializeElementResizing();\n            });\n        }\n    });\n\n    extend(editorNS, {\n        ExportPdfCommand: ExportPdfCommand\n    });\n\n    registerTool(\"pdf\", new Tool({ command: ExportPdfCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            editorNS = kendo.ui.editor,\n            Command = editorNS.Command,\n            EditorUtils = editorNS.EditorUtils,\n            registerTool = EditorUtils.registerTool,\n            Tool = editorNS.Tool,\n            extend = $.extend;\n\n    var PrintCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n\n            this.managesUndoRedo = true;\n        },\n\n        exec: function() {\n            var editor = this.editor;\n\n            if (kendo.support.browser.msie) {\n                editor.document.execCommand(\"print\", false, null);\n            } else if (editor.window.print) {\n                editor.window.print();\n            }\n        }\n    });\n\n    extend(editorNS, {\n        PrintCommand: PrintCommand\n    });\n\n    registerTool(\"print\", new Tool({ command: PrintCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        Editor = kendo.ui.editor,\n        Tool = Editor.Tool,\n        Command = Editor.Command,\n        EditorUtils = Editor.EditorUtils,\n        dom = Editor.Dom,\n        RangeUtils = Editor.RangeUtils,\n        registerTool = EditorUtils.registerTool;\n\n    var CopyFormatCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n        },\n\n        exec: function() {\n            var range = this.lockRange(true);\n            this.inlineStyles = [];\n            this.blockStyles = [];\n            this.collectStyles(range);\n            this.editor.inlineStyles = this.inlineStyles;\n            this.editor.blockStyles = this.blockStyles;\n            this.releaseRange(range);\n        },\n\n        collectStyles: function(range) {\n            var rangeNodes = RangeUtils.nodes(range);\n            var node;\n\n            if (rangeNodes.length === 1) {\n                node = rangeNodes[0].parentNode;\n            } else {\n                node = range.startContainer;\n            }\n\n            while (node && !dom.is(node, \"body\") && node.getAttribute(\"data-role\") !== \"editor\") {\n                if (dom.isBlock(node)) {\n                    this.populateStyles(node, \"blockStyles\");\n                    if (dom.is(node, \"li\")) {\n                        node = node.parentNode;\n                    } else {\n                        node = null;\n                    }\n                } else {\n                    this.populateStyles(node, \"inlineStyles\");\n                    node = node.parentNode;\n                }\n            }\n        },\n\n        populateStyles: function(node, destination) {\n            var styles = node.style;\n            var attributes = node.attributes;\n            var nodeStyles = {\n                tags: [ node.tagName ],\n                attr: {\n                    style: {}\n                }\n            };\n            var styleValue, styleKey, attributeKey, attributeValue, i;\n\n            for (i = 0; styles && i < styles.length; i++) {\n                styleKey = styles[i];\n                styleValue = styles[styleKey];\n                nodeStyles.attr.style[styleKey] = styleValue;\n            }\n\n            for (i = 0; attributes && i < attributes.length; i++) {\n                attributeKey = attributes[i].nodeName;\n                attributeValue = attributes[i].nodeValue;\n                if (attributeKey === \"style\") {\n                    continue;\n                } else if (attributeKey === \"class\") {\n                    nodeStyles.attr.className = attributeValue;\n                } else {\n                    nodeStyles.attr[attributeKey] = attributeValue;\n                }\n            }\n\n            this[destination].push(nodeStyles);\n        }\n    });\n\n    var ApplyFormatCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n        },\n\n        exec: function() {\n            var range = this.lockRange(true);\n            var markers = RangeUtils.getMarkers(range);\n            var editor = this.editor;\n            var inlineStyles = editor.inlineStyles;\n            var blockStyles = editor.blockStyles;\n            var nodes;\n\n            if ((!inlineStyles || inlineStyles.length === 0) && (!blockStyles || blockStyles.length === 0)) {\n                return;\n            }\n\n            if (markers.length === 3) {\n                this.marker.removeCaret(range);\n                this.marker.caret = null;\n            }\n\n            this.removeEmptyElementsFromRange(range);\n            nodes = RangeUtils.nodes(range);\n            this.cleanInlineParents(nodes);\n            dom.normalize(range.commonAncestorContainer);\n\n            if (markers.length === 2) {\n                range.setStartAfter(markers[0]);\n                range.setEndBefore(markers[1]);\n            } else {\n                range.setStartBefore(nodes[0]);\n                range.setEndAfter(nodes[0]);\n            }\n\n            nodes = RangeUtils.nodes(range);\n\n            if (nodes && blockStyles && blockStyles.length) {\n                this.applyBlockStyles(nodes, blockStyles);\n            }\n\n            if (nodes && inlineStyles && inlineStyles.length) {\n                this.applyInlineStyles(nodes, inlineStyles);\n            }\n\n            this.releaseRange(range);\n        },\n\n        removeEmptyElementsFromRange: function(range) {\n            var isEmptyInline = function(node) {\n                return dom.isInline(node) && !node.firstChild && !dom.isMarker(node);\n            };\n            var emptyElements, i;\n\n            emptyElements = RangeUtils.getAll(range, isEmptyInline);\n\n            if (emptyElements && emptyElements.length > 0) {\n                for (i = 0; i < emptyElements.length; i++) {\n                    emptyElements[i].parentNode.removeChild(emptyElements[i]);\n                }\n            }\n        },\n\n        cleanInlineParents: function(nodes) {\n            var i, node, parent, children, j, child, newNode;\n\n            for (i = 0; i < nodes.length; i++) {\n                node = nodes[i];\n                parent = node.parentNode;\n\n                if (this.immutableParent(node)) {\n                    continue;\n                }\n\n                while (parent && dom.isInline(parent)) {\n                    children = parent.childNodes;\n\n                    for (j = 0; j < children.length; j++) {\n                        child = children[j];\n\n                        if (!dom.isMarker(child) && child !== node) {\n                            newNode = parent.cloneNode(true);\n                            newNode.innerHTML = \"\";\n                            dom.wrap(child, newNode);\n                        }\n                    }\n\n                    dom.unwrap(parent);\n                    parent = node.parentNode;\n                }\n            }\n        },\n\n        applyBlockStyles: function(nodes, blockStyles) {\n            var formatTag = blockStyles[0].tags[0];\n            var attr = blockStyles[0].attr;\n            var document = this.editor.document;\n            var i, len, node, wrapper, blockParent, outerWrapper;\n            var previousNodes, nextNodes, previous, next, prevWrapper, nextWrapper, child, j, listItems;\n\n            for (i = 0, len = nodes.length; i < len; i++) {\n                node = nodes[i];\n\n                if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                    continue;\n                }\n\n                blockParent = dom.blockParentOrBody(node);\n\n                if (blockParent.tagName !== \"BODY\" && blockParent.tagName !== formatTag) {\n                    if (blockParent.tagName !== \"LI\" && blockParent.tagName !== \"TD\" && blockParent.tagName !== \"TH\") {\n                        previousNodes = [];\n                        nextNodes = [];\n                        previous = node.previousSibling;\n                        next = node.nextSibling;\n\n                        while (previous) {\n                            if (!dom.isMarker(previous)) {\n                                previousNodes.push(previous);\n                            }\n\n                            previous = previous.previousSibling;\n                        }\n\n                        if (previousNodes.length) {\n                            prevWrapper = blockParent.cloneNode(true);\n                            prevWrapper.innerHTML = \"\";\n                            dom.insertBefore(prevWrapper, previousNodes[0]);\n\n                            for (j = 0; j < previousNodes.length; j++) {\n                                child = previousNodes[j];\n                                dom.insertAt(prevWrapper, child, 0);\n                            }\n                        }\n\n                        while (next) {\n                            if (!dom.isMarker(next)) {\n                                nextNodes.push(next);\n                            }\n\n                            next = next.nextSibling;\n                        }\n\n                        if (nextNodes.length) {\n                            nextWrapper = blockParent.cloneNode(true);\n                            nextWrapper.innerHTML = \"\";\n                            dom.insertBefore(nextWrapper, nextNodes[0]);\n\n                            for (j = 0; j < nextNodes.length; j++) {\n                                child = nextNodes[j];\n                                nextWrapper.appendChild(child);\n                            }\n                        }\n\n                        dom.unwrap(blockParent);\n                    }\n\n                    wrapper = dom.create(document, formatTag, attr);\n                    dom.wrap(node, wrapper);\n                } else if (blockParent.tagName === formatTag) {\n                    dom.attr(blockParent, attr);\n                }\n            }\n\n            if (blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\" && formatTag === \"LI\") {\n                listItems = [];\n\n                while (dom.is(wrapper, \"li\")) {\n                    listItems.push(wrapper);\n                    wrapper = dom.prev(wrapper);\n                }\n\n                outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n                dom.insertBefore(outerWrapper, listItems[listItems.length - 1]);\n                outerWrapper.appendChild(listItems[0]);\n\n                for (i = 1, len = listItems.length; i < len; i++) {\n                    dom.insertBefore(listItems[i], outerWrapper.firstChild);\n                }\n            } else if (blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\") {\n                outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n                dom.wrap(wrapper, outerWrapper);\n            }\n        },\n\n        applyInlineStyles: function(nodes, inlineStyles) {\n            var document = this.editor.document;\n            var currentStyle, createdNode, topNode, i, newNode, node;\n\n            for (i = 0; i < inlineStyles.length; i++) {\n                currentStyle = inlineStyles[i];\n                createdNode = dom.create(document, currentStyle.tags[0], currentStyle.attr);\n\n                if (topNode) {\n                    createdNode.appendChild(topNode);\n                }\n\n                topNode = createdNode;\n            }\n\n            if (topNode) {\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                        continue;\n                    }\n                    newNode = topNode.cloneNode(true);\n                    dom.insertBefore(newNode, node);\n\n                    while (newNode.children && newNode.children.length) {\n                        newNode = newNode.children[0];\n                    }\n\n                    newNode.appendChild(node);\n                }\n            }\n        },\n\n        immutables: function() {\n            return this.editor && this.editor.options.immutables;\n        },\n\n        immutableParent: function(node) {\n            return this.immutables() && Editor.Immutables.immutableParent(node);\n        }\n    });\n\n    var CopyFormatTool = Tool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n        },\n\n        command: function(commandArguments) {\n            return new CopyFormatCommand(commandArguments);\n        }\n    });\n\n    var ApplyFormatTool = Tool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n        },\n\n        command: function(commandArguments) {\n            return new ApplyFormatCommand(commandArguments);\n        }\n    });\n\n    $.extend(Editor, {\n        CopyFormatCommand: CopyFormatCommand,\n        ApplyFormatCommand: ApplyFormatCommand,\n        CopyFormatTool: CopyFormatTool,\n        ApplyFormatTool: ApplyFormatTool\n    });\n\n    registerTool(\"copyFormat\", new CopyFormatTool({ }));\n    registerTool(\"applyFormat\", new ApplyFormatTool({ }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        const kendo = window.kendo,\n            extend = $.extend,\n            Editor = kendo.ui.editor,\n            formats = kendo.ui.Editor.fn.options.formats,\n            dom = Editor.Dom,\n            Tool = Editor.Tool,\n            DelayedExecutionTool = Editor.DelayedExecutionTool,\n            BlockFormatter = Editor.BlockFormatter,\n            FormatCommand = Editor.FormatCommand,\n            GreedyInlineFormatFinder = Editor.GreedyInlineFormatFinder,\n            EditorUtils = Editor.EditorUtils,\n            registerTool = EditorUtils.registerTool,\n            registerFormat = EditorUtils.registerFormat,\n            RangeUtils = Editor.RangeUtils,\n            MOUSEDOWN_NS = \"mousedown.kendoEditor\",\n            KEYDOWN_NS = \"keydown.kendoEditor\";\n\n        const LineHeightCommand = FormatCommand.extend({\n            exec: function() {\n                const cmd = this,\n                    range = cmd.lockRange(true),\n                    nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n\n                cmd.formatter.format[0].attr.style.lineHeight = cmd.options.value.lineHeight;\n                cmd.formatter.apply(nodes);\n                cmd.releaseRange(range);\n            }\n        });\n\n        const LineHeightFormatTool = DelayedExecutionTool.extend({\n            init: function(options) {\n                Tool.fn.init.call(this, options);\n\n                this.type = \"kendoComboBox\";\n                this.format = [{ tags: [\"p\", \"lineHeight\"] }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr, options.fontAttr, options.defaultValue);\n            },\n\n            command: function(commandArguments) {\n                var that = this;\n\n                return new LineHeightCommand(extend(commandArguments, {\n                    formatter: function() {\n                        return new BlockFormatter(that.options.format);\n                    }\n                }));\n            },\n\n            initialize: function(ui, editor) {\n                let tool = this,\n                    component = ui.getKendoComboBox();\n\n                tool.editor = editor;\n\n                component.bind(\"change\", this.changeHandler.bind(this));\n                component.bind(\"close\", this.closeHandler.bind(this));\n\n                component.wrapper.on(MOUSEDOWN_NS, \".k-input-button,.k-input-inner\", this.mouseDownHandler.bind(this))\n                    .on(KEYDOWN_NS, this.keyDownHandler.bind(this));\n            },\n\n            changeHandler: function(e) {\n                this._exec(e.sender.value());\n            },\n\n            closeHandler: function() {\n                let that = this,\n                    editor = that.editor;\n\n                setTimeout(function() {\n                    editor._deleteSavedRange();\n                    that.currentRange = null;\n                },0);\n            },\n\n            mouseDownHandler: function() {\n                let newRange = this.editor.getRange();\n\n                this.currentRange = this.editor._containsRange(newRange) ? newRange : this.currentRange;\n            },\n\n            keyDownHandler: function(e) {\n                if (e.keyCode === kendo.keys.ENTER) {\n                    this.editor._deleteSavedRange();\n                    this.currentRange = null;\n                    e.preventDefault();\n                }\n            },\n\n            _exec: function(value) {\n                let editor = this.editor;\n                editor._range = this.currentRange;\n                if (value) {\n                    Tool.exec(this.editor, this.options.name, { lineHeight: value });\n                }\n            },\n        });\n\n        $.extend(Editor, {\n            LineHeightCommand: LineHeightCommand,\n            LineHeightFormatTool: LineHeightFormatTool\n        });\n\n        registerFormat(\"lineHeight\", [\n            { tags: dom.blockElements, attr: { style: { lineHeight: \"normal\" } } }\n        ]);\n\n        registerTool(\"lineHeight\", new LineHeightFormatTool({\n            cssAttr: \"line-height\",\n            format: formats.lineHeight,\n            defaultValue: 1.15,\n            ui: {\n                type: \"component\",\n                component: \"ComboBox\",\n                componentOptions: {\n                    value: 1.15,\n                    dataTextField: \"text\",\n                    dataValueField: \"value\",\n                    prefixOptions: {\n                        icon: \"paragraphHeight\"\n                    },\n                    autoSize: true,\n                    dataSource: [\n                        { text: \"1\", value: \"1\" },\n                        { text: \"1.15\", value: \"1.15\" },\n                        { text: \"1.5\", value: \"1.5\" },\n                        { text: \"2\", value: \"2\" },\n                        { text: \"2.5\", value: \"2.5\" },\n                    ]\n                }\n            }\n        }));\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        const kendo = window.kendo,\n            Editor = kendo.ui.editor,\n            Tool = Editor.Tool,\n            Command = Editor.Command,\n            EditorUtils = Editor.EditorUtils,\n            registerTool = EditorUtils.registerTool,\n            DOM = Editor.Dom,\n            SPACE_UNICODE = \"\\u00B7\",\n            NEW_LINE_UNICODE = \"\\u21B5\";\n\n        const createMark = function(range, document, character, scrollTop, index, scrollableWrapper) {\n            const clonedRange = range.cloneRange(),\n                  container = clonedRange.startContainer;\n\n            let domRect, x, y, textNode, parentRect;\n\n            if (index !== undefined && index !== null) {\n                clonedRange.setStart(container, index);\n                clonedRange.setEnd(container, index + 1);\n            }\n\n            domRect = clonedRange.getBoundingClientRect();\n\n            if (scrollableWrapper) {\n                parentRect = scrollableWrapper.getBoundingClientRect();\n                x = domRect.left - parentRect.left - domRect.width / 2;\n                y = domRect.top - parentRect.top + domRect.height + scrollTop;\n            } else {\n                if (character === SPACE_UNICODE) {\n                    x = domRect.x - domRect.width / 4;\n                    y = domRect.y + domRect.height + scrollTop;\n                } else if (character === NEW_LINE_UNICODE) {\n                    x = domRect.x;\n                    y = domRect.y + domRect.height + scrollTop;\n                }\n            }\n\n            textNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n            textNode.setAttributeNS(null, \"x\", x);\n            textNode.setAttributeNS(null, \"y\", y);\n            textNode.setAttributeNS(null, \"fill\", \"#6098f2\");\n            textNode.setAttributeNS(null, \"font-size\", `${Math.ceil(domRect.height + domRect.width)}px`);\n            textNode.textContent = character;\n\n            return textNode;\n        };\n\n        const appendSvgMarks = function() {\n            const that = this,\n                range = that.getRange().cloneRange(),\n                overlay = that._formattingMarksOverlay[0],\n                fragment = that.document.createDocumentFragment(),\n                document = that.document,\n                isInlineEditor = that._isInlineEditor(),\n                scrollableWrapper = isInlineEditor ? that.body.parentElement : null,\n                scrollTop = isInlineEditor ? scrollableWrapper.scrollTop : document.documentElement.scrollTop;\n\n            if (!that.body.firstChild && !that.body.lastChild) {\n                return;\n            }\n\n            range.setStart(that.body.firstChild, 0);\n            range.setEnd(that.body.lastChild, 0);\n\n            const nodes = DOM.getTextNodes(that.body).concat($(that.body).find(\"br\").toArray());\n\n            nodes.forEach((node) => {\n                if (node.nodeType === DOM.nodeTypes.TEXT_NODE) {\n                    range.selectNodeContents(node);\n\n                    for (let i = range.startOffset; i < range.endOffset; i++) {\n                        if ((range.startContainer.textContent.charCodeAt(i) === 32 || range.startContainer.textContent.charCodeAt(i) === 160)) {\n                            fragment.appendChild(createMark(range, document, SPACE_UNICODE, scrollTop, i, scrollableWrapper));\n                        }\n                    }\n                } else {\n                    range.selectNode(node);\n                    fragment.appendChild(createMark(range, document, NEW_LINE_UNICODE, scrollTop, null, scrollableWrapper));\n                }\n            });\n\n            overlay.appendChild(fragment);\n        };\n\n        const clearFormattingMarksOverlay = function(editor) {\n            editor._formattingMarksOverlay.empty();\n        };\n\n        const applyFormattingMarks = function(editor) {\n            editor._updateFormattingMarksOverlayHeight();\n            appendSvgMarks.call(editor);\n        };\n\n        const FormattingMarksCommand = Command.extend({\n            exec: function() {\n                const cmd = this,\n                    range = cmd.lockRange(true),\n                    editor = cmd.editor;\n\n                if (!editor._toggledFormattingMarks) {\n                    editor._toggledFormattingMarks = true;\n                    editor._appendFormattingMarksOverlay();\n                    editor._appendFormattingMarksStyles();\n                    clearFormattingMarksOverlay(editor);\n                    applyFormattingMarks(editor);\n                } else {\n                    editor._toggledFormattingMarks = false;\n                    editor._destroyFormattingMarksOverlay();\n                }\n\n                cmd.releaseRange(range);\n            }\n        });\n\n        $.extend(Editor, {\n            FormattingMarksCommand: FormattingMarksCommand,\n            applyFormattingMarks: applyFormattingMarks,\n            clearFormattingMarksOverlay: clearFormattingMarksOverlay\n        });\n\n        registerTool(\"formattingMarks\", new Tool({ command: FormattingMarksCommand, icon: \"paragraphMark\", ui: { togglable: true } }));\n    })(window.kendo.jQuery);\n\n    (function(kendo, undefined$1) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n        var parseFloat = global.parseFloat;\n\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n\n        var Editor = kendo.ui.editor;\n\n        var PERCENTAGE = \"%\";\n        var PIXEL = \"px\";\n        var REGEX_NUMBER_IN_PERCENTAGES = /(\\d+)(\\.?)(\\d*)%/;\n        var REGEX_NUMBER_IN_PIXELS = /(\\d+)(\\.?)(\\d*)px/;\n        var STRING = \"string\";\n\n        function constrain(options) {\n            var value = options.value;\n            var lowerBound = options.min;\n            var upperBound = options.max;\n\n            return max(min(parseFloat(value), parseFloat(upperBound)), parseFloat(lowerBound));\n        }\n\n        function getScrollBarWidth(element) {\n            if (element && !$(element).is(\"body\") && element.scrollHeight > element.clientHeight) {\n                return kendo.support.scrollbar();\n            }\n\n            return 0;\n        }\n\n        function calculatePercentageRatio(value, total) {\n            if (inPercentages(value)) {\n                return parseFloat(value);\n            }\n            else {\n                return ((parseFloat(value) / total) * 100);\n            }\n        }\n\n        function inPercentages(value) {\n            return (typeof(value) === STRING && REGEX_NUMBER_IN_PERCENTAGES.test(value));\n        }\n\n        function inPixels(value) {\n            return (typeof(value) === STRING && REGEX_NUMBER_IN_PIXELS.test(value));\n        }\n\n        function toPercentages(value) {\n            return (parseFloat(value) + PERCENTAGE);\n        }\n\n        function toPixels(value) {\n            return (parseFloat(value) + PIXEL);\n        }\n\n        var ResizingUtils = {\n            constrain: constrain,\n            getScrollBarWidth: getScrollBarWidth,\n            calculatePercentageRatio: calculatePercentageRatio,\n            inPercentages: inPercentages,\n            inPixels: inPixels,\n            toPercentages: toPercentages,\n            toPixels: toPixels\n        };\n\n        extend(Editor, {\n            ResizingUtils: ResizingUtils\n        });\n    })(window.kendo);\n\n    (function(kendo, undefined$1) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n\n        var KEY_DOWN = \"keydown\";\n        var MOUSE_DOWN = \"mousedown\";\n        var MOUSE_ENTER = \"mouseenter\";\n        var MOUSE_LEAVE = \"mouseleave\";\n        var MOUSE_MOVE = \"mousemove\";\n        var MOUSE_UP = \"mouseup\";\n\n        var COMMA = \",\";\n        var DOT = \".\";\n        var LAST_CHILD = \":last-child\";\n\n        var TABLE = \"table\";\n\n        var TableElementResizing = Class.extend({\n            init: function(element, options) {\n                var that = this;\n\n                that.options = extend({}, that.options, options);\n\n                that.options.tags = Array.isArray(that.options.tags) ? that.options.tags : [that.options.tags];\n\n                if ($(element).is(TABLE)) {\n                    that.element = element;\n                    that._attachEventHandlers();\n                }\n            },\n\n            destroy: function() {\n                var that = this;\n                var eventNamespace = that.options.eventNamespace;\n\n                if (that.element) {\n                    $(that.element).off(eventNamespace);\n                    that.element = null;\n                }\n\n                $(that.options.rootElement).off(KEY_DOWN + eventNamespace);\n\n                that._destroyResizeHandle();\n            },\n\n            options: {\n                tags: [],\n                min: 0,\n                rootElement: null,\n                eventNamespace: \"\",\n                rtl: false,\n                handle: {\n                    dataAttribute: \"\",\n                    height: 0,\n                    width: 0,\n                    classNames: {},\n                    template: \"\"\n                }\n            },\n\n            _attachEventHandlers: function() {\n                var that = this;\n                var options = that.options;\n\n                $(that.element).on(MOUSE_MOVE + options.eventNamespace, options.tags.join(COMMA), that.detectElementBorderHovering.bind(that));\n            },\n\n            resizingInProgress: function() {\n                var that = this;\n                var resizable = that._resizable;\n\n                if (resizable) {\n                    return !!resizable.resizing;\n                }\n\n                return false;\n            },\n\n            resize: noop,\n\n            detectElementBorderHovering: function(e) {\n                var that = this;\n                var options = that.options;\n                var handleOptions = options.handle;\n                var tableElement = $(e.currentTarget);\n                var resizeHandle = that.resizeHandle;\n                var dataAttribute = handleOptions.dataAttribute;\n\n                if (!that.resizingInProgress()) {\n                    if (!tableElement.is(LAST_CHILD) && that.elementBorderHovered(tableElement, e)) {\n                        if (resizeHandle) {\n                            if (resizeHandle.data(dataAttribute) && resizeHandle.data(dataAttribute) !== tableElement[0]) {\n                                that.showResizeHandle(tableElement, e);\n                            }\n                        }\n                        else {\n                            that.showResizeHandle(tableElement, e);\n                        }\n                    }\n                    else {\n                        if (resizeHandle) {\n                            that._destroyResizeHandle();\n                        }\n                    }\n                }\n            },\n\n            elementBorderHovered: noop,\n\n            showResizeHandle: function(tableElement, e) {\n                var that = this;\n\n                if (e.buttons !== 0) {\n                    //prevent showing when a mouse button is still being pressed\n                    return;\n                }\n\n                that._initResizeHandle();\n                that.setResizeHandlePosition(tableElement);\n                that.setResizeHandleDimensions();\n                that.setResizeHandleDataAttributes(tableElement[0]);\n                that._attachResizeHandleEventHandlers();\n\n                that._initResizable(tableElement);\n\n                that._hideResizeMarker();\n                that.resizeHandle.show();\n            },\n\n            _initResizeHandle: function() {\n                var that = this;\n                var options = that.options;\n\n                that._destroyResizeHandle();\n\n                that.resizeHandle = $(options.handle.template).appendTo(options.rootElement);\n            },\n\n            setResizeHandlePosition: noop,\n\n            setResizeHandleDimensions: noop,\n\n            setResizeHandleDataAttributes: function(tableElement) {\n                var that = this;\n\n                that.resizeHandle.data(that.options.handle.dataAttribute, tableElement);\n            },\n\n            _attachResizeHandleEventHandlers: function() {\n                var that = this;\n                var options = that.options;\n                var eventNamespace = options.eventNamespace;\n                var markerClass = options.handle.classNames.marker;\n                var resizeHandle = that.resizeHandle;\n\n                that.resizeHandle\n                    .on(MOUSE_DOWN + eventNamespace, function() {\n                        resizeHandle.find(DOT + markerClass).show();\n                    })\n                    .on(MOUSE_UP + eventNamespace, function() {\n                        resizeHandle.find(DOT + markerClass).hide();\n                    });\n            },\n\n            _hideResizeMarker: function() {\n                var that = this;\n\n                that.resizeHandle.find(DOT + that.options.handle.classNames.marker).hide();\n            },\n\n            _destroyResizeHandle: function() {\n                var that = this;\n\n                if (that.resizeHandle) {\n                    that._destroyResizable();\n                    that.resizeHandle.off(that.options.eventNamespace).remove();\n                    that.resizeHandle = null;\n                }\n            },\n\n            _initResizable: function(tableElement) {\n                var that = this;\n\n                if (!that.resizeHandle) {\n                    return;\n                }\n\n                that._destroyResizable();\n\n                that._resizable = new kendo.ui.Resizable(tableElement, {\n                    draggableElement: that.resizeHandle[0],\n                    start: that.onResizeStart.bind(that),\n                    resize: that.onResize.bind(that),\n                    resizeend: that.onResizeEnd.bind(that)\n                });\n            },\n\n            _destroyResizable: function() {\n                var that = this;\n\n                if (that._resizable) {\n                    that._resizable.destroy();\n                    that._resizable = null;\n                }\n            },\n\n            onResizeStart: function() {\n                this._disableKeyboard();\n            },\n\n            onResize: function(e) {\n                this.setResizeHandleDragPosition(e);\n            },\n\n            setResizeHandleDragPosition: noop,\n\n            onResizeEnd: function(e) {\n                var that = this;\n\n                that.resize(e);\n                that._destroyResizeHandle();\n                that._enableKeyboard();\n\n                if (this.options.editor) {\n                    this.options.editor._handleSpaceAndNewLines();\n                }\n            },\n\n            _enableKeyboard: function() {\n                var options = this.options;\n\n                $(options.rootElement).off(KEY_DOWN + options.eventNamespace);\n            },\n\n            _disableKeyboard: function() {\n                var options = this.options;\n\n                $(options.rootElement).on(KEY_DOWN + options.eventNamespace, function(e) {\n                    e.preventDefault();\n                });\n            },\n\n            _forceResizing: function(e) {\n                var resizable = this._resizable;\n\n                if (resizable && resizable.userEvents) {\n                    resizable.userEvents._end(e);\n                }\n            }\n        });\n\n        var ResizingFactory = Class.extend({\n            create: function(editor, options) {\n                var that = this;\n                var resizingName = options.name;\n                var NS = options.eventNamespace;\n\n                $(editor.body)\n                    .on(MOUSE_ENTER + NS, TABLE, function(e) {\n                        var table = e.currentTarget;\n                        var resizing = editor[resizingName];\n\n                        e.stopPropagation();\n\n                        if (resizing) {\n                            if (resizing.element !== table && !resizing.resizingInProgress()) {\n                                that._destroyResizing(editor, options);\n                                that._initResizing(editor, table, options);\n                            }\n                        }\n                        else {\n                            that._initResizing(editor, table, options);\n                        }\n                    })\n                    .on(MOUSE_LEAVE + NS, TABLE, function(e) {\n                        var parentTable;\n                        var resizing = editor[resizingName];\n\n                        e.stopPropagation();\n\n                        if (resizing && !resizing.resizingInProgress() && !resizing.resizeHandle) {\n                            parentTable = $(resizing.element).parents(TABLE)[0];\n\n                            if (parentTable) {\n                                that._destroyResizing(editor, options);\n                                that._initResizing(editor, parentTable, options);\n                            }\n                        }\n                    })\n                    .on(MOUSE_LEAVE + NS, function() {\n                        var resizing = editor[resizingName];\n\n                        if (resizing && !resizing.resizingInProgress()) {\n                            that._destroyResizing(editor, options);\n                        }\n                    })\n                    .on(MOUSE_UP + NS, function(e) {\n                        var resizing = editor[resizingName];\n                        var parentTable;\n\n                        if (resizing && resizing.resizingInProgress()) {\n                            parentTable = $(e.target).parents(TABLE)[0];\n\n                            if (parentTable) {\n                                resizing._forceResizing(e);\n                                that._destroyResizing(editor, options);\n                                that._initResizing(editor, parentTable, options);\n                            }\n                        }\n                    });\n            },\n\n            dispose: function(editor, options) {\n                $(editor.body).off(options.eventNamespace);\n            },\n\n            _initResizing: function(editor, tableElement, options) {\n                var resizingName = options.name;\n                var resizingType = options.type;\n\n                editor[resizingName] = new resizingType(tableElement, {\n                    rtl: kendo.support.isRtl(editor.element),\n                    rootElement: editor.body,\n                    editor: editor\n                });\n            },\n\n            _destroyResizing: function(editor, options) {\n                var resizingName = options.name;\n\n                if (editor[resizingName]) {\n                    editor[resizingName].destroy();\n                    editor[resizingName] = null;\n                }\n            }\n        });\n        ResizingFactory.current = new ResizingFactory();\n\n        TableElementResizing.create = function(editor, options) {\n            ResizingFactory.current.create(editor, options);\n        };\n\n        TableElementResizing.dispose = function(editor, options) {\n            ResizingFactory.current.dispose(editor, options);\n        };\n\n        extend(Editor, {\n            TableElementResizing: TableElementResizing\n        });\n\n    })(window.kendo);\n\n    (function(kendo, undefined$1) {\n        var global = window;\n        var math = global.Math;\n        var abs = math.abs;\n\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n\n        var Editor = kendo.ui.editor;\n        var dom = Editor.Dom;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n\n        var NS = \".kendoEditorColumnResizing\";\n        var RESIZE_HANDLE_CLASS = \"k-column-resize-handle\";\n        var RESIZE_MARKER_CLASS = \"k-column-resize-marker\";\n\n        var BODY = \"body\";\n        var TBODY = \"tbody\";\n        var THEAD = \"thead\";\n        var TD = \"td\";\n        var TH = \"th\";\n        var TR = \"tr\";\n\n        var COLATTR = \"col-index\";\n\n        var COMMA = \",\";\n        var WIDTH = \"width\";\n\n        var ColumnResizing = TableElementResizing.extend({\n            options: {\n                tags: [TD, TH],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: \"column\",\n                    width: 10,\n                    height: 0,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template:\n                        '<div class=\"k-column-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                            '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                                '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                            '</div>' +\n                        '</div>'\n                }\n            },\n\n            elementBorderHovered: function(column, e) {\n                var that = this;\n                var options = that.options;\n                var handleWidth = options.handle.width;\n                var borderOffset = column.offset().left + (options.rtl ? 0 : outerWidth(column));\n\n\n                var mousePosition = e.clientX + $(column[0].ownerDocument).scrollLeft();\n\n                if ((mousePosition > (borderOffset - handleWidth)) && (mousePosition < (borderOffset + handleWidth))) {\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            },\n\n            setResizeHandlePosition: function(column) {\n                var that = this;\n                var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n                var options = that.options;\n                var rtl = options.rtl;\n                var handleWidth = options.handle.width;\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n                var columnWidthOffset = rtl ? 0 : outerWidth(column);\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var columnOffsetLeft = column.offset().left -\n                                        (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                        parseFloat(column.css(\"marginLeft\"));\n                var innerElementOffsetTop = tableInnerElement.offset().top -\n                                        (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                        parseFloat(tableInnerElement.css(\"marginTop\"));\n                var browser = kendo.support.browser;\n\n                if (rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    scrollLeftOffset = scrollLeftOffset * -1;\n                }\n\n                that.resizeHandle.css({\n                    top: innerElementOffsetTop + scrollTopOffset,\n                    left: columnOffsetLeft + columnWidthOffset + (scrollLeftOffset - scrollBarWidth) - (handleWidth / 2),\n                    position: \"absolute\"\n                });\n            },\n\n            setResizeHandleDimensions: function() {\n                var that = this;\n                var tableHead = $(that.element).children(THEAD);\n                var tableBody = $(that.element).children(TBODY);\n                var fullHeight = tableHead.length > 0 ? tableHead.height() + tableBody.height() : tableBody.height();\n\n                that.resizeHandle.css({\n                    width: that.options.handle.width,\n                    height: fullHeight\n                });\n            },\n\n            setResizeHandleDragPosition: function(e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var rootElement = $(options.rootElement);\n                var handleWidth = options.handle ? options.handle.width : 0;\n                var min = options.min;\n                var rtl = options.rtl;\n                var columnWidth = outerWidth(column);\n                var columnLeftOffset = column.offset().left -\n                                        (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                        parseFloat(column.css(\"marginLeft\"));\n                var adjacentColumnWidth = outerWidth(column.next());\n                var resizeHandle = $(that.resizeHandle);\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var resizeHandleOffsetLeft = resizeHandle.offset().left -\n                                                (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                                parseFloat(resizeHandle.css(\"marginLeft\"));\n                var browser = kendo.support.browser;\n\n                if (rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    scrollLeftOffset = scrollLeftOffset * -1;\n                }\n\n                var handleOffset = constrain({\n                    value: resizeHandleOffsetLeft + (scrollLeftOffset - scrollBarWidth) + e.x.delta,\n                    min: columnLeftOffset + (scrollLeftOffset - scrollBarWidth) - (rtl ? adjacentColumnWidth : 0) + min,\n                    max: columnLeftOffset + columnWidth + (scrollLeftOffset - scrollBarWidth) + (rtl ? 0 : adjacentColumnWidth) - handleWidth - min\n                });\n\n                resizeHandle.css({ left: handleOffset });\n            },\n\n            resize: function(e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var rtlModifier = options.rtl ? (-1) : 1;\n                var min = options.min;\n                var initialDeltaX = rtlModifier * e.x.initialDelta;\n                var newWidth;\n                var initialAdjacentColumnWidth;\n                var initialColumnWidth;\n                var colIndex;\n                var nextColumn;\n\n                dom.reMapTableColumns(that.element, COLATTR);\n\n                colIndex = parseInt(column.attr(COLATTR), 10);\n\n                if (column.prop(\"colSpan\") > 1) {\n                    column = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + column.prop(\"colSpan\") - 1) + \"]\").eq(0);\n                    colIndex = parseInt(column.attr(COLATTR), 10);\n                }\n\n                nextColumn = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + 1) + \"]:not([colspan])\");\n\n                that._setTableComputedWidth();\n                that._setColumnsComputedWidth();\n\n                initialColumnWidth = outerWidth(column);\n                initialAdjacentColumnWidth = outerWidth(nextColumn);\n\n                newWidth = constrain({\n                    value: initialColumnWidth + initialDeltaX,\n                    min: min,\n                    max: initialColumnWidth + initialAdjacentColumnWidth - min\n                });\n\n                that._resizeColumn(column[0], newWidth);\n                that._resizeTopAndBottomColumns(column[0], newWidth);\n                that._resizeAdjacentColumns(parseInt(column.attr(COLATTR),10), initialAdjacentColumnWidth, initialColumnWidth, (initialColumnWidth - newWidth));\n\n                dom.clearTableMappings(that.element, COLATTR);\n            },\n\n            _setTableComputedWidth: function() {\n                var element = this.element;\n\n                if (element.style[WIDTH] === \"\") {\n                    element.style[WIDTH] = toPixels(outerWidth($(element)));\n                }\n            },\n\n            _setColumnsComputedWidth: function() {\n                var that = this;\n                var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n                var innerElementWidth = outerWidth(tableInnerElement);\n                var columns = tableInnerElement.children(TR).children(TD);\n                var length = columns.length;\n                var currentColumnsWidths = columns.map(function() {\n                    return outerWidth($(this));\n                });\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    if (inPercentages(columns[i].style[WIDTH])) {\n                        columns[i].style[WIDTH] = toPercentages(calculatePercentageRatio(currentColumnsWidths[i], innerElementWidth));\n                    }\n                    else {\n                        columns[i].style[WIDTH] = toPixels(currentColumnsWidths[i]);\n                    }\n                }\n            },\n\n            _resizeTopAndBottomColumns: function(column, newWidth) {\n                var that = this;\n                var columnIndex = $(column).attr(COLATTR);\n                var topAndBottomColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                    .filter(function() {\n                        var cell = this;\n                        return ($(cell).attr(COLATTR) === columnIndex && cell !== column);\n                    });\n                var length = topAndBottomColumns.length;\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    that._resizeColumn(topAndBottomColumns[i], newWidth);\n                }\n            },\n\n            _resizeColumn: function(column, newWidth) {\n                var innerTableElement = $(this.element.tHead || this.element.tBodies[0]);\n                if (inPercentages(column.style[WIDTH])) {\n                    column.style[WIDTH] = toPercentages(calculatePercentageRatio(newWidth, outerWidth(innerTableElement)));\n                }\n                else {\n                    column.style[WIDTH] = toPixels(newWidth);\n                }\n            },\n\n            _resizeAdjacentColumns: function(columnIndex, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var adjacentColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                    .filter(function() {\n                        return (parseInt($(this).attr(COLATTR),10) === (columnIndex + 1));\n                    });\n                var length = adjacentColumns.length;\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    that._resizeAdjacentColumn(adjacentColumns[i], initialAdjacentColumnWidth, initialColumnWidth, deltaWidth);\n                }\n            },\n\n            _resizeAdjacentColumn: function(adjacentColumn, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var min = that.options.min;\n                var newWidth;\n\n                newWidth = constrain({\n                    value: initialAdjacentColumnWidth + deltaWidth,\n                    min: min,\n                    max: abs(initialColumnWidth + initialAdjacentColumnWidth - min)\n                });\n\n                that._resizeColumn(adjacentColumn, newWidth);\n            }\n        });\n\n        ColumnResizing.create = function(editor) {\n            TableElementResizing.create(editor, {\n                name: \"columnResizing\",\n                type: ColumnResizing,\n                eventNamespace: NS\n            });\n        };\n\n        ColumnResizing.dispose = function(editor) {\n            TableElementResizing.dispose(editor, {\n                eventNamespace: NS\n            });\n        };\n\n        extend(Editor, {\n            ColumnResizing: ColumnResizing\n        });\n\n    })(window.kendo);\n\n    (function(kendo, undefined$1) {\n        var math = window.Math;\n        var abs = math.abs;\n\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n\n        var Editor = kendo.ui.editor;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerHeight = kendo._outerHeight;\n\n        var NS = \".kendoEditorRowResizing\";\n        var RESIZE_HANDLE_CLASS = \"k-row-resize-handle\";\n        var RESIZE_HANDLE_MARKER_WRAPPER_CLASS = \"k-row-resize-marker-wrapper\";\n        var RESIZE_MARKER_CLASS = \"k-row-resize-marker\";\n\n        var BODY = \"body\";\n        var TR = \"tr\";\n        var TBODY = \"tbody\";\n        var THEAD = \"thead\";\n\n        var COMMA = \",\";\n        var HEIGHT = \"height\";\n\n        var RowResizing = TableElementResizing.extend({\n            options: {\n                tags: [TR],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: \"row\",\n                    width: 0,\n                    height: 10,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template:\n                        '<div class=\"k-row-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                            '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                                '<div class=\"' + RESIZE_HANDLE_MARKER_WRAPPER_CLASS + '\">' +\n                                    '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                                '</div>' +\n                            '</div>' +\n                        '</div>'\n                }\n            },\n\n            elementBorderHovered: function(tableElement, e) {\n                var that = this;\n                var handleHeight = that.options.handle[HEIGHT];\n                var borderOffset = tableElement.offset().top + outerHeight(tableElement);\n                var mousePosition = e.clientY + $(tableElement[0].ownerDocument).scrollTop();\n\n                if ((mousePosition > (borderOffset - handleHeight)) && (mousePosition < (borderOffset + handleHeight))) {\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            },\n\n            setResizeHandlePosition: function(row) {\n                var that = this;\n                var options = that.options;\n                var handleHeight = options.handle[HEIGHT];\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n\n                var rowOffsetLeft = row.offset().left -\n                                        (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                        parseFloat(row.css(\"marginLeft\"));\n                var rowOffsetTop = row.offset().top -\n                                        (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                        parseFloat(row.css(\"marginTop\"));\n                var browser = kendo.support.browser;\n\n                if (options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    scrollLeftOffset = scrollLeftOffset * -1;\n                }\n\n                that.resizeHandle.css({\n                    top: rowOffsetTop + outerHeight(row) + scrollTopOffset - (handleHeight / 2),\n                    left: rowOffsetLeft + (scrollLeftOffset - scrollBarWidth),\n                    position: \"absolute\"\n                });\n            },\n\n            setResizeHandleDimensions: function() {\n                var that = this;\n                var innerTableElement = $(that.element.tHead || that.element.tBodies[0]);\n\n                that.resizeHandle.css({\n                    width: innerTableElement.width(),\n                    height: that.options.handle[HEIGHT]\n                });\n            },\n\n            setResizeHandleDragPosition: function(e) {\n                var that = this;\n                var options = that.options;\n                var min = options.min;\n                var tableHead = $(that.element).children(THEAD);\n                var tableBody = $(that.element).children(TBODY);\n                var topInnerTableElement = tableHead.length > 0 ? tableHead : tableBody;\n                var resizeHandle = $(that.resizeHandle);\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var $row = $(row);\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var tableTopOffset = topInnerTableElement.offset().top -\n                                        (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                        parseFloat(topInnerTableElement.css(\"marginTop\"));\n\n                var rowOffsetTop = $row.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat($row.css(\"marginTop\"));\n\n                var resizeHandleOffsetTop = resizeHandle.offset().top -\n                                    (Math.max(0 , rootElement.offset().top) + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(resizeHandle.css(\"marginTop\"));\n\n                var handleOffset = constrain({\n                    value: resizeHandleOffsetTop + scrollTopOffset + e.y.delta,\n                    min: rowOffsetTop + scrollTopOffset + min,\n                    max: tableTopOffset + outerHeight(tableHead) + outerHeight(tableBody) + scrollTopOffset - options.handle[HEIGHT] - min\n                });\n\n                resizeHandle.css({ top: handleOffset });\n            },\n\n            resize: function(e) {\n                var that = this;\n                var options = that.options;\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var currentRowHeight = outerHeight($(row));\n                var element = $(that.element);\n                var initialTableHeight = outerHeight(element);\n                var tableHead = element.children(THEAD);\n                var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n                var tableBody = element.children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var initialStyleHeight = row.style[HEIGHT];\n                var newRowHeight = constrain({\n                    value: currentRowHeight + e.y.initialDelta,\n                    min: options.min,\n                    max: abs(tableHeadHeight + tableBodyHeight - options.min)\n                });\n\n                that._setRowsHeightInPixels();\n                row.style[HEIGHT] = toPixels(newRowHeight);\n                that._setTableHeight(initialTableHeight + (newRowHeight - currentRowHeight));\n\n                if (inPercentages(initialStyleHeight)) {\n                    //resize rows in percentages as late as possible to prevent incorrect precision calculations\n                    that._setRowsHeightInPercentages();\n                }\n            },\n\n            _setRowsHeightInPixels: function() {\n                var that = this;\n                var rows = $(that.element).children(TBODY + COMMA + THEAD).children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function() {\n                    return outerHeight($(this));\n                });\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            },\n\n            _setRowsHeightInPercentages: function() {\n                var that = this;\n                var tableHead = $(that.element).children(THEAD);\n                var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function() {\n                    return outerHeight($(this));\n                });\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n                }\n            },\n\n            _setTableHeight: function(newHeight) {\n                var element = this.element;\n\n                if (inPercentages(element.style[HEIGHT])) {\n                    element.style[HEIGHT] = toPercentages(calculatePercentageRatio(newHeight, $(element).parent().height()));\n                }\n                else {\n                    element.style[HEIGHT] = toPixels(newHeight);\n                }\n            }\n        });\n\n        RowResizing.create = function(editor) {\n            TableElementResizing.create(editor, {\n                name: \"rowResizing\",\n                type: RowResizing,\n                eventNamespace: NS\n            });\n        };\n\n        RowResizing.dispose = function(editor) {\n            TableElementResizing.dispose(editor, {\n                eventNamespace: NS\n            });\n        };\n\n        extend(Editor, {\n            RowResizing: RowResizing\n        });\n\n    })(window.kendo);\n\n    (function(kendo, undefined$1) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var Draggable = kendo.ui.Draggable;\n        var Observable = kendo.Observable;\n        var getScrollBarWidth = Editor.ResizingUtils.getScrollBarWidth;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n\n        var NS = \".kendoEditorElementResizeHandle\";\n        var RESIZE_HANDLE_CLASS = \"k-element-resize-handle\";\n\n        var DRAG_START = \"dragStart\";\n        var DRAG = \"drag\";\n        var DRAG_END = \"dragEnd\";\n        var HALF_INSIDE = \"halfInside\";\n        var MOUSE_OVER = \"mouseover\";\n        var MOUSE_OUT = \"mouseout\";\n\n        var BODY = \"body\";\n        var TABLE = \"table\";\n\n        var EAST = \"east\";\n        var NORTH = \"north\";\n        var NORTHEAST = \"northeast\";\n        var NORTHWEST = \"northwest\";\n        var SOUTH = \"south\";\n        var SOUTHEAST = \"southeast\";\n        var SOUTHWEST = \"southwest\";\n        var WEST = \"west\";\n\n        var DOT = \".\";\n\n        var ElementResizeHandle = Observable.extend({\n            init: function(options) {\n                var that = this;\n\n                Observable.fn.init.call(that);\n\n                that.options = extend({}, that.options, options);\n                that.element = $(that.options.template).appendTo(that.options.appendTo)[0];\n\n                that._attachEventHandlers();\n                that._addStyles();\n                that._initDraggable();\n                that._initPositioningStrategy();\n                that._initDraggingStrategy();\n\n                $(that.element).data(TABLE, that.options.resizableElement);\n            },\n\n            destroy: function() {\n                var that = this;\n\n                $(that.element).off(NS).remove();\n                that.element = null;\n\n                that._destroyDraggable();\n\n                that.unbind();\n            },\n\n            options: {\n                appendTo: null,\n                direction: SOUTHEAST,\n                resizableElement: null,\n                rtl: false,\n                template:\n                    \"<div class='k-element-resize-handle-wrapper' unselectable='on' contenteditable='false'>\" +\n                        \"<div class='\" + RESIZE_HANDLE_CLASS + \"'></div>\" +\n                    \"</div>\"\n            },\n\n            events: [\n                DRAG_START,\n                DRAG,\n                DRAG_END,\n                MOUSE_OVER,\n                MOUSE_OUT\n            ],\n\n            show: function() {\n                this._setPosition();\n            },\n\n            _setPosition: function() {\n                var that = this;\n                var position = that._positioningStrategy.getPosition();\n\n                $(that.element).css({\n                    top: position.top,\n                    left: position.left,\n                    position: \"absolute\"\n                });\n            },\n\n            _attachEventHandlers: function() {\n                var that = this;\n\n                $(that.element)\n                    .on(MOUSE_OVER + NS, that._onMouseOver.bind(that))\n                    .on(MOUSE_OUT + NS, that._onMouseOut.bind(that));\n            },\n\n            _onMouseOver: function() {\n                this.trigger(MOUSE_OVER);\n            },\n\n            _onMouseOut: function() {\n                this.trigger(MOUSE_OUT);\n            },\n\n            _addStyles: function() {\n                var that = this;\n                $(that.element).children(DOT + RESIZE_HANDLE_CLASS).addClass(\"k-resize-\" + that.options.direction);\n            },\n\n            _initPositioningStrategy: function() {\n                var that = this;\n                var options = that.options;\n\n                that._positioningStrategy = HandlePositioningStrategy.create({\n                    name: options.direction,\n                    handle: that.element,\n                    resizableElement: options.resizableElement,\n                    rootElement: options.rootElement,\n                    rtl: options.rtl\n                });\n            },\n\n            _initDraggable: function() {\n                var that = this;\n                var element = that.element;\n\n                if (that._draggable || !element) {\n                    return;\n                }\n\n                that._draggable = new Draggable(element, {\n                    dragstart: that._onDragStart.bind(that),\n                    drag: that._onDrag.bind(that),\n                    dragend: that._onDragEnd.bind(that)\n                });\n            },\n\n            _onDragStart: function() {\n                this.trigger(DRAG_START);\n            },\n\n            _onDrag: function(e) {\n                var that = this;\n\n                that.trigger(DRAG, that._draggingStrategy.adjustDragDelta({\n                    deltaX: e.x.delta,\n                    deltaY: e.y.delta,\n                    initialDeltaX: e.x.initialDelta,\n                    initialDeltaY: e.y.initialDelta\n                }));\n\n                if (that.options.editor) {\n                    that.options.editor._handleSpaceAndNewLines();\n                }\n            },\n\n            _onDragEnd: function() {\n                this.trigger(DRAG_END);\n            },\n\n            _destroyDraggable: function() {\n                var that = this;\n\n                if (that._draggable) {\n                    that._draggable.destroy();\n                    that._draggable = null;\n                }\n            },\n\n            _initDraggingStrategy: function() {\n                var that = this;\n\n                that._draggingStrategy = HandleDraggingStrategy.create({\n                    name: that.options.direction\n                });\n            }\n        });\n\n        var StrategyFactory = Class.extend({\n            init: function() {\n                this._items = [];\n            },\n\n            register: function(name, type) {\n                this._items.push({\n                    name: name,\n                    type: type\n                });\n            },\n\n            create: function(options) {\n                var items = this._items;\n                var itemsLength = items.length;\n                var name = options.name ? options.name.toLowerCase() : \"\";\n                var match;\n                var item;\n                var i;\n\n                for (i = 0; i < itemsLength; i++) {\n                    item = items[i];\n\n                    if (item.name.toLowerCase() === name) {\n                        match = item;\n                        break;\n                    }\n                }\n\n                if (match) {\n                    return new match.type(options);\n                }\n            }\n        });\n\n        var PositioningStrategyFactory = StrategyFactory.extend({});\n        PositioningStrategyFactory.current = new PositioningStrategyFactory();\n\n        var HandlePositioningStrategy = Class.extend({\n            init: function(options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n\n            options: {\n                handle: null,\n                offset: HALF_INSIDE,\n                resizableElement: null,\n                rootElement: null,\n                rtl: false\n            },\n\n            getPosition: function() {\n                var that = this;\n\n                var position = that.calculatePosition();\n                var handleOffsetPosition = that.applyHandleOffset(position);\n                var scrollOffsetPosition = that.applyScrollOffset(handleOffsetPosition);\n\n                return scrollOffsetPosition;\n            },\n\n            calculatePosition: noop,\n\n            applyHandleOffset: function(position) {\n                var options = this.options;\n                var handle = $(options.handle);\n\n                if (options.offset === HALF_INSIDE) {\n                    return {\n                        top: position.top - (outerHeight(handle) / 2),\n                        left: position.left - (outerWidth(handle) / 2)\n                    };\n                }\n\n                return position;\n            },\n\n            applyScrollOffset: function(position) {\n                var options = this.options;\n                var rootElement = $(options.rootElement);\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var browser = kendo.support.browser;\n                var rootLeft;\n\n                if (!rootElement.is(BODY)) {\n                    rootLeft = kendo.scrollLeft(rootElement) || 0;\n\n                    if (options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                        rootLeft = rootLeft * -1;\n                    }\n\n                    return {\n                        top: position.top + (rootElement.scrollTop() || 0),\n                        left: position.left + rootLeft - scrollBarWidth\n                    };\n                }\n\n                return position;\n            }\n        });\n\n        HandlePositioningStrategy.create = function(options) {\n            return PositioningStrategyFactory.current.create(options);\n        };\n\n        var EastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top + (outerHeight(resizableElement) / 2),\n                    left: offset.left + outerWidth(resizableElement) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(EAST, EastPositioningStrategy);\n\n        var NorthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top,\n                    left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTH, NorthPositioningStrategy);\n\n        var NortheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top,\n                    left: offset.left + outerWidth(resizableElement) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHEAST, NortheastPositioningStrategy);\n\n        var NorthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top,\n                    left: offset.left + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHWEST, NorthwestPositioningStrategy);\n\n        var SouthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTH, SouthPositioningStrategy);\n\n        var SoutheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + outerWidth(resizableElement) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHEAST, SoutheastPositioningStrategy);\n\n        var SouthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHWEST, SouthwestPositioningStrategy);\n\n        var WestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top + (outerHeight(resizableElement) / 2),\n                    left: offset.left + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(WEST, WestPositioningStrategy);\n\n        var DraggingStrategyFactory = StrategyFactory.extend({});\n        DraggingStrategyFactory.current = new DraggingStrategyFactory();\n\n        var HandleDraggingStrategy = Class.extend({\n            init: function(options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n\n            options: {\n                deltaX: {\n                    adjustment: null,\n                    modifier: null\n                },\n                deltaY: {\n                    adjustment: null,\n                    modifier: null\n                }\n            },\n\n            adjustDragDelta: function(deltas) {\n                var options = this.options;\n                var xAxisAdjustment = options.deltaX.adjustment * options.deltaX.modifier;\n                var yAxisAdjustment = options.deltaY.adjustment * options.deltaY.modifier;\n\n                return {\n                    deltaX: deltas.deltaX * xAxisAdjustment,\n                    deltaY: deltas.deltaY * yAxisAdjustment,\n                    initialDeltaX: deltas.initialDeltaX * xAxisAdjustment,\n                    initialDeltaY: deltas.initialDeltaY * yAxisAdjustment\n                };\n            }\n        });\n\n        HandleDraggingStrategy.create = function(options) {\n            return DraggingStrategyFactory.current.create(options);\n        };\n\n        var HorizontalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 0,\n                    modifier: 0\n                }\n            }\n        });\n\n        var EastDraggingStrategy = HorizontalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: 1\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(EAST, EastDraggingStrategy);\n\n        var WestDraggingStrategy = HorizontalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: (-1)\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(WEST, WestDraggingStrategy);\n\n        var VerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 0,\n                    modifier: 0\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n\n        var NorthDraggingStrategy = VerticalDraggingStrategy.extend({\n            options: {\n                deltaY: {\n                    modifier: (-1)\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTH, NorthDraggingStrategy);\n\n        var SouthDraggingStrategy = VerticalDraggingStrategy.extend({\n            options: {\n                deltaY: {\n                    modifier: 1\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTH, SouthDraggingStrategy);\n\n        var HorizontalAndVerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n\n        var NorthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: 1\n                },\n                deltaY: {\n                    modifier: (-1)\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHEAST, NorthEastDraggingStrategy);\n\n        var NorthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: (-1)\n                },\n                deltaY: {\n                    modifier: (-1)\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHWEST, NorthWestDraggingStrategy);\n\n        var SouthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: 1\n                },\n                deltaY: {\n                    modifier: 1\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHEAST, SouthEastDraggingStrategy);\n\n        var SouthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: (-1)\n                },\n                deltaY: {\n                    modifier: 1\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHWEST, SouthWestDraggingStrategy);\n\n        extend(Editor, {\n            ElementResizeHandle: ElementResizeHandle\n        });\n    })(window.kendo);\n\n    (function(kendo, undefined$1) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n\n        var $ = kendo.jQuery;\n        var contains = $.contains;\n        var extend = $.extend;\n\n        var browser = kendo.support.browser;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var ElementResizeHandle = Editor.ElementResizeHandle;\n        var ResizingUtils = Editor.ResizingUtils;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var constrain = ResizingUtils.constrain;\n        var inPercentages = ResizingUtils.inPercentages;\n        var inPixels = ResizingUtils.inPixels;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var RangeUtils = Editor.RangeUtils;\n\n        var NS = \".kendoEditorElementResizing\";\n        var RESIZE_HANDLE_WRAPPER_CLASS = \"k-element-resize-handle-wrapper\";\n        var TABLE_CLASS = \"k-table\";\n        var ELEMENT_RESIZING_CLASS = \"k-element-resizing\";\n\n        var DRAG_START = \"dragStart\";\n        var DRAG = \"drag\";\n        var DRAG_END = \"dragEnd\";\n        var KEY_DOWN = \"keydown\";\n        var MOUSE_DOWN = \"mousedown\";\n        var SELECT = \"select\";\n        var DROP = \"drop\";\n\n        var COLUMN = \"td\";\n        var ROW = \"tr\";\n        var TBODY = \"tbody\";\n        var THEAD = \"thead\";\n        var TABLE = \"table\";\n        var IMG = \"img\";\n        var ELEMENT_TYPES = [\"TABLE\", \"IMG\"];\n\n        var COMMA = \",\";\n        var WIDTH = \"width\";\n        var HEIGHT = \"height\";\n\n        var EAST = \"east\";\n        var NORTH = \"north\";\n        var NORTHEAST = \"northeast\";\n        var NORTHWEST = \"northwest\";\n        var SOUTH = \"south\";\n        var SOUTHEAST = \"southeast\";\n        var SOUTHWEST = \"southwest\";\n        var WEST = \"west\";\n\n        var DOT = \".\";\n\n        function isUndefined(value) {\n            return typeof(value) === \"undefined\";\n        }\n\n        var ElementResizing = Class.extend({\n            init: function(element, options) {\n                var that = this;\n\n                that.options = extend({}, that.options, options);\n                that.handles = [];\n\n                // Check whether the element is TABLE or IMG\n                if (ELEMENT_TYPES.indexOf(element.nodeName) >= 0) {\n                    that.element = element;\n                }\n            },\n\n            destroy: function() {\n                var that = this;\n\n                $(that.element).off(NS);\n                that.element = null;\n\n                $(that.options.rootElement).off(KEY_DOWN + NS);\n\n                that._destroyResizeHandles();\n            },\n\n            options: {\n                appendHandlesTo: null,\n                rtl: false,\n                rootElement: null,\n                minWidth: 10,\n                minHeight: 10,\n                handles: [{\n                    direction: NORTHWEST\n                }, {\n                    direction: NORTH\n                }, {\n                    direction: NORTHEAST\n                }, {\n                    direction: EAST\n                }, {\n                    direction: SOUTHEAST\n                }, {\n                    direction: SOUTH\n                }, {\n                    direction: SOUTHWEST\n                }, {\n                    direction: WEST\n                }]\n            },\n\n            resize: function(args) {\n                var that = this;\n                var deltas = extend({}, {\n                    deltaX: 0,\n                    deltaY: 0,\n                    initialDeltaX: 0,\n                    initialDeltaY: 0\n                }, args);\n\n                that._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                that._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n                that.showResizeHandles();\n            },\n\n            _resizeWidth: function() {\n                return false;\n            },\n\n            _resizeHeight: function() {\n                return false;\n            },\n\n            _getMaxDimensionValue: function(dimension) {\n                var that = this;\n                var element = $(that.element);\n                var dimensionLowercase = dimension.toLowerCase();\n                var rtlModifier = that.options.rtl ? (-1) : 1;\n                var parent = $(that.element).parent();\n                var parentElement = parent[0];\n                var parentDimension = parent[dimensionLowercase]();\n                var parentScrollOffset = rtlModifier * (dimension === WIDTH ? kendo.scrollLeft(parent) : parent.scrollTop());\n\n                if (parentElement && parentElement === element.closest(COLUMN)[0]) {\n                    if (parentElement.style[dimensionLowercase] === \"\" && !inPercentages(that.element.style[dimensionLowercase])) {\n                        return Infinity;\n                    }\n                    else {\n                        return (parentDimension + parentScrollOffset);\n                    }\n                }\n                else {\n                    return (parentDimension + parentScrollOffset);\n                }\n            },\n\n            showResizeHandles: function() {\n                var that = this;\n\n                that._initResizeHandles();\n                that._showResizeHandles();\n            },\n\n            _initResizeHandles: function() {\n                var that = this;\n                var handles = that.handles;\n                var options = that.options;\n                var handleOptions = that.options.handles;\n                var length = handleOptions.length;\n                var i;\n\n                if (handles && handles.length > 0) {\n                    return;\n                }\n\n                for (i = 0; i < length; i++) {\n                    that.handles.push(new ElementResizeHandle(extend({\n                        appendTo: options.appendHandlesTo,\n                        resizableElement: that.element,\n                        rootElement: options.rootElement,\n                        rtl: options.rtl,\n                        editor: that.options.editor\n                    }, handleOptions[i])));\n                }\n\n                that._bindToResizeHandlesEvents();\n            },\n\n            _destroyResizeHandles: function() {\n                var that = this;\n                var length = that.handles ? that.handles.length : 0;\n\n                for (var i = 0; i < length; i++) {\n                    that.handles[i].destroy();\n                }\n\n                that.handles = [];\n            },\n\n            _showResizeHandles: function() {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    that.handles[i].show();\n                }\n            },\n\n            _bindToResizeHandlesEvents: function() {\n                return false;\n            },\n\n            _onResizeHandleDragStart: function() {\n                var that = this;\n                var element = $(that.element);\n\n                element.addClass(ELEMENT_RESIZING_CLASS);\n\n                that._initialElementHeight = outerHeight(element);\n                that._initialElementWidth = outerWidth(element);\n                that._disableKeyboard();\n            },\n\n            _onResizeHandleDrag: function(e) {\n                this.resize(e);\n            },\n\n            _onResizeHandleDragEnd: function() {\n                var that = this;\n                $(that.element).removeClass(ELEMENT_RESIZING_CLASS);\n                that._enableKeyboard();\n            },\n\n            _enableKeyboard: function() {\n                $(this.options.rootElement).off(KEY_DOWN + NS);\n            },\n\n            _disableKeyboard: function() {\n                $(this.options.rootElement).on(KEY_DOWN + NS, function(e) {\n                    e.preventDefault();\n                });\n            }\n        });\n\n        var TableResizing = ElementResizing.extend({\n            _bindToResizeHandlesEvents: function() {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                var handle;\n\n                for (i = 0; i < length; i++) {\n                    handle = handles[i];\n                    handle.bind(DRAG_START, that._onResizeHandleDragStart.bind(that));\n                    handle.bind(DRAG, that._onResizeHandleDrag.bind(that));\n                    handle.bind(DRAG_END, that._onResizeHandleDragEnd.bind(that));\n                }\n            },\n\n            _hasRowsInPixels: function() {\n                var that = this;\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n\n                for (var i = 0; i < rows.length; i++) {\n                    if (rows[i].style.height === \"\" || inPixels(rows[i].style.height)) {\n                        return true;\n                    }\n                }\n\n                return false;\n            },\n\n            _resizeWidth: function(delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleWidth = element[0].style[WIDTH];\n                var currentWidth = outerWidth(element);\n                var parentWidth = element.parent().width();\n                var maxWidth = that._getMaxDimensionValue(WIDTH);\n                var newWidth;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedWidth;\n\n                if (delta === 0) {\n                    return;\n                }\n\n                if (isUndefined(that._initialElementWidth)) {\n                    that._initialElementWidth = currentWidth;\n                }\n\n                //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n                //on each drag does not work due to browser calculation of computed styles\n                constrainedWidth = constrain({\n                    value: that._initialElementWidth + initialDelta,\n                    min: that.options.minWidth,\n                    max: maxWidth\n                });\n\n                if (inPercentages(styleWidth)) {\n                    //detect resizing greater than 100%\n                    if (currentWidth + delta > parentWidth) {\n                        ratioValue = max(constrainedWidth, parentWidth);\n                        ratioTotalValue = min(constrainedWidth, parentWidth);\n                    }\n                    else {\n                        ratioValue = min(constrainedWidth, parentWidth);\n                        ratioTotalValue = max(constrainedWidth, parentWidth);\n                    }\n\n                    newWidth = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                }\n                else {\n                    newWidth = toPixels(constrainedWidth);\n                }\n\n                that._setColumnsWidth();\n\n                element[0].style[WIDTH] = newWidth;\n            },\n\n            _resizeHeight: function(delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleHeight = element[0].style[HEIGHT];\n                var currentHeight = outerHeight(element);\n                var parent = element.parent();\n                var parentHeight = parent.height();\n                var maxHeight = that._getMaxDimensionValue(HEIGHT);\n                var newHeight;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedHeight;\n                var minHeight = that.options.minHeight;\n                var hasRowsInPixels = that._hasRowsInPixels();\n\n                if (delta === 0) {\n                    return;\n                }\n\n                if (isUndefined(that._initialElementHeight)) {\n                    that._initialElementHeight = currentHeight;\n                }\n\n                //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n                //on each drag does not work due to browser calculation of computed styles\n                constrainedHeight = constrain({\n                    value: that._initialElementHeight + initialDelta,\n                    min: minHeight,\n                    max: maxHeight\n                });\n\n                if (hasRowsInPixels && delta < 0) {\n                    //decreasing table height when rows are sized in pixels is not possible\n                    that._setRowsHeightInPercentages();\n                }\n\n                if (inPercentages(styleHeight)) {\n                    //detect resizing greater than 100%\n                    if (currentHeight + delta > parentHeight) {\n                        ratioValue = max(constrainedHeight, parentHeight);\n                        ratioTotalValue = min(constrainedHeight, parentHeight);\n                    }\n                    else {\n                        ratioValue = min(constrainedHeight, parentHeight);\n                        ratioTotalValue = max(constrainedHeight, parentHeight);\n                    }\n\n                    newHeight = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                }\n                else {\n                    newHeight = toPixels(constrainedHeight);\n                }\n\n                element[0].style[HEIGHT] = newHeight;\n\n                if (hasRowsInPixels && delta < 0) {\n                    //restore original rows height unit\n                    that._setRowsHeightInPixels();\n                }\n            },\n\n            _setColumnsWidth: function() {\n                var that = this;\n                var element = $(that.element);\n                var parentElement = element.parent()[0];\n                var parentColumn = element.closest(COLUMN);\n                var columns = parentColumn.closest(ROW).children();\n                var columnsLength = columns.length;\n                var i;\n\n                function isWidthInPercentages(element) {\n                    var styleWidth = element.style.width;\n\n                    if (styleWidth !== \"\") {\n                        return inPercentages(styleWidth) ? true : false;\n                    }\n                    else {\n                        return $(element).hasClass(TABLE_CLASS) ? true : false;\n                    }\n                }\n\n                if (isWidthInPercentages(element[0]) && parentElement === parentColumn[0] && parentElement.style[WIDTH] === \"\") {\n                    for (i = 0; i < columnsLength; i++) {\n                        columns[i].style[WIDTH] = toPixels($(columns[i]).width());\n                    }\n                }\n            },\n\n            _setRowsHeightInPercentages: function() {\n                var that = this;\n                var tableHead = $(that.element).children(THEAD);\n                var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function() {\n                    return outerHeight($(this));\n                });\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n                }\n            },\n\n            _setRowsHeightInPixels: function() {\n                var that = this;\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function() {\n                    return outerHeight($(this));\n                });\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            }\n        });\n\n        var ImageResizing = ElementResizing.extend({\n            _bindToResizeHandlesEvents: function() {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                var handle;\n\n                for (i = 0; i < length; i++) {\n                    handle = handles[i];\n                    handle.bind(DRAG_START, that._onResizeHandleDragStart.bind(that));\n\n                    if (handle.options.direction === \"north\" || handle.options.direction === \"south\") {\n                        handle.bind(DRAG, that._onResizeHandleDragVertical.bind(that));\n                    } else if (handle.options.direction === \"east\" || handle.options.direction === \"west\") {\n                        handle.bind(DRAG, that._onResizeHandleDragHorizontal.bind(that));\n                    } else {\n                        handle.bind(DRAG, that._onResizeHandleDragLocked.bind(that));\n                    }\n\n                    handle.bind(DRAG_END, that._onResizeHandleDragEnd.bind(that));\n                }\n            },\n\n            _getDeltas: function(args) {\n                return extend({}, {\n                    deltaX: 0,\n                    deltaY: 0,\n                    initialDeltaX: 0,\n                    initialDeltaY: 0\n                }, args);\n            },\n\n            _onResizeHandleDragVertical: function(args) {\n                var deltas = this._getDeltas(args);\n\n                this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n                this.showResizeHandles();\n            },\n\n            _onResizeHandleDragHorizontal: function(args) {\n                var deltas = this._getDeltas(args);\n\n                this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                this.showResizeHandles();\n            },\n\n            _onResizeHandleDragLocked: function(args) {\n                var min = Math.min(Math.abs(args.initialDeltaX), Math.abs(args.initialDeltaY)),\n                    initialWidth = this._initialElementWidth,\n                    initialHeight = this._initialElementHeight,\n                    deltas;\n\n                if (min === args.initialDeltaX || min === args.initialDeltaX * -1) {\n                    args.initialDeltaY = args.initialDeltaX * initialHeight / initialWidth;\n                    args.deltaY = args.deltaX;\n                } else if (min === args.initialDeltaY || min === args.initialDeltaY * -1) {\n                    args.initialDeltaX = args.initialDeltaY * initialWidth / initialHeight;\n                    args.deltaX = args.deltaY;\n                }\n\n                deltas = this._getDeltas(args);\n\n                this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n                this.showResizeHandles();\n            },\n\n            _resizeWidth: function(delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var currentWidth = outerWidth(element);\n                var newWidth;\n                var constrainedWidth;\n\n                if (delta === 0) {\n                    return;\n                }\n\n                if (isUndefined(that._initialElementWidth)) {\n                    that._initialElementWidth = currentWidth;\n                }\n\n                //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n                //on each drag does not work due to browser calculation of computed styles\n                constrainedWidth = constrain({\n                    value: that._initialElementWidth + initialDelta,\n                    min: that.options.minWidth,\n                    max: that._getMaxDimensionValue(WIDTH)\n                });\n\n                newWidth = toPixels(constrainedWidth);\n                element[0].style[WIDTH] = newWidth;\n                element.attr(WIDTH, Math.floor(constrainedWidth));\n            },\n\n            _resizeHeight: function(delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var currentHeight = outerHeight(element);\n                var newHeight;\n                var constrainedHeight;\n\n                if (delta === 0) {\n                    return;\n                }\n\n                if (isUndefined(that._initialElementHeight)) {\n                    that._initialElementHeight = currentHeight;\n                }\n\n                //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n                //on each drag does not work due to browser calculation of computed styles\n                constrainedHeight = constrain({\n                    value: that._initialElementHeight + initialDelta,\n                    min: that.options.minHeight,\n                    max: Number.MAX_SAFE_INTEGER\n                });\n\n                newHeight = toPixels(constrainedHeight);\n                element[0].style[HEIGHT] = newHeight;\n                element.attr(HEIGHT, Math.floor(constrainedHeight));\n            }\n        });\n\n        const ElementResizingFactory = Class.extend({\n            create: function(editor) {\n                let factory = this;\n\n                $(editor.body)\n                    .on(\"dragstart\" + NS, function() {\n                        var nodes = RangeUtils.nodes(editor.getRange()),\n                            hasImg = false;\n\n                        nodes.forEach(function(node) {\n                            if (node.nodeName === \"IMG\") {\n                                hasImg = true;\n                            }\n                        });\n\n                        if (hasImg && nodes.length > 1) {\n                            editor.elementResizing._destroyResizeHandles();\n                        }\n                    })\n                    .on(DROP + NS, function() {\n                        setTimeout(function() {\n                            var image = RangeUtils.image(editor.getRange());\n\n                            if (image) {\n                                editor.elementResizing._destroyResizeHandles();\n                                editor.elementResizing.element = image;\n                                editor.elementResizing.showResizeHandles();\n                            }\n                        });\n                    })\n                    .on(MOUSE_DOWN + NS, TABLE + COMMA + IMG, function(e) {\n                        var eventTarget = e.target;\n                        var eventCurrentTarget = e.currentTarget;\n                        var elementResizing = editor.elementResizing;\n                        var element = elementResizing ? elementResizing.element : null;\n\n                        if (elementResizing) {\n                            if (element && eventCurrentTarget !== element) {\n                                if (contains(eventCurrentTarget, element) && element !== eventTarget && contains(element, eventTarget)) {\n                                    //prevent a parent table resizing init when clicking on a nested table when the event bubbles\n                                    //instead of stopping event propagation\n                                    return;\n                                }\n                                else {\n                                    if (element !== eventTarget) {\n                                        editor._destroyElementResizing();\n                                        factory._initResizing(editor, eventCurrentTarget);\n                                    }\n                                }\n                            }\n                        }\n                        else {\n                            factory._initResizing(editor, eventCurrentTarget);\n                        }\n\n                        editor._showElementResizeHandles();\n                    })\n                    .on(MOUSE_DOWN + NS, function(e) {\n                        var elementResizing = editor.elementResizing;\n                        var element = elementResizing ? elementResizing.element : null;\n                        var target = e.target;\n                        var isResizeHandleOrChild = $(target).hasClass(RESIZE_HANDLE_WRAPPER_CLASS) || $(target).parents(DOT + RESIZE_HANDLE_WRAPPER_CLASS).length > 0;\n\n                        if (elementResizing && element !== target && !contains(element, target) && !isResizeHandleOrChild) {\n                            editor._destroyElementResizing();\n                        }\n                    });\n            },\n\n            dispose: function(editor) {\n                $(editor.body).off(NS);\n            },\n\n            _initResizing: function(editor, element) {\n                // table and image resizing is natively supported in IE\n                // https://stackoverflow.com/questions/53831846/resizing-images-in-contenteditable-div-stopped-working-in-firefox\n                // Enable custom resize handlers for FF too\n                if (!browser.msie) {\n                    if ($(element).is(TABLE)) {\n                        editor.elementResizing = editor.tableResizing = new TableResizing(element, {\n                            appendHandlesTo: editor.body,\n                            rtl: kendo.support.isRtl(editor.element),\n                            rootElement: editor.body,\n                            editor: editor\n                        });\n                    } else if ($(element).is(IMG)) {\n                        editor.elementResizing = new ImageResizing(element, {\n                            appendHandlesTo: editor.body,\n                            rtl: kendo.support.isRtl(editor.element),\n                            rootElement: editor.body,\n                            editor: editor\n                        });\n                    }\n\n                    if (editor._showElementResizeHandlesProxy) {\n                        editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n                        editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n                    }\n                }\n            }\n        });\n\n        ElementResizingFactory.current = new ElementResizingFactory();\n\n        extend(Editor, {\n            TableResizing: TableResizing,\n            ImageResizing: ImageResizing,\n            ElementResizing: ElementResizing,\n            ElementResizingFactory: ElementResizingFactory\n        });\n\n    })(window.kendo);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        RangeUtils = Editor.RangeUtils,\n        dom = Editor.Dom,\n        registerTool = EditorUtils.registerTool,\n        Command = Editor.Command;\n\n    var tableFormatFinder = new Editor.BlockFormatFinder([{ tags: [\"table\"] }]);\n    var cellsFormatFinder = new Editor.BlockFormatFinder([{ tags: [\"td\",\"th\"] }]);\n    var reUnit = /([a-z]+|%)$/i;\n\n    var COL = \"col\";\n    var ROW = \"row\";\n    var COLGROUP = \"colgroup\";\n    var SCOPE = \"scope\";\n    var COL_INDEX = \"col-index\";\n    var TH = \"th\";\n    var TD = \"td\";\n    var THEAD = \"thead\";\n    var HEADERS = \"headers\";\n    var TABLE = \"table\";\n\n    var TableWizardCommand = Command.extend({\n        exec: function() {\n            var cmd = this;\n            var editor = cmd.editor;\n            var range = cmd.range = cmd.lockRange();\n            var isTableCellWizard = cmd.options.tableCellWizard;\n            var selectedTable = cmd._sourceTable = !cmd.options.insertNewTable ? cmd._selectedTable(range) : undefined$1;\n            var selectedCells = cmd._selectedTableCells = selectedTable ? cmd._selectedCells(range) : undefined$1;\n            var options = {\n                visible: false,\n                messages: editor.options.messages,\n                closeCallback: cmd.onDialogClose.bind(cmd),\n                table: cmd.parseTable(selectedTable, selectedCells),\n                dialogOptions: editor.options.dialogOptions,\n                isRtl: kendo.support.isRtl(editor.wrapper)\n            };\n\n            var dialog = new Editor.TableWizardDialog(options);\n            dialog.open(isTableCellWizard);\n        },\n\n        onDialogClose: function(data) {\n            var cmd = this;\n            cmd.releaseRange(cmd.range);\n\n            if (data) { //Ok button pressed\n                if (cmd.options.insertNewTable) {\n                    cmd.insertTable(cmd.createNewTable(data));\n                } else {\n                    cmd.updateTable(data, cmd._sourceTable, cmd._selectedTableCells);\n                }\n            }\n        },\n        releaseRange: function(range) {\n            var cmd = this;\n            var doc = cmd.editor.document;\n            dom.windowFromDocument(doc).focus();\n            Command.fn.releaseRange.call(cmd, range);\n        },\n        insertTable: function(table) {\n            var range = this.range;\n\n            range.insertNode(table);\n            range.collapse(true);\n            this.editor.selectRange(range);\n\n            this._ensureFocusableAfterTable(table);\n        },\n        _ensureFocusableAfterTable: function(table) {\n            var siblingNodes = $(table).parent().contents();\n            var lastSiblingIndex = siblingNodes.length - 1;\n            var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n            while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n                lastSiblingIndex -= 1;\n                lastSibling = siblingNodes.get(lastSiblingIndex);\n            }\n\n            if (lastSibling === table) {\n                dom.insertAfter(dom.createEmptyNode(this.editor.document, \"p\"), table);\n            }\n        },\n        updateTable: function(data, table, selectedCells) {\n            var cmd = this;\n            var tableRows = $(table.rows).toArray();\n            var tableProp = data.tableProperties;\n            var rows = tableProp.rows;\n            var tHead = table.tHead;\n            var last = cmd._lastInCollection;\n            var lastSelectedRow, cellProp;\n\n            //Leave only first selected cell\n            while (selectedCells.length > 1) {\n                selectedCells.pop();\n            }\n\n            lastSelectedRow = selectedCells.length ? last(selectedCells).parentNode : last(tableRows);\n\n            cmd._deleteTableRows(tableRows, tableRows.length - rows);\n\n            if (tableRows.length < rows) {\n                cmd._addRows(lastSelectedRow, rows, tableRows);\n            }\n\n            dom.reMapTableColumns(table, COL_INDEX);\n            cmd._updateColumns(tableRows, tableProp.columns, selectedCells, lastSelectedRow);\n            cmd._updateTableProperties(table, tableProp);\n\n            cellProp = data.cellProperties;\n            if (selectedCells[0]) {\n                dom.attr(selectedCells[0], { id: (cellProp || {}).id || null });\n            }\n            if (cellProp) {\n                (cellProp.selectAllCells ? $(tableRows).children() : $(selectedCells)).each(function(i, cell) {\n                    cmd._updateCellProperties(cell, cellProp, tableProp);\n                });\n            }\n\n            cmd._updateCaption(table, tableProp);\n\n            if (tHead) {\n                cmd._updateHeadersWithThead(table, data);\n            } else {\n                cmd._updateHeadersNoThead(table, data);\n            }\n\n            cmd._updateHeaderAssociates(table, tableProp);\n            dom.clearTableMappings(table, COL_INDEX);\n        },\n        _isHeadingRow: function(row) {\n            return dom.is(row.cells[0], TH) && dom.is(row.parentNode, THEAD);\n        },\n        _isHeadingCell: function(cell) {\n            return dom.is(cell, TH);\n        },\n        cellsWithHeadersAssociated: function(table) {\n            var cells = $(table.rows).children();\n            var headingIds = [];\n            var checkHeader = function(header) {\n                return headingIds.indexOf(header) > -1;\n            };\n\n            cells.each(function(c, cell) {\n                if (cell.id && dom.is(cell, TH)) {\n                    headingIds.push(cell.id);\n                }\n            });\n\n            var associatedCells = cells.filter(function(c, cell) {\n                var headersAttr = cell.getAttribute(HEADERS);\n                var headersArray;\n\n                if (headersAttr && !dom.is(cell, TH)) {\n                    headersArray = headersAttr.split(\" \");\n\n                    if (headersArray && headersArray.length > 0) {\n                        return headersArray.some(checkHeader);\n                    }\n                }\n\n                return false;\n            });\n\n            return !!associatedCells.length;\n        },\n        _insertCells: function(count, row, index) {\n            index = isNaN(index) ? -1 : index;\n            for (var i = 0, cell; i < count; i++) {\n                cell = row.insertCell(index);\n                cell.innerHTML = \"&nbsp;\";\n            }\n        },\n        _deleteTableRows: function(rows, count) {\n            for (var i = 0, row, rowParent; i < count; i++) {\n                row = rows.pop();\n                rowParent = row.parentNode;\n                rowParent.removeChild(row);\n                if (!rowParent.rows.length) {\n                    dom.remove(rowParent);\n                }\n            }\n        },\n        createNewTable: function(data) {\n            var cmd = this;\n            var doc = cmd.editor.document;\n            var tableProp = data.tableProperties;\n            var table = dom.create(doc, TABLE);\n            var rowIndex = 0;\n            var thead;\n\n            cmd._updateTableProperties(table, tableProp);\n            cmd._updateCaption(table, tableProp);\n\n            if (tableProp.headerRows && tableProp.headerRows > 0) {\n                thead = table.createTHead();\n                cmd._createTableRows(data, thead, rowIndex, true);\n                rowIndex += tableProp.headerRows;\n            }\n\n            var tbody = table.createTBody();\n            cmd._createTableRows(data, tbody, rowIndex, false);\n\n            dom.reMapTableColumns(table, COL_INDEX);\n\n            if (tableProp.cellsWithHeaders === \"ids\") {\n                dom.associateWithIds(table);\n            } else if (tableProp.cellsWithHeaders === \"scope\") {\n                cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n            }\n\n            dom.clearTableMappings(table, COL_INDEX);\n\n            return table;\n        },\n        _createTableRows: function(data, container, initialIndex, headerRows) {\n            var cmd = this;\n            var tableProp = data.tableProperties;\n            var cellProp = data.cellProperties;\n            var columns = tableProp.columns;\n            var rows = headerRows ? tableProp.headerRows : tableProp.rows;\n            var headerColumns = tableProp.headerColumns;\n\n            for (var r = initialIndex, row; r < rows; r++) {\n                row = container.insertRow();\n\n                for (var c = 0, cell; c < columns; c++) {\n                    if (headerRows || headerColumns > c) {\n                        cell = document.createElement(TH);\n                    } else {\n                        cell = document.createElement(TD);\n                    }\n\n                    row.appendChild(cell);\n                    cell.innerHTML = \"&nbsp;\";\n                    if (cellProp && r === 0 && c === 0 && cellProp.id) {\n                        cell.id = cellProp.id;\n                    }\n\n                    cmd._updateCellProperties(cell, cellProp && (cellProp.selectAllCells || (r === 0 && c === 0)) ? cellProp : {}, tableProp);\n                }\n            }\n        },\n        _addRows: function(lastSelectedRow, rows, tableRows) {\n            var cmd = this;\n            var rowIndex = $(lastSelectedRow).index();\n            var cellsLength = lastSelectedRow.cells.length;\n            var newRowsCount = rows - tableRows.length;\n            var parent = lastSelectedRow.parentNode;\n            var row;\n\n            while (newRowsCount) {\n                row = parent.insertRow(rowIndex + 1);\n                cmd._insertCells(cellsLength - row.cells.length, row);\n                newRowsCount--;\n            }\n        },\n        _updateColumns: function(tableRows, columns, selectedCells, lastSelectedRow) {\n            var cmd = this;\n            var last = cmd._lastInCollection;\n            var firstRowLastCell = last(tableRows[0].cells);\n            var numberOfColumns = Number(firstRowLastCell.getAttribute(COL_INDEX)) + firstRowLastCell.colSpan;\n\n            if (numberOfColumns > columns) {\n                $(tableRows).each(function(i, row) {\n                    var lastCurrentCell = last(row.cells);\n                    var rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n\n                    while (rowColumns > columns) {\n                        if (lastCurrentCell.colSpan && lastCurrentCell.colSpan > 1) {\n                            lastCurrentCell.colSpan -= 1;\n                        } else {\n                            row.deleteCell(-1);\n                        }\n\n                        lastCurrentCell = last(row.cells);\n                        rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n                    }\n                });\n            }\n\n            if (numberOfColumns < columns) {\n                var cellIndex = $(last(selectedCells) || last(lastSelectedRow.cells)).index();\n                $(tableRows).each(function(i, row) {\n                    var lastCurrentCell = last(row.cells);\n                    cmd._insertCells(columns - Number(lastCurrentCell.getAttribute(COL_INDEX)) - lastCurrentCell.colSpan, row, cellIndex + 1);\n                });\n            }\n        },\n        _updateTableProperties: function(table, data) {\n            var style = this._getStylesData(data);\n            dom.attr(table, {\n                cellSpacing: data.cellSpacing || null,\n                topCellPadding: this._getNumericValue(data.topCellPadding) ?? '',\n                leftCellPadding: this._getNumericValue(data.leftCellPadding) ?? '',\n                bottomCellPadding: this._getNumericValue(data.bottomCellPadding) ?? '',\n                rightCellPadding: this._getNumericValue(data.rightCellPadding) ?? '',\n                className: data.className || null,\n                id: data.id || null,\n                summary: data.summary || null,\n                style: style || null\n            });\n            $(table).addClass(\"k-table\");\n        },\n        _updateCellProperties: function(cell, data, tableData) {\n            var style = this._getStylesData(data);\n            style.paddingTop = this._getNumericValue(data.topCellPadding) ?? this._getNumericValue(tableData?.topCellPadding) ?? '';\n            style.paddingLeft = this._getNumericValue(data.leftCellPadding) ?? this._getNumericValue(tableData?.leftCellPadding) ?? '';\n            style.paddingBottom = this._getNumericValue(data.bottomCellPadding) ?? this._getNumericValue(tableData?.bottomCellPadding) ?? '';\n            style.paddingRight = this._getNumericValue(data.rightCellPadding) ?? this._getNumericValue(tableData?.rightCellPadding) ?? '';\n            style.margin = data.cellMargin || null;\n            dom.attr(cell, {\n                style: style || null,\n                className: data.className || null\n            });\n        },\n        _updateCaption: function(table, data) {\n            if (table.caption && !data.captionContent) {\n                table.deleteCaption();\n            } else if (data.captionContent) {\n                var caption = table.createCaption();\n                caption.innerHTML = data.captionContent;\n                var alignment = this._getAlignmentData(data.captionAlignment);\n                dom.attr(caption, {\n                    style: {\n                        textAlign: alignment.textAlign,\n                        verticalAlign: alignment.verticalAlign\n                    }\n                });\n            }\n        },\n        _updateHeadersNoThead: function(table, data) {\n            var cmd = this;\n            var tableProp = data.tableProperties;\n            var rows = table.rows;\n            var row, cells, cell, i, j;\n\n            for (i = 0; i < rows.length; i++) {\n                row = rows[i];\n                cells = row.cells;\n\n                for (j = 0; j < cells.length; j++) {\n                    cell = cells[j];\n                    if (!cmd._isHeadingCell(cell) && (i < tableProp.headerRows || tableProp.headerColumns > cell.getAttribute(COL_INDEX))) {\n                        dom.changeTag(cell, TH, false);\n                    } else if (cmd._isHeadingCell(cell) && i >= tableProp.headerRows && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                        dom.changeTag(cell, TD, false);\n                    }\n                }\n            }\n        },\n        _updateHeadersWithThead: function(table, data) {\n            var cmd = this;\n            var tableProp = data.tableProperties;\n            var thead = table.tHead;\n            var rowIndex = 0;\n            var tbody = table.tBodies[0];\n            var row, cell, i;\n\n            if (!tbody) {\n                tbody = table.createTBody();\n            }\n\n            if (tableProp.headerRows && tableProp.headerRows > 0) {\n                if (!thead) {\n                    thead = table.createTHead();\n                }\n\n                while (thead.rows.length < tableProp.headerRows) {\n                    thead.appendChild(tbody.rows[0]);\n                }\n\n                while (thead.rows.length > tableProp.headerRows) {\n                    tbody.appendChild(thead.rows[0]);\n                }\n\n                cmd._swapToHeaderCells(thead);\n            } else if (thead) {\n                while (thead.rows.length > 0) {\n                    tbody.appendChild(thead.rows[thead.rows.length - 1]);\n                }\n\n                table.deleteTHead();\n            }\n\n            while (tbody.rows.length > rowIndex) {\n                row = tbody.rows[rowIndex];\n                for (i = 0; i < row.cells.length; i++) {\n                    cell = row.cells[i];\n                    if (cmd._isHeadingCell(cell) && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                        dom.changeTag(cell, TD, false);\n                    } else if (!cmd._isHeadingCell(cell) && tableProp.headerColumns > cell.getAttribute(COL_INDEX)) {\n                        dom.changeTag(cell, TH, false);\n                    }\n                }\n                rowIndex += 1;\n            }\n        },\n        _updateHeaderAssociates: function(table, tableProp) {\n            var cmd = this;\n\n            if (tableProp.cellsWithHeaders === \"ids\") {\n                if (!cmd.cellsWithHeadersAssociated(table)) {\n                    cmd._removeScopes(table);\n                }\n                dom.associateWithIds(table);\n            } else if (tableProp.cellsWithHeaders === \"scope\") {\n                if (cmd.cellsWithHeadersAssociated(table)) {\n                    cmd._removeAssociates(table);\n                }\n                cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n            } else {\n                if (cmd.cellsWithHeadersAssociated(table)) {\n                    cmd._removeAssociates(table);\n                } else {\n                    cmd._removeScopes(table);\n                }\n            }\n        },\n        _addScopes: function(table, headerRows, headerCols) {\n            var rows = table.rows;\n            var i, j, row, cell;\n\n            for (i = 0; i < rows.length; i++) {\n                row = rows[i];\n\n                for (j = 0; j < row.cells.length; j++) {\n                    cell = row.cells[j];\n\n                    if (i < headerRows) {\n                        cell.setAttribute(SCOPE, COL);\n                    } else if (cell.getAttribute(COL_INDEX) < headerCols) {\n                        cell.setAttribute(SCOPE, ROW);\n                    }\n                }\n            }\n        },\n        _removeScopes: function(table) {\n            $(table).find(TH).removeAttr(SCOPE);\n            $(table).find(COL).remove();\n            $(table).find(COLGROUP).remove();\n        },\n        _removeAssociates: function(table) {\n            $(table).find(\"th, td\").removeAttr(\"id headers\");\n        },\n        _swapToHeaderCells: function(thead) {\n            var tds = $(thead).find(\"td\");\n            var swapCell = function(index, cell) {\n                dom.changeTag(cell, TH, false);\n            };\n            tds.each(swapCell);\n        },\n        _getStylesData: function(data) {\n            var that = this;\n            var alignment = this._getAlignmentData(data.alignment);\n            var whiteSpace = \"wrapText\" in data ? (data.wrapText ? \"\" : \"nowrap\") : null;\n\n            return $.extend({\n                width: data.width ? data.width + data.widthUnit : null,\n                height: data.height ? data.height + data.heightUnit : null,\n                textAlign: alignment.textAlign,\n                verticalAlign: alignment.verticalAlign,\n                backgroundColor: data.bgColor || \"\",\n                borderWidth: data.borderWidth,\n                borderStyle: data.borderStyle,\n                borderColor: data.borderColor || \"\",\n                borderCollapse: data.collapseBorders ? \"collapse\" : null,\n                whiteSpace: whiteSpace\n            }, that._getTablePositionData(data.position));\n        },\n        _getAlignmentData: function(alignment) {\n            var textAlign = \"\";\n            var verticalAlign = textAlign;\n\n            if (alignment) {\n                if (alignment.indexOf(\" \") != -1) {\n                    var align = alignment.split(\" \");\n                    textAlign = align[0];\n                    verticalAlign = align[1];\n                } else {\n                    textAlign = alignment;\n                }\n            }\n            return { textAlign: textAlign, verticalAlign: verticalAlign };\n        },\n        _getTablePositionData: function(position) {\n            if (!position) {\n                return {};\n            }\n\n            return { marginLeft: position != \"left\" ? \"auto\" : \"\", marginRight: position != \"right\" ? \"auto\" : \"\" };\n        },\n        parseTable: function(table, selectedCells) {\n            if (!table) {\n                return { tableProperties: {}, selectedCells: [] };\n            }\n\n            var cmd = this;\n            var tStyle = table.style;\n            var rows = table.rows;\n            var caption = table.caption;\n            var captionClone = $(caption ? caption.cloneNode(true) : undefined$1);\n            captionClone.find(\".k-marker\").remove();\n\n            var cssClass = table.className;\n            cssClass = cssClass.replace(/^k-table\\s|\\sk-table$/, \"\");\n            cssClass = cssClass.replace(/\\sk-table\\s/, \" \");\n            cssClass = cssClass.replace(/^k-table$/, \"\");\n\n            var tableAlignment = cmd._getAlignment(table, true);\n            var tablePosition = cmd._getTablePosition(table);\n            var captionAlignment = caption ? cmd._getAlignment(caption) : undefined$1;\n            var numberOfHeaderRows = dom._getNumberOfHeaderRows(table);\n\n            var cellsWithHeaders;\n            if (cmd.cellsWithHeadersAssociated(table)) {\n                cellsWithHeaders = \"ids\";\n            } else if ($(table).find(\"th[scope]\").length > 0) {\n                cellsWithHeaders = \"scope\";\n            } else {\n                cellsWithHeaders = \"none\";\n            }\n\n            dom.reMapTableColumns(table, COL_INDEX);\n            var numberOfColumns = dom._getNumberOfColumns(table);\n            var numberOfHeaderColumns = dom._getNumberOfHeaderColumns(table, numberOfHeaderRows);\n            dom.clearTableMappings(table, COL_INDEX);\n\n            var tableJson = {\n                tableProperties: {\n                    width: tStyle.width || table.width ? parseFloat(tStyle.width || table.width) : null,\n                    height: tStyle.height || table.height ? parseFloat(tStyle.height || table.height) : null,\n                    columns: numberOfColumns,\n                    rows: rows.length,\n                    widthUnit: cmd._getUnit(tStyle.width),\n                    heightUnit: cmd._getUnit(tStyle.height),\n                    cellSpacing: table.cellSpacing,\n                    topCellPadding: table.topCellPadding,\n                    leftCellPadding: table.leftCellPadding,\n                    bottomCellPadding: table.bottomCellPadding,\n                    rightCellPadding: table.rightCellPadding,\n                    alignment: tableAlignment.textAlign,\n                    position: tablePosition,\n                    bgColor: tStyle.backgroundColor || table.bgColor,\n                    className: cssClass,\n                    id: table.id,\n                    borderWidth: tStyle.borderWidth || table.border,\n                    borderColor: tStyle.borderColor,\n                    borderStyle: tStyle.borderStyle || \"\",\n                    collapseBorders: !!tStyle.borderCollapse,\n                    summary: table.summary,\n                    captionContent: caption ? captionClone.html() : \"\",\n                    captionAlignment: caption && captionAlignment.textAlign ? captionAlignment.textAlign + \" \" + captionAlignment.verticalAlign : \"\",\n                    headerRows: numberOfHeaderRows,\n                    headerColumns: numberOfHeaderColumns,\n                    cellsWithHeaders: cellsWithHeaders\n                },\n                selectedCells: []\n            };\n\n            tableJson.rows = cmd.parseTableRows(rows, selectedCells, tableJson);\n\n            return tableJson;\n        },\n        parseTableRows: function(rows, selectedCells, tableJson) {\n            var cmd = this;\n            var data = [], row, rowData, cells, cell, cellData;\n            for (var i = 0; i < rows.length; i++) {\n                row = rows[i];\n                rowData = { cells: [] };\n                cells = row.cells;\n                data.push(rowData);\n                for (var j = 0; j < cells.length; j++) {\n                    cell = cells[j];\n                    cellData = cmd.parseCell(cell);\n                    if ($.inArray(cell, selectedCells) != -1) {\n                        tableJson.selectedCells.push(cellData);\n                    }\n                    rowData.cells.push(cellData);\n                }\n            }\n            return data;\n        },\n        parseCell: function(cell) {\n            var cmd = this;\n            var cStyle = cell.style;\n            var alignment = cmd._getAlignment(cell);\n            alignment = alignment.textAlign ? alignment.textAlign + \" \" + alignment.verticalAlign : \"\";\n\n            var data = {\n                width: cStyle.width || cell.width ? parseFloat(cStyle.width || cell.width) : null,\n                height: cStyle.height || cell.height ? parseFloat(cStyle.height || cell.height) : null,\n                widthUnit: cmd._getUnit(cStyle.width),\n                heightUnit: cmd._getUnit(cStyle.height),\n                cellMargin: cStyle.margin,\n                topCellPadding: cStyle.paddingTop,\n                leftCellPadding: cStyle.paddingLeft,\n                bottomCellPadding: cStyle.paddingBottom,\n                rightCellPadding: cStyle.paddingRight,\n                alignment: alignment,\n                bgColor: cStyle.backgroundColor || cell.bgColor,\n                className: cell.className,\n                id: cell.id,\n                borderWidth: cStyle.borderWidth || cell.border,\n                borderColor: cStyle.borderColor,\n                borderStyle: cStyle.borderStyle,\n                wrapText: cStyle.whiteSpace != \"nowrap\"\n            };\n\n            return data;\n        },\n        _getTablePosition: function(element) {\n            var style = element.style;\n            if (style.marginLeft == \"auto\" && style.marginRight == \"auto\") {\n                return \"center\";\n            }\n\n            if (style.marginLeft == \"auto\") {\n                return \"right\";\n            }\n\n            return \"left\";\n        },\n        _getAlignment: function(element, horizontalOnly) {\n            var style = element.style;\n            var hAlign = style.textAlign || element.align || \"\";\n            if (horizontalOnly) {\n                return { textAlign: hAlign };\n            }\n            var vAlign = style.verticalAlign || element.vAlign || \"\";\n            if (hAlign && vAlign) {\n                return { textAlign: hAlign, verticalAlign: vAlign };\n            }\n            if (!hAlign && vAlign) {\n                return { textAlign: \"left\", verticalAlign: vAlign };\n            }\n            if (hAlign && !vAlign) {\n                return { textAlign: hAlign, verticalAlign: \"top\" };\n            }\n            return { textAlign: \"\", verticalAlign: \"\" };\n        },\n        _getUnit: function(value) {\n            var unit = (value || \"\").match(reUnit);\n            return unit ? unit[0] : \"px\";\n        },\n        _selectedTable: function(range) {\n            var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n            return tableFormatFinder.findSuitable(nodes)[0];\n        },\n        _selectedCells: function(range) {\n            var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n            return cellsFormatFinder.findSuitable(nodes);\n        },\n        _lastInCollection: function(collection) {\n            return collection[collection.length - 1];\n        },\n        _getNumericValue: function(value) {\n            return !isNaN(value) || typeof value === \"string\" ? value : null;\n        }\n    });\n\n    var TableWizardTool = Editor.Tool.extend({\n        command: function(options) {\n            options.insertNewTable = this.options.insertNewTable;\n            options.tableCellWizard = !!this.options.tableCellWizard;\n            return new TableWizardCommand(options);\n        }\n    });\n\n    var TableWizardEditTool = TableWizardTool.extend({\n        update: function(ui, nodes) {\n            var isFormatted = !tableFormatFinder.isFormatted(nodes),\n                toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n            if (isFormatted === true) {\n                toolbar.hide(ui);\n            } else {\n                toolbar.show(ui);\n            }\n        }\n    });\n\n    var TableCellWizardEditTool = TableWizardTool.extend({\n        update: function(ui, nodes) {\n            var isFormatted = !tableFormatFinder.isFormatted(nodes),\n                toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n            if (isFormatted === true) {\n                toolbar.hide(ui);\n            } else {\n                toolbar.show(ui);\n            }\n        }\n    });\n\n    kendo.ui.editor.TableWizardTool = TableWizardTool;\n    kendo.ui.editor.TableWizardCommand = TableWizardCommand;\n\n    registerTool(\"tableProperties\", new TableWizardEditTool({ command: TableWizardCommand, insertNewTable: false, property: \"tableProperties\" }));\n    registerTool(\"tableCellProperties\", new TableCellWizardEditTool({ command: TableWizardCommand, tableCellWizard: true, insertNewTable: false, property: \"tableCellProperties\" }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    const FORM_FIELD_CLASS = \"k-form-field\",\n          INVISIBLE_CLASS = \"k-visibility-invisible\",\n          DOT = \".\";\n\n    var kendo = window.kendo,\n        encode = kendo.htmlEncode,\n        numericTextBoxSettings = { format: \"0\", min: 0 },\n        units = [\"px\", \"em\"],\n        borderStyles = [\"solid\", \"dotted\", \"dashed\", \"double\", \"groove\", \"ridge\", \"inset\", \"outset\", \"initial\", \"inherit\", \"none\", \"hidden\"];\n\n    var DEFAULT_NUMBER_OF_COLS_AND_ROWS = 4;\n\n    var textWrapDropDownSettings = {\n        dataSource: [{\n            className: \"text-wrap\",\n            value: \"wrap\"\n        }, {\n            className: \"parameter-string\",\n            value: \"nowrap\"\n        }],\n        dataTextField: \"className\",\n        dataValueField: \"value\",\n        template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }) + encode(tooltip),\n        valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-text-wrap\" }) + encode(tooltip)\n    };\n\n    var tablePositionDropDownSettings = {\n        dataSource: [{\n            className: \"table-position-start\",\n            value: \"left\"\n        }, {\n            className: \"table-position-center\",\n            value: \"center\"\n        }, {\n            className: \"table-position-end\",\n            value: \"right\"\n        }],\n        dataTextField: \"className\",\n        dataValueField: \"value\",\n        template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }) + encode(tooltip),\n        valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-align-group\" }) + encode(tooltip)\n    };\n\n    var tableAlignmentDropDownSettings = {\n        dataSource: [{\n            className: \"table-align-middle-left\",\n            value: \"left\"\n        }, {\n            className: \"table-align-middle-center\",\n            value: \"center\"\n        }, {\n            className: \"table-align-middle-right\",\n            value: \"right\"\n        }, {\n            className: \"align-remove\",\n            value: \"\"\n        }],\n        dataTextField: \"className\",\n        dataValueField: \"value\",\n        template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }) + encode(tooltip),\n        valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-align-group\" }) + encode(tooltip)\n    };\n\n    var cellAlignmentDropDownSettings = {\n        dataSource: [{\n            className: \"table-align-top-left\",\n            value: \"left top\"\n        }, {\n            className: \"table-align-top-center\",\n            value: \"center top\"\n        }, {\n            className: \"table-align-top-right\",\n            value: \"right top\"\n        }, {\n            className: \"table-align-middle-left\",\n            value: \"left middle\"\n        }, {\n            className: \"table-align-middle-center\",\n            value: \"center middle\"\n        }, {\n            className: \"table-align-middle-right\",\n            value: \"right middle\"\n        }, {\n            className: \"table-align-bottom-left\",\n            value: \"left bottom\"\n        }, {\n            className: \"table-align-bottom-center\",\n            value: \"center bottom\"\n        }, {\n            className: \"table-align-bottom-right\",\n            value: \"right bottom\"\n        }, {\n            className: \"align-remove\",\n            value: \"\"\n        }],\n        dataTextField: \"className\",\n        dataValueField: \"value\",\n        template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }) + encode(tooltip),\n        valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-align-group\" }) + encode(tooltip)\n    };\n\n    var accessibilityAlignmentDropDownSettings = {\n        dataSource: [{\n            className: \"table-align-top-left\",\n            value: \"left top\"\n        }, {\n            className: \"table-align-top-center\",\n            value: \"center top\"\n        }, {\n            className: \"table-align-top-right\",\n            value: \"right top\"\n        }, {\n            className: \"table-align-bottom-left\",\n            value: \"left bottom\"\n        }, {\n            className: \"table-align-bottom-center\",\n            value: \"center bottom\"\n        }, {\n            className: \"table-align-bottom-right\",\n            value: \"right bottom\"\n        }, {\n            className: \"align-remove\",\n            value: \"\"\n        }],\n        dataTextField: \"className\",\n        dataValueField: \"value\",\n        template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }),\n        valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-align-group\" })\n    };\n\n    var tablePropertiesDialogTemplate = ({ messages }) =>\n        '<div class=\"k-editor-dialog k-editor-table-wizard-window k-action-window k-popup-edit-form\">' +\n            '<div id=\"k-table-wizard-tabs\" class=\"k-root-tabs\">' +\n                '<ul>' +\n                    `<li class=\"k-active\">${ messages.tableTab }</li>` +\n                    `<li>${ messages.accessibilityTab }</li>` +\n                '</ul>' +\n                '<div id=\"k-table-properties\"></div>' +\n                '<div id=\"k-accessibility-properties\"></div>' +\n            '</div>' +\n            '<div class=\"k-actions k-actions-start k-actions-horizontal k-window-buttons\">' +\n                    kendo.html.renderButton(`<button class=\"k-dialog-ok\"><span class=\"k-button-text\">${ messages.dialogOk }</span></button>`, {\n                        icon: 'check',\n                            themeColor: \"primary\"\n                        }) +\n                        kendo.html.renderButton(`<button class=\"k-dialog-close\"><span class=\"k-button-text\">${ messages.dialogCancel }</span></button>`, {\n                            icon: 'cancel-outline'\n                        }) +\n            '</div>' +\n        '</div>';\n        var cellPropertiesDialogTemplate = ({ messages }) =>\n        '<div class=\"k-editor-dialog k-editor-table-wizard-window k-action-window k-popup-edit-form\">' +\n            '<div id=\"k-cell-properties\"></div>' +\n            '<div class=\"k-actions k-actions-start k-actions-horizontal k-window-buttons\">' +\n                    kendo.html.renderButton(`<button class=\"k-dialog-ok\"><span class=\"k-button-text\">${ messages.dialogOk }</span></button>`, {\n                        icon: 'check',\n                            themeColor: \"primary\"\n                        }) +\n                        kendo.html.renderButton(`<button class=\"k-dialog-close\"><span class=\"k-button-text\">${ messages.dialogCancel }</span></button>`, {\n                            icon: 'cancel-outline'\n                        }) +\n            '</div>' +\n        '</div>';\n\n    var TableWizardDialog = kendo.Class.extend({\n        init: function(options) {\n            this.options = options;\n        },\n        _openTablePropertiesDialog: function() {\n            var that = this,\n                options = that.options,\n                dialogOptions = options.dialogOptions,\n                tableData = options.table,\n                dialog,\n                messages = options.messages,\n                isIE = kendo.support.browser.msie;\n\n            function close(e) {\n                e.preventDefault();\n                that.destroy();\n                dialog.destroy();\n            }\n\n            function okHandler(e) {\n                that.collectTableDialogValues(tableData);\n\n                close(e);\n\n                if (that.change) {\n                    that.change();\n                }\n\n                options.closeCallback(tableData);\n            }\n\n            function closeHandler(e) {\n                close(e);\n                options.closeCallback();\n            }\n\n            dialogOptions.close = closeHandler;\n            dialogOptions.minWidth = 700;\n            dialogOptions.width = 700;\n            dialogOptions.title = messages.tableProperties;\n            dialogOptions.visible = options.visible;\n\n            dialog = $(that._dialogTemplate(messages)).appendTo(document.body)\n                .kendoWindow(dialogOptions)\n                .addClass(\"k-editor-window\")\n                .closest(\".k-window\").toggleClass(\"k-rtl\", options.isRtl).end()\n                .find(\".k-dialog-ok\").on(\"click\", okHandler).end()\n                .find(\".k-dialog-close\").on(\"click\", closeHandler).end()\n                .data(\"kendoWindow\");\n\n            var element = dialog.element;\n            this.components = {};\n            that._initTabStripComponent(element);\n            that._tablePropertiesForm = that._createTablePropertiesForm(dialog, messages);\n            that._accessibilityPropertiesForm = that._createAccessibilityPropertiesForm(dialog, messages);\n\n            dialog.center();\n            dialog.open();\n\n            if (isIE) {\n                var dialogHeight = element.closest(\".k-window\").height();\n                element.css(\"max-height\", dialogHeight);\n            }\n        },\n        _openCellPropertiesDialog: function() {\n            var that = this,\n                options = that.options,\n                dialogOptions = options.dialogOptions,\n                tableData = options.table,\n                dialog,\n                messages = options.messages,\n                isIE = kendo.support.browser.msie;\n\n            function close(e) {\n                e.preventDefault();\n                that.destroy();\n                dialog.destroy();\n            }\n\n            function okHandler(e) {\n                that.collectCellDialogValues(tableData);\n\n                close(e);\n\n                if (that.change) {\n                    that.change();\n                }\n\n                options.closeCallback(tableData);\n            }\n\n            function closeHandler(e) {\n                close(e);\n                options.closeCallback();\n            }\n\n            dialogOptions.close = closeHandler;\n            dialogOptions.minWidth = 400;\n            dialogOptions.title = messages.tableCellProperties;\n            dialogOptions.visible = options.visible;\n\n            dialog = $(that._dialogTemplate(messages, cellPropertiesDialogTemplate)).appendTo(document.body)\n                .kendoWindow(dialogOptions)\n                .addClass(\"k-editor-window\")\n                .closest(\".k-window\").toggleClass(\"k-rtl\", options.isRtl).end()\n                .find(\".k-dialog-ok\").on(\"click\", okHandler).end()\n                .find(\".k-dialog-close\").on(\"click\", closeHandler).end()\n                .data(\"kendoWindow\");\n\n            var element = dialog.element;\n            that._cellPropertiesForm = that._createCellPropertiesForm(dialog, messages);\n\n            dialog.center();\n            dialog.open();\n\n            if (isIE) {\n                var dialogHeight = element.closest(\".k-window\").height();\n                element.css(\"max-height\", dialogHeight);\n            }\n        },\n        open: function(isCellProperties) {\n            if (!isCellProperties) {\n                this._openTablePropertiesDialog();\n            } else {\n                this._openCellPropertiesDialog();\n            }\n        },\n\n        _initTabStripComponent: function(element) {\n            var components = this.components = {};\n            components.tabStrip = element.find(\"#k-table-wizard-tabs\").kendoTabStrip({\n                animation: false\n            }).data(\"kendoTabStrip\");\n        },\n\n        collectTableDialogValues: function() {\n            var that = this;\n            var data = that.options.table;\n            that._collectTableViewValues(data);\n            that._collectAccessibilityViewValues(data);\n        },\n\n        collectCellDialogValues: function() {\n            var that = this;\n            var data = that.options.table;\n            that._collectCellViewValues(data);\n        },\n\n        _collectTableViewValues: function(tableData) {\n            var tableView = this.components.tableView;\n            var tableProperties = tableData.tableProperties;\n            var cellData = tableData.cellProperties = tableData.cellProperties || {};\n            tableProperties.width = tableView.width.value();\n            tableProperties.widthUnit = tableView.widthUnit.value();\n            tableProperties.height = tableView.height.value();\n            tableProperties.columns = tableView.columns.value();\n            tableProperties.rows = tableView.rows.value();\n            tableProperties.heightUnit = tableView.heightUnit.value();\n            tableProperties.cellSpacing = tableView.cellSpacing.value();\n            tableProperties.topCellPadding = tableView.topCellPadding.value();\n            tableProperties.leftCellPadding = tableView.leftCellPadding.value();\n            tableProperties.bottomCellPadding = tableView.bottomCellPadding.value();\n            tableProperties.rightCellPadding = tableView.rightCellPadding.value();\n            tableProperties.alignment = tableView.alignment.value();\n            tableProperties.position = tableView.position.value();\n            tableProperties.bgColor = tableView.bgColor.value();\n            tableProperties.borderWidth = tableView.borderWidth.value();\n            tableProperties.borderColor = tableView.borderColor.value();\n            tableProperties.borderStyle = tableView.borderStyle.value();\n            tableProperties.collapseBorders = tableView.collapseBorders.check();\n\n            if (!cellData.width) {\n                cellData.selectAllCells = true;\n                cellData.width = 100 / tableData.tableProperties.columns;\n                cellData.widthUnit = \"%\";\n            }\n        },\n\n        _collectCellViewValues: function(table) {\n            var cellData = table.cellProperties = table.cellProperties || {};\n            var cellView = this.components.cellView;\n\n            cellData.selectAllCells = cellView.selectAllCells.check();\n            cellData.width = cellView.width.value();\n            cellData.widthUnit = cellView.widthUnit.value();\n            cellData.height = cellView.height.value();\n            cellData.heightUnit = cellView.heightUnit.value();\n            cellData.independentCellPaddings = cellView.independentCellPaddings.check();\n            cellData.topCellPadding = cellView.topCellPadding.value();\n            cellData.leftCellPadding = cellView.leftCellPadding.value();\n            cellData.bottomCellPadding = cellView.bottomCellPadding.value();\n            cellData.rightCellPadding = cellView.rightCellPadding.value();\n            cellData.cellMargin = cellView.cellMargin.value();\n            cellData.alignment = cellView.alignment.value();\n            cellData.bgColor = cellView.bgColor.value();\n            cellData.className = cellView.className.value();\n            cellData.id = cellView.id.value();\n            cellData.borderWidth = cellView.borderWidth.value();\n            cellData.borderColor = cellView.borderColor.value();\n            cellData.borderStyle = cellView.borderStyle.value();\n            cellData.wrapText = cellView.wrapTextValue.value() == \"wrap\";\n\n            if (!cellData.width) {\n                cellData.selectAllCells = true;\n                cellData.width = 100 / table.tableProperties.columns;\n                cellData.widthUnit = \"%\";\n            }\n        },\n\n       _collectAccessibilityViewValues: function(table) {\n            var tableProperties = table.tableProperties;\n            var accessibilityView = this.components.accessibilityView;\n            tableProperties.captionContent = accessibilityView.captionContent.value();\n            tableProperties.captionAlignment = accessibilityView.captionAlignment.value();\n            tableProperties.summary = accessibilityView.summary.value();\n            tableProperties.cellsWithHeaders = accessibilityView.cellsWithHeaders.value();\n            tableProperties.className = accessibilityView.className.value();\n            tableProperties.id = accessibilityView.id.value();\n            tableProperties.headerRows = accessibilityView.headerRows.value();\n            tableProperties.headerColumns = accessibilityView.headerColumns.value();\n        },\n        _addUnit: function(units, value) {\n            if (value && $.inArray(value, units) == -1) {\n                units.push(value);\n            }\n        },\n\n        _initNumericTextbox: function(element, property, data, storage, settings) {\n            var component = storage[property] = element.kendoNumericTextBox(\n                    settings ? $.extend({}, numericTextBoxSettings, settings) : numericTextBoxSettings\n                ).data(\"kendoNumericTextBox\");\n            if (property in data) {\n                component.value(parseInt(data[property], 10));\n            }\n        },\n\n        _initDropDownList: function(element, property, data, storage, dataSource) {\n            var component = storage[property] = element.kendoDropDownList({\n                dataSource: dataSource\n            }).data(\"kendoDropDownList\");\n            this._setComponentValue(component, data, property);\n        },\n\n        _initBorderStyleDropDown: function(element, property, data, storage, dataSource) {\n            var component = storage[property] = element.kendoDropDownList({\n                dataSource: dataSource,\n                optionLabel: this.options.messages.borderNone\n            }).data(\"kendoDropDownList\");\n            this._setComponentValue(component, data, property);\n        },\n\n        _initTablePositionDropDown: function(element, data) {\n            var messages = this.options.messages;\n            var tableView = this.components.tableView;\n            var dataSource = tablePositionDropDownSettings.dataSource;\n            dataSource[0].tooltip = messages.tableAlignLeft;\n            dataSource[1].tooltip = messages.tableAlignCenter;\n            dataSource[2].tooltip = messages.tableAlignRight;\n\n            this._initPositionDropDown(element, tablePositionDropDownSettings, \"position\", data, tableView);\n        },\n\n        _initTableAlignmentDropDown: function(element, data) {\n            var messages = this.options.messages;\n            var tableView = this.components.tableView;\n            var dataSource = tableAlignmentDropDownSettings.dataSource;\n            dataSource[0].tooltip = messages.alignLeft;\n            dataSource[1].tooltip = messages.alignCenter;\n            dataSource[2].tooltip = messages.alignRight;\n            dataSource[3].tooltip = messages.alignRemove;\n\n            this._initAlignmentDropDown(element, tableAlignmentDropDownSettings, \"alignment\", data, tableView);\n        },\n\n        _initCellAlignmentDropDown: function(element, data) {\n            var messages = this.options.messages;\n            var cellView = this.components.cellView;\n            var dataSource = cellAlignmentDropDownSettings.dataSource;\n            dataSource[0].tooltip = messages.alignLeftTop;\n            dataSource[1].tooltip = messages.alignCenterTop;\n            dataSource[2].tooltip = messages.alignRightTop;\n            dataSource[3].tooltip = messages.alignLeftMiddle;\n            dataSource[4].tooltip = messages.alignCenterMiddle;\n            dataSource[5].tooltip = messages.alignRightMiddle;\n            dataSource[6].tooltip = messages.alignLeftBottom;\n            dataSource[7].tooltip = messages.alignCenterBottom;\n            dataSource[8].tooltip = messages.alignRightBottom;\n            dataSource[9].tooltip = messages.alignRemove;\n\n            this._initAlignmentDropDown(element, cellAlignmentDropDownSettings, \"alignment\", data, cellView);\n        },\n\n        _initAccessibilityAlignmentDropDown: function(element, data) {\n            var messages = this.options.messages;\n            var accessibilityView = this.components.accessibilityView;\n            var dataSource = accessibilityAlignmentDropDownSettings.dataSource;\n            dataSource[0].tooltip = messages.alignLeftTop;\n            dataSource[1].tooltip = messages.alignCenterTop;\n            dataSource[2].tooltip = messages.alignRightTop;\n            dataSource[3].tooltip = messages.alignLeftBottom;\n            dataSource[4].tooltip = messages.alignCenterBottom;\n            dataSource[5].tooltip = messages.alignRightBottom;\n            dataSource[6].tooltip = messages.alignRemove;\n\n            this._initAlignmentDropDown(element, accessibilityAlignmentDropDownSettings, \"captionAlignment\", data, accessibilityView);\n        },\n        _initTextWrapDropDown: function(element, data) {\n            var messages = this.options.messages;\n            var name = \"wrapTextValue\";\n            data.wrapTextValue = data.wrapText ? \"wrap\" : \"nowrap\";\n\n            var cellView = this.components.cellView;\n            var dataSource = textWrapDropDownSettings.dataSource;\n            dataSource[0].tooltip = messages.wrapText;\n            dataSource[1].tooltip = messages.fitToCell;\n            var component = cellView[name] =\n                element.kendoDropDownList(textWrapDropDownSettings).data(\"kendoDropDownList\");\n\n            component.list.addClass('k-text-wrap');\n            this._setComponentValue(component, data, name);\n        },\n        _initPositionDropDown: function(element, settings, name, data, storage) {\n            var component = storage[name] =\n                element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n            component.list.addClass('k-position');\n            this._setComponentValue(component, data, name);\n        },\n        _initAlignmentDropDown: function(element, settings, name, data, storage) {\n            var component = storage[name] =\n                element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n            component.list.addClass('k-align');\n            this._setComponentValue(component, data, name);\n        },\n        _initAssociationDropDown: function(element, name, settings, data, storage) {\n            var component = storage[name] =\n                element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n            this._setComponentValue(component, data, name);\n        },\n        _setComponentValue: function(component, data, property) {\n            if (property in data) {\n                component.value(data[property]);\n            }\n        },\n\n        _initColorPicker: function(element, property, data, storage) {\n            var component = storage[property] =\n                element.kendoColorPicker({ buttons: false, clearButton: true }).data(\"kendoColorPicker\");\n\n            if (data[property]) {\n                component.value(data[property]);\n            }\n        },\n        _initInput: function(element, property, data, storage, settings) {\n            var component = storage[property] = element.kendoTextBox(settings || {}).data(\"kendoTextBox\");\n            if (property in data) {\n                component.value(data[property]);\n            }\n        },\n\n        _initCheckbox: function(element, property, data, storage, settings) {\n            var component = storage[property] = element.kendoCheckBox(settings || {}).data(\"kendoCheckBox\");\n            if (property in data) {\n                component.check(data[property]);\n            }\n        },\n\n        _initTextArea: function(element, property, data, storage, settings) {\n            var component = storage[property] = element.kendoTextArea(settings || {}).data(\"kendoTextArea\");\n            if (property in data) {\n                component.value(data[property]);\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n            that._destroyComponents(this.components);\n\n            delete that.components;\n        },\n        _destroyComponents: function(components) {\n            for (var widget in components) {\n                if (components[widget].destroy) {\n                    components[widget].destroy();\n                }\n                delete components[widget];\n            }\n        },\n\n        _dialogTemplate: function(messages, dialogTemplate) {\n            return kendo.template(dialogTemplate || tablePropertiesDialogTemplate)({ messages: messages });\n        },\n\n        _onPaddingTopChange: function(e) {\n            let viewType = this.components.tableView ? \"tableView\" : \"cellView\",\n                view = this.components[viewType],\n                independentCellPaddings = !view.independentCellPaddings.check(),\n                topCellPaddingNumeric = view.topCellPadding,\n                topCellPaddingValue = topCellPaddingNumeric.value(),\n                leftCellPaddingNumeric = view.leftCellPadding,\n                bottomCellPaddingNumeric = view.bottomCellPadding,\n                rightCellPaddingNumeric = view.rightCellPadding;\n\n            if (independentCellPaddings) {\n                leftCellPaddingNumeric.value(topCellPaddingValue);\n                bottomCellPaddingNumeric.value(topCellPaddingValue);\n                rightCellPaddingNumeric.value(topCellPaddingValue);\n            }\n\n            topCellPaddingNumeric._cachedPadding = topCellPaddingValue;\n        },\n\n        _onPaddingCheckChange: function(e) {\n            let viewType = this.components.tableView ? \"tableView\" : \"cellView\",\n                messages = this.options.messages,\n                checked = e.sender.check(),\n                view = this.components[viewType],\n                topCellPaddingNumeric = view.topCellPadding,\n                leftCellPaddingNumeric = view.leftCellPadding,\n                bottomCellPaddingNumeric = view.bottomCellPadding,\n                rightCellPaddingNumeric = view.rightCellPadding,\n                topCellPaddingValue = topCellPaddingNumeric.value(),\n                bottomCellPaddingValue = bottomCellPaddingNumeric.value(),\n                leftCellPaddingValue = leftCellPaddingNumeric.value(),\n                rightCellPaddingValue = rightCellPaddingNumeric.value();\n\n            if (!checked) {\n                if (topCellPaddingValue === bottomCellPaddingValue &&\n                        topCellPaddingValue === leftCellPaddingValue &&\n                        topCellPaddingValue === rightCellPaddingValue) {\n                    leftCellPaddingNumeric.value(topCellPaddingValue);\n                    bottomCellPaddingNumeric.value(topCellPaddingValue);\n                    rightCellPaddingNumeric.value(topCellPaddingValue);\n                } else {\n                    topCellPaddingNumeric.value(null);\n                }\n\n                leftCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).addClass(INVISIBLE_CLASS);\n                bottomCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).addClass(INVISIBLE_CLASS);\n                rightCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).addClass(INVISIBLE_CLASS);\n\n                topCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).find(\".k-form-label\").text(messages.cellPadding);\n            } else {\n                if (!isNaN(topCellPaddingNumeric._cachedPadding)) {\n                    topCellPaddingNumeric.value(topCellPaddingNumeric._cachedPadding);\n                }\n\n                leftCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).removeClass(INVISIBLE_CLASS);\n                bottomCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).removeClass(INVISIBLE_CLASS);\n                rightCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).removeClass(INVISIBLE_CLASS);\n\n                topCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).find(\".k-form-label\").text(messages.topPadding);\n            }\n        },\n\n        _onColumnsNumberChange: function(args) {\n            var that = this;\n            var accessibilityView = that.components.accessibilityView;\n            var headerColumnsNumeric = accessibilityView.headerColumns;\n            var currentNumberOfColumnsHeaders = headerColumnsNumeric.value();\n            var numberOfColumns = args.sender.value();\n\n            if (numberOfColumns < currentNumberOfColumnsHeaders) {\n                headerColumnsNumeric.value(numberOfColumns);\n            }\n\n            headerColumnsNumeric.max(numberOfColumns);\n        },\n\n        _onRowsNumberChange: function(args) {\n            var that = this;\n            var accessibilityView = that.components.accessibilityView;\n            var headerRowsNumeric = accessibilityView.headerRows;\n            var currentNumberOfRowHeaders = headerRowsNumeric.value();\n            var numberOfRows = args.sender.value();\n\n            if (numberOfRows < currentNumberOfRowHeaders) {\n                headerRowsNumeric.value(numberOfRows);\n            }\n\n            headerRowsNumeric.max(numberOfRows);\n        },\n\n        _createTablePropertiesForm: function(dialog, messages) {\n            var that = this;\n            var table = that.options.table;\n            var formElement = dialog.element.find(\"#k-table-properties\");\n            var components = that.components;\n            var tableView = components.tableView = {};\n            var tableProperties = table.tableProperties = table.tableProperties || {};\n            var form;\n\n            that._addUnit(units, tableProperties.widthUnit);\n            that._addUnit(units, tableProperties.heightUnit);\n            tableProperties.borderStyle = tableProperties.borderStyle || \"\";\n            form = formElement.kendoForm({\n                renderButtons: false,\n                layout: \"grid\",\n                grid: {\n                    cols: 4\n                },\n                items: [\n                    {\n                        colSpan: 2,\n                        field: \"k-editor-table-columns\",\n                        label: encode(messages.columns),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input type=\"numeric\" id=\"k-editor-table-columns\" />').appendTo(container),\n                                \"columns\",\n                                tableProperties,\n                                tableView,\n                                {\n                                    min: 1,\n                                    value: DEFAULT_NUMBER_OF_COLS_AND_ROWS,\n                                    change: that._onColumnsNumberChange.bind(that)\n                                });\n                        }\n                    },{\n                        colSpan: 2,\n                        field: \"k-editor-table-rows\",\n                        label: encode(messages.rows),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input type=\"numeric\" id=\"k-editor-table-rows\" />').appendTo(container),\n                                \"rows\",\n                                tableProperties,\n                                tableView,\n                                {\n                                    min: 1,\n                                    value: DEFAULT_NUMBER_OF_COLS_AND_ROWS,\n                                    change: that._onRowsNumberChange.bind(that)\n                                });\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-table-width\",\n                        label: encode(messages.width),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-table-width\" />').appendTo(container), \"width\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-table-width-type\",\n                        label: {\n                            encoded: false,\n                            text: '&nbsp;'\n                        },\n                        editor: function(container, options) {\n                            that._initDropDownList($(`<input id=\"k-editor-table-width-type\" aria-label=\"${ messages.units }\" />`).appendTo(container),\n                                \"widthUnit\",\n                                tableProperties,\n                                tableView,\n                                units);\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-table-height\",\n                        label: encode(messages.height),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-table-height\" />').appendTo(container), \"height\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-table-height-type\",\n                        label: {\n                            encoded: false,\n                            text: '&nbsp;'\n                        },\n                        editor: function(container, options) {\n                            that._initDropDownList($(`<input id=\"k-editor-table-height-type\" aria-label=\"${ messages.units }\" />`).appendTo(container),\n                                \"heightUnit\",\n                                tableProperties,\n                                tableView,\n                                units);\n                        }\n                    },{\n                        colSpan: 2,\n                        field: \"k-editor-table-position\",\n                        label: encode(messages.position),\n                        editor: function(container, options) {\n                            that._initTablePositionDropDown($('<input id=\"k-editor-table-position\" class=\"k-position\" />').appendTo(container), tableProperties);\n                        }\n                    },\n                    {\n                        colSpan: 2,\n                        field: \"k-editor-table-alignment\",\n                        label: encode(messages.alignment),\n                        editor: function(container, options) {\n                            that._initTableAlignmentDropDown($('<input id=\"k-editor-table-alignment\" class=\"k-align\" />').appendTo(container), tableProperties);\n                        }\n                    },{\n                        colSpan: 2,\n                        field: \"k-editor-table-cell-spacing\",\n                        label: encode(messages.cellSpacing),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-table-cell-spacing\" />').appendTo(container), \"cellSpacing\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                        }\n                    },{\n                        type: \"group\",\n                        label: \"Cell Paddings\",\n                        layout: \"grid\",\n                        colSpan: 4,\n                        grid: {\n                            cols: 4,\n                            gutter: 20\n                        },\n                        items: [\n                            {\n                                colSpan: \"full\",\n                                field: \"k-editor-padding-all-sides\",\n                                label: \"\",\n                                editor: function(container, options) {\n                                    that._initCheckbox($('<input id=\"k-editor-padding-all-sides\" />').appendTo(container), \"independentCellPaddings\", tableProperties, tableView,\n                                    {\n                                        checked: true,\n                                        label: encode(messages.independentCellPaddings),\n                                        change: that._onPaddingCheckChange.bind(that)\n                                    });\n                                }\n                            },{\n                                colSpan: 1,\n                                field: \"k-editor-table-cell-padding-top\",\n                                label: encode(messages.topPadding),\n                                editor: function(container, options) {\n                                    that._initNumericTextbox($('<input id=\"k-editor-table-cell-padding-top\" />').appendTo(container), \"topCellPadding\", tableProperties, tableView,\n                                    {\n                                        placeholder: encode(messages.auto),\n                                        change: that._onPaddingTopChange.bind(that)\n                                    });\n                                }\n                            },{\n                                colSpan: 1,\n                                field: \"k-editor-table-cell-padding-right\",\n                                label: encode(messages.rightPadding),\n                                editor: function(container, options) {\n                                    that._initNumericTextbox($('<input id=\"k-editor-table-cell-padding-right\" />').appendTo(container), \"rightCellPadding\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                                }\n                            },{\n                                colSpan: 1,\n                                field: \"k-editor-table-cells-padding-bottom\",\n                                label: encode(messages.bottomPadding),\n                                editor: function(container, options) {\n                                    that._initNumericTextbox($('<input id=\"k-editor-table-cell-padding-bottom\" />').appendTo(container), \"bottomCellPadding\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                                }\n                            },{\n                                colSpan: 1,\n                                field: \"k-editor-table-cell-padding-left\",\n                                label: encode(messages.leftPadding),\n                                editor: function(container, options) {\n                                    that._initNumericTextbox($('<input id=\"k-editor-table-cell-padding-left\" />').appendTo(container), \"leftCellPadding\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                                }\n                            }\n                        ]\n                    }, {\n                        type: \"group\",\n                        label: \"Borders\",\n                        layout: \"grid\",\n                        colSpan: 4,\n                        grid: {\n                            cols: 4,\n                            gutter: 10\n                        },\n                        items: [{\n                            colSpan: \"full\",\n                            field: \"k-editor-table-bg\",\n                            label: encode(messages.tableBackground),\n                            editor: function(container, options) {\n                                that._initColorPicker($('<input id=\"k-editor-table-bg\" />').appendTo(container), \"bgColor\", tableProperties, tableView);\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-border-width\",\n                            label: encode(messages.borderWidth),\n                            editor: function(container, options) {\n                                that._initNumericTextbox($('<input id=\"k-editor-border-width\" />').appendTo(container), \"borderWidth\", tableProperties, tableView);\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-border-color\",\n                            label: encode(messages.borderColor),\n                            editor: function(container, options) {\n                                that._initColorPicker($('<input id=\"k-editor-border-color\" />').appendTo(container), \"borderColor\", tableProperties, tableView);\n                            }\n                        },{\n                            colSpan: 2,\n                            field: \"k-editor-border-style\",\n                            label: encode(messages.borderStyle),\n                            editor: function(container, options) {\n                                that._initBorderStyleDropDown($('<input id=\"k-editor-border-style\" />').appendTo(container),\n                                    \"borderStyle\",\n                                    tableProperties,\n                                    tableView,\n                                    borderStyles);\n                            }\n                        },{\n                            colSpan: \"full\",\n                            field: \"k-editor-collapse-borders\",\n                            label: \"\",\n                            editor: function(container, options) {\n                                that._initCheckbox($('<input id=\"k-editor-collapse-borders\"/>').appendTo(container), \"collapseBorders\", tableProperties, tableView, { label: encode(messages.collapseBorders) });\n                            }\n                        }]\n                    }\n                ]\n            }).data(\"kendoForm\");\n            form.layoutWrapper.addClass(\"k-gap-x-4\");\n\n            return form;\n        },\n\n        _createCellPropertiesForm: function(dialog, messages) {\n            var that = this;\n            var table = that.options.table;\n            var formElement = dialog.element.find(\"#k-cell-properties\");\n            var components = that.components = that.components || {};\n            var cellView = components.cellView = {};\n            var cellProperties = (table.selectedCells && table.selectedCells[0]) || { borderStyle: \"\", wrapText: true };\n            var form;\n\n            that._addUnit(units, cellProperties.widthUnit);\n            that._addUnit(units, cellProperties.heightUnit);\n            form = formElement.kendoForm({\n                renderButtons: false,\n                layout: \"grid\",\n                grid: {\n                    cols: 4\n                },\n                items: [\n                    {\n                        colSpan: \"full\",\n                        field: \"k-editor-selectAllCells\",\n                        label: \"\",\n                        editor: function(container, options) {\n                            that._initCheckbox($('<input id=\"k-editor-selectAllCells\" />').appendTo(container), \"selectAllCells\", table.tableProperties, cellView, { label: encode(messages.selectAllCells) });\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-cell-width\",\n                        label: encode(messages.width),\n                        hint: encode(messages.applyToColumn),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-cell-width\" />').appendTo(container), \"width\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-cell-width-type\",\n                        label: {\n                            encoded: false,\n                            text: '&nbsp;'\n                        },\n                        editor: function(container, options) {\n                            that._initDropDownList($(`<input id=\"k-editor-cell-width-type\" aria-label=\"${ messages.units }\" />`).appendTo(container),\n                                \"widthUnit\",\n                                cellProperties,\n                                cellView,\n                                units);\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-cell-height\",\n                        label: encode(messages.height),\n                        hint: encode(messages.applyToRow),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-cell-height\" />').appendTo(container), \"height\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-cell-height-type\",\n                        label: {\n                            encoded: false,\n                            text: '&nbsp;'\n                        },\n                        editor: function(container, options) {\n                            that._initDropDownList($(`<input id=\"k-editor-cell-height-type\" aria-label=\"${ messages.units }\" />`).appendTo(container),\n                                \"heightUnit\",\n                                cellProperties,\n                                cellView,\n                                units);\n                        }\n                    },{\n                        colSpan: 2,\n                        field: \"k-editor-cell-alignment\",\n                        label: encode(messages.alignment),\n                        editor: function(container, options) {\n                            that._initCellAlignmentDropDown($('<input id=\"k-editor-cell-alignment\" class=\"k-align\" />').appendTo(container), cellProperties);\n                        }\n                    },{\n                        colSpan: 2,\n                        field: \"k-editor-wrap-text\",\n                        label: \"Text control\",\n                        editor: function(container, options) {\n                            that._initTextWrapDropDown($('<input id=\"k-editor-wrap-text\" />').appendTo(container),\n                            cellProperties);\n                        }\n                    },{\n                        colSpan: \"full\",\n                        field: \"k-editor-cell-bg\",\n                        label: encode(messages.background),\n                        editor: function(container, options) {\n                            that._initColorPicker($('<input id=\"k-editor-cell-bg\" />').appendTo(container), \"bgColor\", cellProperties, cellView);\n                        }\n                    },{\n                        colSpan: 2,\n                        field: \"k-editor-table-cell-margin\",\n                        label: encode(messages.cellMargin),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-table-cell-margin\" />').appendTo(container), \"cellMargin\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                        }\n                    },{\n                        type: \"group\",\n                        label: \"Cell Paddings\",\n                        layout: \"grid\",\n                        colSpan: 4,\n                        grid: {\n                            cols: 4,\n                            gutter: 20\n                        },\n                        items: [\n                            {\n                                colSpan: \"full\",\n                                field: \"k-editor-padding-all-sides\",\n                                label: \"\",\n                                editor: function(container, options) {\n                                    that._initCheckbox($('<input id=\"k-editor-padding-all-sides\" />').appendTo(container), \"independentCellPaddings\", table.tableProperties, cellView,\n                                    {\n                                        checked: true,\n                                        label: encode(messages.independentCellPaddings),\n                                        change: that._onPaddingCheckChange.bind(that)\n                                    });\n                                }\n                            },{\n                                colSpan: 1,\n                                field: \"k-editor-table-cells-padding-top\",\n                                label: encode(messages.topPadding),\n                                editor: function(container, options) {\n                                    that._initNumericTextbox($('<input id=\"k-editor-table-cells-padding-top\" />').appendTo(container), \"topCellPadding\", cellProperties, cellView,\n                                    {\n                                        placeholder: encode(messages.auto),\n                                        change: that._onPaddingTopChange.bind(that)\n                                    });\n                                }\n                            },{\n                                colSpan: 1,\n                                field: \"k-editor-table-cells-padding-right\",\n                                label: encode(messages.rightPadding),\n                                editor: function(container, options) {\n                                    that._initNumericTextbox($('<input id=\"k-editor-table-cells-padding-right\" />').appendTo(container), \"rightCellPadding\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                                }\n                            },{\n                                colSpan: 1,\n                                field: \"k-editor-table-cells-padding-bottom\",\n                                label: encode(messages.bottomPadding),\n                                editor: function(container, options) {\n                                    that._initNumericTextbox($('<input id=\"k-editor-table-cells-padding-bottom\" />').appendTo(container), \"bottomCellPadding\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                                }\n                            },{\n                                colSpan: 1,\n                                field: \"k-editor-table-cells-padding-left\",\n                                label: encode(messages.leftPadding),\n                                editor: function(container, options) {\n                                    that._initNumericTextbox($('<input id=\"k-editor-table-cells-padding-left\" />').appendTo(container), \"leftCellPadding\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                                }\n                            }\n                        ]\n                    },{\n                        type: \"group\",\n                        label: \"Borders\",\n                        layout: \"grid\",\n                        colSpan: 4,\n                        grid: {\n                            cols: 4,\n                            gutter: 10\n                        },\n                        items: [{\n                            colSpan: 1,\n                            field: \"k-editor-cell-border-width\",\n                            label: encode(messages.borderWidth),\n                            editor: function(container, options) {\n                                that._initNumericTextbox($('<input id=\"k-editor-cell-border-width\" />').appendTo(container), \"borderWidth\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-cell-border-color\",\n                            label: encode(messages.borderColor),\n                            editor: function(container, options) {\n                                that._initColorPicker($('<input id=\"k-editor-cell-border-color\" />').appendTo(container), \"borderColor\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                            }\n                        },{\n                            colSpan: 2,\n                            field: \"k-editor-cell-border-style\",\n                            label: encode(messages.borderStyle),\n                            editor: function(container, options) {\n                                that._initBorderStyleDropDown($('<input id=\"k-editor-cell-border-style\" />').appendTo(container),\n                                    \"borderStyle\",\n                                    cellProperties,\n                                    cellView,\n                                    borderStyles);\n                            }\n                        }]\n                    },{\n                        colSpan: \"full\",\n                        field: \"k-editor-cell-id\",\n                        label: {\n                            text: encode(messages.id),\n                            optional: true\n                        },\n                        editor: function(container, options) {\n                            that._initInput($('<input id=\"k-editor-cell-id\" />').appendTo(container), \"id\", cellProperties, cellView);\n                        }\n                    },{\n                        colSpan: \"full\",\n                        field: \"k-editor-cell-css-class\",\n                        label: {\n                            text: encode(messages.cssClass),\n                            optional: true\n                        },\n                        editor: function(container, options) {\n                            that._initInput($('<input id=\"k-editor-cell-css-class\" />').appendTo(container), \"className\", cellProperties, cellView);\n                        }\n                    }\n                ]\n            }).data(\"kendoForm\");\n            form.layoutWrapper.addClass(\"k-gap-x-4\");\n\n            return form;\n        },\n\n        _createAccessibilityPropertiesForm: function(dialog, messages) {\n            var that = this;\n            var table = that.options.table;\n            var formElement = dialog.element.find(\"#k-accessibility-properties\");\n            var components = that.components;\n            var accessibilityView = components.accessibilityView = {};\n            var tableProperties = table.tableProperties;\n            var form;\n\n            form = formElement.kendoForm({\n                renderButtons: false,\n                layout: \"grid\",\n                grid: {\n                    cols: 4\n                },\n                items: [\n                    {\n                        colSpan: \"full\",\n                        field: \"k-editor-id\",\n                        label: {\n                            text: encode(messages.id),\n                            optional: true\n                        },\n                        editor: function(container, options) {\n                            that._initInput($('<input id=\"k-editor-id\" />').appendTo(container), \"id\", tableProperties, accessibilityView);\n                        }\n                    },{\n                        colSpan: \"full\",\n                        field: \"k-editor-css-class\",\n                        label: {\n                            text: encode(messages.cssClass),\n                            optional: true\n                        },\n                        editor: function(container, options) {\n                            that._initInput($('<input id=\"k-editor-css-class\" />').appendTo(container), \"className\", tableProperties, accessibilityView);\n                        }\n                    },\n                    {\n                        layout: \"grid\",\n                        grid: {\n                            cols: 4,\n                            gutter: 16\n                        },\n                        colSpan: \"full\",\n                        type: \"group\",\n                        label: \"Accessibility\",\n                        items: [\n                            {\n                                colSpan: 2,\n                                field: \"k-editor-table-caption\",\n                                label: {\n                                    text: encode(messages.caption),\n                                    optional: true\n                                },\n                                editor: function(container, options) {\n                                    that._initInput($('<input id=\"k-editor-table-caption\" />').appendTo(container), \"captionContent\", tableProperties, accessibilityView);\n                                }\n                            },{\n                                colSpan: 2,\n                                field: \"k-editor-accessibility-alignment\",\n                                label: encode(messages.captionAlignment),\n                                editor: function(container, options) {\n                                    that._initAccessibilityAlignmentDropDown($('<input id=\"k-editor-accessibility-alignment\" />').appendTo(container), tableProperties);\n                                }\n                            },{\n                                colSpan: 1,\n                                field: \"k-editor-table-header-rows\",\n                                label: encode(messages.headerRows),\n                                editor: function(container, options) {\n                                    that._initNumericTextbox($('<input id=\"k-editor-table-header-rows\" />').appendTo(container),\n                                    \"headerRows\",\n                                    tableProperties,\n                                    accessibilityView,\n                                    {\n                                        max: tableProperties.rows || DEFAULT_NUMBER_OF_COLS_AND_ROWS\n                                    });\n                                }\n                            },{\n                                colSpan: 1,\n                                field: \"k-editor-table-header-columns\",\n                                label: encode(messages.headerColumns),\n                                editor: function(container, options) {\n                                    that._initNumericTextbox($('<input id=\"k-editor-table-header-columns\" />').appendTo(container),\n                                    \"headerColumns\",\n                                    tableProperties,\n                                    accessibilityView,\n                                    {\n                                        max: tableProperties.columns || DEFAULT_NUMBER_OF_COLS_AND_ROWS\n                                    });\n                                }\n                            },{\n                                colSpan: 2,\n                                field: \"k-editor-cells-headers\",\n                                label: encode(messages.associateCellsWithHeaders),\n                                editor: function(container, options) {\n                                    var element = $(`<select id=\"k-editor-cells-headers\">\n                                    <option value=\"none\">${ messages.associateNone }</option>\n                                    <option value=\"scope\">${ messages.associateScope }</option>\n                                    <option value=\"ids\">${ messages.associateIds }</option>\n                                </select>`).appendTo(container);\n\n                                    that._initAssociationDropDown(element, \"cellsWithHeaders\", { valuePrimitive: true }, tableProperties, accessibilityView);\n                                }\n                            },{\n                                colSpan: \"full\",\n                                field: \"k-editor-accessibility-summary\",\n                                label: {\n                                    text: encode(messages.summary),\n                                    optional: true\n                                },\n                                editor: function(container, options) {\n                                    that._initTextArea($('<textarea id=\"k-editor-accessibility-summary\"></textarea>').appendTo(container), \"summary\", tableProperties, accessibilityView, {\n                                        rows: 5,\n                                        placeholder: messages.tableSummaryPlaceholder\n                                    });\n                                }\n                            }\n                        ]\n                    }\n                ]\n            }).data(\"kendoForm\");\n\n            form.layoutWrapper.addClass(\"k-gap-x-4\");\n\n            return form;\n        }\n    });\n\n    kendo.ui.editor.TableWizardDialog = TableWizardDialog;\n\n    })(window.kendo.jQuery);\n\n    var __meta__ = {\n            id: \"editor\",\n            name: \"Editor\",\n            category: \"web\",\n            description: \"Rich text editor component\",\n            depends: [ \"combobox\", \"dropdownlist\", \"window\", \"colorpicker\", \"toolbar\", \"icons\" ],\n            features: [ {\n                id: \"editor-imagebrowser\",\n                name: \"Image Browser\",\n                description: \"Support for uploading and inserting images\",\n                depends: [ \"imagebrowser\" ]\n            }, {\n                id: \"editor-resizable\",\n                name: \"Resize handle\",\n                description: \"Support for resizing the content area via a resize handle\",\n                depends: [ \"resizable\" ]\n            }, {\n                id: \"editor-tablewizard\",\n                name: \"Table wizard dialog\",\n                description: \"Support for table properties configuration\",\n                depends: [ \"tabstrip\", \"button\", \"numerictextbox\", \"textarea\" ]\n            }, {\n                id: \"editor-pdf-export\",\n                name: \"PDF export\",\n                description: \"Export Editor content as PDF\",\n                depends: [ \"pdf\", \"drawing\" ]\n            }]\n        };\n    var kendo$1 = kendo;\n\n    return kendo$1;\n\n}));\n"]}