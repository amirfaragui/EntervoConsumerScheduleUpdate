{"version":3,"file":"kendo.grid.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendogrid","js","this","$","undefined$1","kendo","window","ContextMenu","ui","extend","encode","htmlEncode","ACTION","GridContextMenu","init","element","options","that","fn","call","_overrideTemplates","_extendItems","bind","_onSelect","_onOpen","templates","sprite","icon","spriteCssClass","iconClass","defaultItems","separator","name","create","text","command","rules","edit","destroy","select","items","softRules","copySelection","copySelectionNoHeaders","paste","reorderRow","exportPDF","exportExcel","sortAsc","sortDesc","moveGroupPrevious","moveGroupNext","events","concat","ev","item","data","split","map","val","indexOf","key","reduce","acc","v","Object","assign","target","action","menu","sender","elTarget","event","isEmptyObject","closest","length","preventDefault","_toggleSeparatorVisibility","find","attr","each","i","enable","_validateSoftRules","filter","prev","next","hide","isPlainObject","keys","_append","_extendItem","messages","j","forEach","subItem","commands","uid","guid","_readState","_validateRules","tool","state","states","isFunction","append","args","trigger","grid","jQuery","Command","Class","MoveGroupCommand","exec","groupable","method","dir","_change","SortCommand","idx","dataSource","sort","field","_getCellField","multipleMode","sortable","mode","compare","splice","push","AddCommand","addRow","EditCommand","inCellMode","_editMode","editCell","editRow","DeleteCommand","removeRow","CopySelectionCommand","withHeaders","copySelectionToClipboard","SelectRowCommand","selectMode","Selectable","parseOptions","selectable","cell","SelectAllRowsCommand","rows","ClearSelectionCommand","clearSelection","ReorderRowCommand","newIndex","index","reorderRowTo","ExportPDFCommand","saveAsPDF","ExportExcelCommand","selection","exportSelectedToExcel","saveAsExcel","GridCommand","useLoaderContainer","toggle","wrapper","loader","defaultOptions","message","overlayColor","themeColor","loaderOverlay","html","renderLoaderContainer","wrapperWidth","width","mask","wrapperClone","clone","removeAttr","addClass","insertBefore","remove","DataSource","ObservableObject","tbodySupportsInnerHtml","support","tbodyInnerHtml","activeElement","_activeElement","Widget","outerWidth","_outerWidth","outerHeight","_outerHeight","getType","type","grep","isArray","Array","inArray","prototype","contains","math","Math","DOT","PROGRESS","ERROR","DATA_CELL","DATA_CELL_HIDDENINCLUDED","NAVROW","NAVCELL","ITEMROW","COLGROUP","HEADERCELLS","CARET_ALT_DOWN","CARET_ALT_RIGHT","CARET_ALT_RIGHT_CACHE","NS","INPUT_SELECTORS","EDIT","BEFOREEDIT","SAVE","REMOVE","DETAILINIT","FILTERMENUINIT","COLUMNMENUINIT","FILTERMENUOPEN","COLUMNMENUOPEN","CELLCLOSE","CHANGING","CHANGE","COLUMNHIDE","COLUMNSHOW","SAVECHANGES","DATABOUND","DETAILEXPAND","DETAILCOLLAPSE","ITEM_CHANGE","PAGE","PAGING","PASTE","SCROLL","SYNC","LOAD_START","LOAD_END","REQUESTEND","FOCUSED","HOVER","ACTIVE","FOCUSABLE","SELECTED","CHECKBOX","CHECKBOXINPUT","NORECORDSCLASS","LINK_CLASS","ICON_CLASS","SVG_ICON_CLASS","ORDER_CLASS","SORTED_CLASS","HEADER_CLASS","HEADER_COLUMN_MENU_CLASS","FILTER_MENU_CLASS","STICKY_CELL_CLASS","STICKY_HEADER_CLASS","STICKY_FOOTER_CLASS","STICKY_HEADER_NO_BORDER_CLASS","GROUPING_ROW","RESIZE","ROWRESIZE","COLUMNRESIZE","COLUMNREORDER","COLUMNLOCK","COLUMNUNLOCK","COLUMNSTICK","COLUMNUNSTICK","ROWREORDER","NAVIGATE","CLICK","MOUSEDOWN","MOUSEUP","MOUSEENTER","MOUSELEAVE","MOUSEMOVE","DUBLECLICK","HEIGHT","WIDTH","AUTO","TABINDEX","FUNCTION","STRING","BOTTOM","CONTAINER_FOR","FIELD","INPUT","INCELL","INLINE","OVERFLOW","SORT","GROUP_SORT","COLLAPSE","EXPAND","ID","PX","TR","DIV","ARIA_LABEL","ARIA_OWNS","ARIA_ROWCOUNT","ARIA_COLCOUNT","ARIA_COLINDEX","ARIA_ROWINDEX","ARIA_EXPANDED","ARIA_CHECKED","ARIA_ACTIVEDESCENDANT","ROLE","NONE","ROW","ROWGROUP","COLUMNHEADER","GRIDCELL","formatRegExp","whitespaceRegExp","nonDataCellsRegExp","RegExp","filterRowRegExp","COMMANDBUTTONTMPL","className","DEFAULTSELECTCOLUMNTMPL","size","ariaLabel","SELECTCOLUMNTMPL","SELECTCOLUMNHEADERTMPL","DRAGHANDLECOLUMNTMPL","DEFAULTHEADERTEMPLATE","isRtl","browser","GroupsPager","isIE11","msie","version","isMac","test","navigator","userAgent","classNames","defaultBodyContextMenu","defaultHeadContextMenu","defaultGroupsContextMenu","Pager","useRanges","_omitPrefetch","totalPages","ceil","_collapsedTotal","pageSize","groupsTotal","VirtualScrollable","_refreshHandler","refresh","setDataSource","wrap","unbind","virtual","itemHeight","noop","prefetch","maxScrollHeight","add","verticalScrollbar","off","clearTimeout","_timeout","_scrollingTimeout","drag","scrollbar","css","overflow","content","children","first","parent","on","_wheelScroll","_wrapper","kineticScrollNeeded","touch","UserEvents","allowSelection","start","e","capture","move","scrollTop","y","delta","scrollLeft","x","appendTo","_scroll","ctrlKey","wheelDeltaY","clientHeight","scrollHeight","delayLoading","currentTarget","rowHeight","skip","_rangeStart","height","innerHeight","isScrollingUp","_scrollbarTop","firstItemIndex","max","floor","lastItemOffset","lastItemIndex","_preventScroll","_prevScrollTop","_scrollTop","_scrolling","_fetch","setTimeout","_page","take","scrollToTop","_scrollTo","scrollToBottom","_scrollWrapperToTop","_scrollWrapperToBottom","_scrollWrapperOnColumnResize","initialScrollTop","scrollWidth","clientWidth","_wrapperScrolled","_isScrolledToBottom","_isWrapperScrolledToBottom","_isScrolledToTop","parseInt","itemIndex","rowIndex","position","result","rangeStart","scrollIntoView","row","container","containerHeight","containerScroll","elementOffset","offsetTop","elementHeight","offsetHeight","scrollingUp","currentSkip","fetching","webkitCorrection","webkit","total","_isGroupPaged","min","_fetching","callback","isGroupPaged","_groupRangeExists","inRange","range","repaintScrollbar","shouldScrollWrapper","totalHeight","maxHeight","wrapperElement","wasScrolledToBottom","addScrollBarHeight","offsetWidth","divElements","join","empty","cancel","page","attrEquals","attrName","attrValue","groupCells","count","stringifyAttributes","attributes","defaultCommands","save","update","canceledit","excel","pdf","search","columns","fillMode","cursor","context","value","document","body","reorder","selector","source","dest","before","sourceIndex","eq","elements","lockedContent","attachCustomCommandEvent","commandName","click","replace","normalizeColumns","encoded","locked","parentIds","column","hidden","Function","_attributesFunction","isVisible","addHiddenStyle","footerAttributes","headerAttributes","removeHiddenStyle","headers","id","columnParent","parents","columnParents","inserted","setColumnVisibility","visible","setVisibility","show","setColumnMediaVisibility","setColumnMatchesMedia","_hideByMedia","matchesMedia","columnMatchesMedia","isUndefined","media","isCellVisible","style","display","classList","isElementVisible","visibleColumns","columnsWithMedia","minScreenWidth","Error","toJQuery","toArray","findColumnByField","moveCellsBetweenContainers","sources","leafs","destination","groups","sourcesDepth","depth","targetDepth","insertAfter","last","cells","rowSpan","addRowSpanValue","moveCells","updateCellIndex","thead","offset","allColumns","leafColumns","el","hasClass","columnPosition","temp","sourcePosition","columnVisiblePosition","ths","t","cellCounts","decorateCellWithClass","classes","match","cssClasses","pop","findReorderTarget","masterColumns","parentColumns","rtl","targetLocked","findParentColumnWithChildren","targetIndex","flatColumnsInDomOrder","flatColumns","lockedColumns","nonLockedColumns","targetParentContainerIndex","hiddenLeafColumnsCount","counter","sumWidths","cols","columnsWidth","colWidth","removeEmptyRows","emptyRowsCount","mapColumnToCellRows","setLeftAndRightStyles","left","right","createColumnAttribute","attribute","property","addColumnAttribute","removeColumnAttribute","removeAttributeProperty","stickyColumns","sticky","visibleNonLockedColumns","visibleLockedColumns","visibleLeafColumns","visibleLeafExportColumns","values","title","childColumns","visibleChildColumns","getColumnsFields","editField","format","editor","editorOptions","label","leafDataCells","indexAttr","a","b","indexA","indexB","parentColumnsCells","headerRows","level","parentCellsWithChildren","prevCells","prevAll","colSpan","parentCell","getAttribute","childColumnsCells","colSpanAttr","child","appendContent","tbody","table","placeholder","tmp","$html","applyStylesFromKendoAttributes","_","appendChild","createElement","innerHTML","getValidCssClass","firstChild","replaceChild","kendoStyleAttrObject","normalizeCols","hasDetails","colgroup","is","prepend","convertToObject","array","formatGroupValue","columnValues","groupValue","usedValue","setCellVisibility","pad","hideColumnCells","columnIndex","groupRows","hasSubgroups","showColumnCells","updateColspan","toAdd","toRemove","num","tableWidth","Grid","DataBoundWidget","_events","_element","_ariaId","_columns","_foreignKeyPromises","when","apply","then","_continueInit","_dataSource","_stickyColumns","_tbody","_thead","_rowResizing","_groupable","_toolbar","columnsToolbarButton","_globalColumnsMenu","_pageable","_setContentHeight","_templates","_navigatable","_initSelectableAggregates","_selectable","_statusBar","_clipboard","_paste","_details","_editable","_attachCustomCommandsEvent","_adaptiveColumns","_minScreenSupport","autoBind","fetch","_group","_groups","_footer","contextMenu","_initContextMenu","_resizeHandler","resize","_initLoader","notify","_showWatermarkOverlay","scrollableContent","scrollable","leftMostPosition","virtualScrollable","navigatable","toolbar","filterable","allowCopy","allowPaste","pageable","persistSelection","editable","encodeTitles","rowTemplate","altRowTemplate","statusBarTemplate","noRecords","resizable","reorderable","columnMenu","detailTemplate","columnResizeHandleWidth","mobile","loaderType","loading","exporting","cancelDelete","confirmation","confirmDelete","selectRow","selectAllRows","reorderRowUp","reorderRowDown","reorderRowTop","reorderRowBottom","exportPdf","exportToExcelAll","exportToExcelSelection","exportToExcelSelectionNoHeaders","expandCollapseColumnHeader","groupHeader","ungroupHeader","itemsSelected","dragHandleLabel","toolbarLabel","groupingHeaderLabel","filterCellTitle","reorderableInstance","_destroyColumnAttachments","_navigatableTables","_headertables","pager","timer","_progressTimeOut","_collapseGroupsTimeOut","_endlessFetchTimeOut","_destroyGroupable","pasteHandler","pasteActionsDropDownList","clearArea","_selectedIds","copyHandler","updateClipBoardState","clearAreaHandler","_selectableAggregatesOptions","_resizeUserEvents","_resizeHandleDocumentClickHandler","_destroyRowResizing","_destroyVirtualScrollable","editableUserEvents","_lockedContentUserEvents","_destroyEditable","_progressHandler","_errorHandler","_clearSortClasses","_sortHandler","scrollables","lockedHeader","_removeLockedContainers","pane","_isMobile","minScreenResizeHandler","_detachColumnMediaResizeHandler","_draggableInstance","_draggableRowsInstance","tbodyContextMenu","theadContextMenu","lockedRowTemplate","lockedAltRowTemplate","footerTemplate","groupFooterTemplate","lockedGroupFooterTemplate","noRecordsTemplate","statusBar","footer","lockedTable","lockedFooter","_groupableClickHandler","_groupRows","_setContentWidthHandler","getOptions","deepExtend","initialData","_data","group","aggregate","transport","setOptions","currentOptions","mobileWrapper","roleSelector","after","removeClass","_setEvents","_items","includeGroupRows","tr","dataItems","n","resizeHandle","th","filterMenu","_aria","tbodyId","headerGroupId","footerGroupId","tableOwned","rowsCount","gridRole","_hasDetails","groupingHeader","gridId","_ariaGridId","tableTabindex","numberOfFixedRows","trailingColumns","_trailingColumns","virtualScroll","_ariaRowIndex","_ariaColumnIndex","role","_ariaHeaderFooter","_ariaLockedContent","_ariaGroupTitles","previousIndex","dataIndex","cellsIndex","dataVirtual","not","lockedHeaderRows","firstIndex","Number","MAX_VALUE","lastIndex","lockedLastIndex","previousVirtual","nextVirtual","eachHeaderCell","current","currentIndex","lockedParent","setAttribute","rowGroup","groupId","_ariaLocked","_cellId","lockedRows","ownedCells","_cellsIds","tableRows","_ariaAddHiddenColIndex","leafColsCount","_ariaRemoveHiddenColIndex","currentRow","numberOfHeaderRows","bodyRows","footerRows","totalNumberOfItems","previousItems","previousMaster","prefix","_createResizeHandle","headerWrap","ieCorrection","leftMargin","leftBorderWidth","top","indicatorWidth","halfResizeHandle","rtlCorrection","mozilla","parseFloat","_autoFitLeafColumn","_positionColumnResizeHandle","lockedHead","button","buttons","which","hasAttribute","_resizeHandleDocumentClick","_resetResizeHandleHeader","_hideResizeHandle","_positionColumnResizeHandleTouch","threshold","minHold","hold","resizeColumn","columnWidth","col","isLocked","isHidden","mobileOS","contentTable","header","columnMinWidth","minResizableWidth","gridWidth","constrain","totalWidth","_footerWidth","_scrollVirtualWrapperOnColumnResize","_applyLockedContainersWidth","_syncLockedContentHeight","_syncLockedHeaderHeight","_updateStickyColumns","_adjustColWidths","colWidths","_resizable","columnStart","isMobile","Resizable","handle","hint","footerTable","location","rtlMultiplier","currentWidth","resizeend","newWidth","oldWidth","_addLockedRowResizing","_getMinRowHeight","minHeight","currentMinHeight","_cacheRowHeight","_cachedRowsHeight","_clearCachedRowsHeight","_mapCachedRowsHeight","input","ds","output","_rowResizerDblClick","newHeight","resizer","rowResizer","oldHeight","rowPair","pairMinHeight","_setupRowResizer","_attachRowResizerEvents","isIn","_getResizerTop","inner","paddingTop","getComputedStyle","_getResizerContainer","_createRowResizer","targetHeight","positionIntarget","offsetY","previousRow","_detachRowResizerEvents","_mapResizedRows","multiSelectionLocked","pairNew","pairMin","r","rowStart","rowResizing","_draggable","kendoDraggable","autoScroll","dragstart","dragend","_reorderable","kendoReorderable","draggable","dropFilter","dragOverContainers","lockable","inSameContainer","sourceParent","targetParent","_isLocked","change","oldIndex","reorderColumn","_reorderHeader","destPosition","sourceLockedColumnsCount","lockedColumnDepth","nonLockedColumnDepth","sourceLockedColumns","targetLockedColumns","_reorderContent","headerCol","footerCol","beforeVisibleColumn","visibleSources","destIndex","colSourceIndex","colDest","lockedCount","columnsArray","_findClosestVisibleColumnIndex","slice","_hasFilterRow","_hasVirtualColumns","reverse","closestVisibleColumn","leafIndex","autoFitColumn","_hasReorderableRows","_draggableRows","_checkBoxSelection","clickMoveClick","_hasDragHandleColumn","holdToDrag","showHintOnHold","preventOsHoldFeatures","elm","innerText","cursorOffset","_reorderableRows","smartPosition","allowIcon","orientation","reorderDropCue","positionDropCue","dropTarget","firstCellLeft","getOffset","transform","externalDraggable","_triggerRowRorder","reorderRows","dataItem","pushMove","rowsLength","targetItem","_rowDropping","autoFitColumns","headerTable","leafCols","minWidth","contentDiv","thWidth","visibleLocked","notGroupOrHierarchyCol","notGroupOrHierarchyVisibleCell","tables","safari","oldColumnWidth","newColumnWidth","lockChanged","destColumn","groupHeaderColumnTemplateColumns","groupHeaderColumnTemplate","sourceColumns","_updateLockedCols","_updateCols","_updateColumnCellIndex","_updateColumnSorters","_renderGroupRows","_updateTablesWidth","_updateFirstColumnClass","lockColumn","unstickColumn","unlockColumn","stickColumn","_removeStickyAttributes","_removeStickyStyles","_anyStickyColumns","_updateStickyFilterCells","cellIndex","td","lockedColumnOffset","_modelForContainer","getByUid","_calculateColumnIndex","virtualOffset","useDoubleTapEditing","_isEditableEnabled","readonly","_removeEditableClickHandlers","editContainer","_editContainer","_mousedownOnEditCell","supportDoubleTap","fastTap","isLockedCell","has","end","closeCell","_requestInProgress","_scrollVirtualWrapper","shouldCloseCell","_virtualColScroll","handler","_editCommandClickHandler","_editCommandClick","_isVirtualInlineEditable","_removeCommandClickHandler","_removeCommandClick","_belongsToGrid","stopPropagation","_confirmation","model","isColumnEditable","_attachModelChange","_shouldClearEditableState","_clearEditableState","kendoEditable","fields","skipFocus","_isVirtualIncellEditable","_editableState","adjustRowHeight","_relatedRow","_syncLockedScroll","enableEditing","addButton","getKendoButton","_createClickHandler","disableEditing","cancelRow","_adjustLockedHorizontalScrollBar","touchScroller","_adjustRowsHeight","table1","table2","diff","lockedHeigth","tableHeigth","syncTableHeight","_syncLockedFooterHeight","editView","_editCancelClickHandler","_editUpdateClickHandler","_detachModelChange","_destroyEditView","_editableIsClosing","close","_confirmDialog","purge","navigate","_modelChangeHandler","_modelChange","isCancel","errors","validatable","dirtyFields","_displayCell","ns","storage","settings","Template","templateSettings","tmpl","template","_cellTmpl","_removeRow","schema","_removeGroupIfEmpty","idField","sync","_createPopupEditor","_createInlineEditor","_editCancelClick","_editUpdateClick","saveRow","_setCurrent","focusTable","_editFields","updateText","cancelText","updateIconClass","cancelIconClass","tempCommand","editMenuGuid","unescape","getCommand","updateButton","_createButton","skipCommandClass","cancelButton","kendoWindow","modal","_footerTemplate","outerHTML","userTriggered","clearContainer","Form","buttonsTemplate","formData","buttonsHTML","_openPopUpEditor","windowEditor","windowOptions","_editAnimation","center","open","Editable","cancelChanges","_displayRow","valid","deferred","Deferred","reject","promise","resolve","related","newRow","nextRow","isSelected","isAlt","replaceWith","_showMessage","Confirm","preventScroll","closable","okText","done","fail","confirmDialog","confirm","_shouldMapHights","_isVirtualEditable","_virtualPageToTop","saveChanges","createAt","view","createAtBottom","toLowerCase","virtualEditable","serverPaging","_removeCurrent","_virtualAddRow","insert","_editModel","_firstEditableColumnIndex","_virtualAddRowAtBottom","_virtualAddRowAtTop","at","_virtualPageToBottom","_virtualPage","_clickAdd","_clickCancel","_clickExcel","_isExport","_progress","always","_clickPdf","_pdfInitialized","_clickSave","_searchInput","_searchTimeOut","searchFields","expression","filters","logic","endless","_endlessPageSize","_pushExpression","_pasteToolbarDropDown","kendoDropDownList","dataTextField","dataValueField","_allowFilterPaste","isServerFiltering","serverFiltering","defaultOperators","string","number","date","enums","boolean","operator","modelInfo","reader","fieldInfo","parseFn","parse","_addClickHandler","_cancelClickHandler","_saveClickHandler","_excelClickHandler","_pdfClickHandler","_serachHandler","_attachToolbarClicks","prependTo","_processItems","kendoToolBar","navigateOnTab","tools","itemsCollectionHasSpacer","searchText","_processAttr","keyValue","replaceAll","attributeClassMatch","compiledAttributes","renderButton","_hasFooters","groupRow","collapseGroup","expandGroup","_attachGroupable","draggables","enabled","chrome","Groupable","groupContainer","draggableElements","allowDrag","enableContextMenu","removeGroup","_showUngroupedColumn","_hideGroupedColumns","_resetEndless","_addGroupableOptionsToHeader","colID","hideOnGroup","showColumn","hideColumn","_skip","_pageSize","_take","headerCell","columnOptions","columnFieldMap","headerCells","_headerCells","kendoGroupable","_removeGroupableOptionsFromHeader","removeData","_continuousItems","lockedItems","nonLockedItems","multi","notString","hasSkeletonLoader","checkboxSelection","multiple","aria","toggleable","dragToSelect","changing","originalEvent","selectedValues","_persistSelectedRows","_uncheckCheckBoxes","_checkRows","_toggleHeaderCheckState","_calculateAggregatesForSelected","cellAggregates","_cellAggregates","useAllItems","relatedTarget","continuousItems","ignoreOverlapped","addIdToRanges","triggerChange","lastSelection","eventObject","keyCode","SPACEBAR","shiftKey","_deselectCheckRows","clear","_lastActive","LEFT","RIGHT","UP","DOWN","selectRange","_firstSelectee","toCompare","compareElements","_pasteReplaceHandler","plain","currentRowUid","currentField","uids","f","nextAll","_executePaste","_pasteInsertHandler","dataItemIndex","selectedUids","_getSelectedRowUids","selectedColumnFields","_getSelectedColumnFields","changedItems","startingIndex","c","set","dirty","_pasteKeyboardHandler","rowUid","clipBoardData","clipboardData","operation","getData","trimEnd","_currentRowIndex","_restoreCurrent","stopImmediatePropagation","tableClick","areaClipBoard","getTSV","includeHeaders","_createAreaClipBoard","execCommand","Event","metaKey","getSelection","toString","createRange","opacity","selected","delimeter","hasLockedCols","cellsOffset","lockedCols","inLockedArea","findIndex","cellText","rowsOffset","getTitle","headerIndex","_anyColumnHasMediaQuery","_setColumnsMediaVisibility","_attachColumnMediaResizeHandler","_columnsWithMediaQuery","_columnMediaResizeHandler","_onColumnMediaResize","_setContentMediaWidth","_setColumnMediaVisibility","_showColumnByMedia","_hideColumnByMedia","initiallyHidden","headerColumns","headerColgroup","headerColumnsCount","visibleHeaderColumnsCount","hiddenHeaderColumnsCount","totalHeaderWidth","currentHeaderWidth","colgroupChild","columnStyleWidth","hideMinScreenCols","screenWidth","innerWidth","screen","_iterateMinScreenCols","any","_setStickyColumns","filterCells","stickyStyle","updateStyles","visibleStickyColumns","stickyWidths","_calculateStickyWidths","_setStickyClassAttributes","_setStickyStyleAttributes","_setStickyStyles","initialLeftWidth","initialRightWidth","nextColumnLeft","nextColumnRight","fill","_sumColumnWidth","masterIndex","stickyLeft","stickyRight","childCols","childStickyWidths","cellClassRegExp","headerClassRegExp","footerClassRegExp","headerClassNoBorderRegExp","leafsCols","_getColumnHeader","groupHeaderColumnTemplateClass","_sumCurrentWidths","getSelectedData","selectedRanges","selectedRangeNames","selectedSingleItems","_mapSelectionToData","getSelectedDataByKeys","selectedKeyNames","columnMapHandler","get","ooxml","exporter","ExcelExporter","book","sheets","autoWidth","freezePane","exportData","sortHandler","exportDataSort","isExcelExportableColumn","_addRangeSelectionRows","_addSingleSelectionRows","workbook","Workbook","skipCustomHeight","toDataURLAsync","dataURI","saveAs","fileName","proxyURL","forceProxy","_setExporterColumns","_createExportRows","_rows","_dataRows","_prepareColumn","columnsFilter","ignoreOffset","curr","isRowSelection","nodeName","fieldAttr","indexOffset","_relatedCell","_parseSelectableAggregatesOptions","sum","average","earliest","latest","isTrue","isFalse","selectedData","cellsLength","columnFields","isCellSelection","numberAggregates","dateAggregates","booleanAggregates","$cell","hasCheckbox","hasWrappedCheckbox","Date","checked","prop","rangeSelectedAttr","modelId","allRows","selectedViewIds","ids","_updateCurrentAttr","nextId","descId","headerId","_current","_scrollCurrent","tableContainer","isInLockedContainer","isInContent","scrollableContainer","addBack","_rowVirtualIndex","preventTrigger","_filterFocusable","siblings","colspan","_virtualCellIndex","_lastCellIndex","_updateSelctCheckbox","nextCheckbox","focus","elementToLowercase","tagName","isHorizontal","elementOffsetDir","containerOffsetDir","abs","offsetLeft","bottomDistance","firefoxCorrection","edge","dataTables","headerTables","_tableFocus","_tableBlur","_tableKeyDown","_filterFocus","_findCellIndex","startIndex","reversed","_scrollToColumn","HOME","END","currentTable","requestInProgress","canHandle","isDefaultPrevented","altKey","handled","F10","_focusToolbar","_moveUp","_moveDown","_moveRight","_moveLeft","PAGEDOWN","_handlePageDown","PAGEUP","_handlePageUp","_handleHome","_handleEnd","_handleSpaceKey","ENTER","F2","_handleEnterKey","ESC","_handleEscKey","TAB","_handleTabKey","focusable","collapseRow","_moveColumn","_prevHorizontalCell","_tabNext","_horizontalContainer","expandRow","_nextHorizontalCell","_prevVerticalCell","_verticalContainer","_nextVerticalCell","_findVisibleCell","isLeft","ctrl","rowContainer","isInLockedTable","isInBody","filterFocusable","_handleEditing","active","isInCell","blur","_toggleCurrent","descriptors","aggregates","_canDrag","link","originalIndex","cellToFocus","_currentDataIndex","lockedColumnsCount","$newFocus","hiddenCount","prevUntil","nextCell","originalRow","up","step","back","switchRow","isEdited","isIE","_initMobile","groupsContextMenu","head","mainOptions","_action","_buildStates","showOn","isEditable","isSelectable","isSortable","isRowReorderable","isGroupable","alwaysDisabled","hasSelection","isSorted","canMoveGroupPrev","canMoveGroupNext","commandOptions","_createPane","Pane","viewEngine","viewOptions","renderOnInit","wrapInSections","detachOnHide","detachOnDestroy","kendoLoader","_loaderContainer","_scrollable","asLowerString","parseVirtualSettings","_createVirtualScrollable","_scrollLeft","isScrollingLeft","originalPageSize","_endlessFetchInProgress","_skipRerenderItemsCount","_cacheEditableState","_restoreEditableState","movable","one","_averageRowHeight","scroll","_focusEditable","loadStart","loadEnd","_onVirtualPaging","_isVirtualPopupEditable","editableState","editedModel","inlineMode","incellMode","virtualColumns","_getByUid","editedField","_canFocusEditable","isElementVisibleInWrapper","widget","widgetInstance","_renderNoRecordsContent","noRecordsElement","_setContentWidth","expander","hiddenDivClass","hiddenDiv","isNaN","calculateGroupWidth","footerWrap","contentWidth","nonLockedCols","nonLockedColsWidth","initialHeight","scrollableHeight","itemsCount","_rowHeight","_sum","_measures","currentRowHeight","_requestEndHandler","_requestStart","_requestEnd","_error","relatedRow","selectableRow","childCells","originalCells","tmpResult","pagerWrap","_groupPaging","_togglePagerVisibility","_wrapFooter","_appendLockedColumnFooter","footerRow","_appendCols","menuOptions","autoSize","clearAllFilters","columnsExpanderOptions","expanded","animation","hideExpanderIndicator","hideAutoSizeColumn","owner","closeCallback","componentType","kendoColumnMenu","_columnMenu","hasMultiColumnHeaders","hasLockableColumns","hasStickableColumns","stickable","initCallback","openCallback","stickCallback","unstickCallback","filterHandler","forceUnique","checkSource","stick","unstick","filtering","_hasFilterMenu","_filterable","filterInit","filterOpen","columnFilterable","kendoFilterMultiCheck","kendoFilterMenu","_filterRow","rowheader","_updateHeader","suggestDataSource","operators","customDataSource","cellOptions","delay","inputWidth","suggestionOperator","minLength","showOperators","kendoFilterCell","_sortable","sorterInstance","kendoColumnSorter","draggableColumns","initialColumns","len","normalizeHeaderCells","_updateColumnIDs","_checkboxClick","_headerCheckboxClick","_foreignKeyBindings","_fetchForeignKeyValues","_hasBoundForeignKey","checkBox","isSelecting","_tmpl","alt","skipGroupCells","classAttribute","paramName","rowTemplateFunc","getter","rowTemplateResult","dirtyCellTemplate","_dirtyCellTemplate","columnAttributes","colSpanAttributes","charAt","_headerCellText","headerTemplate","_dirtyIndicatorTemplate","useWithBlock","fieldValue","_virtualCols","considerNext","widths","sumOfWidths","colsToRender","firstColspan","lastColspan","hiddenColumns","widthOfHiddenColumns","virtualCols","columnLeafs","columnsLocked","groupHeaderColumnTemplateLockedColumns","groupHeaderColumnTemplateNonLockedColumns","_detailTmpl","_footerTmpl","g","_groupHeaderTmpl","lockedGroupHeaderColumnTemplate","_noRecordsTmpl","scrollableNoGridHeightStyles","resultTemplate","currentCustomTemplate","templateName","rowClass","scope","fieldsMap","_emptyAggregates","headerTemplateIndex","resultHtml","groupCellBuilder","groupCellLockedContentBuilder","stickyAttributes","templateFunctionStorage","templateFunctionCount","hasFiltering","columnsWithoutFiltering","_toggleDetails","omitAnimation","detailRow","expanding","masterRow","masterRowIndex","ariaLabelText","ariaExpandText","detailCell","correctIdx","classesRegEx","sectionRowIndex","_createHeaderCells","currentTh","isGroupedBy","_appendLockedColumnContent","spanIdx","skipHiddenCount","colOffset","detach","lockedCells","_appendLockedColumnHeader","filtercellCells","hasFilterRow","filterCellOffset","leafColumnsCount","removeRowSpanValue","syncHeight","hasTHead","headerContent","_updateHeadersAttr","_prepareColumns","filterRow","existingFilterRow","hasLockedColumns","_retrieveFirstColumn","parentRow","childRow","totalColSpan","_updateHeaderCols","_autoColumns","toJSON","_setRowCachedHeight","$row","cachedHeight","_rowsHtml","cachedHeights","_groupData","skipFooter","firstColumn","footerDefaults","_groupAggregatesDefaultObject","groupItems","headerData","footerData","subgroupsCount","_groupRowHtml","groupHeaderBuilder","skipColspan","skipLastGroup","isLockedTable","groupData","firstVisibleColumnGroupHeaderTemplate","groupHeaderTemplate","currentItems","_groupsState","isNew","excludeHeader","templateColspan","groupHtmlBuilder","_skippedGroups","shift","groupToCollapse","footerCount","showFooter","relatedGroup","groupCountAfterCollapse","groupUid","groupObject","_getGroupByUid","currentGroupCount","_calculateGroupsTotal","_serverGroupsTotal","_currentRangeStart","toHide","_groupToCollapse","footersVisibility","groupsCount","groupCountAfterExpand","groupCount","toggleVisibility","_firstDataItem","grouped","headerCellIndex","_columnVisibilitySetter","_setParentsVisibility","_updateContentWidth","predicate","p","originalColumn","columnLeafIndex","_buildSkeleton","loaderHTML","columnsCount","skeleton","progress","_resize","force","_isActiveInTable","contentScrollLeft","cachedItemsToSkip","isCurrentInHeader","multiColumnHeaderIndex","partialUpdate","flatView","changedItem","_renderContent","_renderLockedContent","contentResized","resetTouchEvents","_restoreSelection","selectedRows","dataItemKey","vc","_cleanupDetailItems","endlessAppend","flatViewLength","groupRowLockedContentBuilder","groupRowBuilder","groupRowBuilderFunc","groupHeaderData","prevElement","newGroupRowElement","firstColumnGroupData","alwaysVisible","rows2","containers","containersLength","heights","offsetHeight1","offsetHeight2","row1","row2","direct","focusElement","isInputElement","isHeader","isInput","activeEl","halfHeight","includeAdditionalData","backslashEscapeQuotes","exportable","ExcelMixin","PDFMixin","_drawPDF_autoPageBreak","allPages","origBody","cont","toggleUnexportableColumns","paddingRight","startingPage","draw","_destructive","pageNumber","pageNum","drawing","drawDOM","err","renderPage","restore","visibleInExport","visibleInExportOnly","_toggledDuringExport","_drawPDF","paperSize","doc","Group","exportPage","_drawPDFShadow","avoidLinks","plugin"],"sources":["kendo.grid.js"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('kendo.data.js'), require('kendo.columnsorter.js'), require('kendo.editable.js'), require('kendo.window.js'), require('kendo.filtermenu.js'), require('kendo.filtercell.js'), require('kendo.columnmenu.js'), require('kendo.groupable.js'), require('kendo.pager.js'), require('kendo.selectable.js'), require('kendo.sortable.js'), require('kendo.reorderable.js'), require('kendo.resizable.js'), require('kendo.ooxml.js'), require('kendo.excel.js'), require('kendo.pane.js'), require('kendo.pdf.js'), require('kendo.dialog.js'), require('kendo.switch.js'), require('kendo.html.button.js'), require('kendo.textbox.js'), require('kendo.form.js'), require('kendo.toolbar.js'), require('kendo.icons.js'), require('kendo.menu.js'), require('kendo.loader.js'), require('kendo.html.loadercontainer.js')) :\n    typeof define === 'function' && define.amd ? define(['kendo.data', 'kendo.columnsorter', 'kendo.editable', 'kendo.window', 'kendo.filtermenu', 'kendo.filtercell', 'kendo.columnmenu', 'kendo.groupable', 'kendo.pager', 'kendo.selectable', 'kendo.sortable', 'kendo.reorderable', 'kendo.resizable', 'kendo.ooxml', 'kendo.excel', 'kendo.pane', 'kendo.pdf', 'kendo.dialog', 'kendo.switch', 'kendo.html.button', 'kendo.textbox', 'kendo.form', 'kendo.toolbar', 'kendo.icons', 'kendo.menu', 'kendo.loader', 'kendo.html.loadercontainer'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (global.kendogrid = global.kendogrid || {}, global.kendogrid.js = factory()));\n})(this, (function () {\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            ui = kendo.ui,\n            ContextMenu = ui.ContextMenu,\n            extend = $.extend,\n            encode = kendo.htmlEncode;\n\n        var ACTION = \"action\";\n\n        var GridContextMenu = ContextMenu.extend({\n            init: function(element, options) {\n                var that = this;\n\n                ContextMenu.fn.init.call(that, element, options);\n\n                that._overrideTemplates();\n                that._extendItems();\n\n                that.bind(\"select\", that._onSelect.bind(that));\n                that.bind(\"open\", that._onOpen.bind(that));\n            },\n\n            _overrideTemplates: function() {\n                this.templates.sprite = ({ icon, spriteCssClass }) => `${(icon || spriteCssClass) ? kendo.ui.icon({ icon: encode(icon || \"\"), iconClass: encode(spriteCssClass || \"\") }) : ''}`;\n            },\n\n            defaultItems: {\n                \"separator\": { name: \"separator\", separator: true },\n                \"create\": { name: \"create\", text: \"Add\", icon: \"plus\", command: \"AddCommand\", rules: \"isEditable\" },\n                \"edit\": { name: \"edit\", text: \"Edit\", icon: \"pencil\", command: \"EditCommand\", rules: \"isEditable\" },\n                \"destroy\": { name: \"destroy\", text: \"Delete\", icon: \"trash\", command: \"DeleteCommand\", rules: \"isEditable\" },\n                \"select\": { name: \"select\", text: \"Select\", icon: \"table-body\", rules: \"isSelectable\", items: [\n                    { name: \"selectRow\", text: \"Row\", icon: \"table-row-groups\", command: \"SelectRowCommand\" },\n                    { name: \"selectAllRows\", text: \"All rows\", icon: \"grid\", command: \"SelectAllRowsCommand\" },\n                    { name: \"clearSelection\", text: \"Clear selection\", icon: \"table-unmerge\", softRules: \"hasSelection\", command: \"ClearSelectionCommand\" },\n                ] },\n                \"copySelection\": { name: \"copySelection\", text: \"Copy selection\", icon: \"page-header-section\", rules: \"isSelectable\", softRules: \"hasSelection\", command: \"CopySelectionCommand\", options: \"withHeaders\" },\n                \"copySelectionNoHeaders\": { name: \"copySelectionNoHeaders\", text: \"Copy selection (No Headers)\", icon: \"file-txt\", rules: \"isSelectable\", softRules: \"hasSelection\", command: \"CopySelectionCommand\" },\n                \"paste\": { name: \"paste\", text: \"Paste (use CTRL/⌘ + V)\", rules: \"allowPaste\", softRules: \"alwaysDisabled\", icon: \"clipboard\" },\n                \"reorderRow\": { name: \"reorderRow\", text: \"Reorder row\", icon: \"caret-alt-expand\", rules: \"isRowReorderable\", softRules: \"isSorted\", items: [\n                    { name: \"reorderRowUp\", text: \"Up\", icon: \"caret-alt-up\", command: \"ReorderRowCommand\", options: \"dir:up\" },\n                    { name: \"reorderRowDown\", text: \"Down\", icon: \"caret-alt-down\", command: \"ReorderRowCommand\", options: \"dir:down\" },\n                    { name: \"reorderRowTop\", text: \"Top\", icon: \"caret-alt-to-top\", command: \"ReorderRowCommand\", options: \"dir:top\" },\n                    { name: \"reorderRowBottom\", text: \"Bottom\", icon: \"caret-alt-to-bottom\", command: \"ReorderRowCommand\", options: \"dir:bottom\" }\n                ] },\n                \"exportPDF\": { name: \"exportPDF\", text: \"Export to PDF\", icon: \"file-pdf\", command: \"ExportPDFCommand\" },\n                \"exportExcel\": { name: \"exportExcel\", text: \"Export to Excel\", icon: \"file-excel\", items: [\n                    { name: \"exportToExcelAll\", text: \"All\", command: \"ExportExcelCommand\" },\n                    { name: \"exportToExcelSelection\", text: \"Selection\", command: \"ExportExcelCommand\", softRules: \"hasSelection\", options: \"selection,withHeaders\" },\n                    { name: \"exportToExcelSelectionNoHeaders\", text: \"Selection (No Headers)\", softRules: \"hasSelection\", command: \"ExportExcelCommand\", options: \"selection\" }\n                ] },\n                \"sortAsc\": { name: \"sortAsc\", text: \"Sort Ascending\", icon: \"sort-asc-small\", rules: \"isSortable\", command: \"SortCommand\", options: \"dir:asc\" },\n                \"sortDesc\": { name: \"sortDesc\", text: \"Sort Descending\", icon: \"sort-desc-small\", rules: \"isSortable\", command: \"SortCommand\", options: \"dir:desc\" },\n                \"moveGroupPrevious\": { name: \"moveGroupPrevious\", text: \"Move previous\", icon: \"arrow-left\", rules: \"isGroupable\", softRules: \"canMoveGroupPrev\", command: \"MoveGroupCommand\", options: \"dir:prev\" },\n                \"moveGroupNext\": { name: \"moveGroupNext\", text: \"Move next\", icon: \"arrow-right\", rules: \"isGroupable\", softRules: \"canMoveGroupNext\", command: \"MoveGroupCommand\", options: \"dir:next\" }\n                // \"filter\": { name: \"filter\", text: \"Filter\", icon: \"filter\", attr: { [kendo.attr(\"is-filter\")]: true }, items: [\n                //     { content: '<div class=\"k-columnmenu-item-wrapper\"><div class=\"k-columnmenu-item-content k-column-menu-filter\"><div class=\"k-filterable\"></div></div></div>' }\n                // ] },\n            },\n\n            events: ContextMenu.fn.events.concat([\n                ACTION\n            ]),\n\n            _onSelect: function(ev) {\n                var command = $(ev.item).data(\"command\");\n                var options = $(ev.item).data(\"options\");\n                    options = options ? options.split(\",\")\n                    .map(val => {\n                        if (val.indexOf(\":\") > -1) {\n                            var [key, val] = val.split(\":\");\n                            return { [key || \"_\"]: val };\n                        }\n\n                        return { [val]: true };\n                    })\n                    .reduce((acc, v) => Object.assign(acc, v), {}) : {};\n\n                var target = $(ev.target);\n\n                if (!command) {\n                    return;\n                }\n\n                this.action({\n                    command: command,\n                    options: Object.assign(options, { target: target })\n                });\n            },\n\n            _onOpen: function(ev) {\n                var menu = ev.sender,\n                    items = menu.options.items,\n                    elTarget = $(ev.event ? ev.event.target : null);\n\n                if ((!items && $.isEmptyObject(this.defaultItems)) || elTarget.closest(\".k-grid-column-menu\").length) {\n                    ev.preventDefault();\n                    return;\n                }\n\n                this._toggleSeparatorVisibility();\n\n                menu.element.find(`[${kendo.attr('soft-rules')}]`).each((i, item) => {\n                    var rules = $(item).attr(kendo.attr('soft-rules')).split(\";\");\n                    menu.enable(item, this._validateSoftRules(rules, elTarget));\n                });\n            },\n\n            _toggleSeparatorVisibility: function() {\n                var that = this,\n                    items = that.element.find(\".k-item.k-separator\").filter((i, item) => {\n                        var prev = $(item).prev(\".k-item:not(.k-separator)\");\n                        var next = $(item).next(\".k-item:not(.k-separator)\");\n\n                        return !(prev.length && next.length);\n                    });\n\n                items.hide();\n            },\n\n            _extendItems: function() {\n                var that = this,\n                    items = that.options.items,\n                    item, isBuiltInTool;\n\n                if (items && items.length) {\n                    for (var i = 0; i < items.length; i++) {\n                        item = items[i];\n                        isBuiltInTool = $.isPlainObject(item) && Object.keys(item).length === 1 && item.name;\n\n                        if (isBuiltInTool) {\n                            item = item.name;\n                        }\n\n                        if ($.isPlainObject(item)) {\n                            that._append(item);\n                        } else if (that.defaultItems[item]) {\n                            item = that.defaultItems[item];\n                            that._append(item);\n                        } else if (typeof(item) === \"string\") {\n                            item = { name: item, text: item, spriteCssClass: item, command: item + \"Command\" };\n                            that._append(item);\n                        }\n                    }\n                } else {\n                    for (var key in that.defaultItems) {\n                        item = that.defaultItems[key];\n                        that._append(item);\n                    }\n                }\n            },\n\n            _extendItem: function(item) {\n                var that = this,\n                    messages = that.options.messages,\n                    attr = item.attr || {};\n\n                if (item.command) {\n                    attr[kendo.attr(\"command\")] = item.command;\n                }\n\n                if (item.options) {\n                    attr[kendo.attr(\"options\")] = item.options;\n                }\n\n                if (item.softRules) {\n                    attr[kendo.attr(\"soft-rules\")] = item.softRules;\n                }\n\n                if (item.items) {\n                    for (var j = 0; j < item.items.length; j++) {\n                        item.items.forEach(subItem => {\n                            that._extendItem(subItem);\n                        });\n                    }\n                }\n\n                extend(item, {\n                    text: messages.commands[item.name],\n                    icon: item.icon || \"\",\n                    spriteCssClass: item.spriteCssClass || \"\",\n                    attr: attr,\n                    uid: kendo.guid()\n                });\n            },\n\n            _validateSoftRules: function(rules, target) {\n                var that = this;\n\n                if (!rules || !(rules && rules.length)) {\n                    return true;\n                }\n\n                for (var i = 0; i < rules.length; i++) {\n                    if (!this._readState(rules[i], target)) {\n                        return false;\n                    }\n                }\n\n                return true;\n            },\n\n            _validateRules: function(tool) {\n                var that = this,\n                    rules = tool.rules ? tool.rules.split(\";\") : [];\n\n                if (!rules.length) {\n                    return true;\n                }\n\n                for (var i = 0; i < rules.length; i++) {\n                    if (!this._readState(rules[i])) {\n                        return false;\n                    }\n                }\n\n                return true;\n            },\n\n            _readState: function(state, target) {\n                var that = this,\n                    states = that.options.states;\n\n                if (kendo.isFunction(states[state])) {\n                    return states[state](target);\n                } else {\n                    return states[state];\n                }\n            },\n\n            _append: function(item) {\n                var that = this;\n\n                that._extendItem(item);\n\n                if (that._validateRules(item)) {\n                    that.append(item);\n                }\n            },\n\n            action: function(args) {\n                this.trigger(ACTION, args);\n            }\n        });\n\n        kendo.ui.grid = kendo.ui.grid || {};\n\n        extend(kendo.ui.grid, {\n            ContextMenu: GridContextMenu\n        });\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            extend = $.extend,\n            Class = kendo.Class;\n\n        var Command = Class.extend({\n            init: function(options) {\n                this.options = options;\n                this.grid = options.grid;\n            }\n        });\n\n        var MoveGroupCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    groupable = grid.groupable,\n                    options = that.options,\n                    target = options.target.closest(\".k-chip\"),\n                    method = options.dir === \"next\" ? \"after\" : \"before\",\n                    position = options.dir === \"next\" ? target.next() : target.prev();\n\n                position[method](target);\n                groupable._change();\n            },\n        });\n\n        var SortCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    dataSource = grid.dataSource,\n                    sort = dataSource.sort() || [],\n                    options = that.options,\n                    dir = options.dir,\n                    field = grid._getCellField(options.target),\n                    multipleMode = grid.options.sortable.mode && grid.options.sortable.mode === \"multiple\",\n                    compare = grid.options.compare,\n                    length, idx;\n\n                if (multipleMode) {\n                    for (idx = 0, length = sort.length; idx < length; idx++) {\n                        if (sort[idx].field === field) {\n                            sort.splice(idx, 1);\n                            break;\n                        }\n                    }\n                    sort.push({ field: field, dir: dir, compare: compare });\n                } else {\n                    sort = [{ field: field, dir: dir, compare: compare }];\n                }\n\n                dataSource.sort(sort);\n            },\n        });\n\n        var AddCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid;\n\n                grid.addRow();\n            }\n        });\n\n        var EditCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    inCellMode = grid._editMode() === \"incell\",\n                    target = inCellMode ? that.options.target : that.options.target.closest(\"tr\");\n\n                if (inCellMode) {\n                    grid.editCell(target);\n                } else {\n                    grid.editRow(target);\n                }\n            }\n        });\n\n        var DeleteCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    target = that.options.target.closest(\"tr\");\n\n                grid.removeRow(target);\n            }\n        });\n\n        var CopySelectionCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    withHeaders = that.options.withHeaders;\n\n                grid.copySelectionToClipboard(withHeaders);\n            }\n        });\n\n        var SelectRowCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    selectMode = kendo.ui.Selectable.parseOptions(grid.options.selectable),\n                    target = that.options.target.closest(\"tr\");\n\n                grid.select(selectMode.cell ? target.find('td') : target);\n            }\n        });\n\n        var SelectAllRowsCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    selectMode = kendo.ui.Selectable.parseOptions(grid.options.selectable),\n                    rows = grid.items();\n\n                grid.select(selectMode.cell ? rows.find('td') : rows);\n            }\n        });\n\n        var ClearSelectionCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid;\n\n                grid.clearSelection();\n            }\n        });\n\n        var ReorderRowCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    dir = that.options.dir,\n                    target = that.options.target.closest(\"tr\"),\n                    index = target.index(),\n                    newIndex;\n\n                switch (dir) {\n                    case \"up\":\n                        newIndex = index - 1;\n                        break;\n                    case \"down\":\n                        newIndex = index + 2;\n                        break;\n                    case \"top\":\n                        newIndex = 0;\n                        break;\n                    case \"bottom\":\n                        newIndex = grid.items().length;\n                        break;\n                }\n\n                grid.reorderRowTo(target, newIndex);\n            }\n        });\n\n        var ExportPDFCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid;\n\n                grid.saveAsPDF();\n            }\n        });\n\n        var ExportExcelCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    selection = that.options.selection,\n                    withHeaders = that.options.withHeaders,\n                    grid = that.grid;\n\n                if (selection) {\n                    grid.exportSelectedToExcel(withHeaders);\n                } else {\n                    grid.saveAsExcel();\n                }\n            }\n        });\n\n        kendo.ui.grid = kendo.ui.grid || {};\n\n        extend(kendo.ui.grid, {\n            GridCommand: Command,\n            commands: {\n                SortCommand: SortCommand,\n                AddCommand: AddCommand,\n                EditCommand: EditCommand,\n                DeleteCommand: DeleteCommand,\n                CopySelectionCommand: CopySelectionCommand,\n                SelectRowCommand: SelectRowCommand,\n                SelectAllRowsCommand: SelectAllRowsCommand,\n                ClearSelectionCommand: ClearSelectionCommand,\n                ReorderRowCommand: ReorderRowCommand,\n                ExportPDFCommand: ExportPDFCommand,\n                ExportExcelCommand: ExportExcelCommand,\n                MoveGroupCommand: MoveGroupCommand\n            }\n        });\n    })(window.kendo.jQuery);\n\n    let $ = kendo.jQuery;\n\n    function useLoaderContainer(toggle, options) {\n        var that = this,\n            wrapper = that.wrapper;\n\n        if (toggle && that.loader) {\n            if (!that.wrapper.find(\".k-loader-container\").length) {\n\n                var defaultOptions = {\n                    message: \"Loading...\",\n                    overlayColor: \"dark\",\n                    themeColor: \"primary\",\n                };\n                defaultOptions = $.extend({}, defaultOptions, options);\n\n                const loaderOverlay = kendo.html.renderLoaderContainer($(\"<div></div>\"), defaultOptions);\n                const wrapperWidth = that.wrapper.width();\n\n                const mask = $(\"<div class='k-loading-pdf-mask'></div>\");\n                const wrapperClone = that.wrapper.clone().removeAttr(\"id\").addClass('k-loading-pdf-progress').width(wrapperWidth);\n                mask.append(wrapperClone);\n                mask.append(loaderOverlay);\n                that.mask = mask;\n\n                wrapper.append(mask);\n\n                that.wrapperClone = mask.find(\".k-pivotgrid\");\n                that.loaderOverlay = mask.find(\".k-loader-container\");\n\n                that.loader.element.insertBefore(mask.find(\".k-loader-container-label\"));\n            }\n        } else {\n            if (that.loaderOverlay.length) {\n                kendo.destroy(that.loaderOverlay);\n                that.mask.remove();\n            }\n        }\n    }\n\n    let __meta__ = {\n        id: \"grid\",\n        name: \"Grid\",\n        category: \"web\",\n        description: \"The Grid widget displays tabular data and offers rich support for interacting with data,including paging, sorting, grouping, and selection.\",\n        depends: [ \"data\", \"columnsorter\", \"sortable\", \"toolbar\", \"html.button\", \"icons\", \"menu\", \"loader\", \"html.loadercontainer\" ],\n        features: [ {\n            id: \"grid-editing\",\n            name: \"Editing\",\n            description: \"Support for record editing\",\n            depends: [ \"editable\", \"window\", \"textbox\", \"form\" ]\n        }, {\n            id: \"grid-filtering\",\n            name: \"Filtering\",\n            description: \"Support for record filtering\",\n            depends: [ \"filtermenu\" ]\n        }, {\n            id: \"grid-columnmenu\",\n            name: \"Column menu\",\n            description: \"Support for header column menu\",\n            depends: [ \"columnmenu\" ]\n        }, {\n            id: \"grid-grouping\",\n            name: \"Grouping\",\n            description: \"Support for grid grouping\",\n            depends: [ \"groupable\" ]\n        }, {\n            id: \"grid-filtercell\",\n            name: \"Row filter\",\n            description: \"Support for grid header filtering\",\n            depends: [ \"filtercell\" ]\n        }, {\n            id: \"grid-paging\",\n            name: \"Paging\",\n            description: \"Support for grid paging\",\n            depends: [ \"pager\" ]\n        }, {\n            id: \"grid-selection\",\n            name: \"Selection\",\n            description: \"Support for row selection\",\n            depends: [ \"selectable\" ]\n        }, {\n            id: \"grid-column-reorder\",\n            name: \"Column reordering\",\n            description: \"Support for column reordering\",\n            depends: [ \"reorderable\" ]\n        }, {\n            id: \"grid-column-resize\",\n            name: \"Column resizing\",\n            description: \"Support for column resizing\",\n            depends: [ \"resizable\" ]\n        }, {\n            id: \"grid-mobile\",\n            name: \"Grid adaptive rendering\",\n            description: \"Support for adaptive rendering\",\n            depends: [ \"dialog\", \"pane\", \"switch\" ]\n        }, {\n            id: \"grid-excel-export\",\n            name: \"Excel export\",\n            description: \"Export grid data as Excel spreadsheet\",\n            depends: [ \"excel\" ]\n        }, {\n            id: \"grid-pdf-export\",\n            name: \"PDF export\",\n            description: \"Export grid data as PDF\",\n            depends: [ \"pdf\", \"drawing\" ]\n        } ]\n    };\n\n    (function($, undefined$1) {\n        let kendo = window.kendo,\n            ui = kendo.ui,\n            DataSource = kendo.data.DataSource,\n            ObservableObject = kendo.data.ObservableObject,\n            tbodySupportsInnerHtml = kendo.support.tbodyInnerHtml,\n            activeElement = kendo._activeElement,\n            Widget = ui.Widget,\n            outerWidth = kendo._outerWidth,\n            outerHeight = kendo._outerHeight,\n            keys = kendo.keys,\n            getType = kendo.type,\n\n            isPlainObject = $.isPlainObject,\n            extend = $.extend,\n            map = $.map,\n            grep = $.grep,\n            isArray = Array.isArray,\n            inArray = $.inArray,\n            push = Array.prototype.push,\n            isFunction = kendo.isFunction,\n            encode = kendo.htmlEncode,\n            isEmptyObject = $.isEmptyObject,\n            contains = $.contains,\n            math = Math,\n\n            DOT = \".\",\n            PROGRESS = \"progress\",\n            ERROR = \"error\",\n            HIERARCHY_CELL_CLASS = \"k-hierarchy-cell\",\n            DATA_CELL = \":not(.k-group-cell):not([\" + kendo.attr(\"virtual\") + \"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-caret-alt-down,.k-icon.k-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-down,.k-svg-icon.k-svg-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-left,.k-icon.k-i-caret-alt-left))):visible\",\n            DATA_CELL_HIDDENINCLUDED = \":not([\" + kendo.attr(\"virtual\") + \"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-caret-alt-down,.k-icon.k-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-down,.k-svg-icon.k-svg-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-left,.k-icon.k-i-caret-alt-left)))\",\n            SELECTION_CELL_SELECTOR = \"tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer):not([data-skeleton-row]) > td:not(.k-group-cell):not(.k-hierarchy-cell)\",\n            NAVROW = \"tr:not(.k-footer-template):visible\",\n            NAVCELL = \":not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible\",\n            ITEMROW = \"tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible\",\n            COLGROUP = \"col:not(.k-group-col, .k-hierarchy-col)\",\n            HEADERCELLS = \"th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)\",\n            CARET_ALT_DOWN = \"a[class*='-i-caret-alt-down']\",\n            CARET_ALT_RIGHT = \"a[class*='-i-caret-alt-right']\",\n            CARET_ALT_RIGHT_CACHE = CARET_ALT_RIGHT,\n            CARET_ALT_LEFT = \"a[class*='-i-caret-alt-left']\",\n            WRAPPER = \".k-grid\",\n            NS = \".kendoGrid\",\n            CONTENTRLOCKEDCONTAINER = \"k-grid-content-locked\",\n            GROUPCELLCLASS = \"k-group-cell\",\n            INPUT_SELECTORS = \":button,a,:input,a>.k-icon,a>.k-svg-icon,textarea,span.k-select,span.k-icon,span.k-svg-icon,span.k-svg-icon>svg,span.k-svg-icon>svg>path,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdownlist,.k-switch-thumb,.k-switch-track,.k-switch-label-off,.k-switch-label-on\",\n\n            EDIT = \"edit\",\n            BEFOREEDIT = \"beforeEdit\",\n            SAVE = \"save\",\n            REMOVE = \"remove\",\n            DETAILINIT = \"detailInit\",\n            FILTERMENUINIT = \"filterMenuInit\",\n            COLUMNMENUINIT = \"columnMenuInit\",\n            FILTERMENUOPEN = \"filterMenuOpen\",\n            COLUMNMENUOPEN = \"columnMenuOpen\",\n            CELLCLOSE = \"cellClose\",\n            CHANGING = \"changing\",\n            CHANGE = \"change\",\n            COLUMNHIDE = \"columnHide\",\n            COLUMNSHOW = \"columnShow\",\n            SAVECHANGES = \"saveChanges\",\n            DATABOUND = \"dataBound\",\n            DETAILEXPAND = \"detailExpand\",\n            DETAILCOLLAPSE = \"detailCollapse\",\n            ITEM_CHANGE = \"itemchange\",\n            PAGE = \"page\",\n            PAGING = \"paging\",\n            PASTE = \"paste\",\n            SCROLL = \"scroll\",\n            SYNC = \"sync\",\n            LOAD_START = \"loadStart\",\n            LOAD_END = \"loadEnd\",\n            REQUESTEND = \"requestEnd\",\n\n            FOCUSED = \"k-focus\",\n            HOVER = \"k-hover\",\n            ACTIVE = \"k-active\",\n            FOCUSABLE = \":kendoFocusable\",\n            SELECTED = \"k-selected\",\n            CHECKBOX = \"k-checkbox\",\n            CHECKBOXINPUT = \"input[data-role='checkbox'].k-select-checkbox.\" + CHECKBOX,\n            NORECORDSCLASS = \"k-grid-norecords\",\n            LINK_CLASS = \"k-link\",\n            ICON_CLASS = \"k-icon\",\n            SVG_ICON_CLASS = \"k-svg-icon\",\n            ORDER_CLASS = \"k-sort-order\",\n            SORTED_CLASS = \"k-sorted\",\n            HEADER_CLASS = \"k-header\",\n            HEADER_COLUMN_MENU_CLASS = \"k-grid-column-menu\",\n            FILTER_MENU_CLASS = \"k-grid-filter-menu\",\n            STICKY_CELL_CLASS = \"k-grid-content-sticky\",\n            STICKY_HEADER_CLASS = \"k-grid-header-sticky\",\n            STICKY_FOOTER_CLASS = \"k-grid-footer-sticky\",\n            STICKY_HEADER_NO_BORDER_CLASS = \"k-grid-no-left-border\",\n            ROW_RESIZER = \"k-row-resizer\",\n            ROW_RESIZER_WRAP = \"k-resizer-wrap\",\n            GROUPING_ROW = \"k-grouping-row\",\n            RESIZE = \"resize\",\n            ROWRESIZE = \"rowResize\",\n            COLUMNRESIZE = \"columnResize\",\n            COLUMNREORDER = \"columnReorder\",\n            COLUMNLOCK = \"columnLock\",\n            COLUMNUNLOCK = \"columnUnlock\",\n            COLUMNSTICK = \"columnStick\",\n            COLUMNUNSTICK = \"columnUnstick\",\n            ROWREORDER = \"rowReorder\",\n            NAVIGATE = \"navigate\",\n            CLICK = \"click\",\n            MOUSEDOWN = \"mousedown\",\n            MOUSEUP = \"mouseup\",\n            MOUSEENTER = \"mouseenter\",\n            MOUSELEAVE = \"mouseleave\",\n            MOUSEMOVE = \"mousemove\",\n            DUBLECLICK = \"dblclick\",\n            HEIGHT = \"height\",\n            WIDTH = \"width\",\n            AUTO = \"auto\",\n            TABINDEX = \"tabIndex\",\n            FUNCTION = \"function\",\n            STRING = \"string\",\n            NUMBER = \"number\",\n            BOTTOM = \"bottom\",\n            CONTAINER_FOR = \"container-for\",\n            FIELD = \"field\",\n            INPUT = \"input\",\n            INCELL = \"incell\",\n            INLINE = \"inline\",\n            UNIQUE_ID = \"uid\",\n            MINCOLSPANVALUE = 1,\n            COLSPAN = \"colSpan\",\n            OVERFLOW = \"overflow\",\n            HIDDEN = \"hidden\",\n            SORT = \"sort\",\n            GROUP_SORT = \"group-sort\",\n            DELETECONFIRM = \"Are you sure you want to delete this record?\",\n            NORECORDS = \"No records available.\",\n            CONFIRMDELETE = \"Delete\",\n            CANCELDELETE = \"Cancel\",\n            COLLAPSE = \"Collapse\",\n            EXPAND = \"Expand\",\n            ID = \"id\",\n            PX = \"px\",\n            TR = \"tr\",\n            TD = \"td\",\n            DIV = \"div\",\n\n            ARIA_LABEL = \"aria-label\",\n            ARIA_OWNS = \"aria-owns\",\n            ARIA_ROWCOUNT = \"aria-rowcount\",\n            ARIA_COLCOUNT = \"aria-colcount\",\n            ARIA_CONTROLS = \"aria-controls\",\n            ARIA_COLINDEX = \"aria-colindex\",\n            ARIA_ROWINDEX = \"aria-rowindex\",\n            ARIA_EXPANDED = \"aria-expanded\",\n            ARIA_CHECKED = \"aria-checked\",\n            ARIA_ACTIVEDESCENDANT = \"aria-activedescendant\",\n            ROLE = \"role\",\n            NONE = \"none\",\n            ROW = \"row\",\n            ROWGROUP = \"rowgroup\",\n            COLUMNHEADER = \"columnheader\",\n            GRIDCELL = \"gridcell\",\n\n            formatRegExp = /(\\}|\\#)/ig,\n            templateHashRegExp = /#/ig,\n            whitespaceRegExp = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n            leftRegExp = new RegExp(\"(\\\\s*left\\\\s*:\\\\s*\\\\d*px;?)*\", \"ig\"),\n            rightRegExp = new RegExp(\"(\\\\s*right\\\\s*:\\\\s*\\\\d*px;?)*\", \"ig\"),\n            nonDataCellsRegExp = new RegExp(\"(^|\" + whitespaceRegExp + \")\" + \"(k-group-cell|k-hierarchy-cell)\" + \"(\" + whitespaceRegExp + \"|$)\"),\n            filterRowRegExp = new RegExp(\"(^|\" + whitespaceRegExp + \")\" + \"(k-filter-row)\" + \"(\" + whitespaceRegExp + \"|$)\"),\n            COMMANDBUTTONTMPL = ({ className, attr, text }) => `<button type=\"button\" class=\"${className}\" ${attr}>${kendo.htmlEncode(text)}</button>`,\n            DEFAULTSELECTCOLUMNTMPL = (size, ariaLabel) => `<span class=\"k-checkbox-wrap\"><input tabindex=\"-1\" class=\"k-select-checkbox ${CHECKBOX} ${size} k-rounded-md\" data-role=\"checkbox\" aria-label=\"${ariaLabel}\" aria-checked=\"false\" type=\"checkbox\"></span>`,\n            SELECTCOLUMNTMPL = ({ size }) => DEFAULTSELECTCOLUMNTMPL(size, \"Select row\"),\n            SELECTCOLUMNHEADERTMPL = ({ size }) => DEFAULTSELECTCOLUMNTMPL(size, \"Select all rows\"),\n            DRAGHANDLECOLUMNTMPL = () => kendo.ui.icon(\"reorder\"),\n            DEFAULTHEADERTEMPLATE = ({ text }) => `<span class=\"k-cell-inner\"><span class=\"k-link\"><span class=\"k-column-title\">${text}</span></span></span>`,\n            isRtl = false,\n            browser = kendo.support.browser;\n\n        var isIE11 = browser.msie && browser.version === 11;\n        var isMac = /Mac OS/.test(navigator.userAgent);\n        var classNames = {\n            content: \"k-content\",\n            scrollContainer: \"k-scroll-container\",\n            headerCellInner: \"k-cell-inner\"\n        };\n        var GroupsPager;\n\n        var defaultBodyContextMenu = [\n            \"copySelection\",\n            \"copySelectionNoHeaders\",\n            \"paste\",\n            \"separator\",\n            \"create\",\n            \"edit\",\n            \"destroy\",\n            \"select\",\n            \"separator\",\n            \"reorderRow\",\n            \"exportPDF\",\n            \"exportExcel\",\n            \"separator\"\n        ];\n\n        var defaultHeadContextMenu = [\n            \"sortAsc\",\n            \"sortDesc\",\n            \"separator\"\n        ];\n\n        var defaultGroupsContextMenu = [\n            \"moveGroupPrevious\",\n            \"moveGroupNext\",\n            \"separator\"\n        ];\n\n        if (ui.Pager) {\n            GroupsPager = ui.Pager.extend({\n                init: function(element, options) {\n                    ui.Pager.fn.init.call(this, element, extend(true, {}, options));\n                    this.dataSource.options.useRanges = true;\n                    this.dataSource._omitPrefetch = true;\n                },\n                options: {\n                    name: \"GroupsPager\"\n                },\n\n                totalPages: function() {\n                    var that = this;\n\n                    return Math.ceil((that._collapsedTotal() || 0) / (that.pageSize() || 1));\n                },\n                _collapsedTotal: function() {\n                    var dataSource = this.dataSource;\n                    return dataSource ? (dataSource.groupsTotal(true) || 0) : 0;\n                }\n            });\n        }\n\n        var VirtualScrollable = Widget.extend({\n            init: function(element, options) {\n                var that = this;\n\n                Widget.fn.init.call(that, element, options);\n                that._refreshHandler = that.refresh.bind(that);\n                that.setDataSource(options.dataSource);\n                that.wrap();\n            },\n\n            setDataSource: function(dataSource) {\n                var that = this;\n                if (that.dataSource) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler);\n                }\n                that.dataSource = dataSource;\n                that.dataSource.bind(CHANGE, that._refreshHandler);\n                that.dataSource.options.useRanges = true;\n                that.dataSource.options.virtual = true;\n            },\n\n            options: {\n                name: \"VirtualScrollable\",\n                itemHeight: $.noop,\n                prefetch: true,\n                maxScrollHeight: 250000\n            },\n\n            events: [\n                PAGING,\n                PAGE,\n                SCROLL,\n                LOAD_START,\n                LOAD_END\n            ],\n\n            destroy: function() {\n                var that = this;\n\n                Widget.fn.destroy.call(that);\n\n                that.dataSource.unbind(CHANGE, that._refreshHandler);\n                that.wrapper.add(that.verticalScrollbar).off(NS);\n\n                clearTimeout(that._timeout);\n                if (that._scrollingTimeout) {\n                    clearTimeout(that._scrollingTimeout);\n                }\n\n                if (that.drag) {\n                    that.drag.destroy();\n                    that.drag = null;\n                }\n                that.wrapper = that.element = that.verticalScrollbar = null;\n                that._refreshHandler = null;\n            },\n\n            wrap: function() {\n                var that = this,\n                    // workaround for IE issue where scroll is not raised if container is same width as the scrollbar\n                    scrollbar = kendo.support.scrollbar() + 1,\n                    element = that.element,\n                    wrapper;\n\n                element.css( {\n                    width: AUTO,\n                    overflow: \"hidden\"\n                }).css((isRtl ? \"padding-left\" : \"padding-right\"), scrollbar);\n                that.content = element.children().first();\n                wrapper = that.wrapper = that.content.wrap('<div class=\"k-virtual-scrollable-wrap\"/>')\n                                    .parent()\n                                    .on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n                that._wrapper();\n\n                if (kendo.support.kineticScrollNeeded || kendo.support.touch) {\n                    that.wrapper.css(\"touch-action\", NONE);\n                    that.drag = new kendo.UserEvents(that.wrapper, {\n                        global: true,\n                        allowSelection: true,\n                        start: function(e) {\n                            e.sender.capture();\n                        },\n                        move: function(e) {\n                            that.verticalScrollbar.scrollTop(that.verticalScrollbar.scrollTop() - e.y.delta);\n                            kendo.scrollLeft(wrapper, kendo.scrollLeft(wrapper) - e.x.delta);\n                            e.preventDefault();\n                        }\n                    });\n                }\n\n                that.verticalScrollbar = $('<div class=\"k-scrollbar k-scrollbar-vertical\" />')\n                                            .css({\n                                                width: scrollbar\n                                            }).appendTo(element)\n                                            .on(\"scroll\" + NS, that._scroll.bind(that));\n            },\n\n            _wrapper: function() {\n                var that = this;\n\n                if (isIE11) {\n                    //scrolling the virtual scrollbar to the bottom and then\n                    //scrolling the horizontal content scrollbar does not fire the \"scroll\" event\n                    //seems like a problem in IE 11 only (after version 11.0.9600.18860)\n                    //https://github.com/telerik/kendo-ui-core/issues/3779\n                    that.wrapper.css({\n                        \"overflow-y\": SCROLL\n                    });\n\n                    //hide the wrapper behind the virtual scrollbar\n                    that.element.css((isRtl ? \"padding-left\" : \"padding-right\"), 0);\n                }\n            },\n\n            _wheelScroll: function(e) {\n                if (e.ctrlKey) {\n                    return;\n                }\n\n                var scrollbar = this.verticalScrollbar,\n                    scrollTop = scrollbar.scrollTop(),\n                    delta = kendo.wheelDeltaY(e);\n\n                if (delta && !(delta > 0 && scrollTop === 0) && !(delta < 0 && scrollTop + scrollbar[0].clientHeight == scrollbar[0].scrollHeight)) {\n                    e.preventDefault();\n                    this.verticalScrollbar.scrollTop(scrollTop + (-delta));\n                }\n            },\n\n            _scroll: function(e) {\n                var that = this,\n                    delayLoading = !that.options.prefetch,\n                    scrollTop = e.currentTarget.scrollTop,\n                    dataSource = that.dataSource,\n                    rowHeight = that.itemHeight,\n                    skip = dataSource.skip() || 0,\n                    start = that._rangeStart || skip,\n                    height = that.element.innerHeight(),\n                    isScrollingUp = !!(that._scrollbarTop && that._scrollbarTop > scrollTop),\n                    firstItemIndex = math.max(math.floor(scrollTop / rowHeight), 0),\n                    lastItemOffset = isScrollingUp ? math.ceil(height / rowHeight) : math.floor(height / rowHeight),\n                    lastItemIndex = math.max(firstItemIndex + lastItemOffset, 0);\n\n                if (that._preventScroll) {\n                    that._preventScroll = false;\n                    return;\n                }\n                that._prevScrollTop = that._scrollTop;\n                that._scrollTop = scrollTop - (start * rowHeight);\n                that._scrollbarTop = scrollTop;\n\n                that._scrolling = delayLoading;\n\n                if (!that._fetch(firstItemIndex, lastItemIndex, isScrollingUp)) {\n                    that.wrapper[0].scrollTop = that._scrollTop;\n                }\n\n                that.trigger(SCROLL);\n\n                if (delayLoading) {\n                    if (that._scrollingTimeout) {\n                        clearTimeout(that._scrollingTimeout);\n                    }\n\n                    that._scrollingTimeout = setTimeout(function() {\n                        that._scrolling = false;\n                        that._page(that._rangeStart, that.dataSource.take());\n                    }, 100);\n                }\n            },\n\n            scrollToTop: function() {\n                this._scrollTo(0);\n            },\n\n            scrollToBottom: function() {\n                var scrollbar = this.verticalScrollbar;\n                this._scrollTo(scrollbar[0].scrollHeight - scrollbar.height());\n            },\n\n            _scrollWrapperToTop: function() {\n                this.wrapper.scrollTop(0);\n            },\n\n            _scrollWrapperToBottom: function() {\n                this.wrapper.scrollTop(this.wrapper[0].scrollHeight);\n            },\n\n            _scrollWrapperOnColumnResize: function() {\n                var that = this;\n                var wrapper = this.wrapper;\n                var initialScrollTop = wrapper.scrollTop();\n\n                if (wrapper[0].scrollWidth > wrapper[0].clientWidth) {\n                    if ((!that._wrapperScrolled && initialScrollTop) || that._isScrolledToBottom()) {\n                        wrapper.scrollTop(initialScrollTop + kendo.support.scrollbar());\n                        that._scrollTop = wrapper.scrollTop();\n                        that._wrapperScrolled = true;\n                    }\n                } else if (that._wrapperScrolled) {\n                    if (!that._isWrapperScrolledToBottom()) {\n                        wrapper.scrollTop(initialScrollTop - kendo.support.scrollbar());\n                        that._scrollTop = wrapper.scrollTop();\n                    }\n\n                    that._wrapperScrolled = false;\n                }\n            },\n\n            _scrollTo: function(scrollTop) {\n                var that = this;\n                var scrollbar = that.verticalScrollbar;\n\n                if (scrollbar.scrollTop() !== scrollTop) {\n                    that._preventScroll = true;\n                }\n\n                that.wrapper.scrollTop(scrollTop);\n                that._scrollTop = that.wrapper.scrollTop();\n\n                scrollbar.scrollTop(scrollTop);\n                that._scrollbarTop = scrollbar.scrollTop();\n            },\n\n            _isScrolledToTop: function() {\n                return this.verticalScrollbar.scrollTop() === 0;\n            },\n\n            _isScrolledToBottom: function() {\n                var scrollbar = this.verticalScrollbar;\n                var scrollTop = scrollbar.scrollTop();\n\n                return (scrollTop > 0 && scrollTop >= parseInt(scrollbar[0].scrollHeight - scrollbar.height(), 10));\n            },\n\n            _isWrapperScrolledToBottom: function() {\n                var wrapper = this.wrapper;\n\n                return (wrapper.scrollTop() >= parseInt(wrapper[0].scrollHeight - wrapper.height(), 10));\n            },\n\n            itemIndex: function(rowIndex) {\n                var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n\n                return rangeStart + rowIndex;\n            },\n\n            position: function(index) {\n                var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n                var pageSize = this.dataSource.pageSize();\n                var result;\n\n                if (index > rangeStart) {\n                    result = index - rangeStart;\n                } else {\n                    result = rangeStart - index - 1;\n                }\n\n                return result > pageSize ? pageSize : result;\n            },\n\n            scrollIntoView: function(row) {\n                var container = this.wrapper[0];\n                var containerHeight = container.clientHeight;\n                var containerScroll = !this._isScrolledToBottom() ? (this._scrollTop || container.scrollTop) : container.scrollTop;\n                var elementOffset = row[0].offsetTop;\n                var elementHeight = row[0].offsetHeight;\n\n                if (containerScroll > elementOffset) {\n                    this.verticalScrollbar[0].scrollTop -= containerHeight / 2;\n                } else if (elementOffset + elementHeight >= containerScroll + containerHeight) {\n                    this.verticalScrollbar[0].scrollTop += containerHeight / 2;\n                }\n            },\n\n            _fetch: function(firstItemIndex, lastItemIndex, scrollingUp) {\n                var that = this,\n                    dataSource = that.dataSource,\n                    itemHeight = that.itemHeight,\n                    take = dataSource.take(),\n                    rangeStart = that._rangeStart || dataSource.skip() || 0,\n                    currentSkip = math.floor(firstItemIndex / take) * take,\n                    fetching = false,\n                    prefetchAt = 0.33;\n                var scrollbar = that.verticalScrollbar;\n                var webkitCorrection = browser.webkit ? 1 : 0;\n                var total = dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total();\n\n                if (firstItemIndex < rangeStart) {\n\n                    fetching = true;\n                    rangeStart = math.max(0, lastItemIndex - take);\n                    that._scrollTop = scrollbar.scrollTop() - (rangeStart * itemHeight);\n                    that._page(rangeStart, take);\n\n                } else if (lastItemIndex >= rangeStart + take && !scrollingUp) {\n\n                    fetching = true;\n                    rangeStart = math.min(firstItemIndex, total - take);\n\n                    //ensure the scrollbar can be scrolled to bottom with mouse drag\n                    if (scrollbar.scrollTop() >= scrollbar[0].scrollHeight - scrollbar[0].offsetHeight - webkitCorrection) {\n                        that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight;\n                    } else if (that.dataSource._isGroupPaged() && firstItemIndex >= total - take) {\n                        that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight - (that._scrollTop - that._prevScrollTop);\n                    } else {\n                        that._scrollTop = itemHeight;\n                    }\n\n                    that._page(rangeStart, take);\n\n                } else if (!that._fetching && that.options.prefetch) {\n\n                    if (firstItemIndex < (currentSkip + take) - take * prefetchAt && firstItemIndex > take) {\n                        dataSource.prefetch(currentSkip - take, take, $.noop);\n                    }\n                    if (lastItemIndex > currentSkip + take * prefetchAt) {\n                        dataSource.prefetch(currentSkip + take, take, $.noop);\n                    }\n\n                }\n                return fetching;\n            },\n\n            fetching: function() {\n                return this._fetching;\n            },\n\n            _page: function(skip, take, callback) {\n                var that = this,\n                    delayLoading = !that.options.prefetch,\n                    dataSource = that.dataSource,\n                    isGroupPaged = dataSource._isGroupPaged();\n                callback = isFunction(callback) ? callback : $.noop;\n\n                if (that.trigger(PAGING, { skip: skip, take: take })) {\n                    return;\n                }\n\n                clearTimeout(that._timeout);\n                that._fetching = true;\n                that._rangeStart = skip;\n\n                if ((isGroupPaged && dataSource._groupRangeExists(skip, skip + take)) || (!isGroupPaged && dataSource.inRange(skip, take))) {\n                    that.trigger(LOAD_START);\n\n                    dataSource.range(skip, take, function() {\n                        that.trigger(LOAD_END);\n                        callback();\n                        that.trigger(PAGE);\n                    }, \"page\");\n                } else {\n                    if (!delayLoading) {\n                        that.trigger(LOAD_START);\n                    }\n\n                    that._timeout = setTimeout(function() {\n                        if (!that._scrolling) {\n\n                            if (delayLoading) {\n                                that.trigger(LOAD_START);\n                            }\n\n                            dataSource.range(skip, take, function() {\n                                that.trigger(LOAD_END);\n                                callback();\n                                that.trigger(PAGE);\n                            });\n                        }\n                    }, 100);\n                }\n            },\n\n            repaintScrollbar: function(shouldScrollWrapper) {\n                var that = this,\n                    maxHeight = that.options.maxScrollHeight,\n                    dataSource = that.dataSource,\n                    scrollbar = !kendo.support.kineticScrollNeeded ? kendo.support.scrollbar() : 0,\n                    wrapperElement = that.wrapper[0],\n                    totalHeight,\n                    idx,\n                    itemHeight;\n                var wasScrolledToBottom = that._isScrolledToBottom();\n\n                itemHeight = that.itemHeight = that.options.itemHeight() || 0;\n\n                var addScrollBarHeight = (wrapperElement.scrollWidth > wrapperElement.offsetWidth) ? scrollbar : 0;\n\n                totalHeight = (dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total()) * itemHeight + addScrollBarHeight;\n\n                var divElements = $(new Array(math.floor(totalHeight / maxHeight) + 1).join('<div></div>'))\n                    .css({\n                        width: \"1px\",\n                        height: `${maxHeight}px`\n                    });\n\n                if (totalHeight % maxHeight) {\n                    divElements = divElements.add($(\"<div></div>\").css({\n                        width: \"1px\",\n                        height: `${(totalHeight % maxHeight)}px`\n                    }));\n                }\n\n                that.verticalScrollbar.empty().append(divElements);\n\n                if (wasScrolledToBottom && !that._isScrolledToBottom() && !that.dataSource._isGroupPaged()) {\n                    that.scrollToBottom();\n                }\n\n                if (typeof(that._scrollTop) !== \"undefined\" && !!shouldScrollWrapper) {\n                    wrapperElement.scrollTop = that._scrollTop;\n                    that._scrollWrapperOnColumnResize();\n                }\n            },\n\n            refresh: function(e) {\n                var that = this,\n                    dataSource = that.dataSource,\n                    rangeStart = that._rangeStart;\n                var action = (e || {}).action;\n                var shouldScrollWrapper = that._isScrolledToBottom() || !action || (action !== ITEM_CHANGE && action !== REMOVE && action !== SYNC);\n\n                that.trigger(LOAD_END);\n                clearTimeout(that._timeout);\n\n                that.repaintScrollbar(shouldScrollWrapper);\n\n                if (that.drag) {\n                    that.drag.cancel();\n                }\n\n                if (typeof(rangeStart) !== \"undefined\" && !that._fetching) { // we are rebound from outside local range should be reset\n                    if (!action || (action !== SYNC && action !== ITEM_CHANGE && action !== \"expandGroup\")) {\n                        that._rangeStart = dataSource.skip();\n                    }\n\n                    if (dataSource.page() === 1 && (!action || (action !== SYNC && action !== ITEM_CHANGE && action !== \"expandGroup\" && action !== \"collapseGroup\"))) {\n                        // reset the scrollbar position if datasource is filtered\n                        that.verticalScrollbar[0].scrollTop = 0;\n                    }\n                }\n\n                that._fetching = false;\n            }\n        });\n\n        function attrEquals(attrName, attrValue) {\n            return \"[\" + kendo.attr(attrName) + \"=\" + attrValue + \"]\";\n        }\n\n        function groupCells(count) {\n            return new Array(count + 1).join('<td class=\"k-table-td k-group-cell\">&nbsp;</td>');\n        }\n\n        function cellsExcludingSpecialColumns(cells) {\n            return cells.filter((i,cell) => {\n                const $cell = $(cell);\n                const hasCheckbox = $cell.children(\".k-select-checkbox\").length > 0;\n                const hasWrappedCheckbox = $cell.find(\"> .k-checkbox-wrap > .k-select-checkbox\").length > 0;\n                return !$cell.hasClass(\"k-drag-cell\") && !$cell.hasClass(\"k-command-cell\") && !hasCheckbox && !hasWrappedCheckbox;\n            });\n        }\n\n        function stringifyAttributes(attributes) {\n            var attr,\n                result = \" \";\n\n            if (attributes) {\n                if (typeof attributes === STRING) {\n                    return attributes;\n                }\n\n                for (attr in attributes) {\n                    if (attributes[attr] !== '') {\n                        result += attr + '=\"' + attributes[attr] + '\"';\n                    }\n                }\n            }\n            return result;\n        }\n\n        var defaultCommands = {\n            create: {\n                text: \"Add new record\",\n                className: \"k-grid-add\",\n                iconClass: \"k-i-plus\"\n            },\n            cancel: {\n                text: \"Cancel changes\",\n                className: \"k-grid-cancel-changes\",\n                iconClass: \"k-i-cancel\"\n            },\n            save: {\n                text: \"Save changes\",\n                className: \"k-grid-save-changes\",\n                iconClass: \"k-i-check\"\n            },\n            destroy: {\n                text: \"Delete\",\n                className: \"k-grid-remove-command\",\n                iconClass: \"k-i-x\"\n            },\n            edit: {\n                text: \"Edit\",\n                className: \"k-grid-edit-command\",\n                iconClass: \"k-i-pencil\",\n                themeColor: \"primary\"\n            },\n            update: {\n                text: \"Save\",\n                className: \"k-grid-save-command\",\n                iconClass: \"k-i-save\",\n                themeColor: \"primary\"\n            },\n            canceledit: {\n                text: \"Cancel\",\n                className: \"k-grid-cancel-command\",\n                iconClass: \"k-i-cancel\"\n            },\n            excel: {\n                text: \"Export to Excel\",\n                className: \"k-grid-excel\",\n                iconClass: \"k-i-file-excel\"\n            },\n            pdf: {\n                text: \"Export to PDF\",\n                className: \"k-grid-pdf\",\n                iconClass: \"k-i-file-pdf\"\n            },\n            search: {\n                text: \"Search...\",\n                className: \"k-grid-search\"\n            },\n            columns: {\n                text: \"Columns\",\n                type: \"button\",\n                icon: \"columns\",\n                fillMode: \"flat\",\n                overflow: \"never\",\n                className: \"k-grid-column-menu\",\n                attr: {\n                    \"aria-haspopup\": \"menu\"\n                }\n            }\n        };\n\n        function cursor(context, value) {\n            $('th, th .k-grid-filter-menu, th .k-link', context)\n                .add(document.body)\n                .css('cursor', value);\n        }\n\n        function reorder(selector, source, dest, before, count) {\n            var sourceIndex = source;\n            source = $();\n            count = count || 1;\n            for (var idx = 0; idx < count; idx++) {\n                source = source.add(selector.eq(sourceIndex + idx));\n            }\n\n            if (typeof dest == \"number\") {\n                source[before ? \"insertBefore\" : \"insertAfter\"](selector.eq(dest));\n            } else {\n                source.appendTo(dest);\n            }\n        }\n\n        function elements(lockedContent, content, filter) {\n            return $(lockedContent).add(content).find(filter);\n        }\n\n        function attachCustomCommandEvent(context, container, commands) {\n            var idx,\n                length,\n                command,\n                commandName;\n\n            commands = !isArray(commands) ? [commands] : commands;\n\n            for (idx = 0, length = commands.length; idx < length; idx++) {\n                command = commands[idx];\n\n                if (isPlainObject(command) && command.click) {\n                    commandName = command.name || command.text;\n                    container.on(CLICK + NS, \".k-grid-\" + (commandName || \"\").replace(/\\s/g, \"\"), { commandName: commandName }, command.click.bind(context));\n                }\n            }\n        }\n\n        function normalizeColumns(columns, encoded, hide, locked, parentIds) {\n            return map(columns, function(column) {\n                column = typeof column === STRING ? { field: column } : column;\n\n                var hidden;\n                column.parentIds = parentIds;\n\n                if (column.attributes instanceof Function) {\n                    column._attributesFunction = column.attributes;\n                }\n\n                if (!isVisible(column) || hide) {\n                    column.attributes = addHiddenStyle(column.attributes);\n                    column.footerAttributes = addHiddenStyle(column.footerAttributes);\n                    column.headerAttributes = addHiddenStyle(column.headerAttributes);\n                    hidden = true;\n                } else if (isVisible(column) || !hide) {\n                    column.attributes = removeHiddenStyle(column.attributes);\n                    column.footerAttributes = removeHiddenStyle(column.footerAttributes);\n                    column.headerAttributes = removeHiddenStyle(column.headerAttributes);\n                    hidden = undefined$1;\n                }\n\n                var uid = kendo.guid();\n                if (locked && !column.locked) {\n                    column.locked = locked;\n                }\n\n                column.headerAttributes = extend({ headers: parentIds }, column.headerAttributes);\n                if (!column.headerAttributes.id) {\n                    column.headerAttributes = extend({ id: uid }, column.headerAttributes);\n                    column.uid = uid;\n                } else {\n                    column.uid = uid = column.headerAttributes.id;\n                }\n\n                if (column.columns) {\n                    column.columns = normalizeColumns(column.columns, encoded, hidden, column.locked, parentIds ? (parentIds + \" \" + uid) : uid);\n                }\n                return extend({ encoded: encoded, hidden: hidden, locked: locked }, column);\n            });\n        }\n\n        function columnParent(column, columns) {\n            var parents = [];\n            columnParents(column, columns, parents);\n            return parents[parents.length - 1];\n        }\n\n        function columnParents(column, columns, parents) {\n            parents = parents || [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (column === columns[idx]) {\n                    return true;\n                } else if (columns[idx].columns) {\n                    var inserted = parents.length;\n                    parents.push(columns[idx]);\n                    if (!columnParents(column, columns[idx].columns, parents)) {\n                        parents.splice(inserted, parents.length - inserted);\n                    } else {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        }\n\n        function setColumnVisibility(column, visible) {\n            setVisibility(column, visible, visible);\n        }\n\n        function setVisibility(column, visible, show) {\n            var method = show ? removeHiddenStyle : addHiddenStyle;\n            column.hidden = !visible;\n            column.attributes = method(column.attributes);\n            column.footerAttributes = method(column.footerAttributes);\n            column.headerAttributes = method(column.headerAttributes);\n        }\n\n\n        function setColumnMediaVisibility(column, visible) {\n            setColumnMatchesMedia(column);\n            var hideByMedia = column._hideByMedia;\n            setVisibility(column, visible, hideByMedia ? column.matchesMedia : visible);\n        }\n\n        function setColumnMatchesMedia(column) {\n            column.matchesMedia = columnMatchesMedia(column);\n        }\n\n        function columnMatchesMedia(column) {\n            return column && (isUndefined(column.media) || (!isUndefined(column.media) && kendo.matchesMedia(column.media)));\n        }\n\n        function isCellVisible() {\n            return this.style.display !== NONE && !this.classList.contains(\"k-hidden\");\n        }\n\n        function isElementVisible(element) {\n            return $(element)[0].style.display !== NONE && !this.classList.contains(\"k-hidden\");\n        }\n\n        function isVisible(column) {\n            return visibleColumns([column]).length > 0;\n        }\n\n        function visibleColumns(columns) {\n            return grep(columns, function(column) {\n                var result = !column.hidden && column.matchesMedia !== false;\n\n                if (result && column.columns) {\n                    result = visibleColumns(column.columns).length > 0;\n                }\n                return result;\n            });\n        }\n\n        function columnsWithMedia(columns) {\n            var result = [];\n            var column;\n\n            for (var i = 0; i < columns.length; i++) {\n                column = columns[i];\n\n                if (!isUndefined(column.media)) {\n                    if (!isUndefined(column.minScreenWidth)) {\n                        throw new Error(\"Using 'media' and 'minScreenWidth' options at the same time is not supported.\");\n                    }\n\n                    result.push(column);\n                }\n\n                if (column.columns) {\n                    result = result.concat(columnsWithMedia(column.columns));\n                }\n            }\n\n            return result;\n        }\n\n        function isUndefined(value) {\n            return typeof value === \"undefined\";\n        }\n\n        function toJQuery(elements) {\n            return $(elements).map(function() { return this.toArray(); });\n        }\n\n        function updateCellRowSpan(cell, columns, sourceLockedColumnsCount) {\n            var lockedColumnDepth = depth(lockedColumns(columns));\n            var nonLockedColumnDepth = depth(nonLockedColumns(columns));\n\n            var rowSpan = cell.rowSpan;\n            if (sourceLockedColumnsCount) {\n                if (lockedColumnDepth > nonLockedColumnDepth) {\n                    cell.rowSpan = (rowSpan - (lockedColumnDepth - nonLockedColumnDepth)) || 1;\n                } else {\n                    cell.rowSpan = rowSpan + (nonLockedColumnDepth - lockedColumnDepth);\n                }\n            } else {\n                if (lockedColumnDepth > nonLockedColumnDepth) {\n                    cell.rowSpan = rowSpan + (lockedColumnDepth - nonLockedColumnDepth);\n                } else {\n                    cell.rowSpan = (rowSpan - (nonLockedColumnDepth - lockedColumnDepth)) || 1;\n                }\n            }\n        }\n\n        function findColumnByField(columns, field) {\n            for (var i = 0; i < columns.length; i++) {\n                if (columns[i].field == field) {\n                    return columns[i];\n                }\n            }\n        }\n\n        function moveCellsBetweenContainers(sources, target, leafs, columns, container, destination, groups, action) {\n            var sourcesDepth = depth(sources);\n            var targetDepth = depth([target]);\n\n            if (sourcesDepth > targetDepth) {\n                var groupCells = new Array(groups + 1).join('<th class=\"k-group-cell k-header k-table-th\" scope=\"col\">&nbsp;</th>');\n                var rows = destination.children(\":not(.k-filter-row)\");\n                $(new Array((sourcesDepth - targetDepth) + 1).join(\"<tr class='k-table-row'>\" + groupCells + \"</tr>\")).insertAfter(rows.last());\n            }\n\n            addRowSpanValue(destination, sourcesDepth - targetDepth);\n\n            moveCells(leafs, columns, container, destination, action);\n        }\n\n        function updateCellIndex(thead, columns, offset) {\n            offset = offset || 0;\n\n            var position;\n            var cell;\n            var allColumns = columns;\n            columns = leafColumns(columns);\n\n            var cells = {};\n            var rows = thead.find(\">tr:not(.k-filter-row)\");\n\n            var filter = function() {\n                var el = $(this);\n                return !el.hasClass(\"k-group-cell\") && !el.hasClass(\"k-hierarchy-cell\");\n            };\n\n            for (var idx = 0, length = columns.length; idx < length; idx++) {\n                position = columnPosition(columns[idx], allColumns);\n\n                if (!cells[position.row]) {\n                    cells[position.row] = rows.eq(position.row)\n                        .find(DOT + HEADER_CLASS)\n                        .filter(filter);\n                }\n\n                cell = cells[position.row].eq(position.cell);\n                cell.attr(kendo.attr(\"index\"), offset + idx);\n            }\n\n\n            return columns.length;\n        }\n\n        function depth(columns) {\n            var result = 1;\n            var max = 0;\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (columns[idx].columns) {\n                    var temp = depth(columns[idx].columns);\n                    if (temp > max) {\n                        max = temp;\n                    }\n                }\n            }\n            return result + max;\n        }\n\n        function moveCells(leafs, columns, container, destination, action) {\n            var sourcePosition = columnVisiblePosition(leafs[0], columns);\n\n            var ths = container.find(\">tr:not(.k-filter-row)\").eq(sourcePosition.row).children(\"th.k-header:not(.k-group-cell)\");\n\n            var t = $();\n            var sourceIndex = sourcePosition.cell;\n            var idx;\n\n            for (idx = 0; idx < leafs.length; idx++) {\n                t = t.add(ths.eq(sourceIndex + idx));\n            }\n\n            destination.find(\">tr:not(.k-filter-row)\").eq(sourcePosition.row)[action](t);\n\n            var children = [];\n            for (idx = 0; idx < leafs.length; idx++) {\n                if (leafs[idx].columns) {\n                    children = children.concat(leafs[idx].columns);\n                }\n            }\n\n            if (children.length) {\n                moveCells(children, columns, container, destination, action);\n            }\n        }\n\n        function columnPosition(column, columns, row, cellCounts) {\n            var result;\n            var idx;\n\n            row = row || 0;\n            cellCounts = cellCounts || {};\n            cellCounts[row] = cellCounts[row] || 0;\n\n            for (idx = 0; idx < columns.length; idx++) {\n               if (columns[idx] == column) {\n                    result = { cell: cellCounts[row], row: row };\n                    break;\n               } else if (columns[idx].columns) {\n                   result = columnPosition(column, columns[idx].columns, row + 1, cellCounts);\n                   if (result) {\n                        break;\n                   }\n               }\n\n               cellCounts[row]++;\n            }\n            return result;\n        }\n        function findParentColumnWithChildren(columns, index, source, rtl) {\n            var target;\n            var locked = !!source.locked;\n            var targetLocked;\n\n            do {\n                target = columns[index];\n                index += rtl ? 1 : -1;\n                targetLocked = !!target.locked;\n            } while (target && index > -1 && index < columns.length && target != source && !target.columns && targetLocked === locked);\n\n            return target;\n        }\n\n        function decorateCellWithClass(html) {\n            let element = html;\n            let classes = element.match(/class=[\"][^\"]+/g);\n            if (classes) {\n                const cssClasses = classes[0].split('\\\"').pop();\n                element = element.replace(cssClasses, cssClasses + \" k-table-td\");\n            } else {\n                element = element.replace(\"<td\",\"<td class='k-table-td'\");\n            }\n\n            return element;\n        }\n\n        function findReorderTarget(columns, target, source, before, masterColumns) {\n            if (target.columns) {\n                target = target.columns;\n                return target[before ? 0 : target.length - 1];\n            } else {\n                var parent = columnParent(target, columns);\n                var parentColumns;\n\n                if (parent) {\n                    parentColumns = parent.columns;\n                } else {\n                    parentColumns = columns;\n                }\n\n                var index = inArray(target, parentColumns);\n                if (index === 0 && before) {\n                    index++;\n                } else if ((index == parentColumns.length - 1 && !before) || (!source.locked && !target.columns && !before)) {\n                    index--;\n                } else if (index > 0 || (index === 0 && !before)) {\n                    index++;\n                }\n\n                var sourceIndex = inArray(source, parentColumns);\n                target = findParentColumnWithChildren(parentColumns, index, source, sourceIndex > index);\n                var targetIndex = inArray(target, masterColumns);\n                if (target.columns && (!targetIndex || targetIndex === parentColumns.length - 1)) {\n                    return null;\n                }\n\n                if (target && target != source && target.columns) {\n                    return findReorderTarget(columns, target, source, before, masterColumns);\n                }\n            }\n            return null;\n        }\n\n        function columnVisiblePosition(column, columns, row, cellCounts) {\n            var result;\n            var idx;\n\n            row = row || 0;\n            cellCounts = cellCounts || {};\n            cellCounts[row] = cellCounts[row] || 0;\n\n            for (idx = 0; idx < columns.length; idx++) {\n               if (columns[idx] == column) {\n                    result = { cell: cellCounts[row], row: row };\n                    break;\n               } else if (columns[idx].columns) {\n                   result = columnVisiblePosition(column, columns[idx].columns, row + 1, cellCounts);\n                   if (result) {\n                        break;\n                   }\n               }\n\n               if (!columns[idx].hidden) {\n                   cellCounts[row]++;\n               }\n            }\n            return result;\n        }\n\n        function flatColumnsInDomOrder(columns) {\n            var result = flatColumns(lockedColumns(columns));\n            return result.concat(flatColumns(nonLockedColumns(columns)));\n        }\n\n        function targetParentContainerIndex(flatColumns, columns, sourceIndex, targetIndex) {\n            var column = flatColumns[sourceIndex];\n            var target = flatColumns[targetIndex];\n\n            var parent = columnParent(column, columns);\n            columns = parent ? parent.columns : columns;\n\n            return inArray(target, columns);\n        }\n\n        function flatColumns(columns) {\n            var result = [];\n            var children = [];\n            for (var idx = 0; idx < columns.length; idx++) {\n                result.push(columns[idx]);\n                if (columns[idx].columns) {\n                    children = children.concat(columns[idx].columns);\n                }\n\n            }\n            if (children.length) {\n                result = result.concat(flatColumns(children));\n            }\n            return result;\n        }\n\n        function hiddenLeafColumnsCount(columns) {\n            var counter = 0;\n            var column;\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                column = columns[idx];\n\n                if (column.columns) {\n                    counter += hiddenLeafColumnsCount(column.columns);\n                } else if (column.hidden) {\n                    counter++;\n                }\n            }\n            return counter;\n        }\n\n        function sumWidths(cols) {\n            var width = 0;\n\n            for (var idx = 0, length = cols.length; idx < length; idx++) {\n                if (!cols[idx].hidden) {\n                    width += parseInt(cols[idx].width, 10);\n                }\n            }\n\n            return width;\n        }\n\n        function columnsWidth(cols) {\n            var colWidth, width = 0;\n\n            for (var idx = 0, length = cols.length; idx < length; idx++) {\n                colWidth = cols[idx].style.width;\n                if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                    width += parseInt(colWidth, 10);\n                }\n            }\n\n            return width;\n        }\n\n        function removeRowSpanValue(container, count) {\n            var cells = container.find(\"tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n            var rowSpan;\n            for (var idx = 0; idx < cells.length; idx++) {\n                rowSpan = cells[idx].rowSpan;\n                if (rowSpan > 1) {\n                    cells[idx].rowSpan = (rowSpan - count) || 1;\n                }\n            }\n        }\n\n        function addRowSpanValue(container, count) {\n            var cells = container.find(\"tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n            for (var idx = 0; idx < cells.length; idx++) {\n                cells[idx].rowSpan += count;\n            }\n        }\n\n        function removeEmptyRows(container) {\n            var rows = container.find(\"tr:not(.k-filter-row)\");\n\n            var emptyRowsCount = rows.filter(function() {\n                return !$(this).children().length;\n            }).remove().length;\n\n            var cells = rows.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n            for (var idx = 0; idx < cells.length; idx++) {\n                if (cells[idx].rowSpan > 1) {\n                    cells[idx].rowSpan -= emptyRowsCount;\n                }\n            }\n            return rows.length - emptyRowsCount;\n        }\n\n        function mapColumnToCellRows(columns, cells, rows, rowIndex, offset) {\n            var idx, row, length, children = [];\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                row = rows[rowIndex] || [];\n                row.push(cells.eq(offset + idx));\n                rows[rowIndex] = row;\n\n                if (columns[idx].columns) {\n                    children = children.concat(columns[idx].columns);\n                }\n            }\n\n            if (children.length) {\n                mapColumnToCellRows(children, cells, rows, rowIndex + 1, offset + columns.length);\n            }\n        }\n\n        function setLeftAndRightStyles(element, left, right) {\n            element.css({\n                \"left\": left,\n                \"right\": right\n            });\n        }\n\n        function createColumnAttribute(column, attribute, property) {\n            column[attribute] = column[attribute] || {};\n            column[attribute][property] = column[attribute][property] || \"\";\n        }\n\n        function addColumnAttribute(column, attribute, property, value) {\n            createColumnAttribute(column, attribute, property);\n\n            if (column[attribute][property] !== \"\") {\n                column[attribute][property] += \" \" + value;\n            } else {\n                column[attribute][property] = value;\n            }\n        }\n\n        function removeColumnAttribute(column, attribute, property, value, removeAttributeProperty) {\n            createColumnAttribute(column, attribute, property);\n            if (removeAttributeProperty) {\n                delete column[attribute][property];\n            } else {\n                column[attribute][property] = column[attribute][property].replace(value, \"\");\n            }\n        }\n\n        function lockedColumns(columns) {\n            return grep(columns, function(column) {\n                return column.locked;\n            });\n        }\n\n        function nonLockedColumns(columns) {\n            return grep(columns, function(column) {\n                return !column.locked;\n            });\n        }\n\n        function stickyColumns(columns) {\n            return grep(columns, function(column) {\n                return column.sticky && !column.locked;\n            });\n        }\n\n        function visibleStickyColumns(columns) {\n            return grep(columns, function(column) {\n                return column.sticky && !column.locked && isVisible(column);\n            });\n        }\n\n        function visibleNonLockedColumns(columns) {\n            return grep(columns, function(column) {\n                return !column.locked && isVisible(column);\n            });\n        }\n\n        function visibleLockedColumns(columns) {\n            return grep(columns, function(column) {\n                return column.locked && isVisible(column);\n            });\n        }\n\n        function visibleLeafColumns(columns) {\n            var result = [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (columns[idx].hidden) {\n                    continue;\n                }\n\n                if (columns[idx].columns) {\n                    result = result.concat(visibleLeafColumns(columns[idx].columns));\n                } else {\n                    result.push(columns[idx]);\n                }\n            }\n\n            return result;\n        }\n\n        function visibleLeafExportColumns(columns) {\n            var result = [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (columns[idx].hidden) {\n                    continue;\n                }\n\n                if (columns[idx].columns) {\n                    result = result.concat(visibleLeafColumns(columns[idx].columns));\n                } else {\n                    result.push({\n                        field: columns[idx].field,\n                        width: columns[idx].width,\n                        values: columns[idx].values,\n                        title: columns[idx].title\n                    });\n                }\n            }\n\n            return result;\n        }\n\n        function childColumns(columns) {\n            var result = [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (columns[idx].columns) {\n                    result = result.concat(columns[idx].columns);\n                }\n            }\n\n            return result;\n        }\n\n        function visibleChildColumns(columns) {\n            var result = childColumns(columns);\n\n            result = result.filter(function(e) {\n                return !e.hidden;\n            });\n\n            return result;\n        }\n\n        function leafColumns(columns) {\n            var result = [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (!columns[idx].columns) {\n                    result.push(columns[idx]);\n                    continue;\n                }\n                result = result.concat(leafColumns(columns[idx].columns));\n            }\n\n            return result;\n        }\n\n        function getColumnsFields(columns) {\n            var result = [];\n            columns = leafColumns(columns);\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (typeof columns[idx] === \"string\") {\n                    result.push(columns[idx]);\n                } else if (columns[idx].field) {\n                    result.push(columns[idx].field);\n                }\n            }\n            return result;\n        }\n\n        function editField(column) {\n            return {\n                field: column.field,\n                title: column.title,\n                format: column.format,\n                editor: column.editor,\n                values: column.values,\n                editorOptions: extend(true, { format: column.format }, column.editorOptions),\n                label: column.title || column.field || \"\"\n            };\n        }\n\n        function leafDataCells(container) {\n            var rows = container.find(\">tr:not(.k-filter-row)\");\n\n            var filter = function() {\n                var el = $(this);\n                return !el.hasClass(\"k-group-cell\") && !el.hasClass(\"k-hierarchy-cell\");\n            };\n\n            var cells = $();\n            if (rows.length > 1) {\n                cells = rows.find(\"th\")\n                    .filter(filter)\n                    .filter(function() { return this.rowSpan > 1; });\n            }\n\n            cells = cells.add(rows.last().find(\"th\").filter(filter));\n\n            var indexAttr = kendo.attr(\"index\");\n            return [].sort.call(cells, function(a, b) {\n                a = $(a);\n                b = $(b);\n\n                var indexA = a.attr(indexAttr);\n                var indexB = b.attr(indexAttr);\n\n                if (indexA === undefined$1) {\n                    indexA = $(a).index();\n                }\n                if (indexB === undefined$1) {\n                    indexB = $(b).index();\n                }\n\n                indexA = parseInt(indexA, 10);\n                indexB = parseInt(indexB, 10);\n                return indexA > indexB ? 1 : (indexA < indexB ? -1 : 0);\n            });\n        }\n\n        function parentColumnsCells(cell) {\n            var container = cell.closest(\"table\");\n            var result = $().add(cell);\n\n            var row = cell.closest(TR);\n            var headerRows = container.find(\"tr:not(.k-filter-row)\");\n            var level = headerRows.index(row);\n            if (level > 0) {\n                var parent = headerRows.eq(level - 1);\n                var parentCellsWithChildren = parent.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\").filter(function() {\n                    return !$(this).attr(\"rowspan\");\n                });\n\n                var offset = 0;\n                var index = row.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\").index(cell);\n\n                var prevCells = cell.prevAll(\":not(.k-group-cell,.k-hierarchy-cell)\").filter(function() {\n                    return this.colSpan > 1;\n                });\n\n                for (var idx = 0; idx < prevCells.length; idx++) {\n                    offset += prevCells[idx].colSpan || 1;\n                }\n\n                index += Math.max(offset - 1, 0);\n\n                offset = 0;\n                for (idx = 0; idx < parentCellsWithChildren.length; idx++) {\n                    var parentCell = parentCellsWithChildren.eq(idx);\n                    if (parentCell.attr(\"data-colspan\")) {\n                        offset += parentCell[0].getAttribute(\"data-colspan\");\n                    } else {\n                        offset += 1;\n                    }\n                    if (index >= idx && index < offset) {\n                        result = parentColumnsCells(parentCell).add(result);\n                        break;\n                    }\n                }\n            }\n            return result;\n        }\n\n        function childColumnsCells(cell) {\n            var container = cell.closest(\"thead\");\n            var result = $().add(cell);\n\n            var row = cell.closest(TR);\n            var headerRows = container.find(\"tr:not(.k-filter-row)\");\n            var level = headerRows.index(row) + cell[0].rowSpan;\n            var colSpanAttr = kendo.attr(\"colspan\");\n\n            if (level <= headerRows.length - 1) {\n                var child = row.next();\n                var prevCells = cell.prevAll(\":not(.k-group-cell,.k-hierarchy-cell)\");\n\n                var idx;\n\n                prevCells = prevCells.filter(function() {\n                    return !this.rowSpan || this.rowSpan === 1;\n                });\n\n                var offset = 0;\n\n                for (idx = 0; idx < prevCells.length; idx++) {\n                    offset += parseInt(prevCells.eq(idx).attr(colSpanAttr), 10) || 1;\n                }\n\n                var cells = child.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n                var colSpan = parseInt(cell.attr(colSpanAttr), 10) || 1;\n\n                idx = 0;\n\n                while (idx < colSpan) {\n                    child = cells.eq(idx + offset);\n                    result = result.add(childColumnsCells(child));\n                    var value = parseInt(child.attr(colSpanAttr), 10);\n                    if (value > 1) {\n                        colSpan -= value - 1;\n                    }\n                    idx++;\n                }\n            }\n\n            return result;\n        }\n\n        function appendContent(tbody, table, html, size) {\n            var placeholder,\n                tmp = tbody;\n\n            if (tbodySupportsInnerHtml) {\n                let $html = $(html);\n                kendo.applyStylesFromKendoAttributes($html, [\"display\", \"left\", \"right\"]);\n                tbody.empty();\n                $html.each((_, el) => tbody[0].appendChild(el));\n            } else {\n                placeholder = document.createElement(DIV);\n                placeholder.innerHTML = \"<table class='k-grid-table k-table'><tbody class='k-table-tbody'>\" + html + \"</tbody></table>\";\n                $(placeholder).find(\"table\").addClass(kendo.getValidCssClass(\"k-table-\", \"size\", size));\n                tbody = placeholder.firstChild.firstChild;\n                table[0].replaceChild(tbody, tmp[0]);\n                tbody = $(tbody);\n            }\n            return tbody;\n        }\n\n        function addHiddenStyle(attr) {\n            attr = attr || {};\n            let kendoStyleAttrObject = {};\n            kendoStyleAttrObject[kendo.attr(\"style-display\")] = \"none\";\n\n            return extend({}, attr, kendoStyleAttrObject);\n        }\n\n        function hasHiddenStyle(attr) {\n            attr = attr || {};\n\n            return !!attr[kendo.attr(\"style-display\")];\n        }\n\n        function removeHiddenStyle(attr) {\n            attr = attr || {};\n            delete attr[kendo.attr(\"style-display\")];\n\n            return attr;\n        }\n\n        function normalizeCols(table, visibleColumns, hasDetails, groups) {\n            var colgroup = table.find(\">colgroup\"),\n                width,\n                cols = map(visibleColumns, function(column) {\n                        width = column.width;\n                        if (width && parseInt(width, 10) !== 0) {\n                            return kendo.format(`<col ${kendo.attr('style-width')}=\"{0}\"/>`, typeof width === STRING ? width : width + PX);\n                        }\n\n                        return \"<col />\";\n                    });\n\n            if (hasDetails || colgroup.find(\".k-hierarchy-col\").length) {\n                cols.splice(0, 0, '<col class=\"k-hierarchy-col\" />');\n            }\n\n            if (colgroup.length) {\n                colgroup.remove();\n            }\n\n            colgroup = $(new Array(groups + 1).join('<col class=\"k-group-col\">') + cols.join(\"\"));\n            kendo.applyStylesFromKendoAttributes(colgroup, [\"width\"]);\n\n            if (!colgroup.is(\"colgroup\")) {\n                colgroup = $(\"<colgroup/>\").append(colgroup);\n            }\n\n            table.prepend(colgroup);\n        }\n\n        function normalizeHeaderCells(container, columns) {\n            var lastIndex = 0;\n            var idx , len;\n            var th = container.find(\"th:not(.k-group-cell)\");\n\n            for (idx = 0, len = columns.length; idx < len; idx ++) {\n                if (columns[idx].locked) {\n                    th.eq(idx).insertBefore(th.eq(lastIndex));\n                    th = container.find(\"th:not(.k-group-cell)\");\n                    lastIndex ++;\n                }\n            }\n        }\n\n        function convertToObject(array) {\n            var result = {},\n                item,\n                idx,\n                length;\n\n            for (idx = 0, length = array.length; idx < length; idx++) {\n                item = array[idx];\n                result[item.value] = item.text;\n            }\n\n            return result;\n        }\n\n        function formatGroupValue(value, format, columnValues, encoded) {\n            let isForeignKey = columnValues && columnValues.length && isPlainObject(columnValues[0]) && \"value\" in columnValues[0],\n                groupValue = isForeignKey ? convertToObject(columnValues)[value] : value;\n\n            groupValue = groupValue != null ? groupValue : \"\";\n            let usedValue = encoded === false ? groupValue : kendo.htmlEncode(groupValue);\n\n            return format ? kendo.format(format, usedValue) : usedValue;\n        }\n\n        function setCellVisibility(cells, index, visible) {\n            var pad = 0,\n                state,\n                cell = cells[pad];\n\n            while (cell) {\n                state = visible ? true : cell.style.display !== NONE;\n\n                if (visible && cell.classList.contains(\"k-hidden\")) {\n                    cell.classList.remove(\"k-hidden\");\n                }\n\n                if (state && !nonDataCellsRegExp.test(cell.className) && --index < 0) {\n                    cell.style.display = visible ? \"\" : NONE;\n                    break;\n                }\n\n                cell = cells[++pad];\n            }\n        }\n\n        function hideColumnCells(rows, columnIndex) {\n            var idx = 0,\n                length = rows.length,\n                cell, row;\n\n            for ( ; idx < length; idx += 1) {\n                row = rows.eq(idx);\n                if (row.is(\".k-grouping-row,.k-detail-row\")) {\n                    cell = row.children(\":not(.k-group-cell):first,.k-detail-cell\").last();\n                    cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) - 1);\n                } else {\n                    if (row.hasClass(\"k-grid-edit-row\") && (cell = row.children(\".k-edit-container\")[0])) {\n                        cell = $(cell);\n                        cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) - 1);\n                        cell.find(\"col\").eq(columnIndex).remove();\n                        row = cell.find(TR).first();\n                    }\n\n                    setCellVisibility(row[0].cells, columnIndex, false);\n                }\n            }\n        }\n\n        function groupRows(data) {\n            var result = [];\n            var item;\n\n            for (var idx = 0; idx < data.length; idx++) {\n                item = data[idx];\n                if (!(\"field\" in item && \"value\" in item && \"items\" in item)) {\n                    break;\n                }\n\n                result.push(item);\n\n                if (item.hasSubgroups) {\n                    result = result.concat(groupRows(item.items));\n                }\n            }\n\n            return result;\n        }\n\n        function groupFooters(data) {\n            var result = [];\n            var item;\n\n            for (var idx = 0; idx < data.length; idx++) {\n                item = data[idx];\n                if (!(\"field\" in item && \"value\" in item && \"items\" in item)) {\n                    break;\n                }\n\n                if (item.hasSubgroups) {\n                    result = result.concat(groupFooters(item.items));\n                }\n\n                result.push(item.aggregates);\n            }\n\n            return result;\n        }\n\n        function showColumnCells(rows, columnIndex) {\n            var idx = 0,\n                length = rows.length,\n                cell, row, columns;\n\n            for ( ; idx < length; idx += 1) {\n                row = rows.eq(idx);\n                if (row.is(\".k-grouping-row,.k-detail-row\")) {\n                    cell = row.children(\":not(.k-group-cell):first,.k-detail-cell\").last();\n                    cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) + 1);\n                } else {\n                    if (row.hasClass(\"k-grid-edit-row\") && (cell = row.children(\".k-edit-container\")[0])) {\n                        cell = $(cell);\n                        cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) + 1);\n                        normalizeCols(cell.find(\">form>table\"), visibleColumns(columns), false, 0);\n                        row = cell.find(TR).first();\n                    }\n\n                    setCellVisibility(row[0].cells, columnIndex, true);\n                }\n            }\n        }\n\n        function updateColspan(toAdd, toRemove, num) {\n            num = num || 1;\n\n            var item, idx, length;\n            for (idx = 0, length = toAdd.length; idx < length; idx++) {\n                item = toAdd.eq(idx).children(\":not([hidden])\").last();\n                item.attr(\"colspan\", parseInt(item.attr(\"colspan\"), 10) + num);\n\n                item = toRemove.eq(idx).children(\":not([hidden])\").last();\n                item.attr(\"colspan\", parseInt(item.attr(\"colspan\"), 10) - num);\n            }\n        }\n\n        function tableWidth(table) {\n            var idx, length, width = 0;\n            var cols = table.find(\">colgroup>col\");\n\n            for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                width += parseInt(cols[idx].style.width, 10);\n            }\n\n            return width;\n        }\n        var Grid = kendo.ui.DataBoundWidget.extend({\n            init: function(element, options, events) {\n                var that = this;\n\n                options = isArray(options) ? { dataSource: options } : options;\n\n                Widget.fn.init.call(that, element, options);\n\n                if (events) {\n                    that._events = events;\n                }\n\n                isRtl = kendo.support.isRtl(element);\n                CARET_ALT_RIGHT = isRtl ? CARET_ALT_LEFT : CARET_ALT_RIGHT_CACHE;\n\n                that._element();\n\n                that._ariaId();\n\n                that._columns($.extend(true, [], that.options.columns));\n\n                if (that._foreignKeyPromises) {\n                    $.when.apply(null, that._foreignKeyPromises)\n                        .then(function() {\n                            that._foreignKeyPromises = null;\n                            that._continueInit();\n                        });\n                } else {\n                    that._continueInit();\n                }\n            },\n\n            _continueInit: function() {\n                var that = this;\n\n                that._dataSource();\n\n                that._stickyColumns();\n\n                that._tbody();\n\n                that._thead();\n\n                that._rowResizing();\n\n                that._groupable();\n\n                that._toolbar();\n\n                let columnsToolbarButton = that.wrapper.find(\".k-grid-toolbar .k-toolbar-button.k-grid-column-menu.k-toolbar-tool\");\n                if (columnsToolbarButton.length > 0) {\n                    that._globalColumnsMenu(columnsToolbarButton);\n                }\n\n                that._pageable();\n\n                that._setContentHeight();\n\n                that._templates();\n\n                that._navigatable();\n\n                that._initSelectableAggregates();\n\n                that._selectable();\n\n                that._statusBar();\n\n                that._clipboard();\n\n                that._paste();\n\n                that._details();\n\n                that._editable();\n\n                that._attachCustomCommandsEvent();\n\n                that._adaptiveColumns();\n\n                that._minScreenSupport();\n\n                if (that.options.autoBind) {\n                    that.dataSource.fetch();\n                } else {\n                    that._group = that._groups() > 0;\n                    that._footer();\n                }\n\n                if (that.options.contextMenu) {\n                    that._initContextMenu();\n                }\n\n                if (that.lockedContent) {\n                    that.wrapper.addClass(\"k-grid-lockedcolumns\");\n                    that._resizeHandler = function() {\n                        that.resize();\n                    };\n                    $(window).on(\"resize\" + NS, that._resizeHandler);\n                }\n\n                that._initLoader();\n\n                kendo.notify(that);\n\n                if (that._showWatermarkOverlay) {\n                    that._showWatermarkOverlay(that.wrapper[0]);\n                }\n            },\n\n            events: [\n               CHANGE,\n               CHANGING,\n               \"dataBinding\",\n               \"cancel\",\n               DATABOUND,\n               DETAILEXPAND,\n               DETAILCOLLAPSE,\n               DETAILINIT,\n               FILTERMENUINIT,\n               FILTERMENUOPEN,\n               COLUMNMENUINIT,\n               COLUMNMENUOPEN,\n               EDIT,\n               BEFOREEDIT,\n               SAVE,\n               REMOVE,\n               SAVECHANGES,\n               CELLCLOSE,\n               ROWRESIZE,\n               COLUMNRESIZE,\n               COLUMNREORDER,\n               COLUMNSHOW,\n               COLUMNHIDE,\n               COLUMNLOCK,\n               COLUMNUNLOCK,\n               COLUMNSTICK,\n               COLUMNUNSTICK,\n               ROWREORDER,\n               NAVIGATE,\n               PASTE,\n               \"page\",\n               \"sort\",\n               \"filter\",\n               \"group\",\n               \"groupExpand\",\n               \"groupCollapse\",\n               \"kendoKeydown\"\n            ],\n\n            setDataSource: function(dataSource) {\n                var that = this;\n                var scrollable = that.options.scrollable;\n                var scrollableContent;\n\n                that.options.dataSource = dataSource;\n\n                that._dataSource();\n\n                that._pageable();\n\n                that._thead();\n\n                that._rowResizing();\n\n                if (scrollable) {\n                    if (scrollable.virtual) {\n                        scrollableContent = that.content.find(\">.k-virtual-scrollable-wrap\");\n                        kendo.scrollLeft(scrollableContent, leftMostPosition(scrollableContent, isRtl));\n                    } else {\n                        scrollableContent = that.tbody;\n                        kendo.scrollLeft(that.content, leftMostPosition(scrollableContent, isRtl));\n                    }\n                }\n\n                if (that.options.groupable) {\n                    that._groupable();\n                }\n\n                if (that.virtualScrollable) {\n                    that.virtualScrollable.setDataSource(that.options.dataSource);\n                }\n\n                if (that.options.navigatable) {\n                    that._navigatable();\n                }\n\n                if (that.options.selectable) {\n                    that._selectable();\n                }\n\n                if (that.options.autoBind) {\n                    that.dataSource.fetch();\n                } else {\n                    that._footer();\n                }\n            },\n\n            options: {\n                name: \"Grid\",\n                columns: [],\n                toolbar: null,\n                autoBind: true,\n                filterable: false,\n                scrollable: true,\n                sortable: false,\n                selectable: false,\n                allowCopy: false,\n                allowPaste: false,\n                navigatable: false,\n                pageable: false,\n                persistSelection: false,\n                editable: false,\n                encodeTitles: false,\n                groupable: false,\n                rowTemplate: \"\",\n                altRowTemplate: \"\",\n                statusBarTemplate: null,\n                search: false,\n                noRecords: false,\n                dataSource: {},\n                height: null,\n                resizable: false,\n                reorderable: false,\n                columnMenu: false,\n                detailTemplate: null,\n                contextMenu: false,\n                columnResizeHandleWidth: 3,\n                size: \"medium\",\n                mobile: \"\",\n                loaderType: \"loadingPanel\",\n                messages: {\n                    loader: {\n                        loading: \"Loading...\",\n                        exporting: \"Exporting...\",\n                    },\n\n                    editable: {\n                        cancelDelete: CANCELDELETE,\n                        confirmation: DELETECONFIRM,\n                        confirmDelete: CONFIRMDELETE\n                    },\n                    commands: {\n                        create: defaultCommands.create.text,\n                        cancel: defaultCommands.cancel.text,\n                        save: defaultCommands.save.text,\n                        destroy: defaultCommands.destroy.text,\n                        edit: defaultCommands.edit.text,\n                        update: defaultCommands.update.text,\n                        canceledit: defaultCommands.canceledit.text,\n                        excel: defaultCommands.excel.text,\n                        pdf: defaultCommands.pdf.text,\n                        search: defaultCommands.search.text,\n                        columns: defaultCommands.columns.text,\n                        select: \"Select\",\n                        selectRow: \"Select Row\",\n                        selectAllRows: \"All rows\",\n                        clearSelection: \"Clear selection\",\n                        copySelection: \"Copy selection\",\n                        copySelectionNoHeaders: \"Copy selection (No Headers)\",\n                        paste: \"Paste (use CTRL/⌘ + V)\",\n                        reorderRow: \"Reorder row\",\n                        reorderRowUp: \"Up\",\n                        reorderRowDown: \"Down\",\n                        reorderRowTop: \"Top\",\n                        reorderRowBottom: \"Bottom\",\n                        exportPdf: \"Export to PDF\",\n                        exportExcel: \"Export to Excel\",\n                        exportToExcelAll: \"All\",\n                        exportToExcelSelection: \"Selection\",\n                        exportToExcelSelectionNoHeaders: \"Selection (No Headers)\",\n                        sortAsc: \"Sort Ascending\",\n                        sortDesc: \"Sort Descending\",\n                        moveGroupPrevious: \"Move previous\",\n                        moveGroupNext: \"Move next\",\n                    },\n                    noRecords: NORECORDS,\n                    expandCollapseColumnHeader: \"\",\n                    groupHeader: \"Press ctrl + space to group\",\n                    ungroupHeader: \"Press ctrl + space to ungroup\",\n                    itemsSelected: \"items selected\",\n                    dragHandleLabel: \"Drag row\",\n                    toolbarLabel: \"grid toolbar\",\n                    groupingHeaderLabel: \"grid grouping header\",\n                    filterCellTitle: \"filter cell\"\n                },\n                width: null\n            },\n\n            destroy: function() {\n                var that = this,\n                    element,\n                    reorderableInstance;\n\n                that._destroyColumnAttachments();\n\n                Widget.fn.destroy.call(that);\n\n                if (this._navigatableTables) {\n                    this._navigatableTables.off(NS);\n                    this._navigatableTables = null;\n                    this._headertables = null;\n                }\n\n                if (that._resizeHandler) {\n                    $(window).off(\"resize\" + NS, that._resizeHandler);\n                }\n\n                if (that.pager && that.pager.element) {\n                    that.pager.destroy();\n                }\n\n                if (that.timer) {\n                    clearTimeout(that.timer);\n                }\n\n                if (that._progressTimeOut) {\n                    clearTimeout(that._progressTimeOut);\n                }\n\n                if (that._collapseGroupsTimeOut) {\n                    clearTimeout(that._collapseGroupsTimeOut);\n                }\n\n                if (that._endlessFetchTimeOut) {\n                    clearTimeout(that._endlessFetchTimeOut);\n                }\n\n                that.pager = null;\n\n                that._destroyGroupable();\n\n                reorderableInstance = that.wrapper.data(\"kendoReorderable\");\n                if (reorderableInstance) {\n                    reorderableInstance.destroy();\n                }\n\n                reorderableInstance = that.tbody ? that.tbody.data(\"kendoReorderable\") : null;\n                if (reorderableInstance) {\n                    reorderableInstance.destroy();\n                }\n\n                if (that.allowPaste) {\n                    const container = that.content || that.table;\n                    container.off(PASTE + NS, that.pasteHandler);\n                    that.unbind(that.pasteHandler);\n                }\n\n                if (that.pasteActionsDropDownList) {\n                    that.pasteActionsDropDownList.destroy();\n                    that.pasteActionsDropDownList = null;\n                }\n\n                if (that.selectable && that.selectable.element) {\n                    that.selectable.destroy();\n\n                    that.clearArea();\n                    that._selectedIds = null;\n\n                    if (that.copyHandler) {\n                        that.wrapper.off(\"keydown\", that.copyHandler);\n                        that.unbind(that.copyHandler);\n                    }\n                    if (that.updateClipBoardState) {\n                        that.unbind(that.updateClipBoardState);\n                        that.updateClipBoardState = null;\n                    }\n                    if (that.clearAreaHandler) {\n                        that.wrapper.off(\"keyup\", that.clearAreaHandler);\n                    }\n                }\n\n                that.selectable = null;\n                that._selectableAggregatesOptions = null;\n\n                if (that.resizable) {\n                    that.resizable.destroy();\n\n                    if (that._resizeUserEvents) {\n                        if (that._resizeHandleDocumentClickHandler) {\n                            $(document).off(\"click\", that._resizeHandleDocumentClickHandler);\n                        }\n                        that._resizeUserEvents.destroy();\n                        that._resizeUserEvents = null;\n                    }\n                    that.resizable = null;\n                }\n\n                that._destroyRowResizing();\n\n                that._destroyVirtualScrollable();\n\n                if (that.editableUserEvents) {\n                    that.editableUserEvents.destroy();\n                    that.editableUserEvents = null;\n                }\n\n                if (that._lockedContentUserEvents) {\n                    that._lockedContentUserEvents.destroy();\n                    that._lockedContentUserEvents = null;\n                }\n\n                that._destroyEditable();\n\n                if (that.dataSource) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler)\n                               .unbind(PROGRESS, that._progressHandler)\n                               .unbind(ERROR, that._errorHandler)\n                               .unbind(SORT, that._clearSortClasses);\n\n                    that._refreshHandler = that._progressHandler = that._errorHandler = that._sortHandler = null;\n                }\n\n                element = that.element\n                    .add(that.wrapper)\n                    .add(that.table)\n                    .add(that.thead)\n                    .add(that.wrapper.find(\">.k-grid-toolbar\"));\n\n                if (that.content) {\n                    element = element\n                            .add(that.content)\n                            .add(that.content.find(\">.k-virtual-scrollable-wrap\"));\n                }\n\n                if (that.scrollables && that.scrollables.first()) {\n                    element = element.add(that.scrollables.first());\n                }\n\n                if (that.lockedHeader) {\n                    that._removeLockedContainers();\n                }\n\n                if (that.pane) {\n                    that.pane.destroy();\n                }\n\n                if (that._isMobile) {\n                    that.wrapper.off(\"transitionend\" + NS);\n                    that.wrapper.off(\"contextmenu\" + NS);\n                }\n\n                if (that.minScreenResizeHandler) {\n                    $(window).off(\"resize\", that.minScreenResizeHandler);\n                }\n\n                that._detachColumnMediaResizeHandler();\n\n                if (that._draggableInstance && that._draggableInstance.element) {\n                    that._draggableInstance.destroy();\n                }\n\n                that._draggableInstance = null;\n\n                if (that._draggableRowsInstance && that._draggableRowsInstance.element) {\n                    that._draggableRowsInstance.destroy();\n                }\n\n                if (that.tbodyContextMenu) {\n                    that.tbodyContextMenu.destroy();\n                }\n\n                if (that.theadContextMenu) {\n                    that.theadContextMenu.destroy();\n                }\n\n                if (that.loader) {\n                    that.loader.destroy();\n                }\n\n                that._draggableRowsInstance = null;\n\n                element.off(NS);\n\n                kendo.destroy(that.wrapper);\n\n                that.rowTemplate =\n                that.altRowTemplate =\n                that.lockedRowTemplate =\n                that.lockedAltRowTemplate =\n                that.detailTemplate =\n                that.footerTemplate =\n                that.groupFooterTemplate =\n                that.lockedGroupFooterTemplate =\n                that.noRecordsTemplate = null;\n\n                that.scrollables =\n                that.thead =\n                that.tbody =\n                that.element =\n                that.table =\n                that.content =\n                that.statusBar =\n                that.footer =\n                that.wrapper =\n                that.lockedTable =\n                that.lockedContent =\n                that.lockedHeader =\n                that.lockedFooter =\n                that._groupableClickHandler =\n                that._groupRows =\n                that._setContentWidthHandler =\n                that.loaderOverlay =\n                that.wrapperClone = null;\n            },\n\n            getOptions: function() {\n                var options = this.options;\n                options.dataSource = null;\n\n                var result = extend(true, {}, this.options);\n                result.columns = kendo.deepExtend([], this.columns);\n\n                var dataSource = this.dataSource;\n\n                var initialData = dataSource.options.data && dataSource._data;\n                dataSource.options.data = null;\n\n                result.dataSource = $.extend(true, {}, dataSource.options);\n\n                dataSource.options.data = initialData;\n\n                result.dataSource.data = initialData;\n                result.dataSource.page = dataSource.page();\n                result.dataSource.filter = $.extend(true, {}, dataSource.filter());\n                result.dataSource.pageSize = dataSource.pageSize();\n                result.dataSource.sort = dataSource.sort();\n                result.dataSource.group = dataSource.group();\n                result.dataSource.aggregate = dataSource.aggregate();\n\n                if (result.dataSource.transport) {\n                    result.dataSource.transport.dataSource = null;\n                }\n\n                if (result.pageable && result.pageable.pageSize) {\n                    result.pageable.pageSize = dataSource.pageSize();\n                }\n\n                return result;\n            },\n\n            setOptions: function(options) {\n                var currentOptions = this.getOptions();\n                kendo.deepExtend(currentOptions, options);\n                if (!options.dataSource) {\n                    currentOptions.dataSource = this.dataSource;\n                } else {\n                  if (options.dataSource.filter) {\n                      currentOptions.dataSource.filter = options.dataSource.filter;\n                  }\n                }\n                var wrapper = this.wrapper;\n                var events = this._events;\n                var element = this.element;\n\n                this.destroy();\n                this.options = null;\n                if (this._isMobile) {\n                    var mobileWrapper = wrapper.closest(kendo.roleSelector(\"pane\")).parent();\n                    mobileWrapper.after(wrapper);\n                    mobileWrapper.remove();\n                    wrapper.removeClass(\"k-grid-mobile\");\n                }\n                if (wrapper[0] !== element[0]) {\n                    wrapper.before(element);\n                    wrapper.remove();\n                }\n                element.empty();\n\n                this.init(element, currentOptions, events);\n                this._setEvents(currentOptions);\n            },\n\n            items: function() {\n                if (this.lockedContent) {\n                    return this._items(this.tbody).add(this._items(this.lockedTable.children(\"tbody\")));\n                } else {\n                    return this._items(this.tbody);\n                }\n            },\n\n            _items: function(container, includeGroupRows) {\n                return container.children().filter(function() {\n                    var tr = $(this);\n                    return (includeGroupRows ? !tr.hasClass(\"k-detail-row\") : !tr.hasClass(GROUPING_ROW)) && !tr.hasClass(\"k-detail-row\") && !tr.hasClass(\"k-group-footer\");\n                });\n            },\n\n            dataItems: function() {\n                var dataItems = kendo.ui.DataBoundWidget.fn.dataItems.call(this);\n                if (this.lockedContent) {\n                    var n = dataItems.length, tmp = new Array(2 * n);\n                    for (var i = n; --i >= 0;) {\n                        tmp[i] = tmp[i + n] = dataItems[i];\n                    }\n                    dataItems = tmp;\n                }\n\n                return dataItems;\n            },\n\n            _destroyColumnAttachments: function() {\n                var that = this;\n\n                that.resizeHandle = null;\n\n                if (!that.thead) {\n                    return;\n                }\n\n                that.thead.add(that.lockedHeader).find(\"th\").each(function() {\n                    var th = $(this),\n                        filterMenu = th.data(\"kendoFilterMenu\"),\n                        sortable = th.data(\"kendoColumnSorter\"),\n                        columnMenu = th.data(\"kendoColumnMenu\");\n\n                    if (filterMenu) {\n                        filterMenu.destroy();\n                    }\n\n                    if (sortable) {\n                        sortable.destroy();\n                    }\n\n                    if (columnMenu) {\n                        columnMenu.destroy();\n                    }\n                });\n            },\n\n            _attachCustomCommandsEvent: function() {\n                var that = this,\n                    columns = leafColumns(that.columns || []),\n                    command,\n                    idx,\n                    length;\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    command = columns[idx].command;\n\n                    if (command) {\n                        attachCustomCommandEvent(that, that.wrapper, command);\n                    }\n                }\n            },\n\n            _aria: function() {\n                var wrapper = this.wrapper,\n                    gridRole = this._hasDetails() ? \"treegrid\" : this.options.navigatable ? \"grid\" : null,\n                    table = this.table,\n                    toolbar = wrapper.find(\".k-grid-toolbar\"),\n                    groupingHeader = wrapper.find(\".k-grouping-header\"),\n                    gridId = this._ariaGridId(),\n                    tableTabindex = table.attr(TABINDEX),\n                    tbodyId, headerGroupId, footerGroupId, tableOwned,\n                    numberOfFixedRows = this.thead.find(TR).length + this.wrapper.find(\".k-grid-footer-wrap table tr\").length,\n                    trailingColumns = this._trailingColumns(),\n                    virtual = this.virtualScroll,\n                    pageable = this.options.pageable,\n                    rowsCount;\n\n                table.attr(TABINDEX, tableTabindex >= 0 ? tableTabindex : 0);\n\n                if (gridRole) {\n                    table.attr(ROLE, gridRole);\n                }\n\n                table.find(\"tbody, thead, tfoot\").attr(ROLE, ROWGROUP);\n                table.find(TR).attr(ROLE, ROW);\n                table.find(\"th\").attr(ROLE, COLUMNHEADER);\n                table.find(\"td\").attr(ROLE, GRIDCELL);\n\n                if ((pageable && this.dataSource.totalPages() > 1) || (virtual && virtual.rows)) {\n                    if (this._groups() > 0) {\n                        rowsCount = -1;\n                    } else if (this._hasDetails()) {\n                        rowsCount = numberOfFixedRows + (this.dataSource.total() * 2);\n                    } else {\n                        rowsCount = numberOfFixedRows + this.dataSource.total();\n                    }\n\n                    table.attr(ARIA_ROWCOUNT, rowsCount);\n                } else if (this._hasDetails()) {\n                    if (this._groups() > 0) {\n                        rowsCount = -1;\n                    } else {\n                        rowsCount = numberOfFixedRows + (this.dataSource.total() * 2);\n                    }\n\n                    table.attr(ARIA_ROWCOUNT, rowsCount);\n                }\n\n                if (rowsCount && rowsCount > 0) {\n                    this._ariaRowIndex();\n                }\n\n                if ((virtual && virtual.columns) ||\n                    (!table.attr(ARIA_COLCOUNT) &&\n                        (table.find(\"td:not([group-header-spanned-hidden]):hidden\").length > 0 ||\n                        wrapper.find(\".k-grid-content-locked td:not([group-header-spanned-hidden]):hidden\").length > 0))) {\n                            table.attr(ARIA_COLCOUNT, trailingColumns + leafColumns(this.columns).length);\n                            this._ariaColumnIndex();\n                }\n\n                if (this.pager) {\n                    this.pager.element.attr(ARIA_CONTROLS, gridId);\n                }\n\n                toolbar.attr({\n                    role: \"toolbar\",\n                    \"aria-label\": this.options.messages.toolbarLabel,\n                    \"aria-controls\": gridId\n                });\n\n                groupingHeader.attr({\n                    role: \"toolbar\",\n                    \"aria-label\": this.options.messages.groupingHeaderLabel,\n                    \"aria-controls\": gridId\n                });\n\n                headerGroupId = this._ariaHeaderFooter(\"header\", \"thead\", \"th, td\", COLUMNHEADER);\n                footerGroupId = this._ariaHeaderFooter(\"footer\", \"tfoot\", \"td\", GRIDCELL);\n\n                if (wrapper.find(\".k-grid-content-locked\").length > 0) {\n                    this._ariaLockedContent();\n                }\n\n                if (!!headerGroupId || !!footerGroupId) {\n                    tbodyId = this.tbody.attr(ID) || kendo.guid();\n                    tableOwned = [headerGroupId, tbodyId, footerGroupId].join(\" \");\n\n                    this.tbody.attr(ID, tbodyId);\n                    table.attr(ARIA_OWNS, tableOwned);\n                }\n\n                if (this.options.groupable) {\n                    this._ariaGroupTitles();\n                }\n            },\n\n            _ariaColumnIndex: function() {\n                var trailingColumns = this._trailingColumns(),\n                    dataVirtual = this.tbody.find(\">tr\").last().find(\"> td[data-virtual]\"),\n                    headerRows = this.thead.find(\">tr\").not(\".k-filter-row\"),\n                    lockedHeaderRows = this.wrapper.find(\".k-grid-header-locked thead > tr\").not(\".k-filter-row\"),\n                    firstIndex = Number.MAX_VALUE,\n                    lastIndex = 0,\n                    lockedLastIndex = 0,\n                    previousVirtual = 0,\n                    nextVirtual = 0,\n                    previousIndex, i, cells, dataIndex, cellsIndex,\n                    eachHeaderCell = function(j, cell) {\n                        var current = cell.getAttribute(\"data-index\"),\n                            currentIndex = Number(current),\n                            lockedParent = $(cell).closest(\".k-grid-header-locked\");\n\n                        if (lockedParent.length === 0 && currentIndex < firstIndex) {\n                            firstIndex = currentIndex;\n                        }\n\n                        if (lockedParent.length > 0 && lockedLastIndex < currentIndex) {\n                            lockedLastIndex = currentIndex;\n                        }\n\n                        if (lockedParent.length === 0 && lastIndex < currentIndex) {\n                            lastIndex = currentIndex;\n                        }\n\n                        if (current !== null) {\n                            cell.setAttribute(ARIA_COLINDEX, Number(currentIndex) + 1);\n                            previousIndex = Number(currentIndex) + 1 + cell.getAttribute(\"colspan\");\n                        } else {\n                            cell.setAttribute(ARIA_COLINDEX, previousIndex + 1);\n                            previousIndex = previousIndex + cell.getAttribute(\"colspan\");\n                        }\n                    };\n\n                if (dataVirtual.length === 2) {\n                    previousVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n                    nextVirtual = Number(dataVirtual[1].getAttribute(\"colspan\"));\n                } else if (dataVirtual.length === 1 && dataVirtual.prev().length === 0) {\n                    previousVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n                } else if (dataVirtual.length === 1 && dataVirtual.prev().length === 1) {\n                    nextVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n                }\n\n                for (i = 0; i < lockedHeaderRows.length; i++) {\n                    previousIndex = 0;\n                    lockedHeaderRows.eq(i).find(\"th\").each(eachHeaderCell);\n                }\n\n                for (i = 0; i < headerRows.length; i++) {\n                    previousIndex = 0;\n                    headerRows.eq(i).find(\"th\").each(eachHeaderCell);\n                }\n\n                for (i = 0; i <= lockedLastIndex; i++) {\n                    dataIndex = i + trailingColumns;\n                    cells = this.wrapper.find(\".k-grid-content-locked tbody > tr > td:nth-child(\" + (i + 1) + \")\");\n                    cells.attr(ARIA_COLINDEX, dataIndex + 1);\n                }\n\n                for (i = previousVirtual; i <= lastIndex - firstIndex - nextVirtual; i++) {\n                    if (previousVirtual === 0 ) {\n                        cellsIndex = i + 1;\n                    } else {\n                        cellsIndex = i - previousVirtual + 2;\n                    }\n\n                    dataIndex = firstIndex + i + trailingColumns;\n\n                    cells = this.tbody.find(\"> tr > td:nth-child(\" + cellsIndex + \")\");\n                    cells.attr(ARIA_COLINDEX, dataIndex + 1);\n                }\n            },\n\n            _ariaGroupTitles: function() {\n                var that = this,\n                    groups = that.dataSource.group(),\n                    ths = that.wrapper.find(\".k-grid-header th\");\n\n                ths.each(function(i, el) {\n                    if (el.getAttribute(\"title\") === that.options.messages.ungroupHeader) {\n                            el.setAttribute(\"title\", that.options.messages.groupHeader);\n                    }\n                });\n\n                if (groups && groups.length > 0) {\n                    groups.forEach(function(group) {\n                        var field = group.field,\n                            el = ths.filter(\"[\" + kendo.attr(\"field\") + \"='\" + field + \"']\");\n\n                        if (el.attr(\"title\") === that.options.messages.groupHeader) {\n                            el.attr(\"title\", that.options.messages.ungroupHeader);\n                        }\n                    });\n                }\n            },\n\n            _ariaHeaderFooter: function(type, group, el, role) {\n                var that = this,\n                    wrapper = that.wrapper,\n                    table = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-wrap table\"),\n                    lockedTable = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-locked table\"),\n                    groupId = \"\",\n                    rowGroup;\n\n                if (table.length > 0) {\n                    rowGroup = table.find(group + \", tbody\");\n                    groupId = rowGroup.attr(ID) || kendo.guid();\n\n                    table.attr(ROLE, NONE);\n                    table.find(TR).attr(ROLE, ROW);\n                    table.find(el).attr(ROLE, role);\n                    rowGroup.attr({\n                        role: ROWGROUP,\n                        id: groupId\n                    });\n                }\n\n                if (lockedTable.length > 0) {\n                    that._ariaLocked(type, group, el, role);\n                }\n\n                lockedTable.find(\"td\").attr(ROLE, GRIDCELL);\n                table.find(\"td\").attr(ROLE, GRIDCELL);\n\n                return groupId;\n            },\n\n            _ariaId: function() {\n                var id = this.element.attr(ID) || \"aria\";\n\n                if (id) {\n                    this._cellId = id + \"_active_cell\";\n                }\n            },\n\n            _ariaGridId: function() {\n                var table = this.table,\n                    gridId = table.attr(ID);\n\n                if (!gridId) {\n                    gridId = kendo.guid();\n                    table.attr(ID, gridId);\n                }\n\n                return gridId;\n            },\n\n            _ariaLocked: function(type, group, el, role) {\n                var that = this,\n                    wrapper = that.wrapper,\n                    table = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-wrap table\"),\n                    lockedTable = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-locked table\"),\n                    rows = table.find(TR),\n                    lockedRows = lockedTable.find(TR);\n\n                lockedTable.attr(ROLE, NONE);\n                lockedTable.find(group + \", tbody\").attr(ROLE, NONE);\n                lockedRows.attr(ROLE, NONE);\n\n                lockedTable.find(el).attr(ROLE, role);\n\n                rows.each(function(i, row) {\n                    var ownedCells = [];\n\n                    ownedCells = that._cellsIds(lockedRows.eq(i).find(el), \"locked_\" + type, i);\n                    ownedCells = ownedCells.concat(that._cellsIds($(row).find(el), type, i));\n\n                    row.setAttribute(ARIA_OWNS, ownedCells.join(\" \"));\n                });\n            },\n\n            _ariaLockedContent: function() {\n                var that = this,\n                    table = that.table,\n                    tableRows = table.find(TR),\n                    lockedTable = that.wrapper.find(\".k-grid-content-locked table\"),\n                    lockedRows = lockedTable.find(TR);\n\n                lockedTable.attr(ROLE, NONE);\n                lockedTable.find(\"tbody\").attr(ROLE, NONE);\n                lockedRows.attr(ROLE, NONE);\n                lockedTable.find(\"td\").attr(ROLE, GRIDCELL);\n\n                tableRows.each(function(i, row) {\n                    var ownedCells = [];\n\n                    ownedCells = that._cellsIds(lockedRows.eq(i).find(\"td\"), \"locked_datacell\", i);\n                    ownedCells = ownedCells.concat(that._cellsIds($(row).find(\"td\"), \"datacell\", i));\n\n                    row.setAttribute(ARIA_OWNS, ownedCells.join(\" \"));\n                });\n            },\n\n            _ariaAddHiddenColIndex: function() {\n                var virtualScroll = this.virtualScroll || {},\n                    columns = this.columns,\n                    table = this.table,\n                    leafColsCount = leafColumns(columns).length;\n\n                if (!virtualScroll.columns && !table.attr(ARIA_COLCOUNT)) {\n                    this._ariaColumnIndex();\n\n                    table.attr(ARIA_COLCOUNT, leafColsCount);\n                }\n            },\n\n            _ariaRemoveHiddenColIndex: function() {\n                var virtualScroll = this.virtualScroll || {},\n                    columns = this.columns,\n                    leafColsCount = leafColumns(columns).length;\n\n                if (!virtualScroll.columns && (leafColsCount === visibleLeafColumns(this.columns).length)) {\n                    this.wrapper.find(\"td, th\").removeAttr(ARIA_COLINDEX);\n\n                    this.table.removeAttr(ARIA_COLCOUNT);\n                }\n            },\n\n            _ariaRowIndex: function() {\n                var headerRows = this.thead.find(\">tr\"),\n                    numberOfHeaderRows = headerRows.length,\n                    bodyRows = this.tbody.find(\">tr\"),\n                    footerRows = this.wrapper.find(\".k-grid-footer-wrap tfoot > tr\"),\n                    totalNumberOfItems = this.dataSource.total(),\n                    previousItems = this.dataSource.skip() || 0,\n                    currentIndex = 1,\n                    previousMaster = false,\n                    i, currentRow;\n\n                if (this._hasDetails()) {\n                    totalNumberOfItems = totalNumberOfItems * 2;\n                    previousItems = previousItems * 2;\n                }\n\n                for (i = 0; i < numberOfHeaderRows; i++) {\n                    headerRows.eq(i).attr(ARIA_ROWINDEX, currentIndex + i);\n                }\n\n                currentIndex = numberOfHeaderRows + previousItems;\n\n                for (i = 0; i < bodyRows.length; i++) {\n                    currentRow = bodyRows.eq(i);\n\n                    if (this._hasDetails() && currentRow.hasClass(\"k-master-row\")) {\n                        if (previousMaster) {\n                            currentIndex = currentIndex + 2;\n                        } else {\n                            currentIndex = currentIndex + 1;\n                        }\n\n                        previousMaster = true;\n                    } else {\n                        currentIndex = currentIndex + 1;\n                        previousMaster = false;\n                    }\n\n                    currentRow.attr(ARIA_ROWINDEX, currentIndex);\n                }\n\n                currentIndex = numberOfHeaderRows + totalNumberOfItems + 1;\n\n                for (i = 0; i < footerRows.length; i++) {\n                    footerRows.eq(i).attr(ARIA_ROWINDEX, currentIndex + i);\n                }\n            },\n\n            _cellsIds: function(elements, prefix, i) {\n                var ownedCells = [],\n                gridId = this._ariaGridId();\n\n                elements.each(function(j, cell) {\n                    var id = cell.getAttribute(ID) || gridId + \"_\" + prefix + \"_\" + i + \"_\" + j;\n\n                    cell.setAttribute(ID, id);\n\n                    ownedCells.push(id);\n                });\n\n                return ownedCells;\n            },\n\n            _trailingColumns: function() {\n                return this._groups() + (this._hasDetails() ? 1 : 0);\n            },\n\n            _element: function() {\n                var that = this,\n                    table = that.element;\n\n                if (!table.is(\"table\")) {\n                    if (that.options.scrollable) {\n                        table = that.element.find(\"> .k-grid-content > table\");\n                    } else {\n                        table = that.element.children(\"table\");\n                    }\n\n                    if (!table.length) {\n                        table = $(\"<table />\").appendTo(that.element);\n                    }\n                }\n\n                table.addClass(\"k-grid-table k-table\");\n                table.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", that.options.size));\n                that.table = table;\n\n                that._wrapper();\n            },\n\n            _createResizeHandle: function(container, th) {\n                var that = this;\n                var indicatorWidth = that.options.columnResizeHandleWidth;\n                var scrollable = that.options.scrollable;\n                var resizeHandle = that.resizeHandle;\n                var halfResizeHandle = (indicatorWidth * 3) / 2;\n                var rtlCorrection = 0;\n                var headerWrap;\n                var ieCorrection;\n                var webkitCorrection;\n                var firefoxCorrection;\n                var leftMargin;\n                var invisibleSpace;\n                var leftBorderWidth;\n                var scrollLeft;\n                var left;\n                var top;\n\n                if (resizeHandle && that.lockedContent && resizeHandle.data(\"th\")[0] !== th[0]) {\n                    resizeHandle.off(NS).remove();\n                    resizeHandle = null;\n                }\n\n                if (!resizeHandle) {\n                    resizeHandle = that.resizeHandle = $('<div class=\"k-resize-handle\"><div class=\"k-resize-handle-inner\"></div></div>');\n                    container.append(resizeHandle);\n                }\n\n                scrollLeft = kendo.scrollLeft(container);\n\n                if (isRtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    scrollLeft = scrollLeft * -1;\n                }\n\n                leftBorderWidth = parseFloat(container.css(\"borderLeftWidth\"));\n\n                left = th.offset().left + scrollLeft - parseFloat(th.css(\"marginLeft\")) - (container.offset().left + leftBorderWidth);\n\n                if (!isRtl) {\n                    left += th[0].offsetWidth;\n               } else {\n                    if (scrollable) {\n                        rtlCorrection = (left <= scrollLeft ? halfResizeHandle : 0);// when shown on first column headers are misaligned due to the width of the resize handler\n                        headerWrap = th.closest(\".k-grid-header-wrap, .k-grid-header-locked\");\n                        invisibleSpace = headerWrap[0].scrollWidth - headerWrap[0].offsetWidth; // the difference between the entire width and the visible area\n                        leftMargin = parseFloat(headerWrap.css(\"marginLeft\"));\n                        ieCorrection = browser.msie ? 2 * kendo.scrollLeft(headerWrap) + leftBorderWidth - leftMargin - rtlCorrection : 0;\n                        webkitCorrection = -rtlCorrection;\n                        firefoxCorrection = browser.mozilla ? leftBorderWidth - leftMargin - rtlCorrection : 0;\n\n                        left -= webkitCorrection + firefoxCorrection + ieCorrection;\n                    }\n                }\n\n                top = th.offset().top - parseFloat(th.css(\"marginTop\")) - (container.offset().top + parseFloat(container.css(\"borderTopWidth\")));\n\n                resizeHandle.css({\n                    top: top, //scrollable ? 0 : heightAboveHeader(that.wrapper),\n                    left: left - halfResizeHandle,\n                    height: outerHeight(th),\n                    width: indicatorWidth * 3 - rtlCorrection\n                })\n                .data(\"th\", th)\n                .show();\n\n                resizeHandle.off(DUBLECLICK + NS).on(DUBLECLICK + NS, function() {\n                    that._autoFitLeafColumn(parseInt(th.attr(kendo.attr(\"index\")), 10));\n                });\n            },\n\n            _positionColumnResizeHandle: function() {\n                var that = this,\n                    lockedHead = that.lockedHeader ? that.lockedHeader.find(\"thead\").first() : $();\n\n                that.thead.add(lockedHead).on(MOUSEMOVE + NS, \"tr:not(.k-filter-row) > th:not([data-resizable=false])\", function(e) {\n                    var button = typeof e.buttons !== \"undefined\" ? e.buttons : (e.which || e.button);\n\n                    var th = $(this);\n                    if (th.hasClass(\"k-group-cell\") || th.hasClass(\"k-hierarchy-cell\")) {\n                        return;\n                    }\n\n                    if (typeof button !== \"undefined\" && button !== 0) {\n                        //do not create a new resize handle if a mouse button is still pressed\n                        //this happens during resizing or before UserEvents trigger \"start\"\n                        return;\n                    }\n\n                    if (th[0].hasAttribute(kendo.attr(COLSPAN))) {\n                        // resizing multi-column headers is not supported\n                        return;\n                    }\n\n                    that._createResizeHandle(th.closest(DIV), th);\n                });\n            },\n\n            _resizeHandleDocumentClick: function(e) {\n                if ($(e.target).closest(\".k-column-active\").length) {\n                    return;\n                }\n\n                $(document).off(e);\n\n                this._resetResizeHandleHeader();\n                this._hideResizeHandle();\n            },\n\n            _resetResizeHandleHeader: function() {\n                var th;\n\n                if (!this.resizeHandle) {\n                    return;\n                }\n\n                th = $(this.resizeHandle).data(\"th\");\n\n                if (th) {\n                    th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS + \",\" + DOT + SVG_ICON_CLASS).show();\n                    th.find(DOT + ORDER_CLASS).show();\n                    th.find(DOT + HEADER_COLUMN_MENU_CLASS).show();\n                    th.find(DOT + FILTER_MENU_CLASS).show();\n                }\n            },\n\n            _hideResizeHandle: function() {\n                if (this.resizeHandle) {\n                    this.resizeHandle.data(\"th\")\n                        .removeClass(\"k-column-active\");\n\n                    if (this.lockedContent && !this._isMobile) {\n                        this.resizeHandle.off(NS).remove();\n                        this.resizeHandle = null;\n                    } else {\n                        this.resizeHandle.hide();\n                    }\n                }\n            },\n\n            _positionColumnResizeHandleTouch: function() {\n                var that = this,\n                    lockedHead = that.lockedHeader ? that.lockedHeader.find(\"thead\").first() : $();\n\n                that._resizeUserEvents = new kendo.UserEvents(lockedHead.add(that.thead), {\n                    filter: \"th:not(.k-group-cell):not(.k-hierarchy-cell)\",\n                    threshold: 10,\n                    minHold: 500,\n                    hold: function(e) {\n                        var th = $(e.target);\n\n                        e.preventDefault();\n\n                        if (that.resizeHandle) {\n                            that.resizeHandle.data(\"th\")\n                                .removeClass(\"k-column-active\");\n                            that._resetResizeHandleHeader();\n                        }\n\n                        th.addClass(\"k-column-active\");\n\n                        th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS + \",\" + DOT + SVG_ICON_CLASS).hide();\n                        th.find(DOT + ORDER_CLASS).hide();\n                        th.find(DOT + HEADER_COLUMN_MENU_CLASS).hide();\n                        th.find(DOT + FILTER_MENU_CLASS).hide();\n\n                        that._createResizeHandle(th.closest(DIV), th);\n\n                        if (!that._resizeHandleDocumentClickHandler) {\n                            that._resizeHandleDocumentClickHandler = that._resizeHandleDocumentClick.bind(that);\n                        }\n\n                        $(document).on(\"click\", that._resizeHandleDocumentClickHandler);\n                    }\n                });\n            },\n\n            resizeColumn: function(column, columnWidth) {\n                var that = this;\n                var isLocked = !!column.locked;\n                var isHidden = !!column.hidden;\n                var options = this.options;\n                var scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n                var index = isLocked ? inArray(column, visibleLockedColumns(visibleLeafColumns(that.columns))) : inArray(column, visibleNonLockedColumns(visibleLeafColumns(that.columns)));\n                var contentTable = isLocked ? that.lockedTable : that.table;\n                var footer = that.footer || $();\n                var header = isLocked ? that.lockedHeader.find(\"table\") : that.thead.closest(\"table\");\n                var columnMinWidth = column.minResizableWidth || 10;\n                var gridWidth = isLocked ? outerWidth(contentTable.find(\"tbody\")) : outerWidth(that.tbody); // IE returns 0 if grid is empty and scrolling is enabled\n                var col;\n\n                if (isHidden) {\n                    column.width = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n                    return;\n                }\n\n                if (that.footer && that.lockedContent) {\n                    footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n                }\n\n                if (options.scrollable) {\n\n                    col = header.find(\"col:not(.k-group-col,.k-hierarchy-col)\").eq(index)\n                        .add(contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index))\n                        .add(footer.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index));\n                } else {\n                    col = contentTable.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index);\n                }\n\n                if (options.scrollable) {\n                    var constrain = false;\n                    var totalWidth = that.wrapper.width() - scrollbar;\n                    var width = columnWidth = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n\n                    if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                        width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n                        if (width < 0) {\n                            width = columnWidth;\n                        }\n                        constrain = true;\n                    }\n\n                    if (width > 10 && width >= columnMinWidth) {\n                        col.css('width', width);\n\n                        if (gridWidth) {\n                            if (constrain) {\n                                width = totalWidth - scrollbar * 2;\n                            } else {\n                                width = gridWidth + (columnWidth - column.width);\n                            }\n\n                            contentTable\n                                .add(header)\n                                .add(footer)\n                                .css('width', width);\n\n                            if (!isLocked) {\n                                that._footerWidth = width;\n                            }\n                        }\n                    }\n\n                that._scrollVirtualWrapperOnColumnResize();\n                } else if (columnWidth > 10 && columnWidth >= columnMinWidth) {\n                    col.css('width', columnWidth);\n                }\n\n                column.width = columnWidth;\n\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n                that._updateStickyColumns();\n            },\n\n            _adjustColWidths: function(contentTable, header, footer, gridWidth) {\n                const colWidths = {};\n\n                contentTable\n                    .add(header)\n                    .add(footer)\n                    .css('width', gridWidth);\n\n                contentTable\n                    .add(header)\n                    .add(footer)\n                    .find(\"col\")\n                    .each((i, col) => {\n                        // Retrieve the actual widths of the elements.\n                        colWidths[i] = $(col).css(\"width\");\n                    });\n\n                contentTable\n                    .add(header)\n                    .add(footer)\n                    .find(\"col\")\n                    .each((i, col) => {\n                        // Ensure that the style=\"width\" attribute on the col elements matches the real width of the columns.\n                        $(col).css(\"width\", colWidths[i]);\n                    });\n            },\n\n            _resizable: function() {\n                var that = this,\n                    options = that.options,\n                    container,\n                    columnStart,\n                    columnWidth,\n                    columnMinWidth,\n                    gridWidth,\n                    isMobile = this._isMobile,\n                    scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0,\n                    isLocked,\n                    col, th;\n\n                if (options.resizable === true || (options.resizable && options.resizable.columns === true)) {\n                    container = options.scrollable ? that.wrapper.find(\".k-grid-header-wrap\").first() : that.wrapper;\n\n                    if (isMobile) {\n                        that._positionColumnResizeHandleTouch(container);\n                    } else {\n                        that._positionColumnResizeHandle(container);\n                    }\n\n                    if (that.resizable) {\n                        that.resizable.destroy();\n                    }\n\n                    that.resizable = new ui.Resizable(container.add(that.lockedHeader), {\n                        handle: (!!options.scrollable ? \"\" : \">\") + \".k-resize-handle\",\n                        hint: function(handle) {\n                            return $('<div class=\"k-grid-resize-indicator\" />').css({\n                                height: outerHeight(handle.data(\"th\")) + that.tbody.attr(\"clientHeight\")\n                            });\n                        },\n                        start: function(e) {\n                            th = $(e.currentTarget).data(\"th\");\n\n                            if (isMobile) {\n                                that._hideResizeHandle();\n                            }\n\n                            let header = th.closest(\"table\"),\n                                index = $.inArray(th[0], leafDataCells(th.closest(\"thead\")).filter(\":visible\"));\n\n                            isLocked = header.parent().hasClass(\"k-grid-header-locked\");\n\n                            let contentTable = isLocked ? that.lockedTable : that.table,\n                                footer = that.footer || $();\n\n                            if (that.footer && that.lockedContent) {\n                                footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n                            }\n\n                            let footerTable = footer.find(\"table\");\n\n                            cursor(that.wrapper, 'col-resize');\n\n                            if (options.scrollable) {\n                                col = header.find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index)\n                                    .add(contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index))\n                                    .add(footer.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index));\n                            } else {\n                                col = contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index);\n                            }\n\n                            let columns = $.map(that.columns, function(a) {\n                                return !a.hidden && ((isLocked && a.locked) || ((!isLocked && !a.locked))) ? a : null;\n                            });\n\n                            columnStart = e.x.location;\n                            columnWidth = outerWidth(th);\n                            columnMinWidth = leafColumns(columns)[index].minResizableWidth || 10;\n                            gridWidth = isLocked ? outerWidth(contentTable.children(\"tbody\")) : outerWidth(that.tbody); // IE returns 0 if grid is empty and scrolling is enabled\n\n                            // fix broken UI in Chrome38+\n                            if (browser.webkit) {\n                                that.wrapper.addClass(\"k-grid-column-resizing\");\n                            }\n\n                            that._adjustColWidths(contentTable, header, footerTable, gridWidth);\n                        },\n                        resize: function(e) {\n                            var rtlMultiplier = isRtl ? -1 : 1,\n                                currentWidth = columnWidth + (e.x.location * rtlMultiplier) - (columnStart * rtlMultiplier);\n\n                            if (options.scrollable) {\n                                var footer;\n                                if (isLocked && that.lockedFooter) {\n                                    footer = that.lockedFooter.children(\"table\");\n                                } else if (that.footer) {\n                                    footer = that.footer.find(\">.k-grid-footer-wrap>table\");\n                                }\n                                if (!footer || !footer[0]) {\n                                    footer = $();\n                                }\n                                var header = th.closest(\"table\");\n                                var contentTable = isLocked ? that.lockedTable : that.table;\n                                var constrain = false;\n                                var totalWidth = that.wrapper.width() - scrollbar;\n                                var width = currentWidth;\n\n                                if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                                    width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n                                    if (width < 0) {\n                                        width = currentWidth;\n                                    }\n                                    constrain = true;\n                                }\n\n                                if (width > 10 && width >= columnMinWidth) {\n                                    col.css('width', width);\n\n                                    if (gridWidth) {\n                                        if (constrain) {\n                                            width = totalWidth - scrollbar * 2;\n                                        } else {\n                                            width = gridWidth + (e.x.location * rtlMultiplier) - (columnStart * rtlMultiplier);\n                                        }\n\n                                        contentTable\n                                            .add(header)\n                                            .add(footer)\n                                            .css('width', width);\n\n                                        if (!isLocked) {\n                                            that._footerWidth = width;\n                                        }\n                                    }\n                                }\n\n                                that._scrollVirtualWrapperOnColumnResize();\n                            } else if (currentWidth > 10 && currentWidth >= columnMinWidth) {\n                                col.css('width', currentWidth);\n                            }\n                        },\n                        resizeend: function() {\n                            var newWidth = outerWidth(th),\n                                column,\n                                header;\n\n                            cursor(that.wrapper, \"\");\n\n                            if (browser.webkit) {\n                                that.wrapper.removeClass(\"k-grid-column-resizing\");\n                            }\n\n                            if (th && columnWidth != newWidth) {\n                                header = that.lockedHeader ? that.lockedHeader.find(\"thead\").first().find(TR).first().add(that.thead.find(TR).first()) : th.parent();\n\n                                var index = th.attr(kendo.attr(\"index\"));\n                                if (!index) {\n                                    index = header.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\").index(th);\n                                }\n                                column = leafColumns(that.columns)[index];\n\n                                column.width = newWidth;\n\n                                that.trigger(COLUMNRESIZE, {\n                                    column: column,\n                                    oldWidth: columnWidth,\n                                    newWidth: newWidth\n                                });\n\n                                that._applyLockedContainersWidth();\n                                that._syncLockedContentHeight();\n                                that._syncLockedHeaderHeight();\n                                that._updateStickyColumns();\n                            }\n\n                            that._resetResizeHandleHeader();\n                            that._hideResizeHandle();\n                            th = null;\n                        }\n                    });\n\n                }\n            },\n\n            // Row resizing functionality below\n            _addLockedRowResizing: function(tr) {\n                var index = tr.index();\n\n                return this.lockedTable.find(TR).eq(index)\n                    .add(this.tbody.find(TR).eq(index));\n            },\n\n            _getMinRowHeight: function(row) {\n                var minHeight = 0;\n\n                row.each((i, el) => {\n                    var currentMinHeight;\n\n                    el.style.height = '';\n                    currentMinHeight = outerHeight(el);\n\n                    if (currentMinHeight > minHeight) {\n                        minHeight = currentMinHeight;\n                    }\n                });\n\n                return minHeight;\n            },\n\n            _cacheRowHeight: function(rows, height) {\n                var that = this;\n\n                if (!that._cachedRowsHeight) {\n                    that._cachedRowsHeight = {};\n                }\n\n                rows.each((i, el) => {\n                    var uid = el.getAttribute(\"data-uid\");\n\n                    that._cachedRowsHeight[uid] = height;\n                });\n            },\n\n            _clearCachedRowsHeight: function(rows) {\n                var that = this;\n\n                if (rows && that._cachedRowsHeight) {\n                    rows.each((i, el) => {\n                        var uid = el.getAttribute(\"data-uid\");\n\n                        delete that._cachedRowsHeight[uid];\n                    });\n                } else {\n                    that._cachedRowsHeight = null;\n                }\n            },\n\n            _mapCachedRowsHeight: function(method, target) {\n                var input = this._cachedRowsHeight,\n                    ds = this.dataSource,\n                    output = {};\n\n                Object.keys(input).forEach((key) => {\n                    var item = ds[method](key);\n\n                    output[item[target]] = input[key];\n                });\n\n                this._cachedRowsHeight = output;\n            },\n\n            _rowResizerDblClick: function() {\n                var that = this,\n                    resizer = that.rowResizer,\n                    row = resizer.data(TR),\n                    oldHeight = outerHeight(row),\n                    newHeight, rows;\n\n                if (row.hasClass(SELECTED)) {\n                    rows = that.select();\n                } else {\n                    rows = row;\n                }\n\n                if (that.lockedTable) {\n                    row = that._addLockedRowResizing(row);\n\n                    if (row.hasClass(SELECTED)) {\n                        rows = that.lockedTable.find(DOT + SELECTED);\n                    } else {\n                        rows = that.lockedTable.find(TR).eq(row.index());\n                    }\n\n                    rows.each((i, el) => {\n                        var rowIndex = el.rowIndex,\n                            rowPair = $(el).add(that.tbody.find(TR).eq(rowIndex)),\n                            pairMinHeight = that._getMinRowHeight(rowPair);\n\n                        rowPair.css(HEIGHT, pairMinHeight);\n                    });\n                } else {\n                    rows.css(HEIGHT, AUTO);\n                }\n\n                that._clearCachedRowsHeight(rows);\n\n                resizer.removeClass(HOVER);\n                resizer.removeClass(ACTIVE);\n\n                newHeight = outerHeight(row);\n\n                if (oldHeight != newHeight) {\n                    that.trigger(ROWRESIZE, {\n                        row,\n                        rows,\n                        oldHeight,\n                        newHeight\n                    });\n                }\n            },\n\n            _setupRowResizer(resizer, row, top) {\n                resizer\n                    .data(TR, row)\n                    .css({\n                        top: top\n                    });\n            },\n\n            _attachRowResizerEvents: function() {\n                var rowResizer = this.rowResizer,\n                    delay = 200,\n                    isIn = false;\n\n                rowResizer\n                    .on(MOUSEDOWN + NS, (e) => {\n                        if (e.button === 0) {\n                            rowResizer.removeClass(HOVER);\n                            rowResizer.addClass(ACTIVE);\n                        }\n                    })\n                    .on(MOUSEUP + NS, (e) => {\n                        if (e.button === 0) {\n                            rowResizer.removeClass(ACTIVE);\n                            rowResizer.addClass(HOVER);\n                        }\n                    })\n                    .on(MOUSEENTER + NS, () => {\n                        isIn = true;\n\n                        setTimeout(() => {\n                            if (isIn) {\n                                rowResizer.addClass(HOVER);\n                            }\n                        }, delay);\n                    })\n                    .on(MOUSELEAVE + NS, () => {\n                        isIn = false;\n                        rowResizer.removeClass(HOVER);\n                    });\n            },\n\n            _getResizerTop: function(tr, container) {\n                var resizer = this.rowResizer,\n                    inner = resizer.find(DOT + ROW_RESIZER)[0],\n                    paddingTop = parseInt(getComputedStyle(resizer[0]).paddingTop);\n\n                return tr.offset().top -\n                    parseFloat(tr.css(\"marginTop\")) -\n                    (container.offset().top + parseFloat(container.css(\"borderTopWidth\"))) -\n                    inner.clientHeight -\n                    paddingTop +\n                    container.scrollTop();\n            },\n\n            _getResizerContainer: function() {\n                var container = this.tbody.closest(DIV);\n\n                if (this.lockedTable) {\n                    container = container.closest(DOT + \"k-grid-container\");\n                }\n\n                return container;\n            },\n\n            _createRowResizer: function(e) {\n                var that = this,\n                    tr = $(e.currentTarget),\n                    targetHeight = e.currentTarget.clientHeight,\n                    positionIntarget = e.offsetY,\n                    rowResizer = that.rowResizer,\n                    previousRow = tr.prev(TR + \":visible\"),\n                    container = that._getResizerContainer(),\n                    top;\n\n                if (!rowResizer) {\n                    rowResizer = that.rowResizer = $('<div class=\"k-resizer-wrap\"><div class=\"k-row-resizer\"></div></div>');\n                    container.append(rowResizer);\n                    that._attachRowResizerEvents();\n\n                    rowResizer.off(DUBLECLICK + NS).on(DUBLECLICK + NS, that._rowResizerDblClick.bind(that));\n                }\n\n                top = that._getResizerTop(tr, container);\n\n                if (previousRow.length !== 0 && targetHeight / 2 > positionIntarget) {\n                    if (!previousRow.hasClass(GROUPING_ROW)) {\n                        that._setupRowResizer(rowResizer, previousRow, top);\n                    }\n                } else {\n                    if (!tr.hasClass(GROUPING_ROW)) {\n                        that._setupRowResizer(rowResizer, tr, top + targetHeight);\n                    }\n                }\n            },\n\n            _detachRowResizerEvents: function() {\n                var rowResizer = this.rowResizer;\n\n                rowResizer\n                    .off(MOUSEDOWN + NS)\n                    .off(MOUSEUP + NS)\n                    .off(MOUSEENTER + NS)\n                    .off(MOUSELEAVE + NS);\n            },\n\n            _mapResizedRows: function(rows, multiSelectionLocked, newHeight) {\n                var that = this;\n\n                rows.each((i, el) => {\n                    var minHeight;\n\n                    if (multiSelectionLocked) {\n                        var rowIndex = el.rowIndex,\n                            pairNew = newHeight,\n                            pairMin = 0,\n                            rowPair = $(el).add(that.tbody.find(TR).eq(rowIndex));\n\n                        rowPair.each((i, r) => {\n                            var currentMinHeight;\n\n                            r.style.height = '';\n                            currentMinHeight = outerHeight(r);\n\n                            if (currentMinHeight > pairMin) {\n                                pairMin = currentMinHeight;\n                            }\n                        });\n\n                        if (pairNew < pairMin) {\n                            pairNew = pairMin;\n\n                            that._clearCachedRowsHeight(rowPair.eq(0));\n                        } else {\n                            that._cacheRowHeight(rowPair.eq(0), pairNew);\n                        }\n\n                        rowPair.css(HEIGHT, pairNew);\n                    } else {\n                        el.style.height = '';\n                        minHeight = outerHeight(el);\n\n                        if (newHeight > minHeight) {\n                            el.style.height = newHeight + PX;\n\n                            that._cacheRowHeight($(el), newHeight);\n                        } else {\n                            that._clearCachedRowsHeight($(el));\n                        }\n                    }\n                });\n            },\n\n            _rowResizing: function() {\n                var that = this,\n                    options = that.options,\n                    container, rowStart, rowHeight, tr;\n\n                if (options.resizable && options.resizable.rows === true) {\n                    that.tbody\n                        .parent()\n                        .add(that.lockedTable)\n                        .on(MOUSEMOVE + NS, \".k-grid-footer tr, .k-table-tbody tr\", that._createRowResizer.bind(that));\n\n                    if (that.rowResizing) {\n                        that.rowResizing.destroy();\n                    }\n\n                    container = that._getResizerContainer();\n\n                    that.rowResizing = new ui.Resizable(container, {\n                        handle: DOT + ROW_RESIZER_WRAP,\n                        start: function(e) {\n                            tr = $(e.currentTarget).data(TR);\n\n                            if (that.lockedTable) {\n                                tr = that._addLockedRowResizing(tr);\n                            }\n\n                            tr.addClass(HOVER);\n\n                            that._detachRowResizerEvents();\n\n                            rowStart = e.y.location;\n                            rowHeight = outerHeight(tr);\n                        },\n                        resize: function(e) {\n                            var newHeight = rowHeight + e.y.location - rowStart,\n                                minHeight = 0;\n\n                            if (tr.length > 1) {\n                                minHeight = that._getMinRowHeight(tr);\n                            }\n\n                            if (newHeight < minHeight) {\n                                newHeight = minHeight;\n                            }\n\n                            tr.css('height', newHeight);\n\n                            that._setupRowResizer(that.rowResizer, tr, that._getResizerTop(tr, container) + newHeight);\n                        },\n                        resizeend: function() {\n                            var newHeight = outerHeight(tr),\n                                multiSelectionLocked = false,\n                                rows;\n\n                            if (tr.hasClass(SELECTED)) {\n                                rows = that.select();\n\n                                if (tr.length > 1 && rows.length > tr.length) {\n                                    rows = that.lockedTable.find(DOT + SELECTED).not(tr);\n                                    multiSelectionLocked = true;\n                                }\n                            } else {\n                                rows = tr;\n                            }\n\n                            that._mapResizedRows(rows, multiSelectionLocked, newHeight);\n\n                            tr.removeClass(HOVER);\n\n                            that.rowResizer.removeClass(ACTIVE);\n                            that.rowResizer.addClass(HOVER);\n                            that._attachRowResizerEvents();\n\n                            if (multiSelectionLocked) {\n                                rows = that.select();\n                            }\n\n                            if (rowHeight != newHeight) {\n                                that.trigger(ROWRESIZE, {\n                                    row: tr,\n                                    rows,\n                                    oldHeight: rowHeight,\n                                    newHeight\n                                });\n                            }\n\n                            tr = null;\n                        }\n                    });\n                }\n            },\n\n            _draggable: function() {\n                var that = this,\n                    reorderable = that.options.reorderable;\n\n                if (reorderable === true || (reorderable && reorderable.columns)) {\n\n                    if (that._draggableInstance) {\n                        that._draggableInstance.destroy();\n                    }\n\n                    var header = that.wrapper.children(\".k-grid-header\");\n\n                    that._draggableInstance = that.wrapper.kendoDraggable({\n                        group: kendo.guid(),\n                        autoScroll: true,\n                        filter: that.content ? \".k-grid-header:first \" + HEADERCELLS : \"table:first>.k-grid-header \" + HEADERCELLS,\n                        dragstart: function() {\n                            header.children(\".k-grid-header-wrap\").off(\"scroll\" + NS + \"scrolling\").on(\"scroll\" + NS + \"scrolling\", function(e) {\n                                if (that.virtualScrollable) {\n                                    kendo.scrollLeft(that.content.find(\">.k-virtual-scrollable-wrap\"), this.scrollLeft);\n                                } else {\n                                    kendo.scrollLeft(that.scrollables.not(e.currentTarget), this.scrollLeft);\n                                }\n                            });\n                        },\n                        dragend: function() {\n                            that._resetResizeHandleHeader();\n                            header.children(\".k-grid-header-wrap\").off(\"scroll\" + NS + \"scrolling\");\n                        },\n                        drag: function() {\n                            that._hideResizeHandle();\n                        },\n                        hint: function(target) {\n                            var title = target.attr(kendo.attr(\"title\"));\n                            if (title) {\n                                title = kendo.htmlEncode(title);\n                            }\n                            return $('<div class=\"k-reorder-clue k-drag-clue\" />')\n                                .html(title || target.attr(kendo.attr(\"field\")) || target.text())\n                                .prepend(kendo.ui.icon({ icon: \"cancel\", iconClass: \"k-drag-status\" }));\n                        }\n                    }).data(\"kendoDraggable\");\n                }\n            },\n\n            _reorderable: function() {\n                let that = this,\n                    reorderable = that.options.reorderable;\n\n                if (reorderable === true || (reorderable && reorderable.columns)) {\n                    if (that.wrapper.data(\"kendoReorderable\")) {\n                        that.wrapper.data(\"kendoReorderable\").destroy();\n                    }\n\n                    that.wrapper.kendoReorderable({\n                        draggable: that._draggableInstance,\n                        dropFilter: HEADERCELLS,\n                        dragOverContainers: function(sourceIndex, targetIndex) {\n                            let columns = flatColumnsInDomOrder(that.columns);\n                            return columns[sourceIndex].lockable !== false && targetParentContainerIndex(columns, that.columns, sourceIndex, targetIndex) > -1;\n                        },\n                        inSameContainer: function(e) {\n                            let sourceParent = $(e.source).parent()[0],\n                                targetParent = $(e.target).parent()[0],\n                                sourceIndex = e.sourceIndex,\n                                targetIndex = e.targetIndex,\n                                flatColumns = flatColumnsInDomOrder(that.columns),\n                                lockable = flatColumns && flatColumns[sourceIndex] && !!flatColumns[sourceIndex].lockable;\n\n                            /* If there are locked columns, check if the grid header is the same instead.\n                            Otherwise the locked/unlocked headers are treated as separate(in the case of column reordering they shouldn't be). */\n                            if (that._isLocked() && lockable) {\n                                sourceParent = $(e.source.closest(\".k-grid-header\"))[0];\n                                targetParent = $(e.target.closest(\".k-grid-header\"))[0];\n                            }\n\n                            return sourceParent === targetParent && targetParentContainerIndex(flatColumns, that.columns, sourceIndex, targetIndex) > -1;\n                        },\n                        change: function(e) {\n                            let columns = flatColumnsInDomOrder(that.columns);\n                            let column = columns[e.oldIndex];\n                            let newIndex = targetParentContainerIndex(columns, that.columns, e.oldIndex, e.newIndex);\n\n                            that.trigger(COLUMNREORDER, {\n                                newIndex: newIndex,\n                                oldIndex: inArray(column, columns),\n                                column: column\n                            });\n\n                            that.reorderColumn(newIndex, column, e.position === \"before\");\n                        }\n                    });\n                }\n            },\n\n            _reorderHeader: function(sources, target, before, container) {\n                var that = this;\n                var sourcePosition = columnPosition(sources[0], that.columns);\n                var destPosition = columnPosition(target, that.columns);\n                var action;\n                var ths;\n\n                var leafs = [];\n                for (var idx = 0; idx < sources.length; idx++) {\n                    if (sources[idx].columns) {\n                        leafs = leafs.concat(sources[idx].columns);\n                    }\n                }\n                if (container) {\n                    ths = elements(container, container, \"tr:eq(\" + sourcePosition.row + \")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n                } else {\n                    ths = elements(that.lockedHeader, that.thead, \"tr:eq(\" + sourcePosition.row + \")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n                }\n\n                var sourceLockedColumns = lockedColumns(sources).length;\n                var targetLockedColumns = lockedColumns([target]).length;\n\n                if (leafs.length) {\n                    if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                        action = \"prepend\";\n                        moveCellsBetweenContainers(sources, target, leafs, that.columns, that.lockedHeader.find(\"thead\"), that.thead, this._groups(), action);\n                    } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                        action = destPosition.cell === 0 && sources[0].columns && !target.columns && !that._group ? \"prepend\" : \"append\";\n                        moveCellsBetweenContainers(sources, target, leafs, nonLockedColumns(that.columns), that.thead, that.lockedHeader.find(\"thead\"), this._groups(), action);\n                    }\n\n                    if (target.columns || sourcePosition.cell - destPosition.cell > 1 || destPosition.cell - sourcePosition.cell > 1) {\n                        target = findReorderTarget(that.columns, target, sources[0], before, that.columns);\n                        if (target) {\n                            if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                                that._reorderHeader(leafs, target, before, that.thead);\n                            } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                                that._reorderHeader(leafs, target, before, that.lockedHead);\n                            } else {\n                                that._reorderHeader(leafs, target, before);\n                            }\n                        }\n                    }\n                } else if (sourceLockedColumns !== targetLockedColumns) { // move between containers\n                    updateCellRowSpan(ths[sourcePosition.cell], that.columns, sourceLockedColumns);\n                }\n\n                reorder(ths, sourcePosition.cell, destPosition.cell, before, sources.length);\n            },\n\n            _reorderContent: function(sources, destination, before) {\n                var that = this;\n                var lockedRows = $();\n                var source = sources[0];\n                var visibleSources = visibleColumns(sources);\n                var sourceIndex = inArray(source, leafColumns(that.columns));\n                var destIndex = inArray(destination, leafColumns(that.columns));\n\n                var colSourceIndex = inArray(visibleSources[0], visibleLeafColumns(that.columns));\n                var colDest = inArray(destination, visibleLeafColumns(that.columns));\n                var lockedCount = lockedColumns(that.columns).length;\n                var isLocked = !!destination.locked;\n                var footer = that.footer || that.wrapper.find(\".k-grid-footer\");\n\n                var headerCol, footerCol, beforeVisibleColumn;\n                headerCol = footerCol = colDest;\n\n                if (destination.hidden) {\n                    var columnsArray = isLocked ? lockedColumns(that.columns) : nonLockedColumns(that.columns);\n\n                    if (visibleColumns(columnsArray).length > 0) {\n                        headerCol = footerCol = colDest = this._findClosestVisibleColumnIndex(columnsArray, destIndex);\n                        beforeVisibleColumn = visibleColumns(columnsArray.slice(destIndex)).length > 0;\n                    }\n                    else {\n                        if (isLocked) {\n                            colDest = that.lockedTable.find(\"colgroup\");\n                            headerCol = that.lockedHeader.find(\"colgroup\");\n                            footerCol = $(that.lockedFooter).find(\">table>colgroup\");\n                        } else {\n                            colDest = that.tbody.prev();\n                            headerCol = that.thead.prev();\n                            footerCol = footer.find(\".k-grid-footer-wrap\").find(\">table>colgroup\");\n                        }\n                    }\n                }\n\n                if (that._hasFilterRow()) {\n                    reorder(that.wrapper.find(\".k-filter-row td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n                }\n\n                if (colSourceIndex >= 0) {\n                    reorder(elements(that.lockedHeader, that.thead.prev(), COLGROUP), colSourceIndex, headerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                }\n\n                if (that.options.scrollable) {\n                    if (colSourceIndex >= 0 && !that._hasVirtualColumns()) {\n                        reorder(elements(that.lockedTable, that.tbody.prev(), COLGROUP), colSourceIndex, colDest, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                    }\n                }\n\n                if (footer && footer.length) {\n                    if (colSourceIndex >= 0) {\n                        reorder(elements(that.lockedFooter, footer.find(\".k-grid-footer-wrap\"), \">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)\"), colSourceIndex, footerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                    }\n                    reorder(footer.find(\".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n                }\n\n                var rows = that.tbody.children(\":not(.k-grouping-row,.k-detail-row)\");\n                if (that.lockedTable) {\n                    if (lockedCount > destIndex) {\n                        if (lockedCount <= sourceIndex) {\n                            updateColspan(\n                                that.lockedTable.find(\">tbody>tr.k-grouping-row:not([hidden])\"),\n                                that.table.find(\">tbody>tr.k-grouping-row:not([hidden])\"),\n                                sources.length\n                            );\n                        }\n                    } else if (lockedCount > sourceIndex) {\n                        updateColspan(\n                            that.table.find(\">tbody>tr.k-grouping-row:not([hidden])\"),\n                            that.lockedTable.find(\">tbody>tr.k-grouping-row:not([hidden])\"),\n                            sources.length\n                        );\n                    }\n\n                    lockedRows = that.lockedTable.find(\">tbody>tr:not(.k-grouping-row,.k-detail-row)\");\n                }\n\n                for (var idx = 0, length = rows.length; idx < length; idx += 1) {\n                    reorder(elements(lockedRows[idx], rows[idx], \">td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n                }\n            },\n\n            _findClosestVisibleColumnIndex: function(columns, columnIndex) {\n                var columnsArray = visibleColumns(columns.slice(columnIndex)).length > 0 ? columns.slice(columnIndex) : columns.slice(0, columnIndex + 1).reverse(),\n                    closestVisibleColumn = visibleColumns(columnsArray)[0];\n\n                return inArray(closestVisibleColumn, visibleColumns(this.columns));\n            },\n\n            _autoFitLeafColumn: function(leafIndex) {\n                this.autoFitColumn(leafColumns(this.columns)[leafIndex]);\n            },\n\n            _hasReorderableRows: function() {\n                return this.options.reorderable && this.options.reorderable.rows;\n            },\n\n            _draggableRows: function() {\n                var that = this,\n                    selectable = that._checkBoxSelection ||\n                        (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell),\n                    clickMoveClick = false,\n                    isMobile = !!(that._isMobile || kendo.support.mobileOS);\n\n                if (that._draggableRowsInstance) {\n                    that._draggableRowsInstance.destroy();\n                }\n\n                if (this.options.reorderable.rows.clickMoveClick !== false && this._hasDragHandleColumn) {\n                    clickMoveClick = true;\n                }\n\n                that._draggableRowsInstance = that.tbody.kendoDraggable({\n                    holdToDrag: isMobile,\n                    showHintOnHold: isMobile,\n                    preventOsHoldFeatures: isMobile,\n                    group: \"row-draggable\",\n                    autoScroll: true,\n                    filter: (selectable ? \" > .k-selected\" : \" > \" + ITEMROW) + (that._hasDragHandleColumn ? \" > .k-drag-cell\" : \"\"),\n                    hint: function(target) {\n                        var hint = $('<div class=\"k-reorder-clue k-drag-clue\">' + kendo.ui.icon({ icon: \"cancel\", iconClass: \"k-drag-status\" }) + '</div>');\n\n                        if (selectable && that.select().length > 1 && that.lockedContent) {\n                            hint.append(\"<span>\" + that.select().length / 2 + \" \" + encode(that.options.messages.itemsSelected) + \"</span>\");\n                        } else if (selectable && that.select().length > 1 && !that.lockedContent) {\n                            hint.append(\"<span>\" + that.select().length + \" \" + encode(that.options.messages.itemsSelected) + \"</span>\");\n                        } else {\n                            var clone = target.closest(ITEMROW).clone();\n                            clone.find(\"td.k-command-cell\").remove();\n                            clone.find(\"td\").each(function(index, elm) {\n                                hint.append(\"<span>\" + elm.innerText + \"&nbsp;</span>\");\n                            });\n                        }\n\n                        return hint;\n                    },\n                    clickMoveClick: clickMoveClick,\n                    cursorOffset: { top: 0, left: 0 }\n                }).data(\"kendoDraggable\");\n            },\n\n            _reorderableRows: function() {\n                var that = this,\n                    selectable = that._checkBoxSelection ||\n                                (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell);\n\n                if (that.tbody.data(\"kendoReorderable\")) {\n                    that.tbody.data(\"kendoReorderable\").destroy();\n                }\n\n                that.tbody.kendoReorderable({\n                    smartPosition: false,\n                    draggable: that._draggableRowsInstance,\n                    dragOverContainers: function(sourceIndex, targetIndex) {\n                        var result = true,\n                            target = $(ITEMROW, that.content).eq(targetIndex);\n\n                        if (selectable) {\n                            result = !target.is(\".k-selected\");\n                        }\n\n                        return result;\n                    },\n                    inSameContainer: function(e) {\n                        if (selectable) {\n                            return !$(e.target).is(\".k-selected\");\n                        }\n\n                        return true;\n                    },\n                    dropFilter: \"> \" + ITEMROW,\n                    allowIcon: \"insert-middle\",\n                    orientation: \"vertical\",\n                    reorderDropCue: $('<div class=\"k-drop-hint k-drop-hint-h\"><div class=\"k-drop-hint-start\"></div><div class=\"k-drop-hint-line\"></div></div>'),\n                    positionDropCue: function(reorderDropCue, dropTarget) {\n                        var firstCellLeft = kendo.getOffset(dropTarget.children(DATA_CELL).eq(0)).left;\n                        reorderDropCue.css({\n                            transform: \"translate(0,-50%)\",\n                            left: firstCellLeft\n                        });\n                    },\n                    externalDraggable: function(e) {\n                        var draggable = e.draggable;\n\n                        if (draggable) {\n                            return draggable;\n                        }\n                    },\n                    change: function(e) {\n                        that._triggerRowRorder(e);\n                    }\n                });\n            },\n\n            _triggerRowRorder: function(e) {\n                var that = this,\n                    args = {\n                        newIndex: e.position === \"after\" ? e.newIndex + 1 : e.newIndex,\n                        oldIndex: e.oldIndex\n                    },\n                    row = e.element,\n                    selectable = that._checkBoxSelection ||\n                    (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell);\n\n                if (selectable && that.select().length > 1) {\n                    args = extend(args, {\n                        rows: that.select()\n                    });\n                } else {\n                    args = extend(args, {\n                        row: row\n                    });\n                }\n\n                if (!that.trigger(ROWREORDER, args)) {\n                    that.reorderRows(selectable ? that.select() : row, args.newIndex);\n                }\n            },\n\n            reorderRowTo: function(row, index) {\n                var that = this,\n                    item = that.dataItem(row),\n                    oldIndex = row.index();\n\n                if (index < 0 || index === oldIndex) {\n                    return;\n                }\n\n                if (!that.trigger(ROWREORDER, {\n                    row: row,\n                    oldIndex: row.index(),\n                    newIndex: index\n                })) {\n                    that.dataSource.pushMove(index, [item]);\n                }\n            },\n\n            reorderRows: function(rows, index) {\n                var that = this,\n                    dataSource = that.dataSource,\n                    rowsLength = that.tbody.children(ITEMROW).length,\n                    targetItem = that.dataItem(that.tbody.children(ITEMROW).eq(index)),\n                    items = rows.toArray().map(function(row) {\n                        return that.dataItem(row);\n                    });\n\n                if (!targetItem) {\n                    // If index is after last row dataItem wouldn't exist\n                    targetItem = that.dataItem(that.tbody.children(ITEMROW).eq(rowsLength - 1));\n                    index = dataSource.indexOf(targetItem) + 1;\n                } else {\n                    index = dataSource.indexOf(targetItem);\n                }\n\n                if (index >= 0) {\n                    that._rowDropping = true;\n                    dataSource.pushMove(index, items);\n                    that._rowDropping = false;\n                }\n            },\n\n            autoFitColumns: function(columns) {\n                var that = this;\n\n                columns = columns || that.columns;\n\n                for (var i = 0; i < columns.length; i++) {\n                    var column = columns[i];\n\n                    if (column.columns) {\n                        that.autoFitColumns(column.columns);\n                    } else {\n                        that.autoFitColumn(column);\n                    }\n                }\n            },\n\n            autoFitColumn: function(column) {\n                var that = this,\n                    options = that.options,\n                    columns = that.columns,\n                    index,\n                    th,\n                    headerTable,\n                    leafCols,\n                    isLocked,\n                    visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).filter(isCellVisible).length : 0,\n                    col,\n                    minWidth,\n                    contentDiv, scrollLeft,\n                    notGroupOrHierarchyCol = \"col:not(.k-group-col):not(.k-hierarchy-col)\",\n                    notGroupOrHierarchyVisibleCell = \"td:visible:not(.k-group-cell):not(.k-hierarchy-cell)\",\n                    menu,\n                    thWidth;\n\n                //  retrieve the column object, depending on the method argument\n                if (typeof column == \"number\") {\n                    column = columns[column];\n                } else if (isPlainObject(column)) {\n                    column = grep(flatColumns(columns), function(item) {\n                        return item === column;\n                    })[0];\n                } else {\n                    column = grep(flatColumns(columns), function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                if (!column || !isVisible(column)) {\n                    return;\n                }\n\n                leafCols = leafColumns(columns);\n                minWidth = column.minResizableWidth;\n                index = inArray(column, leafCols);\n                isLocked = column.locked;\n\n                if (isLocked) {\n                    headerTable = that.lockedHeader.children(\"table\");\n                } else {\n                    headerTable = that.thead.parent();\n                }\n\n                th = headerTable.find(\"[data-index='\" + index + \"']\");\n                menu = th.find('a.k-grid-column-menu, a.k-grid-filter-menu');\n\n                var contentTable = isLocked ? that.lockedTable : that.table,\n                    footer = that.footer || $();\n\n                if (that.footer && that.lockedContent) {\n                    footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n                }\n\n                var footerTable = footer.find(\"table\").first();\n\n                if (that.lockedHeader && !isLocked) {\n                    index -= visibleLocked;\n                }\n\n                // adjust column index, depending on previous hidden columns\n                for (var j = 0; j < leafCols.length; j++) {\n                    if (leafCols[j] === column) {\n                        break;\n                    } else {\n                        if (leafCols[j].hidden) {\n                            index--;\n                        }\n                    }\n                }\n\n                // get col elements\n                if (options.scrollable) {\n                    col = headerTable.find(notGroupOrHierarchyCol).eq(index)\n                        .add(contentTable.children(\"colgroup\").find(notGroupOrHierarchyCol).eq(index))\n                        .add(footerTable.find(\"colgroup\").find(notGroupOrHierarchyCol).eq(index));\n\n                    if (!isLocked) {\n                        contentDiv = contentTable.parent();\n                        scrollLeft = kendo.scrollLeft(contentDiv);\n                    }\n                } else {\n                    col = contentTable.children(\"colgroup\").find(notGroupOrHierarchyCol).eq(index);\n                }\n\n                var tables = headerTable.add(contentTable).add(footerTable);\n\n                if (browser.safari) {\n                    th.css(\"white-space\", \"initial\");\n                }\n\n                var oldColumnWidth = outerWidth(th);\n\n                // reset the table and autofitted column widths\n                // if scrolling is disabled, we need some additional repainting of the table\n                col.width(\"\");\n                tables.css(\"table-layout\", \"fixed\");\n                col.width(AUTO);\n                tables.addClass(\"k-autofitting\");\n                tables.css(\"table-layout\", \"\");\n\n                thWidth = outerWidth(th);\n\n                // +1 is required by IE, regardless of the border widths, otherwise unexpected wrapping may occur with hyphenated text\n                var newColumnWidth = Math.ceil(Math.max(\n                    thWidth,\n                    outerWidth(contentTable.find(\"tr:not(.k-grouping-row)\").eq(0).children(notGroupOrHierarchyVisibleCell).eq(index)),\n                    outerWidth(footerTable.find(TR).eq(0).children(notGroupOrHierarchyVisibleCell).eq(index))\n                )) + 1;\n\n                if (minWidth && minWidth > newColumnWidth) {\n                    newColumnWidth = minWidth;\n                }\n\n                col.width(newColumnWidth);\n                column.width = newColumnWidth;\n\n                if (browser.safari) {\n                    th.css(\"white-space\", \"\");\n                }\n\n                // if all visible columns have widths, the table needs a pixel width as well\n                if (options.scrollable) {\n                    var cols = headerTable.find(\"col\"),\n                        colWidth,\n                        totalWidth = 0;\n                    for (var idx = 0, length = cols.length; idx < length; idx += 1) {\n                        colWidth = cols[idx].style.width;\n                        if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                            totalWidth += parseInt(colWidth, 10);\n                        } else if (cols.eq(idx).hasClass(\"k-group-col\")) {\n                            totalWidth += parseInt(cols.eq(idx).width(), 10);\n                        } else {\n                            totalWidth = 0;\n                            break;\n                        }\n                    }\n\n                    if (totalWidth) {\n                        tables.each(function() {\n                            this.style.width = totalWidth + PX;\n                        });\n                    }\n                }\n\n                tables.removeClass(\"k-autofitting\");\n\n                if (scrollLeft) {\n                    kendo.scrollLeft(contentDiv, scrollLeft);\n                }\n\n                that.trigger(COLUMNRESIZE, {\n                    column: column,\n                    oldWidth: oldColumnWidth,\n                    newWidth: newColumnWidth\n                });\n\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n                that._updateStickyColumns();\n            },\n\n            reorderColumn: function(destIndex, column, before) {\n                var that = this,\n                    parent = columnParent(column, that.columns),\n                    columns = parent ? parent.columns : that.columns,\n                    sourceIndex = inArray(column, columns),\n                    destColumn = columns[destIndex],\n                    virtualScroll = that.virtualScroll || {},\n                    lockChanged,\n                    isLocked = !!destColumn.locked,\n                    lockedCount = lockedColumns(that.columns).length,\n                    groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n                if (sourceIndex === destIndex) {\n                    return;\n                }\n\n                if (!column.locked && isLocked && nonLockedColumns(that.columns).length == 1) {\n                    return;\n                }\n\n                if (column.locked && !isLocked && lockedCount == 1) {\n                    return;\n                }\n\n                that._hideResizeHandle();\n\n                if (before === undefined$1) {\n                    before = destIndex < sourceIndex;\n                }\n\n                var sourceColumns = [column];\n\n                that._reorderHeader(sourceColumns, destColumn, before);\n\n                if (that.lockedHeader) {\n                    removeEmptyRows(that.thead);\n                    removeEmptyRows(that.lockedHeader);\n                }\n\n                if (destColumn.columns) {\n                    destColumn = leafColumns(destColumn.columns);\n                    destColumn = destColumn[before ? 0 : destColumn.length - 1];\n                }\n\n                if (column.columns) {\n                    sourceColumns = leafColumns(column.columns);\n                }\n\n                that._reorderContent(sourceColumns, destColumn, before);\n\n                lockChanged = !!column.locked;\n                lockChanged = lockChanged != isLocked;\n                column.locked = isLocked;\n\n                columns.splice(before ? destIndex : destIndex + 1, 0, column);\n                columns.splice(sourceIndex < destIndex ? sourceIndex : sourceIndex + 1, 1);\n\n                that._updateLockedCols();\n                that._updateCols();\n                that._templates();\n\n                that._updateColumnCellIndex();\n                that._updateColumnSorters();\n\n                if (groupHeaderColumnTemplateColumns.length > 0) {\n                    that._renderGroupRows();\n                }\n                that._updateTablesWidth();\n                that._applyLockedContainersWidth();\n                that._syncLockedHeaderHeight();\n                that._syncLockedContentHeight();\n                that._updateFirstColumnClass();\n                that._updateStickyColumns();\n\n                if (virtualScroll.columns) {\n                    that.refresh();\n                }\n\n                if (!lockChanged) {\n                    return;\n                }\n\n                if (isLocked) {\n                    that.trigger(COLUMNLOCK, {\n                        column: column\n                    });\n                } else {\n                    that.trigger(COLUMNUNLOCK, {\n                        column: column\n                    });\n                }\n            },\n\n            _updateColumnCellIndex: function() {\n                var header;\n                var offset = 0;\n\n                if (this.lockedHeader) {\n                    header = this.lockedHeader.find(\"thead\");\n                    offset = updateCellIndex(header, lockedColumns(this.columns));\n                }\n                updateCellIndex(this.thead, nonLockedColumns(this.columns), offset);\n            },\n\n            lockColumn: function(column) {\n                var columns = this.columns;\n\n                if (typeof column == \"number\") {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                if (!column || column.locked || column.hidden) {\n                    return;\n                }\n\n                if (column.sticky) {\n                    this.unstickColumn(columns.indexOf(column));\n                }\n\n                var index = lockedColumns(columns).length - 1;\n                this.reorderColumn(index, column, false);\n            },\n\n            unlockColumn: function(column) {\n                var columns = this.columns;\n\n                if (typeof column == \"number\") {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                if (!column || !column.locked || column.hidden) {\n                    return;\n                }\n\n                var index = lockedColumns(columns).length;\n                this.reorderColumn(index, column, true);\n            },\n\n            stickColumn: function(column) {\n                var columns = this.columns;\n\n                if (typeof column == \"number\") {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                if (!column || column.sticky || column.hidden) {\n                    return;\n                }\n\n                if (column.locked) {\n                    this.unlockColumn(columns.indexOf(column));\n\n                    if (column.locked) {\n                        return;\n                    }\n                }\n\n                column.sticky = true;\n                this._updateStickyColumns();\n            },\n\n            unstickColumn: function(column) {\n                var columns = this.columns;\n\n                if (typeof column == \"number\") {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                if (!column || !column.sticky || column.locked || column.hidden) {\n                    return;\n                }\n\n                this._removeStickyAttributes([column]);\n                this._removeStickyStyles(stickyColumns(columns));\n\n                column.sticky = false;\n                this._updateStickyColumns();\n\n                if (this._anyStickyColumns() === 0) {\n                    this._templates();\n                    if (this._hasFilterRow()) {\n                        this._updateStickyFilterCells();\n                    }\n                }\n            },\n\n            cellIndex: function(td) {\n                var lockedColumnOffset = 0;\n\n                if (this.lockedTable && !$.contains(this.lockedTable[0], td[0])) {\n                    lockedColumnOffset = leafColumns(lockedColumns(this.columns)).length;\n                }\n\n                return $(td).parent().children('td:not(.k-group-cell,.k-hierarchy-cell)').index(td) + lockedColumnOffset;\n            },\n\n            _modelForContainer: function(container) {\n                container = $(container);\n\n                if (!container.is(TR) && this._editMode() !== \"popup\") {\n                    container = container.closest(TR);\n                }\n\n                var id = container.attr(kendo.attr(\"uid\")) || container.find(\".k-popup-edit-form\").attr(kendo.attr(\"uid\"));\n\n                return this.dataSource.getByUid(id);\n            },\n\n            _calculateColumnIndex: function(cell) {\n                var cellIndex = this.cellIndex(cell);\n                var virtualOffset = 0;\n\n                if (this._hasVirtualColumns()) {\n                    virtualOffset = parseInt($(cell).closest(TR).find(\"td\").first().attr(\"colspan\"), 10);\n                    virtualOffset = (virtualOffset > 1 ? virtualOffset - 1 : 0);\n                }\n\n                return cellIndex + virtualOffset;\n            },\n\n            _editable: function() {\n                let that = this,\n                    editable = that.options.editable,\n                    handler = function() {\n                        let target = activeElement(),\n                            cell = that._editContainer;\n\n                        if (cell && cell[0] && !$.contains(cell[0], target) && cell[0] !== target && !$(target).closest(\".k-animation-container\").length) {\n                            if (that.editable.end()) {\n                                that.closeCell();\n                            } else {\n                                that._scrollVirtualWrapper();\n                            }\n                        }\n                    },\n                    useDoubleTapEditing = !!(that._isMobile || kendo.support.mobileOS);\n\n                that._isEditableEnabled = that._isEditableEnabled !== undefined$1 ? that._isEditableEnabled : !editable.readonly;\n\n                if (!that._isEditableEnabled) {\n                    that._removeEditableClickHandlers();\n                }\n\n                if (editable && that._isEditableEnabled) {\n                    that.wrapper.addClass(\"k-editable\");\n\n                    let mode = that._editMode();\n                    if (mode === \"incell\") {\n                        that.table.add(that.lockedTable)\n                            .on(MOUSEDOWN + NS, NAVROW + \">\" + NAVCELL, function(e) {\n                                let target = $(e.target);\n                                if (that._editMode() === \"incell\" && target.hasClass(\"k-checkbox\") && target.prev().attr(kendo.attr(\"bind\"))) {\n                                    e.preventDefault();\n                                }\n                            });\n\n                        if (editable.update !== false) {\n                            if (isMac) {\n                                that.wrapper\n                                    .on(CLICK + NS, \".k-edit-cell > input[type='checkbox']\", function(e) {\n                                        // checking /unchecking a checkbox does not change the document.activeElement to be the checkbox\n                                        // this is necessary for the \"focusout\" event to be fired\n                                        $(e.target).trigger(\"focus\");\n                                    })\n                                    .on(CLICK + NS, \".k-edit-cell\", function(e) {\n                                        if (!$(e.target).is(\"input\")) {\n                                            $(e.currentTarget).find(\"input[type='checkbox']\").trigger(\"focus\");\n                                        }\n                                    })\n                                    .on(MOUSEDOWN + NS, \"tr:not(.k-grouping-row) > td\", function(e) {\n                                        var editContainer = that._editContainer;\n\n                                        if (editContainer && editContainer[0] && ($.contains(editContainer[0], e.target) || editContainer[0] === e.target)) {\n                                            that._mousedownOnEditCell = true;\n                                        } else {\n                                            that._mousedownOnEditCell = false;\n                                        }\n                                    });\n                            }\n\n                            that.editableUserEvents = new kendo.UserEvents(that.wrapper, {\n                                filter: \"tr:not(.k-grouping-row) > td\",\n                                allowSelection: true,\n                                supportDoubleTap: useDoubleTapEditing,\n                                fastTap: useDoubleTapEditing,\n                                [useDoubleTapEditing ? 'doubleTap' : 'tap']: function(e) {\n                                    var td = $(e.target),\n                                    isLockedCell = that.lockedTable && td.closest(\"table\")[0] === that.lockedTable[0];\n\n                                    that._mousedownOnEditCell = false;\n\n                                    if (td.hasClass(\"k-hierarchy-cell\") ||\n                                        td.hasClass(\"k-detail-cell\") ||\n                                        td.hasClass(\"k-group-cell\") ||\n                                        td.hasClass(\"k-edit-cell\") ||\n                                        td.has(\".k-grid-remove-command\").length ||\n                                        (td.closest(\"tbody\")[0] !== that.tbody[0] && !isLockedCell) ||\n                                        $(e.target).is(\":input\")) {\n                                        return;\n                                    }\n\n                                    if (that.editable) {\n                                        if (that.editable.end()) {\n                                            $(activeElement()).trigger(\"blur\");\n                                            that.closeCell();\n\n                                            if (!that._requestInProgress) {\n                                                that.editCell(td);\n                                            }\n                                        } else {\n                                            that._scrollVirtualWrapper();\n                                        }\n                                    } else {\n                                        that.editCell(td);\n                                    }\n                                }\n                            });\n\n                            that.wrapper.on(\"focusin\" + NS, function() {\n                                // fix focus issue in IE\n                                if (!$.contains(this, activeElement())) {\n                                    clearTimeout(that.timer);\n                                    that.timer = null;\n                                }\n                            })\n                            .on(\"focusout\" + NS, function(e) {\n                                var shouldCloseCell = true;\n\n                                if ((isMac && that._mousedownOnEditCell) || that._virtualColScroll) {\n                                    shouldCloseCell = false;\n                                }\n\n                                that._mousedownOnEditCell = false;\n\n                                if (shouldCloseCell) {\n                                    that.timer = setTimeout(function() {\n                                        handler(e);\n                                    }, 1);\n                                }\n                            });\n                        }\n                    } else {\n                        if (editable.update !== false) {\n                            that._editCommandClickHandler = that._editCommandClick.bind(that);\n                            that.wrapper.on(CLICK + NS , \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-edit-command\", that._editCommandClickHandler);\n\n                            if (that._isVirtualInlineEditable()) {\n                                that.wrapper.on(\"focusout\" + NS, \"tr:not(.k-grouping-row) > td\", function() {\n                                    if (that.editable && !that.editable.end()) {\n                                        that._scrollVirtualWrapper();\n                                    }\n                                });\n                            }\n                        }\n                    }\n\n                    that._removeCommandClickHandler = that._removeCommandClick.bind(that);\n                    that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command\", that._removeCommandClickHandler);\n                }\n            },\n\n            _editCommandClick: function(e) {\n                let that = this,\n                    element = $(e.currentTarget);\n                if (!that._belongsToGrid(element)) {\n                    return;\n                }\n                e.preventDefault();\n                that.editRow(element.closest(TR));\n            },\n\n            _removeCommandClick: function(e) {\n                let that = this,\n                    editable = that.options.editable,\n                    element = $(e.currentTarget);\n                if (!that._belongsToGrid(element)) {\n                    return;\n                }\n\n                if (editable.destroy !== false) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    that.removeRow(element.closest(TR));\n                } else {\n                    //Required for the MVC server wrapper delete button.\n                    e.stopPropagation();\n\n                    if (!that._confirmation()) {\n                        e.preventDefault();\n                    }\n                }\n            },\n\n            editCell: function(cell) {\n                cell = $(cell);\n\n                let that = this,\n                column = leafColumns(that.columns)[that._calculateColumnIndex(cell)],\n                    model = that._modelForContainer(cell);\n\n                that.closeCell();\n\n                if (model && isColumnEditable(column, model) && !column.command) {\n                    if (that.trigger(BEFOREEDIT, { model: model })) {\n                        return;\n                    }\n\n                    that._attachModelChange(model);\n\n                    that._editContainer = cell;\n\n                    if (that._shouldClearEditableState) {\n                        that._clearEditableState();\n                    }\n                    that.editable = cell.addClass(\"k-edit-cell\")\n                        .kendoEditable({\n                            fields: editField(column),\n                            model: model,\n                            size: that.options.size,\n                            target: that,\n                            change: function(e) {\n                                if (that.trigger(SAVE, { values: e.values, container: cell, model: model } )) {\n                                    e.preventDefault();\n                                }\n                            },\n                            skipFocus: (that._isVirtualIncellEditable() || that._hasVirtualColumns()) && that._editableState ? true : false\n\n                        }).data(\"kendoEditable\");\n\n                        let tr = cell.parent().addClass(\"k-grid-edit-row\");\n\n                    if (that.lockedContent) {\n                        adjustRowHeight(tr[0], that._relatedRow(tr).addClass(\"k-grid-edit-row\")[0]);\n                        that._syncLockedScroll();\n                    }\n\n                    that.trigger(EDIT, { container: cell, model: model });\n                }\n            },\n\n            enableEditing: function() {\n                let that = this,\n                    toolbar = that.wrapper.find(\".k-grid-toolbar\");\n\n                if (!that._isEditableEnabled) {\n                    that._isEditableEnabled = true;\n                    that._editable();\n                    let addButton = toolbar.find(\".k-grid-add\").getKendoButton();\n\n                    if (addButton) {\n                        addButton.bind(\"click\", that._createClickHandler);\n                    }\n                }\n            },\n\n            disableEditing: function() {\n                let that = this;\n\n                if (that._isEditableEnabled) {\n                    if (that._editMode() === \"incell\") {\n                        that.closeCell();\n                    } else {\n                        that.cancelRow();\n                    }\n\n                    that._clearEditableState();\n                    that._destroyEditable();\n\n                    if (that.editableUserEvents) {\n                        that.editableUserEvents.destroy();\n                        that.editableUserEvents = null;\n                    }\n\n                    that._removeEditableClickHandlers();\n\n                    that._isEditableEnabled = false;\n                }\n            },\n\n            _removeEditableClickHandlers: function() {\n                let that = this,\n                    toolbar = that.wrapper.find(\".k-grid-toolbar\");\n\n                that.wrapper.off(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-edit-command\", that._editCommandClickHandler);\n                that.wrapper.off(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command\", that._removeCommandClickHandler);\n                toolbar.off(CLICK + NS, \".k-grid-add\", that._createClickHandler);\n\n                let addButton = toolbar.find(\".k-grid-add\").getKendoButton();\n\n                if (addButton) {\n                    addButton.unbind(\"click\");\n                }\n\n                that._editCommandClickHandler = null;\n                that._removeCommandClickHandler = null;\n            },\n\n            _adjustLockedHorizontalScrollBar: function() {\n                var table = this.table,\n                    content = table.parent();\n\n                var scrollbar = table[0].offsetWidth > content[0].clientWidth ? kendo.support.scrollbar() : 0;\n                this.lockedContent.height(content[0].offsetHeight - scrollbar);\n            },\n\n            _syncLockedScroll: function() {\n                this.lockedContent[0].scrollTop = this.content[0].scrollTop;\n                if (this.virtualScrollable) {\n                    this.lockedContent[0].scrollTop = this.wrapper.find(\".k-virtual-scrollable-wrap\")[0].scrollTop;\n                }\n            },\n\n            _syncLockedContentHeight: function() {\n                if (this.lockedTable) {\n                    if (!this.touchScroller) {\n                        this._adjustLockedHorizontalScrollBar();\n                    }\n                    this._adjustRowsHeight(this.table, this.lockedTable);\n                }\n            },\n\n            _syncLockedHeaderHeight: function() {\n                if (this.lockedHeader) {\n                    var lockedTable = this.lockedHeader.children(\"table\");\n                    var table = this.thead.parent();\n\n                    this._adjustRowsHeight(lockedTable, table);\n\n                    syncTableHeight(lockedTable, table);\n                }\n            },\n\n            _syncLockedFooterHeight: function() {\n                if (this.lockedFooter && this.footer && this.footer.length) {\n                    this._adjustRowsHeight(this.lockedFooter.children(\"table\"), this.footer.find(\".k-grid-footer-wrap > table\"));\n                }\n            },\n\n            _destroyEditable: function() {\n                let that = this;\n\n                let destroy = function() {\n                    if (that.editable) {\n\n                        let container = that.editView ? that.editView.element : that._editContainer;\n                        let window = that._editContainer.data(\"kendoWindow\");\n\n                        if (container) {\n                            if (window) {\n                                container = window.wrapper;\n                            }\n                            container.off(CLICK + NS, \".k-grid-cancel-command, button[ref-cancel-button]\", that._editCancelClickHandler);\n                            container.off(CLICK + NS, \".k-grid-save-command, button[ref-update-button]\", that._editUpdateClickHandler);\n                        }\n\n                        that._detachModelChange();\n                        that.editable.destroy();\n                        that.editable = null;\n                        if (window) {\n                            window.destroy();\n                        }\n                        that._editContainer = null;\n                        that._destroyEditView();\n                        that._editableIsClosing = null;\n                    }\n                };\n\n                if (that.editable) {\n                    if (that._editMode() === \"popup\" && !that._isMobile) {\n                        if (that._editableIsClosing) {\n                            that._editContainer.data(\"kendoWindow\").bind(\"deactivate\", destroy);\n                        }\n                        else {\n                            that._editableIsClosing = true;\n                            that._editContainer.data(\"kendoWindow\").bind(\"deactivate\", destroy).close();\n                        }\n                    } else {\n                        destroy();\n                    }\n                }\n                if (that._confirmDialog) {\n                    that._confirmDialog.close();\n                    that._confirmDialog.destroy();\n                    that._confirmDialog = null;\n                }\n            },\n\n            _destroyEditView: function() {\n                if (this.editView) {\n                    this.editView.purge();\n                    this.editView = null;\n                    this.pane.navigate(\"\");\n                }\n            },\n\n            _attachModelChange: function(model) {\n                var that = this;\n\n                that._modelChangeHandler = function(e) {\n                    that._modelChange({ field: e.field, model: this });\n                };\n\n                model.bind(\"change\", that._modelChangeHandler);\n            },\n\n            _detachModelChange: function() {\n                var that = this,\n                    container = that._editContainer,\n                    model = that._modelForContainer(container);\n\n                if (model) {\n                    model.unbind(CHANGE, that._modelChangeHandler);\n                }\n            },\n\n            closeCell: function(isCancel) {\n                let that = this,\n                    cell = that._editContainer,\n                    column,\n                    tr,\n                    model,\n                    errors;\n\n                if (!cell) {\n                    return;\n                }\n\n                model = that._modelForContainer(cell);\n\n                if (isCancel && that.trigger(\"cancel\", { container: cell, model: model })) {\n                    return;\n                }\n\n                that.trigger(CELLCLOSE, { type: isCancel ? \"cancel\" : \"save\", model: model, container: cell });\n\n                cell.removeClass(\"k-edit-cell\");\n                column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n                errors = that.editable && that.editable.validatable && that.editable.validatable.errors();\n\n                if (isCancel && model.dirtyFields && model.dirtyFields[column.field] && errors.length) {\n                    delete model.dirtyFields[column.field];\n                }\n\n                tr = cell.parent().removeClass(\"k-grid-edit-row\");\n\n                if (that.lockedContent) {\n                    that._relatedRow(tr).removeClass(\"k-grid-edit-row\");\n                }\n\n                that._destroyEditable(); // editable should be destroyed before content of the container is changed\n\n                that._displayCell(cell, column, model);\n\n                if (that._shouldClearEditableState) {\n                    that._clearEditableState();\n                }\n\n                that.trigger(\"itemChange\", { item: tr, data: model, ns: ui });\n\n                if (that.lockedContent) {\n                    adjustRowHeight(tr.css(HEIGHT, \"\")[0], that._relatedRow(tr).css(HEIGHT, \"\")[0]);\n                }\n            },\n\n            _displayCell: function(cell, column, dataItem) {\n                var that = this,\n                    state = { storage: {}, count: 0 },\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    tmpl = kendo.template(that._cellTmpl(column, state), settings);\n\n                if (state.count > 0) {\n                    tmpl = tmpl.bind(state.storage);\n                }\n\n                cell.empty().html(tmpl(dataItem));\n            },\n\n            removeRow: function(row) {\n                if (!this._confirmation(row)) {\n                    return;\n                }\n\n                this._removeRow(row);\n            },\n\n            _removeRow: function(row) {\n                var that = this,\n                    model,\n                    modelId,\n                    key,\n                    schema,\n                    mode = that._editMode();\n\n                if (mode !== \"incell\") {\n                    that.cancelRow();\n                }\n\n                row = $(row);\n\n                if (that.lockedContent) {\n                    row = row.add(that._relatedRow(row));\n                }\n\n                row = row.hide();\n                if (that.dataSource._isGroupPaged()) {\n                    that._removeGroupIfEmpty(row);\n                }\n\n                model = that._modelForContainer(row);\n\n                if (model && !that.trigger(REMOVE, { row: row, model: model })) {\n                    schema = that.dataSource.options.schema;\n                    if (that._selectedIds && schema && schema.model) {\n                        modelId = isFunction(that.dataSource.options.schema.model) ? that.dataSource.options.schema.model.fn.idField : that.dataSource.options.schema.model.id;\n                        key = model[modelId];\n                        delete that._selectedIds[key];\n                    }\n\n                    that.dataSource.remove(model);\n\n                    if (mode === \"inline\" || mode === \"popup\") {\n                        that.dataSource.sync();\n                    }\n                } else if (mode === \"incell\") {\n                    that._destroyEditable();\n                }\n            },\n\n            _editMode: function() {\n                let mode = \"incell\",\n                    editable = this.options.editable;\n\n                if (editable !== true) {\n                    if (typeof editable == \"string\") {\n                        mode = editable;\n                    } else {\n                        mode = editable.mode || mode;\n                    }\n                }\n\n                return mode;\n            },\n\n            editRow: function(row) {\n                let model,\n                    that = this;\n\n                if (row instanceof ObservableObject) {\n                    model = row;\n                } else {\n                    row = $(row);\n                    model = that._modelForContainer(row);\n                }\n\n                let mode = that._editMode();\n                let container;\n\n                that.cancelRow();\n\n                if (model) {\n                    row = that.tbody.children(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\");\n                    that._attachModelChange(model);\n\n                    if (mode === \"popup\") {\n                        that._createPopupEditor(model);\n                    } else if (mode === \"inline\") {\n                        that._createInlineEditor(row, model);\n                    } else if (mode === \"incell\") {\n                        $(row).children(DATA_CELL).each(function() {\n                            let cell = $(this);\n                            let column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                            model = that._modelForContainer(cell);\n\n                            if (model && (!model.editable || model.editable(column.field)) && column.field && !column.selectable) {\n                                that.editCell(cell);\n                                return false;\n                            }\n                        });\n                    }\n\n\n                    container = that.editView ? that.editView.element : mode === \"popup\" ? that._editContainer.parent() : that._editContainer;\n\n                    if (container) {\n                        if (!this._editCancelClickHandler) {\n                            this._editCancelClickHandler = this._editCancelClick.bind(this);\n                        }\n\n                        container.on(CLICK + NS, \".k-grid-cancel-command, button[ref-cancel-button]\", this._editCancelClickHandler);\n\n                        if (!this._editUpdateClickHandler) {\n                            this._editUpdateClickHandler = this._editUpdateClick.bind(this);\n                        }\n\n                        container.on(CLICK + NS, \".k-grid-save-command, button[ref-update-button]\", this._editUpdateClickHandler);\n                    }\n                }\n            },\n\n            _editUpdateClick: function(e) {\n                e.preventDefault();\n                e.stopPropagation();\n\n                this.saveRow();\n            },\n\n            _editCancelClick: function(e) {\n                var that = this;\n                var navigatable = that.options.navigatable;\n                var model = that.editable.options.model;\n                var container = that.editView ? that.editView.element : that._editContainer;\n\n                e.preventDefault();\n                e.stopPropagation();\n\n                if (that.trigger(\"cancel\", { container: container, model: model })) {\n                    return;\n                }\n\n                var currentIndex = that.items().index($(that.current()).parent());\n\n                that.cancelRow();\n\n                if (navigatable) {\n                    that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                    focusTable(that.table, true);\n                }\n            },\n\n            _editFields: function(columns, model) {\n                var fields = [];\n                var column;\n\n                for (var idx = 0; idx < columns.length; idx++) {\n                    column = columns[idx];\n                    if (column.selectable || column.command) {\n                        continue;\n                    }\n                    if (isColumnEditable(column, model)) {\n                        fields.push(editField(column));\n                    }\n                }\n                return fields;\n            },\n\n            _createPopupEditor: function(model) {\n                var that = this;\n                var html = '<div ' + kendo.attr(\"uid\") + '=\"' + model.uid + '\" class=\"k-popup-edit-form\"><' + (that._isMobile ? 'ul class=\"k-edit-form-container k-listgroup k-listgroup-flush\">' : 'div class=\"k-edit-form-container\">');\n                var column;\n                var command;\n                var idx;\n                var length;\n                var tmpl;\n                var updateText;\n                var cancelText;\n                var updateIconClass;\n                var cancelIconClass;\n                var tempCommand;\n                var columns = leafColumns(that.columns);\n                var attr;\n                var editMenuGuid = kendo.guid();\n                var editable = that.options.editable;\n                var template = editable.template;\n                var options = isPlainObject(editable) ? editable.window : {};\n                var settings = extend({}, kendo.Template, that.options.templateSettings);\n                var state;\n                var container;\n                var buttonsHTML;\n\n                if (that.trigger(BEFOREEDIT, { model: model })) {\n                    return;\n                }\n\n                options = options || {};\n\n                if (template) {\n                    if (typeof template === STRING) {\n                        template = kendo.unescape(template);\n                    }\n\n                    html += (kendo.template(template, settings))(model);\n\n                    for (idx = 0, length = columns.length; idx < length; idx++) {\n                        column = columns[idx];\n                        if (column.command) {\n                            tempCommand = getCommand(column.command, \"edit\");\n                            if (tempCommand) {\n                                command = tempCommand;\n                            }\n                        }\n                    }\n                } else {\n                    for (idx = 0, length = columns.length; idx < length; idx++) {\n                        column = columns[idx];\n                        if (column.selectable) {\n                            continue;\n                        }\n                        if (!column.command) {\n                            if (that._isMobile) {\n                                html += '<li class=\"k-item k-listgroup-item\">';\n\n                                if (isColumnEditable(column, model)) {\n                                    html += '<label class=\"k-label k-listgroup-form-row\">';\n                                    html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || column.field || \"\") + '</span>';\n                                    html += '<div class=\"k-listgroup-form-field-wrapper\" id=\"' + column.field + '_' + editMenuGuid + '\" ' + kendo.attr(\"container-for\") + '=\"' + column.field + '\"></div>';\n                                    html += '</label>';\n                                } else {\n                                    state = { storage: {}, count: 0 };\n\n                                    tmpl = kendo.template(that._cellTmpl(column, state), settings);\n\n                                    if (state.count > 0) {\n                                        tmpl = tmpl.bind(state.storage);\n                                    }\n\n                                    html += '<label class=\"k-label k-listgroup-form-row k-no-click\">';\n                                    html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || column.field || \"\") + '</span>';\n                                    html += '<span class=\"k-no-editor k-listgroup-form-field-wrapper\">' + tmpl(model) + '</span>';\n                                    html += '</label>';\n                                }\n\n                                html += \"</li>\";\n                            }\n                        } else if (column.command) {\n                            tempCommand = getCommand(column.command, \"edit\");\n                            if (tempCommand) {\n                                command = tempCommand;\n                            }\n                        }\n                    }\n                }\n\n                if (command) {\n                    if (isPlainObject(command)) {\n                        if (isPlainObject(command.text)) {\n                            updateText = command.text.update;\n                            cancelText = command.text.cancel;\n                        }\n                        if (isPlainObject(command.iconClass)) {\n                            updateIconClass = command.iconClass.update;\n                            cancelIconClass = command.iconClass.cancel;\n                        }\n\n                       if (command.attr) {\n                           attr = command.attr;\n                       }\n                    }\n                }\n\n                if (!that._isMobile) {\n                    let updateButton = $(that._createButton({ name: \"update\", text: updateText, attr: attr, iconClass: updateIconClass, size: \"medium\", skipCommandClass: true })).attr(\"ref-update-button\", \"\");\n                    let cancelButton = $(that._createButton({ name: \"canceledit\", text: cancelText, attr: attr, iconClass: cancelIconClass, size: \"medium\", skipCommandClass: true })).attr(\"ref-cancel-button\", \"\");\n\n                    html += '</div>';\n\n                    container = that._editContainer = $(html)\n                    .appendTo(that.wrapper).eq(0)\n                    .kendoWindow(extend({\n                        modal: true,\n                        resizable: false,\n                        draggable: true,\n                        title: that.options.messages.commands.edit || \"Edit\",\n                        _footerTemplate: () =>\n                        `<div class=\"k-actions k-actions-start k-actions-horizontal k-window-actions\">` +\n                            updateButton[0].outerHTML +\n                            cancelButton[0].outerHTML +\n                        `</div>`,\n                        visible: false,\n                        close: function(e) {\n                            if (e.userTriggered) {\n                                //The bellow line is required due to: draggable window in IE, change event will be triggered while the window is closing\n                                e.sender.element.trigger(\"focus\");\n                                if (that.trigger(\"cancel\", { container: container, model: model })) {\n                                    e.preventDefault();\n                                    return;\n                                }\n\n                                var currentIndex = that.items().index($(that.current()).parent());\n\n                                that._editableIsClosing = true;\n                                that.cancelRow();\n                                if (that.options.navigatable) {\n                                    that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                                    focusTable(that.table, true);\n                                }\n                            }\n                        }\n                    }, options));\n                } else {\n                    html += \"</ul></div>\";\n                    that.editView = that.pane.append(\n                        '<div data-' + kendo.ns + 'role=\"view\" class=\"k-grid-edit-form\">' +\n                            '<div data-' + kendo.ns + 'role=\"header\" class=\"k-header\">' +\n                                '<a href=\"\\\\#\" class=\"k-header-cancel k-link k-grid-cancel-command\" title=\"#=messages.cancel#\" ' +\n                                'aria-label=\"#=messages.cancel#\">' + kendo.ui.icon(\"chevron-left\") + '</a>' +\n                                encode(that.options.messages.commands.edit || \"Edit\") +\n                                '<a href=\"\\\\#\" class=\"k-header-done k-link k-grid-save-command\" title=\"#=messages.done#\" ' +\n                                'aria-label=\"#=messages.done#\">' + kendo.ui.icon(\"check\") + '</a>' +\n                            '</div>' +\n                            '<div data-' + kendo.ns + 'role=\"content\" class=\"' + classNames.content + '\">' +\n                                html +\n                            '</div>' +\n                        '</div>');\n                    container = that._editContainer = that.editView.element.find(\".k-popup-edit-form\");\n                }\n\n                if (!template && !that._isMobile) {\n                    that.editable = new ui.Form(that._editContainer.find(\".k-edit-form-container\"), {\n                        items: that._editFields(columns, model),\n                        buttonsTemplate: () => '',\n                        formData: model\n                    }).editable;\n                    that._editContainer.append(buttonsHTML);\n                } else {\n                    that.editable = that._editContainer\n                    .kendoEditable({\n                        fields: (that._isMobile && !template) ? that._editFields(columns, model) : null,\n                        model: model,\n                        clearContainer: false,\n                        target: that,\n                        skipFocus: true\n                    }).data(\"kendoEditable\");\n                }\n\n                that._openPopUpEditor();\n\n                that.trigger(EDIT, { container: container, model: model });\n            },\n\n            _openPopUpEditor: function() {\n                var that = this;\n                var windowEditor = that._editContainer ? that._editContainer.data(\"kendoWindow\") : null;\n                var windowOptions = (that.options.editable || {}).window || {};\n\n                if (!this._isMobile) {\n                    if (windowEditor) {\n                        if (!windowOptions.position) {\n                            windowEditor.center();\n                        }\n\n                        windowEditor.open();\n                    }\n                } else {\n                    this.pane.navigate(this.editView, this._editAnimation);\n                }\n            },\n\n            _createInlineEditor: function(row, model) {\n                var that = this;\n                var column;\n                var cell;\n                var command;\n                var fields = [];\n\n                if (that.trigger(BEFOREEDIT, { model: model })) {\n                    return;\n                }\n\n                if (that.lockedContent) {\n                    row = row.add(that._relatedRow(row));\n                }\n\n                row.children(\":not(.k-group-cell,.k-hierarchy-cell)\").each(function() {\n                    cell = $(this);\n                    column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                    if (!column.command && isColumnEditable(column, model)) {\n                        fields.push(editField(column));\n                        cell.attr(kendo.attr(\"container-for\"), column.field);\n                        cell.empty();\n                    } else if (column.command) {\n                        command = getCommand(column.command, \"edit\");\n                        if (command) {\n                            cell.empty();\n\n                            var updateText,\n                                cancelText,\n                                updateIconClass,\n                                cancelIconClass,\n                                attr;\n\n                            if (isPlainObject(command)) {\n                                    if (isPlainObject(command.text)) {\n                                        updateText = command.text.update;\n                                        cancelText = command.text.cancel;\n                                    }\n                                    if (isPlainObject(command.iconClass)) {\n                                        updateIconClass = command.iconClass.update;\n                                        cancelIconClass = command.iconClass.cancel;\n                                    }\n\n                                if (command.attr) {\n                                    attr = command.attr;\n                                }\n                            }\n\n                            $(that._createButton({ name: \"update\", text: updateText, attr: attr, iconClass: updateIconClass }) +\n                                that._createButton({ name: \"canceledit\", text: cancelText, attr: attr, iconClass: cancelIconClass })).appendTo(cell);\n                        }\n                    }\n                });\n\n                that._editContainer = row;\n                that._editContainer.addClass(\"k-grid-edit-row\");\n\n                if (that._shouldClearEditableState) {\n                    that._clearEditableState();\n                }\n\n                that.editable = new kendo.ui.Editable(that._editContainer, {\n                    target: that,\n                    fields: fields,\n                    size: that.options.size,\n                    model: model,\n                    skipFocus: (that._isVirtualInlineEditable() && that._editableState && (that._editableState.field ? true : false)) || that._hasVirtualColumns(),\n                    clearContainer: false\n                });\n\n                if (row.length > 1) {\n\n                    adjustRowHeight(row[0], row[1]);\n                    that._applyLockedContainersWidth();\n                }\n\n                that.trigger(EDIT, { container: row, model: model });\n            },\n\n            cancelRow: function(notify) {\n                var that = this,\n                    container = that._editContainer,\n                    model;\n\n                if (container) {\n                    model = that._modelForContainer(container);\n\n                    if (!model || (notify && that.trigger(\"cancel\", { container: container, model: model }))) {\n                        return;\n                    }\n\n                    that._destroyEditable();\n\n                    that.dataSource.cancelChanges(model);\n\n                    that._clearEditableState();\n\n                    if (that._editMode() !== \"popup\") {\n                        that._displayRow(container);\n                    } else {\n                        that._displayRow(that.tbody.find(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\"));\n                    }\n\n                    that._aria();\n                }\n            },\n\n            saveRow: function() {\n                var that = this;\n                var container = this._editContainer;\n                var model = this._modelForContainer(container);\n                var deferred = $.Deferred();\n                var valid;\n\n                if (!container || !this.editable) {\n                    return deferred.resolve().promise();\n                }\n\n                valid = that.editable && that.editable.end();\n\n                if (!valid || this.trigger(SAVE, { container: container, model: model })) {\n                    if (!valid) {\n                        that._scrollVirtualWrapper();\n                    }\n\n                    return deferred.reject().promise();\n                }\n\n                that._clearEditableState();\n\n                return this.dataSource.sync();\n            },\n\n            _displayRow: function(row) {\n                    var that = this,\n                    model = that._modelForContainer(row),\n                    related,\n                    newRow,\n                    nextRow,\n                    isSelected = row.hasClass(SELECTED),\n                    isAlt = row.hasClass(\"k-alt\");\n\n                if (model) {\n\n                    if (that.lockedContent) {\n                        related = $((isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model));\n                        kendo.applyStylesFromKendoAttributes(related, [\"display\"]);\n                        that._relatedRow(row.last()).replaceWith(related);\n                    }\n\n                    newRow = $((isAlt ? that.altRowTemplate : that.rowTemplate)(model));\n                    if (!row.is(\":visible\")) {\n                        newRow.hide();\n                    }\n\n                    kendo.applyStylesFromKendoAttributes(newRow, [\"display\"]);\n\n                    if (that._anyStickyColumns()) {\n                       kendo.applyStylesFromKendoAttributes(newRow, [\"left\", \"right\"]);\n                    }\n\n                    row.replaceWith(newRow);\n\n                    that.trigger(\"itemChange\", { item: newRow, data: model, ns: ui });\n\n                    if (related && related.length) {\n                        that.trigger(\"itemChange\", { item: related, data: model, ns: ui });\n                    }\n\n                    if (isSelected && (that.options.selectable || that._checkBoxSelection)) {\n                        that.select(newRow.add(related));\n                    }\n\n                    if (related) {\n                        adjustRowHeight(newRow[0], related[0]);\n                    }\n\n                    nextRow = newRow.next();\n                    if (nextRow.hasClass(\"k-detail-row\") && nextRow.is(\":visible\")) {\n                        kendo.ui.icon(newRow.find(\".k-hierarchy-cell .k-icon,.k-hierarchy-cell .k-svg-icon\"), { icon: \"caret-alt-down\" });\n                    }\n                }\n            },\n\n            _showMessage: function(messages, row) {\n                var that = this;\n\n                if (!that._isMobile) {\n                    // eslint-disable-next-line no-alert\n                    return window.confirm(messages.title);\n                }\n\n                var confirmDialog = that._confirmDialog = new kendo.ui.Confirm($(\"<div />\").appendTo(document.body), {\n                    modal: {\n                        preventScroll: true\n                    },\n                    closable: false,\n                    title: false,\n                    content: messages.title,\n                    messages: {\n                        okText: messages.confirmDelete,\n                        cancel: messages.cancelDelete\n                    },\n                    open: function() {\n                        if (that.content) {\n                            that.content.data(OVERFLOW, that.content.css(OVERFLOW));\n                            that.content.css(OVERFLOW, HIDDEN);\n                        }\n                    },\n                    close: function() {\n                        if (that.content) {\n                            that.content.css(OVERFLOW, that.content.data(OVERFLOW));\n                        }\n                    }\n                });\n\n                confirmDialog.result\n                    .done(function() {\n                        that._removeRow(row);\n                    })\n                    .fail(function() {\n                        var confirmDialog = that._confirmDialog;\n\n                        if (confirmDialog) {\n                            confirmDialog.close();\n                            confirmDialog.destroy();\n                        }\n                    });\n\n                return false;\n            },\n\n            _confirmation: function(row) {\n                var that = this,\n                    editable = that.options.editable,\n                    confirmation = (editable === true || typeof editable === STRING) ? that.options.messages.editable.confirmation : editable.confirmation;\n\n                if (isPlainObject(editable) && typeof editable.mode === STRING && typeof confirmation !== FUNCTION && typeof confirmation !== STRING && confirmation !== false) {\n                    confirmation = that.options.messages.editable.confirmation;\n                }\n\n                if (confirmation !== false && confirmation != null) {\n\n                    if (typeof confirmation === FUNCTION) {\n                        confirmation = confirmation(that._modelForContainer(row));\n                    }\n\n                    return that._showMessage({\n                            confirmDelete: editable.confirmDelete || that.options.messages.editable.confirmDelete,\n                            cancelDelete: editable.cancelDelete || that.options.messages.editable.cancelDelete,\n                            title: confirmation === true ? that.options.messages.editable.confirmation : confirmation\n                        }, row);\n                }\n\n                return true;\n            },\n\n            cancelChanges: function() {\n                var that = this;\n\n                if (that._cachedRowsHeight) {\n                    that._mapCachedRowsHeight(\"getByUid\", \"id\");\n                    that._shouldMapHights = true;\n                }\n\n                that.dataSource.cancelChanges();\n\n                if (that._isVirtualEditable()) {\n                    that._virtualPageToTop(function() {\n                        that.virtualScrollable.scrollToTop();\n                    });\n                }\n            },\n\n            saveChanges: function() {\n                var that = this;\n                var valid = that.editable && that.editable.end();\n\n                if ((valid || !that.editable) && !that.trigger(SAVECHANGES)) {\n                    that.dataSource.sync();\n                } else if (!valid) {\n                    that._scrollVirtualWrapper();\n                }\n            },\n\n            addRow: function() {\n                var that = this,\n                    index,\n                    dataSource = that.dataSource,\n                    mode = that._editMode(),\n                    createAt = that.options.editable.createAt || \"\",\n                    pageSize = dataSource.pageSize(),\n                    view = dataSource.view() || [];\n                var createAtBottom = createAt.toLowerCase() === BOTTOM;\n                var model;\n                var virtualEditable = that._isVirtualEditable();\n\n                if ((that.editable && that.editable.end()) || !that.editable) {\n                    if (mode != \"incell\") {\n                        that.cancelRow();\n                    }\n\n                    index = dataSource.indexOf(view[0]);\n\n                    if (createAtBottom) {\n                        index += view.length;\n\n                        if (pageSize && !dataSource.options.serverPaging && pageSize <= view.length) {\n                            index -= 1;\n                        }\n                    }\n\n                    if (index < 0) {\n                        if (dataSource.page() > dataSource.totalPages()) {\n                            index = (dataSource.page() - 1) * pageSize;\n                        } else {\n                            index = 0;\n                        }\n                    }\n\n                    if (that.options.navigatable && mode == \"incell\") {\n                        that._removeCurrent();\n                    }\n\n                    if (virtualEditable) {\n                        that._virtualAddRow();\n                    } else {\n                        model = dataSource.insert(index, {});\n                        that._editModel(model);\n                    }\n                } else {\n                    that._scrollVirtualWrapper();\n                }\n            },\n\n            _editModel: function(model) {\n                var that = this;\n                var createAt = that.options.editable.createAt || \"\";\n                var mode = that._editMode();\n\n                if (model) {\n                    var id = model.uid,\n                        table = that.lockedContent ? that.lockedTable : that.table,\n                        row = table.find(\"tr[\" + kendo.attr(\"uid\") + \"=\" + id + \"]\"),\n                        cell = row.children(\"td:not(.k-group-cell,.k-hierarchy-cell)\").eq(that._firstEditableColumnIndex(row));\n\n                    if (mode === \"inline\" && row.length) {\n                        that.editRow(row);\n                    } else if (mode === \"popup\") {\n                        that.editRow(model);\n                    } else if (cell.length) {\n                        that.editCell(cell);\n                    }\n\n                    if (createAt.toLowerCase() == \"bottom\" && that.lockedContent) {\n                        //scroll the containers to the bottom\n                        that.lockedContent[0].scrollTop = that.content[0].scrollTop = that.table[0].offsetHeight;\n                    }\n                }\n            },\n\n            _virtualAddRow: function() {\n                var that = this;\n                var createAtBottom = (that.options.editable.createAt || \"\").toLowerCase() === BOTTOM;\n\n                that._clearEditableState();\n\n                if (createAtBottom) {\n                    that._virtualAddRowAtBottom();\n                } else {\n                    that._virtualAddRowAtTop();\n                }\n            },\n\n            _virtualAddRowAtTop: function() {\n                var that = this;\n                var dataSource = that.dataSource;\n                var virtualScrollable = that.virtualScrollable;\n                var model;\n\n                if (dataSource.page() === 1) {\n                    model = dataSource.insert(0, {});\n                    that._editModel(model);\n                    virtualScrollable.scrollToTop();\n                } else {\n                    that._virtualPageToTop(function() {\n                        model = dataSource.insert(0, {});\n                        that._editModel(model);\n                        virtualScrollable.scrollToTop();\n                    });\n                }\n            },\n\n            _virtualAddRowAtBottom: function() {\n                var that = this;\n                var dataSource = that.dataSource;\n                var virtualScrollable = that.virtualScrollable;\n                var index = dataSource.total();\n                var model;\n\n                if (dataSource.at(index - 1) instanceof ObservableObject) {\n                    model = dataSource.insert(index, {});\n\n                    that._virtualPageToBottom(function() {\n                        that._editModel(model);\n                        virtualScrollable.scrollToBottom();\n                    });\n                } else {\n                    that._virtualPageToBottom(function() {\n                        model = dataSource.insert(index, {});\n                        that._editModel(model);\n                        virtualScrollable.scrollToBottom();\n                    });\n                }\n            },\n\n            _virtualPageToTop: function(callback) {\n                var that = this;\n\n                that._virtualPage(0, that.dataSource.take(), function() {\n                    callback();\n                });\n            },\n\n            _virtualPageToBottom: function(callback) {\n                var that = this;\n                var dataSource = that.dataSource;\n                var take = dataSource.take();\n                var total = dataSource.total();\n                var skip = total > take ? (total - take) : 0;\n\n                that._virtualPage(skip, take, function() {\n                    callback();\n                });\n            },\n\n            _virtualPage: function(skip, take, callback) {\n                var that = this;\n\n                if (that._isVirtualEditable()) {\n                    that.virtualScrollable._preventScroll = true;\n                    that.virtualScrollable._page(skip, take, callback);\n                }\n            },\n\n            _firstEditableColumnIndex: function(container) {\n                var that = this,\n                    column,\n                    columns = leafColumns(that.columns),\n                    idx,\n                    length,\n                    model = that._modelForContainer(container);\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n\n                    if (model && (!model.editable || model.editable(column.field)) && !column.command && column.field && column.hidden !== true) {\n                        return idx;\n                    }\n                }\n                return -1;\n            },\n\n            _clickAdd: function(e) {\n                if (e.preventDefault) {\n                    e.preventDefault();\n                }\n\n                this.addRow();\n            },\n\n            _clickCancel: function(e) {\n                if (e.preventDefault) {\n                    e.preventDefault();\n                }\n\n                this.cancelChanges();\n            },\n\n            _clickExcel: function(e) {\n                var that = this;\n                var deferred = $.Deferred();\n\n                if (e.preventDefault) {\n                    e.preventDefault();\n                }\n                that._isExport = true;\n\n                that._progress(true);\n\n                setTimeout(() => {\n                    that.saveAsExcel(deferred);\n                    deferred.always(() => {\n                            that._progress(false);\n                            that._isExport = false;\n                        });\n                }, 1);\n            },\n\n            _clickPdf: function(e) {\n                var that = this;\n\n                if (e.preventDefault) {\n                    e.preventDefault();\n                }\n                that._isExport = true;\n                that._pdfInitialized = true;\n\n                that._progress(true);\n                var promise = that.saveAsPDF();\n\n                if (promise) {\n                    promise.done(function() {\n                        that._progress(false);\n                        that._isExport = false;\n                        that._pdfInitialized = false;\n                    });\n                }\n            },\n\n            _clickSave: function(e) {\n                if (e.preventDefault) {\n                    e.preventDefault();\n                }\n\n                this.saveChanges();\n            },\n\n            _searchInput: function(e) {\n                var that = this,\n                    input = e.currentTarget;\n\n                clearTimeout(that._searchTimeOut);\n\n                that._searchTimeOut = setTimeout(function() {\n                    that._searchTimeOut = null;\n\n                    var options = that.options;\n                    var searchFields = options.search ? options.search.fields : null;\n                    var expression = { filters: [], logic: \"or\" };\n                    var value = input.value;\n\n                    if (!searchFields) {\n                        searchFields = getColumnsFields(options.columns);\n                    }\n\n                    if (that.dataSource.options.endless) {\n                        that.dataSource.options.endless = null;\n                        that._endlessPageSize = that.dataSource.options.pageSize;\n                    }\n\n                    if (value) {\n                        for (var i = 0; i < searchFields.length; i++) {\n                            that._pushExpression(expression.filters, searchFields[i], value);\n                        }\n                    } else {\n                        expression = {};\n                    }\n\n                    that.dataSource.filter(expression);\n                }, 300);\n            },\n\n            _pasteToolbarDropDown: function() {\n                var that = this;\n\n                if (that.wrapper.find(\".k-grid-paste-action\").length) {\n                    that.pasteActionsDropDownList = that.wrapper\n                        .find(\".k-grid-paste-action\")\n                        .kendoDropDownList({\n                            dataSource: [{ value: \"insert\", text: \"Paste (Insert)\" }, { value: \"replace\", text: \"Paste (Replace)\" }],\n                            dataTextField: \"text\",\n                            dataValueField: \"value\",\n                            _allowFilterPaste: false,\n                        }).data(\"kendoDropDownList\");\n                }\n            },\n\n            _pushExpression: function(filters, field, value) {\n                var that = this,\n                    isServerFiltering = that.dataSource.options.serverFiltering,\n                    defaultOperators = {\n                        string: \"contains\",\n                        number: \"gte\",\n                        date: \"gte\",\n                        enums: \"eq\",\n                        boolean: \"eq\"\n                    },\n                    name = field.name || field,\n                    operator = field.operator,\n                    modelInfo = that.dataSource.reader.model && that.dataSource.reader.model.fields,\n                    fieldInfo = modelInfo && modelInfo[name],\n                    parseFn = fieldInfo && fieldInfo.parse,\n                    expression = {\n                        field: name,\n                        operator: operator || defaultOperators.string,\n                        value: value\n                    };\n\n                if ((operator || isServerFiltering) && fieldInfo && kendo.isFunction(parseFn) && parseFn(value) !== null) {\n                    extend(expression, {\n                        operator: operator || defaultOperators[fieldInfo.type],\n                        value: parseFn(value)\n                    });\n                }\n\n                if (isServerFiltering && fieldInfo && kendo.isFunction(parseFn) && parseFn(value) === null) {\n                    return;\n                }\n\n                filters.push(expression);\n            },\n\n            _toolbar: function() {\n                var that = this,\n                    wrapper = that.wrapper,\n                    toolbar = that.options.toolbar,\n\n                    container, items;\n\n                if (toolbar) {\n                    that._createClickHandler = that._addClickHandler = that._clickAdd.bind(that);\n                    that._cancelClickHandler = that._clickCancel.bind(that);\n                    that._saveClickHandler = that._clickSave.bind(that);\n                    that._excelClickHandler = that._clickExcel.bind(that);\n                    that._pdfClickHandler = that._clickPdf.bind(that);\n                    that._serachHandler = that._searchInput.bind(that);\n\n                    container = that.wrapper.find(\".k-grid-toolbar\");\n\n                    if (!container.length) {\n                        container = $('<div class=\"k-grid-toolbar k-toolbar\" />')\n                            .prependTo(wrapper);\n\n                        if (typeof toolbar === STRING || isFunction(toolbar)) {\n                            if (typeof toolbar === STRING) {\n                                toolbar = kendo.template(toolbar).bind(that);\n                            }\n\n                            container.html(toolbar({ grid: that }));\n                            that._attachToolbarClicks();\n                        } else if (isArray(toolbar)) {\n                            items = that._processItems(toolbar);\n\n                            container.kendoToolBar({\n                                navigateOnTab: !that.options.navigatable,\n                                size: that.options.size,\n                                items: items\n                            });\n                        }\n                    } else {\n                        that._attachToolbarClicks();\n                    }\n\n                    container.on(INPUT + NS, \".k-grid-search input\", this._serachHandler);\n                }\n            },\n\n            _attachToolbarClicks: function() {\n                var editable = this.options.editable,\n                    container = this.wrapper.find(\".k-grid-toolbar\");\n\n                if (editable && editable.create !== false) {\n                    container.on(CLICK + NS, \".k-grid-add\", this._createClickHandler)\n                        .on(CLICK + NS, \".k-grid-cancel-changes\", this._cancelClickHandler)\n                        .on(CLICK + NS, \".k-grid-save-changes\", this._saveClickHandler);\n                }\n\n                container.on(CLICK + NS, \".k-grid-excel\", this._excelClickHandler);\n                container.on(CLICK + NS, \".k-grid-pdf\", this._pdfClickHandler);\n            },\n\n            _processItems: function(tools) {\n                var that = this,\n                    options = that.options,\n                    items = [],\n                    messages = this.options.messages.commands,\n                    itemsCollectionHasSpacer = false;\n\n                tools.map(t => {\n                    var command, searchText, icon, className, inputSize, template = \"\";\n\n                    if (typeof t === 'string') {\n                        command = t.toLowerCase();\n                        t = {};\n                        t.text = messages[command] || command;\n                    } else {\n                        command = (t.name || t.text || \"\").toLowerCase();\n                        t.text = t.text || messages[command] || command;\n                    }\n\n                    if (!itemsCollectionHasSpacer && (command === \"search\" || command === \"columns\")) {\n                        itemsCollectionHasSpacer = true;\n                        items.push({\n                            type: \"spacer\"\n                        });\n                    }\n\n                    if (command === \"search\") {\n                        searchText = htmlEncode(t.text || messages.search, true);\n                        icon = t.icon || t.iconClass || \"search\";\n\n                        inputSize = kendo.getValidCssClass(\"k-input-\", \"size\", that.options.size);\n                        template += `<span class='k-searchbox k-input ${inputSize} k-rounded-md k-input-solid k-grid-search'>`;\n                        template += kendo.ui.icon({ icon: icon, iconClass: \"k-input-icon\" });\n                        template += \"<input autocomplete='off' placeholder='\" + searchText + \"' title='\" + searchText + \"' aria-label='\" + searchText + \"' class='k-input-inner' />\";\n                        template += \"</span>\";\n\n                        items.push({\n                            name: \"search\",\n                            overflow: \"never\",\n                            template: template\n                        });\n                    } else if (command === \"paste\" && options.allowPaste) {\n                        items.push({\n                            template: \"<input class='k-grid-paste-action' />\"\n                        });\n                    } else {\n                        if (!command && !(isPlainObject(t) && t.template)) {\n                            throw new Error(\"Custom commands should have name specified\");\n                        }\n\n                        t = extend({ type: \"button\" }, defaultCommands[command], t);\n                        className = t.className || \"k-grid-\" + (command || \"\").replace(/\\s/g, \"\");\n                        t.spriteCssClass = t.icon ? null : t.iconClass;\n\n                        t.attributes = that._processAttr(t.attr);\n                        delete t.attr;\n\n                        if (!!className) {\n                            if (t.attributes[\"class\"] === undefined$1) {\n                                t.attributes[\"class\"] = \"\";\n                            }\n\n                            t.attributes[\"class\"] += (\" \" + className);\n                        }\n\n                        if (t.template) {\n                            delete t.type;\n                        }\n\n                        if (!!that[\"_\" + command + \"ClickHandler\"]) {\n                            t.click = that[\"_\" + command + \"ClickHandler\"];\n                        }\n\n                        items.push(t);\n                    }\n                });\n\n                return items;\n            },\n\n            _processAttr: function(attr) {\n                var attributes = {},\n                    attrArray;\n\n                if (typeof attr === STRING && attr.length > 0) {\n                    attrArray = attr.split(\" \");\n                    attrArray.map(a => {\n                        var keyValue = a.split(\"=\");\n\n                        if (keyValue.length === 2) {\n                            attributes[keyValue[0]] = keyValue[1].replaceAll('\"', \"\").replaceAll(\"'\", \"\");\n                        }\n                    });\n                } else if (isPlainObject(attr)) {\n                    attributes = attr;\n                }\n\n                return attributes;\n            },\n\n            _createButton: function(command) {\n                var button,\n                    template = command.template || COMMANDBUTTONTMPL,\n                    commandName = typeof command === STRING ? command : command.name || command.text,\n                    className = defaultCommands[commandName] ? defaultCommands[commandName].className : \"k-grid-\" + (commandName || \"\").replace(/\\s/g, \"\"),\n                    options = { className: command.skipCommandClass ? \"\" : className, text: commandName, attr: \"\", iconClass: \"\", size: command.size || this.options.size },\n                    messages = this.options.messages.commands,\n                    attributeClassMatch;\n\n                if (!commandName && !(isPlainObject(command) && command.template)) {\n                    throw new Error(\"Custom commands should have name specified\");\n                }\n\n                if (isPlainObject(command)) {\n                    command = extend(true, {}, command);\n\n                    if (command.className && inArray(options.className, command.className.split(\" \")) < 0) {\n                        command.className += \" \" + options.className;\n                    } else if (command.className === undefined$1) {\n                        command.className = options.className;\n                    }\n\n                    if (command.className.indexOf(\"k-primary\") > -1) {\n                        command.className = command.className.replace(\"k-primary\", \"\");\n                        command.themeColor = \"primary\";\n                    }\n\n                    if (commandName === \"edit\") {\n                        command = extend(true, {}, command);\n                        command.text = isPlainObject(command.text) ? command.text.edit : command.text;\n                        command.iconClass = isPlainObject(command.iconClass) ? command.iconClass.edit : command.iconClass;\n                    }\n\n                    if (command.attr) {\n                        if (isPlainObject(command.attr)) {\n                            command.attr = stringifyAttributes(command.attr);\n                        }\n\n                        if (command.attr instanceof Function)\n                        {\n                            let compiledAttributes = command.attr(command);\n                            command.attr = stringifyAttributes(compiledAttributes);\n                        }\n\n                        if (typeof command.attr === STRING) {\n                            attributeClassMatch = command.attr.match(/class=\"(.+?)\"/);\n\n                            if (attributeClassMatch && inArray(attributeClassMatch[1], command.className.split(\" \")) < 0) {\n                                command.className += \" \" + attributeClassMatch[1];\n                            }\n                        }\n                    }\n\n                    options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] }, command);\n                } else {\n                    options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] });\n                }\n\n                button = kendo.template(template)(options);\n\n                if (!command.template) {\n                    return kendo.html.renderButton($(button), options);\n                } else {\n                    return button;\n                }\n            },\n\n            _hasFooters: function() {\n                return !!this.footerTemplate ||\n                    !!this.groupFooterTemplate ||\n                    (this.footer && this.footer.length > 0) ||\n                    this.wrapper.find(\".k-grid-footer\").length > 0;\n            },\n\n            _groupable: function() {\n                var that = this;\n\n                if (that._groupableClickHandler) {\n                    that.table.add(that.lockedTable).off(CLICK + NS, that._groupableClickHandler);\n                } else {\n                    that._groupableClickHandler = function(e) {\n                        var element = $(this),\n                        groupRow = element.closest(TR);\n\n                        var group = that._groupRows ? that._groupRows[that.wrapper.find(DOT + GROUPING_ROW).index(groupRow)] : { };\n\n                        if (element.is(CARET_ALT_DOWN)) {\n                            if (!that.trigger(\"groupCollapse\", { group: group, element: groupRow })) {\n                                that.collapseGroup(groupRow);\n                            }\n                        } else {\n                            if (!that.trigger(\"groupExpand\", { group: group, element: groupRow })) {\n                                that.expandGroup(groupRow);\n                            }\n                        }\n                        e.preventDefault();\n                        e.stopPropagation();\n                    };\n                }\n\n                if (that._isLocked()) {\n                    that.lockedTable.on(CLICK + NS, \".k-grouping-row \" + CARET_ALT_RIGHT + \", .k-grouping-row \" + CARET_ALT_DOWN, that._groupableClickHandler);\n                } else {\n                    that.table.on(CLICK + NS, \".k-grouping-row \" + CARET_ALT_RIGHT + \", .k-grouping-row \" + CARET_ALT_DOWN, that._groupableClickHandler);\n                }\n\n                that._attachGroupable();\n            },\n\n            _attachGroupable: function() {\n                var that = this,\n                    wrapper = that.wrapper,\n                    groupable = that.options.groupable,\n                    draggables = HEADERCELLS + \"[\" + kendo.attr(\"field\") + \"]\",\n                    filter = that.content ? \".k-grid-header:first \" + draggables : \"table:first>.k-grid-header \" + draggables;\n\n                if (groupable && groupable.enabled !== false) {\n                    if (!wrapper.has(\"div.k-grouping-header\")[0]) {\n                        $(\"<div/>\").addClass(\"k-grouping-header\").prependTo(wrapper);\n                    }\n\n                    if (that.groupable) {\n                        that._destroyGroupable();\n                    }\n\n                    if (browser.chrome) {\n                        wrapper.find(\"div.k-grouping-header\").css(\"touch-action\", NONE);\n                        wrapper.find(filter).css(\"touch-action\", NONE);\n                    }\n\n                    that.groupable = new ui.Groupable(wrapper, extend({}, groupable, {\n                        draggable: that._draggableInstance,\n                        groupContainer: \">div.k-grouping-header\",\n                        dataSource: that.dataSource,\n                        draggableElements: filter,\n                        filter: filter,\n                        size: that.options.size,\n                        allowDrag: that.options.reorderable,\n                        enableContextMenu: !!that.options.contextMenu,\n                        removeGroup: function(e) {\n                            that._showUngroupedColumn(e);\n                        },\n                        change: function(e) {\n                            if (that.trigger(\"group\", { groups: e.groups })) {\n                                e.preventDefault();\n                            } else {\n                                that._clearEditableState();\n                                that._hideGroupedColumns(e.groups);\n                                if (that.dataSource.options.endless) {\n                                    that._resetEndless();\n                                }\n                            }\n                        }\n                    }));\n\n                    that._addGroupableOptionsToHeader();\n                }\n            },\n\n            _showUngroupedColumn: function(group) {\n                var columns = leafColumns(this.columns);\n                var i;\n\n                for (i = 0; i < columns.length; i++) {\n                    if (columns[i].uid == group.colID && columns[i].hideOnGroup) {\n                        this.showColumn(columns[i]);\n                    }\n                }\n            },\n\n            _hideGroupedColumns: function(groups) {\n                if (!groups) {\n                    return;\n                }\n                var columns = leafColumns(this.columns);\n                var fields = [];\n                var i;\n\n                for (i = 0; i < groups.length; i++) {\n                    if (groups[i].colID) {\n                        fields.push(groups[i].colID);\n                    }\n                }\n\n                for (i = 0; i < columns.length; i++) {\n                    if (fields.indexOf(columns[i].uid) >= 0 && columns[i].hideOnGroup) {\n                        this.hideColumn(columns[i]);\n                    }\n                }\n            },\n\n            _resetEndless: function() {\n                var that = this;\n                that.dataSource.options.endless = null;\n                that._endlessPageSize = that.dataSource.options.pageSize;\n                that.dataSource._skip = 0;\n                that.dataSource._pageSize = that.dataSource._take = that._endlessPageSize;\n                that.dataSource._page = 1;\n            },\n\n            _addGroupableOptionsToHeader: function() {\n                var that = this;\n                var columns = flatColumns(that.columns);\n                var columnFieldMap = {};\n                var field = \"\";\n                var headerCells = that._headerCells();\n                var cellFieldAttr = \"\";\n                var headerCell;\n                var columnOptions;\n                var i;\n\n                for (i = 0; i < columns.length; i++) {\n                    field = columns[i].field;\n                    columnFieldMap[columns[i].field] = columns[i];\n                }\n\n                for (i = 0; i < headerCells.length; i++) {\n                    headerCell = headerCells.eq(i);\n                    cellFieldAttr = headerCell.attr(kendo.attr(FIELD));\n                    columnOptions = columnFieldMap[cellFieldAttr];\n\n                    if (columnOptions && columnOptions.groupable && columnOptions.groupable.sort) {\n                        headerCell.data(GROUP_SORT, columnOptions.groupable.sort);\n                    }\n                }\n            },\n\n            _destroyGroupable: function() {\n                var that = this;\n\n                if (that.groupable && that.groupable.element) {\n                    that.groupable.element.kendoGroupable(\"destroy\");\n                }\n\n                that.groupable = null;\n\n                that._removeGroupableOptionsFromHeader();\n            },\n\n            _removeGroupableOptionsFromHeader: function() {\n                var that = this;\n                var headerCells = that._headerCells();\n\n                for (var i = 0; i < headerCells.length; i++) {\n                    headerCells.eq(i).removeData(GROUP_SORT);\n                }\n            },\n\n            _continuousItems: function(filter, cell) {\n                if (!this.lockedContent) {\n                    return;\n                }\n\n                var that = this;\n\n                var elements = that.table.add(that.lockedTable);\n\n                var lockedItems = $(filter, elements[0]);\n                var nonLockedItems = $(filter, elements[1]);\n                var columns = cell ? lockedColumns(leafColumns(that.columns)).length : 1;\n                var nonLockedColumns = cell ? leafColumns(that.columns).length - columns : 1;\n                var result = [];\n\n                for (var idx = 0; idx < lockedItems.length; idx += columns) {\n                    push.apply(result, lockedItems.slice(idx, idx + columns));\n                    push.apply(result, [].splice.call(nonLockedItems, 0, nonLockedColumns));\n                }\n\n                return result;\n            },\n\n            _selectable: function() {\n                var that = this,\n                    multi,\n                    cell,\n                    notString = [],\n                    isLocked = that._isLocked(),\n                    selectable = that.options.selectable,\n                    hasSkeletonLoader = that.options.loaderType === \"skeleton\";\n\n                if (selectable && !selectable.checkboxSelection) {\n\n                    if (that.selectable) {\n                        that.selectable.destroy();\n                    }\n\n                    that._selectedIds = {};\n\n                    selectable = kendo.ui.Selectable.parseOptions(selectable);\n\n                    multi = selectable.multiple;\n                    cell = selectable.cell;\n\n                    if (that._hasDetails()) {\n                        notString[notString.length] = \".k-detail-row\";\n                    }\n                    if (that.options.groupable || that._hasFooters() || that._groups()) {\n                        notString[notString.length] = \".k-grouping-row,.k-group-footer\";\n                    }\n\n                    if (hasSkeletonLoader) {\n                        notString[notString.length] = \"[data-skeleton-row]\";\n                    }\n                    notString = notString.join(\",\");\n\n                    if (notString !== \"\") {\n                        notString = \":not(\" + notString + \")\";\n                    }\n\n                    var elements = that.table;\n                    if (isLocked) {\n                        elements = elements.add(that.lockedTable);\n                    }\n\n                    var filter = \">\" + (cell ? SELECTION_CELL_SELECTOR : \"tbody>tr\" + notString);\n                    that.selectable = new kendo.ui.Selectable(elements, {\n                        allowPaste: that.options.allowPaste,\n                        filter: filter,\n                        aria: true,\n                        multiple: multi,\n                        holdToDrag: !!(that._isMobile || kendo.support.mobileOS),\n                        toggleable: !!(that._isMobile || kendo.support.mobileOS),\n                        dragToSelect: that.options.selectable && that.options.selectable.dragToSelect,\n                        changing: function(e) {\n                            if (that.trigger(CHANGING, { target: e.target, originalEvent: e.originalEvent })) {\n                                e.preventDefault();\n                            }\n                        },\n                        change: function(e) {\n                            var selectedValues;\n                            if (!cell) {\n                                that._persistSelectedRows();\n                            }\n\n                            if (that._checkBoxSelection) {\n                                selectedValues = that.selectable.value();\n                                that._uncheckCheckBoxes();\n                                that._checkRows(selectedValues);\n                                if (selectedValues.length && selectedValues.length === that.items().length) {\n                                    that._toggleHeaderCheckState(true);\n                                } else {\n                                    that._toggleHeaderCheckState(false);\n                                }\n                            }\n\n                            that._calculateAggregatesForSelected();\n\n                            if (e.event) {\n                                that.trigger(CHANGE, { cellAggregates: that._cellAggregates });\n                            }\n                        },\n                        useAllItems: isLocked && multi && cell,\n                        relatedTarget: function(items) {\n                            if (cell || !isLocked) {\n                                return;\n                            }\n\n                            var related;\n                            var result = $();\n                            for (var idx = 0, length = items.length; idx < length; idx ++) {\n                                related = that._relatedRow(items[idx]);\n\n                                if (inArray(related[0], items) < 0) {\n                                    result = result.add(related);\n                                }\n                            }\n\n                            return result;\n                        },\n                        continuousItems: function() {\n                            return that._continuousItems(filter, cell);\n                        },\n                        ignoreOverlapped: that.options.selectable && that.options.selectable.ignoreOverlapped,\n                        addIdToRanges: true\n                    });\n\n                    if (that.options.navigatable) {\n                        elements.on(\"keydown\" + NS, function(e) {\n                            var current = that.current();\n                            var target = e.target;\n                            var eventObject = { event: e };\n                            var triggerChange;\n                            var triggerChanging;\n                            var lastSelection;\n                            if (!current) {\n                                return;\n                            }\n                            if (e.keyCode === keys.SPACEBAR && !e.shiftKey && $.inArray(target, elements) > -1 &&\n                                !current.is(\".k-edit-cell,.k-header\") &&\n                                current.parent().is(\":not(.k-grouping-row,.k-detail-row,.k-group-footer)\")) {\n                                    e.preventDefault();\n                                    e.stopPropagation();\n                                    current = cell ? current : current.parent();\n                                    triggerChange = !current.hasClass(SELECTED) || that.selectable.value().length > 1;\n                                    triggerChanging = triggerChange || (multi && current.hasClass(SELECTED) && e.ctrlKey);\n\n                                    if (triggerChanging && that.trigger(CHANGING, { target: current, originalEvent: e })) {\n                                        return;\n                                    }\n\n                                    if (isLocked && !cell) {\n                                        current = current.add(that._relatedRow(current));\n                                    }\n\n                                    if (multi) {\n                                        if (!e.ctrlKey) {\n                                            that.selectable.clear();\n                                        } else {\n                                            if (current.hasClass(SELECTED)) {\n                                                that._deselectCheckRows(current);\n                                                that._calculateAggregatesForSelected();\n                                                that.trigger(CHANGE, { cellAggregates: that._cellAggregates });\n                                                return;\n                                            }\n                                        }\n                                    } else {\n                                        that.selectable.clear();\n                                    }\n                                    if (!cell) {\n                                        that.selectable._lastActive = current;\n                                    }\n                                    that.selectable.value(current);\n                                    if (triggerChange) {\n                                        that._calculateAggregatesForSelected();\n                                        that.trigger(CHANGE, { cellAggregates: that._cellAggregates });\n                                    }\n                            } else if (!cell &&\n                                ($(target).is(\"td\") || ($(target).is(\"table\") && inArray(target, this._navigatableTables))) &&\n                              ((e.shiftKey && e.keyCode == keys.LEFT) ||\n                               (e.shiftKey && e.keyCode == keys.RIGHT) ||\n                               (e.shiftKey && e.keyCode == keys.UP) ||\n                               (e.shiftKey && e.keyCode == keys.DOWN) ||\n                               (e.keyCode === keys.SPACEBAR && e.shiftKey))) {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                current = current.parent();\n\n                                if (that.trigger(CHANGING, { target: current, originalEvent: e })) {\n                                    return;\n                                }\n\n                                lastSelection = that.selectable.value();\n\n                                if (isLocked) {\n                                    current = current.add(that._relatedRow(current));\n                                }\n\n                                if (multi) {\n                                    if (!that.selectable._lastActive) {\n                                        that.selectable._lastActive = current;\n                                    }\n                                    that.selectable.selectRange(that.selectable._firstSelectee(), current);\n\n                                    if (!compareElements(lastSelection, that.selectable.value())) {\n                                        that.trigger(CHANGE, eventObject);\n                                    }\n                                } else if (!current.hasClass(SELECTED)) {\n                                    that.selectable.clear();\n                                    that.selectable.value(current);\n                                    that._calculateAggregatesForSelected();\n                                    that.trigger(CHANGE, { cellAggregates: that._cellAggregates });\n                                }\n                            }\n                        });\n                    }\n                }\n            },\n\n            _pasteReplaceHandler: function(plain) {\n                var that = this,\n                    rows,\n                    current,\n                    currentRow,\n                    currentRowUid,\n                    currentField,\n                    uids = [];\n\n                current = that.select().first();\n\n                if (!current.length) {\n                    return;\n                }\n\n                if (current.is(TR)) {\n                    current = current.children(TD).first();\n                }\n\n                rows = plain.split(\"\\n\").filter(f => f);\n                currentRow = current.closest(\"tr\");\n                currentField = that.thead.find(\"th:eq(\" + current.index() + \")\").data(\"field\");\n                currentRowUid = currentRow.data(\"uid\");\n\n                uids.push(currentRowUid);\n\n                currentRow.nextAll(ITEMROW).slice(0, rows.length - 1).each((i, item) => {\n                    uids.push($(item).data(\"uid\"));\n                });\n\n                that._executePaste(rows, uids, null, currentField);\n            },\n\n            _pasteInsertHandler: function(plain) {\n                var that = this,\n                    dataSource = that.dataSource,\n                    rows,\n                    current,\n                    currentRow,\n                    dataItemIndex,\n                    dataItem;\n\n                current = that.select().first();\n\n                if (!current.length) {\n                    return;\n                }\n\n                if (current.is(TR)) {\n                    current = current.children(TD).first();\n                }\n\n                rows = plain.split(\"\\n\").filter(f => f);\n                currentRow = current.closest(\"tr\");\n                dataItem = that.dataItem(currentRow);\n                dataItemIndex = dataSource.indexOf(dataItem) + 1;\n\n                that._executePaste(rows, null, dataItemIndex, null);\n            },\n\n            _executePaste: function(rows, uids, index, currentField) {\n                var that = this,\n                    dataSource = that.dataSource,\n                    update = uids || false,\n                    dataItem,\n                    row,\n                    cells,\n                    cell,\n                    column,\n                    field,\n                    selectedUids = that._getSelectedRowUids(),\n                    selectedColumnFields = that._getSelectedColumnFields(),\n                    changedItems = [],\n                    visibleColumns = visibleLeafColumns(that.columns).filter(col => !col.selectable && !col.draggable & !col.command),\n                    startingIndex = currentField && visibleColumns.map(c => c.field).indexOf(currentField);\n\n                // If only one value is copied and multiple cells are selected, replace all values in all selected cells with the copied value.\n                if (rows.length === 1 && rows[0].split(\"\\t\").length === 1 && update) {\n                    for (let j = 0; j < selectedUids.length; j++) {\n                        const uid = selectedUids[j];\n                        dataItem = dataSource.getByUid(uid);\n                        cell = rows[0].split(\"\\t\")[0];\n\n                        for (let j = 0; j < selectedColumnFields.length; j++) {\n                            field = selectedColumnFields[j];\n                            if (dataItem && cell) {\n                                dataItem.set(field, cell);\n                            }\n                        }\n\n                        if (dataItem && dataItem.dirty) {\n                            changedItems.push(dataItem);\n                        }\n                    }\n                } else {\n                    // If more than one value is copied, proceed with the standard replace.\n                    for (let i = 0; i < rows.length; i++) {\n                        row = rows[i];\n                        cells = row.split(\"\\t\");\n                        dataItem = update ? dataSource.getByUid(uids[i]) : dataSource.insert(index + i, {});\n\n                        for (let j = 0; j < cells.length; j++) {\n                            cell = cells[j].replace(/\\r/, \"\");\n                            column = visibleColumns[j + startingIndex || 0];\n\n                            if (column && dataItem && cell) {\n                                field = column.field;\n                                dataItem.set(field, cell);\n                            }\n                        }\n\n                        if (dataItem && dataItem.dirty) {\n                            changedItems.push(dataItem);\n                        }\n                    }\n                }\n                that.trigger(PASTE, { items: changedItems, type: update ? \"replace\" : \"insert\" });\n            },\n\n            _pasteKeyboardHandler: function(e) {\n                var that = this,\n                    current = that.current(),\n                    clipBoardData = e.originalEvent.clipboardData,\n                    operation = (that.pasteActionsDropDownList && that.pasteActionsDropDownList.value()) || \"insert\",\n                    rowUid,\n                    cellIndex,\n                    plain;\n\n                if ($(e.target).is(\".k-edit-cell input:visible\")) {\n                    return;\n                }\n\n                if (clipBoardData) {\n                    e.preventDefault();\n                    plain = clipBoardData.getData(\"text\").trimEnd();\n\n                    // If the copied value consists only of white spaces or new lines, reduce it to a single white space.\n                    if (isEmptyString(plain)) {\n                        plain = \" \";\n                    }\n\n                    if (current && current.length) {\n                        cellIndex = current.index();\n                        rowUid = current.closest(TR).data(\"uid\");\n                    }\n\n                    if (operation === \"replace\") {\n                        that._pasteReplaceHandler(plain);\n                    }\n\n                    if (operation === \"insert\") {\n                        that._pasteInsertHandler(plain);\n                    }\n\n                    // Restore the focus to the last focused cell.\n                    if (cellIndex && rowUid) {\n                        that._currentRowIndex = that.wrapper.find(TR + \"[data-uid='\" + rowUid + \"']\").index();\n                        that._restoreCurrent(cellIndex);\n                    }\n                }\n            },\n\n            _paste: function() {\n                var that = this,\n                    options = that.options,\n                    selectable = options.selectable,\n                    allowPaste = options.allowPaste;\n\n                if (allowPaste && selectable) {\n                    that.pasteHandler = that._pasteKeyboardHandler.bind(that);\n                    const container = that.content || that.table;\n                    container.on(PASTE + NS, that.pasteHandler);\n\n                    if (that.options.toolbar) {\n                        that._pasteToolbarDropDown();\n                    }\n                }\n            },\n\n            _clipboard: function() {\n                var options = this.options;\n                var selectable = options.selectable;\n\n                if (selectable && options.allowCopy) {\n                    var grid = this;\n                    if (!options.navigatable) {\n                        grid.table.attr(TABINDEX, 0);\n\n                        grid.table.add(grid.lockedTable)\n                            .on(MOUSEDOWN + NS + \" keydown\" + NS, \".k-detail-cell\", function(e) {\n                                if (e.target !== e.currentTarget) {\n                                    e.stopImmediatePropagation();\n                                }\n                            })\n                            .on(MOUSEDOWN + NS, NAVROW + \">\" + NAVCELL, tableClick.bind(grid));\n                    }\n                    grid.copyHandler = grid.copySelection.bind(grid);\n                    grid.updateClipBoardState = function() {\n                        if (grid.areaClipBoard) {\n                            grid.areaClipBoard.val(grid.getTSV()).trigger(\"focus\").select();\n                        }\n                    };\n                    const container = grid.content || grid.table;\n                    grid.bind(\"change\",grid.updateClipBoardState);\n                    container.on(\"keydown\", grid.copyHandler);\n                    grid.clearAreaHandler = grid.clearArea.bind(grid);\n                    container.on(\"keyup\", grid.clearAreaHandler);\n                }\n            },\n\n            copySelectionToClipboard: function(includeHeaders) {\n                this._createAreaClipBoard();\n                this.areaClipBoard.val(this.getTSV(includeHeaders)).trigger(\"focus\").select();\n                document.execCommand('copy');\n            },\n\n            copySelection: function(e) {\n                if ((e instanceof jQuery.Event && !(e.ctrlKey || e.metaKey)) ||\n                    !(e.keyCode === 67 && (e.ctrlKey || e.metaKey)) ||\n                    $(e.target).is(\"input:visible,textarea:visible\") ||\n                    (window.getSelection && window.getSelection().toString()) ||\n                    (document.selection && document.selection.createRange().text) ) {\n                    return;\n                }\n\n                this._createAreaClipBoard();\n                this.areaClipBoard.val(this.getTSV()).trigger(\"focus\").select();\n            },\n\n            _createAreaClipBoard: function() {\n                if (!this.areaClipBoard) {\n                    this.areaClipBoard =\n                        $(\"<textarea />\")\n                        .css({\n                            position: \"fixed\",\n                            top: \"50%\",\n                            left: \"50%\",\n                            opacity: 0,\n                            width: 0,\n                            height: 0\n                        })\n                        .appendTo(this.wrapper);\n                }\n            },\n\n            getTSV: function(includeHeaders) {\n                var grid = this;\n                var selected = grid.select();\n                var delimeter = \"\\t\";\n                var allowCopy = grid.options.allowCopy;\n                var onlyVisible = true;\n                var hasLockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n\n                if ($.isPlainObject(allowCopy) && allowCopy.delimeter) {\n                    delimeter = allowCopy.delimeter;\n                }\n                var text = \"\";\n                if (selected.length) {\n                    if (selected.eq(0).is(TR)) {\n                        selected = selected.find(\"td:not(.k-group-cell)\");\n                    }\n                    if (onlyVisible) {\n                        selected.filter(\":visible\");\n                    }\n\n                    var result = [];\n                    var cellsOffset = this.columns.length;\n                    var lockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n                    var inLockedArea = true;\n                    var fields = [];\n                    var field;\n                    var columns = visibleLeafColumns(this.columns);\n\n                    $.each(selected, function(idx, cell) {\n                        cell = $(cell);\n                        field = grid._getCellField(cell, hasLockedCols);\n\n                        if (columns.findIndex(c => c.field === field) === -1) {\n                            return;\n                        }\n\n                        var tr = cell.closest(TR);\n                        var rowIndex = tr.index();\n                        var cellIndex = cell.index();\n                        if (onlyVisible) {\n                            cellIndex -= cell.prevAll(\":hidden\").length;\n                        }\n                        if (lockedCols && inLockedArea) {\n                            inLockedArea = $.contains(grid.lockedTable[0], cell[0]);\n                        }\n                        if (grid._groups() && inLockedArea) {\n                            cellIndex -= grid._groups();\n                        }\n                        cellIndex = inLockedArea ? cellIndex : (cellIndex + lockedCols );\n                        if (field) {\n                            fields[cellIndex] = field;\n                        }\n                        if (cellsOffset > cellIndex) {\n                            cellsOffset = cellIndex;\n                        }\n                        var cellText = cell.text();\n                        if (!result[rowIndex]) {\n                            result[rowIndex] = [];\n                        }\n                        result[rowIndex][cellIndex] = cellText;\n                    });\n\n                    var rowsOffset = result.length;\n                    result = $.each(result, function(idx, val) {\n                        if (val) {\n                            result[idx] = val.slice(cellsOffset);\n                            if (rowsOffset > idx) {\n                                rowsOffset = idx;\n                            }\n                        }\n                    });\n\n                    if (includeHeaders && fields.length) {\n                        result.splice(rowsOffset, 0, fields.map(function(field) {\n                            return getTitle(field, columns);\n                        }));\n\n                        var headerIndex = result.findIndex(function(el) {\n                            return el !== undefined$1;\n                        });\n\n                        result[headerIndex] = result[headerIndex].slice(cellsOffset);\n                    }\n\n                    $.each(result.slice(rowsOffset), function(idx, val) {\n                        if (val) {\n                            text += val.join(delimeter) + \"\\r\\n\";\n                        } else {\n                            text += \"\\r\\n\";\n                        }\n                    });\n                }\n                return text;\n            },\n\n            clearArea: function(e) {\n                if (this.areaClipBoard && e && e.target === this.areaClipBoard[0]) {\n                    focusTable(this.table, true);\n                }\n\n                if (this.areaClipBoard) {\n                    this.areaClipBoard.remove();\n                    this.areaClipBoard = null;\n                }\n            },\n\n            _adaptiveColumns: function() {\n                var that = this;\n\n                if (that._anyColumnHasMediaQuery()) {\n                    that._setColumnsMediaVisibility(that.columns);\n                    that._attachColumnMediaResizeHandler();\n                }\n            },\n\n            _anyColumnHasMediaQuery: function() {\n                return this._columnsWithMediaQuery().length;\n            },\n\n            _columnsWithMediaQuery: function() {\n                return columnsWithMedia(this.columns);\n            },\n\n            _attachColumnMediaResizeHandler: function() {\n                var that = this;\n\n                that._detachColumnMediaResizeHandler();\n                that._columnMediaResizeHandler = that._onColumnMediaResize.bind(that);\n                $(window).on(RESIZE + NS, that._columnMediaResizeHandler);\n            },\n\n            _detachColumnMediaResizeHandler: function() {\n                var that = this;\n\n                if (that._columnMediaResizeHandler) {\n                    $(window).off(RESIZE + NS, that._columnMediaResizeHandler);\n                }\n            },\n\n            _onColumnMediaResize: function() {\n                var that = this;\n                that._setColumnsMediaVisibility(that.columns);\n                that._setContentMediaWidth();\n            },\n\n            _setColumnsMediaVisibility: function(columns) {\n                var cols = columns || [];\n\n                for (var i = 0; i < cols.length; i++) {\n                    this._setColumnMediaVisibility(cols[i]);\n                }\n            },\n\n            _setColumnMediaVisibility: function(column) {\n                var that = this;\n\n                if (isUndefined(column.media)) {\n                    that._setColumnsMediaVisibility(column.columns);\n                } else {\n                    if (columnMatchesMedia(column)) {\n                        that._showColumnByMedia(column);\n\n                        if (!column.hidden) {\n                            that._setColumnsMediaVisibility(column.columns);\n                        }\n                    } else {\n                        that._hideColumnByMedia(column);\n                    }\n                }\n            },\n\n            _showColumnByMedia: function(column) {\n                if (!column.hidden) {\n                    // \"hidden\" has a priority over \"matchesMedia\"\n                    this.showColumn(column);\n                }\n\n                setColumnMatchesMedia(column);\n            },\n\n            _hideColumnByMedia: function(column) {\n                var initiallyHidden = column.hidden;\n\n                if (!initiallyHidden) {\n                    column._hideByMedia = true;\n                    this.hideColumn(column);\n                    column._hideByMedia = false;\n\n                    // hiding is tracked in \"matchesMedia\" instead of \"hidden\" flag\n                    column.hidden = initiallyHidden;\n                }\n\n                setColumnMatchesMedia(column);\n            },\n\n            _setContentMediaWidth: function() {\n                var that = this;\n                var options = that.options;\n                var isLocked = that._isLocked();\n                var footer;\n\n                if (options.scrollable && (options.resizable === true || (options.resizable && options.resizable.columns === true))) {\n                    if (isLocked && that.lockedFooter) {\n                        footer = that.lockedFooter.children(\"table\");\n                    } else if (that.footer) {\n                        footer = that.footer.find(\">.k-grid-footer-wrap>table\");\n                    }\n\n                    if (!footer || !footer[0]) {\n                        footer = $();\n                    }\n\n                    var header = isLocked ? that.wrapper.find(\".k-grid-header-locked\").find(\"table\") : that.wrapper.find(\".k-grid-header\").find(\"table\");\n                    var contentTable = isLocked ? that.lockedTable : that.table;\n\n                    var headerColumns = header.find(\"th\");\n                    var headerColgroup = header.find(\"colgroup\");\n\n                    var headerColumnsCount = headerColumns.length;\n                    var visibleHeaderColumnsCount = headerColumns.filter(isCellVisible).length;\n                    var hiddenHeaderColumnsCount = headerColumns.length - visibleHeaderColumnsCount;\n\n                    var totalHeaderWidth = 0;\n\n                    if (header[0].style.width !== \"\" && parseFloat(header[0].style.width) !== totalHeaderWidth) {\n                        var currentHeaderWidth = header.css(WIDTH);\n\n                        for (var i = 0; i < headerColumnsCount; i++) {\n                            if (isElementVisible(headerColumns[i])) {\n                                var columnWidth;\n                                var cellIndex = Math.max(i, (i - hiddenHeaderColumnsCount));\n                                var colgroupChild = headerColgroup.children()[cellIndex];\n                                var columnStyleWidth = colgroupChild ? colgroupChild.style.width : \"\";\n\n                                if (columnStyleWidth !== \"\") {\n                                    columnWidth = parseFloat(columnStyleWidth);\n                                } else {\n                                    // remove the header width to calculate the height of a column without fixed width\n                                    header.css(WIDTH, AUTO);\n                                    columnWidth = outerWidth(headerColumns.eq(i));\n                                    header.css(WIDTH, currentHeaderWidth);\n                                }\n\n                                totalHeaderWidth += columnWidth;\n                            }\n                        }\n\n                        contentTable.css('width', totalHeaderWidth - 1); // subtract 1 to remove the horizontal scroll\n                        header.css('width', totalHeaderWidth);\n                        footer.css('width', totalHeaderWidth);\n                        that._updateStickyColumns();\n                    }\n                }\n            },\n\n            _minScreenSupport: function() {\n                var any = this.hideMinScreenCols();\n\n                if (any) {\n                    this.minScreenResizeHandler = this.hideMinScreenCols.bind(this);\n                    $(window).on(\"resize\", this.minScreenResizeHandler);\n                }\n            },\n\n            hideMinScreenCols: function() {\n                var cols = this.columns,\n                    screenWidth = (window.innerWidth > 0) ? window.innerWidth : screen.width;\n\n                return this._iterateMinScreenCols(cols, screenWidth);\n            },\n\n            _iterateMinScreenCols: function(cols, screenWidth) {\n                var any = false;\n\n                for (var i = 0; i < cols.length; i++) {\n                    var col = cols[i];\n                    var minWidth = col.minScreenWidth;\n                    if (minWidth !== undefined$1 && minWidth !== null) {\n                        any = true;\n                        if (minWidth > screenWidth) {\n                            this.hideColumn(col);\n                        } else {\n                            this.showColumn(col);\n                        }\n                    }\n                    if (!col.hidden && col.columns) {\n                        any = this._iterateMinScreenCols(col.columns, screenWidth) || any;\n                    }\n                }\n                return any;\n            },\n\n            _stickyColumns: function() {\n                var that = this;\n\n                if (that._anyStickyColumns()) {\n                    that._setStickyColumns(false);\n                }\n            },\n\n            _updateStickyColumns: function() {\n                var that = this;\n                var groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n                if (that._anyStickyColumns()) {\n                    that._setStickyColumns(true);\n                    that._templates();\n\n                    if (groupHeaderColumnTemplateColumns.length > 0) {\n                        that._renderGroupRows();\n                    }\n\n                    if (that._hasFilterRow()) {\n                        that._updateStickyFilterCells();\n                    }\n                }\n            },\n\n            _updateStickyFilterCells: function() {\n                var that = this;\n                var filterCells = that.thead.find(\".k-filter-row\").find(\"td:not(.k-group-cell,.k-hierarchy-cell)\");\n                if (filterCells.length) {\n                    filterCells.each(function() {\n                        var th = $(this);\n                        var column = th.data(\"column\");\n\n                        if (column.sticky) {\n                            if (isPlainObject(column.stickyStyle)) {\n                                th.css({\n                                    left: column.stickyStyle.left || \"\",\n                                    right: column.stickyStyle.right || \"\"\n                                });\n                            }\n\n                            th.addClass(STICKY_HEADER_CLASS);\n                        } else {\n                            th.css({\n                                left: \"\",\n                                right: \"\"\n                            });\n\n                            th.removeClass(STICKY_HEADER_CLASS);\n                        }\n                    });\n                }\n            },\n\n            _anyStickyColumns: function() {\n                var that = this;\n\n                return stickyColumns(that.columns).length;\n            },\n\n            _setStickyColumns: function(updateStyles) {\n                var that = this;\n                var columns = stickyColumns(that.columns);\n                var visibleColumns = visibleStickyColumns(that.columns);\n                var stickyWidths = that._calculateStickyWidths(visibleColumns);\n\n                that._removeStickyAttributes(columns);\n                that._setStickyClassAttributes(columns);\n                that._setStickyStyleAttributes(visibleColumns, stickyWidths, updateStyles);\n\n                if (updateStyles) {\n                    that._setStickyStyles(visibleColumns, stickyWidths);\n                }\n            },\n\n            _calculateStickyWidths: function(columns, initialLeftWidth, initialRightWidth) {\n                var that = this;\n                var i;\n                var column;\n                var columnWidth;\n                var nextColumnLeft;\n                var nextColumnRight;\n                var left = isRtl ? \"right\" : \"left\";\n                var right = isRtl ? \"left\" : \"right\";\n                var stickyWidths = {\n                    left: new Array(columns.length).fill(initialLeftWidth ? initialLeftWidth : 0),\n                    right: new Array(columns.length).fill(initialRightWidth ? initialRightWidth : 0)\n                };\n\n                for (i = 0; i < columns.length - 1; i++) {\n                    column = columns[i];\n                    columnWidth = that._sumColumnWidth(column);\n                    nextColumnLeft = columnWidth + stickyWidths[left][i];\n\n                    stickyWidths[left][i + 1] = nextColumnLeft;\n                }\n\n                for (i = columns.length - 1; i > 0; i--) {\n                    column = columns[i];\n                    columnWidth = that._sumColumnWidth(column);\n                    nextColumnRight = columnWidth + stickyWidths[right][i];\n\n                    stickyWidths[right][i - 1] = nextColumnRight;\n                }\n\n                return stickyWidths;\n            },\n\n            _setStickyClassAttributes: function(columns, masterIndex) {\n                var that = this;\n                var i;\n                var column;\n\n                for (i = 0; i < columns.length; i++) {\n                    column = columns[i];\n\n                    if (column.columns) {\n                        if (!masterIndex && i) {\n                            masterIndex = i;\n                        }\n\n                        that._setStickyClassAttributes(childColumns([column]), masterIndex);\n                    }\n\n                    if (masterIndex) {\n                        addColumnAttribute(column, \"headerAttributes\", \"class\", STICKY_HEADER_NO_BORDER_CLASS);\n                    }\n                    addColumnAttribute(column, \"attributes\", \"class\", STICKY_CELL_CLASS);\n                    addColumnAttribute(column, \"headerAttributes\", \"class\", STICKY_HEADER_CLASS);\n                    addColumnAttribute(column, \"footerAttributes\", \"class\", STICKY_FOOTER_CLASS);\n                }\n            },\n\n            _setStickyStyleAttributes: function(columns, stickyWidths, updateStyles) {\n                var that = this;\n                var i;\n                var column;\n                var stickyLeft;\n                var stickyRight;\n                var stickyStyle;\n                var childCols;\n                var childStickyWidths;\n\n                for (i = 0; i < columns.length; i++) {\n                    column = columns[i];\n                    stickyLeft = stickyWidths.left[i];\n                    stickyRight = stickyWidths.right[i];\n                    stickyStyle = { left: stickyLeft + \"px\", right: stickyRight + \"px\" };\n\n                    if (column.columns) {\n                        childCols = visibleChildColumns([column]);\n                        childStickyWidths = that._calculateStickyWidths(childCols, stickyLeft, stickyRight);\n\n                        that._setStickyStyleAttributes(childCols, childStickyWidths, updateStyles);\n\n                        if (updateStyles) {\n                            that._setStickyStyles(childCols, childStickyWidths);\n                        }\n                    }\n\n                    addColumnAttribute(column, \"attributes\", kendo.attr(\"style-left\"), stickyStyle.left);\n                    addColumnAttribute(column, \"attributes\", kendo.attr(\"style-right\"), stickyStyle.right);\n                    addColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-left\"), stickyStyle.left);\n                    addColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-right\"), stickyStyle.right);\n                    addColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-left\"), stickyStyle.left);\n                    addColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-right\"), stickyStyle.right);\n\n                    column.stickyStyle = stickyStyle;\n                }\n            },\n\n            _removeStickyAttributes: function(columns) {\n                var that = this;\n                var i;\n                var cellClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_CELL_CLASS + \")*\", \"ig\");\n                var headerClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_HEADER_CLASS + \")*\", \"ig\");\n                var footerClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_FOOTER_CLASS + \")*\", \"ig\");\n                var headerClassNoBorderRegExp = new RegExp(\"(\\\\s*\" + STICKY_HEADER_NO_BORDER_CLASS + \")*\", \"ig\");\n                var column;\n\n                for (i = 0; i < columns.length; i++) {\n                    column = columns[i];\n\n                    if (column.columns) {\n                        that._removeStickyAttributes(childColumns([column]));\n                    }\n\n                    removeColumnAttribute(column, \"attributes\", \"class\", cellClassRegExp);\n                    removeColumnAttribute(column, \"attributes\", kendo.attr(\"style-left\"), '', true);\n                    removeColumnAttribute(column, \"attributes\", kendo.attr(\"style-right\"), '', true);\n\n                    removeColumnAttribute(column, \"headerAttributes\", \"class\", headerClassRegExp);\n                    removeColumnAttribute(column, \"headerAttributes\", \"class\", headerClassNoBorderRegExp);\n                    removeColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-left\"), '', true);\n                    removeColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-right\"), '', true);\n\n                    removeColumnAttribute(column, \"footerAttributes\", \"class\", footerClassRegExp);\n                    removeColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-left\"), '', true);\n                    removeColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-right\"), '', true);\n                }\n            },\n\n            _setStickyStyles: function(columns, stickyWidths) {\n                var that = this;\n                var i;\n                var j;\n                var leafsCols = leafColumns(nonLockedColumns(that.columns));\n                var rows = that.tbody.children(\":not(.k-detail-row)\");\n                var row;\n                var column;\n                var columnIndex;\n                var left;\n                var right;\n                var header;\n                var footer;\n                var groupHeader;\n                var cell;\n\n                for (i = 0; i < columns.length; i++) {\n                    column = columns[i];\n                    left = stickyWidths.left[i];\n                    right = stickyWidths.right[i];\n                    columnIndex = leafsCols.indexOf(column);\n                    header = that._getColumnHeader(column);\n\n                    header.addClass(STICKY_HEADER_CLASS);\n                    if (column.headerAttributes[\"class\"] && column.headerAttributes[\"class\"].indexOf(STICKY_HEADER_NO_BORDER_CLASS) !== -1) {\n                        header.addClass(STICKY_HEADER_NO_BORDER_CLASS);\n                    }\n                    setLeftAndRightStyles(header, left, right);\n\n                    if (column.columns) {\n                        continue;\n                    }\n\n                    if (that.footer) {\n                        footer = that.footer.find(\".k-grid-footer-wrap tr.k-footer-template\").children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                        footer.addClass(STICKY_FOOTER_CLASS);\n                        setLeftAndRightStyles(footer, left, right);\n                    }\n\n                    for (j = 0; j < rows.length; j++) {\n                        row = $(rows[j]);\n\n                        if (row.hasClass(GROUPING_ROW)) {\n                            groupHeader = row.find(\".\" + column.groupHeaderColumnTemplateClass);\n\n                            groupHeader.addClass(STICKY_CELL_CLASS);\n                            setLeftAndRightStyles(groupHeader, left, right);\n                        } else {\n                            cell = row.children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                            cell.addClass(STICKY_CELL_CLASS);\n                            setLeftAndRightStyles(cell, left, right);\n                        }\n                    }\n                }\n            },\n\n            _removeStickyStyles: function(columns) {\n                var that = this;\n                var i;\n                var j;\n                var leafsCols = leafColumns(nonLockedColumns(that.columns));\n                var rows = that.tbody.children(\":not(.k-detail-row)\");\n                var row;\n                var column;\n                var columnIndex;\n                var header;\n                var footer;\n                var groupHeader;\n                var cell;\n\n                for (i = 0; i < columns.length; i++) {\n                    column = columns[i];\n                    columnIndex = leafsCols.indexOf(column);\n                    header = that._getColumnHeader(column);\n\n                    header.removeClass(STICKY_HEADER_CLASS);\n                    header.removeClass(STICKY_HEADER_NO_BORDER_CLASS);\n                    setLeftAndRightStyles(header, \"\", \"\");\n\n                    if (column.columns) {\n                        that._removeStickyStyles(column.columns);\n                        continue;\n                    }\n\n                    if (column.footerTemplate && that.footer) {\n                        footer = that.footer.find(\".k-grid-footer-wrap tr.k-footer-template\").children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                        footer.removeClass(STICKY_FOOTER_CLASS);\n                        setLeftAndRightStyles(footer, \"\", \"\");\n                    }\n\n                    for (j = 0; j < rows.length; j++) {\n                        row = $(rows[j]);\n\n                        if (row.hasClass(GROUPING_ROW)) {\n                            groupHeader = row.find(\".\" + column.groupHeaderColumnTemplateClass);\n\n                            groupHeader.removeClass(STICKY_CELL_CLASS);\n                            setLeftAndRightStyles(groupHeader, \"\", \"\");\n                        } else {\n                            cell = row.children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                            cell.removeClass(STICKY_CELL_CLASS);\n                            setLeftAndRightStyles(cell, \"\", \"\");\n                        }\n                    }\n                }\n            },\n\n            _getColumnHeader: function(column) {\n                var that = this;\n                var header = $(\"#\" + column.headerAttributes.id).length ? $(\"#\" + column.headerAttributes.id) : $(\"#\" + that._cellId);\n\n                return header;\n            },\n\n            _sumColumnWidth: function(column) {\n                var that = this;\n                var width = 0;\n\n                if (column.columns) {\n                    width = that._sumCurrentWidths(leafColumns([column]));\n                } else {\n                    width = that._sumCurrentWidths([column]);\n                }\n\n                return width;\n            },\n\n            _sumCurrentWidths: function(cols) {\n                var that = this;\n                var width = 0;\n                var colWidth = 0;\n                var col;\n                var header;\n                var i;\n                var length = cols.length;\n\n                for (i = 0; i < length; i++) {\n                    col = cols[i];\n                    header = that._getColumnHeader(col);\n\n                    if (!col.hidden && columnMatchesMedia(col)) {\n                        colWidth = header.is(\":visible\") ? header.outerWidth() : col.width;\n\n                        width += colWidth ? parseInt(colWidth, 10) : 0;\n                    }\n                }\n\n                return width;\n            },\n\n            _belongsToGrid: function(element) {\n                return this.wrapper[0] === element.closest(WRAPPER)[0];\n            },\n\n            getSelectedData: function() {\n                var that = this;\n                var selectedRanges = that.selectable.selectedRanges();\n                var selectedRangeNames = Object.keys(selectedRanges);\n                var selectedSingleItems = that.selectable.selectedSingleItems();\n                var result = [];\n                var visibleColumns = visibleLeafColumns(that.columns);\n\n                for (var idx = 0; idx < selectedRangeNames.length; idx++) {\n                    result = result.concat(that._mapSelectionToData(selectedRanges[selectedRangeNames[idx]], visibleColumns, null, true));\n                }\n\n                if (selectedSingleItems.length) {\n                    result = result.concat(that._mapSelectionToData(selectedSingleItems, visibleColumns, null, true));\n                }\n\n                return result;\n            },\n\n            getSelectedDataByKeys: function() {\n                var that = this,\n                    dataSource = that.dataSource,\n                    keys = that.selectedKeyNames(),\n                    visibleColumns = visibleLeafColumns(that.columns),\n                    key,\n                    dataItem,\n                    result = {};\n\n                var columnMapHandler = function(col) {\n                    var result = {};\n\n                    if (!col.field) {\n                        return;\n                    }\n\n                    result[col.field] = dataItem[col.field];\n                    return result;\n                };\n\n                for (let i = 0; i < keys.length; i++) {\n                    key = keys[i];\n                    dataItem = dataSource.get(key);\n\n                    if (dataItem) {\n                        result[dataItem.uid] = $.extend.apply({}, visibleColumns.map(columnMapHandler));\n                    }\n                }\n\n                return Object.keys(result).map(function(id) {\n                    return result[id];\n                });\n            },\n\n            exportSelectedToExcel: function(includeHeaders) {\n                if (!kendo.excel || !kendo.ooxml) {\n                    throw new Error(\"The excel export functionality depends on both kendo.excel.js and kendo.ooxml.js scripts, please make sure they are included.\");\n                }\n\n                var that = this;\n                var excel = this.options.excel || {};\n                var visibleColumns = visibleLeafColumns(that.columns);\n                var exporter = new kendo.excel.ExcelExporter({});\n                var columnHandler = function() {return { autoWidth: true };};\n                var book = {\n                    sheets: [{\n                        columns: Array.apply(0, Array(visibleColumns.length)).map(columnHandler),\n                        rows: [],\n                        freezePane: {},\n                        filter: false\n                    }]\n                };\n                var selectedRanges = that.selectable.selectedRanges();\n                var selectedRangeNames = Object.keys(selectedRanges);\n                var selectedSingleItems = that.selectable.selectedSingleItems();\n                var idx;\n                var exportData = [];\n                var hasLockedCols = that._isLocked() && lockedColumns(that.columns).length;\n                var sortHandler = exportDataSort.bind(that);\n\n                for (idx = 0; idx < selectedRangeNames.length; idx++) {\n                    exportData = exportData.concat(that._mapSelectionToData(selectedRanges[selectedRangeNames[idx]], visibleColumns, isExcelExportableColumn));\n                }\n\n                if (exportData.length) {\n                    that._addRangeSelectionRows(book, exporter, exportData, includeHeaders);\n\n                }\n                exportData = selectedSingleItems.length ? that._mapSelectionToData(selectedSingleItems, visibleColumns, isExcelExportableColumn) : [];\n\n                if (exportData.length) {\n                    if (hasLockedCols) {\n                        exportData = exportData.sort(sortHandler);\n                    }\n                    that._addSingleSelectionRows(book, exporter, exportData, includeHeaders);\n                }\n\n                if (book.sheets[0].rows.length) {\n                    var workbook = new kendo.ooxml.Workbook(book);\n\n                    if (!workbook.options) {\n                        workbook.options = {};\n                    }\n                    workbook.options.skipCustomHeight = true;\n\n                    workbook.toDataURLAsync().then(function(dataURI) {\n                        kendo.saveAs({\n                            dataURI: dataURI,\n                            fileName: book.fileName || excel.fileName,\n                            proxyURL: excel.proxyURL,\n                            forceProxy: excel.forceProxy\n                        });\n                    });\n                }\n            },\n\n            _addSingleSelectionRows: function(book, exporter, data, includeHeaders) {\n                var idx = 0;\n                var visibleColumns = visibleLeafExportColumns(this.columns);\n                var item;\n\n                for (idx = 0; idx < data.length; idx++) {\n                    item = data[idx];\n                    exporter.data = [item];\n                    this._setExporterColumns(exporter, visibleColumns, item);\n                    this._createExportRows(book, exporter, includeHeaders);\n                }\n            },\n\n            _addRangeSelectionRows: function(book, exporter, data, includeHeaders) {\n                var visibleColumns = visibleLeafExportColumns(this.columns);\n\n                exporter.data = data;\n                this._setExporterColumns(exporter, visibleColumns, data[0]);\n                this._createExportRows(book, exporter, includeHeaders);\n            },\n\n            _createExportRows: function(book, exporter, includeHeaders) {\n                book.sheets[0].rows = book.sheets[0].rows.concat(includeHeaders ? exporter._rows() : exporter._dataRows(exporter.data, 0));\n            },\n\n            _setExporterColumns: function(exporter, columns, item) {\n                exporter.columns = exporter.options.columns = $.map(columns.filter(function(col) {\n                    return Object.keys(item).indexOf(col.field) >= 0;\n                }), exporter._prepareColumn);\n            },\n\n            _mapSelectionToData: function(elements, visibleColumns, columnsFilter, ignoreOffset) {\n                var that = this;\n                var elementType = elements[0][0].nodeName;\n                var isRowSelection = elementType === 'TR';\n                var dataItem;\n                var result = {};\n                var element;\n                var curr;\n                var field;\n                var columnMapHandler = function(col) {\n                    var result = {};\n\n                    if (!col.field || (columnsFilter && !columnsFilter(col))) {\n                        return;\n                    }\n\n                    result[col.field] = dataItem[col.field];\n                    return result;\n                };\n                var hasLockedCols = that._isLocked() && lockedColumns(that.columns).length;\n                var column;\n\n                for (var i = 0; i < elements.length; i++) {\n                    element = elements[i];\n                    dataItem = that.dataItem(isRowSelection ? element : element.parent());\n\n                    if (isRowSelection) {\n                        result[dataItem.uid] = $.extend.apply({}, visibleColumns.map(columnMapHandler));\n                    } else {\n                        field = that._getCellField(element, hasLockedCols, ignoreOffset);\n\n                        if (!field) {\n                            continue;\n                        }\n\n                        curr = result[dataItem.uid];\n\n                        if (!curr) {\n                            curr = result[dataItem.uid] = {};\n                        }\n\n                        column = findColumnByField(visibleColumns, field);\n\n                        if (!column || (columnsFilter && !columnsFilter(column))) {\n                            continue;\n                        }\n\n                        curr[field] = dataItem[field];\n                    }\n                }\n\n                return Object.keys(result).map(function(id) {\n                    result[id].uid = id;\n                    return result[id];\n                });\n            },\n\n            _getCellField: function(cell, hasLockedCols, ignoreOffset) {\n                var grid = this;\n                var inLockedArea = hasLockedCols && $.contains(grid.lockedTable[0], cell[0]);\n                var fieldAttr = kendo.attr('field');\n                var index = kendo.attr('index');\n                var indexOffset = 0;\n\n                if (ignoreOffset) {\n                    indexOffset = grid._trailingColumns();\n                }\n\n                if (hasLockedCols) {\n                    return grid.element.find(\".k-grid-header-\" + (inLockedArea ? \"locked\" : \"wrap\") + \" th[\" + index + \"='\" + cell.index() + \"']\").attr(fieldAttr);\n                } else {\n                    return grid.thead.find(\"th[\" + index + \"='\" + (cell.index() - indexOffset) + \"']\").attr(fieldAttr);\n                }\n            },\n\n            _relatedRow: function(row) {\n                var lockedTable = this.lockedTable;\n                row = $(row);\n\n                if (!lockedTable) {\n                    return row;\n                }\n\n                var table = row.closest(this.table.add(this.lockedTable));\n                var index = table.find(\">tbody>tr\").index(row);\n\n                table = table[0] === this.table[0] ? lockedTable : this.table;\n\n                return table.find(\">tbody>tr\").eq(index);\n            },\n\n            _relatedCell: function(cell) {\n                var lockedTable = this.lockedTable;\n\n                cell = $(cell);\n\n                if (!lockedTable) {\n                    return cell;\n                }\n\n                var table = cell.closest(this.table.add(this.lockedTable));\n                var index = table.find(\">tbody>tr>td\").index(cell);\n\n                table = table[0] === this.table[0] ? lockedTable : this.table;\n\n                return table.find(\">tbody>tr>td\").index(index);\n            },\n\n            clearSelection: function() {\n                var that = this;\n\n                if (that.selectable && !that._checkBoxSelection) {\n                    that.selectable.clear();\n                }\n\n                if (that._checkBoxSelection) {\n                    that._deselectCheckRows(that.select());\n                    return;\n                }\n\n                if (that.options.persistSelection) {\n                    that._persistSelectedRows();\n                } else {\n                    that._selectedIds = {};\n                }\n            },\n\n            select: function(items) {\n                var that = this,\n                    selectable = that.selectable,\n                    selectableoptions = kendo.ui.Selectable.parseOptions(this.options.selectable),\n                    cell = selectableoptions.cell;\n\n                items = that.table.add(that.lockedTable).find(items);\n                if (items.length) {\n                    if (selectable && !selectable.options.multiple) {\n                        selectable.clear();\n                        items = items.first();\n                    }\n\n                    if (that._isLocked()) {\n                        items = items.add(items.map(function() {\n                            if (cell) {\n                                return that._relatedCell(this);\n                            }\n                            else {\n                                return that._relatedRow(this);\n                            }\n                        }));\n                    }\n\n                    if (selectable && !that._checkBoxSelection) {\n                        selectable.value(items);\n                    } else {\n                        that._checkRows(items);\n                        if (that.select().length === that.items().length) {\n                            that._toggleHeaderCheckState(true);\n                        }\n                    }\n\n                    if (!cell) {\n                        that._persistSelectedRows();\n                    }\n\n                    return;\n                }\n\n                return selectable ? selectable.value() : that.items().filter(\".\" + SELECTED);\n            },\n\n            _initSelectableAggregates: function() {\n                var that = this;\n\n                if (!that.options.selectable) {\n                    return;\n                }\n\n                if (!that._selectableAggregatesOptions) {\n                    that._selectableAggregatesOptions = that._parseSelectableAggregatesOptions();\n                }\n\n                if (that._selectableAggregatesOptions.count) {\n                    that._cellAggregates = {\n                        count: 0\n                    };\n                }\n            },\n\n            _calculateAggregatesForSelected: function() {\n                var that = this,\n                    options = that.options,\n                    selectedData = that.getSelectedDataByKeys(),\n                    selectable = that.options.selectable,\n                    cellAggregates = selectable.cellAggregates,\n                    cellsLength = visibleLeafColumns(that.columns).filter(col => !col.selectable && !col.draggable & !col.command).length,\n                    columnFields = getColumnsFields(options.columns),\n                    isCellSelection = kendo.ui.Selectable.parseOptions(selectable).cell,\n                    dataItem,\n                    type,\n                    value,\n                    numberAggregates = [],\n                    dateAggregates = [],\n                    booleanAggregates = [],\n                    count, min, max, sum, average, earliest, latest, isTrue, isFalse;\n\n                if (!cellAggregates) {\n                    return;\n                }\n\n                // getSelectedDataByKeys won't work for cell selection.\n                if (isCellSelection) {\n                    selectedData = that.getSelectedData();\n                }\n\n                cellAggregates = that._selectableAggregatesOptions;\n\n                for (let i = 0; i < selectedData.length; i++) {\n                    dataItem = selectedData[i];\n\n                    for (let j = 0; j < columnFields.length; j++) {\n                        value = dataItem[columnFields[j]];\n                        type = getType(value);\n\n                        switch (type) {\n                            case \"number\":\n                                numberAggregates.push(value);\n                                break;\n                            case \"date\":\n                                dateAggregates.push(value);\n                                break;\n                            case \"boolean\":\n                                booleanAggregates.push(value);\n                                break;\n                            default:\n                                break;\n                        }\n                    }\n                }\n\n                if (cellAggregates.count) {\n                    count = isCellSelection ? cellsExcludingSpecialColumns(that.select()).length : selectedData.length * cellsLength;\n                }\n\n                if (numberAggregates.length) {\n                    max = cellAggregates.max ? numberAggregates.reduce((acc, current) => Math.max(acc, current)) : null;\n                    min = cellAggregates.min ? numberAggregates.reduce((acc, current) => Math.min(acc, current)) : null;\n                    sum = cellAggregates.sum ? numberAggregates.reduce((acc, current) => acc + current) : null;\n                    average = cellAggregates.average ? numberAggregates.reduce((acc, current) => (acc + current)) / numberAggregates.length : null;\n                }\n\n                if (dateAggregates.length) {\n                    earliest = cellAggregates.earliest ? dateAggregates.reduce((acc, current) => new Date(Math.min(acc, current))) : null;\n                    latest = cellAggregates.latest ? dateAggregates.reduce((acc, current) => new Date(Math.max(acc, current))) : null;\n                }\n\n                if (booleanAggregates.length) {\n                    isTrue = cellAggregates.isTrue ? booleanAggregates.filter(b => b === true).length : null;\n                    isFalse = cellAggregates.isFalse ? booleanAggregates.filter(b => b === false).length : null;\n                }\n\n                that._cellAggregates = {\n                    count: count,\n                    max: max,\n                    min: min,\n                    sum: sum,\n                    average: average,\n                    earliest: earliest,\n                    latest: latest,\n                    isTrue: isTrue,\n                    isFalse: isFalse\n                };\n\n                if (that.statusBar) {\n                    that._statusBar();\n                }\n            },\n\n            _parseSelectableAggregatesOptions: function() {\n                var that = this,\n                    cellAggregates = that.options.selectable.cellAggregates,\n                    result = {};\n\n                if (isArray(cellAggregates)) {\n                    for (let i = 0; i < cellAggregates.length; i++) {\n                        result[cellAggregates[i]] = true;\n                    }\n                    return result;\n                }\n\n                // If the value of cellAggregates is 'true' -> all aggregates must be enabled.\n                return {\n                    count: true,\n                    min: true,\n                    max: true,\n                    sum: true,\n                    average: true,\n                    earliest: true,\n                    latest: true,\n                    isTrue: true,\n                    isFalse: true\n                };\n            },\n\n            _toggleHeaderCheckState: function(checked) {\n                var that = this;\n                if (checked) {\n                    that.thead.add(that.lockedHeader).find(\"tr \" + CHECKBOXINPUT)\n                        .prop(\"checked\", true).attr(ARIA_CHECKED, true)\n                        .attr(ARIA_LABEL, \"Deselect all rows\");\n                } else {\n                    that.thead.add(that.lockedHeader).find(\"tr \" + CHECKBOXINPUT)\n                        .prop(\"checked\", false).attr(ARIA_CHECKED, false)\n                        .attr(ARIA_LABEL, \"Select all rows\");\n                }\n            },\n\n            _uncheckCheckBoxes: function() {\n                var that = this;\n                var tables = that.table.add(that.lockedTable);\n\n                tables.find(\"tbody \" + CHECKBOXINPUT).attr(ARIA_CHECKED, false)\n                    .prop(\"checked\", false).attr(ARIA_LABEL, \"Select row\");\n\n            },\n\n            _deselectCheckRows: function(items) {\n                var that = this,\n                rangeSelectedAttr = kendo.attr(\"range-selected\");\n                items = that.table.add(that.lockedTable).find(items);\n\n                if (that._isLocked()) {\n                    items = items.add(items.map(function() {\n                        return that._relatedRow(this);\n                    }));\n                }\n\n                items.each(function() {\n                    $(this).removeClass(SELECTED).removeAttr(rangeSelectedAttr).find(CHECKBOXINPUT).attr(ARIA_CHECKED, false)\n                        .prop(\"checked\", false).attr(ARIA_LABEL, \"Select row\");\n                });\n                that._toggleHeaderCheckState(false);\n\n                that._persistSelectedRows();\n\n            },\n\n            _checkRows: function(items) {\n                items.each(function() {\n                    $(this).addClass(SELECTED).find(CHECKBOXINPUT)\n                        .prop(\"checked\", true)\n                        .attr(ARIA_LABEL, \"Deselect row\")\n                        .attr(ARIA_CHECKED, true);\n                });\n            },\n\n            _persistSelectedRows: function() {\n                var that = this,\n                    key,\n                    dataItem,\n                    allRows = that.items(),\n                    dataSourceOptions = that.dataSource.options,\n                    schema = dataSourceOptions.schema,\n                    modelId,\n                    selectedViewIds = {};\n\n                if (!schema || !schema.model || !that._data) {\n                    return;\n                }\n\n                modelId = isFunction(schema.model) ? schema.model.fn.idField : schema.model.id;\n\n                if (!modelId) {\n                    return;\n                }\n\n                if (!kendo.ui.Selectable.parseOptions(that.options.selectable).multiple && !that._checkBoxSelection) {\n                    that._selectedIds = {};\n                }\n\n                that.select().each(function() {\n                    dataItem = that.dataItem(this);\n                    selectedViewIds[dataItem[modelId]] = true;\n                });\n\n                for (var i = 0; i < allRows.length; i ++) {\n                    dataItem = that.dataItem(allRows[i]);\n                    key = dataItem[modelId];\n                    if (selectedViewIds[key]) {\n                        that._selectedIds[key] = true;\n                    } else {\n                        delete that._selectedIds[key];\n                    }\n                }\n            },\n\n            selectedKeyNames: function() {\n                var that = this,\n                    ids = [];\n                for (var property in that._selectedIds) {\n                    ids.push(property);\n                }\n                ids.sort();\n                return ids;\n            },\n\n            _updateCurrentAttr: function(current, next) {\n                var headerId = $(current).data(\"headerId\");\n                var nextId;\n                var descId;\n\n                $(current).removeClass(FOCUSED);\n                this.table.removeAttr(ARIA_ACTIVEDESCENDANT);\n\n                if (headerId) {\n                    headerId = headerId.replace(this._cellId, \"\");\n                    $(current).attr(ID, headerId);\n                } else {\n                    $(current).removeAttr(ID);\n                }\n\n                nextId = next.attr(ID);\n\n                if (nextId != this._cellId) {\n                    next.data(\"headerId\", nextId);\n                }\n\n                if (!!nextId) {\n                    descId = nextId;\n                } else {\n                    next.attr(ID, this._cellId);\n                }\n\n                next.addClass(FOCUSED);\n                this.table.attr(ARIA_ACTIVEDESCENDANT, descId || this._cellId);\n\n                this._current = next;\n            },\n\n            _scrollCurrent: function() {\n                var current = this._current;\n                var scrollable = this.options.scrollable;\n\n                if (!current || !scrollable) {\n                    return;\n                }\n\n                var row = current.parent();\n                var tableContainer = row.closest(\"table\").parent();\n\n                var isInLockedContainer = tableContainer.is(\".k-grid-content-locked,.k-grid-header-locked\");\n                var isInContent = tableContainer.is(\".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap\");\n\n                var scrollableContainer = $(this.content).find(\">.k-virtual-scrollable-wrap\").addBack().last()[0];\n\n                //adjust scroll vertically\n                if (isInContent) {\n                    if (this.virtualScroll) {\n                        var rowIndex = Math.max(inArray(row[0], this._items(row.parent())), 0);\n                        if (this.virtualScroll.rows) {\n                            this._rowVirtualIndex = this.virtualScrollable.itemIndex(rowIndex);\n                            this.virtualScrollable.scrollIntoView(row);\n                        } else {\n                            this._rowVirtualIndex = rowIndex;\n                            this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                        }\n                    } else {\n                        this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                    }\n                }\n\n                if (this.lockedContent) {\n                    //sync locked and non-locked content scrollTop\n                    this.lockedContent[0].scrollTop = scrollableContainer.scrollTop;\n                }\n\n                //adjust scroll horizontally, if not inside locked tables\n                if (!isInLockedContainer) {\n                    this._scrollTo(current[0], scrollableContainer);\n                }\n            },\n\n            current: function(next) {\n                return this._setCurrent(next, true);\n            },\n\n            _setCurrent: function(next, preventTrigger, preventScroll) {\n                var current = this._current;\n\n                next = $(next);\n\n                if (current && next && current.length && next.length && current.closest(\".k-filter-row\").length > 0 && next.closest(\".k-filter-row\").length === 0) {\n                    this._filterFocusable().attr(TABINDEX, -1);\n                }\n\n                if (next.length) {\n                    if (!current || current[0] !== next[0]) {\n                        var parent = next.parent();\n                        var siblings = parent.children(DATA_CELL);\n                        var colspan = parseInt(parent.children().first().attr(\"colspan\"), 10);\n\n                        if (this._hasVirtualColumns()) {\n                            this._virtualCellIndex = (colspan > 1 ? colspan : 0) + siblings.index(next);\n                        }\n                        this._updateCurrentAttr(current, next);\n\n                        if (!preventScroll) {\n                            this._scrollCurrent();\n                        }\n\n                        if (!preventTrigger) {\n                            this.trigger(NAVIGATE, {\n                                element: next\n                            });\n                        }\n                    }\n                }\n\n                if (next && next.length) {\n                    this._lastCellIndex = next.parent().children(\".k-group-cell,\" + DATA_CELL_HIDDENINCLUDED).index(next);\n                }\n\n                this._updateSelctCheckbox(current, next);\n\n                return this._current;\n            },\n\n            _removeCurrent: function() {\n                if (this._current) {\n                    this._current.removeClass(FOCUSED);\n                    this._current = null;\n                }\n            },\n\n            _updateSelctCheckbox: function(current, next) {\n                var nextCheckbox;\n\n                if (next && next.length) {\n                    nextCheckbox = next.find(\".k-select-checkbox\");\n\n                    if (nextCheckbox.length > 0) {\n                        nextCheckbox.focus();\n                    } else if (current && current.find(\".k-select-checkbox\").length > 0) {\n                        focusTable(this.table, true);\n                    }\n                }\n            },\n\n            _scrollTo: function(element, container) {\n                var elementToLowercase = element.tagName.toLowerCase();\n                var isHorizontal = elementToLowercase === \"td\" || elementToLowercase === \"th\";\n                var table = $(element).closest(\"table\")[0];\n                var elementOffsetDir = element[isHorizontal ? \"offsetWidth\" : \"offsetHeight\"];\n                var containerScroll = container[isHorizontal ? \"scrollLeft\" : \"scrollTop\"];\n                var containerOffsetDir = container[isHorizontal ? \"clientWidth\" : \"clientHeight\"];\n                var elementOffset = $(element).css(\"position\") === \"relative\" && isRtl && isHorizontal ? Math.abs(table.offsetLeft - element.offsetLeft) : element[isHorizontal ? \"offsetLeft\" : \"offsetTop\"];\n                var bottomDistance = elementOffset + elementOffsetDir;\n                var result = 0;\n                var ieCorrection = 0;\n                var firefoxCorrection = 0;\n\n                if (isRtl && isHorizontal) {\n                    if (browser.msie || browser.edge) {\n                        ieCorrection = table.offsetLeft;\n                    } else if (browser.mozilla || (browser.webkit && (browser.version > 85))) {\n                        firefoxCorrection = table.offsetLeft - kendo.support.scrollbar();\n                    }\n                }\n\n                containerScroll = Math.abs(containerScroll + ieCorrection - firefoxCorrection);\n\n                if (containerScroll > elementOffset) {\n                    result = elementOffset;\n                } else if (bottomDistance > (containerScroll + containerOffsetDir)) {\n                    if (elementOffsetDir <= containerOffsetDir) {\n                        result = (bottomDistance - containerOffsetDir);\n                    } else {\n                        result = elementOffset;\n                    }\n                } else {\n                    result = containerScroll;\n                }\n\n                result = Math.abs(result + ieCorrection) + firefoxCorrection;\n\n                container[isHorizontal ? \"scrollLeft\" : \"scrollTop\"] = result;\n            },\n\n            _navigatable: function() {\n                var that = this;\n\n                if (!that.options.navigatable) {\n                    return;\n                }\n\n                //data tables - locked and non-locked\n                var dataTables = that.table.add(that.lockedTable);\n                //header tables - locked and non-locked\n                var headerTables = that.thead.parent().add($(\">table\", that.lockedHeader));\n\n                //the over wich keys will be handled\n                var tables = dataTables;\n\n                if (that.options.scrollable) {\n                    //add the header table when the widget is scrollable\n                    tables = tables.add(headerTables);\n                }\n\n                this._navigatableTables = tables;\n                this._headertables = headerTables;\n\n                //dettach all previous events\n                tables.off(MOUSEDOWN + NS + \" focus\" + NS + \" focusout\" + NS + \" keydown\" + NS);\n\n                headerTables\n                    .find(\"a.k-link\").attr(\"tabIndex\", -1);\n\n                //prevent propagation when clicked inside detail grid\n                dataTables\n                    .on(\"keydown\" + NS, \".k-detail-cell\", function(e) {\n                        if (e.target !== e.currentTarget) {\n                            e.stopImmediatePropagation();\n                        }\n                    });\n\n                tables\n                    //handle click on tables, will attempt to focus the table\n                    .on((kendo.support.touch ? \"touchstart\" + NS : MOUSEDOWN + NS), NAVROW + \">\" + NAVCELL, tableClick.bind(that))\n                    .on(\"focus\" + NS, that._tableFocus.bind(that))\n                    .on(\"focusout\" + NS, that._tableBlur.bind(that))\n                    .on(\"keydown\" + NS, that, that._tableKeyDown.bind(that));\n\n                that._filterFocusable().on(\"focus\", that._filterFocus.bind(that));\n            },\n\n            _filterFocus: function(e) {\n                var header = e.target.closest(\"th\");\n\n                this._filterFocusable().attr(TABINDEX, 0);\n                this._setCurrent(header);\n                $(header).removeClass(FOCUSED);\n            },\n\n            _tableFocus: function() {\n                var current = this.current();\n                var table = this.lockedTable ? this.lockedTable : this.table;\n\n                //if there is already current, highlighted it\n                //otherwise highlight the first possible cell\n                if (current && current.is(\":visible\")) {\n                    current.addClass(FOCUSED);\n                } else {\n                    if (this._virtualColScroll) {\n                        this._setCurrent(table.find(NAVROW).first().children(NAVCELL).first(), true, true);\n                    } else {\n                        this._setCurrent(table.find(NAVROW).first().children(NAVCELL).first());\n                    }\n                }\n\n                this.table.attr(TABINDEX, 0);\n            },\n\n            _tableBlur: function() {\n                var current = this.current();\n\n                if (current) {\n                    current.removeClass(FOCUSED);\n                }\n            },\n\n            _findCellIndex: function(columns, startIndex, reversed) {\n                var cellIndex;\n                var i;\n\n                if (reversed) {\n                    for (i = startIndex; i >= 0; i--) {\n                        cellIndex = i;\n                        if (!columns[i].hidden) {\n                            break;\n                        }\n                    }\n                } else {\n                    for (i = startIndex; i < columns.length; i++) {\n                        cellIndex = i;\n                        if (!columns[i].hidden) {\n                            break;\n                        }\n                    }\n                }\n\n                return cellIndex;\n            },\n\n            _scrollToColumn: function(key, e) {\n                if (this._virtualCellIndex === undefined$1) {\n                    return false;\n                }\n\n                var that = this;\n                var cellIndex = that._virtualCellIndex;\n                var leafsCols = leafColumns(nonLockedColumns(that.columns));\n                var scrollWidth = 0;\n\n                if (key == (isRtl ? keys.LEFT : keys.RIGHT) && (cellIndex !== leafsCols.length - 1)) {\n                    cellIndex = that._findCellIndex(leafsCols, cellIndex + 1);\n                } else if (key == (isRtl ? keys.RIGHT : keys.LEFT) && cellIndex) {\n                    cellIndex = that._findCellIndex(leafsCols,cellIndex - 1, true);\n                } else if (key == keys.HOME) {\n                    cellIndex = that._findCellIndex(leafsCols, 0);\n                } else if (key == keys.END) {\n                    cellIndex = that._findCellIndex(leafsCols, leafsCols.length - 1, true);\n                }\n\n                for (var i = 0; i < cellIndex; i++) {\n                    scrollWidth += leafsCols[i].width;\n                }\n\n                that._virtualCellIndex = cellIndex;\n                if (e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n                kendo.scrollLeft(that.content, scrollWidth);\n                return true;\n            },\n\n            _tableKeyDown: function(e) {\n                let current = this.current(),\n                    currentTable = current && current.closest(DOT + \"k-grid-table\")[0],\n                    virtualScroll = this.virtualScroll || {},\n                    requestInProgress = this.virtualScrollable && this.virtualScrollable.fetching(),\n                    target = $(e.target),\n                    canHandle = !e.isDefaultPrevented() && !target.is(\":button,a,:input:not(.k-select-checkbox),a>.k-icon,a>.k-svg-icon\");\n\n                if (e.altKey && e.keyCode == keys.DOWN) {\n                    this.current().find(\".k-grid-filter-menu, .k-grid-column-menu\").click();\n                    e.stopImmediatePropagation();\n                    return;\n                }\n\n                // do not handle key down if request in progress\n                // or there isn't current set\n                if (requestInProgress) {\n                    // swallow key events while in progress\n                    e.preventDefault();\n                    return;\n                }\n\n                if (virtualScroll.columns && (!current || !document.body.contains(current[0])) && (this._scrollToColumn(e.keyCode, e))) {\n                    return;\n                }\n\n                if (!current) {\n                    current = $(this.lockedTable).add(this.options.scrollable ? this.table : this.tbody).find(NAVROW).first().children(NAVCELL).first();\n                }\n\n                if (!current.length) {\n                    return;\n                }\n\n                var handled = false;\n\n                if (!e.isDefaultPrevented() && e.keyCode === keys.F10) {\n                    handled = this._focusToolbar();\n                }\n\n                if (canHandle && e.keyCode == keys.UP) {\n                    handled = this._moveUp(current, e.shiftKey, e.ctrlKey);\n                }\n\n                if (canHandle && e.keyCode == keys.DOWN) {\n                    handled = this._moveDown(current, e.shiftKey, e.ctrlKey);\n                }\n\n                if (canHandle && e.keyCode == (isRtl ? keys.LEFT : keys.RIGHT)) {\n                    handled = this._moveRight(current, e.altKey, e.shiftKey, e.ctrlKey, currentTable);\n                }\n\n                if (canHandle && e.keyCode == (isRtl ? keys.RIGHT : keys.LEFT)) {\n                    handled = this._moveLeft(current, e.altKey, e.shiftKey, e.ctrlKey, currentTable);\n                }\n\n                if (canHandle && e.keyCode == keys.PAGEDOWN) {\n                    handled = this._handlePageDown();\n                }\n\n                if (canHandle && e.keyCode == keys.PAGEUP) {\n                    handled = this._handlePageUp();\n                }\n\n                if (canHandle && e.keyCode == keys.HOME) {\n                    handled = this._handleHome(current, e.ctrlKey);\n                }\n\n                if (canHandle && e.keyCode == keys.END) {\n                    handled = this._handleEnd(current, e.ctrlKey);\n                }\n\n                if (canHandle && e.keyCode == keys.SPACEBAR) {\n                    handled = this._handleSpaceKey(current, e.ctrlKey);\n                }\n\n                if (e.keyCode == keys.ENTER || e.keyCode == keys.F2) {\n                    handled = this._handleEnterKey(current, currentTable, target);\n                }\n\n                if (e.keyCode == keys.ESC) {\n                    handled = this._handleEscKey(current, currentTable);\n                }\n\n                if (e.keyCode == keys.TAB) {\n                    handled = this._handleTabKey(current, currentTable, e.shiftKey, target);\n                }\n\n                if (handled) {\n                    //prevent scrolling while pressing the keys\n                    e.preventDefault();\n                    //required in hierarchy\n                    e.stopPropagation();\n                }\n            },\n\n            _focusToolbar: function() {\n                var focusable = this.wrapper.find(\".k-grid-toolbar [tabindex=0]\");\n\n                if (focusable.length > 0) {\n                    focusable.first().addClass(\".k-focus\").trigger(\"focus\");\n\n                    return true;\n                }\n\n                return false;\n            },\n\n            _moveLeft: function(current, altKey, shiftKey, ctrlKey, currentTable) {\n                var next, index;\n                var row = current.parent();\n                //thead or tbody\n                var container = row.parent();\n\n                if (altKey) {\n                    if (row.hasClass(GROUPING_ROW)) {\n                        this.collapseGroup(row);\n                    } else {\n                        this.collapseRow(row);\n                    }\n                } else if (ctrlKey && current.is(DOT + HEADER_CLASS) && this.options.reorderable) {\n                   this._moveColumn(current, true);\n                } else {\n                    index = container.find(NAVROW).index(row);\n                    next = this._prevHorizontalCell(container, current, index);\n\n                    if (!next[0]) {\n                        if (shiftKey) {\n                            if (this.lockedTable) {\n                                next = this._relatedRow(row);\n                                if ($.contains(this.lockedTable[0], row[0])) {\n                                    next = next.prevAll(ITEMROW).first();\n                                }\n                                next = next.children(DATA_CELL).last();\n                            } else {\n                                next = this._tabNext(current, currentTable, true);\n                            }\n                        } else {\n                            container = this._horizontalContainer(container);\n\n                            next = this._prevHorizontalCell(container, current, index);\n\n                            if (next[0] !== current[0]) {\n                                focusTable(this.table, true);\n                            }\n                        }\n                    }\n\n                    this._setCurrent(next);\n                }\n\n                return true;\n            },\n\n            _moveRight: function(current, altKey, shiftKey, ctrlKey, currentTable) {\n                var next, index;\n                var row = current.parent();\n                //thead or tbody\n                var container = row.parent();\n\n                if (altKey) {\n                    if (row.hasClass(GROUPING_ROW)) {\n                        this.expandGroup(row);\n                    } else {\n                        this.expandRow(row);\n                    }\n                 } else if (ctrlKey && current.is(DOT + HEADER_CLASS) && this.options.reorderable) {\n                    this._moveColumn(current, false);\n                } else {\n                    index = container.find(NAVROW).index(row);\n                    next = this._nextHorizontalCell(container, current, index);\n\n                    if (!next[0]) {\n                        if (shiftKey) {\n                           if (this.lockedTable) {\n                                next = this._relatedRow(row);\n                                if ($.contains(this.table[0], row[0])) {\n                                    next = next.nextAll(ITEMROW).first();\n                                }\n                                next = next.children(DATA_CELL).first();\n                            } else {\n                                next = this._tabNext(current, currentTable, false);\n                            }\n                        } else {\n                            container = this._horizontalContainer(container, true);\n\n                            next = this._nextHorizontalCell(container, current, index);\n\n                            if (next[0] !== current[0]) {\n                                focusTable(this.table, true);\n                            }\n                        }\n                    }\n\n                    this._setCurrent(next);\n                }\n\n                return true;\n            },\n\n            _moveUp: function(current, shiftKey, ctrlKey) {\n                //thead or tbody\n                var container = current.parent().parent();\n                var next, cellIndex, index, oldIndex;\n\n                if (shiftKey) {\n                   next = current.parent();\n                   next = next.prevAll(ITEMROW).first();\n                   next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL).last();\n                } else if (ctrlKey && current.parent().is(ITEMROW) && this._hasReorderableRows()) {\n                    cellIndex = current.index();\n                    next = current.parent();\n                    next = next.prevAll(ITEMROW).first();\n                    index = this.tbody.children(ITEMROW).index(next);\n                    oldIndex = this.tbody.children(ITEMROW).index(current.parent());\n\n                    if (index >= 0 && !this.trigger(ROWREORDER, { oldIndex: oldIndex, newIndex: index, row: current.parent() })) {\n                        this.reorderRows(current.parent(), index);\n                        next = this.tbody.children(ITEMROW).eq(index).children().eq(cellIndex);\n                    }\n                } else {\n                   next = this._prevVerticalCell(container, current);\n                   if (!next[0]) {\n                      this._lastCellIndex = 0;\n                      container = this._verticalContainer(container, true);\n\n                      next = this._prevVerticalCell(container, current);\n\n                      if (next[0]) {\n                          focusTable(this.table, true);\n                      }\n                   }\n                }\n\n                var tmp = this._lastCellIndex || 0;\n                this._setCurrent(next);\n                this._lastCellIndex = tmp;\n\n                return true;\n            },\n\n            _moveDown: function(current, shiftKey, ctrlKey) {\n                //thead or tbody\n                var container = current.parent().parent();\n                var next, cellIndex, index, oldIndex;\n\n                if (shiftKey) {\n                    next = current.parent();\n                    next = next.nextAll(ITEMROW).first();\n                    next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL).first();\n                } else if (ctrlKey && current.parent().is(ITEMROW) && this._hasReorderableRows()) {\n                    cellIndex = current.index();\n                    next = current.parent();\n                    next = next.nextAll(ITEMROW).first();\n                    index = this.tbody.children(ITEMROW).index(next);\n                    oldIndex = this.tbody.children(ITEMROW).index(current.parent());\n\n                    if (index >= 0 && !this.trigger(ROWREORDER, { oldIndex: oldIndex, newIndex: index, row: current.parent() })) {\n                        this.reorderRows(current.parent(), index + 1);\n                        next = this.tbody.children(ITEMROW).eq(index).children().eq(cellIndex);\n                    }\n                } else {\n                    next = this._nextVerticalCell(container, current);\n                    if (!next[0]) {\n                        this._lastCellIndex = 0;\n                        container = this._verticalContainer(container);\n\n                        next = this._nextVerticalCell(container, current);\n                        if (next[0]) {\n                            focusTable(this.table, true);\n                        }\n                    }\n                }\n                var tmp = this._lastCellIndex || 0;\n                this._setCurrent(this._findVisibleCell(next));\n                this._lastCellIndex = tmp;\n                return true;\n            },\n\n            _moveColumn: function(current, isLeft) {\n                var elements = this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter + \":visible\");\n\n                var columns = visibleColumns(flatColumnsInDomOrder(this.columns));\n                var oldIndex = elements.index($(current));\n                var offset = isLeft ? - 1 : 1;\n                var column = columns[oldIndex];\n                var newIndex = targetParentContainerIndex(columns, this.columns, oldIndex, oldIndex + offset);\n                if (newIndex >= 0) {\n                    this.reorderColumn(newIndex, column, isLeft);\n                    this.trigger(COLUMNREORDER, {\n                        newIndex: newIndex,\n                        oldIndex: oldIndex,\n                        column: column\n                    });\n                }\n            },\n\n            _handleHome: function(current, ctrl) {\n                var row = current.parent();\n                var rowContainer = row.parent();\n                var isInLockedTable = this.lockedTable && this.lockedTable.children(\"tbody\")[0] === rowContainer[0];\n                var isInBody = rowContainer[0] === this.tbody[0];\n                var prev;\n\n                if (this._hasVirtualColumns()) {\n                    this._scrollToColumn(keys.HOME);\n                    return true;\n                }\n\n                if (ctrl) {\n                    if (this.lockedTable) {\n                        prev = this.lockedTable.find(ITEMROW).first().children(NAVCELL).first();\n                    } else {\n                        prev = this.table.find(ITEMROW).first().children(NAVCELL).first();\n                    }\n                } else if (isInBody || isInLockedTable) {\n                    if (isInBody && this.lockedTable) {\n                        row = this._relatedRow(row);\n                    }\n                    prev = row.children(DATA_CELL).first();\n                }\n\n                if (prev && prev.length) {\n                    this._setCurrent(prev);\n                    return true;\n                }\n            },\n\n            _handleEnd: function(current, ctrl) {\n                var row = current.parent();\n                var rowContainer = row.parent();\n                var isInLockedTable = this.lockedTable && this.lockedTable.children(\"tbody\")[0] === rowContainer[0];\n                var isInBody = rowContainer[0] === this.tbody[0];\n                var next;\n\n                if (this._hasVirtualColumns()) {\n                    this._scrollToColumn(keys.END);\n                    return true;\n                }\n\n                if (ctrl) {\n                    next = this.table.find(ITEMROW).last().children(NAVCELL).last();\n                } else if (isInBody || isInLockedTable) {\n                    if (!isInBody && this.lockedTable) {\n                        row = this._relatedRow(row);\n                    }\n                    next = row.children(DATA_CELL).last();\n                }\n\n                if (next && next.length) {\n                    this._setCurrent(next);\n                    return true;\n                }\n            },\n\n            _handlePageDown: function() {\n                if (!this.options.pageable) {\n                    return false;\n                }\n\n                this.dataSource.page(this.dataSource.page() + 1);\n\n                return true;\n            },\n\n            _handlePageUp: function() {\n                if (!this.options.pageable) {\n                    return false;\n                }\n\n                this.dataSource.page(this.dataSource.page() - 1);\n\n                return true;\n            },\n\n            _handleTabKey: function(current, currentTable, shiftKey, target) {\n                var isInCell = this.options.editable && this._editMode() == \"incell\";\n                var cell, filterFocusable;\n\n                if (!isInCell ||\n                    current.is(\"th\") ||\n                    (this.options.scrollable ? this._headertables.filter(currentTable).length : this.thead.filter(target).length)) {\n                        if (current.parent().hasClass(\"k-filter-row\")) {\n                            filterFocusable = this._filterFocusable();\n\n                            if (!shiftKey && filterFocusable[filterFocusable.length - 1] === document.activeElement) {\n                                filterFocusable.first().trigger(\"focus\");\n\n                                return true;\n                            } else if (shiftKey && filterFocusable[0] === document.activeElement) {\n                                filterFocusable.last().trigger(\"focus\");\n\n                                return true;\n                            }\n                        }\n\n                        return false;\n                }\n\n                cell = $(activeElement()).closest(\".k-edit-cell\");\n\n                if (cell[0] && cell[0] !== current[0]) {\n                    current = cell;\n                }\n\n                cell = this._tabNext(current, currentTable, shiftKey);\n\n                if (cell[0] === current[0]) {\n                    return false;\n                }\n\n                if (cell.length) {\n                    this._handleEditing(current, cell, cell.closest(\"table\"));\n\n                    return true;\n                }\n\n                return false;\n            },\n\n            _handleEscKey: function(current) {\n                var active = activeElement();\n                var isInCell = this._editMode() == \"incell\";\n\n                if (!isInEdit(current)) {\n                    if (current.has(active).length) {\n                        // return focus back to the table\n                        focusTable(this.table, true);\n\n                        return true;\n                    }\n\n                    if (current.parent().hasClass(\"k-filter-row\")) {\n                        this._filterFocusable().attr(TABINDEX, -1);\n                        focusTable(this.table, true);\n\n                        return true;\n                    }\n\n                    return false;\n                }\n\n                if (isInCell) {\n                    this.closeCell(true);\n                } else {\n                    var currentIndex = $(current).parent().index();\n                    if (active) {\n                        active.blur();\n                    }\n                    this.cancelRow(true);\n                    if (currentIndex >= 0) {\n                        this._setCurrent(this.items().eq(currentIndex).children(NAVCELL).first());\n                    }\n                }\n\n                focusTable(this.table, true);\n\n                return true;\n            },\n\n            _toggleCurrent: function(current, editable, hasDetails) {\n                var row = current.parent();\n\n                if (current.is(\".k-command-cell\")) {\n                    return false;\n                }\n\n                if (row.is(\".k-filter-row\")) {\n                    return false;\n                }\n\n                if (row.is(DOT + GROUPING_ROW)) {\n                    row.find(\".k-icon,.k-svg-icon\").first().click();\n\n                    return true;\n                }\n\n                if (!editable && hasDetails) {\n                    row.find(\".k-icon,.k-svg-icon\").first().click();\n\n                    return true;\n                }\n\n                return false;\n            },\n\n            _handleSpaceKey: function(current, ctrlKey) {\n                var that = this;\n\n                if (!ctrlKey || !that.groupable || !current.hasClass(HEADER_CLASS)) {\n                    return;\n                }\n\n                var descriptors = that.groupable.descriptors();\n                var field = current.attr(kendo.attr(\"field\"));\n                var aggregates = that.groupable.aggregates();\n\n                if (that.groupable._canDrag(current)) {\n                    descriptors.push({\n                        field: field,\n                        dir: \"asc\",\n                        aggregates: aggregates || []\n                    });\n                } else {\n                    descriptors = $.grep(descriptors, function(item)\n                    {\n                        return item.field !== field;\n                    });\n                }\n\n                that.dataSource.group(descriptors);\n\n                return true;\n            },\n\n            _handleEnterKey: function(current, currentTable, target) {\n                var editable = this.options.editable && this.options.editable.update !== false;\n                var container = target.closest(\"td\");\n                var hasDetails = this._hasDetails();\n                var link, filterFocusable;\n\n                if (!target.is(\"table\") && !$.contains(current[0], target[0])) {\n                    current = container;\n                }\n\n                if (current.is(\"th\")) {\n                    // sort the column, if possible\n                    link = current.find(\".k-link\");\n\n                    if (current.has($(activeElement())).length > 0) {\n                        return false;\n                    } else if (link.length) {\n                        link.click();\n                    } else if (current.parent().hasClass(\"k-filter-row\")) {\n                        filterFocusable = this._filterFocusable();\n                        filterFocusable.attr(TABINDEX, 0);\n                        current.find(\":kendoFocusable\").first().focus();\n                    } else {\n                        current.find(CHECKBOXINPUT).trigger(\"focus\");\n                    }\n\n                    return true;\n                }\n                if (this._toggleCurrent(current, editable, hasDetails)) {\n                    return true;\n                }\n\n                var focusable = current.find(\":kendoFocusable\").first();\n                if (focusable[0] && !current.hasClass(\"k-edit-cell\") && current.hasClass(\"k-focus\")) {\n                    focusable.trigger(\"focus\");\n\n                    return true;\n                }\n\n                if (editable && !target.is(\":button,.k-button,textarea\")) {\n                    if (!container[0]) {\n                        container = current;\n                    }\n\n                    this._handleEditing(container, false, currentTable);\n\n                    return true;\n                }\n\n                return false;\n            },\n\n            _nextHorizontalCell: function(table, current, originalIndex) {\n                var cells = current.nextAll(DATA_CELL);\n\n                if (!cells.length) {\n                    var rows = table.find(NAVROW);\n                    var rowIndex = rows.index(current.parent());\n\n                    //no sibling cells are found and we've changed the table\n                    if (rowIndex == -1) {\n                        if (current.hasClass(HEADER_CLASS)) {\n                            var headerRows = [];\n                            mapColumnToCellRows([lockedColumns(this.columns)[0]], childColumnsCells(rows.eq(0).children(\":visible\").first()), headerRows, 0, 0);\n\n                            if (headerRows[originalIndex]) {\n                                return headerRows[originalIndex][0];\n                            }\n\n                            return current;\n                        }\n\n                        //current is in filter row\n                        if (current.parent().hasClass(\"k-filter-row\")) {\n                            return rows.last().children(DATA_CELL).first();\n                        }\n\n                        //get the same row index in the new table\n                        return this._findVisibleCell(rows.eq(originalIndex).children(DATA_CELL_HIDDENINCLUDED).first());\n                    }\n                }\n\n                return this._findVisibleCell(current.nextAll(DATA_CELL + \",[hidden]\").eq(0));\n            },\n\n            _prevHorizontalCell: function(table, current, originalIndex) {\n                var cells = current.prevAll(DATA_CELL);\n\n                if (!cells.length) {\n                    var rows = table.find(NAVROW);\n                    var rowIndex = rows.index(current.parent());\n\n                    //no sibling cells are found and we've changed the table\n                    if (rowIndex == -1) {\n                        if (current.hasClass(HEADER_CLASS)) {\n                            var headerRows = [];\n                            var columns = lockedColumns(this.columns);\n                            mapColumnToCellRows([columns[columns.length - 1]], childColumnsCells(rows.eq(0).children().last()), headerRows, 0, 0);\n\n                            if (headerRows[originalIndex]) {\n                                return headerRows[originalIndex][0];\n                            }\n\n                            return current;\n                        }\n\n                        //current is in filter row\n                        if (current.parent().hasClass(\"k-filter-row\")) {\n                            return rows.last().children(DATA_CELL).last();\n                        }\n\n                        //get the same row index in the new table\n                        return rows.eq(originalIndex).children(DATA_CELL).last();\n                    }\n                }\n\n                cells = current.prevAll(DATA_CELL + \",[hidden]\");\n                let cellToFocus = this._findVisibleCell(cells.first());\n                if (cellToFocus.is(\".k-group-cell\")) {\n                    return cellToFocus.next(DATA_CELL);\n                }\n\n                return cellToFocus;\n            },\n\n            _currentDataIndex: function(table, current) {\n                var index = current.attr(\"data-index\");\n\n                if (!index) {\n                    return undefined$1;\n                }\n\n                var lockedColumnsCount = lockedColumns(this.columns).length;\n                if (lockedColumnsCount && !table.closest(DIV).hasClass(\"k-grid-content-locked\")[0]) {\n                    return index - lockedColumnsCount;\n                }\n\n                return index;\n            },\n\n            _findVisibleCell: function($cell) {\n                var col = $cell.index();\n                var row = $cell.closest('tr').index();\n                var $newFocus;\n\n                if ($cell.is('[hidden]')) {\n                    $newFocus = $cell.prevAll(':not([hidden])').first();\n                    var hiddenCount = $cell.prevUntil(':not([hidden])', '[hidden]').length;\n                    if (!$newFocus.attr('colspan') || ($newFocus.attr('colspan') > 1 && $newFocus.attr('colspan') <= hiddenCount + 1)) {\n                        $newFocus = $cell.prevAll('[hidden]').last();\n                        if ($newFocus.length === 0) {\n                            return $cell.closest('tr').prevAll().find(`td:nth-of-type(${col + 1}):visible`).last();\n                        }\n\n                        while (!$newFocus.attr('rowspan') && !($newFocus.attr('rowspan') > 1 && $newFocus.attr('rowspan') != row - $newFocus.closest('tr').index()) && Math.abs($newFocus.index() - col) != $newFocus.attr('colspan')) {\n                            $newFocus = $newFocus.closest('tr').prevAll().find('td, th').eq(col).first();\n                            if ($newFocus.length === 0) {\n                                $newFocus = $cell;\n                                break;\n                            }\n                        }\n                    }\n                } else {\n                    $newFocus = $cell;\n                }\n\n                return $newFocus;\n            },\n\n            _prevVerticalCell: function(container, current) {\n                var cells;\n                var row = current.parent();\n                var rows = container.children(NAVROW);\n                var rowIndex = rows.index(row);\n                //get data-index in case of last level of multi-level columns\n                var index = this._currentDataIndex(container, current);\n\n                //current is in the header, but not at the last level of multi-level columns\n                if (index || current.hasClass(HEADER_CLASS)) {\n                    cells = parentColumnsCells(current);\n                    return cells.eq(cells.length - 2);\n                }\n\n                //check this out\n                index = Math.max(row.children(DATA_CELL_HIDDENINCLUDED).index(current), this._lastCellIndex || 0);\n\n                //if current is inside filter row\n                if (row.hasClass(\"k-filter-row\")) {\n                    let offset = rows.last().children(\".k-group-cell\").length;\n\n                    return leafDataCells(container).filter(isCellVisible).eq(Math.max(0, index - offset));\n                }\n\n                //move up to header container\n                if (rowIndex == -1) {\n                    if (this._hasVirtualColumns()) {\n                        index = this._virtualCellIndex;\n                    }\n                    //is there filter row in the header container\n                    row = container.find(\"tr.k-filter-row:visible\");\n                    if (!row[0]) {\n                        // in hierarchical grid we need to correct the index\n                        // since the k-hierarchy cell is navigatable\n                        if ((this._hasDetails() || current.parent().find('.k-hierarchy-cell').length) && index) {\n                            index--;\n                        }\n\n                        let offset = 0;\n                        if (current.parent().is(\".k-table-group-row\")) {\n                            offset = rows.last().children(\".k-group-cell\").length;\n                        }\n\n                        return leafDataCells(container).eq(Math.max(0, index - offset));\n                    } else {\n                        if (this._hasDetails()) {\n                            index--;\n                        }\n                    }\n                } else {\n                    row = rowIndex === 0 ? $() : rows.eq(rowIndex - 1);\n                }\n\n                cells = row.children(DATA_CELL_HIDDENINCLUDED);\n                if (cells.length > index) {\n                    let nextCell = cells.eq(index);\n                    if (nextCell.is(\".k-group-cell\")) {\n                        nextCell = nextCell.nextAll(DATA_CELL_HIDDENINCLUDED + \":not(.k-group-cell)\").first();\n                    }\n\n                    return this._findVisibleCell(nextCell);\n                }\n\n                return cells.eq(0);\n            },\n\n            _nextVerticalCell: function(container, current) {\n                var cells;\n                var originalRow;\n                var row = originalRow = current.parent();\n                var rows = container.children(NAVROW);\n                var rowIndex = rows.index(row);\n                //get data-index in case of last level of multi-level columns\n                var index = this._currentDataIndex(container, current);\n                var virtualScroll = this.virtualScroll || {};\n                var colspan;\n                //current is in the header, but not at the last level of multi-level columns\n                //and we are not changing the table\n                if (rowIndex != -1 && index === undefined$1 && current.hasClass(HEADER_CLASS)) {\n                    return childColumnsCells(current).eq(1);\n                }\n\n                index = index ? parseInt(index, 10) : row.children(DATA_CELL_HIDDENINCLUDED).index(current);\n                index = Math.max(index, this._lastCellIndex || 0);\n\n                //move down to data container\n                if (rowIndex == -1) {\n                    row = rows.eq(0);\n                    if (virtualScroll.columns) {\n                        colspan = parseInt(row.children().first().attr(\"colspan\"), 10);\n                        index = this._virtualCellIndex - (colspan > 1 ? colspan : 0);\n                    }\n                    // in hierarchical grid we need to correct the index\n                    // since the k-hierarchy cell is navigatable\n                    if (this._hasDetails() || row.find('.k-hierarchy-cell').length) {\n                        index++;\n                    }\n\n                    if (row.hasClass(\"k-table-group-row\")) {\n                        index += originalRow.children(\".k-group-cell\").length;\n                    }\n                } else {\n                    row = rows.eq(rowIndex + current[0].rowSpan);\n                }\n\n                cells = row.children(\".k-group-cell,\" + DATA_CELL_HIDDENINCLUDED);\n\n                let cellToFocus = cells.eq(0);\n                if (cells.length > index) {\n                    cellToFocus = cells.eq(index);\n                }\n\n                if (cellToFocus.is(\".k-group-cell\")) {\n                    cellToFocus = cellToFocus.next(\":not(k-group-cell):not([hidden])\");\n                }\n\n                return cellToFocus;\n            },\n\n            _verticalContainer: function(container, up) {\n                var table = container.parent();\n                var length = this._navigatableTables.length;\n                var step = Math.floor(length / 2);\n                var index = inArray(table[0], this._navigatableTables);\n\n                if (up) {\n                    step *= -1;\n                }\n                index += step;\n\n                if (index >= 0 || index < length) {\n                    table = this._navigatableTables.eq(index);\n                }\n\n                return table.find(up ? \">thead\" : \">tbody\");\n            },\n\n            _filterFocusable: function() {\n                return this.wrapper.find(\".k-filter-row\").find(\".k-dropdownlist, .k-input .k-input-inner:visible, input[type='radio']:visible, input[type='checkbox']:visible\");\n            },\n\n            _horizontalContainer: function(container, right) {\n                var length = this._navigatableTables.length;\n                if (length <= 2) {\n                    return container;\n                }\n\n                var table = container.parent();\n                var index = inArray(table[0], this._navigatableTables);\n\n                index += right ? 1 : -1;\n\n                if (right && (index == 2 || index == length)) {\n                    return container;\n                }\n\n                if (!right && (index == 1 || index < 0)) {\n                    return container;\n                }\n\n                return this._navigatableTables.eq(index).find(\"thead, tbody\");\n            },\n\n            _tabNext: function(current, currentTable, back) {\n                var switchRow = true;\n                var next = back ? current.prevAll(DATA_CELL).first() : current.nextAll(\":visible\").first();\n\n                if (!next.length) {\n                    next = current.parent();\n                    if (this.lockedTable) {\n                        switchRow = (back && currentTable == this.lockedTable[0]) || (!back && currentTable == this.table[0]);\n                        next = this._relatedRow(next);\n                    }\n\n                    if (switchRow) {\n                        if (this._hasVirtualColumns()) {\n                            return current;\n                        }\n                        next = next[back ? \"prevAll\" : \"nextAll\"](\"tr:not(.k-grouping-row):not(.k-detail-row):visible\").first();\n                    }\n                    if (back) {\n                        next = next.children(DATA_CELL).last();\n                    } else {\n                        next = next.children(DATA_CELL).first();\n                    }\n                }\n\n                return next;\n            },\n\n            _handleEditing: function(current, next, table) {\n                var that = this,\n                    active = $(activeElement()),\n                    mode = that._editMode(),\n                    isIE = browser.msie,\n                    editContainer = that._editContainer,\n                    focusable,\n                    editable = that.options.editable && that.options.editable.update !== false,\n                    isEdited;\n\n                table = $(table);\n                if (mode == \"incell\") {\n                    isEdited = current.hasClass(\"k-edit-cell\");\n                } else {\n                    isEdited = current.parent().hasClass(\"k-grid-edit-row\");\n                }\n\n                if (that.editable) {\n                    if ($.contains(editContainer[0], active[0])) {\n                        active.trigger(\"blur\");\n                        if (isIE) {\n                            //IE10 with jQuery 1.9.x does not trigger blur handler\n                            //numeric textbox does trigger change\n                            active.trigger(\"blur\");\n                        }\n                    }\n\n                    if (!that.editable) {\n                        focusTable(that.table);\n                        return;\n                    }\n\n                    if (that.editable.end()) {\n                        if (mode == \"incell\") {\n                            that.closeCell();\n                        } else {\n                            that.saveRow();\n                            isEdited = true;\n                        }\n                    } else {\n                        if (mode == \"incell\") {\n                            that._setCurrent(editContainer);\n                        } else {\n                            that._setCurrent(editContainer.children().filter(DATA_CELL).first());\n                        }\n                        focusable = editContainer.find(\":kendoFocusable\").first()[0];\n                        if (focusable) {\n                            focusable.focus();\n                        }\n                        return;\n                    }\n                }\n\n                if (next) {\n                    that._setCurrent(next);\n                }\n\n                focusTable(that.table, true);\n\n                if (!editable) {\n                    return;\n                }\n\n                if ((!isEdited && !next) || next) {\n                    if (mode === INCELL) {\n                        if (!$(that.current()).hasClass(HIERARCHY_CELL_CLASS)) {\n                            that.editCell(that.current());\n                        }\n                    } else {\n                        that.editRow(that.current().parent());\n                    }\n                }\n            },\n\n            _wrapper: function() {\n                var that = this,\n                    table = that.table,\n                    height = that.options.height,\n                    width = that.options.width,\n                    wrapper = that.element;\n\n                if (!wrapper.is(DIV)) {\n                   wrapper = wrapper.wrap(\"<div/>\").parent();\n                }\n\n                that.wrapper = wrapper.addClass(\"k-grid \" + kendo.getValidCssClass(\"k-grid-\", \"size\", that.options.size));\n\n                if (height) {\n                    that.wrapper.css(HEIGHT, height);\n                    table.css(HEIGHT, AUTO);\n                }\n\n                if (width) {\n                    that.wrapper.css(WIDTH, width);\n                }\n\n                that._initMobile();\n            },\n\n            _initContextMenu: function() {\n                var that = this,\n                    options = that.options,\n                    groupsContextMenu = isPlainObject(options.contextMenu) && isArray(options.contextMenu.groups) ? { items: options.contextMenu.groups } : { items: defaultGroupsContextMenu },\n                    tbodyContextMenu = isPlainObject(options.contextMenu) && isArray(options.contextMenu.body) ? { items: options.contextMenu.body } : { items: defaultBodyContextMenu },\n                    theadContextMenu = isPlainObject(options.contextMenu) && isArray(options.contextMenu.head) ? { items: options.contextMenu.head } : { items: defaultHeadContextMenu };\n\n                var mainOptions = isPlainObject(options.contextMenu) ? options.contextMenu : {};\n\n                tbodyContextMenu = extend({}, {\n                    messages: options.messages,\n                    target: that.tbody,\n                    filter: \".k-table-td\",\n                    action: that._action.bind(that),\n                    states: that._buildStates()\n                }, mainOptions, tbodyContextMenu);\n\n                theadContextMenu = extend({}, {\n                    messages: options.messages,\n                    target: that.thead,\n                    filter: \".k-table-th\",\n                    action: that._action.bind(that),\n                    states: that._buildStates()\n                }, mainOptions, theadContextMenu);\n\n                if (that.groupable) {\n                    groupsContextMenu = extend({}, {\n                        showOn: \"click\",\n                        target: that.groupable.groupContainer,\n                        filter: \".k-groupable-context-menu\",\n                        messages: options.messages,\n                        action: that._action.bind(that),\n                        states: that._buildStates()\n                    }, mainOptions, groupsContextMenu);\n                }\n\n\n                that.tbodyContextMenu = new ui.grid.ContextMenu(\"<ul></ul>\", tbodyContextMenu);\n                that.theadContextMenu = new ui.grid.ContextMenu(\"<ul></ul>\", theadContextMenu);\n                that.groupsContextMenu = !!that.groupable && new ui.grid.ContextMenu(\"<ul></ul>\", groupsContextMenu);\n            },\n\n            _buildStates: function() {\n                var that = this;\n\n                return {\n                    isEditable: that.options.editable,\n                    isSelectable: that.options.selectable,\n                    isSortable: that.options.sortable,\n                    isRowReorderable: isPlainObject(that.options.reorderable) ? that.options.reorderable.rows : that.options.reorderable,\n                    isGroupable: that.options.groupable,\n                    allowPaste: that.options.allowPaste,\n                    alwaysDisabled: false,\n                    hasSelection: () => (this.select() ? this.select().length > 0 : false),\n                    isSorted: () => !(this.dataSource.sort() ? this.dataSource.sort().length > 0 : false),\n                    canMoveGroupPrev: (target) =>{\n                        var group = $(target).closest(\".k-chip\");\n\n                        return group.index() > 0;\n                    },\n                    canMoveGroupNext: (target) =>{\n                        var length = $(target).closest(\".k-chip-list\").children().length - 1;\n                        var group = $(target).closest(\".k-chip\");\n\n                        return group.index() < length;\n                    }\n                };\n            },\n\n            _action: function(args) {\n                var commandName = args.command,\n                    commandOptions = extend({ grid: this }, args.options),\n                    command = new ui.grid.commands[commandName](commandOptions);\n\n                return command.exec();\n            },\n\n            _initMobile: function() {\n                var options = this.options;\n                var that = this;\n\n                this._isMobile = (options.mobile === true && kendo.support.mobileOS) ||\n                                    options.mobile === \"phone\" ||\n                                    options.mobile === \"tablet\";\n\n                if (this._isMobile) {\n                    var html = this.wrapper.addClass(\"k-grid-mobile\").wrap(\n                        '<div data-' + kendo.ns + 'stretch=\"true\" data-' + kendo.ns + 'role=\"view\" ' +\n                        'data-' + kendo.ns + 'init-widgets=\"false\"></div>'\n                    )\n                    .parent();\n\n                    this.pane = this._createPane(html);\n                    this.view = this.pane.view();\n\n                    if (options.height) {\n                        this.pane.element.parent().css(HEIGHT, options.height);\n                    } else {\n                        this.pane.element.parent().css(HEIGHT, this.wrapper[0].style.height);\n                    }\n\n                    this._editAnimation = \"slide\";\n\n                    // Grid transitions should not propagate to the view\n                    that.wrapper.on(\"transitionend\" + NS, function(e) {\n                        e.stopPropagation();\n                    });\n\n                    that.wrapper.on(\"contextmenu\" + NS, \"th a\", function(e) {\n                        e.preventDefault();\n                        return false;\n                    });\n\n                    this.view.bind(\"showStart\", function() {\n                        if (that._isLocked()) {\n                            that._updateTablesWidth();\n                            that._applyLockedContainersWidth();\n                            that._syncLockedContentHeight();\n                            that._syncLockedHeaderHeight();\n                            that._syncLockedFooterHeight();\n                        }\n                    });\n                }\n            },\n\n            _createPane: function(html) {\n                var pane = kendo.Pane.wrap(html, {\n                    viewEngine: {\n                        viewOptions: {\n                            renderOnInit: true,\n                            wrap: false,\n                            wrapInSections: true,\n                            detachOnHide: false,\n                            detachOnDestroy: false\n                        }\n                    }\n                });\n\n                return pane;\n            },\n\n            _initLoader: function(options) {\n                var that = this,\n                    defaultOptions = {\n                        size: 'medium',\n                        messages: { exporting: 'Exporting...' }\n                };\n                defaultOptions = $.extend({}, defaultOptions, options);\n\n                const loader = $(\"<div></div>\").kendoLoader(defaultOptions).data(\"kendoLoader\");\n\n                that.loader = loader;\n                that._loaderContainer = useLoaderContainer.bind(that);\n            },\n\n            _tbody: function() {\n                var that = this,\n                    table = that.table,\n                    tbody;\n\n                tbody = table.find(\">tbody\");\n\n                if (!tbody.length) {\n                    tbody = $(\"<tbody/>\").appendTo(table);\n                }\n\n                tbody.addClass('k-table-tbody');\n                that.tbody = tbody;\n            },\n\n            _scrollable: function() {\n                var that = this,\n                    header,\n                    table,\n                    options = that.options,\n                    scrollable = options.scrollable,\n                    hasVirtualScroll = scrollable !== true && scrollable.virtual,\n                    virtualScroll = hasVirtualScroll ? parseVirtualSettings(scrollable.virtual) : null,\n                    scrollbar = !kendo.support.kineticScrollNeeded || (virtualScroll && virtualScroll.rows) ? kendo.support.scrollbar() : 0,\n                    headerWrap;\n\n                if (scrollable) {\n                    header = that.wrapper.children(\".k-grid-header\");\n\n                    if (!header[0]) {\n                        header = $('<div class=\"k-grid-header\" />').insertBefore(that.table);\n                    }\n\n                    // workaround for IE issue where scroll is not raised if container is same width as the scrollbar\n                    header.css((isRtl ? \"padding-left\" : \"padding-right\"), scrollable.virtual ? scrollbar + 1 : scrollbar);\n                    table = $('<table role=\"none\" class=\"k-grid-header-table k-table\"/>');\n                    table.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", options.size));\n\n                    table.width(that.table[0].style.width);\n\n                    table.append(that.thead);\n                    header.empty().append($('<div class=\"k-grid-header-wrap k-auto-scrollable\" />').append(table));\n\n\n                    that.content = that.table.parent();\n                    that.virtualScroll = virtualScroll;\n\n                    if (that.content.is(\".k-virtual-scrollable-wrap, \" + DOT + classNames.scrollContainer)) {\n                        that.content = that.content.parent();\n                    }\n\n                    if (!that.content.is(\".k-grid-content, .k-virtual-scrollable-wrap\")) {\n                        that.content = that.table.wrap('<div class=\"k-grid-content k-auto-scrollable\" />').parent();\n                    }\n\n                    if (!that.content.parent().hasClass(\"k-grid-container\")) {\n                        that.content.wrap(\"<div class='k-grid-container' />\").parent();\n                    }\n\n                    if (virtualScroll && virtualScroll.rows && !that.virtualScrollable) {\n                        that._createVirtualScrollable();\n                    }\n\n                    if (virtualScroll && virtualScroll.columns) {\n\n                        that.table.css({\n                            width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns)))\n                        });\n                    }\n\n                    headerWrap = header.children(\".k-grid-header-wrap\");\n\n                    that.scrollables = headerWrap.add(that.content);\n\n                    // the footer may exists if rendered from the server\n                    var footer = that.wrapper.find(\".k-grid-footer\");\n\n                    if (footer.length) {\n                        that.scrollables = that.scrollables.add(footer.children(\".k-grid-footer-wrap\"));\n                    }\n\n                    headerWrap.off(\"scroll\" + NS).on(\"scroll\" + NS, function(e) {\n                        if (that._scrollLeft !== this.scrollLeft) {\n                            kendo.scrollLeft(that.scrollables.not(e.currentTarget), this.scrollLeft);\n                        }\n                    });\n\n                    if (virtualScroll && virtualScroll.rows) {\n                        that.content.find(\">.k-virtual-scrollable-wrap\").off(\"scroll\" + NS).on(\"scroll\" + NS, function() {\n                            var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                            that._scrollLeft = this.scrollLeft;\n                            kendo.scrollLeft(that.scrollables, this.scrollLeft);\n                            if (that.lockedContent) {\n                                that.lockedContent[0].scrollTop = this.scrollTop;\n                            }\n                            if (virtualScroll.columns && isScrollingLeft) {\n                                that.refresh();\n                            }\n                        });\n                    } else {\n                        var endless = scrollable.endless;\n                        var originalPageSize = that.dataSource.options.pageSize;\n                        if (endless) {\n                            that._endlessPageSize = originalPageSize;\n                        }\n                        that.content.off(\"scroll\" + NS).on(\"scroll\" + NS, function(e) {\n                            var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                            that._scrollLeft = this.scrollLeft;\n                            kendo.scrollLeft(that.scrollables.not(e.currentTarget), that._scrollLeft);\n                            if (that.lockedContent && e.currentTarget == that.content[0]) {\n                                that.lockedContent[0].scrollTop = this.scrollTop;\n                            }\n                            if (endless) {\n                                if ((this.scrollTop + this.clientHeight - this.scrollHeight >= -10) &&\n                                    !that._endlessFetchInProgress &&\n                                    that._endlessPageSize < that.dataSource.total()) {\n                                    that._skipRerenderItemsCount = that._endlessPageSize;\n                                    that._endlessPageSize = that._endlessPageSize + originalPageSize;\n                                    that.dataSource.options.endless = true;\n                                    that._endlessFetchInProgress = true;\n                                    that.dataSource.pageSize(that._endlessPageSize);\n                                }\n                            }\n\n                            if (virtualScroll && virtualScroll.columns && isScrollingLeft) {\n                                  that._virtualColScroll = true;\n                                  that._cacheEditableState();\n                                  that.refresh();\n                                  that._restoreEditableState();\n                                  that._virtualColScroll = false;\n                            }\n\n                            if (that.rowResizer) {\n                                that.rowResizer.css(\"left\", e.currentTarget.scrollLeft + \"px\");\n                            }\n                        });\n\n                        var touchScroller = that.content.data(\"kendoTouchScroller\");\n                        if (touchScroller) {\n                            touchScroller.destroy();\n                        }\n\n                        touchScroller = kendo.touchScroller(that.content);\n                        if (touchScroller && touchScroller.movable) {\n                            that.touchScroller = touchScroller;\n                            touchScroller.movable.bind(\"change\", function(e) {\n                                kendo.scrollLeft(that.scrollables, -e.sender.x);\n                                if (that.lockedContent) {\n                                    that.lockedContent.scrollTop(-e.sender.y);\n                                }\n                            });\n\n                            that.one(DATABOUND, function(e) {\n                                e.sender.wrapper.addClass(\"k-grid-backface\");\n                            });\n                        }\n                    }\n                }\n            },\n\n            _createVirtualScrollable: function() {\n                var that = this;\n\n                if (that.virtualScrollable) {\n                    that.virtualScrollable.destroy();\n                }\n\n                that.virtualScrollable = new VirtualScrollable(that.content, {\n                    dataSource: that.dataSource,\n                    itemHeight: function() { return that._averageRowHeight(); },\n                    page: function() {\n                        that._restoreEditableState();\n                    },\n                    scroll: function() {\n                        that._focusEditable();\n                    },\n                    loadStart: function() {\n                        that._progress(true);\n                    },\n                    loadEnd: function() {\n                        that._progress(false);\n                    }\n                });\n\n                that.virtualScrollable.bind(PAGING, that._onVirtualPaging.bind(that));\n            },\n\n            _onVirtualPaging: function() {\n                var that = this;\n\n                that._cacheEditableState();\n\n                if (that._isVirtualIncellEditable()) {\n                    that._shouldClearEditableState = false;\n                    that.closeCell();\n                    that._shouldClearEditableState = true;\n                }\n            },\n\n            _isVirtualEditable: function() {\n                return this._isVirtualIncellEditable() || this._isVirtualInlineEditable() || this._isVirtualPopupEditable();\n            },\n\n            _isVirtualInlineEditable: function() {\n                return (this.virtualScrollable) && this._editMode() === INLINE;\n            },\n\n            _isVirtualIncellEditable: function() {\n                return (this.virtualScrollable) && this._editMode() === INCELL;\n            },\n\n            _isVirtualPopupEditable: function() {\n                return this.virtualScrollable && this._editMode() === \"popup\";\n            },\n\n            _hasVirtualColumns: function() {\n                return (this.virtualScroll || {}).columns ? true : false;\n            },\n\n            _scrollVirtualWrapper: function() {\n                var that = this;\n                var scrollable = that.virtualScrollable;\n\n                if (that._isVirtualInlineEditable() || that._isVirtualIncellEditable()) {\n                    if (scrollable._isScrolledToBottom()) {\n                        scrollable._scrollWrapperToBottom();\n                    } else if (scrollable._isScrolledToTop()) {\n                        scrollable._scrollWrapperToTop();\n                    }\n                }\n            },\n\n            _scrollVirtualWrapperOnColumnResize: function() {\n                var virtualScrollable = this.virtualScrollable;\n\n                if (virtualScrollable) {\n                    virtualScrollable._scrollWrapperOnColumnResize();\n                }\n            },\n\n            _restoreEditableState: function() {\n                var that = this;\n                var editableState = that._editableState || {};\n                var editedModel = editableState.model;\n                var dataSource = that.dataSource;\n                var inlineMode = that._isVirtualInlineEditable();\n                var incellMode = that._isVirtualIncellEditable();\n                var virtualColumns = that._hasVirtualColumns();\n                var row;\n                var cell;\n\n                if ((inlineMode || incellMode || virtualColumns) && editedModel && dataSource._getByUid(editedModel.uid, dataSource.view())) {\n                    if (that._editMode() === INLINE) {\n                        that._shouldClearEditableState = false;\n                        that.editRow(editedModel);\n                        if (!virtualColumns) {\n                            that._focusEditable();\n                        }\n                    } else if (that._editMode() === INCELL) {\n                        row = that.tbody.children(attrEquals(UNIQUE_ID, editedModel.uid));\n                        cell = $(row).children(attrEquals(FIELD, editableState.field));\n\n                        if (cell[0]) {\n                            that._shouldClearEditableState = false;\n                            that.editCell(cell);\n                            if (!virtualColumns) {\n                                that._focusEditable();\n                            }\n                        }\n                    }\n                }\n\n                that._shouldClearEditableState = true;\n            },\n\n            _focusEditable: function() {\n                var that = this;\n                var editedField = (that._editableState || {}).field;\n                var editContainer = that._editContainer;\n\n                if (editContainer && editContainer.length && !contains(editContainer[0], activeElement()) && that._canFocusEditable()) {\n                    if (that._isVirtualInlineEditable() || that._hasVirtualColumns()) {\n                        editContainer.find(attrEquals(CONTAINER_FOR, editedField)).find(FOCUSABLE).eq(0).trigger(\"focus\");\n                    } else if (that._isVirtualIncellEditable() || that._hasVirtualColumns()) {\n                        editContainer.find(FOCUSABLE).eq(0).trigger(\"focus\");\n                    }\n                }\n            },\n\n            _canFocusEditable: function() {\n                var that = this;\n                var result = ((that._isVirtualIncellEditable() || that._isVirtualInlineEditable() || that._hasVirtualColumns()) &&\n                (isElementVisibleInWrapper((that.virtualScrollable || {}).wrapper, that._editContainer) || isElementVisibleInWrapper(that.content, that._editContainer)));\n\n                return result;\n            },\n\n            _cacheEditableState: function() {\n                var that = this;\n                var editContainer = that._editContainer;\n                var editedModel = editContainer ? that._modelForContainer(editContainer) : null;\n                var inlineMode = that._isVirtualInlineEditable();\n                var incellMode = that._isVirtualIncellEditable();\n                var virtualColumns = that._hasVirtualColumns();\n                var active;\n                var widget;\n                var value;\n\n                if ((inlineMode || incellMode || virtualColumns) && editedModel) {\n                    that._clearEditableState();\n                    active = $(activeElement());\n\n                    if (editContainer && active[0] && contains(editContainer[0], active[0])) {\n                        //change event is not fired if the editable container is scrolled\n                        //out of the virtual view with the mousewheel right after editing\n                        active.change();\n\n                        widget = kendo.widgetInstance(active, kendo.ui);\n\n                        if (widget && isFunction(widget.value) && active.is(INPUT)) {\n                            value = active.val();\n\n                            if (active.is(\"[type='checkbox'\")) {\n                                value = active.is(\":checked\");\n                            }\n\n                            widget.value(value);\n                            widget.trigger(CHANGE);\n                        }\n                    }\n\n                    if (that._editMode() === INLINE) {\n                        that._editableState = {\n                            model: editedModel,\n                            field: active.closest(\"[\" + kendo.attr(CONTAINER_FOR) + \"]\").attr(kendo.attr(CONTAINER_FOR))\n                        };\n                    } else if (that._editMode() === INCELL) {\n                        that._editableState = {\n                            model: editedModel,\n                            field: editContainer.attr(kendo.attr(FIELD))\n                        };\n                    }\n                }\n            },\n\n            _clearSortClasses: function() {\n                var that = this,\n                    content = that.content || that.table,\n                    lockedContent = that.lockedContent;\n\n                if (content) {\n                    content.find(COLGROUP).removeClass(SORTED_CLASS);\n                }\n\n                if (lockedContent) {\n                    lockedContent.find(COLGROUP).removeClass(SORTED_CLASS);\n                }\n            },\n\n            _clearEditableState: function() {\n                var that = this;\n\n                if (that.virtualScrollable || (that.virtualScroll && that._hasVirtualColumns())) {\n                    that._editableState = null;\n                }\n            },\n\n            _destroyVirtualScrollable: function() {\n                var that = this;\n\n                that._clearEditableState();\n\n                if (that.virtualScrollable && that.virtualScrollable.element) {\n                    that.virtualScrollable.destroy();\n                }\n\n                that.virtualScrollable = null;\n            },\n\n            _destroyRowResizing: function() {\n                if (this.rowResizing) {\n                    this.rowResizing.destroy();\n\n                    this.rowResizing = null;\n                }\n\n                if (this.rowResizer) {\n                    this._detachRowResizerEvents();\n                    this.rowResizer.off(DUBLECLICK + NS);\n                    this.rowResizer = null;\n                    this._clearCachedRowsHeight();\n                }\n            },\n\n            _renderNoRecordsContent: function() {\n                var that = this;\n\n                if (that.options.noRecords) {\n                    var noRecordsElement = that.table.parent().children('.' + NORECORDSCLASS);\n\n                    if (noRecordsElement.length) {\n                        noRecordsElement.remove();\n                    }\n\n                    if (!that.dataSource || !that.dataSource.view().length) {\n                        noRecordsElement = $(that.noRecordsTemplate({ grid: that }));\n                        kendo.applyStylesFromKendoAttributes(noRecordsElement, [\"margin\", \"position\"]);\n                        noRecordsElement.insertAfter(that.table);\n                    }\n                }\n            },\n\n            _setContentWidth: function(scrollLeft) {\n                var that = this,\n                    hiddenDivClass = 'k-grid-content-expander',\n                    hiddenDiv = '<div class=\"' + hiddenDivClass + '\"></div>',\n                    resizable = that.resizable,\n                    expander;\n\n                if (that.options.scrollable && that.wrapper.is(\":visible\")) {\n                    expander = that.table.parent().children('.' + hiddenDivClass);\n                    that._setContentWidthHandler = that._setContentWidth.bind(that);\n                    if (!that.dataSource || !that.dataSource.view().length) {\n                        if (!expander[0]) {\n                            expander = $(hiddenDiv).appendTo(that.table.parent());\n                            if (resizable) {\n                                resizable.bind(\"resize\", that._setContentWidthHandler);\n                            }\n                        }\n                        if (that.thead) {\n                            expander.width(that.thead.width());\n                            if (!isNaN(parseFloat(scrollLeft, 10))) {\n                                kendo.scrollLeft(that.content, scrollLeft);\n                            }\n                        }\n                    } else if (expander[0]) {\n                        expander.remove();\n                        if (resizable) {\n                            resizable.unbind(\"resize\", that._setContentWidthHandler);\n                        }\n                    }\n\n                    that._applyLockedContainersWidth(true);\n                    that._syncLockedContentHeight();\n\n                    // workaround IE does not show vertical scrollbar for elements without width\n                    if (that.lockedHeader && that.table[0].clientWidth === 0) {\n                        that.table[0].style.width = \"1px\";\n                    }\n                }\n            },\n\n            _applyLockedContainersWidth: function(calculateGroupWidth) {\n                if (this.options.scrollable && this.lockedHeader) {\n                    let headerTable = this.thead.parent(),\n                        headerWrap = headerTable.parent(),\n                        contentWidth = this.wrapper[0].clientWidth,\n                        groups = this._groups(),\n                        scrollbar = kendo.support.scrollbar(),\n                        cols = this.lockedHeader.find(\">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)\"),\n                        nonLockedCols = headerTable.find(\">colgroup>col:not(.k-group-col, .k-hierarchy-col)\"),\n                        width = columnsWidth(cols),\n                        nonLockedColsWidth = columnsWidth(nonLockedCols),\n                        footerWrap;\n\n                    if (groups > 0 && calculateGroupWidth) {\n                        width += outerWidth(this.lockedHeader.find(\".k-group-cell\").first()) * groups;\n                    }\n\n                    if (width >= contentWidth) {\n                        width = contentWidth - 3 * scrollbar;\n                    }\n\n                    this.lockedHeader\n                        .add(this.lockedContent)\n                        .width(width);\n\n                    headerWrap[0].style.width = headerWrap.parent().width() - width - 2 + PX;\n\n                    headerTable.add(this.table).width(nonLockedColsWidth);\n\n                    //https://github.com/telerik/kendo-ui-core/issues/377\n                    if (this.virtualScrollable && !isIE11) {\n                        contentWidth -= scrollbar;\n                    }\n\n                    this.content[0].style.width = contentWidth - width - 1 + PX;\n\n                    if (this.lockedFooter && this.lockedFooter.length) {\n                        this.lockedFooter.width(width);\n                        footerWrap = this.footer.find(\".k-grid-footer-wrap\");\n                        footerWrap[0].style.width = headerWrap[0].clientWidth + PX;\n                        footerWrap.children().first().width(nonLockedColsWidth);\n                    }\n                }\n            },\n\n            _setContentHeight: function() {\n                var that = this,\n                    options = that.options,\n                    height,\n                    header = that.wrapper.children(\".k-grid-header\"),\n                    scrollbar = kendo.support.scrollbar();\n                var scrollableHeight = (options.scrollable || {}).height;\n\n                if (options.scrollable && that.wrapper.is(\":visible\")) {\n                    if (scrollableHeight && that.content[0].style.height === \"\") {\n                        // fallback to client-side setting as ASP.NET MVC Core wrapper does not provide server rendering of the content\n                        that.content[0].style.height = scrollableHeight;\n                    }\n\n                    height = that.wrapper.innerHeight();\n\n                    height -= outerHeight(header);\n\n                    if (that.pager && that.pager.element.is(\":visible\")) {\n                        height -= outerHeight(that.pager.element);\n                    }\n\n                    if (options.groupable) {\n                        height -= outerHeight(that.wrapper.children(\".k-grouping-header\"));\n                    }\n\n                    if (options.toolbar) {\n                        height -= outerHeight(that.wrapper.children(\".k-grid-toolbar\"));\n                    }\n\n                    if (that.footerTemplate) {\n                        height -= outerHeight(that.wrapper.children(\".k-grid-footer\"));\n                    }\n\n                    if (that.statusBar) {\n                        height -= outerHeight(that.wrapper.children(\".k-selection-aggregates\"));\n                    }\n\n                    var isGridHeightSet = function(el) {\n                        var initialHeight, newHeight;\n                        if (el[0].style.height) {\n                            return true;\n                        } else {\n                            initialHeight = el.height();\n                        }\n\n                        el.height(AUTO);\n                        newHeight = el.height();\n\n                        if (initialHeight != newHeight) {\n                            el.height(\"\");\n                            return true;\n                        }\n                        el.height(\"\");\n                        return false;\n                    };\n\n                    if (isGridHeightSet(that.wrapper)) { // set content height only if needed\n                        if (height > scrollbar * 2) { // do not set height if proper scrollbar cannot be displayed\n                            if (that.lockedContent) {\n                                scrollbar = that.table[0].offsetWidth > that.table.parent()[0].clientWidth ? scrollbar : 0;\n                                that.lockedContent.height(height - scrollbar);\n                            }\n\n                            that.content.height(height);\n                        } else {\n                            that.content.height(scrollbar * 2 + 1);\n                        }\n                    }\n                }\n            },\n\n            _averageRowHeight: function() {\n                var that = this,\n                    itemsCount = that._items(that.tbody, true).length,\n                    rowHeight = that._rowHeight;\n\n                if (itemsCount === 0) {\n                    return rowHeight;\n                }\n\n                if (!that._rowHeight) {\n                    that._rowHeight = rowHeight = outerHeight(that.table) / itemsCount;\n                    that._sum = rowHeight;\n                    that._measures = 1;\n                }\n\n                var currentRowHeight = outerHeight(that.table) / itemsCount;\n\n                if (rowHeight !== currentRowHeight) {\n                    that._measures ++;\n                    that._sum += currentRowHeight;\n                    that._rowHeight = that._sum / that._measures;\n                }\n                return rowHeight;\n            },\n\n            _dataSource: function() {\n                var that = this,\n                    options = that.options,\n                    pageable,\n                    dataSource = options.dataSource;\n\n                dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n\n                if (isPlainObject(dataSource)) {\n                    extend(dataSource, { table: that.table, fields: that.columns });\n\n                    pageable = options.pageable;\n\n                    if (isPlainObject(pageable) && pageable.pageSize !== undefined$1) {\n                        dataSource.pageSize = pageable.pageSize;\n                    }\n                }\n\n                if (that.dataSource && that._refreshHandler) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler)\n                                    .unbind(PROGRESS, that._progressHandler)\n                                    .unbind(REQUESTEND, that._requestEndHandler)\n                                    .unbind(ERROR, that._errorHandler)\n                                    .unbind(SORT, that._sortHandler);\n                } else {\n                    that._refreshHandler = that.refresh.bind(that);\n                    that._progressHandler = that._requestStart.bind(that);\n                    that._requestEndHandler = that._requestEnd.bind(that);\n                    that._errorHandler = that._error.bind(that);\n                    that._sortHandler = that._clearSortClasses.bind(that);\n                }\n\n                that.dataSource = DataSource.create(dataSource)\n                                    .bind(CHANGE, that._refreshHandler)\n                                    .bind(PROGRESS, that._progressHandler)\n                                    .bind(REQUESTEND, that._requestEndHandler)\n                                    .bind(ERROR, that._errorHandler)\n                                    .bind(SORT, that._sortHandler);\n            },\n\n            _error: function() {\n                this._progress(false);\n                this._requestInProgress = false;\n            },\n\n            _requestStart: function() {\n                this._progress(true);\n                this._requestInProgress = true;\n            },\n\n            _requestEnd: function() {\n                this._requestInProgress = false;\n            },\n\n            _modelChange: function(e) {\n                var that = this,\n                    tbody = that.tbody,\n                    model = e.model,\n                    row = that.tbody.find(\"tr[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\"),\n                    relatedRow,\n                    cell,\n                    column,\n                    isAlt = row.hasClass(\"k-alt\"),\n                    tmp,\n                    idx = that._items(tbody).index(row),\n                    isLocked = that.lockedContent,\n                    selectable,\n                    selectableRow,\n                    childCells,\n                    originalCells,\n                    length;\n\n                if (isLocked) {\n                    relatedRow = that._relatedRow(row);\n                }\n\n                if (row.add(relatedRow).children(\".k-edit-cell\").length && !that.options.rowTemplate) {\n                    row.add(relatedRow).children(\":not(.k-group-cell,.k-hierarchy-cell)\").each(function() {\n                        cell = $(this);\n                        column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                        if (column.field === e.field) {\n                            if (!cell.hasClass(\"k-edit-cell\")) {\n                                that._displayCell(cell, column, model);\n                            } else {\n                                cell.addClass(\"k-dirty-cell\");\n                            }\n                        }\n                    });\n\n                } else if (!row.hasClass(\"k-grid-edit-row\")) {\n\n                    selectableRow = $().add(row);\n\n                    if (isLocked) {\n                        tmp = (isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model);\n\n                        selectableRow = selectableRow.add(relatedRow);\n\n                        relatedRow.replaceWith(tmp);\n                    }\n\n                    tmp = (isAlt ? that.altRowTemplate : that.rowTemplate)(model);\n\n                    let tmpResult = $(tmp);\n                    kendo.applyStylesFromKendoAttributes(tmpResult, [\"display\"]);\n                    row.replaceWith(tmpResult);\n\n                    tmp = that._items(tbody).eq(idx);\n\n                    if (isLocked) {\n                        row = row.add(relatedRow);\n\n                        relatedRow = that._relatedRow(tmp)[0];\n                        adjustRowHeight(tmp[0], relatedRow);\n\n                        tmp = tmp.add(relatedRow);\n                    }\n\n                    selectable = that.options.selectable;\n                    if ((selectable || that._checkBoxSelection) && row.hasClass(SELECTED)) {\n                       that.select(tmp);\n                    }\n\n                    originalCells = selectableRow.children(\":not(.k-group-cell,.k-hierarchy-cell)\");\n                    childCells = tmp.children(\":not(.k-group-cell,.k-hierarchy-cell)\");\n\n                    for (idx = 0, length = that.columns.length; idx < length; idx++) {\n                        column = that.columns[idx];\n\n                        cell = childCells.eq(idx);\n                        if (selectable && originalCells.eq(idx).hasClass(SELECTED)) {\n                            cell.addClass(SELECTED);\n                        }\n                    }\n\n                    that.trigger(\"itemChange\", { item: tmp, data: model, ns: ui });\n                }\n            },\n\n            _pageable: function() {\n                var that = this,\n                    pagerWrap,\n                    pageable = that.options.pageable,\n                    size = that.options.size,\n                    navigatable = that.options.navigatable;\n\n                if (pageable) {\n                    pagerWrap = that.wrapper.children(\"div.k-grid-pager\");\n\n                    if (!pagerWrap.length) {\n                        pagerWrap = $('<div class=\"k-pager k-grid-pager\"/>');\n                    }\n\n                    if (pageable.position === \"top\") {\n                        pagerWrap.prependTo(that.wrapper).addClass(\"k-grid-pager-top\");\n                    } else {\n                        pagerWrap.appendTo(that.wrapper);\n                    }\n\n                    if (that.pager) {\n                        that.pager.destroy();\n                    }\n\n                    if (typeof pageable === \"object\" && pageable instanceof kendo.ui.Pager) {\n                        that.pager = pageable;\n                    } else {\n                        if (that.dataSource._groupPaging) {\n                            that.pager = new GroupsPager(pagerWrap, extend({}, pageable, { dataSource: that.dataSource, navigatable: navigatable, size: size }));\n                        } else {\n                            that.pager = new kendo.ui.Pager(pagerWrap, extend({}, pageable, { dataSource: that.dataSource, navigatable: navigatable, size: size }));\n                        }\n                    }\n\n                    that.pager.bind(\"pageChange\", function(e) {\n                        if (that.trigger(\"page\", { page: e.index })) {\n                            e.preventDefault();\n                        }\n                    });\n\n                    that._togglePagerVisibility();\n                }\n            },\n\n            _statusBar: function() {\n                var that = this,\n                    options = that.options,\n                    wrapper = that.wrapper,\n                    statusBarTemplate = options.statusBarTemplate,\n                    content = \"\";\n\n                if (statusBarTemplate) {\n                    if (!that.statusBar) {\n                        content += '<div class=\"k-selection-aggregates k-grid-selection-aggregates\">';\n\n                        content += statusBarTemplate({ aggregates: that._cellAggregates });\n\n                        content += '</div>';\n\n                        if (options.scrollable) {\n                            that.statusBar = $(content).insertAfter(wrapper.find(DOT + \"k-grid-container\"));\n                        } else {\n                            that.statusBar = $(content).insertAfter(wrapper.find(DOT + \"k-grid-table\"));\n                        }\n                    } else {\n                        that.statusBar.html(statusBarTemplate({ aggregates: that._cellAggregates }));\n                    }\n                }\n            },\n\n            _footer: function() {\n                var that = this,\n                    aggregates = that.dataSource.aggregates(),\n                    html = \"\",\n                    footerTemplate = that.footerTemplate,\n                    options = that.options,\n                    footerWrap,\n                    footer = that.footer || that.wrapper.find(\".k-grid-footer\");\n\n                if (footerTemplate) {\n                    html = $(that._wrapFooter(footerTemplate(aggregates)));\n                    kendo.applyStylesFromKendoAttributes(html, [\"display\", \"left\", \"right\"]);\n\n                    if (footer.length) {\n                        var tmp = html;\n\n                        footer.replaceWith(tmp);\n                        footer = that.footer = tmp;\n                    } else {\n                        if (options.scrollable) {\n                            if (that.statusBar) {\n                                that.footer = html.insertBefore(that.statusBar);\n                            } else if (options.pageable && options.pageable.position !== \"top\") {\n                                that.footer = html.insertBefore(that.wrapper.children(\"div.k-grid-pager\"));\n                            } else {\n                                that.footer = html.appendTo(that.wrapper);\n                            }\n                            footer = that.footer;\n                        } else {\n                            footer = that.footer = html.insertAfter(that.tbody);\n                        }\n                    }\n                } else if (footer && !that.footer) {\n                    that.footer = footer;\n                }\n\n                if (footer.length) {\n                    if (options.scrollable) {\n                        footerWrap = footer.attr(TABINDEX, -1).children(\".k-grid-footer-wrap\");\n\n                        that.scrollables = $(\n                            that.scrollables\n                                .filter(function() { return !$(this).is(\".k-grid-footer-wrap\"); })\n                                .toArray()\n                        ).add(footerWrap);\n                    }\n\n                    if (that._footerWidth) {\n                        footer.find(\"table\").css('width', that._footerWidth);\n                    }\n\n                    if (footerWrap) {\n                        var offset = kendo.scrollLeft(that.content);\n\n                        if (options.scrollable !== true && that.virtualScroll && that.virtualScroll.rows) {\n                            offset = kendo.scrollLeft(that.wrapper.find('.k-virtual-scrollable-wrap'));\n                        }\n                        kendo.scrollLeft(footerWrap, offset);\n                    }\n                }\n\n                if (that.lockedContent) {\n                    that._appendLockedColumnFooter();\n                    that._applyLockedContainersWidth();\n                    that._syncLockedFooterHeight();\n                }\n            },\n\n            _wrapFooter: function(footerRow) {\n                var that = this,\n                    html = \"\",\n                    table,\n                    scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n\n                if (that.options.scrollable) {\n                    html = $('<div class=\"k-grid-footer\"><div class=\"k-grid-footer-wrap\"><table class=\"k-table k-grid-footer-table\"><tfoot class=\"k-table-tfoot\">' + footerRow + '</tfoot></table></div></div>');\n                    table = html.find(\"table\");\n                    table.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", that.options.size));\n                    that._appendCols(table);\n                    html.css((isRtl ? \"padding-left\" : \"padding-right\"), scrollbar); // Update inner fix.\n\n                    return html;\n                }\n\n                return '<tfoot class=\"k-grid-footer k-table-tfoot\">' + footerRow + '</tfoot>';\n            },\n\n            _globalColumnsMenu: function(cell) {\n                var that = this,\n                    menu,\n                    columns = leafColumns(that.columns),\n                    options = that.options,\n                    columnMenu = options.columnMenu,\n                    menuOptions,\n                    initCallback = function(e) {\n                        that.trigger(COLUMNMENUINIT, { field: e.field, container: e.container });\n                    },\n                    openCallback = function(e) {\n                        that.trigger(COLUMNMENUOPEN, { field: e.field, container: e.container });\n                    },\n                    closeCallback = function() {\n                        cell.trigger(\"focus\");\n                    };\n\n                if (columnMenu) {\n                    if (typeof columnMenu == \"boolean\") {\n                        columnMenu = {};\n                    }\n\n                    that._setColumnsMediaVisibility(columns);\n\n                    let toggleable = !!(columnMenu.autoSize || columnMenu.clearAllFilters);\n\n                    menu = cell.data(\"kendoColumnMenu\");\n                    if (menu) {\n                        menu.destroy();\n                    }\n\n                    let columnsExpanderOptions = {\n                        toggleable: toggleable,\n                        expanded: columnMenu.expanded || true,\n                        animation: false,\n                        hideExpanderIndicator: !toggleable\n                    };\n\n                    menuOptions = {\n                        dataSource: that.dataSource,\n                        columns: columnMenu.columns,\n                        sortable: false,\n                        filterable: false,\n                        clearAllFilters: columnMenu.clearAllFilters,\n                        messages: columnMenu.messages,\n                        hideAutoSizeColumn: true,\n                        owner: that,\n                        closeCallback: closeCallback,\n                        init: initCallback,\n                        open: openCallback,\n                        pane: that.pane,\n                        autoSize: columnMenu.autoSize,\n                        encodeTitles: that.options.encodeTitles,\n                        componentType: \"modern\",\n                        columnsExpanderOptions: columnsExpanderOptions\n                    };\n\n                    cell.kendoColumnMenu(menuOptions);\n                }\n            },\n\n            _columnMenu: function() {\n                var that = this,\n                    menu,\n                    columns = leafColumns(that.columns),\n                    column,\n                    options = that.options,\n                    columnMenu = options.columnMenu,\n                    menuOptions,\n                    sortable,\n                    filterable,\n                    cells,\n                    hasMultiColumnHeaders = grep(that.columns, function(item) {\n                        return item.columns !== undefined$1;\n                    }).length > 0,\n                    hasLockableColumns = grep(that.columns, function(item) {\n                        return item.lockable !== false;\n                    }).length > 0,\n                    hasStickableColumns = grep(that.columns, function(item) {\n                        return item.stickable === true;\n                    }).length > 0,\n                    isMobile = this._isMobile,\n                    initCallback = function(e) {\n                        that.trigger(COLUMNMENUINIT, { field: e.field, container: e.container });\n                    },\n                    openCallback = function(e) {\n                        that.trigger(COLUMNMENUOPEN, { field: e.field, container: e.container });\n                    },\n                    closeCallback = function() {\n                        focusTable(that.table, true);\n                    },\n                    stickCallback = function(e) {\n                        that.trigger(COLUMNSTICK, { column: e.column });\n                    },\n                    unstickCallback = function(e) {\n                        that.trigger(COLUMNUNSTICK, { column: e.column });\n                    },\n                    sortHandler = function(e) {\n                        if (that.trigger(\"sort\", { sort: e.sort })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            if (that.dataSource.options.endless) {\n                                that._resetEndless();\n                            }\n                        }\n                    },\n                    filterHandler = function(e) {\n                        if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            if (that.dataSource.options.endless) {\n                                that._resetEndless();\n                            }\n                        }\n                    };\n\n                if (columnMenu) {\n                    if (typeof columnMenu == \"boolean\") {\n                        columnMenu = {};\n                    }\n\n                    that._setColumnsMediaVisibility(columns);\n\n                    cells = leafDataCells(that.thead);\n\n                    for (var idx = 0, length = cells.length; idx < length; idx++) {\n                        column = columns[idx];\n                        var cell = cells.eq(idx);\n\n                        if (column.columnMenu !== false && !column.command && (column.field || cell.attr(\"data-\" + kendo.ns + \"field\"))) {\n                            menu = cell.data(\"kendoColumnMenu\");\n                            if (menu) {\n                                menu.destroy();\n                            }\n\n                            sortable = column.sortable !== false && columnMenu.sortable !== false && options.sortable !== false ? extend({}, options.sortable, {\n                                compare: (column.sortable || {}).compare\n                            }) : false;\n\n                            filterable = options.filterable && column.filterable !== false && columnMenu.filterable !== false ? extend(true, { pane: that.pane }, options.filterable, column.filterable) : false;\n\n                            if (column.filterable && column.filterable.dataSource) {\n                                filterable.forceUnique = false;\n                                filterable.checkSource = column.filterable.dataSource;\n                            }\n\n                            if (filterable) {\n                                filterable.format = column.format;\n                            }\n\n                            menuOptions = {\n                                dataSource: that.dataSource,\n                                values: column.values,\n                                columns: columnMenu.columns,\n                                sortable: sortable,\n                                filterable: filterable,\n                                messages: columnMenu.messages,\n                                owner: that,\n                                closeCallback: closeCallback,\n                                init: initCallback,\n                                open: openCallback,\n                                stick: stickCallback,\n                                unstick: unstickCallback,\n                                pane: that.pane,\n                                sort: sortHandler,\n                                filtering: filterHandler,\n                                filter: isMobile ? \":not(.k-column-active)\" : \"\",\n                                autoSize: columnMenu.autoSize,\n                                hasLockableColumns: lockedColumns(columns).length > 0 && hasLockableColumns && !hasMultiColumnHeaders,\n                                hasStickableColumns: hasStickableColumns && !hasMultiColumnHeaders,\n                                encodeTitles: that.options.encodeTitles,\n                                componentType: columnMenu.componentType,\n                                appendTo: DOT + classNames.headerCellInner,\n                                reorderable: options.reorderable === true || (options.reorderable && options.reorderable.columns),\n                                groupable: that.options.groupable && that.options.groupable.enabled !== false && column.groupable !== false\n                            };\n\n                            cell.kendoColumnMenu(menuOptions);\n                        }\n                    }\n                }\n            },\n\n            _headerCells: function() {\n                return $(this.thead).find(\"th\").filter(function() {\n                    var th = $(this);\n                    return !th.hasClass(\"k-group-cell\") && !th.hasClass(\"k-hierarchy-cell\");\n                });\n            },\n\n            _hasFilterMenu: function() {\n                var filterable = this.options.filterable;\n                if (filterable && typeof filterable.mode == STRING && filterable.mode.indexOf(\"menu\") == -1) {\n                    return false;\n                }\n\n                return filterable;\n            },\n\n            _filterable: function() {\n                var that = this,\n                    columns = leafColumns(that.columns),\n                    filterMenu,\n                    cells,\n                    cell,\n                    filterInit = function(e) {\n                        that.trigger(FILTERMENUINIT, { field: e.field, container: e.container });\n                    },\n                    closeCallback = function() {\n                        focusTable(that.table, true);\n                    },\n                    filterHandler = function(e) {\n                        if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            if (that.dataSource.options.endless) {\n                                that._resetEndless();\n                            }\n                        }\n                    },\n                    filterOpen = function(e) {\n                        that.trigger(FILTERMENUOPEN, { field: e.field, container: e.container });\n                    },\n                    filterable = that._hasFilterMenu();\n\n                if (filterable && !that.options.columnMenu) {\n                    cells = leafDataCells(that.thead);//that._headerCells();\n\n                    for (var idx = 0, length = cells.length; idx < length; idx++) {\n                        cell = cells.eq(idx);\n\n                        if (columns[idx].filterable !== false && !columns[idx].command && (columns[idx].field || cell.attr(\"data-\" + kendo.ns + \"field\"))) {\n                            filterMenu = cell.data(\"kendoFilterMenu\");\n\n                            if (filterMenu) {\n                                filterMenu.destroy();\n                            }\n\n                            filterMenu = cell.data(\"kendoFilterMultiCheck\");\n                            if (filterMenu) {\n                               filterMenu.destroy();\n                            }\n\n                            var columnFilterable = columns[idx].filterable;\n\n                            var options = extend({},\n                                filterable,\n                                columnFilterable,\n                                {\n                                    dataSource: that.dataSource,\n                                    values: columns[idx].values,\n                                    format: columns[idx].format,\n                                    closeCallback: closeCallback,\n                                    title: columns[idx].title || columns[idx].field,\n                                    init: filterInit,\n                                    open: filterOpen,\n                                    pane: that.pane,\n                                    change: filterHandler,\n                                    appendTo: DOT + classNames.headerCellInner\n                                }\n                            );\n\n                            if (columnFilterable && columnFilterable.messages) {\n                                options.messages = extend(true, {}, filterable.messages, columnFilterable.messages);\n                            }\n                            if (columnFilterable && columnFilterable.dataSource) {\n                                options.forceUnique = false;\n                                options.checkSource = columnFilterable.dataSource;\n                            }\n\n                            if (columnFilterable && columnFilterable.multi) {\n                                cell.kendoFilterMultiCheck(options);\n                            } else {\n                                cell.kendoFilterMenu(options);\n                            }\n                        }\n                    }\n                }\n            },\n\n            _filterRow: function() {\n                var that = this;\n                if (!that._hasFilterRow()) {\n                   return;\n                }\n\n                var settings;\n                var columns = leafColumns(that.columns),\n                    filterable = that.options.filterable,\n                    rowheader = that.thead.find(\".k-filter-row\"),\n                    filterHandler = function(e) {\n                        if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            if (that.dataSource.options.endless) {\n                                that._resetEndless();\n                            }\n                        }\n                    };\n\n\n                this._updateHeader(that._groups());\n\n                for (var i = 0; i < columns.length; i++) {\n                    var suggestDataSource,\n                        col = columns[i],\n                        operators = that.options.filterable.operators,\n                        customDataSource = false,\n                        td = $(\"<td class='k-table-td' title='\" + that.options.messages.filterCellTitle + \"'/>\"),\n                        field = col.field;\n\n                    if (col.hidden) {\n                        td.hide();\n                    }\n                    rowheader.append(td);\n                    if (field && col.filterable !== false) {\n                        var cellOptions = col.filterable && col.filterable.cell || {};\n\n                        suggestDataSource = that.options.dataSource;\n                        if (suggestDataSource instanceof DataSource) {\n                            suggestDataSource = that.options.dataSource.options;\n                        }\n\n                        var messages = extend(true, {}, filterable.messages);\n                        if (col.filterable) {\n                            extend(true, messages, col.filterable.messages);\n                        }\n\n                        if (cellOptions.enabled === false) {\n                            td.html(\"&nbsp;\");\n                            continue;\n                        }\n                        if (cellOptions.dataSource) {\n                            suggestDataSource = cellOptions.dataSource;\n                            customDataSource = true;\n                        }\n                        if (col.filterable && col.filterable.operators) {\n                            operators = col.filterable.operators;\n                        }\n\n                        settings = {\n                            column: col,\n                            dataSource: that.dataSource,\n                            suggestDataSource: suggestDataSource,\n                            customDataSource: customDataSource,\n                            field: field,\n                            messages: messages,\n                            size: that.options.size,\n                            values: col.values,\n                            template: cellOptions.template,\n                            delay: cellOptions.delay,\n                            inputWidth: cellOptions.inputWidth,\n                            suggestionOperator: cellOptions.suggestionOperator,\n                            minLength: cellOptions.minLength,\n                            dataTextField: cellOptions.dataTextField,\n                            operator: cellOptions.operator,\n                            operators: operators,\n                            showOperators: cellOptions.showOperators,\n                            change: filterHandler\n                        };\n\n                        $(\"<span/>\").attr(kendo.attr(\"field\"), field)\n                            .appendTo(td)\n                            .kendoFilterCell(settings);\n                    } else {\n                        td.html(\"&nbsp;\");\n                    }\n                    td.data(\"column\", col);\n                }\n\n                this._filterFocusable().attr(TABINDEX, -1);\n            },\n\n            _sortable: function() {\n                var that = this,\n                    columns = leafColumns(that.columns),\n                    column,\n                    sorterInstance,\n                    cell,\n                    sortable = that.options.sortable,\n                    sortHandler = function(e) {\n                        if (that.trigger(\"sort\", { sort: e.sort })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                        }\n                    };\n\n\n                if (sortable) {\n                    var cells = leafDataCells(that.thead);\n\n                    for (var idx = 0, length = cells.length; idx < length; idx++) {\n                        column = columns[idx];\n\n                        if (column.sortable !== false && !column.command && column.field) {\n                            cell = cells.eq(idx);\n\n                            sorterInstance = cell.data(\"kendoColumnSorter\");\n\n                            if (sorterInstance) {\n                                sorterInstance.destroy();\n                            }\n\n                            cell.attr(\"data-\" + kendo.ns + \"field\", column.field)\n                                .kendoColumnSorter(\n                                    extend({}, sortable, column.sortable, {\n                                        dataSource: that.dataSource,\n                                        aria: true,\n                                        filter: \":not(.k-column-active)\",\n                                        change: sortHandler\n                                    })\n                                );\n                        }\n                    }\n                    cells = null;\n                }\n            },\n\n            _columns: function(columns) {\n                var that = this,\n                    table = that.table,\n                    encoded,\n                    cols = table.find(\"col\"),\n                    lockedCols,\n                    headerRows = that.element.find('thead tr'),\n                    dataSource = that.options.dataSource,\n                    draggableColumns;\n\n                // using HTML5 data attributes as a configuration option e.g. <th data-field=\"foo\">Foo</foo>\n                columns = columns.length ? columns : map(table.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\"), function(th, idx) {\n                    th = $(th);\n                    var sortable = th.attr(kendo.attr(\"sortable\")),\n                        filterable = th.attr(kendo.attr(\"filterable\")),\n                        type = th.attr(kendo.attr(\"type\")),\n                        groupable = th.attr(kendo.attr(\"groupable\")),\n                        field = th.attr(kendo.attr(\"field\")),\n                        title = th.attr(kendo.attr(\"title\")),\n                        columnMenu = th.attr(kendo.attr(\"column-menu\")),\n                        menu = th.attr(kendo.attr(\"menu\"));\n\n                    if (!field) {\n                       field = th.text().replace(/\\s|[^A-z0-9]/g, \"\");\n                    }\n\n                    return {\n                        field: field,\n                        type: type,\n                        title: title,\n                        sortable: sortable !== \"false\",\n                        filterable: filterable !== \"false\",\n                        groupable: groupable !== \"false\",\n                        menu: menu !== \"false\",\n                        columnMenu: columnMenu !== \"false\",\n                        template: th.attr(kendo.attr(\"template\")),\n                        width: cols.eq(idx).css(WIDTH)\n                    };\n                });\n\n                encoded = !(that.table.find(\"tbody tr\").length > 0 && (!dataSource || !dataSource.transport));\n\n                if (that.options.scrollable) {\n                    var initialColumns = columns;\n                    lockedCols = lockedColumns(columns);\n                    columns = nonLockedColumns(columns);\n\n                    if (lockedCols.length > 0 && columns.length === 0) {\n                        throw new Error(\"There should be at least one non locked column\");\n                    }\n\n                    normalizeHeaderCells(that.element.find(\"tr:has(th)\").first(), initialColumns);\n                    columns = lockedCols.concat(columns);\n                }\n\n                if (headerRows.length && columns.length) {\n                    that._updateColumnIDs(columns, headerRows.first());\n                }\n\n                that.columns = normalizeColumns(columns, encoded);\n\n                if ($.grep(leafColumns(that.columns), function(col) { return col.selectable;}).length) {\n                    that._selectedIds = {};\n                    that._checkBoxSelection = true;\n                    that.wrapper.on(CLICK + NS, \"tbody > tr \" + CHECKBOXINPUT, that._checkboxClick.bind(that));\n                    that.wrapper.on(CLICK + NS, \"thead > tr \" + CHECKBOXINPUT, that._headerCheckboxClick.bind(that));\n                }\n\n                draggableColumns = $.grep(leafColumns(that.columns), function(col) { return col.draggable;});\n\n                if (draggableColumns.length) {\n                    that._hasDragHandleColumn = true;\n\n                    for (var i = 0; i < draggableColumns.length; i++) {\n                        draggableColumns[i].headerAttributes = $.extend({\n                            \"aria-label\": that.options.messages.dragHandleLabel\n                        }, draggableColumns[i].headerAttributes);\n                    }\n                }\n\n                that._foreignKeyBindings(that.columns);\n            },\n\n            _foreignKeyBindings: function(columns) {\n                var that = this;\n                var length = columns.length;\n                var column;\n\n                for (var i = 0; i < length; i++) {\n                    column = columns[i];\n\n                    if (column.dataSource) {\n                        that._fetchForeignKeyValues(column);\n                    }\n                }\n            },\n\n            _fetchForeignKeyValues: function(column) {\n                var that = this;\n                var promise = $.Deferred();\n\n                that._hasBoundForeignKey = true;\n                column.dataSource = DataSource.create(column.dataSource);\n\n                if (!that._foreignKeyPromises) {\n                    that._foreignKeyPromises = [];\n                }\n\n                that._foreignKeyPromises.push(promise);\n                column.dataSource.fetch().then(function() {\n                    var data = column.dataSource.data();\n                    column.values = data.map(function(item) {\n                        return {\n                            value: item[column.dataValueField],\n                            text: item[column.dataTextField]\n                        };\n                    });\n                    promise.resolve();\n                });\n\n            },\n\n            _updateColumnIDs: function(columns, tr) {\n\n                if (!columns.length) {\n                    return;\n                }\n\n                var ths = tr.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\");\n                var id;\n                for (var i = 0; i < columns.length; i++) {\n                    id = ths.eq(i).attr(ID);\n                    if (id) {\n                        columns[i].headerAttributes = extend(columns[i].headerAttributes, { id: id });\n                    }\n                }\n\n                this._updateColumnIDs(childColumns(columns), tr.next());\n            },\n\n            _headerCheckboxClick: function(e) {\n                var that = this,\n                    checkBox = $(e.target),\n                    checked = checkBox.prop(\"checked\");\n\n                if (!that._belongsToGrid(checkBox)) {\n                    return;\n                }\n\n                if (that.trigger(CHANGING, { target: checkBox, originalEvent: e })) {\n                    e.preventDefault();\n                    return;\n                }\n\n                if (checked) {\n                    that.select(that.items());\n                } else {\n                    that.clearSelection();\n                }\n\n                that._calculateAggregatesForSelected();\n                that.trigger(CHANGE, { cellAggregates: that._cellAggregates });\n            },\n\n            _checkboxClick: function(e) {\n                var that = this,\n                    row = $(e.target).closest(TR),\n                    isSelecting = !row.hasClass(SELECTED);\n\n                if (!that._belongsToGrid(row)) {\n                    return;\n                }\n\n                if (that.trigger(CHANGING, { target: row, originalEvent: e })) {\n                    e.preventDefault();\n                    return;\n                }\n\n                if (isSelecting) {\n                    that.select(row);\n                } else {\n                    that._deselectCheckRows(row);\n                }\n                that._calculateAggregatesForSelected();\n                that.trigger(CHANGE, { cellAggregates: that._cellAggregates });\n            },\n\n            _groups: function() {\n                var group = this.dataSource.group();\n\n                return group ? group.length : 0;\n            },\n\n            _tmpl: function(rowTemplate, columns, alt, skipGroupCells) {\n                var that = this,\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    paramName = settings.paramName,\n                    idx,\n                    length = columns.length,\n                    template,\n                    state = { storage: {}, count: 0 },\n                    column,\n                    type,\n                    hasDetails = that._hasDetails(),\n                    groups = that._groups();\n\n                var fieldAttr = kendo.attr(\"field\");\n                var field;\n                var classAttribute;\n                var compiledAttributes;\n                let rowTemplateFunc;\n\n                if (!rowTemplate) {\n                    rowTemplateFunc = (data) => {\n                        var uid = length ? ` ${kendo.attr(\"uid\")}=\"${kendo.getter(\"uid\")(data)}\"` : '';\n                        var rowTemplateResult = `<tr class=\"${alt ? 'k-alt k-table-row k-table-alt-row ' : 'k-table-row '}k-master-row\"${uid}>`;\n\n                        if (groups > 0 && !skipGroupCells) {\n                            rowTemplateResult += groupCells(groups);\n                        }\n\n                        if (hasDetails) {\n                            rowTemplateResult += '<td class=\"k-hierarchy-cell k-table-td\" aria-expanded=\"false\">' + kendo.ui.icon($(`<a href=\"#\" ${ARIA_LABEL}=\"${EXPAND}\" tabindex=\"-1\"></a>`), { icon: `caret-alt-${isRtl ? \"left\" : \"right\"}` }) + '</td>';\n                        }\n\n                        for (idx = 0; idx < length; idx++) {\n                            column = columns[idx];\n                            template = column.template;\n                            type = typeof template;\n                            field = column.field;\n                            compiledAttributes = {};\n\n                            let dirtyCellTemplate;\n\n                            if (that._editMode() && field) {\n                                column.attributes = column.attributes || {};\n\n                                if (that.virtualScroll) {\n                                    column.attributes[fieldAttr] = field;\n                                }\n\n                                dirtyCellTemplate = that._dirtyCellTemplate(field)(data);\n                            }\n\n                            if (column.colSpan && column.colSpan > 0 && hasHiddenStyle(column.attributes)) { //virtual cell should be visible at all times\n                                column.attributes = removeHiddenStyle(column.attributes);\n                            } else if (!column.colSpan && column.hidden) {\n                                column.attributes = addHiddenStyle(column.attributes);\n                            }\n\n                            if (column.command) {\n                                column.attributes = column.attributes || {};\n                                classAttribute = column.attributes[\"class\"];\n\n                                if (typeof classAttribute !== \"undefined\") {\n                                    if (classAttribute.indexOf(\"k-command-cell\") < 0) {\n                                        column.attributes[\"class\"] += \" k-command-cell\";\n                                    }\n                                } else {\n                                    column.attributes[\"class\"] = \"k-command-cell\";\n                                }\n                            }\n\n                            if (column.draggable) {\n                                column.attributes = column.attributes || {};\n                                if (typeof column.attributes[\"class\"] !== \"undefined\") {\n                                    if (column.attributes[\"class\"].indexOf(\"k-drag-cell k-touch-action-none\") < 0) {\n                                        column.attributes[\"class\"] += \" k-drag-cell k-touch-action-none\";\n                                    }\n                                } else {\n                                    column.attributes[\"class\"] = \"k-drag-cell k-touch-action-none\";\n                                }\n\n                                if (typeof column.attributes[ARIA_LABEL] === \"undefined\") {\n                                    column.attributes[ARIA_LABEL] = that.options.messages.dragHandleLabel;\n                                }\n\n                                if (typeof column.attributes.style !== \"undefined\") {\n                                    if (column.attributes.style.indexOf(\"cursor: move;\") < 0) {\n                                        column.attributes.style += \" cursor: move;\";\n                                    }\n                                } else {\n                                    column.attributes.style = \"cursor: move;\";\n                                }\n                            }\n\n                            if (column._attributesFunction) {\n                                compiledAttributes = column._attributesFunction(data);\n                            }\n\n                            let attributes = extend({}, column.attributes, compiledAttributes);\n                            if (dirtyCellTemplate) {\n                                attributes[\"class\"] = (attributes[\"class\"] || \"\");\n                                attributes[\"class\"] += dirtyCellTemplate;\n                            }\n                            let columnAttributes = stringifyAttributes(attributes);\n                            let colSpanAttributes = '';\n\n                            if (column.colSpan) {\n                                if (column.colSpan > 1) {\n                                    colSpanAttributes += \" \" + kendo.attr(\"virtual\");\n                                }\n                                colSpanAttributes += ` colSpan=\"${column.colSpan}\"`;\n                            }\n                            rowTemplateResult += decorateCellWithClass(`<td${columnAttributes}${colSpanAttributes}>`);\n                            rowTemplateResult += column.selectable ? kendo.template(SELECTCOLUMNTMPL)({ size: kendo.getValidCssClass(\"k-checkbox-\", \"size\", that.options.size) }) : that._cellTmpl(column, state)(data);\n                            rowTemplateResult += \"</td>\";\n                        }\n\n                        rowTemplateResult += \"</tr>\";\n                        return rowTemplateResult;\n                    };\n                }\n\n                rowTemplate = kendo.template(rowTemplate || rowTemplateFunc, settings);\n\n                if (state.count > 0) {\n                    return rowTemplate.bind(state.storage);\n                }\n\n                return rowTemplate;\n            },\n\n            _dirtyCellTemplate: function(field) {\n                return (data) => {\n                    if (field && data && data.dirty && data.dirtyFields) {\n                        let dirtyField = field.charAt(0) === \"[\" ? kendo.getter(field)(data.dirtyFields) : data.dirtyFields[field];\n                        return dirtyField ? ' k-dirty-cell' : '';\n                    }\n\n                    return \"\";\n                };\n            },\n\n            _headerCellText: function(column) {\n                var that = this,\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    template = column.headerTemplate,\n                    type = typeof(template),\n                    text = column.title && (that.options.encodeTitles ? htmlEncode(column.title) : column.title) || htmlEncode(column.field || \"\");\n\n                if (type === FUNCTION) {\n                    text = kendo.template(template, settings)({});\n                } else if (type === STRING) {\n                    text = template;\n                }\n                return text;\n            },\n\n            _cellTmpl: function(column, state) {\n                var that = this,\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    template = column.template,\n                    field = column.field,\n                    // html = \"\",\n                    idx,\n                    length,\n                    format = column.format,\n                    type = typeof template,\n                    columnValues = column.values;\n\n                if (column.command) {\n                    if (isArray(column.command)) {\n                        return (data) => {\n                            let html = \"\";\n                            for (idx = 0, length = column.command.length; idx < length; idx++) {\n                                if (column.command[idx].visible) {\n                                    html += column.command[idx].visible(data) ? that._createButton(column.command[idx]) : '';\n                                } else {\n                                    html += that._createButton(column.command[idx]);\n                                }\n                            }\n                            return html;\n                        };\n                    }\n                    return () => that._createButton(column.command);\n                }\n\n                if (column.selectable) {\n                    return SELECTCOLUMNTMPL;\n                }\n\n                if (column.draggable) {\n                    return DRAGHANDLECOLUMNTMPL;\n                }\n\n                return (data) => {\n                    let html = that._dirtyIndicatorTemplate(field)(data);\n\n                    if (type === FUNCTION) {\n                        state.storage[\"tmpl\" + state.count] = template;\n                        html += template(data);\n                        state.count++;\n                    } else if (type === STRING) {\n                        html += kendo.template(template, settings)(data);\n                    } else if (columnValues && columnValues.length && isPlainObject(columnValues[0]) && \"value\" in columnValues[0] && field) {\n                        var v = convertToObject(columnValues);\n                        var f = v[settings.useWithBlock ? kendo.getter(field)(data) : field];\n                        html += encode(f != null ? f : '');\n                    } else {\n                        let fieldValue = '';\n                        if (field) {\n                            field = kendo.getter(field)(data);\n                            fieldValue = field == null ? '' : field;\n                        }\n\n                        if (format) {\n                            fieldValue = kendo.format(format.replace(formatRegExp, \"$1\"), fieldValue);\n                        }\n\n                        html += column.encoded ? encode(fieldValue) : fieldValue;\n                    }\n\n                    return html;\n                };\n            },\n\n            _dirtyIndicatorTemplate: function(field) {\n                return (data) => {\n                    if (field && data && data.dirty && data.dirtyFields) {\n                        let dirtyField = field.charAt(0) === \"[\" ? kendo.getter(field)(data.dirtyFields) : data.dirtyFields[field];\n                        return dirtyField ? '<span class=\\\"k-dirty\\\"></span>' : '';\n                    }\n\n                    return \"\";\n                };\n            },\n\n            _virtualCols: function(columns) {\n                var that = this;\n                var widths = $.map(columns, function(c) { return c.hidden ? 0 : parseInt(c.width, 10); });\n                var scrollLeft = that.virtualScrollable ? kendo.scrollLeft(that.content.find(\">.k-virtual-scrollable-wrap\")) : kendo.scrollLeft(that.content);\n                var tableWidth = outerWidth(that.content);\n                var sumOfWidths = sumWidths(columns);\n                var colsToRender = [];\n                var firstColspan = 0;\n                var lastColspan = 0;\n                var hiddenColumns = 0;\n                var idx = 0;\n                var widthOfHiddenColumns = 0;\n                var considerNext;\n\n                for (idx = 0; idx < columns.length; idx++) {\n                    considerNext = (idx < widths.length - 1) ? widths[idx + 1] : 0;\n                    if (widthOfHiddenColumns + widths[idx] + 2 * considerNext < scrollLeft) {\n                        if (widths[idx]) {\n                            hiddenColumns++;\n                        }\n                        widthOfHiddenColumns += widths[idx];\n                    } else {\n                        firstColspan = 1 + hiddenColumns;\n                        break;\n                    }\n                }\n\n                hiddenColumns = 0;\n                widthOfHiddenColumns = 0;\n\n                for (var i = columns.length - 1; i >= 0; i--) {\n                    if (widthOfHiddenColumns + 3 * widths[i] < sumOfWidths - tableWidth - scrollLeft) {\n                        if (widths[i]) {\n                            hiddenColumns++;\n                        }\n                        widthOfHiddenColumns += widths[i];\n                    } else {\n                        lastColspan = 1 + hiddenColumns;\n                        for (var j = idx; j <= i; j++) {\n                            if (columns[j].locked) {\n                                continue;\n                            }\n                            colsToRender.push(columns[j]);\n                            if (columns[j].colSpan) {\n                                delete columns[j].colSpan;\n                            }\n                        }\n                        colsToRender[0].colSpan = firstColspan;\n                        colsToRender[colsToRender.length - 1].colSpan = lastColspan;\n                        break;\n                    }\n                }\n\n                if (colsToRender[0].hidden) {\n                    colsToRender[0].colSpan--;\n                }\n\n                that.virtualCols = colsToRender;\n\n                return colsToRender;\n            },\n\n            _templates: function() {\n                var that = this,\n                    options = that.options,\n                    dataSource = that.dataSource,\n                    groups = dataSource.group(),\n                    footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                    aggregates = dataSource.aggregate(),\n                    columnLeafs = leafColumns(that.columns),\n                    columnsLocked = leafColumns(lockedColumns(that.columns)),\n                    leafsCols = options.scrollable ? leafColumns(nonLockedColumns(that.columns)) : columnLeafs,\n                    columns = (that.virtualScroll || {}).columns ? that._virtualCols(leafsCols) : leafsCols,\n                    groupHeaderColumnTemplateLockedColumns = grep(visibleColumns(columnsLocked), function(column, index) { return column.groupHeaderColumnTemplate && index !== 0; }),\n                    groupHeaderColumnTemplateNonLockedColumns = grep(visibleColumns(columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n                if (options.scrollable && columnsLocked.length) {\n                    if (options.rowTemplate || options.altRowTemplate) {\n                        throw new Error(\"Having both row template and locked columns is not supported\");\n                    }\n\n                    that.rowTemplate = that._tmpl(options.rowTemplate, columns, false, true);\n                    that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true, true);\n\n                    that.lockedRowTemplate = that._tmpl(options.rowTemplate, columnsLocked);\n                    that.lockedAltRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columnsLocked, true);\n                } else {\n                    that.rowTemplate = that._tmpl(options.rowTemplate, columns);\n                    that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true);\n                }\n\n                if (that._hasDetails()) {\n                    that.detailTemplate = that._detailTmpl(options.detailTemplate || (() => \"\"));\n                }\n\n                if ((that._group && !isEmptyObject(aggregates)) || (!isEmptyObject(aggregates) && !footer.length) ||\n                    grep(columnLeafs, function(column) { return column.footerTemplate; }).length) {\n\n                    that.footerTemplate = that._footerTmpl(columnLeafs, aggregates, \"footerTemplate\", \"k-footer-template k-table-row\");\n                }\n\n                if (groups && grep(columnLeafs, function(column) { return column.groupFooterTemplate; }).length) {\n                    aggregates = $.map(groups, function(g) { return g.aggregates; });\n\n                    that.groupFooterTemplate = that._footerTmpl(columns, aggregates, \"groupFooterTemplate\", \"k-group-footer k-table-row\", columnsLocked.length);\n\n                    if (options.scrollable && columnsLocked.length) {\n                        that.lockedGroupFooterTemplate = that._footerTmpl(columnsLocked, aggregates, \"groupFooterTemplate\", \"k-group-footer k-table-row\");\n                    }\n                }\n\n                if (groups && (groupHeaderColumnTemplateLockedColumns.length || groupHeaderColumnTemplateNonLockedColumns.length)) {\n                    aggregates = $.map(groups, function(g) { return g.aggregates; });\n\n                    that.groupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columns), aggregates, \"groupHeaderColumnTemplate\", \"k-table-group-row k-grouping-row k-table-row\", columnsLocked.length, groupHeaderColumnTemplateNonLockedColumns);\n\n                    if (options.scrollable && columnsLocked.length) {\n                        that.lockedGroupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columnsLocked), aggregates, \"groupHeaderColumnTemplate\", \"k-table-group-row k-grouping-row k-table-row\", 0, groupHeaderColumnTemplateLockedColumns);\n                    }\n                } else {\n                    that.groupHeaderColumnTemplate = null;\n                    that.lockedGroupHeaderColumnTemplate = null;\n                }\n\n                if (that.options.noRecords) {\n                    that.noRecordsTemplate = that._noRecordsTmpl();\n                }\n            },\n\n            _noRecordsTmpl: function() {\n                var wrapper = '<div class=\"{0}\">{1}</div>';\n                var defaultTemplate = '<div class=\"k-grid-norecords-template\"{1}>{0}</div>';\n                var scrollableNoGridHeightStyles = (this.options.scrollable && !this.wrapper[0].style.height) ? ` ${kendo.attr(\"style-margin\")}=\"0 auto\" ${kendo.attr(\"style-position\")}=\"static\"` : '';\n                var state = { storage: {}, count: 0 };\n                var settings = $.extend({}, kendo.Template, this.options.templateSettings);\n                var paramName = settings.paramName;\n                var template;\n                // var html = \"\";\n                var type;\n                var tmpl;\n                let resultTemplate;\n\n                if (this.options.noRecords.template) {\n                    template = this.options.noRecords.template;\n                } else {\n                    template = kendo.format(defaultTemplate, this.options.messages.noRecords, scrollableNoGridHeightStyles);\n                }\n\n                type = typeof template;\n                if (type === \"function\") {\n                    let currentCustomTemplate = state.storage[\"tmpl\" + state.count] = template;\n                    state.count++;\n                    resultTemplate = (data) => kendo.format(wrapper, NORECORDSCLASS, currentCustomTemplate(data));\n\n                } else if (type === \"string\") {\n                    resultTemplate = this.options.noRecords.template ?\n                        kendo.format(wrapper, NORECORDSCLASS, template)\n                        : () => kendo.format(wrapper, NORECORDSCLASS, template);\n                }\n\n                tmpl = kendo.template(resultTemplate, settings);\n\n                if (state.count > 0) {\n                    tmpl = tmpl.bind(state.storage);\n                }\n\n                return tmpl;\n            },\n\n            _footerTmpl: function(columns, aggregates, templateName, rowClass, skipGroupCells) {\n                var that = this,\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    paramName = settings.paramName,\n                    // html = \"\",\n                    idx,\n                    length,\n                    template,\n                    type,\n                    storage = {},\n                    count = 0,\n                    scope = {},\n                    groups = that._groups(),\n                    fieldsMap = that.dataSource._emptyAggregates(aggregates),\n                    column;\n\n                let footerTemplateFunction = (data) => {\n                    let html = '<tr class=\"' + rowClass + '\">';\n\n                    if (groups > 0 && !skipGroupCells) {\n                        html += groupCells(groups);\n                    }\n\n                    if (that._hasDetails()) {\n                        html += '<td class=\"k-hierarchy-cell k-table-td\">&nbsp;</td>';\n                    }\n\n                    for (idx = 0, length = columns.length; idx < length; idx++) {\n                        column = columns[idx];\n                        template = column[templateName];\n                        type = typeof template;\n\n                        html += decorateCellWithClass(\"<td\" + stringifyAttributes(column.footerAttributes) + \">\");\n\n                        if (template) {\n                            if (type !== FUNCTION) {\n                                scope = fieldsMap[column.field] ? extend({}, settings, { paramName: paramName + \"['\" + column.field + \"']\" }) : {};\n                                template = kendo.template(template, scope);\n                            }\n\n                            storage[\"tmpl\" + count] = template;\n                            html += template(data);\n                            count++;\n                        } else {\n                            html += \"&nbsp;\";\n                        }\n\n                        html += \"</td>\";\n                    }\n\n                    html += '</tr>';\n                    return html;\n                };\n\n                let resultTemplate = kendo.template(footerTemplateFunction, settings);\n\n                if (count > 0) {\n                    return resultTemplate.bind(storage);\n                }\n\n                return resultTemplate;\n            },\n\n            _groupHeaderTmpl: function(columns, aggregates, templateName, rowClass, skipGroupCells, groupHeaderColumnTemplateColumns) {\n                var that = this,\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    paramName = settings.paramName,\n                    html = \"\",\n                    idx,\n                    length,\n                    template,\n                    type,\n                    storage = {},\n                    count = 0,\n                    scope = {},\n                    fieldsMap = that.dataSource._emptyAggregates(aggregates),\n                    column,\n                    headerTemplateIndex = groupHeaderColumnTemplateColumns.length ? inArray(groupHeaderColumnTemplateColumns[0], columns) : -1,\n                    groupHeaderColumnTemplateClass;\n\n                if (headerTemplateIndex < 0) {\n                    return;\n                }\n                var groupHeaderTemplFunc = (data) => {\n                    var resultHtml = '<tr data-group-uid=\"' + data.uid + '\" class=\"' + rowClass + '\">';\n\n                    if (!skipGroupCells) {\n                        for (var i = 0; i < data.groupCells; i++) {\n                            resultHtml += '<td class=\"k-table-td k-group-cell\">&nbsp;</td>';\n                        }\n                    }\n\n                    if (that._hasDetails()) {\n                        resultHtml += '<td class=\"k-table-td k-hierarchy-cell\">&nbsp;</td>';\n                    }\n\n                    if (headerTemplateIndex < MINCOLSPANVALUE && groupHeaderColumnTemplateColumns.length <= 1 && !skipGroupCells) {\n                        resultHtml += !skipGroupCells ? groupCellBuilder(columns.length)(data) : '';\n                        return resultHtml;\n                        // return kendo.template(resultHtml, settings);\n                    }\n\n                    if (headerTemplateIndex < MINCOLSPANVALUE) {\n                        headerTemplateIndex = !skipGroupCells ? 1 : 0;\n                        resultHtml += !skipGroupCells ? groupCellBuilder(headerTemplateIndex)(data) : '';\n                    }\n                    else {\n                        resultHtml += !skipGroupCells ? groupCellBuilder(headerTemplateIndex)(data) : groupCellLockedContentBuilder(headerTemplateIndex);\n                    }\n\n                    for (idx = headerTemplateIndex, length = columns.length; idx < length; idx++) {\n                        column = columns[idx];\n                        template = column[templateName];\n                        type = typeof template;\n\n                        if (column.sticky) {\n                            let stickyAttributes = '';\n                            groupHeaderColumnTemplateClass = (column.groupHeaderColumnTemplateClass || '');\n\n                            if (!groupHeaderColumnTemplateClass) {\n                                groupHeaderColumnTemplateClass = column.groupHeaderColumnTemplateClass = \"group-header-column-template-\" + kendo.guid();\n                            }\n\n                            if (isPlainObject(column.stickyStyle)) {\n                                let stickyLeft = column.stickyStyle.left ? `${kendo.attr(\"style-left\")}=\"${column.stickyStyle.left}\"` : '';\n                                let stickyRight = column.stickyStyle.right ? `${kendo.attr(\"style-right\")}=\"${column.stickyStyle.right}\"` : '';\n                                stickyAttributes = `${stickyLeft} ${stickyRight}`;\n                            }\n\n                            resultHtml += `<td class=\"k-table-td ${STICKY_CELL_CLASS} ${groupHeaderColumnTemplateClass}\" ${stickyAttributes}>`;\n                        } else {\n                            resultHtml += \"<td class='k-table-td'>\";\n                        }\n\n                        if (template) {\n                            if (type !== FUNCTION) {\n                                scope = fieldsMap[column.field] ? extend({}, settings, { paramName: paramName + \"['\" + column.field + \"']\" }) : {};\n                                template = kendo.template(template, scope);\n                            }\n\n                            storage[\"tmpl\" + count] = template;\n                            resultHtml += storage[\"tmpl\" + count](data);\n                            count++;\n                        } else {\n                            resultHtml += \"&nbsp;\";\n                        }\n\n                        resultHtml += \"</td>\";\n                    }\n\n                    resultHtml += '</tr>';\n\n                    return resultHtml;\n                };\n\n                html = kendo.template(groupHeaderTemplFunc, settings);\n\n                if (count > 0) {\n                    return html.bind(storage);\n                }\n\n                return html;\n            },\n\n            _detailTmpl: function(template) {\n                var that = this,\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    paramName = settings.paramName,\n                    templateFunctionStorage = {},\n                    templateFunctionCount = 0,\n                    groups = that._groups(),\n                    colspan = visibleColumns(leafColumns(that.columns)).length,\n                    type = typeof template;\n\n                let detailTemplateFunction = (data) => {\n                    let html = '<tr role=\"row\" class=\"k-detail-row k-table-row\">';\n                    if (groups > 0) {\n                        html += groupCells(groups);\n                    }\n\n                    html += `<td role=\"gridcell\" class=\"k-hierarchy-cell k-table-td\"></td><td role=\"gridcell\" class=\"k-table-td k-detail-cell\"${colspan ? ` colspan=\"${colspan}\"` : ''}>`;\n                    if (type === FUNCTION) {\n                        templateFunctionStorage[\"tmpl\" + templateFunctionCount] = template;\n                        html += template(data);\n                        templateFunctionCount++;\n                    } else {\n                        html += kendo.template(template, settings)(data);\n                    }\n\n                    html += \"</td></tr>\";\n                    return html;\n                };\n\n                let resultTemplate = kendo.template(detailTemplateFunction, settings);\n\n                if (templateFunctionCount > 0) {\n                    return resultTemplate.bind(templateFunctionStorage);\n                }\n\n                return resultTemplate;\n            },\n\n            _hasDetails: function() {\n                var that = this;\n\n                return that.options.detailTemplate !== null || (that._events[DETAILINIT] || []).length;\n            },\n            _hasFilterRow: function() {\n                var filterable = this.options.filterable;\n                var hasFiltering = filterable &&\n                        typeof filterable.mode == STRING &&\n                        filterable.mode.indexOf(ROW) != -1;\n                var columns = this.columns;\n                var columnsWithoutFiltering = $.grep(columns, function(col) {\n                    return col.filterable === false;\n                });\n\n                if (columns.length && columnsWithoutFiltering.length == columns.length) {\n                    hasFiltering = false;\n                }\n\n                return hasFiltering;\n            },\n\n            _details: function() {\n                var that = this;\n\n                if (that.options.scrollable && that._hasDetails() && lockedColumns(that.columns).length) {\n                    throw new Error(\"Having both detail template and locked columns is not supported\");\n                }\n\n                that.table.on(CLICK + NS, \".k-hierarchy-cell \" + CARET_ALT_RIGHT + \", .k-hierarchy-cell \" + CARET_ALT_DOWN, function(e) {\n                    var button = $(this);\n\n                    that._toggleDetails(button);\n                    e.preventDefault();\n                    return false;\n                });\n            },\n\n            _toggleDetails: function(button, omitAnimation) {\n                var that = this,\n                cell = button.closest(\"td.k-hierarchy-cell\"),\n                expanding = button.is(CARET_ALT_RIGHT),\n                masterRow = button.closest(\"tr.k-master-row\"),\n                masterRowIndex = masterRow.attr(ARIA_ROWINDEX),\n                detailRow,\n                detailTemplate = that.detailTemplate,\n                data,\n                hasDetails = that._hasDetails(),\n                ariaLabelText = expanding ? COLLAPSE : EXPAND,\n                ariaExpandText = expanding ? true : false;\n\n                if (!expanding) {\n                    kendo.ui.icon(button, { icon: `caret-alt-${isRtl ? 'left' : 'right'}` });\n                } else {\n                    kendo.ui.icon(button, { icon: \"caret-alt-down\" });\n                }\n\n                button.attr(ARIA_LABEL, ariaLabelText);\n\n                cell.attr(ARIA_EXPANDED, ariaExpandText);\n\n                detailRow = masterRow.next();\n\n                if (detailRow.hasClass(\"k-hidden\")) {\n                    detailRow.removeClass(\"k-hidden\");\n                }\n\n                if (hasDetails && !detailRow.hasClass(\"k-detail-row\")) {\n                    data = that.dataItem(masterRow);\n\n                    detailRow = $(detailTemplate(data))\n                        .addClass(masterRow.hasClass(\"k-alt\") ? \"k-alt\" : \"\")\n                        .insertAfter(masterRow);\n\n                    if (masterRowIndex || masterRowIndex === 0) {\n                        detailRow.attr(ARIA_ROWINDEX, Number(masterRowIndex) + 1);\n                    }\n\n                    that.trigger(DETAILINIT, { masterRow: masterRow, detailRow: detailRow, data: data, detailCell: detailRow.find(\".k-detail-cell\") });\n                }\n\n                that.trigger(expanding ? DETAILEXPAND : DETAILCOLLAPSE, { masterRow: masterRow, detailRow: detailRow });\n\n                if (omitAnimation) {\n                    toggleRow(detailRow, expanding);\n                } else {\n                    detailRow.toggle(expanding);\n                }\n            },\n\n            dataItem: function(tr) {\n                tr = $(tr)[0];\n                if (!tr) {\n                    return null;\n                }\n\n                var rows = this.tbody.children(),\n                    classesRegEx = /k-grouping-row|k-detail-row|k-group-footer/,\n                    idx = tr.sectionRowIndex,\n                    j, correctIdx;\n\n                correctIdx = idx;\n\n                for (j = 0; j < idx; j++) {\n                    if (classesRegEx.test(rows[j].className)) {\n                        correctIdx--;\n                    }\n                }\n\n                return this._data[correctIdx];\n            },\n\n            expandRow: function(tr, omitAnimation) {\n                var button = $(tr).find('> td ' + CARET_ALT_RIGHT);\n\n                if (button.length) {\n                    this._toggleDetails(button, omitAnimation);\n                }\n            },\n\n            collapseRow: function(tr, omitAnimation) {\n                var button = $(tr).find('> td ' + CARET_ALT_DOWN);\n\n                if (button.length) {\n                    this._toggleDetails(button, omitAnimation);\n                }\n            },\n\n            _createHeaderCells: function(columns, rowSpan) {\n                var that = this,\n                    idx,\n                    th,\n                    text,\n                    html = \"\",\n                    length,\n                    title,\n                    columnMenu = that.options.columnMenu,\n                    sortable = that.options.sortable,\n                    filterable = that._hasFilterMenu(),\n                    messages = that.options.messages,\n                    leafs = leafColumns(that.columns),\n                    groups = that.dataSource.group(),\n                    field;\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    th = columns[idx].column || columns[idx];\n                    text = that._headerCellText(th);\n                    title = th.title;\n                    field = \"\";\n\n                    let index = inArray(th, leafs);\n                    let currentTh = \"\";\n\n                    if (th.selectable) {\n                        currentTh += \"<th scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                        if (rowSpan && !columns[idx].colSpan) {\n                            currentTh += \" rowspan='\" + rowSpan + \"'\";\n                        }\n\n                        if (index > -1) {\n                            currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                        }\n                        text = th.headerTemplate ? text : kendo.template(SELECTCOLUMNHEADERTMPL)({ size: kendo.getValidCssClass(\"k-checkbox-\", \"size\", that.options.size) });\n                        currentTh += \">\" + text + \"</th>\";\n                    } else if (th.draggable) {\n                        currentTh += \"<th class='k-header k-drag-cell' scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                        if (rowSpan && !columns[idx].colSpan) {\n                            currentTh += \" rowspan='\" + rowSpan + \"'\";\n                        }\n\n                        if (index > -1) {\n                            currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                        }\n                        text = th.headerTemplate ? text : \"\";\n                        currentTh += \">\" + text + \"</th>\";\n                    } else if (th.command) {\n                        currentTh += \"<th scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                        if (rowSpan && !columns[idx].colSpan) {\n                            currentTh += \" rowspan='\" + rowSpan + \"'\";\n                        }\n\n                        if (index > -1) {\n                            currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                        }\n\n                        currentTh += \">\" + ((!text || text === \"&nbsp;\") ? text : kendo.template(DEFAULTHEADERTEMPLATE)({ text: text })) + \"</th>\";\n                    } else {\n                        if (th.field) {\n                            field = kendo.attr(\"field\") + \"='\" + th.field + \"' \";\n                        }\n\n                        currentTh += \"<th scope='col' \" + field;\n                        if ((columnMenu && th.field && th.menu !== false)) {\n                            currentTh += \" aria-haspopup='menu'\";\n                        } else if (filterable && th.filterable !== false && !th.command) {\n                            currentTh += \" aria-haspopup='dialog'\";\n                        }\n\n                        if (rowSpan && !columns[idx].colSpan) {\n                            currentTh += \" rowspan='\" + rowSpan + \"'\";\n                        }\n\n                        if (columns[idx].colSpan > 1) {\n                            currentTh += 'colspan=\"' + (columns[idx].colSpan - hiddenLeafColumnsCount(th.columns)) + '\" ';\n                            currentTh += kendo.attr(\"colspan\") + \"='\" + columns[idx].colSpan + \"'\";\n                        } else if (columns[idx].colSpan === 1) {\n                            currentTh += kendo.attr(\"colspan\") + \"='\" + columns[idx].colSpan + \"'\";\n                        }\n\n                        if (title) {\n                            title = title && (that.options.encodeTitles ? htmlEncode(title, true) : title);\n                            currentTh += kendo.attr(\"title\") + '=\"' + title + '\" ';\n                        }\n\n                        if (th.groupable !== undefined$1) {\n                            currentTh += kendo.attr(\"groupable\") + \"='\" + th.groupable + \"' \";\n                        }\n\n                        if (isColumnGroupable(that, th) && (!th.headerAttributes || !th.headerAttributes.title)) {\n                            currentTh += \"title='\";\n                            currentTh += isGroupedBy(groups, th.field) ? messages.ungroupHeader : messages.groupHeader;\n                            currentTh += \"' \";\n                        }\n\n                        if (th.aggregates && th.aggregates.length) {\n                            currentTh += kendo.attr(\"aggregates\") + \"='\" + th.aggregates + \"'\";\n                        }\n\n                        if (index > -1) {\n                            currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                        }\n\n                        currentTh += stringifyAttributes(th.headerAttributes);\n\n                        text = kendo.template(DEFAULTHEADERTEMPLATE)({ text: text });\n\n                        currentTh += \">\" + text + \"</th>\";\n                    }\n                    if (that.options.resizable) {\n                        html += $(currentTh).attr(\"data-resizable\", th.resizable !== false).addClass(\"k-table-th\")[0].outerHTML;\n                    } else {\n                        html += $(currentTh).addClass(\"k-table-th\")[0].outerHTML;\n                    }\n                }\n                return html;\n            },\n\n            _appendLockedColumnContent: function() {\n                var columns = this.columns,\n                    idx,\n                    colgroup = this.table.find(\"colgroup\"),\n                    cols = colgroup.find(COLGROUP),\n                    length,\n                    lockedCols = $(),\n                    skipHiddenCount = 0,\n                    container,\n                    colSpan,\n                    spanIdx,\n                    colOffset = 0;\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    if (columns[idx].locked) {\n\n                        if (isVisible(columns[idx])) {\n                            colSpan = 1;\n\n                            if (columns[idx].columns) {\n                                colSpan = leafColumns(columns[idx].columns).length - hiddenLeafColumnsCount(columns[idx].columns);\n                            }\n\n                            colSpan = colSpan || 1;\n                            for (spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                                lockedCols = lockedCols.add(cols.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                            }\n                            colOffset += colSpan - 1;\n                        } else {\n                            skipHiddenCount ++;\n                        }\n                    }\n                }\n\n                container = $('<div class=\"k-grid-content-locked\"><table class=\"k-grid-table k-table\"><colgroup></colgroup><tbody class=\"k-table-tbody\"></tbody></table></div>');\n                // detach is required for IE8, otherwise it switches to compatibility mode\n                colgroup.detach();\n                container.find(\"colgroup\").append(lockedCols);\n                colgroup.insertBefore(this.table.find(\"tbody\"));\n\n                this.lockedContent = container.insertBefore(this.content);\n                this.lockedTable = container.children(\"table\");\n                this.lockedTable.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", this.options.size));\n            },\n\n            _appendLockedColumnFooter: function() {\n                var that = this;\n                var footer = that.footer;\n                var cells = footer.find(\".k-footer-template>td\");\n                var cols = footer.find(\".k-grid-footer-wrap>table>colgroup>col\");\n                var html = $('<div class=\"k-grid-footer-locked\"><table class=\"k-grid-footer-table k-table\"><colgroup></colgroup><tfoot class=\"k-table-tfoot\"><tr class=\"k-footer-template k-table-row\"></tr></tfoot></table></div>');\n                var idx, length;\n                var groups = that._groups();\n                var lockedCells = $(), lockedCols = $();\n\n                html.find(\"table\").addClass(kendo.getValidCssClass(\"k-table-\", \"size\", this.options.size));\n\n                lockedCells = lockedCells.add(cells.filter(\".k-group-cell\"));\n                for (idx = 0, length = leafColumns(lockedColumns(that.columns)).length; idx < length; idx++) {\n                    lockedCells = lockedCells.add(cells.eq(idx + groups));\n                }\n\n                lockedCols = lockedCols.add(cols.filter(\".k-group-col\"));\n                for (idx = 0, length = visibleColumns(leafColumns(visibleLockedColumns(that.columns))).length; idx < length; idx++) {\n                    lockedCols = lockedCols.add(cols.eq(idx + groups));\n                }\n\n                lockedCells.appendTo(html.find(TR));\n                lockedCols.appendTo(html.find(\"colgroup\"));\n                that.lockedFooter = html.prependTo(footer);\n            },\n\n            _appendLockedColumnHeader: function(container) {\n                var that = this,\n                    columns = this.columns,\n                    idx,\n                    html,\n                    length,\n                    colgroup,\n                    tr,\n                    trFilter,\n                    table,\n                    header,\n                    filtercellCells,\n                    rows = [],\n                    skipHiddenCount = 0,\n                    cols = $(),\n                    hasFilterRow = that._hasFilterRow(),\n                    filterCellOffset = 0,\n                    filterCells = $(),\n                    cell,\n                    leafColumnsCount = 0,\n                    cells = $();\n\n                colgroup = that.thead.prev().find(COLGROUP);\n                header = that.thead.find(TR).first().find(\".k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n                filtercellCells = that.thead.find(\".k-filter-row\").find(\"td:not(.k-group-cell,.k-hierarchy-cell)\");\n\n                var colOffset = 0;\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    if (columns[idx].locked) {\n                        cell = header.eq(idx);\n                        leafColumnsCount = leafColumns(columns[idx].columns || []).length;\n\n                        if (isVisible(columns[idx])) {\n                            var colSpan = null;\n\n                            if (columns[idx].columns) {\n                                colSpan = leafColumnsCount - hiddenLeafColumnsCount(columns[idx].columns);\n                            }\n\n                            colSpan = colSpan || 1;\n                            for (var spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                                cols = cols.add(colgroup.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                            }\n                            colOffset += colSpan - 1;\n                        }\n\n                        mapColumnToCellRows([columns[idx]], childColumnsCells(cell), rows, 0, 0);\n\n                        leafColumnsCount = leafColumnsCount || 1;\n                        for (var j = 0; j < leafColumnsCount; j++) {\n                            filterCells = filterCells.add(filtercellCells.eq(filterCellOffset + j));\n                        }\n                        filterCellOffset += leafColumnsCount;\n                    }\n\n                    if (columns[idx].columns) {\n                        skipHiddenCount += hiddenLeafColumnsCount(columns[idx].columns);\n                    }\n\n                    if (!isVisible(columns[idx])) {\n                        skipHiddenCount++;\n                    }\n                }\n\n                if (rows.length) {\n                    html = '<div class=\"k-grid-header-locked\"><table class=\"k-grid-header-table k-table\"><colgroup></colgroup><thead class=\"k-table-thead\">';\n                    html += new Array(rows.length + 1).join(\"<tr class='k-table-row'></tr>\");\n                    html += (hasFilterRow ? '<tr class=\"k-filter-row k-table-row\"></tr>' : '') + '</thead></table></div>';\n\n                    table = $(html);\n\n                    table.find('.k-grid-header-locked').css('width', '1px');\n\n                    table.find(\"table\").addClass(kendo.getValidCssClass(\"k-table-\", \"size\", that.options.size));\n                    colgroup = table.find(\"colgroup\");\n                    colgroup.append(that.thead.prev().find(\"col.k-group-col\").add(cols));\n\n                    tr = table.find(\"thead tr:not(.k-filter-row)\");\n                    for (idx = 0, length = rows.length; idx < length; idx++) {\n                        cells = toJQuery(rows[idx]);\n                        tr.eq(idx).append(that.thead.find(TR).eq(idx).find(\".k-group-cell\").add(cells));\n                    }\n\n                    var count = removeEmptyRows(this.thead);\n                    if (rows.length < count) {\n                        removeRowSpanValue(table, count - rows.length);\n                    }\n\n                    trFilter = table.find(\".k-filter-row\");\n                    trFilter.append(that.thead.find(\".k-filter-row .k-group-cell\").add(filterCells));\n\n                    this.lockedHeader = table.prependTo(container);\n                    this.thead.find(\".k-group-cell\").remove();\n\n                    return true;\n                }\n                return false;\n            },\n\n            _removeLockedContainers: function() {\n                var elements = this.lockedHeader\n                    .add(this.lockedContent)\n                    .add(this.lockedFooter);\n\n                kendo.destroy(elements);\n                elements.off(NS).remove();\n\n                this.lockedHeader = this.lockedContent = this.lockedFooter = null;\n                this.selectable = null;\n            },\n\n            _thead: function() {\n                var that = this,\n                    columns = that.columns,\n                    hasDetails = that._hasDetails() && columns.length,\n                    hasFilterRow = that._hasFilterRow(),\n                    idx,\n                    html = \"\",\n                    thead = that.table.find(\">thead\"),\n                    hasTHead = that.element.find(\"thead\").first().length > 0,\n                    headerContent = that.options.messages.expandCollapseColumnHeader,\n                    tr;\n\n                if (!thead.length) {\n                    thead = $(\"<thead/>\").insertBefore(that.tbody);\n                }\n\n                thead.addClass(\"k-table-thead\").attr(\"role\", \"rowgroup\");\n\n                if (that.lockedHeader && that.thead) {\n                    tr = that.thead.find(\"tr:has(th):not(.k-filter-row)\").html(\"\");\n                    tr.remove();\n                    tr = $();\n\n                    that._removeLockedContainers();\n                } else if (hasTHead) {\n                    tr = that.element.find(\"thead\").first().find(\"tr:has(th):not(.k-filter-row)\");\n                } else {\n                    tr = that.element.find(\"tr:has(th)\").first();\n                }\n\n                if (!tr.length) {\n                    tr = thead.children().first();\n                    if (!tr.length) {\n                       var rows = [{ rowSpan: 1, cells: [], index: 0 }];\n                       that._prepareColumns(rows, columns);\n\n                       for (idx = 0; idx < rows.length; idx++) {\n                           html += \"<tr class='k-table-row'>\";\n                           if (hasDetails) {\n                               html += '<th class=\"k-hierarchy-cell k-table-th\" scope=\"col\">' + headerContent + '</th>';\n                           }\n                           html += that._createHeaderCells(rows[idx].cells, rows[idx].rowSpan);\n                           html += \"</tr>\";\n                       }\n\n                       tr = $(html);\n                       kendo.applyStylesFromKendoAttributes(tr, [\"display\", \"left\", \"right\"]);\n                    }\n                } else {\n                    for (idx = 0; idx < columns.length; idx++) {\n    \t\t\t\t\tvar columnIndex = inArray(columns[idx], leafColumns(columns));\n    \t\t\t\t\tvar cell = leafDataCells(tr.parent()).filter(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\").eq(columnIndex);\n                        cell.addClass(\"k-table-th\");\n    \t\t\t\t\tif (columns[idx].hidden && columnIndex >= 0) {\n    \t\t\t\t\t\tcell[0].style.display = NONE;\n    \t\t\t\t\t}\n                   }\n\n                   that._updateHeadersAttr(childColumns(columns));\n    \t\t\t}\n\n                if (hasFilterRow) {\n                    var filterRow = $(\"<tr/>\");\n                    filterRow.addClass(\"k-filter-row k-table-row\");\n                    if (hasDetails || tr.find(\".k-hierarchy-cell\").length) { // handles server side detail template\n                        filterRow.prepend('<td class=\"k-table-td k-hierarchy-cell\">&nbsp;</td>');\n                    }\n\n                    var existingFilterRow = (that.thead || thead).find(\".k-filter-row\");\n                    if (existingFilterRow.length) {\n                        kendo.destroy(existingFilterRow);\n                        existingFilterRow.remove();\n                    }\n\n                    thead.append(filterRow);\n                }\n\n                if (!tr.children().length) {\n                    html = \"\";\n                    if (hasDetails) {\n                        html += '<th class=\"k-hierarchy-cell k-table-th\" scope=\"col\">&nbsp;</th>';\n                    }\n\n                    html += that._createHeaderCells(columns);\n\n                    tr.html(html);\n                } else if (hasDetails && !tr.find(\".k-hierarchy-cell\")[0]) {\n                    tr.prepend('<th class=\"k-hierarchy-cell k-table-th\" scope=\"col\">' + (headerContent ? headerContent : '&nbsp;') + '</th>');\n                }\n\n                tr.find(\"th\").addClass(HEADER_CLASS);\n\n                if (!that.options.scrollable) {\n                    thead.addClass(\"k-grid-header\");\n                }\n\n                tr.find(\"script\").remove().end().prependTo(thead);\n\n                if (that.thead) {\n                    that._destroyColumnAttachments();\n                }\n\n                that.thead = thead;\n\n                that._sortable();\n\n                that._filterable();\n\n                that._filterRow();\n\n                that._scrollable();\n\n                that._columnMenu();\n\n                var syncHeight;\n                var hasLockedColumns = this.options.scrollable && lockedColumns(this.columns).length;\n\n                if (hasLockedColumns) {\n\n                    syncHeight = that._appendLockedColumnHeader(that.thead.closest(\".k-grid-header\"));\n\n                    that._appendLockedColumnContent();\n\n                    that.lockedContent.on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n\n                    if (kendo.support.touch) {\n                        that._lockedContentUserEvents = new kendo.UserEvents(that.lockedContent, {\n                            move: function(e) {\n                                that.content.scrollTop(that.content.scrollTop() + (-e.y.delta));\n                                e.preventDefault();\n                            }\n                        });\n                    }\n\n                    that._updateLockedCols();\n                }\n\n                that._updateCols();\n\n                that._updateColumnCellIndex();\n\n                that._updateFirstColumnClass();\n\n                that._resizable();\n\n                that._draggable();\n\n                that._reorderable();\n\n                that._updateHeader(that._groups());\n\n                that._updateStickyColumns();\n\n                if (hasLockedColumns) {\n                    if (syncHeight) {\n                        that._syncLockedHeaderHeight();\n                    }\n\n                    that._applyLockedContainersWidth();\n                }\n            },\n\n            _retrieveFirstColumn: function(columns, rows) {\n                var result = $();\n\n                if (rows.length && columns[0]) {\n                    var column = columns[0];\n\n                    while (column.columns && column.columns.length) {\n                        column = column.columns[0];\n                        rows = rows.filter(\":not(:first)\");\n                    }\n\n                    result = result.add(rows);\n                }\n\n                return result;\n            },\n\n            _updateFirstColumnClass: function() {\n                var that = this,\n                    columns = that.columns || [],\n                    hasDetails = that._hasDetails() && columns.length;\n\n                if (!hasDetails && !that._groups()) {\n                    var tr = that.thead.find(\">tr:not(.k-filter-row):not(:first)\");\n                    columns = nonLockedColumns(columns);\n\n                    var rows = that._retrieveFirstColumn(columns, tr);\n\n                    if (that._isLocked()) {\n                        tr = that.lockedHeader.find(\"thead>tr:not(.k-filter-row):not(:first)\");\n                        columns = lockedColumns(that.columns);\n\n                        rows = rows.add(that._retrieveFirstColumn(columns, tr));\n                    }\n\n                    rows.each(function() {\n                        var ths = $(this).find(\"th\");\n                        ths.removeClass(\"k-first\");\n                        ths.eq(0).addClass(\"k-first\");\n                    });\n                }\n            },\n\n            _prepareColumns: function(rows, columns, parentCell, parentRow) {\n                var row = parentRow || rows[rows.length - 1];\n\n                var childRow = rows[row.index + 1];\n                var totalColSpan = 0;\n\n                for (var idx = 0; idx < columns.length; idx++) {\n                    var cell = { column: columns[idx], colSpan: 0 };\n                    row.cells.push(cell);\n\n                    if (columns[idx].columns && columns[idx].columns.length) {\n                        if (!childRow) {\n                            childRow = { rowSpan: 0, cells: [], index: rows.length };\n                            rows.push(childRow);\n                        }\n                        cell.colSpan = columns[idx].columns.length;\n                        this._prepareColumns(rows, columns[idx].columns, cell, childRow);\n                        totalColSpan += cell.colSpan - 1;\n                        row.rowSpan = rows.length - row.index;\n                    }\n                }\n                if (parentCell) {\n                    parentCell.colSpan += totalColSpan;\n                }\n            },\n\n            _wheelScroll: function(e) {\n                if (e.ctrlKey) {\n                    return;\n                }\n\n                var content = this.content;\n\n                if (this.virtualScroll && this.virtualScroll.rows) {\n                    content = this.virtualScrollable.verticalScrollbar;\n                }\n\n                var scrollTop = content.scrollTop(),\n                    delta = kendo.wheelDeltaY(e);\n\n                if (delta) {\n                    if (content[0].scrollHeight > content[0].clientHeight &&\n                        (content[0].scrollTop < content[0].scrollHeight - content[0].clientHeight && delta < 0 ||\n                        content[0].scrollTop > 0 && delta > 0)) {\n                        e.preventDefault();\n                    }\n\n                    content.scrollTop(scrollTop + (-delta));\n                }\n            },\n\n            _isLocked: function() {\n                return this.lockedHeader != null;\n            },\n\n            _updateHeaderCols: function() {\n                var table = this.thead.parent().add(this.table);\n\n                if (this._isLocked()) {\n                    normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n                } else {\n                    normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), 0);\n                }\n            },\n\n            _updateColumnSorters: function() {\n                var that = this;\n                var cells = leafDataCells(that.thead);\n                var columns = leafColumns(that.columns);\n                var column;\n                var cell;\n                var sorterInstance;\n\n                if (!that.options.sortable) {\n                    return;\n                }\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                    column = columns[idx];\n\n                    if (column.sortable !== false && !column.command && column.field) {\n                        cell = cells.eq(idx);\n\n                        sorterInstance = cell.data(\"kendoColumnSorter\");\n\n                        if (sorterInstance) {\n                            sorterInstance.refresh();\n                        }\n                    }\n                }\n            },\n\n            _updateHeadersAttr: function(columns) {\n                if (!columns.length) {\n                    return;\n                }\n\n                var that = this;\n\n                for (var i = 0; i < columns.length; i++) {\n                    if (columns[i].headerAttributes) {\n                        var th = that.element.find(\"[id='\" + columns[i].headerAttributes.id + \"']\");\n                        th.attr(\"headers\", columns[i].headerAttributes.headers);\n                    }\n                }\n\n                that._updateHeadersAttr(childColumns(columns));\n            },\n\n            _updateCols: function(table) {\n                table = table || this.thead.parent().add(this.table);\n\n                this._appendCols(table, this._isLocked());\n            },\n\n            _updateLockedCols: function(table) {\n                if (this._isLocked()) {\n                    table = table || this.lockedHeader.find(\"table\").add(this.lockedTable);\n\n                    normalizeCols(table, visibleLeafColumns(visibleLockedColumns(this.columns)), this._hasDetails(), this._groups());\n                }\n            },\n\n            _appendCols: function(table, locked) {\n                if (locked) {\n                    normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n                } else {\n                    normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), this._groups());\n                }\n            },\n\n            _autoColumns: function(schema) {\n                if (schema && schema.toJSON) {\n                    var that = this,\n                        field,\n                        encoded;\n\n                    schema = schema.toJSON();\n\n                    encoded = !(that.table.find(\"tbody tr\").length > 0 && (!that.dataSource || !that.dataSource.transport));\n\n                    for (field in schema) {\n                        that.columns.push({ field: field, encoded: encoded, headerAttributes: { id: kendo.guid() } });\n                    }\n\n                    that._thead();\n\n                    that._templates();\n                }\n            },\n\n            _setRowCachedHeight: function(row, uid) {\n                var cachedHeights = this._cachedRowsHeight,\n                    cachedHeight = cachedHeights[uid],\n                    $row;\n\n                if (cachedHeight) {\n                    $row = $(row);\n                    $row[0].style.height = cachedHeight + \"px\";\n                    row = $row.prop(\"outerHTML\");\n                }\n\n                return row;\n            },\n\n            _rowsHtml: function(data, templates) {\n                var that = this,\n                    html = \"\",\n                    idx,\n                    rowTemplate = templates.rowTemplate,\n                    altRowTemplate = templates.altRowTemplate,\n                    cachedHeights = that._cachedRowsHeight,\n                    length, row;\n\n                for (idx = 0, length = data.length; idx < length; idx++) {\n                    if (that._skipRerenderItemsCount > 0) {\n                        that._skipRerenderItemsCount--;\n                    } else {\n                        if (idx % 2) {\n                            row = altRowTemplate(data[idx]);\n                        } else {\n                            row = rowTemplate(data[idx]);\n                        }\n\n                        if (cachedHeights) {\n                            row = that._setRowCachedHeight(row, data[idx].uid);\n                        }\n\n                        html += row;\n                    }\n                    that._data.push(data[idx]);\n                }\n\n                return html;\n            },\n\n            _groupData: function(group, skipFooter, firstColumn) {\n                var that = this,\n                    footerDefaults = that._groupAggregatesDefaultObject || {},\n                    groupItems = group.items,\n                    aggregates = extend({}, footerDefaults, group.aggregates),\n                    headerData = extend({}, {\n                        field: group.field,\n                        value: group.value,\n                        items: groupItems,\n                        aggregates: aggregates\n                    }, group.aggregates[firstColumn ? firstColumn.field : group.field]),\n                    footerData = {};\n\n                if (!skipFooter) {\n                    for (var aggregate in aggregates) {\n                        footerData[aggregate] = extend({}, aggregates[aggregate],\n                            { group: { field: group.field, value: group.value, items: groupItems } }\n                        );\n                    }\n                }\n                return extend({}, footerData, headerData);\n            },\n\n            _removeGroupIfEmpty: function(row) {\n                var that = this,\n                    itemsCount,\n                    subgroupsCount,\n                    length = that.dataSource._group.length;\n\n                for (var i = 0; i < length; i++) {\n                    row = row.prev();\n                    itemsCount = +row.attr('data-group-item-count');\n                    subgroupsCount = +row.attr('data-sub-group-count');\n\n                    if (itemsCount == 1 || subgroupsCount == 1) {\n                        row.hide();\n                    }\n\n                }\n            },\n\n            _groupRowHtml: function(group, colspan, level, groupHeaderBuilder, templates, skipColspan, skipLastGroup, isLockedTable) {\n                var that = this,\n                    html = \"\",\n                    idx,\n                    length,\n                    isLocked = that.lockedContent != null,\n                    field = group.field,\n                    column = grep(leafColumns(that.columns), function(column) { return column.field == field; })[0] || { },\n                    firstColumn = visibleColumns(that.columns)[0],\n                    firstVisibleColumnGroupHeaderTemplate = firstColumn ? firstColumn.groupHeaderColumnTemplate : null,\n                    template = column.groupHeaderTemplate ? column.groupHeaderTemplate : firstVisibleColumnGroupHeaderTemplate,\n                    text = (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || htmlEncode(field, true)) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded),\n                    groupItems = group.currentItems || group.items,\n                    groups = that._groups(),\n                    groupFooterTemplate = templates.groupFooterTemplate,\n                    groupHeaderColumnTemplate = templates.groupHeaderColumnTemplate,\n                    groupData,\n                    isGroupPaged = that.dataSource._isGroupPaged(),\n                    expanded = isGroupPaged ? that.dataSource._groupsState[group.uid] : true;\n\n                if (that.options.editable && group.items && group.items[0] && group.items[0].isNew && group.items[0].isNew()) {\n                    expanded = true;\n                }\n\n                if (templates.groupFooterTemplate || templates.groupHeaderColumnTemplate || column.groupHeaderTemplate) {\n                    groupData = that._groupData(group, false, !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false);\n                }\n                if (template && !skipColspan) {\n                    text = typeof template === FUNCTION ? template(groupData) : kendo.template(template)(groupData);\n                }\n\n                if (!that._skipRerenderItemsCount) {\n                    if (!group.excludeHeader) {\n                        html += groupHtmlBuilder(groupHeaderColumnTemplate, groupHeaderBuilder, colspan, groups - level, groupData, level, text, expanded, group, isGroupPaged);\n                    } else if (isLocked) {\n                        group.excludeHeader = isLockedTable ? false : true;\n                    } else {\n                        group.excludeHeader = false;\n                    }\n                } else {\n                    groupHeaderBuilder(colspan, level, text, expanded, group.uid, isGroupPaged);\n                }\n\n                if (expanded) {\n                    if (group.hasSubgroups) {\n                        for (idx = 0, length = groupItems.length; idx < length; idx++) {\n                            html += that._groupRowHtml(groupItems[idx], skipColspan ? colspan : colspan - 1, level + 1, groupHeaderBuilder, templates, skipColspan, skipLastGroup && idx === groupItems.length - 1, isLockedTable);\n                        }\n                    } else {\n                        html += that._rowsHtml(groupItems, templates);\n                    }\n                }\n\n                if (groupFooterTemplate) {\n\n                    if (skipLastGroup) {\n                        if (!inArray(group.value, that._skippedGroups)) {\n                            that._skippedGroups.push(group.value);\n                        }\n                    } else {\n                        if (that._skippedGroups.length && that._skippedGroups[0] === group.value) {\n                            that._skippedGroups.shift();\n                        }\n                        if (!that._skipRerenderItemsCount) {\n                            html += groupFooterTemplate(groupData);\n                        }\n                    }\n                }\n                return html;\n            },\n\n            collapseGroup: function(group) {\n                var level,\n                    that = this,\n                    groupToCollapse = group,\n                    groupable = this.options.groupable,\n                    showFooter = groupable.showFooter,\n                    footerCount = showFooter ? 0 : 1,\n                    offset,\n                    relatedGroup = $(),\n                    idx,\n                    length,\n                    tr;\n\n                group = $(group);\n                level = group.find(\".k-group-cell\").length;\n\n                if (this.dataSource._isGroupPaged()) {\n                    var groupUid = group.attr(\"data-group-uid\");\n                    var groupObject = that.dataSource._getGroupByUid(groupUid);\n                    var currentGroupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n                    var groupCountAfterCollapse;\n\n                    that.dataSource._groupsState[groupUid] = false;\n                    groupCountAfterCollapse = that.dataSource._calculateGroupsTotal([groupObject], true);\n                    that.dataSource._serverGroupsTotal -= currentGroupCount - groupCountAfterCollapse;\n                    that._progress(true);\n                    that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function() {\n                        that._progress(false);\n                    }, \"collapseGroup\");\n                    return;\n                }\n\n                if (this._isLocked()) {\n                    if (!group.closest(DIV).hasClass(\"k-grid-content-locked\")) {\n                        relatedGroup = group.nextAll(TR);\n                        group = this.lockedTable.find(\">tbody>tr\").eq(group.index());\n                    } else {\n                        relatedGroup = this.tbody.children(TR).eq(group.index()).nextAll(TR);\n                    }\n                }\n\n                if (group.find(CARET_ALT_DOWN).length) {\n                    kendo.ui.icon(group.find(CARET_ALT_DOWN), { icon: `caret-alt-${isRtl ? 'left' : 'right'}` });\n                }\n\n                group.find(\"td[aria-expanded='true']\").first().attr(ARIA_EXPANDED, false)\n                    .find(\"a\").attr(ARIA_LABEL, EXPAND);\n\n                group = group.nextAll(TR);\n\n                var toHide = [];\n\n                for (idx = 0, length = group.length; idx < length; idx ++ ) {\n                    tr = group.eq(idx);\n                    offset = tr.find(\".k-group-cell\").length;\n\n                    if (tr.hasClass(GROUPING_ROW)) {\n                        footerCount++;\n                    } else if (tr.hasClass(\"k-group-footer\")) {\n                        footerCount--;\n                    }\n\n                    if (offset <= level || (tr.hasClass(\"k-group-footer\") && footerCount < 0)) {\n                        break;\n                    }\n\n                    if (relatedGroup.length) {\n                        toHide.push(relatedGroup[idx]);\n                    }\n                    toHide.push(tr[0]);\n                }\n\n                $(toHide).hide();\n\n                if (this.options.scrollable.endless && this.content) {\n                    clearTimeout(that._collapseGroupsTimeOut);\n                    that._collapseGroupsTimeOut = setTimeout(function() {\n                        that.content.scroll();\n                        that._groupToCollapse = groupToCollapse;\n                    });\n                }\n            },\n\n            expandGroup: function(group) {\n                    group = $(group);\n\n                var that = this,\n                    showFooter = that.options.groupable.showFooter,\n                    level,\n                    tr,\n                    offset,\n                    relatedGroup = $(),\n                    idx,\n                    length,\n                    footersVisibility = [],\n                    groupsCount = 1;\n\n                    level = group.find(\".k-group-cell\").length;\n\n                if (this.dataSource._isGroupPaged()) {\n                    var groupUid = group.attr(\"data-group-uid\");\n                    var groupObject = that.dataSource._getGroupByUid(groupUid);\n                    var groupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n                    var groupCountAfterExpand;\n\n                    that.dataSource._groupsState[groupUid] = true;\n                    if (groupObject.items && groupObject.items.length) {\n                        groupCountAfterExpand = that.dataSource._calculateGroupsTotal([groupObject], true);\n                        that.dataSource._serverGroupsTotal += groupCountAfterExpand - groupCount;\n                    }\n\n                    that._progress(true);\n                    that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function() {\n                        that._progress(false);\n                    }, \"expandGroup\");\n                    return;\n                }\n\n                if (this._isLocked()) {\n                    if (!group.closest(DIV).hasClass(\"k-grid-content-locked\")) {\n                        relatedGroup = group.nextAll(TR);\n                        group = this.lockedTable.find(\">tbody>tr\").eq(group.index());\n                    } else {\n                        relatedGroup = this.tbody.children(TR).eq(group.index()).nextAll(TR);\n                    }\n                }\n\n                if (group.find(CARET_ALT_RIGHT).length) {\n                    kendo.ui.icon(group.find(CARET_ALT_RIGHT), { icon: \"caret-alt-down\" });\n                }\n\n                group.find(\"td[aria-expanded='false']\").first().attr(ARIA_EXPANDED, true)\n                    .find(\"a\").attr(ARIA_LABEL, COLLAPSE);\n                group = group.nextAll(TR);\n\n                for (idx = 0, length = group.length; idx < length; idx ++ ) {\n                    tr = group.eq(idx);\n                    offset = tr.find(\".k-group-cell\").length;\n                    if (offset <= level) {\n                        break;\n                    }\n\n                    if (offset == level + 1 && !tr.hasClass(\"k-detail-row\")) {\n                        tr.show();\n                        relatedGroup.eq(idx).show();\n\n                        if (tr.hasClass(GROUPING_ROW) && tr.find(\".k-icon,.k-svg-icon\").is(CARET_ALT_DOWN)) {\n                            that.expandGroup(tr);\n                        }\n\n                        if (tr.hasClass(\"k-master-row\") && tr.find(\".k-icon,.k-svg-icon\").is(CARET_ALT_DOWN)) {\n                            tr.next().show();\n                            relatedGroup.eq(idx + 1).show();\n                        }\n                    }\n\n                    if (tr.hasClass(GROUPING_ROW)) {\n                        if (showFooter) {\n                            footersVisibility.push(tr.is(\":visible\"));\n                        }\n                        groupsCount ++;\n                    }\n\n                    if (tr.hasClass(\"k-group-footer\")) {\n                        if (showFooter) {\n                            var toggleVisibility = footersVisibility.pop();\n                            tr.toggle(toggleVisibility);\n                            relatedGroup.eq(idx).toggle(toggleVisibility);\n                        }\n                        if (groupsCount == 1) {\n                            tr.show();\n                            relatedGroup.eq(idx).show();\n                        } else {\n                            groupsCount --;\n                        }\n                    }\n                }\n\n                if ((level === 0 && that.options.scrollable.endless && this._isLocked()) ||\n                (!that.options.scrollable.endless && this._isLocked())) {\n                    that._syncLockedContentHeight();\n                }\n            },\n\n            _updateHeader: function(groups) {\n                var that = this,\n                    container = that._isLocked() ? that.lockedHeader.find(\"thead\") : that.thead,\n                    filterCells = container.find(\"tr.k-filter-row\").find(\"td.k-group-cell\").length,\n                    length = container.find(TR).first().find(\"th.k-group-cell\").length,\n                    rows = container.children(\"tr:not(:first)\").filter(function() {\n                        return !$(this).children(\":visible\").length;\n                    });\n\n                if (groups > length) {\n                    $(new Array(groups - length + 1).join('<th class=\"k-group-cell k-header k-table-th\" scope=\"col\">' + encode(that.options.messages.expandCollapseColumnHeader) + '</th>')).prependTo(container.children(\"tr:not(.k-filter-row)\"));\n                    if (that.element.is(\":visible\")) {\n                        rows.find(\"th.k-group-cell\").hide();\n                    }\n                } else if (groups < length) {\n                    container.find(TR).each(function() {\n                        $(this).find(\".k-group-cell\").eq(groups).remove();\n                        $(this).find(\".k-group-cell\").slice(groups).remove();\n                    });\n                }\n                if (groups > filterCells) {\n                    $(new Array(groups - filterCells + 1).join('<td class=\"k-group-cell k-table-td\">&nbsp;</td>')).prependTo(container.find(\".k-filter-row\"));\n                }\n            },\n\n            _firstDataItem: function(data, grouped) {\n                if (data && grouped) {\n                    if (data.hasSubgroups) {\n                        data = this._firstDataItem(data.items[0], grouped);\n                    } else {\n                        data = data.items[0];\n                    }\n                }\n                return data;\n            },\n\n            _updateTablesWidth: function() {\n                var that = this,\n                    tables;\n\n                if (!that._isLocked()) {\n                    return;\n                }\n\n                tables =\n                    $(\">.k-grid-footer>.k-grid-footer-wrap>table\", that.wrapper)\n                    .add(that.thead.parent())\n                    .add(that.table);\n\n                that._footerWidth = tableWidth(tables.eq(0));\n                tables.width(that._footerWidth);\n\n                tables =\n                    $(\">.k-grid-footer>.k-grid-footer-locked>table\", that.wrapper)\n                    .add(that.lockedHeader.find(\">table\"))\n                    .add(that.lockedTable);\n\n                tables.width(tableWidth(tables.eq(0)));\n            },\n\n            hideColumn: function(column) {\n                var that = this,\n                    cell,\n                    tables,\n                    idx,\n                    cols,\n                    colWidth,\n                    position,\n                    width = 0,\n                    headerCellIndex,\n                    length,\n                    footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                    virtualScroll = that.virtualScroll || {},\n                    columns = that.columns,\n                    visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).filter(isCellVisible).length : 0,\n                    columnIndex,\n                    groupHeaderColumnTemplateColumns,\n                    columnsToHide;\n\n                if (!Array.isArray(column)) {\n                    columnsToHide = [column];\n                } else {\n                    columnsToHide = column;\n                }\n\n                columnsToHide.forEach((column) => {\n                    groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n                    if (typeof column == \"number\") {\n                        column = columns[column];\n                    } else if (isPlainObject(column)) {\n                        column = grep(flatColumns(columns), function(item) {\n                            return item === column;\n                        })[0];\n                    } else {\n                        column = grep(flatColumns(columns), function(item) {\n                            return item.field === column;\n                        })[0];\n                    }\n\n                    if (!column || !isVisible(column)) {\n                        return;\n                    }\n\n                    var setColumnVisibility = that._columnVisibilitySetter(column);\n\n                    if (column.columns && column.columns.length) {\n                        position = columnVisiblePosition(column, columns);\n\n                        setColumnVisibility(column, false);\n\n                        setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr:eq(\" + position.row + \")>th\"), position.cell, false);\n\n                        for (idx = 0; idx < column.columns.length; idx++) {\n                           this.hideColumn(column.columns[idx]);\n                        }\n\n                        that._ariaAddHiddenColIndex();\n                        that.trigger(COLUMNHIDE, { column: column });\n\n                        return;\n                    }\n\n                    columnIndex = inArray(column, visibleColumns(leafColumns(columns)));\n\n                    setColumnVisibility(column, false);\n\n                    that._setParentsVisibility(column, false);\n\n                    that._templates();\n\n                    that._updateCols();\n                    that._updateLockedCols();\n\n                    var container = that.thead;\n\n                    headerCellIndex = columnIndex;\n                    if (that.lockedHeader && visibleLocked > columnIndex) {\n                        container = that.lockedHeader.find(\">table>thead\");\n                    } else {\n                        headerCellIndex -= visibleLocked;\n                    }\n\n                    cell = leafDataCells(container).filter(isCellVisible).eq(headerCellIndex);\n                    cell[0].style.display = NONE;\n\n                    setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr.k-filter-row>td\"), columnIndex, false);\n                    if (footer[0]) {\n                        that._updateCols(footer.find(\">.k-grid-footer-wrap>table\"));\n                        that._updateLockedCols(footer.find(\">.k-grid-footer-locked>table\"));\n                        setCellVisibility(footer.find(\".k-footer-template>td\"), columnIndex, false);\n                    }\n\n                    if (virtualScroll.columns && !column.locked) {\n                        that._updateContentWidth();\n                        that.trigger(COLUMNHIDE, { column: column });\n                        return;\n                    }\n\n                    if (that.lockedTable && visibleLocked > columnIndex) {\n                        hideColumnCells(that.lockedTable.find(\">tbody>tr\"), columnIndex);\n                    } else {\n                        hideColumnCells(that.tbody.children(), columnIndex - visibleLocked);\n                    }\n\n                    if (that.lockedTable) {\n                        that._updateTablesWidth();\n                        that._applyLockedContainersWidth();\n                        that._syncLockedContentHeight();\n                        that._syncLockedHeaderHeight();\n                        that._syncLockedFooterHeight();\n                    } else {\n                        cols = that.thead.prev().find(\"col\");\n                        for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                            colWidth = cols[idx].style.width;\n\n                            if (cols[idx].className.indexOf(\"k-hierarchy-col\") > -1) {\n                                width += outerWidth(cols[idx]);\n                                continue;\n                            }\n\n                            if (cols[idx].className.indexOf(\"k-group-col\") > -1) {\n                                width += outerWidth(cols[idx]);\n                                continue;\n                            }\n\n                            if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                                width += parseInt(colWidth, 10);\n                            } else {\n                                width = 0;\n                                break;\n                            }\n                        }\n\n                        tables = that.wrapper.find(\">.k-grid-header table\").first().add(that.wrapper.find(\">.k-grid-footer table\").first()).add(that.table);\n                        that._footerWidth = null;\n\n                        if (width) {\n                            tables.each(function() {\n                                this.style.width = width + PX;\n                            });\n\n                            that._footerWidth = width;\n                            that._setContentWidth();\n                        }\n                    }\n\n                    that._updateFirstColumnClass();\n                    that._updateStickyColumns();\n                    if (groupHeaderColumnTemplateColumns.length > 0) {\n                        that._renderGroupRows();\n                    }\n                    that._ariaAddHiddenColIndex();\n                    that.trigger(COLUMNHIDE, { column: column });\n                });\n            },\n\n            _setParentsVisibility: function(column, visible) {\n                var that = this;\n                var columns = that.columns;\n                var idx;\n                var parents = [];\n                var parent;\n                var position;\n                var cell;\n                var colSpan;\n                var setColumnVisibility = that._columnVisibilitySetter(column);\n\n                var predicate = visible ?\n                    function(p) { return visibleColumns(p.columns).length && p.hidden; } :\n                    function(p) { return !visibleColumns(p.columns).length && !p.hidden; };\n\n\n                if (columnParents(column, columns, parents) && parents.length) {\n                    for (idx = parents.length - 1; idx >= 0; idx--) {\n                        parent = parents[idx];\n                        position = columnPosition(parent, columns);\n                        cell = elements($(\">table>thead\", this.lockedHeader), this.thead, \">tr:eq(\" + position.row + \")>th:not(.k-group-cell):not(.k-hierarchy-cell)\").eq(position.cell);\n\n                        if (predicate(parent)) {\n                            setColumnVisibility(parent, visible);\n                            cell[0].style.display = visible ? \"\" : NONE;\n                        }\n\n                        if (cell.filter(\"[\" + kendo.attr(\"colspan\") + \"]\").length) {\n                            colSpan = parseInt(cell.attr(kendo.attr(\"colspan\")), 10);\n                            cell[0].colSpan = (colSpan - hiddenLeafColumnsCount(parent.columns)) || 1;\n                        }\n                    }\n                }\n            },\n\n            _updateContentWidth: function() {\n                var that = this;\n                var tables = that.table.add(that.thead.parent());\n\n                tables.css({\n                    width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns)))\n                });\n                that.refresh();\n            },\n\n            showColumn: function(column) {\n                var that = this,\n                    idx,\n                    length,\n                    cell,\n                    tables,\n                    width,\n                    headerCellIndex,\n                    position,\n                    colWidth,\n                    cols,\n                    columns = that.columns,\n                    virtualScroll = that.virtualScroll || {},\n                    footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                    lockedColumnsCount = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).length : 0,\n                    columnIndex,\n                    originalColumn,\n                    columnLeafIndex,\n                    groupHeaderColumnTemplateColumns,\n                    columnsToShow;\n\n                    if (!Array.isArray(column)) {\n                        columnsToShow = [column];\n                    } else {\n                        columnsToShow = column;\n                    }\n\n                    columnsToShow.forEach((column) => {\n                        groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n                        if (typeof column == \"number\") {\n                            columnIndex = column;\n                            column = columns[column];\n                        } else if (isPlainObject(column)) {\n                            $.each(flatColumns(columns), function(index, item) {\n                                if (item === column) {\n                                    column = item;\n                                    columnIndex = index;\n                                    return false;\n                                }\n                            });\n                        } else {\n                            $.each(flatColumns(columns), function(index, item) {\n                                if (item.field === column) {\n                                    column = item;\n                                    columnIndex = index;\n                                    return false;\n                                }\n                            });\n                        }\n\n                        if (!column || isVisible(column)) {\n                            return;\n                        }\n\n                        var setColumnVisibility = that._columnVisibilitySetter(column);\n\n                        if (column.columns && column.columns.length) {\n                            position = columnPosition(column, columns);\n                            originalColumn = flatColumns(that.options.columns)[columnIndex];\n\n                            setColumnVisibility(column, true);\n\n                            setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr:eq(\" + position.row + \")>th\"), position.cell, true);\n\n                            for (idx = 0; idx < column.columns.length; idx++) {\n                                if (!originalColumn.columns[idx].hidden) {\n                                    this.showColumn(column.columns[idx]);\n                                }\n                            }\n\n                            that._ariaRemoveHiddenColIndex();\n                            that.trigger(COLUMNSHOW, { column: column });\n\n                            return;\n                        }\n\n                        columnLeafIndex = inArray(column, leafColumns(columns));\n\n                        setColumnVisibility(column, true);\n\n                        that._setParentsVisibility(column, true);\n\n                        that._templates();\n                        that._updateCols();\n                        that._updateLockedCols();\n\n                        var container = that.thead;\n\n                        headerCellIndex = columnLeafIndex;\n                        if (that.lockedHeader && lockedColumnsCount > columnLeafIndex) {\n                            container = that.lockedHeader.find(\">table>thead\");\n                        } else {\n                            headerCellIndex -= lockedColumnsCount;\n                        }\n\n                        cell = leafDataCells(container).eq(headerCellIndex);\n                        cell[0].style.display = \"\";\n                        cell[0].classList.remove(\"k-hidden\");\n\n                        setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr.k-filter-row>td\"), columnLeafIndex, true);\n                        if (footer[0]) {\n                            that._updateCols(footer.find(\">.k-grid-footer-wrap>table\"));\n                            that._updateLockedCols(footer.find(\">.k-grid-footer-locked>table\"));\n                            setCellVisibility(footer.find(\".k-footer-template>td\"), columnLeafIndex, true);\n                        }\n\n                        if (virtualScroll.columns && !column.locked) {\n                            that._updateContentWidth();\n                            that.trigger(COLUMNSHOW, { column: column });\n                            return;\n                        }\n\n                        if (that.lockedTable && lockedColumnsCount > columnLeafIndex) {\n                            showColumnCells(that.lockedTable.find(\">tbody>tr\"), columnLeafIndex);\n                        } else {\n                            showColumnCells(that.tbody.children(), columnLeafIndex - lockedColumnsCount);\n                        }\n\n                        if (that.lockedTable) {\n                            that._updateTablesWidth();\n                            that._applyLockedContainersWidth();\n                            that._syncLockedContentHeight();\n                            that._syncLockedHeaderHeight();\n                        } else {\n                            tables = that.wrapper.find(\">.k-grid-header table\").first().add(that.wrapper.find(\">.k-grid-footer table\").first()).add(that.table);\n                            if (!column.width) {\n                                tables.width(\"\");\n                            } else {\n                                width = 0;\n                                cols = that.thead.prev().find(\"col\");\n                                for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                                    colWidth = cols[idx].style.width;\n\n                                    if (cols[idx].className.indexOf(\"k-hierarchy-col\") > -1) {\n                                        width += outerWidth(cols[idx]);\n                                        continue;\n                                    }\n\n                                    if (cols[idx].className.indexOf(\"k-group-col\") > -1) {\n                                        width += outerWidth(cols[idx]);\n                                        continue;\n                                    }\n\n                                    if (colWidth.indexOf(\"%\") > -1) {\n                                        width = 0;\n                                        break;\n                                    }\n                                    width += parseInt(colWidth, 10);\n                                }\n\n                                that._footerWidth = null;\n                                if (width) {\n                                    tables.each(function() {\n                                        this.style.width = width + PX;\n                                    });\n                                    that._footerWidth = width;\n                                    that._setContentWidth();\n                                }\n                            }\n                        }\n\n                        that._updateFirstColumnClass();\n                        that._updateStickyColumns();\n                        if (groupHeaderColumnTemplateColumns.length > 0) {\n                            that._renderGroupRows();\n                        }\n                        that._ariaRemoveHiddenColIndex();\n                        that.trigger(COLUMNSHOW, { column: column });\n                    });\n            },\n\n            _columnVisibilitySetter: function(column) {\n                var col = column || {};\n\n                if (isUndefined(col.media)) {\n                    return setColumnVisibility;\n                } else {\n                    return setColumnMediaVisibility;\n                }\n            },\n\n\n            _buildSkeleton: function() {\n                var visibleColumns = this.virtualCols ? this.virtualCols : visibleLeafColumns(this.columns);\n                var pageSize = this.dataSource.pageSize() || this.dataSource.total();\n                var loaderHTML = \"\";\n                var colspan;\n                var groups = this._groups();\n                var columnsCount = visibleColumns.length + groups;\n\n                if (this._hasDetails()) {\n                    columnsCount++;\n                }\n\n                if (this._hasVirtualColumns()) {\n                    colspan = parseInt(this.content.find(TR).first().find(\"td\").first().attr(\"colspan\"), 10);\n                }\n\n                for (var i = 0; i < pageSize; i++) {\n                    loaderHTML += \"<tr class='k-table-row' data-skeleton-row>\";\n                    for (var j = 0; j < columnsCount; j++) {\n                        if (colspan && !j) {\n                            loaderHTML += \"<td colspan='\" + colspan + \"'><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>\";\n                        } else {\n                            loaderHTML += \"<td><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>\";\n                        }\n                    }\n                    loaderHTML += \"</tr>\";\n                }\n                return loaderHTML;\n            },\n\n            _progress: function(toggle) {\n                var element = this.element;\n                var endless = this.options.scrollable && this.options.scrollable.endless;\n                var loaderType = this.options.loaderType;\n                var isVirtualization = this.options.scrollable && this.options.scrollable.virtual;\n                var skeleton;\n\n                if (isVirtualization) {\n                    element = this.content;\n                } else if (this._editContainer && this._editMode() === \"popup\") {\n                    element = this._editContainer;\n                } else if (this.lockedContent || endless) {\n                    element = this.wrapper;\n                } else if (this.element.is(\"table\")) {\n                    element = this.element.parent();\n                } else if (this.content && this.content.length) {\n                    element = this.content;\n                }\n\n                if (loaderType == \"skeleton\" && !this._isExport) {\n                    if (toggle) {\n                        skeleton = this._buildSkeleton();\n                            element.find(\"tbody\")\n                             .empty()\n                             .append(skeleton);\n                    } else {\n                        element.find(\".k-skeleton\").closest(\"tbody\").empty();\n                    }\n                } else {\n                    if (this._isExport) {\n                        this._loaderContainer(toggle, { message: this.options.messages.loader.exporting });\n                    } else if (endless && toggle) {\n                        kendo.ui.progress(element, toggle, { height: this.content.height(), top: this.content.parent()[0].offsetTop, opacity: true });\n                    } else {\n                        kendo.ui.progress(element, toggle);\n                    }\n                }\n            },\n\n            _resize: function(size, force) {\n\n                this._syncLockedContentHeight();\n                this._syncLockedHeaderHeight();\n\n                if (this.content) {\n                    this._setContentWidth();\n                    this._setContentHeight();\n                }\n\n                if (this.lockedTable) {\n                    this._syncLockedScroll();\n                }\n\n                if (this.virtualScrollable && (force || this._rowHeight)) {\n                    if (force) {\n                        this._rowHeight = null;\n                    }\n                    this.virtualScrollable.repaintScrollbar();\n                }\n\n                if (this.pager && this.pager.element) {\n                    this.pager.resize(force);\n                }\n\n                if (this._anyStickyColumns()) {\n                    this._updateStickyColumns(false);\n                }\n            },\n\n            _isActiveInTable: function() {\n                var active = activeElement();\n\n                if (!active) { return false; }\n\n                return this.table[0] === active ||\n                    $.contains(this.table[0], active) ||\n                    (this._isLocked() &&\n                        (this.lockedTable[0] === active || $.contains(this.lockedTable[0], active))\n                    );\n            },\n\n            refresh: function(e) {\n                var that = this,\n                    data = that.dataSource.view(),\n                    navigatable = that.options.navigatable,\n                    virtualScroll = that.virtualScroll || {},\n                    currentIndex,\n                    current = $(that.current()),\n                    isCurrentInHeader = false,\n                    groups = that._groups(),\n                    colspan = groups + visibleLeafColumns(visibleColumns(that.columns)).length,\n                    hasMultiColumnHeaders = grep(that.columns, function(item) {\n                        return item.columns !== undefined$1;\n                    }).length > 0,\n                    contentScrollLeft,\n                    cachedItemsToSkip,\n                    multiColumnHeaderIndex = 0;\n\n                if (e && e.action === \"itemchange\" && (that.editable || that.options.scrollable.endless)) { // skip rebinding if editing is in progress\n                    if (this._editMode() != \"popup\" || this._editMode() === \"popup\" && !that._editableIsClosing) { // popup editing animation has not finished yet and the editable is not destoyed\n                        return;\n                    }\n                }\n\n                if (that._shouldMapHights) {\n                    that._mapCachedRowsHeight(\"get\", \"uid\");\n                    that._shouldMapHights = false;\n                }\n\n                if (virtualScroll.columns) {\n                    that._templates();\n                }\n\n                //someone remove the edited item\n                if (e && e.action === \"remove\" && that.editable &&\n                    that.editable.options.model && inArray(that.editable.options.model, e.items) > -1) {\n                    that.editable.options.model.unbind(CHANGE, that._modelChangeHandler);\n                }\n\n                e = e || {};\n\n                if (that.trigger(\"dataBinding\", { action: e.action || \"rebind\", index: e.index, items: e.items })) {\n                    return;\n                }\n\n                if (e.action === SYNC && that._isVirtualEditable()) {\n                    that._destroyEditable();\n                    that._clearEditableState();\n                }\n\n                if (!that._endlessFetchInProgress) {\n                    if (navigatable && (that._isActiveInTable() || (that._editContainer && that._editContainer.data(\"kendoWindow\")))) {\n                        isCurrentInHeader = current.is(\"th\");\n                        currentIndex = isCurrentInHeader ? current.parent().children(\":not(.k-group-cell)\").index(current[0]) : Math.max(that.cellIndex(current), 0);\n\n                        if (isCurrentInHeader && hasMultiColumnHeaders) {\n                            multiColumnHeaderIndex = current.parent().index();\n                        }\n                    }\n                    that._destroyEditable();\n                }\n\n                if (that.options.scrollable && that.options.scrollable.endless && !that._pdfInitialized) {\n                    clearTimeout(that._progressTimeOut);\n                    that._progressTimeOut = setTimeout(function() {\n                        if (!that._endlessFetchInProgress) {\n                            that._progress(false);\n                        }\n                    }, 250);\n                } else {\n                    if (!that._isExport) {\n                        that._progress(false);\n                    }\n                }\n\n                if (current.length) {\n                    that._currentRowIndex = current.parent().index();\n                }\n\n                that._hideResizeHandle();\n\n                that._data = [];\n\n                if (!that.columns.length) {\n                    that._autoColumns(that._firstDataItem(data[0], groups));\n                    colspan = groups + that.columns.length;\n                }\n\n                that._group = groups > 0 || that._group;\n\n                if (that._group) {\n                    that._templates();\n                    that._updateCols();\n                    that._updateLockedCols();\n                    if (!that._virtualColScroll) {\n                        that._updateHeader(groups);\n                    }\n                    that._group = groups > 0;\n                    that._groupRows = groupRows(data);\n                }\n\n                if (that.content) {\n                    contentScrollLeft = kendo.scrollLeft(that.content);\n                }\n\n                if (that.options.loaderType !== \"skeleton\" && e && e.action === \"sync\" && e.partialUpdate && e.changedItems && e.changedItems.length) {\n                    that._data = that.dataSource.flatView();\n                    e.changedItems.forEach((changedItem) => {\n                       that._displayRow(that.tbody.find(\"[\" + kendo.attr(\"uid\") + \"=\" + changedItem.uid + \"]\"));\n                    });\n                    that._progress(false);\n                    that._destroyEditable();\n                } else {\n                    cachedItemsToSkip = that._skipRerenderItemsCount;\n                    that._renderContent(data, colspan, groups);\n                    if (that.options.scrollable && that.options.scrollable.endless && this.lockedContent) {\n                        that._skipRerenderItemsCount = cachedItemsToSkip;\n                    }\n                    that._renderLockedContent(data, colspan, groups);\n                }\n\n                if (!that._virtualColScroll) {\n                    that._footer();\n\n                    that._renderNoRecordsContent();\n\n                    that._togglePagerVisibility();\n\n                    that._setContentHeight();\n\n                    that._setContentWidth(that.content && contentScrollLeft);\n                }\n\n                if (that.lockedTable) {\n                    //requires manual trigger of scroll to sync both tables\n                    if (virtualScroll.rows) {\n                        that.content.find(\">.k-virtual-scrollable-wrap\").trigger(\"scroll\");\n                    } else if (that.touchScroller) {\n                        that.touchScroller.movable.trigger(\"change\");\n                    } else {\n                        that.wrapper.one(\"scroll\", function(e) { e.stopPropagation(); });\n                        that.content.trigger(\"scroll\");\n                    }\n                }\n\n                if (!that._endlessFetchInProgress && !that._rowDropping) {\n                    that._restoreCurrent(currentIndex, isCurrentInHeader, multiColumnHeaderIndex);\n                }\n\n                if (that.touchScroller) {\n                    that.touchScroller.contentResized();\n                }\n\n                if (that.selectable) {\n                    that.selectable.resetTouchEvents();\n                }\n\n                if (that._checkBoxSelection) {\n                    that._toggleHeaderCheckState(false);\n                }\n\n                if (that.options.persistSelection &&\n                    ((that.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell) || that._checkBoxSelection) &&\n                    (that.items().length || that.dataSource._isGroupPaged())) {\n                    that._restoreSelection();\n                }\n\n                if (!that.options.persistSelection) {\n                    that._selectedIds = {};\n                }\n\n                if (that._hasReorderableRows()) {\n                    that._draggableRows();\n                    that._reorderableRows();\n                }\n\n                if (that.options.selectable && that.options.selectable.cellAggregates) {\n                    that._calculateAggregatesForSelected();\n                }\n\n                that._aria();\n\n                that.trigger(DATABOUND);\n           },\n\n            _restoreCurrent: function(currentIndex, isCurrentInHeader, multiColumnHeaderIndex) {\n                if (currentIndex === undefined$1 || currentIndex < 0) {\n                    return;\n                }\n\n                this._removeCurrent();\n\n                if (isCurrentInHeader) {\n                    this._setCurrent(this.thead.find(`tr:eq(${multiColumnHeaderIndex}) th:not(.k-group-cell)`).eq(currentIndex), false, this._hasVirtualColumns());\n                } else {\n                    var rowIndex = 0;\n                    var virtualScroll = this.virtualScroll || {};\n\n                    if (this._rowVirtualIndex) {\n                        if (virtualScroll.rows) {\n                            rowIndex = this.virtualScrollable.position(this._rowVirtualIndex);\n                        } else {\n                            rowIndex = this._rowVirtualIndex;\n                        }\n                    } else if (this._currentRowIndex) {\n                        rowIndex = this._currentRowIndex;\n                    } else {\n                        currentIndex = 0;\n                    }\n\n                    var row = $();\n                    var colspan;\n\n                    if (this.lockedTable) {\n                        row = this.lockedTable.find(\">tbody>tr\").eq(rowIndex);\n                    }\n                    row = row.add(this.tbody.children().eq(rowIndex));\n\n                    if (this._hasVirtualColumns()) {\n                        colspan = parseInt(row.find(\"td\").first().attr(\"colspan\"), 10);\n                        currentIndex = this._virtualCellIndex - (colspan > 1 ? colspan - 1 : 0);\n                    }\n\n\n                    var td = row.find(\">td:not(.k-group-cell):not(.k-hierarchy-cell)\")\n                        .eq(currentIndex);\n\n                    if (!td.length || currentIndex < 0) {\n                        return;\n                    }\n\n                    if (this._hasVirtualColumns()) {\n                        this._setCurrent(td, true, true);\n                    } else {\n                        this._setCurrent(td);\n                    }\n\n                }\n\n                if (this._current) {\n                    focusTable(this.table, true);\n                }\n            },\n\n            _restoreSelection: function() {\n                var that = this,\n                    allRows = that.items(),\n                    selectedRows,\n                    id = isFunction(that.dataSource.options.schema.model) ? that.dataSource.options.schema.model.fn.idField : that.dataSource.options.schema.model.id;\n\n                selectedRows = grep(allRows, function(row) {\n                     var dataItemKey = that.dataItem(row)[id];\n                     if (that._selectedIds[dataItemKey]) {\n                        return row;\n                     }\n                });\n\n                that.select(selectedRows);\n            },\n\n            _getSelectedRowUids: function() {\n                var that = this,\n                    selected = that.select(),\n                    row,\n                    uid,\n                    result = [];\n\n                for (let i = 0; i < selected.length; i++) {\n                    row = $(selected[i]);\n\n                    if (kendo.ui.Selectable.parseOptions(that.options.selectable).cell) {\n                        row = row.closest(TR);\n                    }\n\n                    uid = row.data(\"uid\");\n\n                    if (result.indexOf(uid) === -1) {\n                        result.push(uid);\n                    }\n                }\n\n                return result;\n            },\n\n            _getSelectedColumnFields: function() {\n                var that = this,\n                    selected = that.select(),\n                    field,\n                    index,\n                    visibleColumns = visibleLeafColumns(that.columns).filter(col => !col.selectable && !col.draggable & !col.command),\n                    result = [];\n\n                // If the mode is in row selection, then return all of the visible columns.\n                if (!kendo.ui.Selectable.parseOptions(that.options.selectable).cell) {\n                    return visibleColumns.map(vc => vc.field);\n                }\n\n                for (let i = 0; i < selected.length; i++) {\n                    index = $(selected[i]).index();\n\n                    field = that.thead.find(\"th:eq(\" + index + \")\").data(\"field\");\n\n                    if (result.indexOf(field) === -1) {\n                        result.push(field);\n                    }\n                }\n\n                return result;\n            },\n\n           _cleanupDetailItems: function() {\n               var that = this;\n\n               if (that._hasDetails()) {\n                   that.tbody.find(\".k-detail-cell\").empty();\n               }\n           },\n\n           _renderContent: function(data, colspan, groups) {\n                var that = this,\n                    idx,\n                    length,\n                    html = \"\",\n                    isLocked = that.lockedContent != null,\n                    endlessAppend = null,\n                    skipLastGroup,\n                    flatViewLength,\n                    scrollable = that.options.scrollable,\n                    templates = {\n                            rowTemplate: that.rowTemplate,\n                            altRowTemplate: that.altRowTemplate,\n                            groupFooterTemplate: that.groupFooterTemplate,\n                            groupHeaderColumnTemplate: that.groupHeaderColumnTemplate\n                        };\n                if (scrollable && scrollable.endless && !that.dataSource.options.endless) {\n                    that._skipRerenderItemsCount = 0;\n                    if (that.content) {\n                        that.content[0].scrollTop = 0;\n                    }\n                }\n                endlessAppend = that._skipRerenderItemsCount > 0;\n                colspan = isLocked ? colspan - visibleLeafColumns(visibleLockedColumns(that.columns)).length : colspan;\n                if (groups > 0) {\n\n                    colspan = isLocked ? colspan - groups : colspan;\n\n                    if (that.detailTemplate) {\n                        colspan++;\n                    }\n\n                    if (that.groupFooterTemplate) {\n                        that._groupAggregatesDefaultObject = that.dataSource.aggregates();\n                    }\n                    if (that.options.scrollable.endless) {\n                        flatViewLength = that.dataSource.flatView().length;\n                    }\n                    for (idx = 0, length = data.length; idx < length; idx++) {\n                        if (!that._skippedGroups) {\n                            that._skippedGroups = [];\n                        }\n                        skipLastGroup = flatViewLength && idx === data.length - 1 && flatViewLength !== that.dataSource.total();\n                        html += that._groupRowHtml(data[idx], colspan, 0, isLocked ? groupRowLockedContentBuilder : groupRowBuilder, templates, isLocked, skipLastGroup, false);\n                    }\n                } else {\n                    html += that._rowsHtml(data, templates);\n                }\n\n                if (endlessAppend) {\n                    that.tbody.append(html);\n                    kendo.applyStylesFromKendoAttributes(that.tbody, [\"display\", \"left\", \"right\"]);\n                    clearTimeout(that._endlessFetchTimeOut);\n                    that._endlessFetchTimeOut = setTimeout(function() {\n                        if (that._groupToCollapse) {\n                            that.collapseGroup(that._groupToCollapse);\n                            that._groupToCollapse = null;\n                        }\n                    });\n                    that._endlessFetchInProgress = null;\n                } else {\n                    that.tbody = appendContent(that.tbody, that.table, html, this.options.size);\n                }\n           },\n\n           _renderGroupRows: function() {\n            var that = this,\n            data = that._groupRows,\n            groupRows = that.wrapper.find(DOT + GROUPING_ROW),\n            groups = that._groups(),\n            groupRowBuilderFunc,\n            isLocked = that.lockedContent != null,\n            columns,\n            colspan,\n            group,\n            field,\n            column,\n            template,\n            text,\n            groupHeaderData,\n            tableContainer,\n            isInLockedContainer,\n            prevElement,\n            newGroupRowElement,\n            currentRow,\n            level,\n            groupHeaderColumnTemplate,\n            firstColumnGroupData;\n\n            groupRows.each(function(index, row) {\n                currentRow = $(row);\n                tableContainer = currentRow.closest(\"table\").parent();\n                isInLockedContainer = tableContainer.is(\".\" + CONTENTRLOCKEDCONTAINER);\n                columns = isInLockedContainer ? visibleLeafColumns(visibleColumns(lockedColumns(that.columns))) : visibleLeafColumns(visibleColumns(nonLockedColumns(that.columns)));\n                level = currentRow.find(\".\" + GROUPCELLCLASS).length;\n                if (isLocked) {\n                    groupRowBuilderFunc = isInLockedContainer ? groupRowBuilder : groupRowLockedContentBuilder;\n                    colspan = isInLockedContainer ? columns.length + groups - level : columns.length;\n                }\n                else {\n                    groupRowBuilderFunc = groupRowBuilder;\n                    colspan = columns.length + groups - level;\n                }\n\n                group = index >= data.length ? data[index - data.length] : data[index];\n                field = group.field;\n                column = grep(leafColumns(that.columns), function(column) { return column.field == field; })[0] || { };\n                firstColumnGroupData = !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false;\n                template = column.groupHeaderTemplate ? column.groupHeaderTemplate : visibleColumns(that.columns)[0].groupHeaderColumnTemplate;\n                text = (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || htmlEncode(field, true)) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded);\n                groups = groups;\n                groupHeaderData = that._groupData(group, false, firstColumnGroupData);\n                groupHeaderColumnTemplate = isInLockedContainer ? that.lockedGroupHeaderColumnTemplate : that.groupHeaderColumnTemplate;\n\n                if (template) {\n                    text = typeof template === FUNCTION ? template(groupHeaderData) : kendo.template(template)(groupHeaderData);\n                }\n\n                prevElement = currentRow.prev().length ? currentRow.prev() : currentRow.parent();\n\n                newGroupRowElement = $(groupHeaderColumnTemplate ?\n                    groupHeaderColumnTemplate(extend({}, groupHeaderData, { groupCells: level, colspan: groups - level, text: text })) :\n                    groupRowBuilderFunc(colspan, level, text, null, null, null, isRtl)\n                );\n\n                kendo.applyStylesFromKendoAttributes(newGroupRowElement, [\"display\", \"left\", \"right\"]);\n\n                if (prevElement.is(\"tbody\")) {\n                    prevElement.prepend(newGroupRowElement);\n                }\n                else {\n                    prevElement.after(newGroupRowElement);\n                }\n                    currentRow.remove();\n               });\n           },\n\n           _renderLockedContent: function(data, colspan, groups) {\n               var html = \"\",\n                   idx,\n                   length,\n                   skipLastGroup,\n                   endlessAppend = null,\n                   flatViewLength,\n                   templates = {\n                       rowTemplate: this.lockedRowTemplate,\n                       altRowTemplate: this.lockedAltRowTemplate,\n                       groupFooterTemplate: this.lockedGroupFooterTemplate,\n                       groupHeaderColumnTemplate: this.lockedGroupHeaderColumnTemplate\n                   };\n\n               if (this.lockedContent) {\n\n                   var table = this.lockedTable;\n                   endlessAppend = this._skipRerenderItemsCount > 0;\n\n                   if (groups > 0) {\n                       colspan = colspan - visibleColumns(leafColumns(nonLockedColumns(this.columns))).length;\n                       if (this.options.scrollable.endless) {\n                         flatViewLength = this.dataSource.flatView().length;\n                       }\n                       for (idx = 0, length = data.length; idx < length; idx++) {\n                        skipLastGroup = flatViewLength && idx === data.length - 1 && flatViewLength !== this.dataSource.total();\n                        html += this._groupRowHtml(data[idx], colspan, 0, groupRowBuilder, templates, false, skipLastGroup, true);\n                       }\n                   } else {\n                       html = this._rowsHtml(data, templates);\n                   }\n\n                   if (endlessAppend) {\n                       table.children(\"tbody\").append(html);\n                   } else {\n                       appendContent(table.children(\"tbody\"), table, html, this.options.size);\n                   }\n\n                   this._syncLockedContentHeight();\n               }\n           },\n\n           _togglePagerVisibility: function() {\n               if (this.options.pageable.alwaysVisible === false) {\n                    this.wrapper.find(\".k-grid-pager\").toggle(this.dataSource.total() >= this.dataSource.pageSize());\n                }\n           },\n\n           _adjustRowsHeight: function(table1, table2) {\n               var rows = table1[0].rows,\n                   length = rows.length,\n                   idx,\n                   rows2 = table2[0].rows,\n                   containers = table1.add(table2),\n                   containersLength = containers.length,\n                   heights = [];\n\n               for (idx = 0; idx < length; idx++) {\n                   if (!rows2[idx]) {\n                       break;\n                   }\n\n                   if (rows[idx].style.height) {\n                       rows[idx].style.height = rows2[idx].style.height = \"\";\n                   }\n               }\n\n               for (idx = 0; idx < length; idx++) {\n                   if (!rows2[idx]) {\n                       break;\n                   }\n\n                   var offsetHeight1 = rows[idx].offsetHeight;\n                   var offsetHeight2 = rows2[idx].offsetHeight;\n                   var height = 0;\n\n                   if (offsetHeight1 > offsetHeight2) {\n                       height = offsetHeight1;\n                   } else if (offsetHeight1 < offsetHeight2) {\n                       height = offsetHeight2;\n                   }\n\n                   heights.push(height);\n               }\n\n               for (idx = 0; idx < containersLength; idx++) {\n                   containers[idx].style.display = NONE;\n               }\n\n               for (idx = 0; idx < length; idx++) {\n                   if (heights[idx]) {\n                       //add one to resolve row misalignment in IE\n                       rows[idx].style.height = rows2[idx].style.height = (heights[idx] + 1) + PX;\n                   }\n               }\n\n               for (idx = 0; idx < containersLength; idx++) {\n                   containers[idx].style.display = \"\";\n               }\n           }\n       });\n\n       if (kendo.ExcelMixin) {\n           kendo.ExcelMixin.extend(Grid.prototype);\n       }\n\n       if (kendo.PDFMixin) {\n           kendo.PDFMixin.extend(Grid.prototype);\n\n           Grid.prototype._drawPDF_autoPageBreak = function(progress) {\n               var grid = this;\n               var result = new $.Deferred();\n               var dataSource = grid.dataSource;\n               var allPages = grid.options.pdf.allPages;\n               var origBody = grid.wrapper.find('> table > tbody, .k-grid-content > table > tbody').first();\n               var cont = $(\"<div>\")\n                   .css({ position: \"absolute\", left: -10000, top: -10000 });\n               var clone;\n\n               grid.toggleUnexportableColumns(grid.columns);\n               clone = grid.wrapper.clone().css({\n                   height: AUTO, width: AUTO\n               }).appendTo(cont);\n               clone.find(\".k-grid-content\").css({ height: AUTO, width: AUTO, overflow: \"visible\" });\n               clone.find('> table, .k-grid-header table, .k-grid-content > table, .k-grid-footer table').css({ height: AUTO, width: \"100%\", overflow: \"visible\" });\n               clone.find(\".k-grid-pager, .k-grid-toolbar, .k-grouping-header\").remove();\n               clone.find(\".k-grid-header, .k-grid-footer, .k-auto-scrollable\").css({ paddingRight: 0 });\n\n               var body = clone.find('> table > tbody, .k-grid-content > table > tbody').first().empty();\n               var startingPage = dataSource.page();\n\n               function resolve() {\n                   if (allPages && startingPage !== undefined$1) {\n                       dataSource.one(\"change\", draw);\n                       dataSource.page(startingPage);\n                   } else {\n                       grid.refresh();\n                       draw();\n                   }\n               }\n\n               function draw() {\n                   cont.appendTo(document.body);\n                   var options = $.extend({}, grid.options.pdf, {\n                       _destructive: true,\n                       progress: function(p) {\n                           progress.notify({\n                               page: p.page,\n                               pageNumber: p.pageNum,\n                               progress: 0.5 + p.pageNum / p.totalPages / 2,\n                               totalPages: p.totalPages\n                           });\n                       }\n                   });\n                   kendo.drawing.drawDOM(clone, options)\n                       .always(function() {\n                           cont.remove();\n                       })\n                       .then(function(group) {\n                           result.resolve(group);\n                           grid.toggleUnexportableColumns(grid.columns, true);\n                       })\n                       .fail(function(err) {\n                           result.reject(err);\n                       });\n               }\n\n               function renderPage() {\n                   var pageNum = dataSource.page();\n                   var totalPages = allPages ? dataSource.totalPages() : 1;\n                   body.append(origBody.children(\"tr:not(.k-detail-row)\"));\n                   if (pageNum < totalPages) {\n                       dataSource.page(pageNum + 1);\n                   } else {\n                       dataSource.unbind(\"change\", renderPage);\n                       resolve();\n                   }\n               }\n\n               if (allPages) {\n                   dataSource.bind(\"change\", renderPage);\n                   dataSource.page(1);\n               } else {\n                   renderPage();\n               }\n\n               return result.promise();\n           };\n\n           Grid.prototype.toggleUnexportableColumns = function(columns, restore) {\n               var length = columns.length;\n               var column;\n               var exportable;\n               var visibleInExport;\n               var visibleInExportOnly;\n\n               for (var i = 0; i < length; i++) {\n                   column = columns[i];\n                   exportable = column.exportable;\n                   if (!restore) {\n                       if (typeof column.exportable === \"object\") {\n                           exportable = column.exportable.pdf;\n                       }\n\n                       visibleInExport = !column.hidden && exportable !== false;\n                       visibleInExportOnly = column.hidden && exportable === true;\n                       exportable = visibleInExport || visibleInExportOnly;\n\n                       if (!exportable && !column.hidden) {\n                           column._toggledDuringExport = true;\n                           this.hideColumn(column);\n                       } else if (exportable && column.hidden) {\n                           column._toggledDuringExport = true;\n                           this.showColumn(column);\n                       } else if (exportable && column.columns) {\n                           this.toggleUnexportableColumns(column.columns);\n                       }\n                   } else {\n                       if (column._toggledDuringExport) {\n                           column._toggledDuringExport = false;\n\n                           if (column.hidden) {\n                               this.showColumn(column);\n                           } else {\n                               this.hideColumn(column);\n                           }\n                       } else if (column.columns) {\n                           this.toggleUnexportableColumns(column.columns, restore);\n                       }\n                   }\n               }\n           };\n\n           Grid.prototype._drawPDF = function(progress) {\n               var grid = this;\n\n               if (grid.options.pdf.paperSize && grid.options.pdf.paperSize != AUTO) {\n                   return grid._drawPDF_autoPageBreak(progress);\n               }\n\n               var result = new $.Deferred();\n               var dataSource = grid.dataSource;\n               var allPages = grid.options.pdf.allPages;\n\n               // This group will be our document containing all pages\n               var doc = new kendo.drawing.Group();\n               var startingPage = dataSource.page();\n\n               function resolve() {\n                   if (allPages && startingPage !== undefined$1) {\n                       dataSource.unbind(\"change\", exportPage);\n                       dataSource.one(\"change\", function() {\n                           result.resolve(doc);\n                       });\n\n                       dataSource.page(startingPage);\n                   } else {\n                       result.resolve(doc);\n                   }\n               }\n\n               function exportPage() {\n                    grid.toggleUnexportableColumns(grid.columns);\n                    grid._drawPDFShadow({\n                        width: grid.wrapper.width()\n                    }, {\n                        avoidLinks: grid.options.pdf.avoidLinks\n                    })\n                    .done(function(group) {\n                        var pageNum = dataSource.page();\n                        var totalPages = allPages ? dataSource.totalPages() : 1;\n\n                        var args = {\n                            page: group,\n                            pageNumber: pageNum,\n                            progress: pageNum / totalPages,\n                            totalPages: totalPages\n                        };\n\n                        grid.toggleUnexportableColumns(grid.columns, true);\n                        progress.notify(args);\n                        doc.append(args.page);\n\n                        if (pageNum < totalPages) {\n                            dataSource.page(pageNum + 1);\n                        } else {\n                            resolve();\n                        }\n                    })\n                    .fail(function(err) {\n                        result.reject(err);\n                    });\n                }\n\n                if (allPages) {\n                    dataSource.bind(\"change\", exportPage);\n                    dataSource.page(1);\n                } else {\n                    exportPage();\n                }\n\n                return result.promise();\n            };\n       }\n\n       function syncTableHeight(table1, table2) {\n           table1 = table1[0];\n           table2 = table2[0];\n\n           if (table1.rows.length !== table2.rows.length) {\n               var lockedHeigth = table1.offsetHeight;\n               var tableHeigth = table2.offsetHeight;\n\n               var row;\n               var diff;\n               if (lockedHeigth > tableHeigth) {\n                   row = table2.rows[table2.rows.length - 1];\n\n                   if (filterRowRegExp.test(row.className)) {\n                       row = table2.rows[table2.rows.length - 2];\n                   }\n\n                   diff = lockedHeigth - tableHeigth;\n               } else {\n                   row = table1.rows[table1.rows.length - 1];\n\n                   if (filterRowRegExp.test(row.className)) {\n                       row = table1.rows[table1.rows.length - 2];\n                   }\n\n                   diff = tableHeigth - lockedHeigth;\n               }\n               row.style.height = row.offsetHeight + diff + PX;\n           }\n       }\n\n       function adjustRowHeight(row1, row2) {\n           var height;\n           var offsetHeight1 = row1.offsetHeight;\n           var offsetHeight2 = row2.offsetHeight;\n\n           if (offsetHeight1 > offsetHeight2) {\n               height = offsetHeight1 + PX;\n           } else if (offsetHeight1 < offsetHeight2) {\n               height = offsetHeight2 + PX;\n           }\n\n           if (height) {\n               row1.style.height = row2.style.height = height;\n           }\n       }\n\n       function getCommand(commands, name) {\n           var idx, length, command;\n\n           if (typeof commands === STRING && commands === name) {\n              return commands;\n           }\n\n           if (isPlainObject(commands) && commands.name === name) {\n               return commands;\n           }\n\n           if (isArray(commands)) {\n               for (idx = 0, length = commands.length; idx < length; idx++) {\n                   command = commands[idx];\n\n                   if ((typeof command === STRING && command === name) || (command.name === name)) {\n                       return command;\n                   }\n               }\n           }\n           return null;\n       }\n\n       function compareElements(element, toCompare) {\n           if (element.length !== toCompare.length) {\n               return false;\n           }\n\n           for (var i = 0; i < element.length; i++) {\n               if (element[i] !== toCompare[i]) {\n                   return false;\n               }\n           }\n\n           return true;\n       }\n\n       function focusTable(table, direct) {\n           if (!table || table.length === 0) {\n               return;\n           }\n\n           if (direct === true) {\n               table = $(table);\n               var scrollLeft = kendo.scrollLeft(table.parent());\n\n                kendo.focusElement(table);\n                kendo.scrollLeft(table.parent(), scrollLeft);\n            } else {\n                $(table).one(\"focusin\", function(e) { e.preventDefault(); }).trigger(\"focus\");\n            }\n        }\n\n       function isColumnGroupable(grid, column) {\n           return grid.options.groupable && (column.groupable || column.groupable === undefined$1);\n       }\n\n       function isGroupedBy(groups, field) {\n           return !!$.grep(groups, function(item) {\n               return item.field === field;\n           }).length;\n       }\n\n       function isColumnEditable(column, model) {\n           if (!column.field || column.selectable) {\n               return false;\n           }\n           if (model.editable && !model.editable(column.field)) {\n               return false;\n           }\n           if (column.editable && !column.editable(model)) {\n               return false;\n           }\n           return true;\n       }\n\n       function isInputElement(element) {\n           return $(element).is(INPUT_SELECTORS);\n       }\n\n        function tableClick(e) {\n            var that = this,\n                currentTarget = $(e.currentTarget),\n                isHeader = currentTarget.is(\"th\"),\n                table = this.table.add(this.lockedTable),\n                headerTable = this.thead.parent().add($(\">table\", this.lockedHeader)),\n                isInput = isInputElement(e.target),\n                preventScroll = $(e.target).is('.k-checkbox'),\n                target = $(e.target),\n                currentTable = currentTarget.closest(\"table\")[0];\n\n            if (isInput && currentTarget.find(kendo.roleSelector(\"filtercell\")).length) {\n                this._setCurrent(currentTarget);\n                return;\n            }\n\n            if (currentTable !== table[0] && currentTable !== table[1] && currentTable !== headerTable[0] && currentTable !== headerTable[1]) {\n                return;\n            }\n\n            if (target.is(CARET_ALT_RIGHT + \",\" + CARET_ALT_DOWN)) {\n                return;\n            }\n\n            if (this.options.navigatable) {\n                this._setCurrent(currentTarget, false, preventScroll);\n            }\n\n            if (isHeader || !isInput) {\n                setTimeout(function() {\n                    var activeEl = $(kendo._activeElement());\n                    if ((activeEl.hasClass(\"k-widget\") || activeEl.hasClass(\"k-dropdownlist\") || activeEl.is(\".k-upload .k-upload-button\")) && !activeEl.hasClass(\"k-grid-pager\")) {\n                        return;\n                    }\n\n                    //Only if input element is not selected yet and it is not descendant of the grid's table\n                    if (that.table && (activeEl.is(CHECKBOXINPUT) || !isInputElement(kendo._activeElement()) || !$.contains(currentTable, kendo._activeElement()))) {\n                        //DOMElement.focus() only for header, because IE doesn't really focus the table\n                        focusTable(that.table[0], true);\n                    }\n                });\n            }\n\n            if (isHeader && !kendo.support.touch) {\n                e.preventDefault(); //if any problem occurs, call preventDefault only for the clicked header links\n            }\n        }\n\n       function leftMostPosition(element, rtl) {\n           if (!rtl) {\n               return 0;\n           }\n\n           var result = 0;\n\n           if (kendo.support.browser.webkit) {\n               result = element.width();\n           }\n\n           return result;\n       }\n\n       function parseVirtualSettings(options) {\n            var asLowerString;\n\n            if (typeof options === \"string\") {\n                asLowerString = options.toLowerCase();\n                if (asLowerString === \"true\") {\n                    return {\n                        rows: true\n                    };\n                } else {\n                    return {\n                        rows: asLowerString.indexOf(\"rows\") > -1,\n                        columns: asLowerString.indexOf(\"columns\") > -1\n                    };\n                }\n\n            } else if (options === true) {\n                return {\n                    rows: true\n                };\n            }\n       }\n\n       function isElementVisibleInWrapper(wrapper, element) {\n           var offsetTop;\n           var halfHeight;\n\n           if (!wrapper) {\n             return false;\n           }\n\n           element = $(element);\n\n           if (element[0] && contains(wrapper[0], element[0])) {\n               offsetTop = element.offset().top - wrapper.offset().top;\n               halfHeight = element.outerHeight() / 2;\n\n               if ((offsetTop >= 0 || math.abs(offsetTop) <= halfHeight) && (math.floor(offsetTop + halfHeight) <= wrapper.height())) {\n                   return true;\n               }\n           }\n\n           return false;\n       }\n\n       function isInEdit(cell) {\n           return cell &&\n               (cell.hasClass(\"k-edit-cell\") ||\n                cell.parent().hasClass(\"k-grid-edit-row\"));\n       }\n\n        function groupHtmlBuilder(groupHeaderColumnTemplate, groupHeaderBuilder, colspan, templateColspan, groupData, level, text, expanded, group, isGroupPaged) {\n            var html;\n\n            if (groupHeaderColumnTemplate) {\n                html = groupHeaderColumnTemplate(extend({}, groupData, {\n                    groupCells: level,\n                    colspan: templateColspan,\n                    text: text,\n                    expanded: expanded,\n                    isRtl: isRtl,\n                    uid: group.uid\n                }));\n            } else {\n                html = groupHeaderBuilder(colspan, level, text, expanded, group.uid, isGroupPaged, isRtl);\n            }\n\n            return html;\n        }\n\n       function groupCellBuilder(headerTemplateIndex) {\n        return ({ colspan, text, expanded, isRtl }) => `<td class=\"k-table-td\" colspan=\"${colspan + headerTemplateIndex}\">` +\n        '<p class=\"k-reset\">' +\n            kendo.ui.icon($(`<a href=\"\\\\#\" tabindex=\"-1\" ${ARIA_LABEL}=\"${(expanded ? COLLAPSE : EXPAND)}\"></a>`), { icon: (expanded ? 'caret-alt-down' : `caret-alt-${isRtl ? 'left' : 'right'}`) }) + kendo.htmlEncode(text) +\n        `</p></td>${new Array(colspan + headerTemplateIndex).join(\"<td hidden group-header-spanned-hidden></td>\")}`;\n       }\n\n       function groupCellLockedContentBuilder(headerTemplateIndex) {\n        return '<td class=\"k-table-td\" colspan=\"' + headerTemplateIndex + '\">' +\n        `<p class=\"k-reset\">&nbsp;</p></td>${new Array(headerTemplateIndex).join(\"<td hidden group-header-spanned-hidden></td>\")}`;\n       }\n\n       function groupRowBuilder(colspan, level, text, expanded, uid, includeAdditionalData, isRtl) {\n        return '<tr ' + (includeAdditionalData ? 'data-group-uid=\"' + uid + '\"' : '') + 'class=\"k-table-group-row k-grouping-row k-table-row\">' + groupCells(level) +\n            '<td class=\"k-table-td\" colspan=\"' + colspan + '\" aria-expanded=\"' + !!expanded + '\">' +\n            '<p class=\"k-reset\">' +\n            kendo.ui.icon($('<a href=\"#\" tabindex=\"-1\" ' + ARIA_LABEL + '=\"' + (expanded ? COLLAPSE : EXPAND) + '\"></a>'), { icon: (expanded ? 'caret-alt-down' : `caret-alt-${isRtl ? 'left' : 'right'}`) }) + text +\n        `</p></td>${new Array(colspan).join(\"<td hidden group-header-spanned-hidden></td>\")}</tr>`;\n       }\n\n       function groupRowLockedContentBuilder(colspan) {\n        return '<tr class=\"k-table-group-row k-grouping-row k-table-row\">' +\n            '<td class=\"k-table-td\" colspan=\"' + colspan + '\" aria-expanded=\"true\">' +\n            `<p class=\"k-reset\">&nbsp;</p></td>${new Array(colspan).join(\"<td hidden group-header-spanned-hidden></td>\")}</tr>`;\n       }\n\n       function toggleRow(row, visible) {\n           row = $(row)[0];\n           if (visible) {\n               row.style.display = \"\";\n           } else {\n               row.style.display = NONE;\n           }\n       }\n\n       function htmlEncode(value, backslashEscapeQuotes) {\n           var ampRegExp = /&/g,\n               ltRegExp = /</g,\n               quoteRegExp = /\"/g,\n               aposRegExp = /'/g,\n               gtRegExp = />/g;\n\n           return (\"\" + value)\n               .replace(ampRegExp, \"&amp;\")\n               .replace(ltRegExp, \"&lt;\")\n               .replace(gtRegExp, \"&gt;\")\n               .replace(quoteRegExp, function(match) {\n                   if (backslashEscapeQuotes) {\n                       return \"\\\\\" + match;\n                   }\n                   return \"&quot;\";\n               })\n               .replace(aposRegExp, \"&#39;\");\n       }\n\n       function isEmptyString(value) {\n            return !/\\S/.test(value);\n       }\n\n       function getTitle(field, columns) {\n            return columns.filter(function(col) {\n                return col.field === field;\n            })[0].title || field;\n        }\n\n        function exportDataSort(a, b) {\n            return this.dataSource.indexOf(this.dataSource.getByUid(a.uid)) - this.dataSource.indexOf(this.dataSource.getByUid(b.uid));\n        }\n\n        function isExcelExportableColumn(column) {\n            return !(column.exportable === false || (column.exportable && column.exportable.excel === false));\n        }\n\n       ui.plugin(Grid);\n       ui.plugin(VirtualScrollable);\n\n       extend(kendo.ui.grid, {\n           defaultBodyContextMenu: defaultBodyContextMenu,\n           defaultHeadContextMenu: defaultHeadContextMenu,\n           defaultGroupsContextMenu: defaultGroupsContextMenu\n       });\n\n    })(window.kendo.jQuery);\n    var kendo$1 = kendo;\n\n    return kendo$1;\n\n}));\n"]}