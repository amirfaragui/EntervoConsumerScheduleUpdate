{"version":3,"file":"kendo.filter.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendofilter","js","this","defaultValues","number","boolean","string","date","mainLogicTemplate","mainFilterLogicLabel","uid","logicItemTemplate","filterLogicLabel","expressionItemTemplate","filterExpressionLabel","$","kendo","window","ui","guid","ns","keys","Widget","ButtonGroup","KENDO_FOCUSABLE","CHANGE","TABINDEX","NS","EQ","NEQ","editors","container","field","appendTo","FilterButtonGroup","extend","init","element","options","fn","call","name","value","undefined","_value","_select","wrapper","find","trigger","button","attr","Filter","html","that","addClass","dataSource","operators","_getFieldsInfo","_modelChangeHandler","_modelChange","bind","_renderMain","expression","_addExpressionTree","filterModel","_renderApplyButton","expressionPreview","_previewContainer","insertAfter","children","eq","_createPreview","toJSON","_attachEvents","hasCustomOperators","toolbars","events","applyButton","fields","mainLogic","messages","and","or","apply","close","addExpression","filterAriaLabel","addGroup","neq","startswith","contains","doesnotcontain","endswith","isnull","isnotnull","isempty","isnotempty","isnullorempty","isnotnullorempty","gte","gt","lte","lt","applyFilter","filter","_hasCustomOperators","_mapOperators","_hasFieldsFilter","filters","_removeEmptyGroups","destroy","off","_applyButton","setOptions","deepExtend","empty","getOptions","result","model","parent","i","length","logic","_addGroup","_addExpression","_click","e","preventDefault","currentTarget","command","data","_removeExpression","closest","_keydown","ev","target","key","keyCode","currentToolbar","isToolbar","is","UP","_focusToolbar","DOWN","ESC","stopPropagation","ENTER","clickProxy","keydownProxy","on","toolbarEl","direction","index","toolbarToFocus","next","Math","min","prev","max","parentContainer","expressionModel","parentUID","itemsContainer","_fields","_defaultField","itemHTML","findModel","set","_addNewModel","templateOptions","type","fieldsLabel","template","first","templateOperators","kendoToolBar","resizable","items","component","attributes","class","componentOptions","title","dataTextField","dataValueField","Object","map","current","text","label","op","icon","fillMode","_addExpressionControls","_expressionChange","operatorsContainer","editorContainer","_bindOperators","_appendEditor","_bindModel","_showHideEditor","dropDownList","getKendoDropDownList","setDataSource","isFunction","editor","id","operator","push","defaultValue","logicHTML","_initGroupToolBar","createdField","haveFields","childhtml","toLocaleUpperCase","_getOperatorText","indexOf","htmlEncode","previewFormat","toString","_addField","fieldInfo","editorTemplate","fieldsCollection","schema","Array","isArray","haveField","splice","sender","newField","unbind","remove","ariaLabel","observable","logicEl","toggle","modelUid","selection","buttons","group","togglable","selected","get","parentModel","itemContainer","hasClass","siblings","format","hide","show","forEach","handler","findCustomOperators","temp","plugin","jQuery"],"sources":["kendo.filter.js"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('kendo.core.js'), require('kendo.buttongroup.js'), require('kendo.icons.js'), require('kendo.toolbar.js')) :\n    typeof define === 'function' && define.amd ? define(['kendo.core', 'kendo.buttongroup', 'kendo.icons', 'kendo.toolbar'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (global.kendofilter = global.kendofilter || {}, global.kendofilter.js = factory()));\n})(this, (function () {\n    var __meta__ = {\n        id: \"filter\",\n        name: \"Filter\",\n        category: \"web\",\n        depends: [\"core\", \"buttongroup\", \"icons\", \"toolbar\"]\n    };\n\n    var defaultValues = {\n        \"number\": 0,\n        \"boolean\": false,\n        \"string\": \"\",\n        \"date\": \"\"\n    };\n\n    var mainContainer = (ariaLabel) =>\n        `<ul class='k-filter-container' role='tree' aria-label='${ariaLabel}'>` +\n            \"<li class='k-filter-group-main' role='treeitem'></li>\" +\n        \"</ul>\";\n\n    var mainLogicTemplate = ({ mainFilterLogicLabel, uid }) =>\n        \"<div class='k-filter-toolbar'>\" +\n            `<div class='k-toolbar' aria-label='${mainFilterLogicLabel}' id='${uid}'></div>` +\n        \"</div>\";\n\n    var logicItemTemplate = ({ filterLogicLabel }) =>\n        \"<li class='k-filter-item' role='treeitem'>\" +\n            \"<div class='k-filter-toolbar'>\" +\n                `<div role='toolbar' aria-label='${filterLogicLabel}' class='k-toolbar'></div>` +\n            \"</div>\" +\n        \"</li>\";\n\n    var expressionItemTemplate = ({ filterExpressionLabel, uid }) =>\n        \"<li class='k-filter-item' role='treeitem'>\" +\n            \"<div class='k-filter-toolbar'>\" +\n                `<div role='group' aria-label='${filterExpressionLabel}' class='k-toolbar' id='${uid}'></div>` +\n            \"</div>\" +\n        \"</li>\";\n\n\n    (function($) {\n        var kendo = window.kendo,\n            ui = kendo.ui,\n            guid = kendo.guid,\n            ns = kendo.ns,\n            keys = kendo.keys,\n            Widget = ui.Widget,\n            ButtonGroup = ui.ButtonGroup,\n            KENDO_FOCUSABLE = \":kendoFocusable\",\n            CHANGE = \"change\",\n            TABINDEX = \"tabindex\",\n            NS = \".kendoFilter\",\n            EQ = \"Is equal to\",\n            NEQ = \"Is not equal to\";\n\n        var editors = {\n            \"number\": function(container, { field }) {\n                $(`<input tabindex='-1' id='${guid()}' type='text' aria-label='${field}' title='${field}' data-${ns}role='numerictextbox' data-${ns}bind='value: value'/>`).appendTo(container);\n            },\n            \"string\": function(container, { field }) {\n                $(`<span class='k-textbox k-input k-input-md k-rounded-md k-input-solid'><input tabindex='-1' id='${guid()}' type='text' aria-label='${field}' title='${field}' class='k-input-inner' data-${kendo.ns}bind='value: value'/></span>`).appendTo(container);\n            },\n            \"boolean\": function(container, { field }) {\n                $(`<input tabindex='-1' id='${guid()}' class='k-checkbox k-checkbox-md k-rounded-md' aria-label='${field}' data-${ns}role='checkbox' data-${ns}bind='checked: value' type='checkbox'>`).appendTo(container);\n            },\n            \"date\": function(container, { field }) {\n                $(`<input tabindex='-1' id='${guid()}' type='text' aria-label='${field}' title='${field}' data-${ns}role='datepicker' data-${ns}bind='value: value'/>`).appendTo(container);\n            }\n        };\n\n        var FilterButtonGroup = ButtonGroup.extend({\n            init: function(element, options) {\n                var that = this;\n                ButtonGroup.fn.init.call(that, element, options);\n            },\n\n            options: {\n                name: \"FilterButtonGroup\"\n            },\n\n            value: function(value) {\n                if (value === undefined) {\n                    return this._value;\n                }\n                this._value = value;\n                ButtonGroup.fn._select.call(this, this.wrapper.find(\"[value='\" + value + \"']\"));\n                this.trigger(CHANGE);\n            },\n\n            _select: function(button) {\n                if (button !== -1) {\n                    this.value($(button).attr(\"value\"));\n                }\n            }\n        });\n\n        var Filter = Widget.extend({\n            init: function(element, options) {\n                var that = this;\n                var html;\n\n                Widget.fn.init.call(that, element, options);\n\n                that.element = $(element).addClass(\"k-filter\");\n                that.dataSource = options.dataSource;\n                that.operators = $.extend(that.options.operators, options.operators);\n\n                that._getFieldsInfo();\n                that._modelChangeHandler = that._modelChange.bind(that);\n                that._renderMain();\n                if (options.expression) {\n                    that._addExpressionTree(that.filterModel);\n                }\n                that._renderApplyButton();\n                if (that.options.expressionPreview) {\n                    if (!that._previewContainer) {\n                        that._previewContainer = $('<div class=\"k-filter-preview\"></div>').insertAfter(that.element.children().eq(0));\n                    }\n                    html = that._createPreview(that.filterModel.toJSON());\n                    that._previewContainer.html(html);\n                }\n                that._attachEvents();\n                that.hasCustomOperators();\n\n                var toolbars = $(that.element).find('.k-filter-toolbar > .k-toolbar');\n                toolbars.attr(TABINDEX, -1);\n                toolbars.find(KENDO_FOCUSABLE).attr(TABINDEX, -1);\n                toolbars.eq(0).attr(TABINDEX, 0);\n            },\n\n            events: [\n                CHANGE\n            ],\n\n            options: {\n                name: \"Filter\",\n                dataSource: null,\n                expression: null,\n                applyButton: false,\n                fields: [],\n                mainLogic: \"and\",\n                messages: {\n                    and: \"And\",\n                    or: \"Or\",\n                    apply: \"Apply\",\n                    close: \"Close\",\n                    addExpression: \"Add Expression\",\n                    fields: \"Fields\",\n                    filterExpressionLabel: \"filter expression\",\n                    filterLogicLabel: \"filter logic\",\n                    filterAriaLabel: \"filter component\",\n                    mainFilterLogicLabel: \"main filter logic\",\n                    operators: \"Operators\",\n                    addGroup: \"Add Group\"\n                },\n                operators: {\n                    string: {\n                        eq: EQ,\n                        neq: NEQ,\n                        startswith: \"Starts with\",\n                        contains: \"Contains\",\n                        doesnotcontain: \"Does not contain\",\n                        endswith: \"Ends with\",\n                        isnull: \"Is null\",\n                        isnotnull: \"Is not null\",\n                        isempty: \"Is empty\",\n                        isnotempty: \"Is not empty\",\n                        isnullorempty: \"Has no value\",\n                        isnotnullorempty: \"Has value\"\n                    },\n                    number: {\n                        eq: EQ,\n                        neq: NEQ,\n                        gte: \"Is greater than or equal to\",\n                        gt: \"Is greater than\",\n                        lte: \"Is less than or equal to\",\n                        lt: \"Is less than\",\n                        isnull: \"Is null\",\n                        isnotnull: \"Is not null\"\n                    },\n                    date: {\n                        eq: EQ,\n                        neq: NEQ,\n                        gte: \"Is after or equal to\",\n                        gt: \"Is after\",\n                        lte: \"Is before or equal to\",\n                        lt: \"Is before\",\n                        isnull: \"Is null\",\n                        isnotnull: \"Is not null\"\n                    },\n                    \"boolean\": {\n                        eq: EQ,\n                        neq: NEQ\n                    }\n                }\n            },\n\n            applyFilter: function() {\n                var filter = this.filterModel.toJSON();\n\n                if (this._hasCustomOperators) {\n                    this._mapOperators(filter);\n                }\n                if (this._hasFieldsFilter(filter.filters || [])) {\n                    this._removeEmptyGroups(filter.filters);\n                    this.dataSource.filter(filter);\n                } else {\n                    this.dataSource.filter({});\n                }\n            },\n\n            destroy: function() {\n                this.element.off(NS);\n                kendo.destroy(this.element.find(\".k-filter-group-main\"));\n                this._previewContainer = null;\n                this._applyButton = null;\n                this._modelChangeHandler = null;\n                Widget.fn.destroy.call(this);\n            },\n\n            setOptions: function(options) {\n                kendo.deepExtend(this.options, options);\n                this.destroy();\n                this.element.empty();\n                this.init(this.element, this.options);\n            },\n\n            getOptions: function() {\n                var result = $.extend(true, {}, this.options);\n                delete result.dataSource;\n                result.expression = this.filterModel.toJSON();\n\n                return result;\n            },\n\n            _addExpressionTree: function(model) {\n                if (model.filters) {\n                    var parent = this.element.find(\"[id=\" + model.uid + \"]\");\n                    for (var i = 0; i < model.filters.length; i++) {\n                        if (model.filters[i].logic) {\n                            this._addGroup(parent, model.filters[i]);\n                        } else {\n                            this._addExpression(parent, model.filters[i]);\n                        }\n                        if (model.filters[i].filters) {\n                            this._addExpressionTree(model.filters[i]);\n                        }\n                    }\n                }\n            },\n\n             _click: function(e) {\n                var that = this;\n                e.preventDefault();\n\n                var button = $(e.currentTarget);\n                var command = button.data(\"command\");\n\n                if (command == \"x\") {\n                    that._removeExpression(button.closest(\".k-toolbar\"));\n                } else if (command == \"expression\") {\n                    that._addExpression(button.closest(\".k-toolbar\"));\n                } else if (command == \"group\") {\n                    that._addGroup(button.closest(\".k-toolbar\"));\n                } else if (command == \"apply\") {\n                    that.applyFilter();\n                }\n            },\n\n            _keydown: function(ev) {\n                var that = this,\n                    target = $(ev.target),\n                    key = ev.keyCode;\n                var currentToolbar = target.closest(\".k-toolbar\");\n                var isToolbar = target.is(\".k-toolbar\");\n\n                if (key === keys.UP && isToolbar) {\n                    ev.preventDefault();\n                    that._focusToolbar(currentToolbar, \"prev\");\n                } else if (key == keys.DOWN && isToolbar) {\n                    ev.preventDefault();\n                    that._focusToolbar(currentToolbar, \"next\");\n                } else if (key == keys.ESC) {\n                    ev.stopPropagation();\n                    that._focusToolbar(currentToolbar);\n                } else if (key == keys.ENTER && isToolbar) {\n                    let item = currentToolbar.find(\".k-toolbar-item\").eq(0);\n                    item.attr(TABINDEX, 0).trigger(\"focus\");\n                }\n            },\n\n            _attachEvents: function() {\n                var that = this,\n                clickProxy = that._click.bind(that),\n                keydownProxy = that._keydown.bind(that);\n\n                that.element\n                    .on(\"click\" + NS, \"button.k-button\", clickProxy)\n                    .on(\"keydown\" + NS, '.k-filter-toolbar > .k-toolbar, .k-filter-toolbar > .k-toolbar .k-toolbar-item', keydownProxy);\n            },\n\n            _focusToolbar: function(toolbarEl, direction, index) {\n                var that = this;\n                var toolbarToFocus = toolbarEl;\n                var toolbars = $(that.element).find('.k-filter-toolbar > .k-toolbar');\n                toolbars.attr(TABINDEX, -1);\n                toolbars.find(KENDO_FOCUSABLE).attr(TABINDEX, -1);\n\n                if (direction == \"next\") {\n                    let next = Math.min(toolbars.length - 1, index || (toolbars.index(toolbarEl) + 1));\n                    toolbarToFocus = toolbars.eq(next);\n                } else if (direction == \"prev\") {\n                    let prev = Math.max(0, index || (toolbars.index(toolbarEl) - 1));\n                    toolbarToFocus = toolbars.eq(prev);\n                }\n\n                toolbarToFocus.attr(TABINDEX, 0).trigger(\"focus\");\n            },\n\n            _addExpression: function(parentContainer, model) {\n                var that = this;\n                var parentUID = parentContainer.attr(\"id\");\n                var itemsContainer = parentContainer.closest(\".k-filter-toolbar\").next(\"ul.k-filter-lines\");\n                var field = model ? that._fields[model.field] : that._defaultField;\n                var expressionModel;\n                var itemHTML = \"\";\n\n                if (model) {\n                    expressionModel = model;\n                } else {\n                    expressionModel = findModel(that.filterModel, parentUID);\n\n                    if (!expressionModel.filters) {\n                        expressionModel.set(\"filters\", []);\n                    }\n\n                    expressionModel = that._addNewModel(expressionModel.filters, field);\n                }\n\n                if (!itemsContainer.length) {\n                    itemsContainer = $(\"<ul class='k-filter-lines' role='group'></ul>\").appendTo(parentContainer.closest(\"li\"));\n                }\n\n                var templateOptions = {\n                    fields: that._fields,\n                    operators: that.operators[field.type],\n                    close: that.options.messages.close,\n                    fieldsLabel: that.options.messages.fields,\n                    uid: expressionModel.uid,\n                    ns: kendo.ns,\n                    filterExpressionLabel: that.options.messages.filterExpressionLabel\n                };\n\n                itemHTML = $(kendo.template(expressionItemTemplate)(templateOptions)).appendTo(itemsContainer);\n                var toolbarEl = itemHTML.find(\".k-toolbar\").first();\n                var templateOperators = field.operators && field.operators[field.type] ? field.operators[field.type] : this.operators[field.type];\n\n                toolbarEl.kendoToolBar({\n                    resizable: false,\n                    items: [\n                        {\n                            type: \"component\",\n                            component: \"DropDownList\",\n                            element: `<select data-${ns}bind=\"value: field\" title='${that.options.messages.fields}' aria-label='${that.options.messages.fields}' data-auto-width='true'></select>`,\n                            attributes: { 'class': \"k-filter-field\" },\n                            componentOptions: {\n                                title: that.options.messages.fields,\n                                dataTextField: \"text\",\n                                dataValueField: \"value\",\n                                dataSource: Object.keys(that._fields || {}).map(current => ({ value: that._fields[current].name, text: that._fields[current].label }))\n                            }\n                        },{\n                            type: \"component\",\n                            component: \"DropDownList\",\n                            element: `<select data-${ns}bind=\"value: operator\" aria-label='${that.options.messages.operators}' title='${that.options.messages.operators}'></select>`,\n                            attributes: { 'class': \"k-filter-operator\" },\n                            componentOptions: {\n                                title: that.options.messages.operators,\n                                dataTextField: \"text\",\n                                dataValueField: \"value\",\n                                dataSource: Object.keys(templateOperators || {}).map(op => ({ value: op, text: (templateOperators[op].text || templateOperators[op]) }))\n                            }\n                        },\n                        {\n                            attributes: { class: \"k-filter-value\" },\n                            template: \" \"\n                        },\n                        { type: \"button\", icon: 'x', fillMode: \"flat\", attributes: { \"data-command\": \"x\", title: templateOptions.close, 'aria-label': templateOptions.close } }\n                    ]\n                });\n\n                that._addExpressionControls(itemHTML.find(\".k-toolbar\"), field, expressionModel);\n\n                if (!model) {\n                    that._expressionChange();\n                }\n            },\n\n            _addExpressionControls: function(container, field, filterModel) {\n                var operatorsContainer = container.find(\".k-toolbar-item.k-filter-operator\");\n                var editorContainer = container.find(\".k-toolbar-item.k-filter-value\");\n                editorContainer.addClass(\"k-toolbar-tool\");\n                kendo.destroy(editorContainer);\n                editorContainer.empty();\n\n                this._bindOperators(operatorsContainer, field);\n                this._appendEditor(editorContainer, field);\n                this._bindModel(container, filterModel);\n                this._showHideEditor(container, filterModel);\n\n                container.find(KENDO_FOCUSABLE).attr(TABINDEX, -1);\n            },\n\n            _bindOperators: function(container, field) {\n                var templateOperators = field.operators && field.operators[field.type] ? field.operators[field.type] : this.operators[field.type];\n                var dropDownList = container.find('select[data-role=dropdownlist]').getKendoDropDownList();\n                if (dropDownList) {\n                    dropDownList.setDataSource(Object.keys(templateOperators || {}).map(op => ({ value: op, text: (templateOperators[op].text || templateOperators[op]) })));\n                }\n            },\n\n            _appendEditor: function(container, field) {\n                if (kendo.isFunction(field.editor)) {\n                    field.editor(container, $.extend(true, {}, { field: field.name }));\n                } else {\n                    $(kendo.template(field.editor)({ ns: kendo.ns, field: field.name, id: kendo.guid() })).appendTo(container);\n                }\n            },\n\n            _addNewModel: function(parent, field) {\n                var filterModel;\n                var type = field.type;\n                var operators = field.operators;\n                var operator;\n                if (!operators) {\n                    operators = this.options.operators;\n                }\n\n                operator = Object.keys(operators[type])[0];\n\n                parent.push({ field: field.name });\n                filterModel = parent[parent.length - 1];\n\n                filterModel.set(\"value\", field.defaultValue);\n                filterModel.set(\"operator\", operator);\n\n                return filterModel;\n            },\n\n            _addGroup: function(parent, model) {\n                let that = this,\n                    filterModel = that.filterModel,\n                    parentUID = parent.attr(\"id\"),\n                    itemsContainer = parent.closest(\".k-filter-toolbar\").next(\"ul.k-filter-lines\"),\n                    logicHTML;\n\n                if (model) {\n                    filterModel = model;\n\n                } else {\n                    filterModel = findModel(filterModel, parentUID);\n\n                    if (!filterModel.filters) {\n                        filterModel.set(\"filters\", []);\n                    }\n                    filterModel.filters.push({ logic: that.options.mainLogic });\n                    filterModel = filterModel.filters[filterModel.filters.length - 1];\n                }\n\n                if (!itemsContainer.length) {\n                    itemsContainer = $(\"<ul class='k-filter-lines' role='group'></ul>\").appendTo(parent.closest(\"li\"));\n                }\n\n                let templateOptions = {\n                    operators: {\n                        and: that.options.messages.and,\n                        or: that.options.messages.or\n                    },\n                    addExpression: that.options.messages.addExpression,\n                    addGroup: that.options.messages.addGroup,\n                    close: that.options.messages.close,\n                    ns: kendo.ns,\n                    filterLogicLabel: that.options.messages.filterLogicLabel,\n                    filterModel: filterModel\n                };\n\n                logicHTML = $(kendo.template(logicItemTemplate)(templateOptions)).appendTo(itemsContainer);\n\n                let toolbarEl = logicHTML.find(\".k-toolbar\");\n                that._initGroupToolBar(toolbarEl, templateOptions);\n\n                that._bindModel(toolbarEl, filterModel);\n\n                if (!model) {\n                    that._expressionChange();\n                }\n            },\n\n            _bindModel: function(container, model) {\n                container.attr(\"id\", model.uid);\n\n                model.bind(\"change\", this._modelChangeHandler);\n                kendo.bind(container, model);\n\n                container.parent().attr(kendo.attr(\"stop\"), true);\n            },\n\n            _createPreview: function(filter) {\n                var html = \"\";\n                var createdField = false;\n                var haveFields = this._hasFieldsFilter(filter.filters || []);\n                var childhtml = \"\";\n                var current;\n                var field;\n\n                if (!filter.filters || !filter.filters.length || !haveFields) {\n                    return \"\";\n                }\n                html += '<span class=\"k-filter-preview-bracket\">(</span>';\n                for (var i = 0; i < filter.filters.length; i++) {\n                    current = filter.filters[i];\n\n                    if (current.filters) {\n                        childhtml = this._createPreview(current);\n                        if (childhtml) {\n                            if (createdField) {\n                                html += '<span class=\"k-filter-preview-operator\"> ' + filter.logic.toLocaleUpperCase() + ' </span>';\n                            }\n                            createdField = true;\n                        }\n                        html += childhtml;\n                    }\n                    if (current.field) {\n                        field = this._fields[current.field];\n                        if (createdField) {\n                            html += '<span class=\"k-filter-preview-operator\"> ' + filter.logic.toLocaleUpperCase() + ' </span>';\n                        }\n                        createdField = true;\n                        html += '<span class=\"k-filter-preview-field\">' + field.label + '</span>';\n                        html += '<span class=\"k-filter-preview-criteria\"> ' + this._getOperatorText(current.field, current.operator);\n                        if (current.operator.indexOf(\"is\") < 0) {\n                            html += ' </span>';\n                            html += \"<span class='k-filter-preview-value'>'\" + kendo.htmlEncode(field.previewFormat ? kendo.toString(current.value, field.previewFormat) : current.value) + \"'</span>\";\n                        } else {\n                            html += '</span>';\n                        }\n                    }\n                }\n                html += '<span class=\"k-filter-preview-bracket\">)</span>';\n                return html;\n            },\n\n            _expressionChange: function() {\n                var that = this;\n                var filter = that.filterModel.toJSON();\n                var html = \"\";\n\n                if (that.options.expressionPreview) {\n                    html = that._createPreview(filter);\n                    that._previewContainer.html(html);\n                }\n\n                that.trigger(CHANGE, { expression: filter });\n            },\n\n            _getOperatorText: function(field, operator) {\n                var type = this._fields[field].type;\n                var operators = this._fields[field].operators;\n\n                if (!operators) {\n                    operators = this.options.operators;\n                }\n\n                return operators[type][operator].text || operators[type][operator];\n            },\n\n            _addField: function(fieldInfo, field) {\n                var that = this;\n                fieldInfo = $.extend(true, {}, {\n                    name: fieldInfo.name || field,\n                    editor: fieldInfo.editorTemplate || editors[fieldInfo.type || \"string\"],\n                    defaultValue: (fieldInfo.defaultValue || fieldInfo.defaultValue === false || fieldInfo.defaultValue === 0) ? fieldInfo.defaultValue : defaultValues[fieldInfo.type || \"string\"],\n                    type: fieldInfo.type || \"string\",\n                    label: fieldInfo.label || fieldInfo.name || field,\n                    operators: fieldInfo.operators,\n                    previewFormat: fieldInfo.previewFormat\n                });\n                that._fields[fieldInfo.name] = fieldInfo;\n                if (!that._defaultField) {\n                    that._defaultField = fieldInfo;\n                }\n            },\n\n            _getFieldsInfo: function() {\n                var that = this;\n                var fieldsCollection = that.options.fields.length ? that.options.fields : (that.options.dataSource.options.schema.model || {}).fields;\n                var fieldInfo;\n\n                that._fields = {};\n\n                if (Array.isArray(fieldsCollection)) {\n                    for (var i = 0; i < fieldsCollection.length; i++) {\n                        fieldInfo = fieldsCollection[i];\n                        that._addField(fieldInfo);\n                    }\n                } else {\n                    for (var field in fieldsCollection) {\n                        fieldInfo = fieldsCollection[field];\n                        that._addField(fieldInfo, field);\n                    }\n                }\n            },\n\n            _hasFieldsFilter: function(filters, haveField) {\n                haveField = !!haveField;\n\n                for (var i = 0; i < filters.length; i++) {\n                    if (filters[i].filters) {\n                        haveField = this._hasFieldsFilter(filters[i].filters, haveField);\n                    }\n                    if (filters[i].field) {\n                        return true;\n                    }\n                }\n\n                return haveField;\n            },\n\n            _removeEmptyGroups: function(filters) {\n                if (!filters) {\n                    return;\n                }\n                for (var i = filters.length - 1; i >= 0; i--) {\n                    if ((filters[i].logic && !filters[i].filters) || (filters[i].filters && !this._hasFieldsFilter(filters[i].filters))) {\n                        filters.splice(i, 1);\n                        continue;\n                    }\n\n                    if (filters[i].filters) {\n                        this._removeEmptyGroups(filters[i].filters);\n                    }\n                }\n            },\n\n            _modelChange: function(e) {\n                var that = this;\n                var container = that.element.find(\"[id=\" + e.sender.uid + \"]\");\n\n                that._showHideEditor(container, e.sender);\n                if (e.field !== \"field\") {\n                    if (e.field !== \"filters\") {\n                        that._expressionChange();\n                    }\n                    return;\n                }\n\n                var newField = e.sender.field;\n                var parent = e.sender.parent();\n                var field = that._fields[newField];\n                var filterModel = that._addNewModel(parent, field);\n\n                e.sender.unbind(\"change\", that._modelChangeHandler);\n\n                parent.remove(e.sender);\n\n                that._addExpressionControls(container, field, filterModel);\n\n                that._expressionChange();\n            },\n\n            _renderMain: function() {\n                let that = this;\n\n                $(mainContainer(that.options.messages.filterAriaLabel)).appendTo(that.element);\n\n                if (that.options.expression) {\n                    that.filterModel = kendo.observable(that.options.expression);\n                } else {\n                    that.filterModel = kendo.observable({\n                        logic: that.options.mainLogic\n                    });\n                }\n\n                let templateOptions = {\n                    operators: {\n                        and: that.options.messages.and,\n                        or: that.options.messages.or\n                    },\n                    addExpression: that.options.messages.addExpression,\n                    addGroup: that.options.messages.addGroup,\n                    close: that.options.messages.close,\n                    uid: that.filterModel.uid,\n                    ns: kendo.ns,\n                    mainFilterLogicLabel: that.options.messages.mainFilterLogicLabel,\n                    filterModel: that.filterModel\n                };\n\n                let logicEl = $(kendo.template(mainLogicTemplate)(templateOptions));\n                logicEl.appendTo(that.element.find(\"li\").first());\n\n                let toolbarEl = logicEl.find(\".k-toolbar\").first();\n                that._initGroupToolBar(toolbarEl, templateOptions);\n\n                that._bindModel(toolbarEl, that.filterModel);\n            },\n\n            _initGroupToolBar: function(element, templateOptions) {\n                let that = this;\n                element.kendoToolBar({\n                    resizable: false,\n                    toggle: function(e) {\n                        let modelUid = $(e.target).closest(\".k-toolbar\").attr(\"id\"),\n                            model = findModel(that.filterModel, modelUid);\n\n                        if (model) {\n                            model.set(\"logic\", $(e.target).data(\"logic\"));\n                        }\n                    },\n                    items: [\n                        {\n                            type: \"buttonGroup\",\n                            selection: \"single\",\n                            buttons: [\n                                { text: that.options.messages.and, group: \"mainlogic\", togglable: true, selected: templateOptions.filterModel.get(\"logic\") === \"and\", attributes: { \"data-logic\": \"and\" } },\n                                { text: that.options.messages.or, group: \"mainlogic\", togglable: true, selected: templateOptions.filterModel.get(\"logic\") === \"or\", attributes: { \"data-logic\": \"or\" } }\n                            ]\n                        },\n                        { type: \"button\", icon: 'filter-add-expression', attributes: { \"data-command\": \"expression\", title: templateOptions.addExpression, 'aria-label': templateOptions.addExpression } },\n                        { type: \"button\", icon: 'filter-add-group', attributes: { \"data-command\": \"group\", title: templateOptions.addGroup, 'aria-label': templateOptions.addGroup } },\n                        { type: \"button\", icon: 'x', fillMode: \"flat\", attributes: { \"data-command\": \"x\", title: templateOptions.close, 'aria-label': templateOptions.close } }\n                    ]\n                });\n            },\n\n            _removeExpression: function(parent) {\n                var that = this;\n                var parentUID = parent.attr(\"id\");\n                var itemContainer = parent.closest(\"li\");\n                var isMain = itemContainer.hasClass(\"k-filter-group-main\");\n                var parentModel;\n                var model;\n                var index = -1;\n\n                if (isMain) {\n                    itemContainer = itemContainer.find(\".k-filter-lines\");\n                    if (that.filterModel.filters) {\n                        that.filterModel.filters.empty();\n                        delete that.filterModel.filters;\n                    }\n                } else {\n                    let toolbars = $(that.element).find('.k-filter-toolbar > .k-toolbar');\n                    index = toolbars.index(parent);\n                    model = findModel(that.filterModel, parentUID);\n                    parentModel = model.parent();\n                    model.unbind(\"change\", that._modelChangeHandler);\n                    parentModel.remove(model);\n                    if (!parentModel.length) {\n                        delete parentModel.parent().filters;\n                    }\n                    if (!itemContainer.siblings().length) {\n                        itemContainer = itemContainer.parent();\n                    }\n                }\n\n                kendo.destroy(itemContainer);\n                itemContainer.remove();\n                that._expressionChange();\n\n                if (index > -1) {\n                    that._focusToolbar(parent, \"next\", index);\n                }\n            },\n\n            _renderApplyButton: function() {\n                var that = this;\n\n                if (!that.options.applyButton) {\n                    return;\n                }\n\n                if (!that._applyButton) {\n                    that._applyButton = $(kendo.format('<button type=\"button\" data-command=\"apply\" aria-label=\"{0}\" title=\"{0}\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-filter-apply\"><span class=\"k-button-text\">{0}</span></button>', that.options.messages.apply)).appendTo(that.element);\n                }\n            },\n\n            _showHideEditor: function(container, model) {\n                if (model.logic) {\n                    return;\n                }\n\n                var operator = model.operator;\n                var editorContainer = container.find(\".k-toolbar-item.k-filter-value\");\n                if (operator == \"isnull\" || operator == \"isnotnull\" || operator == \"isempty\" ||\n                    operator == \"isnotempty\" || operator == \"isnullorempty\" || operator == \"isnotnullorempty\") {\n                    editorContainer.hide();\n                } else {\n                    editorContainer.show();\n                }\n            },\n\n            _mapOperators: function(expression) {\n                var that = this;\n                if (expression.filters) {\n                    expression.filters.forEach(function(filter) {\n                        if (filter.filters) {\n                            that._mapOperators(filter);\n                        } else {\n                            var operator;\n                            var field = that._fields[filter.field];\n                            var type = field.type;\n                            if (field.operators && field.operators[type][filter.operator]) {\n                                operator = field.operators[type][filter.operator];\n                            } else {\n                                operator = that.operators[type][filter.operator];\n                            }\n\n                            if (operator) {\n                                filter.operator = operator.handler || filter.operator;\n                            }\n                        }\n                    });\n                }\n            },\n\n            hasCustomOperators: function() {\n                var operators = $.extend(true, {}, this.operators);\n\n                for (var field in this._fields) {\n                    operators = $.extend(true, {}, operators, this._fields[field].operators);\n                }\n                this._hasCustomOperators = findCustomOperators(operators);\n            }\n\n        });\n\n        function findCustomOperators(operators) {\n            for (var field in operators) {\n                var operator = operators[field];\n                if ((operator.handler && typeof operator.handler === \"function\") ||\n                    (typeof operator === 'object' && operator !== null && findCustomOperators(operator))) {\n                    return true;\n                }\n            }\n            return false;\n        }\n\n        function findModel(model, uid) {\n\n            if (model.uid === uid) {\n                return model;\n            }\n\n            if (model.filters) {\n                for (var i = 0; i < model.filters.length; i++) {\n                    var temp = findModel(model.filters[i], uid);\n                    if (temp) {\n                        return temp;\n                    }\n                }\n            }\n        }\n\n        ui.plugin(Filter);\n        ui.plugin(FilterButtonGroup);\n    })(window.kendo.jQuery);\n    var kendo$1 = kendo;\n\n    return kendo$1;\n\n}));\n"]}