{"version":3,"file":"kendo.dataviz.sankey.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendodataviz","sankey","js","this","$","window","kendo","dataviz","deepExtend","constants","ARIA_ACTIVE_DESCENDANT","Box","setDefaultOptions","drawing","Path","geometry","ChartLegend","Legend","sum","array","mapFn","map","reduce","acc","curr","sortAsc","a","b","y0","index","y1","sortSource","source","sortTarget","target","value","node","sortLinks","nodes","forEach","targetLinks","link","sourceLinks","sort","calcLayer","maxDepth","align","depth","height","length","Sankey$1","Class","extend","init","options","ref","nodesOptions","offset","data","links","width","offsetX","offsetY","nodeWidth","nodePadding","padding","reverse","targetColumnIndex","loops","autoLayout","calculate","connectLinksToNodes","calculateNodeValues","circularLinks","calculateNodeHeights","columns","calculateNodeDepths","calculateNodeColumns","calculateNodeBreadths","applyNodesOffset","calculateLinkBreadths","nodesMap","Map","i","id","undefined","label","text","set","get","sourceId","targetId","push","Math","max","current","Set","next","currDepth","size","currentNodes","Array","from","n","l","add","nodesLength","currentHeight","eachNode","d","apply","columnWidth","layer","min","x0","x1","this$1$1","kSize","c","y","uncurlLinksToRight","uncurlLinksToLeft","left","top","column","kValue","targetTopPos","dy","arrangeNodesVertically","loop","j","sourceTopPos","endIndex","arrangeUp","arrangeDown","yPos","currentY","i$1","link$1","calculateSankey","rotationDirection","p1x","p1y","p2x","p2y","p3x","p3y","expression1","expression2","SankeyElement","Class$$1","call","createVisual","__proto__","prototype","Object","create","constructor","visual","createElement","exportVisual","customVisual","sender","getSender","visualOptions","getElement","Node","SankeyElement$$1","arguments","fromRect","getRect","Rect","getLabelText","labelTemplate","labels","ariaTemplate","ariaLabel","fill","color","opacity","stroke","className","role","ariaRoleDescription","createFocusHighlight","navigatable","_highlight","focusHighlight","visible","focus","highlight","root","setAttribute","blur","removeAttribute","nodeColor","nodeColors","resolveNodeOptions","nodeOptions","defined","util","calculateControlPointsOffsetX","rtl","p1","p2","p3","p4","t","t1","t1t1","tt","xC","halfWidth","upperCurveMiddleLine","actualWidth","line","point","ref$1","x2","y2","x3","y3","abs","sqrt","pow","distanceToLine","upperNarrowness","alpha","line1","line2","ref$2","ref$3","x4","y4","a1","atan2","a2","angelBetweenTwoLines","sin","sign","Link","moveTo","curveTo","lineTo","INSIDE","BEFORE","AFTER","Label","diagramMinX","diagramMaxX","position","nodeBox","textbox","TextBox","reflow","textSizeBox","box","textY","center","labelAfterLastNode","labelBeforeFirstNode","side","textOrigin","textRect","translate","renderVisual","font","border","margin","paintOrder","resolveLabelOptions","Title$1","Title$$1","drawingRect","title","Title","buildTitle","CENTER","getSpacing","sortData","sortDataRTL","item","area","background","areaBackground","areaOpacity","LEFT","RIGHT","legend","markers","type","cursor","POINTER","BOTTOM","accessibility","LINK","NODE","Sankey","Observable$$1","element","theme","_initTheme","_setOptions","_initElement","_initSurface","_redraw","_initResizeObserver","_initNavigation","destroy","unbind","_destroySurface","_destroyResizeObserver","removeEventListener","_keydownHandler","_focusHandler","_onDownHandler","_focusState","addClass","description","surface","_initSurfaceElement","_createSurface","tabIndex","getAttribute","disableKeyboardNavigation","_keydown","bind","_focus","_blurHandler","_blur","_onDown","addEventListener","firstFocusableNode","observer","ResizeObserver","entries","entry","contentRect","setSize","resize","_resizeObserver","observe","Surface","surfaceElement","mouseenter","_mouseenter","mouseleave","_mouseleave","mousemove","_mousemove","click","_click","currentTheme","setLinksOpacity","linksVisuals","setOpacity","linkOptions","setLinksInactivityOpacity","inactiveOpacity","linkValue","trigger","name","ev","dataItem","targetType","event","isLink","isNode","isLegendItem","Boolean","chartElement","highlightLinks","nodeVisual","nodesVisuals","originalEvent","relatedTarget","nodeName","tooltipTimeOut","clearTimeout","tooltipShown","tooltip","followPointer","delay","tooltipElType","mouseEvent","rect","getBoundingClientRect","isLeft","clientX","isTop","clientY","tooltipData","popupOffset","pageX","pageY","popupAlign","horizontal","vertical","nodeValue","nextDelay","setTimeout","focusState","sameNode","_focusNode","sameLink","_focusLink","node1","node2","link1","link2","_cleanFocusHighlight","nodeData","models","linkData","_focusNextNode","direction","columnIndex","findIndex","find","columnNodes","nodeIndex","nextNode","_focusNextLink","sourceLinkIndex","targetLinkIndex","nextLink","nextLink$1","_focusSourceNode","sourceNode","_focusTargetNode","targetNode","_focusSourceLink","_focusTargetLink","_skipFocusHighlight","_hasFocus","ownerDocument","activeElement","handler","key","onArrowRight","onArrowLeft","onEscape","preventDefault","onArrowDown","onArrowUp","_destroySurfaceElement","disconnect","document","appendChild","parentNode","removeChild","setOptions","clear","_getSize","draw","_render","titleBox","legendBox","calcOptions","sankeyOptions","disableAutoLayout","highlightOptions","sankeyBox","unpad","legendArea","clone","titleHeight","TOP","shrink","legendPosition","calculatedNodes","console","warn","Infinity","nodeEl","nodeOps","nodeInstance","wrap","rectToBox","rawBBox","labelVisual","permutation","columnsLength","results","crosses","f1","f2","f3","f4","linksLength","lNext","crossesValue","minCrosses","r","bestResult","context","sankeyContext","labelOptions","startX","toRtl","newColumn","slice","Group","clip","titleVisual","append","visualNodes","focusHighlights","sortedLinks","resolvedOptions","colorType","resolveLinkOptions","linkInstance","linkVisual","textOps","legendVisual","exportOptions","Observable","BLACK","right","lineJoin","createSankeyData","dimensions","measure","linksMap","row","dimension","existingValue","nodesId","nodesArray","String","linksArray","jQuery","Widget","ui","encode","htmlEncode","styleAttr","tooltipContentWrapStyle","TootipText","Square","TooltipTemplates","icon","SankeyTooltip","fn","outerWidth","outerHeight","setContent","content","html","each","el","split","filter","s","parts","style","trim","setPosition","offsetOption","css","show","hide","remove","Tooltip","ContentTemplates","template","isRtl","support","KendoSankey","userOptions","empty","_parseAriaLabelTemplates","wrapper","_initSankey","_attachEvents","notify","_showWatermarkOverlay","currentOptions","events","eventName","resultOptions","_instance","themeOptions","_getThemeOptions","seriesColors","axisDefaults","seriesDefaults","strokeColor","_createSankey","themeName","SASS_THEMES","indexOf","toLowerCase","autoTheme","chart","themes","_events","tooltipShow","tooltipHide","e","nodeTemplate","linkTemplate","_tooltip","doc","appendTo","body","currentTemplate","format","messages","tooltipUnits","ExportMixin","PDFMixin","plugin"],"sources":["kendo.dataviz.sankey.js"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('kendo.core.js'), require('kendo.color.js'), require('kendo.drawing.js'), require('kendo.dataviz.core.js'), require('kendo.dataviz.chart.js')) :\n    typeof define === 'function' && define.amd ? define(['kendo.core', 'kendo.color', 'kendo.drawing', 'kendo.dataviz.core', 'kendo.dataviz.chart'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (global.kendodataviz = global.kendodataviz || {}, global.kendodataviz.sankey = global.kendodataviz.sankey || {}, global.kendodataviz.sankey.js = factory()));\n})(this, (function () {\n    /***********************************************************************\n     * WARNING: this file is auto-generated.  If you change it directly,\n     * your modifications will eventually be lost.  The source code is in\n     * `kendo-charts` repository, you should make your changes there and\n     * run `src-modules/sync.sh` in this repository.\n     */\n\n    (function($) {\n    /* eslint-disable */\n\n    window.kendo.dataviz = window.kendo.dataviz || {};\n    var dataviz = kendo.dataviz;\n    var deepExtend = dataviz.deepExtend;\n    var constants = dataviz.constants;\n    var ARIA_ACTIVE_DESCENDANT = constants.ARIA_ACTIVE_DESCENDANT;\n    var Box = dataviz.Box;\n    var setDefaultOptions = dataviz.setDefaultOptions;\n    var drawing = kendo.drawing;\n    var Path = drawing.Path;\n    var geometry = kendo.geometry;\n\n    var ChartLegend = dataviz.Legend;\n\n    var max = function (array, mapFn) { return Math.max.apply(null, array.map(mapFn)); };\n    var min = function (array, mapFn) { return Math.min.apply(null, array.map(mapFn)); };\n    var sum = function (array, mapFn) { return array.map(mapFn).reduce(function (acc, curr) { return (acc + curr); }, 0); };\n    var sortAsc = function (a, b) { return (a.y0 === b.y0 ? a.index - b.index : a.y0 + a.y1 - b.y0 - b.y1); };\n    var sortSource = function (a, b) { return sortAsc(a.source, b.source); };\n    var sortTarget = function (a, b) { return sortAsc(a.target, b.target); };\n    var value = function (node) { return node.value; };\n\n    function sortLinks(nodes) {\n        nodes.forEach(function (node) {\n            node.targetLinks.forEach(function (link) {\n                link.source.sourceLinks.sort(sortTarget);\n            });\n            node.sourceLinks.forEach(function (link) {\n                link.target.targetLinks.sort(sortSource);\n            });\n        });\n    }\n\n    var calcLayer = function (node, maxDepth) {\n        if (node.align === 'left') {\n            return node.depth;\n        }\n\n        if (node.align === 'right') {\n            return maxDepth - node.height;\n        }\n\n        return node.sourceLinks.length ? node.depth : maxDepth;\n    };\n\n    var Sankey$1 = kendo.Class.extend({\n        init: function(options) {\n            var ref = options.nodesOptions;\n            var offset = ref.offset; if (offset === void 0) { offset = {}; }\n            var align = ref.align;\n            this.data = {\n                nodes: options.nodes.map(function (node) { return deepExtend({}, { offset: offset, align: align }, node); }),\n                links: options.links.map(function (link) { return deepExtend({}, link); })\n            };\n\n            this.width = options.width;\n            this.height = options.height;\n            this.offsetX = options.offsetX || 0;\n            this.offsetY = options.offsetY || 0;\n            this.nodeWidth = options.nodesOptions.width;\n            this.nodePadding = options.nodesOptions.padding;\n            this.reverse = options.reverse;\n            this.targetColumnIndex = options.targetColumnIndex;\n            this.loops = options.loops;\n            this.autoLayout = options.autoLayout;\n        },\n\n        calculate: function() {\n            var ref = this.data;\n            var nodes = ref.nodes;\n            var links = ref.links;\n            this.connectLinksToNodes(nodes, links);\n            this.calculateNodeValues(nodes);\n\n            var circularLinks = this.calculateNodeHeights(nodes);\n\n            if (circularLinks) {\n                return { nodes: [], links: [], columns: [], circularLinks: circularLinks };\n            }\n\n            this.calculateNodeDepths(nodes);\n            var columns = this.calculateNodeColumns(nodes);\n            this.calculateNodeBreadths(columns);\n            this.applyNodesOffset(nodes);\n            this.calculateLinkBreadths(nodes);\n\n            return $.extend({}, this.data, {columns: columns});\n        },\n\n        connectLinksToNodes: function(nodes, links) {\n            var nodesMap = new Map();\n\n            nodes.forEach(function (node, i) {\n                node.index = i;\n                node.sourceLinks = [];\n                node.targetLinks = [];\n                node.id = node.id !== undefined ? node.id : node.label.text;\n                nodesMap.set(node.id, node);\n            });\n\n            links.forEach(function (link) {\n                link.source = nodesMap.get(link.sourceId);\n                link.target = nodesMap.get(link.targetId);\n                link.source.sourceLinks.push(link);\n                link.target.targetLinks.push(link);\n            });\n        },\n\n        calculateNodeValues: function(nodes) {\n            nodes.forEach(function (node) {\n                node.value = Math.max(\n                    sum(node.sourceLinks, value),\n                    sum(node.targetLinks, value)\n                );\n            });\n        },\n\n        calculateNodeDepths: function(nodes) {\n            var current = new Set(nodes);\n            var next = new Set();\n            var currDepth = 0;\n            while (current.size) {\n                var currentNodes = Array.from(current);\n                for (var n = 0; n < currentNodes.length; n++) {\n                    var node = currentNodes[n];\n                    node.depth = currDepth;\n                    for (var l = 0; l < node.sourceLinks.length; l++) {\n                        var link = node.sourceLinks[l];\n                        next.add(link.target);\n                    }\n                }\n                currDepth++;\n                current = next;\n                next = new Set();\n            }\n        },\n\n        calculateNodeHeights: function(nodes) {\n            var nodesLength = nodes.length;\n            var current = new Set(nodes);\n            var next = new Set;\n            var currentHeight = 0;\n            var eachNode = function (node) {\n                node.height = currentHeight;\n                node.targetLinks.forEach(function (link) {\n                    next.add(link.source);\n                });\n            };\n            while (current.size) {\n                current.forEach(eachNode);\n                currentHeight++;\n                if (currentHeight > nodesLength) {\n                    return true;\n                }\n                current = next;\n                next = new Set;\n            }\n            return false;\n        },\n\n        calculateNodeColumns: function(nodes) {\n            var this$1$1 = this;\n\n            var maxDepth = max(nodes, function (d) { return d.depth; });\n            var columnWidth = (this.width - this.offsetX - this.nodeWidth) / maxDepth;\n            var columns = new Array(maxDepth + 1);\n            for (var i = 0; i < nodes.length; i++) {\n                var node = nodes[i];\n                var layer = Math.max(0, Math.min(maxDepth, calcLayer(node, maxDepth)));\n                node.x0 = this$1$1.offsetX + layer * columnWidth;\n                node.x1 = node.x0 + this$1$1.nodeWidth;\n                node.layer = layer;\n                columns[layer] = columns[layer] || [];\n                columns[layer].push(node);\n            }\n\n            return columns;\n        },\n\n        calculateNodeBreadths: function(columns) {\n            var this$1$1 = this;\n\n            var kSize = min(columns, function (c) { return (this$1$1.height - this$1$1.offsetY - (c.length - 1) * this$1$1.nodePadding) / sum(c, value); });\n\n            columns.forEach(function (nodes) {\n                var y = this$1$1.offsetY;\n                nodes.forEach(function (node) {\n                    node.y0 = y;\n                    node.y1 = y + node.value * kSize;\n                    y = node.y1 + this$1$1.nodePadding;\n                    node.sourceLinks.forEach(function (link) {\n                        link.width = link.value * kSize;\n                    });\n                });\n                y = (this$1$1.height - y + this$1$1.nodePadding) / (nodes.length + 1);\n                nodes.forEach(function (node, i) {\n                    node.y0 += y * (i + 1);\n                    node.y1 += y * (i + 1);\n                });\n            });\n\n            if (this.autoLayout !== false) {\n                var loops = this.loops !== undefined ? this.loops : columns.length - 1;\n                var targetColumnIndex = this.targetColumnIndex || 1;\n\n                for (var i = 0; i < loops; i++) {\n                    if (!this$1$1.reverse) {\n                        this$1$1.uncurlLinksToLeft(columns, targetColumnIndex);\n                        this$1$1.uncurlLinksToRight(columns, targetColumnIndex);\n                    } else {\n                        this$1$1.uncurlLinksToRight(columns, targetColumnIndex);\n                        this$1$1.uncurlLinksToLeft(columns, targetColumnIndex);\n                    }\n                }\n            }\n\n            columns.forEach(sortLinks);\n        },\n\n        applyNodesOffset: function(nodes) {\n            nodes.forEach(function (node) {\n                var offsetX = (node.offset ? node.offset.left : 0) || 0;\n                var offsetY = (node.offset ? node.offset.top : 0) || 0;\n                node.x0 += offsetX;\n                node.x1 += offsetX;\n                node.y0 += offsetY;\n                node.y1 += offsetY;\n            });\n        },\n\n        calculateLinkBreadths: function(nodes) {\n            nodes.forEach(function (node) {\n                var sourceLinks = node.sourceLinks;\n                var targetLinks = node.targetLinks;\n                var y = node.y0;\n                var y1 = y;\n                sourceLinks.forEach(function (link) {\n                    link.x0 = link.source.x1;\n                    link.y0 = y + link.width / 2;\n                    y += link.width;\n                });\n                targetLinks.forEach(function (link) {\n                    link.x1 = link.target.x0;\n                    link.y1 = y1 + link.width / 2;\n                    y1 += link.width;\n                });\n            });\n        },\n\n        uncurlLinksToRight: function(columns, targetColumnIndex) {\n            var this$1$1 = this;\n\n            var n = columns.length;\n            for (var i = targetColumnIndex; i < n; i++) {\n                var column = columns[i];\n                column.forEach(function (target) {\n                    var y = 0;\n                    var sum = 0;\n                    target.targetLinks.forEach(function (link) {\n                        var kValue = link.value * (target.layer - link.source.layer);\n                        y += this$1$1.targetTopPos(link.source, target) * kValue;\n                        sum += kValue;\n                    });\n\n                    var dy = y === 0 ? 0 : (y / sum - target.y0);\n                    target.y0 += dy;\n                    target.y1 += dy;\n                    sortLinks([target]);\n                });\n                column.sort(sortAsc);\n                this$1$1.arrangeNodesVertically(column);\n            }\n        },\n\n        uncurlLinksToLeft: function(columns, targetColumnIndex) {\n            var this$1$1 = this;\n\n            var l = columns.length;\n            var startIndex = l - 1 - targetColumnIndex;\n            for (var i = startIndex; i >= 0; i--) {\n                var column = columns[i];\n                var loop = function ( j ) {\n                    var source = column[j];\n                    var y = 0;\n                    var sum = 0;\n                    source.sourceLinks.forEach(function (link) {\n                        var kValue = link.value * (link.target.layer - source.layer);\n                        y += this$1$1.sourceTopPos(source, link.target) * kValue;\n                        sum += kValue;\n                    });\n                    var dy = y === 0 ? 0 : (y / sum - source.y0);\n                    source.y0 += dy;\n                    source.y1 += dy;\n                    sortLinks([source]);\n                };\n\n                for (var j = 0; j < column.length; j++) loop( j );\n\n                column.sort(sortAsc);\n                this$1$1.arrangeNodesVertically(column);\n            }\n        },\n\n        arrangeNodesVertically: function(nodes) {\n            var startIndex = 0;\n            var endIndex = nodes.length - 1;\n\n            this.arrangeUp(nodes, this.height, endIndex);\n            this.arrangeDown(nodes, this.offsetY, startIndex);\n        },\n\n        arrangeDown: function(nodes, yPos, index) {\n            var this$1$1 = this;\n\n            var currentY = yPos;\n\n            for (var i = index; i < nodes.length; i++) {\n                var node = nodes[i];\n                var dy = Math.max(0, currentY - node.y0);\n                node.y0 += dy;\n                node.y1 += dy;\n                currentY = node.y1 + this$1$1.nodePadding;\n            }\n        },\n\n        arrangeUp: function(nodes, yPos, index) {\n            var this$1$1 = this;\n\n            var currentY = yPos;\n            for (var i = index; i >= 0; --i) {\n                var node = nodes[i];\n                var dy = Math.max(0, node.y1 - currentY);\n                node.y0 -= dy;\n                node.y1 -= dy;\n                currentY = node.y0 - this$1$1.nodePadding;\n            }\n        },\n\n        sourceTopPos: function(source, target) {\n            var this$1$1 = this;\n\n            var y = target.y0 - ((target.targetLinks.length - 1) * this.nodePadding) / 2;\n            for (var i = 0; i < target.targetLinks.length; i++) {\n                var link = target.targetLinks[i];\n                if (link.source === source) {\n                    break;\n                }\n                y += link.width + this$1$1.nodePadding;\n            }\n            for (var i$1 = 0; i$1 < source.sourceLinks.length; i$1++) {\n                var link$1 = source.sourceLinks[i$1];\n                if (link$1.target === target) {\n                    break;\n                }\n                y -= link$1.width;\n            }\n            return y;\n        },\n\n        targetTopPos: function(source, target) {\n            var this$1$1 = this;\n\n            var y = source.y0 - ((source.sourceLinks.length - 1) * this.nodePadding) / 2;\n            for (var i = 0; i < source.sourceLinks.length; i++) {\n                var link = source.sourceLinks[i];\n                if (link.target === target) {\n                    break;\n                }\n                y += link.width + this$1$1.nodePadding;\n            }\n            for (var i$1 = 0; i$1 < target.targetLinks.length; i$1++) {\n                var link$1 = target.targetLinks[i$1];\n                if (link$1.source === source) {\n                    break;\n                }\n                y -= link$1.width;\n            }\n            return y;\n        }\n    });\n\n    var calculateSankey = function (options) { return new Sankey$1(options).calculate(); };\n\n    var crossesValue = function (links) {\n        var value = 0;\n        var linksLength = links.length;\n\n        for (var i = 0; i < linksLength; i++) {\n            var link = links[i];\n\n            for (var lNext = i + 1; lNext < linksLength; lNext++) {\n                var nextLink = links[lNext];\n\n                if (intersect(link, nextLink)) {\n                    value += Math.min(link.value, nextLink.value);\n                }\n            }\n        }\n\n        return value;\n    };\n\n    function rotationDirection(p1x, p1y, p2x, p2y, p3x, p3y) {\n        var expression1 = (p3y - p1y) * (p2x - p1x);\n        var expression2 = (p2y - p1y) * (p3x - p1x);\n\n        if (expression1 > expression2) {\n            return 1;\n        } else if (expression1 === expression2) {\n            return 0;\n        }\n\n        return -1;\n    }\n\n    function intersect(link1, link2) {\n        var f1 = rotationDirection(link1.x0, link1.y0, link1.x1, link1.y1, link2.x1, link2.y1);\n        var f2 = rotationDirection(link1.x0, link1.y0, link1.x1, link1.y1, link2.x0, link2.y0);\n        var f3 = rotationDirection(link1.x0, link1.y0, link2.x0, link2.y0, link2.x1, link2.y1);\n        var f4 = rotationDirection(link1.x1, link1.y1, link2.x0, link2.y0, link2.x1, link2.y1);\n\n        return f1 !== f2 && f3 !== f4;\n    }\n\n    var SankeyElement = (function (Class$$1) {\n        function SankeyElement(options) {\n            Class$$1.call(this);\n            this.options = deepExtend({}, this.options, options);\n            this.createVisual();\n        }\n\n        if ( Class$$1 ) SankeyElement.__proto__ = Class$$1;\n        SankeyElement.prototype = Object.create( Class$$1 && Class$$1.prototype );\n        SankeyElement.prototype.constructor = SankeyElement;\n\n        SankeyElement.prototype.createVisual = function createVisual () {\n            this.visual = this.createElement();\n        };\n\n        SankeyElement.prototype.exportVisual = function exportVisual () {\n            return this.visual;\n        };\n\n        SankeyElement.prototype.createElement = function createElement () {\n            var this$1$1 = this;\n\n            var customVisual = this.options.visual;\n            var visual;\n\n            if (customVisual) {\n                visual = customVisual({\n                    sender: this.getSender(),\n                    options: this.visualOptions(),\n                    createVisual: function () { return this$1$1.getElement(); }\n                });\n            } else {\n                visual = this.getElement();\n            }\n\n            return visual;\n        };\n\n        SankeyElement.prototype.getSender = function getSender () {\n            return this;\n        };\n\n        return SankeyElement;\n    }(dataviz.Class));\n\n    var Node = (function (SankeyElement$$1) {\n        function Node () {\n            SankeyElement$$1.apply(this, arguments);\n        }\n\n        if ( SankeyElement$$1 ) Node.__proto__ = SankeyElement$$1;\n        Node.prototype = Object.create( SankeyElement$$1 && SankeyElement$$1.prototype );\n        Node.prototype.constructor = Node;\n\n        Node.prototype.getElement = function getElement () {\n            return Path.fromRect(this.getRect(), this.visualOptions());\n        };\n\n        Node.prototype.getRect = function getRect () {\n            var node = this.options.node;\n            return new geometry.Rect([node.x0, node.y0], [node.x1 - node.x0, node.y1 - node.y0]);\n        };\n\n        Node.prototype.getLabelText = function getLabelText (options) {\n            var labelTemplate = options.labels.ariaTemplate;\n\n            if (labelTemplate) {\n                return labelTemplate({ node: options.node });\n            }\n        };\n\n        Node.prototype.visualOptions = function visualOptions () {\n            var options = deepExtend({}, this.options, this.options.node);\n            var ariaLabel = this.getLabelText(options);\n\n            return {\n                fill: {\n                    color: options.color,\n                    opacity: options.opacity\n                },\n                stroke: { width: 0 },\n                className: 'k-sankey-node',\n                role: 'graphics-symbol',\n                ariaRoleDescription: 'Node',\n                ariaLabel: ariaLabel\n            };\n        };\n\n        Node.prototype.createFocusHighlight = function createFocusHighlight () {\n            if (!this.options.navigatable) {\n                return;\n            }\n\n            this._highlight = new Path.fromRect(this.getRect(), {\n                stroke: this.options.focusHighlight,\n                visible: false\n            });\n\n            return this._highlight;\n        };\n\n        Node.prototype.focus = function focus (options) {\n            if (this._highlight) {\n                var ref = options || {};\n                var highlight = ref.highlight; if (highlight === void 0) { highlight = true; }\n                if (highlight) {\n                    this._highlight.options.set('visible', true);\n                }\n                var id = this.options.node.id;\n                this.visual.options.set('id', id);\n\n                if (this.options.root()) {\n                    this.options.root().setAttribute(ARIA_ACTIVE_DESCENDANT, id);\n                }\n            }\n        };\n\n        Node.prototype.blur = function blur () {\n            if (this._highlight) {\n                this._highlight.options.set('visible', false);\n                this.visual.options.set('id', '');\n\n                if (this.options.root()) {\n                    this.options.root().removeAttribute(ARIA_ACTIVE_DESCENDANT);\n                }\n            }\n        };\n\n        return Node;\n    }(SankeyElement));\n\n    var nodeColor = function (node, nodeColors, index) { return node.color || nodeColors[index % nodeColors.length]; };\n\n    var resolveNodeOptions = function (node, options, nodeColors, index) {\n        var nodeOptions = deepExtend({}, options, options.node);\n        return deepExtend({},\n            { color: nodeColor(node, nodeColors, index) },\n            nodeOptions,\n            { node: node },\n            {\n                visual: node.visual,\n                opacity: node.opacity,\n                offset: node.offset,\n                color: node.color\n            }\n        );\n    };\n\n    var ref = drawing.util;\n    var defined = ref.defined;\n\n    var distanceToLine = function (line, point) {\n        var ref = line[0];\n        var x1 = ref[0];\n        var y1 = ref[1];\n        var ref$1 = line[1];\n        var x2 = ref$1[0];\n        var y2 = ref$1[1];\n        var x3 = point[0];\n        var y3 = point[1];\n\n        return Math.abs((x2 - x1) * (y3 - y1) - (x3 - x1) * (y2 - y1)) / Math.sqrt(Math.pow( (x2 - x1), 2 ) + Math.pow( (y2 - y1), 2 ));\n    };\n\n    var bezierPoint = function (p1, p2, p3, p4, t) {\n        var t1 = 1 - t;\n        var t1t1 = t1 * t1;\n        var tt = t * t;\n        return (p1 * t1t1 * t1) + (3 * p2 * t * t1t1) + (3 * p3 * tt * t1) + (p4 * tt * t);\n    };\n\n    var angelBetweenTwoLines = function (line1, line2) {\n        var ref = line1[0];\n        var x1 = ref[0];\n        var y1 = ref[1];\n        var ref$1 = line1[1];\n        var x2 = ref$1[0];\n        var y2 = ref$1[1];\n        var ref$2 = line2[0];\n        var x3 = ref$2[0];\n        var y3 = ref$2[1];\n        var ref$3 = line2[1];\n        var x4 = ref$3[0];\n        var y4 = ref$3[1];\n\n        var a1 = Math.atan2(y2 - y1, x2 - x1);\n        var a2 = Math.atan2(y4 - y3, x4 - x3);\n\n        return Math.abs(a1 - a2);\n    };\n\n    var calculateControlPointsOffsetX = function (link, rtl) {\n        var x0 = link.x0;\n        var x1 = link.x1;\n        var y0 = link.y0;\n        var y1 = link.y1;\n        var xC = (x0 + x1) / 2;\n\n        var width = link.width;\n        var halfWidth = width / 2;\n\n        // upper curve, t = 0.5\n        var upperCurveMiddleLine = [[(x0 + xC) / 2, y0 - halfWidth], [(x1 + xC) / 2, y1 - halfWidth]];\n\n        // for lower curve, bezier-point at t = 0.5\n        // for the case t = 0.5, the bezier-point is the middle point of the curve. => ((y0 + halfWidth) + (y1 + halfWidth)) / 2\n        var lowerCurveMiddlePoint = [xC, bezierPoint(y0 + halfWidth, y0 + halfWidth, y1 + halfWidth, y1 + halfWidth, 0.5)];\n\n        // The actual width of the link at its middle point as can be seen on the screen.\n        var actualWidth = distanceToLine(upperCurveMiddleLine, lowerCurveMiddlePoint);\n\n        var upperNarrowness = (width - actualWidth) / 2;\n\n        // The line `upperCurveMiddleLine` shows the upper border of the link.\n        // Assumption 1: Translated to the left to the desired link width and the translate value will be the `offset`.\n        // Assumption 2: The translate value is a hypotenuse of a triangle.\n        var alpha = angelBetweenTwoLines(upperCurveMiddleLine, [[x0, y0 - halfWidth], [xC, y0 - halfWidth]]);\n        var a = upperNarrowness;\n        var b = Math.sin(alpha) * a;\n        var offset = Math.sqrt(a * a + b * b);\n        // Another option is to assume the triangle is isosceles\n        // => offset = Math.sqrt(2) * upperNarrowness;\n\n        var sign = y0 - y1 > 0 ? (-1) : 1;\n        if (rtl) {\n            sign = -sign;\n        }\n\n        return sign * offset;\n    };\n\n    var Link = (function (SankeyElement$$1) {\n        function Link () {\n            SankeyElement$$1.apply(this, arguments);\n        }\n\n        if ( SankeyElement$$1 ) Link.__proto__ = SankeyElement$$1;\n        Link.prototype = Object.create( SankeyElement$$1 && SankeyElement$$1.prototype );\n        Link.prototype.constructor = Link;\n\n        Link.prototype.getElement = function getElement () {\n            var link = this.options.link;\n            var x0 = link.x0;\n            var x1 = link.x1;\n            var y0 = link.y0;\n            var y1 = link.y1;\n            var xC = (x0 + x1) / 2;\n\n            return new Path(this.visualOptions())\n                .moveTo(x0, y0).curveTo([xC, y0], [xC, y1], [x1, y1]);\n        };\n\n        Link.prototype.getLabelText = function getLabelText (options) {\n            var labelTemplate = options.labels.ariaTemplate;\n\n            if (labelTemplate) {\n                return labelTemplate({ link: options.link });\n            }\n        };\n\n        Link.prototype.visualOptions = function visualOptions () {\n            var options = this.options;\n            var link = this.options.link;\n            var ariaLabel = this.getLabelText(options);\n\n            return {\n                stroke: {\n                    width: options.link.width,\n                    color: link.color || options.color,\n                    opacity: defined(link.opacity) ? link.opacity : options.opacity\n                },\n                role: 'graphics-symbol',\n                ariaRoleDescription: 'Link',\n                ariaLabel: ariaLabel\n            };\n        };\n\n        Link.prototype.createFocusHighlight = function createFocusHighlight () {\n            if (!this.options.navigatable) {\n                return;\n            }\n            var ref = this.options;\n            var link = ref.link;\n            var rtl = ref.rtl;\n            var x0 = link.x0;\n            var x1 = link.x1;\n            var y0 = link.y0;\n            var y1 = link.y1;\n            var xC = (x0 + x1) / 2;\n            var halfWidth = link.width / 2;\n\n            var offset = calculateControlPointsOffsetX(link, rtl);\n\n            this._highlight = new Path({ stroke: this.options.focusHighlight, visible: false })\n                .moveTo(x0, y0 + halfWidth)\n                .lineTo(x0, y0 - halfWidth)\n                .curveTo([xC + offset, y0 - halfWidth], [xC + offset, y1 - halfWidth], [x1, y1 - halfWidth])\n                .lineTo(x1, y1 + halfWidth)\n                .curveTo([xC - offset, y1 + halfWidth], [xC - offset, y0 + halfWidth], [x0, y0 + halfWidth]);\n        };\n\n        Link.prototype.focus = function focus (options) {\n            if (this._highlight) {\n                var ref = options || {};\n                var highlight = ref.highlight; if (highlight === void 0) { highlight = true; }\n                if (highlight) {\n                    this._highlight.options.set('visible', true);\n                }\n                var id = (this.options.link.sourceId) + \"->\" + (this.options.link.targetId);\n                this.visual.options.set('id', id);\n\n                if (this.options.root()) {\n                    this.options.root().setAttribute(ARIA_ACTIVE_DESCENDANT, id);\n                }\n            }\n        };\n\n        Link.prototype.blur = function blur () {\n            if (this._highlight) {\n                this._highlight.options.set('visible', false);\n                this.visual.options.set('id', '');\n\n                if (this.options.root()) {\n                    this.options.root().removeAttribute(ARIA_ACTIVE_DESCENDANT);\n                }\n            }\n        };\n\n        return Link;\n    }(SankeyElement));\n\n    var resolveLinkOptions = function (link, options, sourceNode, targetNode) {\n        var linkOptions = deepExtend({},\n            options,\n            {\n                link: link,\n                opacity: link.opacity,\n                color: link.color,\n                colorType: link.colorType,\n                visual: link.visual,\n                highlight: link.highlight\n            }\n        );\n\n        if (linkOptions.colorType === 'source') {\n            linkOptions.color = sourceNode.options.fill.color;\n        } else if (linkOptions.colorType === 'target') {\n            linkOptions.color = targetNode.options.fill.color;\n        }\n\n        return linkOptions;\n    };\n\n    var INSIDE = 'inside';\n    var BEFORE = 'before';\n    var AFTER = 'after';\n\n    var Label = (function (SankeyElement$$1) {\n        function Label () {\n            SankeyElement$$1.apply(this, arguments);\n        }\n\n        if ( SankeyElement$$1 ) Label.__proto__ = SankeyElement$$1;\n        Label.prototype = Object.create( SankeyElement$$1 && SankeyElement$$1.prototype );\n        Label.prototype.constructor = Label;\n\n        Label.prototype.getElement = function getElement () {\n            var options = deepExtend({}, this.options, this.options.node.label);\n            var node = options.node;\n            var diagramMinX = options.diagramMinX;\n            var diagramMaxX = options.diagramMaxX;\n            var text = options.text;\n            var offset = options.offset;\n            var rtl = options.rtl;\n            var position = options.position;\n            if (rtl && position !== INSIDE) {\n                position = position === BEFORE ? AFTER : BEFORE;\n            }\n\n            if (!options.visible || !text) {\n                return null;\n            }\n\n            var nodeBox = new Box(node.x0, node.y0, node.x1, node.y1);\n            var visualOptions = this.visualOptions();\n            if (rtl && !visualOptions.align) {\n                visualOptions.align = 'right';\n            }\n            var textbox = new dataviz.TextBox(text, visualOptions);\n            textbox.reflow(new Box());\n            var textSizeBox = textbox.box;\n            var textY = nodeBox.center().y - (textSizeBox.height() / 2);\n\n            var labelAfterLastNode = node.x1 + textSizeBox.width() > diagramMaxX;\n            var labelBeforeFirstNode = node.x0 - textSizeBox.width() < diagramMinX;\n            var side = position === BEFORE || (position === INSIDE && labelAfterLastNode) ? BEFORE : AFTER;\n            if (rtl) {\n                side = position === AFTER || (position === INSIDE && labelBeforeFirstNode) ? AFTER : BEFORE;\n            }\n            var textOrigin = [side === BEFORE ? node.x0 - textSizeBox.width() : node.x1, textY];\n\n            var textRect = new Box(textOrigin[0], textOrigin[1], textOrigin[0] + textSizeBox.width(), textOrigin[1] + textSizeBox.height());\n            textRect.translate(offset.left || 0, offset.top || 0);\n            textbox.reflow(textRect);\n\n            textbox.renderVisual();\n\n            return textbox.visual;\n        };\n\n        Label.prototype.visualOptions = function visualOptions () {\n            var options = deepExtend({}, this.options, this.options.node.label);\n            return {\n                color: options.color,\n                font: options.font,\n                border: options.border,\n                margin: options.margin,\n                padding: options.padding,\n                align: options.align,\n                paintOrder: options.paintOrder,\n                stroke: options.stroke,\n            };\n        };\n\n        return Label;\n    }(SankeyElement));\n\n    setDefaultOptions(Label, {\n        position: INSIDE, // inside, before, after\n    });\n\n    var resolveLabelOptions = function (node, options, rtl, diagramMinX, diagramMaxX) { return deepExtend({},\n        options,\n        {\n            node: node,\n            diagramMinX: diagramMinX,\n            diagramMaxX: diagramMaxX,\n            rtl: rtl,\n            visual: node.label.visual,\n            visible: node.label.visible,\n            margin: node.label.margin,\n            padding: node.label.padding,\n            border: node.label.border,\n            align: node.label.align,\n            offset: node.label.offset\n        }\n    ); };\n\n    var Title$1 = (function (SankeyElement$$1) {\n        function Title$$1 () {\n            SankeyElement$$1.apply(this, arguments);\n        }\n\n        if ( SankeyElement$$1 ) Title$$1.__proto__ = SankeyElement$$1;\n        Title$$1.prototype = Object.create( SankeyElement$$1 && SankeyElement$$1.prototype );\n        Title$$1.prototype.constructor = Title$$1;\n\n        Title$$1.prototype.getElement = function getElement () {\n            var options = this.options;\n            var drawingRect = options.drawingRect;\n            var text = options.text;\n\n            if (options.visible === false || !text) {\n                return null;\n            }\n\n            var title = dataviz.Title.buildTitle(text, options);\n\n            title.reflow(drawingRect);\n\n            title.renderVisual();\n            return title.visual;\n        };\n\n        Title$$1.prototype.createElement = function createElement () {\n            return this.getElement();\n        };\n\n        return Title$$1;\n    }(SankeyElement));\n\n    setDefaultOptions(Title$1, {\n        align: constants.CENTER, // 'left', 'right', 'center'\n        border: {\n            width: 0\n        },\n        margin: dataviz.getSpacing(5),\n        padding: dataviz.getSpacing(5)\n    });\n\n    var AREA = \"area\";\n\n    var sortData = function (a, b) {\n        if (a.node.x0 - b.node.x0 !== 0) {\n            return a.node.x0 - b.node.x0;\n        }\n        return a.node.y0 - b.node.y0;\n    };\n\n    var sortDataRTL = function (a, b) {\n        if (a.node.x1 - b.node.x1 !== 0) {\n            return a.node.x1 - b.node.x1;\n        }\n        return b.node.y0 - a.node.y0;\n    };\n\n    var sort = function (rtl) { return (rtl ? sortDataRTL : sortData); };\n\n    var Legend = (function (SankeyElement$$1) {\n        function Legend () {\n            SankeyElement$$1.apply(this, arguments);\n        }\n\n        if ( SankeyElement$$1 ) Legend.__proto__ = SankeyElement$$1;\n        Legend.prototype = Object.create( SankeyElement$$1 && SankeyElement$$1.prototype );\n        Legend.prototype.constructor = Legend;\n\n        Legend.prototype.getElement = function getElement () {\n            var options = this.options;\n            var drawingRect = options.drawingRect;\n            var rtl = options.rtl;\n            var nodes = options.nodes; if (nodes === void 0) { nodes = []; }\n            var item = options.item;\n            var position = options.position;\n\n            if (options.visible === false || !nodes.length) {\n                return null;\n            }\n\n            var data = nodes.map(function (node) { return ({\n                text: (node.label && node.label.text) || '',\n                area: {\n                    background: item.areaBackground !== undefined ? item.areaBackground : node.color,\n                    opacity: item.areaOpacity !== undefined ? item.areaOpacity : node.opacity\n                },\n                node: node\n            }); });\n\n            data.sort(sort(rtl));\n\n            var reverse = rtl && position !== constants.LEFT && position !== constants.RIGHT;\n            var legend = new ChartLegend($.extend({}, options, {data: data, reverse: reverse}), { rtl: rtl });\n            legend.reflow(drawingRect);\n\n            legend.renderVisual();\n            return legend.visual;\n        };\n\n        Legend.prototype.createElement = function createElement () {\n            return this.getElement();\n        };\n\n        return Legend;\n    }(SankeyElement));\n\n    setDefaultOptions(Legend, {\n        markers: { visible: false },\n        item: {\n            type: AREA,\n            cursor: constants.POINTER,\n            opacity: 1\n        },\n        position: constants.BOTTOM,\n        align: constants.CENTER,\n        accessibility: {\n            role: 'presentation',\n            ariaLabel: null,\n            ariaRoleDescription: null\n        },\n        border: {\n            width: 0\n        }\n    });\n\n    var LINK = 'link';\n    var NODE = 'node';\n\n    var toRtl = function (sankey) {\n        var nodes = sankey.nodes;\n        var links = sankey.links;\n        var startX = Math.min.apply(Math, nodes.map(function (node) { return node.x0; }));\n        var endX = Math.max.apply(Math, nodes.map(function (node) { return node.x1; }));\n        var width = endX - startX;\n\n        nodes.forEach(function (node) {\n            var x0 = width - (node.x1 - 2 * startX);\n            var x1 = width - (node.x0 - 2 * startX);\n            node.x0 = x0;\n            node.x1 = x1;\n        });\n\n        links.forEach(function (link) {\n            var x0 = width - (link.x1 - 2 * startX);\n            var x1 = width - (link.x0 - 2 * startX);\n            link.x1 = x0;\n            link.x0 = x1;\n        });\n    };\n\n    var Sankey = (function (Observable$$1) {\n        function Sankey(element, options, theme) {\n            Observable$$1.call(this);\n\n            this._initTheme(theme);\n            this._setOptions(options);\n            this._initElement(element);\n            this._initSurface();\n\n            if (options && options.data) {\n                this._redraw();\n                this._initResizeObserver();\n                this._initNavigation(element);\n            }\n        }\n\n        if ( Observable$$1 ) Sankey.__proto__ = Observable$$1;\n        Sankey.prototype = Object.create( Observable$$1 && Observable$$1.prototype );\n        Sankey.prototype.constructor = Sankey;\n\n        Sankey.prototype.destroy = function destroy () {\n            this.unbind();\n            this._destroySurface();\n            this._destroyResizeObserver();\n\n            if (this.element) {\n                this.element.removeEventListener('keydown', this._keydownHandler);\n                this.element.removeEventListener('focus', this._focusHandler);\n                this.element.removeEventListener('mousedown', this._onDownHandler);\n                this.element.removeEventListener('touchstart', this._onDownHandler);\n                this.element.removeEventListener('pointerdown', this._onDownHandler);\n            }\n\n            this._focusState = null;\n\n            this.element = null;\n        };\n\n        Sankey.prototype._initElement = function _initElement (element) {\n            this.element = element;\n            dataviz.addClass(element, [ \"k-chart\", \"k-sankey\" ]);\n            element.setAttribute('role', 'graphics-document');\n\n            var ref = this.options;\n            var title = ref.title;\n\n            if (title.text) {\n                element.setAttribute('aria-label', title.text);\n            }\n\n            if (title.description) {\n                element.setAttribute(\"aria-roledescription\", title.description);\n            }\n        };\n\n        Sankey.prototype._initSurface = function _initSurface () {\n            if (!this.surface) {\n                this._destroySurface();\n                this._initSurfaceElement();\n                this.surface = this._createSurface();\n            }\n        };\n\n        Sankey.prototype._initNavigation = function _initNavigation (element) {\n            element.tabIndex = element.getAttribute(\"tabindex\") || 0;\n\n            if (this.options.disableKeyboardNavigation) {\n                return;\n            }\n\n            this._keydownHandler = this._keydown.bind(this);\n            this._focusHandler = this._focus.bind(this);\n            this._blurHandler = this._blur.bind(this);\n            this._onDownHandler = this._onDown.bind(this);\n\n            element.addEventListener('keydown', this._keydownHandler);\n            element.addEventListener('focus', this._focusHandler);\n            element.addEventListener('blur', this._blurHandler);\n            element.addEventListener('mousedown', this._onDownHandler);\n            element.addEventListener('touchstart', this._onDownHandler);\n            element.addEventListener('pointerdown', this._onDownHandler);\n\n            this._focusState = {\n                node: this.firstFocusableNode(),\n                link: null\n            };\n        };\n\n        Sankey.prototype.firstFocusableNode = function firstFocusableNode () {\n            return this.columns[0][0];\n        };\n\n        Sankey.prototype._initResizeObserver = function _initResizeObserver () {\n            var this$1$1 = this;\n\n            var observer = new ResizeObserver(function (entries) {\n                entries.forEach(function (entry) {\n                    var ref = entry.contentRect;\n                    var width = ref.width;\n                    var height = ref.height;\n                    if (entry.target !== this$1$1.element ||\n                        (this$1$1.size && this$1$1.size.width === width && this$1$1.size.height === height)) {\n                        return;\n                    }\n                    this$1$1.size = { width: width, height: height };\n                    this$1$1.surface.setSize(this$1$1.size);\n                    this$1$1.resize = true;\n                    this$1$1._redraw();\n                });\n            });\n            this._resizeObserver = observer;\n            observer.observe(this.element);\n        };\n\n        Sankey.prototype._createSurface = function _createSurface () {\n            return drawing.Surface.create(this.surfaceElement, {\n                mouseenter: this._mouseenter.bind(this),\n                mouseleave: this._mouseleave.bind(this),\n                mousemove: this._mousemove.bind(this),\n                click: this._click.bind(this)\n            });\n        };\n\n        Sankey.prototype._initTheme = function _initTheme (theme) {\n            var currentTheme = theme || this.theme || {};\n            this.theme = currentTheme;\n            this.options = deepExtend({}, currentTheme, this.options);\n        };\n\n        Sankey.prototype.setLinksOpacity = function setLinksOpacity (opacity) {\n            var this$1$1 = this;\n\n            this.linksVisuals.forEach(function (link) {\n                this$1$1.setOpacity(link, opacity, link.linkOptions.opacity);\n            });\n        };\n\n        Sankey.prototype.setLinksInactivityOpacity = function setLinksInactivityOpacity (inactiveOpacity) {\n            var this$1$1 = this;\n\n            this.linksVisuals.forEach(function (link) {\n                this$1$1.setOpacity(link, inactiveOpacity, link.linkOptions.highlight.inactiveOpacity);\n            });\n        };\n\n        Sankey.prototype.setOpacity = function setOpacity (link, opacity, linkValue) {\n            link.options.set('stroke', $.extend({}, link.options.stroke,\n                {opacity: defined(linkValue) ? linkValue : opacity}));\n        };\n\n        Sankey.prototype.trigger = function trigger (name, ev) {\n            var dataItem = ev.element.dataItem;\n            var targetType = ev.element.type;\n\n            var event = $.extend({}, ev,\n                {type: name,\n                targetType: targetType,\n                dataItem: dataItem});\n\n            return Observable$$1.prototype.trigger.call(this, name, event);\n        };\n\n        Sankey.prototype._mouseenter = function _mouseenter (ev) {\n            var element = ev.element;\n            var isLink = element.type === LINK;\n            var isNode = element.type === NODE;\n            var isLegendItem = Boolean(element.chartElement && element.chartElement.options.node);\n\n            if ((isLink && this.trigger('linkEnter', ev)) ||\n                (isNode && this.trigger('nodeEnter', ev))) {\n                return;\n            }\n\n            var ref = this.options.links;\n            var highlight = ref.highlight;\n            if (isLink) {\n                this.setLinksInactivityOpacity(highlight.inactiveOpacity);\n                this.setOpacity(element, highlight.opacity, element.linkOptions.highlight.opacity);\n            } else if (isNode) {\n                this.highlightLinks(element, highlight);\n            } else if (isLegendItem) {\n                var nodeVisual = this.nodesVisuals.get(element.chartElement.options.node.id);\n                this.highlightLinks(nodeVisual, highlight);\n            }\n        };\n\n        Sankey.prototype._mouseleave = function _mouseleave (ev) {\n            var this$1$1 = this;\n\n            var element = ev.element;\n            var isLink = element.type === LINK;\n            var isNode = element.type === NODE;\n            var isLegendItem = Boolean(element.chartElement && element.chartElement.options.node);\n            var target = ev.originalEvent.relatedTarget;\n\n            if (isLink && target && target.nodeName === 'text') {\n                return;\n            }\n\n            if (isLink || isNode) {\n                if (this.tooltipTimeOut) {\n                    clearTimeout(this.tooltipTimeOut);\n                    this.tooltipTimeOut = null;\n                }\n                this.tooltipShown = false;\n                this.trigger('tooltipHide', ev);\n            }\n\n            if ((isLink && this.trigger('linkLeave', ev)) ||\n                (isNode && this.trigger('nodeLeave', ev))) {\n                return;\n            }\n\n            if (isLink || isNode || isLegendItem) {\n                this.linksVisuals.forEach(function (link) {\n                    this$1$1.setOpacity(link, this$1$1.options.links.opacity, link.linkOptions.opacity);\n                });\n            }\n        };\n\n        Sankey.prototype._mousemove = function _mousemove (ev) {\n            var this$1$1 = this;\n\n            var ref = this.options.tooltip;\n            var followPointer = ref.followPointer;\n            var delay = ref.delay;\n            var element = ev.element;\n            var tooltipElType = element.type;\n\n            if ((tooltipElType !== LINK && tooltipElType !== NODE) || (this.tooltipShown && !followPointer)) {\n                return;\n            }\n\n            var mouseEvent = ev.originalEvent;\n            var rect = this.element.getBoundingClientRect();\n            var isLeft = mouseEvent.clientX - rect.left < rect.width / 2;\n            var isTop = mouseEvent.clientY - rect.top < rect.height / 2;\n\n            ev.tooltipData = {\n                popupOffset: {\n                    left: mouseEvent.pageX,\n                    top: mouseEvent.pageY\n                },\n                popupAlign: {\n                    horizontal: isLeft ? 'left' : 'right',\n                    vertical: isTop ? 'top' : 'bottom'\n                }\n            };\n\n            if (tooltipElType === NODE) {\n                var ref$1 = element.dataItem;\n                var sourceLinks = ref$1.sourceLinks;\n                var targetLinks = ref$1.targetLinks;\n                var links = targetLinks.length ? targetLinks : sourceLinks;\n                ev.nodeValue = links.reduce(function (acc, link) { return acc + link.value; }, 0);\n            }\n\n            if (this.tooltipTimeOut) {\n                clearTimeout(this.tooltipTimeOut);\n                this.tooltipTimeOut = null;\n            }\n\n            var nextDelay = followPointer && this.tooltipShown ? 0 : delay;\n\n            this.tooltipTimeOut = setTimeout(function () {\n                this$1$1.trigger('tooltipShow', ev);\n                this$1$1.tooltipShown = true;\n                this$1$1.tooltipTimeOut = null;\n            }, nextDelay);\n        };\n\n        Sankey.prototype._click = function _click (ev) {\n            var element = ev.element;\n            var dataItem = element.dataItem;\n            var isLink = element.type === LINK;\n            var isNode = element.type === NODE;\n            var focusState = this._focusState || {};\n\n            if (isNode) {\n                var focusedNodeClicked = !focusState.link && this.sameNode(focusState.node, dataItem);\n\n                if (!focusedNodeClicked) {\n                    this._focusState = { node: dataItem, link: null };\n                    this._focusNode({ highlight: false });\n                }\n\n                this.trigger('nodeClick', ev);\n            } else if (isLink) {\n                var link = {\n                    sourceId: dataItem.source.id,\n                    targetId: dataItem.target.id,\n                    value: dataItem.value\n                };\n                var focusedLinkClicked = this.sameLink(focusState.link, link);\n\n                if (!focusedLinkClicked) {\n                    this._focusState = { node: dataItem.source, link: link };\n                    this._focusLink({ highlight: false });\n                }\n\n                this.trigger('linkClick', ev);\n            }\n        };\n\n        Sankey.prototype.sameNode = function sameNode (node1, node2) {\n            return node1 && node2 && node1.id === node2.id;\n        };\n\n        Sankey.prototype.sameLink = function sameLink (link1, link2) {\n            return link1 && link2 && link1.sourceId === link2.sourceId && link1.targetId === link2.targetId;\n        };\n\n        Sankey.prototype._focusNode = function _focusNode (options) {\n            this._cleanFocusHighlight();\n\n            var nodeData = this._focusState.node;\n            var node = this.models.map.get(nodeData.id);\n            node.focus(options);\n        };\n\n        Sankey.prototype._focusLink = function _focusLink (options) {\n            this._cleanFocusHighlight();\n\n            var linkData = this._focusState.link;\n            var link = this.models.map.get(((linkData.sourceId) + \"-\" + (linkData.targetId)));\n            link.focus(options);\n        };\n\n        Sankey.prototype._focusNextNode = function _focusNextNode (direction) {\n            if (direction === void 0) { direction = 1; }\n\n            var current = this._focusState.node;\n\n            var columnIndex = this.columns.findIndex(function (column) { return column.find(function (n) { return n.id === current.id; }); });\n            var columnNodes = this.columns[columnIndex];\n            var nodeIndex = columnNodes.findIndex(function (n) { return n.id === current.id; });\n\n            var nextNode = columnNodes[nodeIndex + direction];\n            if (nextNode) {\n                this._focusState.node = nextNode;\n                this._focusNode();\n            }\n        };\n\n        Sankey.prototype._focusNextLink = function _focusNextLink (direction) {\n            if (direction === void 0) { direction = 1; }\n\n            var node = this._focusState.node;\n            var link = this._focusState.link;\n\n            var sourceLinkIndex = node.sourceLinks.findIndex(function (l) { return l.sourceId === link.sourceId && l.targetId === link.targetId; });\n            var targetLinkIndex = node.targetLinks.findIndex(function (l) { return l.sourceId === link.sourceId && l.targetId === link.targetId; });\n\n            if (sourceLinkIndex !== -1) {\n                var nextLink = node.sourceLinks[sourceLinkIndex + direction];\n\n                if (nextLink) {\n                    this._focusState.link = nextLink;\n                    this._focusLink();\n                }\n            } else if (targetLinkIndex !== -1) {\n                var nextLink$1 = node.targetLinks[targetLinkIndex + direction];\n\n                if (nextLink$1) {\n                    this._focusState.link = nextLink$1;\n                    this._focusLink();\n                }\n            }\n        };\n\n        Sankey.prototype._focusSourceNode = function _focusSourceNode () {\n            var linkData = this._focusState.link;\n            var sourceNode = this.models.map.get(linkData.sourceId);\n            this._focusState = { node: sourceNode.options.node, link: null };\n            this._focusNode();\n        };\n\n        Sankey.prototype._focusTargetNode = function _focusTargetNode () {\n            var linkData = this._focusState.link;\n            var targetNode = this.models.map.get(linkData.targetId);\n            this._focusState = { node: targetNode.options.node, link: null };\n            this._focusNode();\n        };\n\n        Sankey.prototype._focusSourceLink = function _focusSourceLink () {\n            var nodeData = this._focusState.node;\n            var sourceLinks = nodeData.sourceLinks;\n            var linkData = sourceLinks[0];\n            if (linkData) {\n                this._focusState.link = linkData;\n                this._focusLink();\n            }\n        };\n\n        Sankey.prototype._focusTargetLink = function _focusTargetLink () {\n            var nodeData = this._focusState.node;\n            var targetLinks = nodeData.targetLinks;\n            var linkData = targetLinks[0];\n            if (linkData) {\n                this._focusState.link = linkData;\n                this._focusLink();\n            }\n        };\n\n        Sankey.prototype._focus = function _focus () {\n            if (!this._skipFocusHighlight) {\n                if (this._focusState.link) {\n                    this._focusLink();\n                } else {\n                    this._focusNode();\n                }\n            }\n\n            this._skipFocusHighlight = false;\n        };\n\n        Sankey.prototype._blur = function _blur () {\n            this._cleanFocusHighlight();\n        };\n\n        Sankey.prototype._onDown = function _onDown () {\n            if (!this._hasFocus()) {\n                this._skipFocusHighlight = true;\n            }\n        };\n\n        Sankey.prototype._hasFocus = function _hasFocus () {\n            return this.element.ownerDocument.activeElement === this.element;\n        };\n\n        Sankey.prototype._cleanFocusHighlight = function _cleanFocusHighlight () {\n            this.models.nodes.forEach(function (node) { return node.blur(); });\n            this.models.links.forEach(function (link) { return link.blur(); });\n        };\n\n        Sankey.prototype._keydown = function _keydown (ev) {\n            var handler = this['on' + ev.key];\n            var rtl = this.options.rtl;\n\n            if (rtl && ev.key === 'ArrowLeft') {\n                handler = this.onArrowRight;\n            } else if (rtl && ev.key === 'ArrowRight') {\n                handler = this.onArrowLeft;\n            }\n\n            if (handler) {\n                handler.call(this, ev);\n            }\n        };\n\n        Sankey.prototype.onEscape = function onEscape (ev) {\n            ev.preventDefault();\n\n            this._focusState = { node: this.firstFocusableNode(), link: null };\n            this._focusNode();\n        };\n\n        Sankey.prototype.onArrowDown = function onArrowDown (ev) {\n            ev.preventDefault();\n\n            if (this._focusState.link) {\n                this._focusNextLink(1);\n            } else {\n                this._focusNextNode(1);\n            }\n        };\n\n        Sankey.prototype.onArrowUp = function onArrowUp (ev) {\n            ev.preventDefault();\n\n            if (this._focusState.link) {\n                this._focusNextLink(-1);\n            } else {\n                this._focusNextNode(-1);\n            }\n        };\n\n        Sankey.prototype.onArrowLeft = function onArrowLeft (ev) {\n            ev.preventDefault();\n\n            if (this._focusState.link) {\n                this._focusSourceNode();\n            } else {\n                this._focusTargetLink();\n            }\n        };\n\n        Sankey.prototype.onArrowRight = function onArrowRight (ev) {\n            ev.preventDefault();\n\n            if (this._focusState.link) {\n                this._focusTargetNode();\n            } else {\n                this._focusSourceLink();\n            }\n        };\n\n        Sankey.prototype.highlightLinks = function highlightLinks (node, highlight) {\n            var this$1$1 = this;\n\n            if (node) {\n                this.setLinksInactivityOpacity(highlight.inactiveOpacity);\n                node.links.forEach(function (link) {\n                    this$1$1.setOpacity(link, highlight.opacity, link.linkOptions.highlight.opacity);\n                });\n            }\n        };\n\n        Sankey.prototype._destroySurface = function _destroySurface () {\n            if (this.surface) {\n                this.surface.destroy();\n                this.surface = null;\n                this._destroySurfaceElement();\n            }\n        };\n\n        Sankey.prototype._destroyResizeObserver = function _destroyResizeObserver () {\n            if (this._resizeObserver) {\n                this._resizeObserver.disconnect();\n                this._resizeObserver = null;\n            }\n        };\n\n        Sankey.prototype._initSurfaceElement = function _initSurfaceElement () {\n            if (!this.surfaceElement) {\n                this.surfaceElement = document.createElement('div');\n                this.element.appendChild(this.surfaceElement);\n            }\n        };\n\n        Sankey.prototype._destroySurfaceElement = function _destroySurfaceElement () {\n            if (this.surfaceElement && this.surfaceElement.parentNode) {\n                this.surfaceElement.parentNode.removeChild(this.surfaceElement);\n                this.surfaceElement = null;\n            }\n        };\n\n        Sankey.prototype.setOptions = function setOptions (options, theme) {\n            this._setOptions(options);\n            this._initTheme(theme);\n            this._initSurface();\n            this._redraw();\n        };\n\n        Sankey.prototype._redraw = function _redraw () {\n            this.surface.clear();\n\n            var ref = this._getSize();\n            var width = ref.width;\n            var height = ref.height;\n            this.size = { width: width, height: height };\n            this.surface.setSize(this.size);\n\n            this.createVisual();\n\n            this.surface.draw(this.visual);\n        };\n\n        Sankey.prototype._getSize = function _getSize () {\n            return this.element.getBoundingClientRect();\n        };\n\n        Sankey.prototype.createVisual = function createVisual () {\n            this.visual = this._render();\n        };\n\n        Sankey.prototype.titleBox = function titleBox (title, drawingRect) {\n            if (!title || title.visible === false || !title.text) {\n                return null;\n            }\n\n            var titleElement = new Title$1($.extend({}, {drawingRect: drawingRect}, title));\n            var titleVisual = titleElement.exportVisual();\n            return titleVisual.chartElement.box;\n        };\n\n        Sankey.prototype.legendBox = function legendBox (options, nodes, drawingRect) {\n            if (!options || options.visible === false) {\n                return null;\n            }\n\n            var legend = new Legend($.extend({}, {nodes: nodes}, options, {drawingRect: drawingRect}));\n            var legendVisual = legend.exportVisual();\n\n            return legendVisual.chartElement.box;\n        };\n\n        Sankey.prototype.calculateSankey = function calculateSankey$1 (calcOptions, sankeyOptions) {\n            var title = sankeyOptions.title;\n            var legend = sankeyOptions.legend;\n            var data = sankeyOptions.data;\n            var nodes = sankeyOptions.nodes;\n            var labels = sankeyOptions.labels;\n            var nodeColors = sankeyOptions.nodeColors;\n            var disableAutoLayout = sankeyOptions.disableAutoLayout;\n            var disableKeyboardNavigation = sankeyOptions.disableKeyboardNavigation;\n            var rtl = sankeyOptions.rtl;\n            var autoLayout = !disableAutoLayout;\n            var padding = disableKeyboardNavigation ? 0 : highlightOptions.width / 2;\n\n            var sankeyBox = new Box(0, 0, calcOptions.width, calcOptions.height);\n            sankeyBox.unpad(padding);\n\n            var titleBox = this.titleBox(title, sankeyBox);\n\n            var legendArea = sankeyBox.clone();\n\n            if (titleBox) {\n                var titleHeight = titleBox.height();\n                if (title.position === constants.TOP) {\n                    sankeyBox.unpad({ top: titleHeight });\n                    legendArea = new Box(0, titleHeight, calcOptions.width, calcOptions.height);\n                } else {\n                    sankeyBox.shrink(0, titleHeight);\n                    legendArea = new Box(0, 0, calcOptions.width, calcOptions.height - titleHeight);\n                }\n            }\n\n            var legendBox = this.legendBox(legend, data.nodes, legendArea);\n            var legendPosition = (legend && legend.position) || Legend.prototype.options.position;\n\n            if (legendBox) {\n                if (legendPosition === constants.LEFT) {\n                    sankeyBox.unpad({ left: legendBox.width() });\n                }\n\n                if (legendPosition === constants.RIGHT) {\n                    sankeyBox.shrink(legendBox.width(), 0);\n                }\n\n                if (legendPosition === constants.TOP) {\n                    sankeyBox.unpad({ top: legendBox.height() });\n                }\n\n                if (legendPosition === constants.BOTTOM) {\n                    sankeyBox.shrink(0, legendBox.height());\n                }\n            }\n\n            var ref = calculateSankey($.extend({}, calcOptions, {offsetX: 0, offsetY: 0, width: sankeyBox.width(), height: sankeyBox.height()}));\n            var calculatedNodes = ref.nodes;\n            var circularLinks = ref.circularLinks;\n            if (circularLinks) {\n                console.warn('Circular links detected. Kendo Sankey diagram does not support circular links.');\n                return { sankey: { nodes: [], links: [], columns: [[]], circularLinks: circularLinks }, legendBox: legendBox, titleBox: titleBox };\n            }\n\n            var box = new Box();\n\n            var diagramMinX = calculatedNodes.reduce(function (acc, node) { return Math.min(acc, node.x0); }, Infinity);\n            var diagramMaxX = calculatedNodes.reduce(function (acc, node) { return Math.max(acc, node.x1); }, 0);\n\n            calculatedNodes.forEach(function (nodeEl, i) {\n                if (rtl) {\n                    var x0 = nodeEl.x0;\n                    var x1 = nodeEl.x1;\n                    nodeEl.x0 = diagramMaxX - x1;\n                    nodeEl.x1 = diagramMaxX - x0;\n                }\n                var nodeOps = resolveNodeOptions(nodeEl, nodes, nodeColors, i);\n                var nodeInstance = new Node(nodeOps);\n                box.wrap(dataviz.rectToBox(nodeInstance.exportVisual().rawBBox()));\n\n                var labelInstance = new Label(resolveLabelOptions(nodeEl, labels, rtl, diagramMinX, diagramMaxX));\n                var labelVisual = labelInstance.exportVisual();\n                if (labelVisual) {\n                    box.wrap(dataviz.rectToBox(labelVisual.rawBBox()));\n                }\n            });\n\n            var offsetX = sankeyBox.x1;\n            var offsetY = sankeyBox.y1;\n\n            var width = sankeyBox.width() + offsetX;\n            var height = sankeyBox.height() + offsetY;\n\n            width -= box.x2 > sankeyBox.width() ? box.x2 - sankeyBox.width() : 0;\n            height -= box.y2 > sankeyBox.height() ? box.y2 - sankeyBox.height() : 0;\n\n            offsetX += box.x1 < 0 ? -box.x1 : 0;\n            offsetY += box.y1 < 0 ? -box.y1 : 0;\n\n            if (autoLayout === false) {\n                return {\n                    sankey: calculateSankey($.extend({}, calcOptions, {offsetX: offsetX, offsetY: offsetY, width: width, height: height, autoLayout: false})),\n                    legendBox: legendBox,\n                    titleBox: titleBox\n                };\n            }\n\n            if (this.resize && autoLayout && this.permutation) {\n                this.resize = false;\n                return {\n                    sankey: calculateSankey($.extend({}, calcOptions, {offsetX: offsetX, offsetY: offsetY, width: width, height: height}, this.permutation)),\n                    legendBox: legendBox,\n                    titleBox: titleBox\n                };\n            }\n\n            var startColumn = 1;\n            var loops = 2;\n            var columnsLength = calculateSankey($.extend({}, calcOptions, {offsetX: offsetX, offsetY: offsetY, width: width, height: height, autoLayout: false})).columns.length;\n            var results = [];\n\n            var permutation = function (targetColumnIndex, reverse) {\n                var currPerm = calculateSankey($.extend({}, calcOptions, {offsetX: offsetX, offsetY: offsetY, width: width, height: height, loops: loops, targetColumnIndex: targetColumnIndex, reverse: reverse}));\n                var crosses = crossesValue(currPerm.links);\n                results.push({\n                    crosses: crosses,\n                    reverse: reverse,\n                    targetColumnIndex: targetColumnIndex\n                });\n                return crosses === 0;\n            };\n\n            for (var index = startColumn; index <= columnsLength - 1; index++) {\n                if (permutation(index, false) || permutation(index, true)) {\n                    break;\n                }\n            }\n\n            var minCrosses = Math.min.apply(null, results.map(function (r) { return r.crosses; }));\n            var bestResult = results.find(function (r) { return r.crosses === minCrosses; });\n            this.permutation = { targetColumnIndex: bestResult.targetColumnIndex, reverse: bestResult.reverse };\n            var result = calculateSankey($.extend({}, calcOptions, {offsetX: offsetX, offsetY: offsetY, width: width, height: height}, this.permutation));\n\n            return {\n                sankey: result,\n                legendBox: legendBox,\n                titleBox: titleBox\n            };\n        };\n\n        Sankey.prototype._render = function _render (options, context) {\n            var sankeyOptions = options || this.options;\n            var sankeyContext = context || this;\n\n            var labelOptions = sankeyOptions.labels;\n            var nodesOptions = sankeyOptions.nodes;\n            var linkOptions = sankeyOptions.links;\n            var nodeColors = sankeyOptions.nodeColors;\n            var title = sankeyOptions.title;\n            var legend = sankeyOptions.legend;\n            var rtl = sankeyOptions.rtl;\n            var disableKeyboardNavigation = sankeyOptions.disableKeyboardNavigation;\n            var data = sankeyOptions.data;\n            var ref = sankeyContext.size;\n            var width = ref.width;\n            var height = ref.height;\n\n            var calcOptions = $.extend({}, data, {width: width, height: height, nodesOptions: nodesOptions, title: title, legend: legend});\n            var ref$1 = this.calculateSankey(calcOptions, sankeyOptions);\n            var sankey = ref$1.sankey;\n            var titleBox = ref$1.titleBox;\n            var legendBox = ref$1.legendBox;\n            if (rtl) {\n                toRtl(sankey);\n            }\n            var nodes = sankey.nodes;\n            var links = sankey.links;\n            var columns = sankey.columns;\n\n            sankeyContext.columns = columns.map(function (column) {\n                var newColumn = column.slice();\n                newColumn.sort(function (a, b) { return a.y0 - b.y0; });\n                return newColumn;\n            });\n\n            var visual = new drawing.Group({\n                clip: Path.fromRect(new geometry.Rect([0, 0], [width, height]))\n            });\n\n            if (titleBox) {\n                var titleElement = new Title$1($.extend({}, title, {drawingRect: titleBox}));\n                var titleVisual = titleElement.exportVisual();\n                visual.append(titleVisual);\n            }\n\n            if (sankey.circularLinks) {\n                return visual;\n            }\n\n            var visualNodes = new Map();\n            sankeyContext.nodesVisuals = visualNodes;\n\n            var models = {\n                nodes: [],\n                links: [],\n                map: new Map()\n            };\n            sankeyContext.models = models;\n\n            var focusHighlights = [];\n\n            nodes.forEach(function (node, i) {\n                var nodeOps = resolveNodeOptions(node, nodesOptions, nodeColors, i);\n                nodeOps.root = function () { return sankeyContext.element; };\n                nodeOps.navigatable = disableKeyboardNavigation !== true;\n\n                var nodeInstance = new Node(nodeOps);\n                var nodeVisual = nodeInstance.exportVisual();\n                nodeVisual.links = [];\n                nodeVisual.type = NODE;\n\n                node.color = nodeOps.color;\n                node.opacity = nodeOps.opacity;\n\n                nodeVisual.dataItem = $.extend({}, data.nodes[i],\n                    {color: nodeOps.color,\n                    opacity: nodeOps.opacity,\n                    sourceLinks: node.sourceLinks.map(function (link) { return ({ sourceId: link.sourceId, targetId: link.targetId, value: link.value }); }),\n                    targetLinks: node.targetLinks.map(function (link) { return ({ sourceId: link.sourceId, targetId: link.targetId, value: link.value }); })});\n                visualNodes.set(node.id, nodeVisual);\n\n                models.nodes.push(nodeInstance);\n                models.map.set(node.id, nodeInstance);\n\n                visual.append(nodeVisual);\n\n                nodeInstance.createFocusHighlight();\n\n                if (nodeInstance._highlight) {\n                    focusHighlights.push(nodeInstance._highlight);\n                }\n            });\n\n            var sortedLinks = links.slice().sort(function (a, b) { return b.value - a.value; });\n\n            var linksVisuals = [];\n            sankeyContext.linksVisuals = linksVisuals;\n\n            sortedLinks.forEach(function (link) {\n                var source = link.source;\n                var target = link.target;\n                var sourceNode = visualNodes.get(source.id);\n                var targetNode = visualNodes.get(target.id);\n                var resolvedOptions = resolveLinkOptions(link, linkOptions, sourceNode, targetNode);\n                resolvedOptions.root = function () { return sankeyContext.element; };\n                resolvedOptions.navigatable = disableKeyboardNavigation !== true;\n                resolvedOptions.rtl = rtl;\n                var linkInstance = new Link(resolvedOptions);\n                var linkVisual = linkInstance.exportVisual();\n\n                linkVisual.type = LINK;\n                linkVisual.dataItem = {\n                    source: $.extend({}, sourceNode.dataItem),\n                    target: $.extend({}, targetNode.dataItem),\n                    value: link.value\n                };\n                linkVisual.linkOptions = resolvedOptions;\n                linksVisuals.push(linkVisual);\n\n                sourceNode.links.push(linkVisual);\n                targetNode.links.push(linkVisual);\n\n                models.links.push(linkInstance);\n                models.map.set(((source.id) + \"-\" + (target.id)), linkInstance);\n\n                linkInstance.createFocusHighlight();\n\n                if (linkInstance._highlight) {\n                    focusHighlights.push(linkInstance._highlight);\n                }\n\n                visual.append(linkVisual);\n            });\n\n            var diagramMinX = nodes.reduce(function (acc, node) { return Math.min(acc, node.x0); }, Infinity);\n            var diagramMaxX = nodes.reduce(function (acc, node) { return Math.max(acc, node.x1); }, 0);\n\n            nodes.forEach(function (node) {\n                var textOps = resolveLabelOptions(node, labelOptions, rtl, diagramMinX, diagramMaxX);\n                var labelInstance = new Label(textOps);\n                var labelVisual = labelInstance.exportVisual();\n\n                if (labelVisual) {\n                    visual.append(labelVisual);\n                }\n            });\n\n            if (legendBox) {\n                var legendElement = new Legend($.extend({}, legend, {rtl: rtl, drawingRect: legendBox, nodes: nodes}));\n                var legendVisual = legendElement.exportVisual();\n                visual.append(legendVisual);\n            }\n\n            if (focusHighlights.length !== 0) {\n                var focusHighlight = new drawing.Group();\n                focusHighlight.append.apply(focusHighlight, focusHighlights);\n                visual.append(focusHighlight);\n            }\n\n            return visual;\n        };\n\n        Sankey.prototype.exportVisual = function exportVisual (exportOptions) {\n            var options = (exportOptions && exportOptions.options) ?\n                deepExtend({}, this.options, exportOptions.options) : this.options;\n\n            var context = {\n                size: {\n                    width: defined(exportOptions && exportOptions.width) ? exportOptions.width : this.size.width,\n                    height: defined(exportOptions && exportOptions.height) ? exportOptions.height : this.size.height\n                }\n            };\n\n            return this._render(options, context);\n        };\n\n        Sankey.prototype._setOptions = function _setOptions (options) {\n            this.options = deepExtend({}, this.options, options);\n        };\n\n        return Sankey;\n    }(dataviz.Observable));\n\n    var highlightOptions = {\n        opacity: 1,\n        width: 2,\n        color: constants.BLACK\n    };\n\n    setDefaultOptions(Sankey, {\n        title: {\n            position: constants.TOP, // 'top', 'bottom'\n        },\n        labels: {\n            visible: true,\n            margin: {\n                left: 8,\n                right: 8\n            },\n            padding: 0,\n            border: {\n                width: 0\n            },\n            paintOrder: 'stroke',\n            stroke: {\n                lineJoin: \"round\",\n                width: 1\n            },\n            offset: { left: 0, top: 0 }\n        },\n        nodes: {\n            width: 24,\n            padding: 16,\n            opacity: 1,\n            align: 'stretch', // 'left', 'right', 'stretch'\n            offset: { left: 0, top: 0 },\n            focusHighlight: $.extend({}, highlightOptions),\n            labels: {\n                ariaTemplate: function (ref) {\n                    var node = ref.node;\n\n                    return node.label.text;\n    }\n            }\n        },\n        links: {\n            colorType: 'static', // 'source', 'target', 'static'\n            opacity: 0.4,\n            highlight: {\n                opacity: 0.8,\n                inactiveOpacity: 0.2\n            },\n            focusHighlight: $.extend({}, highlightOptions),\n            labels: {\n                ariaTemplate: function (ref) {\n                    var link = ref.link;\n\n                    return ((link.source.label.text) + \" to \" + (link.target.label.text));\n    }\n            }\n        },\n        tooltip: {\n            followPointer: false,\n            delay: 200\n        }\n    });\n\n    var createSankeyData = function (data, dimensions, measure) {\n        var nodes = new Set();\n        var links = new Map();\n        var linksMap = new Map();\n\n        data.forEach(function (row) {\n            dimensions.forEach(function (dimension) {\n                nodes.add(dimension.value(row));\n            });\n\n            for (var i = 0; i < dimensions.length - 1; i++) {\n                var source = dimensions[i].value(row);\n                var target = dimensions[i + 1].value(row);\n                var key = source + \"_\" + target;\n                var value = measure.value(row);\n                var existingValue = links.get(key);\n\n                if (existingValue !== undefined) {\n                    links.set(key, existingValue + value);\n                } else {\n                    links.set(key, value);\n                    linksMap.set(key, { source: source, target: target });\n                }\n            }\n        });\n\n        var nodesId = new Map();\n        var nodesArray = Array.from(nodes).map(function (node, index) {\n            nodesId.set(node, index);\n            return { id: index, label: { text: String(node) } };\n        });\n\n        var linksArray = Array.from(links).map(function (ref) {\n            var key = ref[0];\n            var value = ref[1];\n\n            var ref$1 = linksMap.get(key);\n            var source = ref$1.source;\n            var target = ref$1.target;\n            return {\n                sourceId: nodesId.get(source),\n                targetId: nodesId.get(target),\n                value: value\n            };\n        });\n\n        return { nodes: nodesArray, links: linksArray };\n    };\n\n    kendo.deepExtend(kendo.dataviz, {\n        Sankey: Sankey,\n        createSankeyData: createSankeyData\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n        var kendo = window.kendo;\n        var Widget = kendo.ui.Widget;\n\n        var encode = kendo.htmlEncode;\n        var styleAttr = '__style';\n        var tooltipContentWrapStyle = `${styleAttr}=\"display: flex; align-items: center;\"`;\n        var space = 3;\n        var TootipText = (text) => `<span ${styleAttr}=\"margin: 0 ${space}px\">${text}</span>`;\n        var Square = (color) => `<div ${styleAttr}=\"width: 15px; height: 15px; background-color: ${color}; display: inline-flex; margin-left: ${space}px\"></div>`;\n        var TooltipTemplates = {\n            node: function({ dataItem, value }) {\n                const { color, label } = dataItem;\n                return (\n                    `<div ${tooltipContentWrapStyle}>\n                    ${Square(color)}\n                    ${TootipText(encode(label.text))}\n                    ${TootipText(value)}\n                </div>`\n                );\n            },\n            link: function({ dataItem, value, rtl }) {\n                const { source, target } = dataItem;\n                return (\n                    `<div ${tooltipContentWrapStyle}>\n                    ${Square(source.color)}\n                    ${TootipText(encode(source.label.text))}\n                    ${TootipText(kendo.ui.icon({ icon: rtl ? \"arrow-left\" : \"arrow-right\" }))}\n                    ${Square(target.color)}\n                    ${TootipText(encode(target.label.text))}\n                    ${TootipText(value)}\n                </div>`\n                );\n            }\n        };\n\n        var SankeyTooltip = Widget.extend({\n            init: function(element, options) {\n                this.options = options;\n\n                Widget.fn.init.call(this, element);\n\n                if (options.rtl) {\n                    this.element.addClass('k-rtl');\n                }\n\n                this.element.addClass('k-tooltip k-chart-tooltip k-chart-shared-tooltip')\n                    .append('<div class=\"k-tooltip-content\"></div>');\n            },\n\n            size: function() {\n                return {\n                    width: this.element.outerWidth(),\n                    height: this.element.outerHeight()\n                };\n            },\n\n            setContent: function(content) {\n                this.element.find('.k-tooltip-content').html(content);\n                this.element.find(`[${styleAttr}]`).each((i, el) => {\n                    el.getAttribute(styleAttr)\n                        .split(';')\n                        .filter(s => s !== '')\n                        .forEach(s => {\n                            const parts = s.split(':');\n                            el.style[parts[0].trim()] = parts[1].trim();\n                        });\n                    el.removeAttribute(styleAttr);\n                });\n            },\n\n            setPosition: function(popupAlign, popupOffset, offsetOption) {\n                const size = this.size();\n                const offset = { ...popupOffset };\n\n                offset.left += (popupAlign.horizontal === 'left') ? offsetOption : (-1 * offsetOption);\n                if (popupAlign.horizontal === 'right') {\n                    offset.left -= size.width;\n                }\n\n                if (popupAlign.vertical === 'bottom') {\n                    offset.top -= size.height + offsetOption;\n                } else {\n                    offset.top += offsetOption;\n                }\n\n                this.element.css(offset);\n            },\n\n            show: function() {\n                this.element.show();\n            },\n\n            hide: function() {\n                this.element.hide();\n            },\n\n            destroy: function() {\n                this.element.remove();\n            }\n        });\n\n        kendo.deepExtend(kendo.dataviz, {\n            SankeyTooltip: {\n                Tooltip: SankeyTooltip,\n                ContentTemplates: TooltipTemplates\n            }\n        });\n    })(window.kendo.jQuery);\n\n    (function($) {\n        const kendo = window.kendo;\n        const template = kendo.template;\n        const Widget = kendo.ui.Widget;\n        const dataviz = kendo.dataviz;\n        const defined = dataviz.defined;\n        const encode = kendo.htmlEncode;\n        const isRtl = kendo.support.isRtl;\n        const KendoSankey = dataviz.Sankey;\n        const NODE_CLICK = \"nodeClick\";\n        const LINK_CLICK = \"linkClick\";\n        const NODE_ENTER = \"nodeEnter\";\n        const NODE_LEAVE = \"nodeLeave\";\n        const LINK_ENTER = \"linkEnter\";\n        const LINK_LEAVE = \"linkLeave\";\n        const TOOLTIP_SHOW = \"tooltipShow\";\n        const TOOLTIP_HIDE = \"tooltipHide\";\n        const NODE = 'node';\n\n        const { Tooltip, ContentTemplates } = dataviz.SankeyTooltip;\n\n        const Sankey = Widget.extend({\n            init: function(element, userOptions) {\n                kendo.destroy(element);\n                $(element).empty();\n\n                this.options = kendo.deepExtend({}, this.options, userOptions, { rtl: isRtl(element) });\n\n                this._parseAriaLabelTemplates(this.options);\n\n                Widget.fn.init.call(this, element);\n\n                this.wrapper = this.element;\n                this._initSankey();\n\n                this._attachEvents();\n\n                kendo.notify(this, dataviz.ui);\n\n                if (this._showWatermarkOverlay) {\n                    this._showWatermarkOverlay(this.wrapper[0]);\n                }\n            },\n\n            setOptions: function(options) {\n                var currentOptions = this.options;\n\n                this.events.forEach(eventName => {\n                    if (currentOptions[eventName]) {\n                        this.unbind(eventName, currentOptions[eventName]);\n                    }\n                });\n\n                const resultOptions = kendo.deepExtend(options, { rtl: isRtl(this.element) });\n                this._parseAriaLabelTemplates(resultOptions);\n                this._instance.setOptions(resultOptions);\n\n                this.bind(this.events, this._instance.options);\n            },\n\n            _initSankey: function() {\n                const themeOptions = this._getThemeOptions(this.options);\n                const { seriesColors: nodeColors, axisDefaults, seriesDefaults, legend, title } = themeOptions;\n                const { line: links, labels } = axisDefaults;\n                const strokeColor = seriesDefaults.labels.background;\n\n                this._createSankey(this.options, { nodeColors, links, labels: { ...labels, stroke: { color: strokeColor } }, legend, title });\n                this.options = this._instance.options;\n            },\n\n            _createSankey: function(options, themeOptions) {\n                this._instance = new KendoSankey(this.element[0], options, themeOptions);\n            },\n\n            _getThemeOptions: function(userOptions) {\n                var themeName = (userOptions || {}).theme;\n\n                if (themeName && dataviz.SASS_THEMES.indexOf(themeName.toLowerCase()) !== -1) {\n                    return dataviz.autoTheme().chart;\n                }\n\n                if (defined(themeName)) {\n                    var themes = dataviz.ui.themes || {};\n                    var theme = themes[themeName] || themes[themeName.toLowerCase()] || {};\n                    return theme.chart || {};\n                }\n            },\n\n            _parseAriaLabelTemplates: function(options) {\n                const { nodes, links } = options;\n\n                if (nodes && nodes.labels && nodes.labels.ariaTemplate) {\n                    nodes.labels.ariaTemplate = template(nodes.labels.ariaTemplate);\n                }\n\n                if (links && links.labels && links.labels.ariaTemplate) {\n                    links.labels.ariaTemplate = template(links.labels.ariaTemplate);\n                }\n            },\n\n            _attachEvents: function() {\n                this.events.forEach(eventName => {\n                    this._instance.bind(eventName, event => {\n                        if (this._events[eventName]) {\n                            this._events[eventName].forEach(handler => handler.call(undefined, event));\n                        }\n                    });\n                });\n\n                this._instance.bind(TOOLTIP_SHOW, this.tooltipShow.bind(this));\n                this._instance.bind(TOOLTIP_HIDE, this.tooltipHide.bind(this));\n            },\n\n            tooltipShow: function(e) {\n                const { tooltip, rtl } = this.options;\n                const { nodeTemplate, linkTemplate, offset } = tooltip;\n\n                if (!this._tooltip) {\n                    const doc = this.element[0].ownerDocument;\n                    this._tooltip = new Tooltip(doc.createElement('div'), { rtl });\n                    const { appendTo = doc.body } = this.options.tooltip;\n                    this._tooltip.element.appendTo($(appendTo));\n                }\n\n                const currentTemplate = template((e.targetType === NODE ? nodeTemplate : linkTemplate) || ContentTemplates[e.targetType]);\n                const value = encode(kendo.format(this.options.messages.tooltipUnits, defined(e.nodeValue) ? e.nodeValue : e.dataItem.value));\n\n                this._tooltip.setContent(currentTemplate({ dataItem: e.dataItem, value, rtl }));\n                this._tooltip.setPosition(e.tooltipData.popupAlign, e.tooltipData.popupOffset, offset);\n                this._tooltip.show();\n            },\n\n            tooltipHide: function() {\n                if (this._tooltip) {\n                    this._tooltip.destroy();\n                    this._tooltip = null;\n                }\n            },\n\n            exportVisual: function(exportOptions) {\n                return this._instance.exportVisual(exportOptions);\n            },\n\n            destroy: function() {\n                Widget.fn.destroy.call(this);\n                this.tooltipHide();\n                this._instance.destroy();\n                this._instance = null;\n            },\n\n            events: [\n                NODE_CLICK,\n                LINK_CLICK,\n                NODE_ENTER,\n                NODE_LEAVE,\n                LINK_ENTER,\n                LINK_LEAVE\n            ],\n            options: {\n                name: \"Sankey\",\n                theme: \"default\",\n                tooltip: {\n                    offset: 12\n                },\n                messages: {\n                    tooltipUnits: \"({0} Units)\"\n                }\n            }\n        });\n\n        dataviz.ExportMixin.extend(Sankey.fn);\n\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Sankey.fn);\n        }\n\n        dataviz.ui.plugin(Sankey);\n\n        kendo.deepExtend(dataviz, {\n            Sankey\n        });\n\n    })(window.kendo.jQuery);\n\n    let __meta__ = {\n        id: \"dataviz.sankey\",\n        name: \"Sankey\",\n        category: \"dataviz\",\n        description: \"The Sankey widget uses modern browser technologies to render high-quality data visualizations in the browser.\",\n        depends: [ \"data\", \"userevents\", \"drawing\", \"dataviz.core\", \"dataviz.themes\" ],\n        features: [{\n            id: \"dataviz.sankey-pdf-export\",\n            name: \"PDF export\",\n            description: \"Export Sankey as PDF\",\n            depends: [ \"pdf\" ]\n        }]\n    };\n\n    var kendo$1 = kendo;\n\n    return kendo$1;\n\n}));\n"]}